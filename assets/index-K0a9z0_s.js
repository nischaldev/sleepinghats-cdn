const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home.index-CkBpb0u7.js","assets/mainView.class-C4NLGCWW.js","assets/modal.service-BkQYd9Kn.js","assets/mftsccs-browser-DeTC_MD3.js","assets/codemirror-B3vgQINq.js","assets/vendor-Cs_0E_Xj.js","assets/ckeditor-Cw9bcqxY.js","assets/vendor-TRZluGMH.css","assets/eslint4b-BLWGvIOa.js","assets/prettier-ClL2wQep.js","assets/modal-Bdbd8Hwt.css","assets/navbar.component-kI3Lqx7m.js","assets/loginModal.service-COGZugPd.js","assets/loginModal-DGhNYttL.css","assets/home-BRuQr2K9.css","assets/preview.index-PefiHSUs.js","assets/page-preview.index-C7z7f3xa.js","assets/page-preview-BJCVd99J.css","assets/documentation.index-B336QW_u.js","assets/highlight-CFrhCzdo.js","assets/highlight-ZgkIHsf0.css","assets/documentation-Dc24vCVe.css","assets/subscription.index-DlKG4hcf.js","assets/video-tutorial.index-BMoqV4_M.js","assets/video-tutorial-Dg46rKRD.css","assets/community.index-BGqPbWwA.js","assets/community-tn0RQdqM.css","assets/initialLoadWICO-B-XN5LRV.js"])))=>i.map(i=>d[i]);
import{r as O,a as X,D as Z,L as W,X as p,l as ee,I as te,J as F,M as ne,w as L,t as oe,j as ae,y as re,Q as se,W as ie,h as ce}from"./mftsccs-browser-DeTC_MD3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const f={baseURL:"https://boomconsole.com/api/v1",baseNodeUrl:"https://boomconsole.com",boomURL:"https://boomconsole.com",aiURL:"https://www.ai.freeschema.com/api",deployURL:"https://deploy.freeschema.com",CLIENT_ID:"636550695311-ctc09991hhu6iav4kkhnp1ge537nec2i.apps.googleusercontent.com",logserver:"https://logger.freeschema.com",enableSW:!1,discussion_community:101765915,ai_widget:101934087,visual_prototype_widget:101938499,video_tutorial_widget:102040172,subscriptionId:102121109,documentation_preview_widget:102097744,folder_widget:102400016,assets_widget:102410590},le=f?.boomURL;async function Fe(e,t,n){const a=await O(`the_${e}`,"",!0,t,4,999);for(const[o,r]of Object.entries(n)){let s=o;const i=await O(`${s}`,`${r}`,!1,t,4,999);await de(a,i,s)}return a}async function de(e,t,n){const a=e.userId,o=999,r=999,s=e.type?.characterValue,i=n,c=s+"_"+i,d=await X(c,o,r,a);await Z(e.id,t.id,d.id,1e3)}async function ue(e,t){try{const n=new Headers;return n.append("Content-Type","application/json"),n.append("Authorization",`Bearer ${t}`),await(await fetch(`${le}/api/get-entity-from-user?userConceptId=${e}`,{method:"GET",headers:n,redirect:"follow"})).json()}catch(n){throw console.error(n),n}}async function Je(e){const t=await ue(e?.data?.userConcept,e?.data?.token);let n={token:e?.data?.token,refreshToken:e?.data?.refreshtoken,email:e?.data?.email,userId:e?.data?.entity?.[0]?.userId,userConcept:e?.data?.userConcept,entityId:t?.entity,amcode:btoa(JSON.stringify(e?.data?.roles))};return W(n.token),localStorage.setItem("profile",JSON.stringify(n)),!0}async function v(){return new Promise(e=>{let t=localStorage?.getItem("profile")||"";if(t){const n=JSON.parse(t);e(n)}else e()})}async function he(){return new Promise(e=>{let t=localStorage?.getItem("tempwidget")||"";if(t){const n=JSON.parse(t);e(n)}else e()})}const me=f?.baseNodeUrl;class w{static instance;static getInstance(){return w.instance||(w.instance=new w),w.instance}async getLoginInfo(){const t=await v(),n=await this.checkIfUserIsAdmin(t?.userConcept);let a="",o=!1,r=!1;if(t?.token){o=!0;let s="",i="";if(t?.entityId){let c=new p;c.typeConnection="the_entity_firstname",c.name="entity_firstname";let d=new p;d.typeConnection="the_entity_lastname",d.name="entity_lastname";let u=new p;u.typeConnection="the_entity_tour_status",u.name="entity_tour_status";let l=new p;l.type="the_entity",l.name="top",l.conceptIds=[t.entityId],l.freeschemaQueries=[c,d,u],l.outputFormat=ee;let h;await te(l,"").subscribe(m=>{h=m}),s=h?.[0]?.the_entity?.the_entity_firstname?.the_firstname||"",i=h?.[0]?.the_entity?.the_entity_lastname?.the_lastname||"",r=h?.[0]?.the_entity?.the_entity_tour_status?.the_tour_status==="true"}a=`
        <div id="profileIcon" class="position-relative" onclick="headerFunctions.openUserActionModel()">
          ${t?.email?.slice(0,1)}
          <div id="profileDropdown">
            <div class="user-email">
              <span class="material-symbols-outlined">account_circle</span>
              <div class="user-info">
                <div class="full-name">${s} ${i}</div>
                <div class="email">${t?.email}</div>
              </div>
            </div>
            <!-- <router-link href="" class="dropdown-item danger" onclick="logout(event)">
              <span class="material-symbols-outlined">logout</span>
              Logout
            </router-link> -->
            <router-link class="dropdown-item danger" id="wico_btn-logout">
              <span class="material-symbols-outlined">logout</span>
              Logout
            </router-link>
          </div>
        </div>
      `}else o=!1,a=`
        <div class="d-flex flex-row gap-2">
          <!-- <router-link class="btn btn-primary" onclick="openLoginModal(event)">Login</router-link>
          <router-link class="btn btn-secondary" onclick="openSignupModal(event)">Signup</router-link> -->

          <router-link class="btn btn-primary wico_btn-openLoginModal">Login</router-link>
          <router-link class="btn btn-secondary wico_btn-openSignupModal">Signup</router-link>
        </div>
      `;return{loginInfoHTML:a,isLoggedIn:o,isAdmin:n,tourStatus:r}}async checkIfUserIsAdmin(t){try{return(await F(t))?.accessId===3}catch(n){return console.error("Error fetching user concept:",n),!1}}async logout(){const t=await he();await ne(t?.id),localStorage.removeItem("profile"),localStorage.removeItem("tempwidget"),location.reload()}async checkAndUpdateToken(){try{const t=await v();if(!t?.token){console.warn("No token found in local storage.");return}const n=t.token,a=t.refreshToken,o=new Headers;o.append("Content-Type","application/json");const r={accessToken:n,refreshToken:a},i=await(await fetch(`${me}/api/Auth/refresh`,{method:"POST",headers:o,body:JSON.stringify(r)})).json();if(i.success&&i.data){const{accessToken:c,refreshToken:d}=i.data;t.token=c,t.refreshToken=d,localStorage.removeItem("profile"),localStorage.setItem("profile",JSON.stringify(t))}else this.logout()}catch(t){console.error("Error refreshing token:",t)}}}const pe=w.getInstance();(function(){const t=window.fetch;window.fetch=async(...n)=>{const a=n[1]||{};try{const o=await t(...n);if(o.status===401){console.warn("401 Unauthorized - Refreshing token"),await pe.checkAndUpdateToken();const r=await v();if(!r?.token)return console.error("Token refresh failed. User not logged in."),o;if(a.headers){const s=new Headers(a.headers);s.set("Authorization",`Bearer ${r.token}`),s.has("Content-Type")||s.set("Content-Type","application/json"),a.headers=s}return t(n[0],a)}return o}catch(o){throw console.error("Intercepted Fetch Error:",o),o}}})();const fe="modulepreload",ge=function(e){return"https://cdn.jsdelivr.net/gh/nischaldev/sleepinghats-cdn@master/"+e},N={},g=function(t,n,a){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=s?.nonce||s?.getAttribute("nonce");o=Promise.allSettled(n.map(c=>{if(c=ge(c),c in N)return;N[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":fe,d||(l.as="script"),l.crossOrigin="",l.href=c,i&&l.setAttribute("nonce",i),document.head.appendChild(l),d)return new Promise((h,m)=>{l.addEventListener("load",h),l.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return o.then(s=>{for(const i of s||[])i.status==="rejected"&&r(i.reason);return t().catch(r)})};function C(e,t=0){let n=`<ul style="list-style: none; margin: 10px 0px; ${t==0?" padding-left: 0px; ":""}" id="sortable-list">`;for(let a=0;a<e.length;a++){const o=e[a];o.edit?n+=`
                <li style="border: 1px solid lightgray; padding: 5px 10px; margin-bottom: 5px;" data-page-id="${o.page}">
                    <div style="display: flex; align-items: start; gap: 10px; justify-content: space-between;">
                        <textarea id="menuName" class="form-control form-control-sm" rows="1" placeholder="Name" style="flex:1">${o.name??""}</textarea>
                        <input id="menuLink" class="form-control form-control-sm" placeholder="link" value="${o.link??""}" ${typeof o.page=="number"?"disabled":""} style="flex: 1"/>
                        <textarea id="menuAction" class="form-control form-control-sm" rows="1" placeholder="Action Function" style="flex: 2">${o.action??""}</textarea>
                        <div style="dispaly: flex; align-items: center; justify-content: center; gap: 5px">
                            <input class="form-check-input" type="checkbox" id="menuAuth" ${o.auth==!0?"checked":""} />
                            <label class="form-check-label">Auth</label>
                        </div>
                        <div style="width: 100px; display: flex; align-items: center; gap: 10px;">
                            <a onclick="handleMenuAction(event, 'cancel', ${a}, ${o.page})" role="button"><img src="https://boomconcole.com/freeschema/fbb325b1-911e-4ea2-9c6d-7510c62009e6.svg" height="16px" alt="remove" /></a>
                            <a onclick="handleMenuAction(event, 'update', ${a}, ${o.page})" role="button"><img src="https://boomconcole.com/freeschema/32f26593-df4f-46bc-beef-9f8a7b96343f.png" height="16px" alt="remove" /></a>
                        </div>
                    </div>
                </li>
                <li>${o.menus?`${C(o.menus,t+1)}`:""}</li>
            `:n+=`
                <li style="border: 1px solid lightgray; padding: 5px 10px; margin-bottom: 5px;" data-page-id="${o.page}">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span style="flex: 1">${o.name}</span>
                        <span style="flex: 1">${o.link}</span>
                        <span style="width: 120px;">${o.action?"Action: <b>Yes</b>":""}</span>
                        <span style="width: 120px;">${o.auth?"Auth: <b>True</b>":"Auth: <b>False</b>"}</span>
                        <div style="width: 100px; display: flex; align-items: center; gap: 10px;">
                            ${a>0?`<a onclick="handleMenuAction(event, 'up', ${a}, ${o.page})" role="button"><img src="https://boomconcole.com/freeschema/f0f13015-1d73-4268-987c-7d1bbb661ee7.png" height="16px" alt="up" /></a>`:""}
                            ${o.menus.length>0?'<a role="button"><img src="https://boomconcole.com/freeschema/05deeedc-b791-4ff4-8a25-751a1c7a4fe8.png" height="16px" alt="right" /></a>':""}
                            ${a<e.length-1?`<a onclick="handleMenuAction(event, 'down', ${a}, ${o.page})" role="button"><img src="https://boomconcole.com/freeschema/3c5e1681-4e99-4dbe-b178-02dad7118c02.png" height="16px" alt="down" /></a>`:""}
                            ${t>0?'<a role="button"><img src="https://boomconcole.com/freeschema/2ad5cd15-e7fc-4578-9479-fe516e5fb9d5.png" height="16px" alt="left" /></a>':""}
                            <a onclick="handleMenuAction(event, 'remove', ${a}, ${o.page})" role="button"><img src="https://boomconcole.com/freeschema/fbb325b1-911e-4ea2-9c6d-7510c62009e6.svg" height="16px" alt="remove" /></a>
                            <a onclick="handleMenuAction(event, 'edit', ${a}, ${o.page})" role="button"><img src="https://boomconcole.com/freeschema/98218250-6ad3-4d24-af6f-0f9d79895c44.png" height="16px" alt="remove" /></a>
                        </div>
                    </div>
                </li>
                <li>${o.menus?`${C(o.menus,t+1)}`:""}</li>
            `}return n+="</ul>",n}function Be(e){console.log("menus",e);const t=C(e),n=document.getElementById("menu-items");n&&(n.innerHTML=t);let a=null;document.querySelectorAll("#sortable-list li").forEach(o=>{o.addEventListener("dragstart",r=>{a=o,r.dataTransfer.effectAllowed="move"}),o.addEventListener("dragover",r=>{r.preventDefault(),o.classList.add("drag-over")}),o.addEventListener("dragleave",()=>{o.classList.remove("drag-over")}),o.addEventListener("drop",r=>{r.preventDefault(),o.classList.remove("drag-over"),a!==o&&!o.contains(a)&&o?.parentNode?.insertBefore(a,o.nextSibling)}),o.addEventListener("dragend",()=>{document.querySelectorAll(".drag-over").forEach(r=>r.classList.remove("drag-over"))})})}async function _e(e){console.log("projectId",e);let t;if(e||(t=q()),!e&&!t?.projectId)return console.log("Project Id not found"),[];if(!e&&t.projectId&&(e=t?.projectId),console.log("projectId 2",e),!e)return[];const n=["the_item_menu_name","the_item_menu_link","the_item_menu_action","the_item_menu_auth","the_item_menu_order","the_item_menu_page"],a=new p;a.typeConnection="the_menu_s_item",a.selectors=n;function o(u,l=5){if(l==5)return;const h=new p;h.typeConnection="the_menu_s_item",h.selectors=n,u.name=l.toString(),u.freeschemaQueries=[h];const m=l+1;o(h,m)}const r=new p;r.conceptIds=[e],o(r,1);const s=await L(r,"");console.log("valllu",s);const i=s?.[0]?.the_project?.the_menu_s_item||[],c=(u=[])=>{let l=[];for(let h=0;h<u.length;h++){const m=u[h];l.push({name:m?.the_item_menu?.the_item_menu_name?.the_name??"",link:m?.the_item_menu?.the_item_menu_link?.the_link??"",action:m?.the_item_menu?.the_item_menu_action?.the_action??"",page:m?.the_item_menu?.the_item_menu_page?.the_page?Number(m?.the_item_menu?.the_item_menu_page?.the_page):"",order:m?.the_item_menu?.the_item_menu_order?.the_order?Number(m?.the_item_menu?.the_item_menu_order?.the_order):0,auth:m?.the_item_menu?.the_item_menu_auth?.the_auth=="true",menus:c(m?.the_item_menu?.the_menu_s_item)??[]})}return l.sort((h,m)=>h.order-m.order)};return c(i)}async function qe(e,t=[]){console.log("menus",t);const n=await new oe;try{await n.initialize();const a=await F(e);await ae(e,"the_menu_s_item"),await J(a,t,n),await n.commitTransaction(),console.log("output concept",e)}catch(a){console.error(a),await n.rollbackTransaction()}}async function J(e,t=[],n){for(let a=0;a<t.length;a++){const o=t[a],r=await n.MakeTheInstanceConceptLocal("the_item_menu","",!0,999,4);await n.CreateConnection(e,r,"the_menu_s_item");for(let[s,i]of Object.entries(o))if(console.log("key",s,i),!!["name","link","action","auth","order","page","menus"].includes(s)&&!(s=="menus"&&!Array.isArray(i)))if(s=="menus")await J(r,i,n);else{const d=await n.MakeTheInstanceConceptLocal("the_"+s,i,!0,999,4);await n.CreateConnection(r,d,"the_item_menu_"+s)}}}const ye=async()=>{const e=f.enableSW;"serviceWorker"in navigator&&e&&await new Promise((t,n)=>{navigator.serviceWorker.register("/sw.js").then(a=>{a.addEventListener("updatefound",()=>{const o=a.installing;o?.addEventListener("statechange",()=>{o.state==="installed"&&navigator.serviceWorker.controller&&(o.postMessage("skipWaiting"),setTimeout(()=>{confirm("A reload is required to update to latest")&&window.location.reload()},500))})}),t(void 0)}).catch(a=>{console.error("Service Worker Init error",a),n(a)}),setTimeout(()=>{n()},3e4)})},B="wico_site";function q(){const e=atob(localStorage.getItem(B)||"");return e?JSON.parse(e):{}}function Q(e,t){const n=q();n[e]=t,localStorage.setItem(B,btoa(JSON.stringify(n)))}function H(){window.wico={fetchMenus:_e}}async function we(){await ye()}const y={PAGE_COMP_NAME:"page",WIDGET_COMP_NAME:"widget",PROJECT_COMP_NAME:"project"},be={ENTITY_PAGE_LINKER:"s_page",PAGE_WIDGET_LINKER:"body",ENTITY_PROJECT_LINKER:"s_project",PROJECT_PAGE_LINKER:"s_page"};let _=[],E,b="",R=!1,$="";const k="storeOwner",I=async e=>{Pe(e),await Promise.all([Ce(e),Se(e)]),Q("projectId",e),H(),K()},ve=async e=>{document.title=e.storeName||"Store",V(e.storeLogo),E=e.mainPageId,b=e.projectName,_=e.pagesList,localStorage.setItem(k,btoa(e.entityId)),Q("projectId",e.projectId),H(),K()},K=()=>{window.addEventListener("popstate",()=>P(window.location.href)),document.addEventListener("click",e=>{const n=e.target.closest("a");if(!n||n.target==="_blank"||n.hasAttribute("download")||n.getAttribute("rel")==="external"||e.defaultPrevented||e.button!==0||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||n.origin!==location.origin)return;const a=n.getAttribute("href");!a||a.startsWith("#")||a.startsWith("mailto:")||(e.preventDefault(),history.pushState({},"",a),P(a))},!0),P(window.location.href)},P=async e=>{const{pathname:t}=new URL(e,window.location.origin);if($==t)return;$=t;const n=Ee(t),a=ke(e),o=document.head.querySelectorAll("style#mystyleid");if(Array.from(o).forEach(r=>r.remove()),console.log("abc",t,_,n),n){const r=_.find(s=>s.path==n.route);x(r,{params:n?.params,queryParams:a})}else if(t==="/"&&E){const r=_.find(s=>s.id==E);x(r,{params:{},queryParams:a})}else{const r=_.find(s=>s.path=="/404");r?z(r.page):document.querySelector("#app").innerHTML="<h1>404</h1>"}document.getElementById("global-loader")?.classList.add("d-none")},x=async(e,t)=>{Le(e),e.page?await z(e.page,t):console.warn("No page content Found")};function ke(e){const{searchParams:t}=new URL(e,window.location.origin),n={};for(const[a,o]of t.entries())n[a]?n[a]=Array.isArray(n[a])?[...n[a],o]:[n[a],o]:n[a]=o;return n}const Ee=e=>{const a=[..._.map(o=>o.path)].sort((o,r)=>{const s=o.split("/").filter(Boolean),i=r.split("/").filter(Boolean),c=s.filter(u=>u.startsWith(":")).length,d=i.filter(u=>u.startsWith(":")).length;return c!==d?c-d:i.length-s.length});console.log("routes",a);for(let o=0;o<a.length;o++){const s=(a[o]?.startsWith("/")?a[o]:`/${a[o]}`).split("/").filter(Boolean),i=e.split("/").filter(Boolean);if(s.length!==i.length)continue;const c={};if(s.every((u,l)=>u.startsWith(":")?(c[u.slice(1)]=i[l],!0):u===i[l]))return{route:a[o],params:c}}return null},z=async(e,t)=>{const n=document.querySelector("#app");n&&await re(e,n,t)},Le=e=>{if(R)return;const t=new URL(window.location.href).hostname.split(".")[0].split("-")[1],n=Ie(t,e),a=new Blob([JSON.stringify(n)],{type:"application/json"}),o=URL.createObjectURL(a),r=document.createElement("link");r.rel="manifest",r.href=o,document.head.appendChild(r),R=!0};function Ie(e,t){return{name:`${b||t.title||t.slug||e} - ${e}`,short_name:`PWA-${b||e}`,start_url:location.origin+"/index.html",display:"standalone",theme_color:e?"#ff6600":"#ffffff",icons:[{src:`${location.origin}/icons/icon-192x192.png`,sizes:"192x192",type:"image/png"},{src:`${location.origin}/icons/icon-512x512.png`,sizes:"512x512",type:"image/png"}]}}const Se=async e=>{try{localStorage.removeItem(k);const t=new p;t.name="entity",t.typeConnection="the_entity_s_project",t.reverse=!0;const n=new p;n.name="project",n.conceptIds=[e],n.freeschemaQueries=[t],n.outputFormat=se;const a=await L(n,"");if(!a?.[0]?.the_project?.the_entity_s_project_reverse?.[0]?.id)return;a?.[0]?.the_project?.the_entity_s_project_reverse?.length==1&&localStorage.setItem(k,btoa(a[0].the_project.the_entity_s_project_reverse[0].id.toString()));for(let o=0;o<a?.[0]?.the_project?.the_entity_s_project_reverse?.length;o++)(a?.[0]?.the_project?.the_entity_s_project_reverse[o]).id!=102176333&&localStorage.setItem(k,btoa(a[0].the_project.the_entity_s_project_reverse[0].id.toString()))}catch(t){console.error(t)}};async function Pe(e){try{const t=new p;t.name="store",t.typeConnection="the_project_refers",t.selectors=["the_store_name","the_store_logo"];const n=new p;n.name="project",n.conceptIds=[e],n.freeschemaQueries=[t];const o=(await L(n,""))?.[0]?.the_project?.the_project_refers?.the_store,r=o?.the_store_name?.the_name;document.title=r||"Store",V(o?.the_store_logo?.the_logo)}catch(t){console.error(t)}}function Ae(e){return new Promise((t,n)=>{const a=new Image;a.crossOrigin="anonymous",a.src=e,a.onload=()=>{const r=document.createElement("canvas");r.width=r.height=512;const s=r.getContext("2d");s?.clearRect(0,0,r.width,r.height);const i=a.width/a.height;let c=512,d=512;i>1?d=512/i:c=512*i;const u=(512-c)/2,l=(512-d)/2;s?.drawImage(a,u,l,c,d);const h=r.toDataURL("image/png");t(h)},a.onerror=()=>{n(new Error("Image failed to load. Check CORS."))}})}async function Ce(e){const n=(await v())?.token;let a=new p;a.name="page",a.typeConnection=`the_${y.PROJECT_COMP_NAME}_${be.PROJECT_PAGE_LINKER}`,a.selectors=[`the_${y.PAGE_COMP_NAME}_title`,`the_${y.PAGE_COMP_NAME}_slug`,`the_${y.PAGE_COMP_NAME}_body`];let o=new p;o.name="project",o.conceptIds=[e],o.selectors=[`the_${y.PROJECT_COMP_NAME}_name`,`the_${y.PROJECT_COMP_NAME}_main_page`],o.freeschemaQueries=[a],o.outputFormat=ie;const r=await L(o,n);let s={mainPageId:r?.[0]?.data?.the_project?.the_project_main_page?.id,name:r?.[0]?.data?.the_project?.the_project_name?.data.the_name||"",pages:r?.[0]?.data?.the_project?.the_project_s_page?.map(i=>({id:i?.id,title:i?.data?.the_page?.the_page_title?.data?.the_title||"",path:i?.data?.the_page?.the_page_slug?.data?.the_slug||"",page:i?.data?.the_page?.the_page_body?.id}))||[]};E=s.mainPageId,b=s.name,_=s.pages}function V(e=""){var t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.head.appendChild(t),setTimeout(()=>t?.remove(),1e4)),e&&Ae(e).then(n=>{t.href=n}).catch(n=>{console.error(n),t.href="https://boomconcole.com/freeschema/127b5f42-f453-4904-bf4d-d2a6abc9327c.png"})}const A=[{path:"/",linkLabel:"Home",content:async()=>(await g(()=>import("./home.index-CkBpb0u7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))).default},{path:"/preview",linkLabel:"Preview",content:async()=>(await g(()=>import("./preview.index-PefiHSUs.js"),__vite__mapDeps([15,3,1]))).default},{path:"/page-preview/:id",linkLabel:"Page Preview",content:async()=>(await g(()=>import("./page-preview.index-C7z7f3xa.js"),__vite__mapDeps([16,3,2,4,5,6,7,8,9,10,17]))).default,isAuthenticated:!0},{path:"/documentation",linkLabel:"Documentation",content:async()=>(await g(()=>import("./documentation.index-B336QW_u.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,19,20,11,12,13,21]))).default},{path:"/subscription",linkLabel:"Subscription",content:async()=>(await g(()=>import("./subscription.index-DlKG4hcf.js"),__vite__mapDeps([22,3,1,2,4,5,6,7,8,9,10,11,12,13,21]))).default,isAuthenticated:!0},{path:"/video-tutorial",linkLabel:"videos",content:async()=>(await g(()=>import("./video-tutorial.index-BMoqV4_M.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12,13,24]))).default},{path:"/Community",linkLabel:"Community",content:async()=>(await g(()=>import("./community.index-BGqPbWwA.js"),__vite__mapDeps([25,3,1,11,2,4,5,6,7,8,9,10,12,13,26]))).default}],j=document.getElementById("app"),Te=()=>{let e=localStorage?.getItem("profile")||"";return e?!!JSON.parse(e)?.token:!1},Oe=e=>new RegExp("^"+e.replace(/:\w+/g,"(.+)")+"$"),M=e=>{const t=e.result.slice(1),n=Array.from(e.route.path.matchAll(/:(\w+)/g)).map(a=>a[1]);return Object.fromEntries(n.map((a,o)=>[a,t[o]]))},U=async()=>{const e=new URLSearchParams(location.search);return Object.fromEntries(e.entries())};async function T(){let t=A.map(o=>({route:o,result:location.pathname.match(Oe(o.path))})).find(o=>o.result!==null);if(!t)t={route:A.find(r=>r.path==="/404"),result:[location.pathname]};else if(t?.route?.isAuthenticated&&!Te()){const s=A.find(i=>i.path==="/");t={route:s,result:s?.path},history.pushState(null,"",s?.path)}const n=await t.route.content({...await M(t),...await U()}),a=new n({...await M(t),...await U()});j.innerHTML="",await a?.mount(j)}const G=async e=>{const t=document.getElementById("global-loader");t?.classList.remove("d-none");try{history.pushState(null,"",e),await T()}finally{t?.classList.add("d-none")}},Qe=async e=>{window.history.pushState({route:e},"",e),T()},Ne=()=>{const e=window.location.pathname+window.location.search;G(e)},Re=()=>{customElements.define("router-link",class extends HTMLElement{constructor(){super(),this.handleClick=this.handleClick.bind(this),this.href&&this.attachShadow({mode:"open"})}connectedCallback(){if(this.href){const e=document.createElement("a");e.href=this.href,this.forwardAttributes(e),e.setAttribute("part","link");const t=document.createElement("slot");e.appendChild(t),this.shadowRoot&&this.shadowRoot.appendChild(e),this.addEventListener("click",this.handleClick),e.href&&this.setAttribute("href",e.href)}else this.addEventListener("click",this.handleClick)}forwardAttributes(e){["target","download","rel","hreflang","type","title","tabindex","accesskey"].forEach(n=>{this.hasAttribute(n)&&e.setAttribute(n,this.getAttribute(n))})}disconnectedCallback(){this.removeEventListener("click",this.handleClick)}handleClick(e){const t=this.getAttribute("target"),n=this.getAttribute("href");t==="_blank"||e.ctrlKey||e.metaKey||e.button===1||this.hasAttribute("download")||n&&!n.startsWith("http")&&!n.startsWith("//")&&(e.preventDefault(),G(n))}set href(e){this.setAttribute("href",e);const t=this.shadowRoot&&this.shadowRoot.querySelector("a");t&&(t.href=e)}get href(){return this.getAttribute("href")}set target(e){e&&this.setAttribute("target",e)}get target(){return this.getAttribute("target")}})};function $e(){Ne(),Re(),window.addEventListener("popstate",T)}const xe=async()=>{const e=["localhost","visualwidget.boomconcole.com","develop.freeschema.com"],t=window.location.hostname,n=t.split(".")?.[0]?.match(/preview-(\d+)/)?.[1];if(n)I(parseInt(n));else if(e.includes(t))await g(()=>import("./initialLoadWICO-B-XN5LRV.js"),__vite__mapDeps([27,3,12,2,4,5,6,7,8,9,10,13])),$e();else try{je(t)}catch(a){console.error(a),S()}};function S(){const e=document.getElementById("global-loader");e&&e.setAttribute("style","display: none !important");const t=document.getElementById("app");t&&(t.innerHTML="<h1>404</h1>")}function je(e=""){try{const t=JSON.parse(sessionStorage.getItem("cacheServers")??"[]")||[],n=t.length>0&&t?.[0]!="https://boomconsole.com"?t[0]:"https://deploy.freeschema.com";console.log("server",n),fetch(n+"/api/project-deploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}).then(async a=>{const o=await a.json();ve(o.data)}).catch(a=>{console.error(a),D(e);try{const r=JSON.parse(sessionStorage.getItem("domainRecord")??"{}");if(r&&r.expiresAt>Date.now()){const s=r.value;s&&I(parseInt(s));return}}catch(o){console.error(o),S()}})}catch(t){console.error(t),D(e)}}function D(e=""){fetch(f.baseURL+"/dns/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}).then(async t=>{const n=await t.json();if(!n)Me();else{const a=n?.startsWith("http")?n:"http://"+n,r=new URL(a).hostname?.split(".")?.[0]?.match(/preview-(\d+)/)?.[1];if(r)I(parseInt(r));else throw new Error("Path Not Valid")}}).catch(t=>{console.error(t),S()})}function Me(){fetch(f.baseURL+"/cname").then(async e=>{const t=await e.json()||[];if(t?.[0]){const n=t[0]?.startsWith("http")?t[0]:"http://"+t[0],o=new URL(n).hostname?.split(".")?.[0]?.match(/preview-(\d+)/)?.[1];if(o)I(parseInt(o));else throw new Error("Path Not Valid")}else throw new Error("Doamin Not Found")}).catch(e=>{console.error(e),S()})}let Y=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),Y=e});const Ue={activate:f.enableSW,scope:"/",pathToSW:"/serviceWorker.bundle.js",manual:!0};await we();ce(f?.boomURL,f?.aiURL,"",f?.baseNodeUrl,void 0,"widget_conceptualizer",Ue,{logApplication:!1,logPackage:!1,isTest:!1,accessTracker:!1},{logserver:f.logserver});const De=await v();W(De?.token);xe();window.PWAInstallHandler=(()=>{let e=null,t=null,n=null;return{init:({onInstall:s,onDismiss:i})=>{t=s,n=i,e=Y,window.addEventListener("appinstalled",()=>{console.log("PWA installed successfully!"),t&&t()})},isInstalled:()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator?.standalone,showInstallPrompt:()=>{console.log("deferedPrompt",e),e&&(e.prompt(),e.userChoice.then(s=>{s.outcome==="accepted"?(console.log("User installed the PWA."),t&&t()):(console.log("User dismissed the install prompt."),n&&n()),e=null}))}}})();export{w as A,y as C,be as L,he as a,de as b,Fe as c,Be as d,f as e,_e as f,v as g,qe as h,G as r,Je as s,Qe as u};
