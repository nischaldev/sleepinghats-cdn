var Ur={};/*! For license information please see main.bundle.js.LICENSE.txt */var Ws={2:(Q,O,y)=>{y.d(O,{s:()=>e});var N=y(8286),b=y(9581),n=y(1412),u=y(3518),T=y(1863),w=y(1245),i=function(d,f,v,S){return new(v||(v=Promise))(function(r,a){function t(m){try{C(S.next(m))}catch(I){a(I)}}function c(m){try{C(S.throw(m))}catch(I){a(I)}}function C(m){var I;m.done?r(m.value):(I=m.value,I instanceof v?I:new v(function(E){E(I)})).then(t,c)}C((S=S.apply(d,[])).next())})};function e(d){var f=arguments;return i(this,void 0,void 0,function*(){const v=w.Logger.logfunction("GetAllConnectionsOfComposition",f);var S=[];if((S=yield N.d.GetConnectionsOfConcept(d)).length==0)S=yield o(d);else{var r=yield o(d);(0,n.e)(r,S),S=r}return w.Logger.logUpdate(v),S})}function o(d){var f=arguments;return i(this,void 0,void 0,function*(){const v=w.Logger.logfunction("GetAllConnectionsOfCompositionOnline",f);var S=[];try{(0,u.Xr)("application/json");const a=new Headers,t=new FormData;t.append("composition_id",d.toString());const c=yield fetch(b.B.GetAllConnectionsOfCompositionUrl(),{method:"POST",headers:a,body:t});if(console.log("this is getting connection from online",b.B.GetAllConnectionsOfCompositionUrl(),d),!c.ok)throw(0,T.ry)(c),new Error(`Error! status: ${c.status}`);const C=yield c.json();for(var r=0;r<C.length;r++)N.d.AddConnection(C[r]),S.push(C[r]);return w.Logger.logUpdate(v),S}catch(a){a instanceof Error?console.log("Get all connection of composition error : ",a.message):console.log("Get all connection of composition error : ",a),(0,T.Mb)(a,b.B.GetAllConnectionsOfCompositionUrl()),(0,T.ey)(v,"GetAllConnectionsOfCompositionOnline",a)}})}},38:Q=>{class O{constructor(N,b={}){if(this.type="warning",this.text=N,b.node&&b.node.source){let n=b.node.rangeBy(b);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in b)this[n]=b[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}Q.exports=O,O.default=O},71:(Q,O)=>{O.__esModule=!0,O.word=O.tilde=O.tab=O.str=O.space=O.slash=O.singleQuote=O.semicolon=O.plus=O.pipe=O.openSquare=O.openParenthesis=O.newline=O.greaterThan=O.feed=O.equals=O.doubleQuote=O.dollar=O.cr=O.comment=O.comma=O.combinator=O.colon=O.closeSquare=O.closeParenthesis=O.caret=O.bang=O.backslash=O.at=O.asterisk=O.ampersand=void 0,O.ampersand=38,O.asterisk=42,O.at=64,O.comma=44,O.colon=58,O.semicolon=59,O.openParenthesis=40,O.closeParenthesis=41,O.openSquare=91,O.closeSquare=93,O.dollar=36,O.tilde=126,O.caret=94,O.plus=43,O.equals=61,O.pipe=124,O.greaterThan=62,O.space=32,O.singleQuote=39,O.doubleQuote=34,O.slash=47,O.bang=33,O.backslash=92,O.cr=13,O.feed=12,O.newline=10,O.tab=9,O.str=39,O.comment=-1,O.word=-2,O.combinator=-3},145:(Q,O,y)=>{let N,b,n=y(7793);class u extends n{constructor(w){super({type:"document",...w}),this.nodes||(this.nodes=[])}toResult(w={}){return new N(new b,this,w).stringify()}}u.registerLazyResult=T=>{N=T},u.registerProcessor=T=>{b=T},Q.exports=u,u.default=u},176:(Q,O,y)=>{y.d(O,{F4:()=>u,P6:()=>w,dp:()=>T});var N=y(2155),b=y(7282),n=y(6416);function u(i){var e,o;const d=(0,n.u)();return d.id=i.id,d.ghostId=i.ghostId,d.userId=i.userId,d.accessId=i.accessId,d.categoryId=i.categoryId,d.characterValue=i.characterValue,d.entryTimeStamp=i.entryTimeStamp,d.typeId=i.typeId,d.type=i.type,d.isTemp=!1,d.typeCharacter=(o=(e=i?.type)===null||e===void 0?void 0:e.characterValue)!==null&&o!==void 0?o:"",d}function T(i){const e=(0,b.o)();return e.id=i.id,e.ghostId=i.ghostId,e.userId=i.userId,e.accessId=i.accessId,e.entryTimeStamp=i.entryTimeStamp,e.typeId=i.typeId,e.categoryId=i.categoryId,e}function w(i){const e=new N.N(0,0,0,0,0,0,0);return e.id=i.id,e.ghostId=i.ghostId,e.accessId=i.accessId,e.ofTheConceptId=i.ofTheConceptId,e.toTheConceptId=i.toTheConceptId,e.entryTimeStamp=i.entryTimeStamp,e.typeId=i.typeId,e.isTemp=!1,e}},197:()=>{},205:(Q,O,y)=>{y.d(O,{B:()=>N});class N{}N.isTypeLoaded=!1,N.isCharacterLoaded=!1,N.isDataLoaded=!1,N.isLocalDataLoaded=!1,N.isLocalCharacterLoaded=!1,N.isLocalTypeLoaded=!1,N.isConnectionLoaded=!1,N.isConnectionTypeLoaded=!1,N.isLocalConnectionLoaded=!1},263:(Q,O)=>{O.__esModule=!0,O.default=function(y){return y.sort(function(N,b){return N-b})},Q.exports=O.default},276:(Q,O,y)=>{y.d(O,{y:()=>N});class N{constructor(){this.conceptId=0,this.connectionTypeId=0,this.connectionType="",this.count=0}}},339:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(3631))&&N.__esModule?N:{default:N},n=y(1581);function u(w,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,i)}var T=function(w){var i,e;function o(d){var f;return(f=w.call(this,d)||this).type=n.SELECTOR,f}return e=w,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,u(i,e),o}(b.default);O.default=T,Q.exports=O.default},396:(Q,O,y)=>{let N=y(7793);class b extends N{constructor(u){super(u),this.type="atrule"}append(...u){return this.proxyOf.nodes||(this.nodes=[]),super.append(...u)}prepend(...u){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...u)}}Q.exports=b,b.default=b,N.registerAtRule(b)},425:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,i)}var T=function(w){var i,e;function o(d){var f;return(f=w.call(this,d)||this).type=n.COMMENT,f}return e=w,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,u(i,e),o}(b.default);O.default=T,Q.exports=O.default},442:(Q,O,y)=>{y.d(O,{Y:()=>o});var N=y(1167),b=y(2155),n=y(9581),u=y(3518),T=y(1863),w=y(3026),i=y(8286),e=y(1245);class o{static CheckContains(f){for(var v=!1,S=0;S<this.conceptsSyncArray.length;S++)this.conceptsSyncArray[S].id==f.id&&(v=!0);return v}static SyncDataDelete(f){for(var v=0;v<this.conceptsSyncArray.length;v++)f==this.conceptsSyncArray[v].id&&this.conceptsSyncArray.splice(v,1);for(v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].ofTheConceptId!=f&&this.connectionSyncArray[v].toTheConceptId!=f&&this.connectionSyncArray[v].typeId!=f||this.connectionSyncArray.splice(v,1)}static CheckContainsConnection(f){for(var v=!1,S=0;S<this.connectionSyncArray.length;S++)this.connectionSyncArray[S].id==f.id&&(v=!0);return v}static AddConcept(f){this.conceptsSyncArray.push(f)}static RemoveConcept(f){for(var v=0;v<this.conceptsSyncArray.length;v++)this.conceptsSyncArray[v].id==f.id&&this.conceptsSyncArray.splice(v,1)}static AddConnection(f){this.connectionSyncArray.push(f)}static RemoveConnection(f){for(var v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].id==f.id&&this.connectionSyncArray.splice(v,1)}static SyncDataOnline(){return f=this,v=void 0,r=function*(){if(e.serviceWorker)try{return(yield(0,e.sendMessage)("SyncData__SyncDataOnline",{})).data}catch(a){console.error("SyncData__SyncDataOnline sw error: ",a),(0,e.handleServiceWorkerException)(a)}for(let a=0;a<this.conceptsSyncArray.length;a++)w.I.AddConcept(this.conceptsSyncArray[a]);for(let a=0;a<this.connectionSyncArray.length;a++)i.d.AddConnection(this.connectionSyncArray[a]);if(this.conceptsSyncArray.length>0){let a=this.conceptsSyncArray.slice();this.conceptsSyncArray=[],(0,N.Y)(a)}if(this.connectionSyncArray.length>0){let a=this.connectionSyncArray.slice();this.connectionSyncArray=[],yield function(t){return c=this,C=void 0,I=function*(){let E=new b.N(0,0,0,0,0,0,0);try{var L=(0,u.Xr)(),B=JSON.stringify(t);const D=yield fetch(n.B.CreateTheConnectionUrl(),{method:"POST",headers:L,body:B});return D.ok?yield D.json():(console.log("Create the connection error message: ",D.status),(0,T.ry)(D)),E}catch(D){throw D instanceof Error?console.log("Create the connection error message: ",D.message):console.log(" Create the connection unexpected error: ",D),D}},new((m=void 0)||(m=Promise))(function(E,L){function B(U){try{W(I.next(U))}catch(P){L(P)}}function D(U){try{W(I.throw(U))}catch(P){L(P)}}function W(U){var P;U.done?E(U.value):(P=U.value,P instanceof m?P:new m(function(M){M(P)})).then(B,D)}W((I=I.apply(c,C||[])).next())});var c,C,m,I}(a)}return"done"},new((S=void 0)||(S=Promise))(function(a,t){function c(I){try{m(r.next(I))}catch(E){t(E)}}function C(I){try{m(r.throw(I))}catch(E){t(E)}}function m(I){var E;I.done?a(I.value):(E=I.value,E instanceof S?E:new S(function(L){L(E)})).then(c,C)}m((r=r.apply(f,v||[])).next())});var f,v,S,r}}o.conceptsSyncArray=[],o.connectionSyncArray=[]},490:(Q,O,y)=>{function N(){var b,n,u,T;let w={entity:0,userConcept:0,userId:0,token:""};try{let i=(localStorage==null?void 0:localStorage.getItem("profile"))||"";if(i){const e=JSON.parse(i);w.entity=(b=e?.entityId)!==null&&b!==void 0?b:0,w.userConcept=(n=e?.userConcept)!==null&&n!==void 0?n:0,w.userId=(u=e?.userId)!==null&&u!==void 0?u:0,w.token=(T=e?.token)!==null&&T!==void 0?T:""}}catch{console.log("This is the exception in getting user details from local storage")}return w}y.d(O,{s:()=>N})},518:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(3631))&&N.__esModule?N:{default:N},n=y(1581);function u(i,e){for(var o=0;o<e.length;o++){var d=e[o];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}function T(i,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,d){return o.__proto__=d,o},T(i,e)}var w=function(i){var e,o;function d(r){var a;return(a=i.call(this,r)||this).type=n.ROOT,a}o=i,(e=d).prototype=Object.create(o.prototype),e.prototype.constructor=e,T(e,o);var f,v,S=d.prototype;return S.toString=function(){var r=this.reduce(function(a,t){return a.push(String(t)),a},[]).join(",");return this.trailingComma?r+",":r},S.error=function(r,a){return this._error?this._error(r,a):new Error(r)},f=d,(v=[{key:"errorGenerator",set:function(r){this._error=r}}])&&u(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),d}(b.default);O.default=w,Q.exports=O.default},628:(Q,O,y)=>{y.d(O,{H:()=>S});var N=y(9581),b=y(3278),n=y(1245),u=y(1863),T=function(r,a,t,c){return new(t||(t=Promise))(function(C,m){function I(B){try{L(c.next(B))}catch(D){m(D)}}function E(B){try{L(c.throw(B))}catch(D){m(D)}}function L(B){var D;B.done?C(B.value):(D=B.value,D instanceof t?D:new t(function(W){W(D)})).then(I,E)}L((c=c.apply(r,a||[])).next())})};const w=(r,a,...t)=>T(void 0,[r,a,...t],void 0,function*(c,C,m=!0){let I={concepts:[],connections:[]};try{const E=new Headers;let L={concepts:c,connections:C};E.set("Content-Type","application/json"),E.set("Authorization","Bearer "+b.b.BearerAccessToken),E.set("Accept","application/json"),E.set("X-Session-Id",b.b.sessionId.toString()),E.set("Randomizer",N.B.getRandomizer().toString());const B=yield fetch(N.B.CreateGhostConceptApiUrl(m),{method:"POST",headers:E,body:JSON.stringify(L)});if(!B.ok)throw(0,u.ry)(B),new Error(`Error! status: ${B.status}`);const D=yield B.json();return I.concepts=D.concepts,I.connections=D.connections,I}catch(E){throw E instanceof Error?console.log("Create the concept api error message: ",E.message):console.log("Create the concept api unexpected error: ",E),E}});function i(r,a){const t=[];for(let c=0;c<r.length;c+=a){const C=r.slice(c,c+a);t.push(C)}return t}const e=(...r)=>T(void 0,[...r],void 0,function*(a=[]){return yield Promise.all(a.map(t=>{let c=JSON.parse(JSON.stringify(t));return delete c.type,delete c.ofConcept,delete c.toConcept,c}))});var o=y(9003),d=y(9736),f=y(4864),v=function(r,a,t,c){return new(t||(t=Promise))(function(C,m){function I(B){try{L(c.next(B))}catch(D){m(D)}}function E(B){try{L(c.throw(B))}catch(D){m(D)}}function L(B){var D;B.done?C(B.value):(D=B.value,D instanceof t?D:new t(function(W){W(D)})).then(I,E)}L((c=c.apply(r,a||[])).next())})};class S{static CheckContains(a){for(var t=!1,c=0;c<this.conceptsSyncArray.length;c++)this.conceptsSyncArray[c].id==a.id&&(t=!0);return t}static SyncDataDelete(a){for(var t=0;t<this.conceptsSyncArray.length;t++)a==this.conceptsSyncArray[t].id&&this.conceptsSyncArray.splice(t,1);for(t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].ofTheConceptId!=a&&this.connectionSyncArray[t].toTheConceptId!=a&&this.connectionSyncArray[t].typeId!=a||this.connectionSyncArray.splice(t,1)}static CheckContainsConnection(a){for(var t=!1,c=0;c<this.connectionSyncArray.length;c++)this.connectionSyncArray[c].id==a.id&&(t=!0);return t}static AddConcept(a){try{let t=!1;S.CheckIfTheConceptIdExists(a.id,this.conceptsSyncArray).id!=0&&(t=!0),t||this.conceptsSyncArray.push(a)}catch(t){throw t}}static RemoveConcept(a){for(var t=0;t<this.conceptsSyncArray.length;t++)this.conceptsSyncArray[t].id==a.id&&this.conceptsSyncArray.splice(t,1)}static SyncDataOnlineWithoutAuth(a,t){return v(this,arguments,void 0,function*(c,C,m=!1){return S.SyncDataOnline(c,C,m)})}static SyncDataOnline(a,t){return v(this,arguments,void 0,function*(c,C,m=!0){let I=performance.now();console.log("syncing...",c,C,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,m),setTimeout(()=>{console.log("syncing...",c,C,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,m)},5e3);try{if(n.serviceWorker)try{return console.log("syncing in the service worker",c,m),(yield(0,n.sendMessage)("LocalSyncData__SyncDataOnline",{transactionId:c,withAuth:m})).data}catch(P){console.error("LocalSyncData__SyncDataOnline sw error: ",P),(0,n.handleServiceWorkerException)(P)}console.log("syncing in the without service worker syncing",c,m);let E=[],L=[];if(c&&this.transactionCollections.some(P=>P.id==c)){const P=this.transactionCollections.find(M=>M.id==c);if(this.transactionCollections=this.transactionCollections.filter(M=>M.id!=c),this.transactionCollections=this.transactionCollections.filter(M=>new Date(M.createdDate).getTime()>new Date().getTime()-6048e5),!P)return;E=P.data.concepts.slice(),L=P.data.connections.slice()}else Array.isArray(C?.concepts)&&Array.isArray(C?.connections)?(console.log("this is the concepts and connections array",C?.concepts,C?.connections),E=C.concepts.slice(),L=C.connections.slice(),console.log("this is the concepts and connections array",E,L),this.conceptsSyncArray=this.conceptsSyncArray.filter(P=>{const M=C.concepts.some(j=>P.id==j.id||P.ghostId==j.ghostId);return M||console.warn(`Concept not found in sync array: ${P.id||P.ghostId}`),M}),this.connectionSyncArray=this.connectionSyncArray.filter(P=>{const M=C.connections.some(j=>P.id==j.id||P.ghostId==j.ghostId);return M||console.warn(`Connection not found in sync array: ${P.id||P.ghostId}`),M})):(console.warn("Syncing this way has been Depreceted in service worker."),console.info("Only if serive worker is not running"),E=this.conceptsSyncArray.slice()||[],L=this.connectionSyncArray.slice()||[],this.connectionSyncArray=[],this.conceptsSyncArray=[]);console.log("syncing... inside the syncer",m);let B=[];for(let P=0;P<E.length;P++)B.push(E[P]),yield d.v.UpdateConceptSyncStatus(E[P].id);console.log("syncing... inside the syncer 2",m,E),yield this.UpdateConceptListToIncludeRelatedConcepts(L,B);let D=yield function(P,M){return T(this,arguments,void 0,function*(j,z,K=!0){const ee=n.Logger.logfunction("CreateTheGhostConceptApi",[j.length,z.length]);try{let $={concepts:[],connections:[]};const ie=yield e(j),ue=yield e(z);if(j.length+z.length<=2*1e3){const ae=yield w(ie,ue,K);return Array.isArray(ae?.concepts)&&($.concepts=[...$.concepts,...ae.concepts]),Array.isArray(ae?.connections)&&($.connections=[...$.connections,...ae.connections]),n.Logger.logUpdate(ee),$}const te=i(ie,1e3),X=i(ue,1e3),ne=[],Y=[];console.log("This is the with auth in syncing",K);for(let ae=0;ae<te.length;ae++){const de=te[ae];ne.push(w(de,[],K))}const J=yield Promise.all(ne);for(let ae=0;ae<J.length;ae++){const de=J[ae];Array.isArray(de?.concepts)&&($.concepts=[...$.concepts,...de.concepts]),Array.isArray(de?.connections)&&($.connections=[...$.connections,...de.connections])}for(let ae=0;ae<X.length;ae++){const de=X[ae];Y.push(w([],de,K))}const re=yield Promise.all(Y);for(let ae=0;ae<re.length;ae++){const de=re[ae];Array.isArray(de?.concepts)&&($.concepts=[...$.concepts,...de.concepts]),Array.isArray(de?.connections)&&($.connections=[...$.connections,...de.connections])}return n.Logger.logUpdate(ee),$}catch(se){throw console.log(se),(0,u.ey)(ee,"CreateTheGhostConceptApi",se),se}})}(B,L,m);console.log("syncing... inside the syncer 3",m);let W=D.concepts,U=D.connections;for(let P=0;P<W.length;P++)d.v.AddPermanentConcept(W[P]);for(let P=0;P<U.length;P++)f.G.AddPermanentConnection(U[P]);return E}catch(E){throw n.Logger.logError(I,"unknown",void 0,"unknown",void 0,500,E,"SyncDataOnline",[],"unknown",void 0),E}})}static ConvertGhostIdsInConnections(a){var t,c,C;for(let m=0;m<a.length;m++){let I=a[m].ofTheConceptId,E=a[m].toTheConceptId,L=a[m].typeId,B=(t=S.ghostIdMap.get(I))!==null&&t!==void 0?t:I,D=(c=S.ghostIdMap.get(E))!==null&&c!==void 0?c:E,W=(C=S.ghostIdMap.get(L))!==null&&C!==void 0?C:L;a[m].ofTheConceptId=B,a[m].toTheConceptId=D,a[m].typeId=W}}static UpdateConceptListToIncludeRelatedConcepts(a,t){return v(this,void 0,void 0,function*(){for(let c=0;c<a.length;c++){let C=a[c].ofTheConceptId,m=a[c].toTheConceptId,I=a[c].typeId;if(C<0){let E=this.CheckIfTheConceptIdExists(C,t);E.id==0&&(E=yield d.v.GetConceptByGhostId(C),E.id!=0?E.id!=E.ghostId&&(a[c].ofTheConceptId=E.id):(E=yield d.v.GetConcept(C),this.AddConceptIfDoesNotExist(E,t)))}if(m<0){let E=this.CheckIfTheConceptIdExists(m,t);E.id==0&&(E=yield d.v.GetConceptByGhostId(m),E.id!=0?E.id!=E.ghostId&&(a[c].toTheConceptId=E.id):(E=yield d.v.GetConcept(m),this.AddConceptIfDoesNotExist(E,t)))}if(I<0){let E=this.CheckIfTheConceptIdExists(I,t);E.id==0&&(E=yield d.v.GetConceptByGhostId(I),E.id!=0?E.id!=E.ghostId&&(a[c].typeId=E.id):(E=yield d.v.GetConcept(I),this.AddConceptIfDoesNotExist(E,t)))}}})}static AddConceptIfDoesNotExist(a,t=[]){let c=!1;for(let C=0;C<t.length;C++)a.ghostId==t[C].ghostId&&(c=!0);c||t.push(a)}static CheckIfTheConceptIdExists(a,t=[]){let c=(0,n.CreateDefaultLConcept)();for(let C=0;C<t.length;C++)a!=t[C].ghostId&&a!=t[C].id||(c=t[C]);return c}static AddConnection(a){this.connectionSyncArray.push(a)}static RemoveConnection(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a.id&&this.connectionSyncArray.splice(t,1)}static RemoveConnectionById(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a&&this.connectionSyncArray.splice(t,1)}static syncDataLocalDb(){return v(this,void 0,void 0,function*(){if(this.conceptsSyncArray.length>0){for(let a=0;a<this.conceptsSyncArray.length;a++)(0,o.kH)("localconcept",this.conceptsSyncArray[a]);this.conceptsSyncArray=[]}if(this.connectionSyncArray.length>0){for(let a=0;a<this.connectionSyncArray.length;a++)(0,o.kH)("localconnection",this.connectionSyncArray[a]);this.connectionSyncArray=[]}return"done"})}static initializeTransaction(a){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__initializeTransaction",{transactionId:a})).data}catch(t){console.error("LocalSyncData__initializeTransaction sw error: ",t),(0,n.handleServiceWorkerException)(t)}if(this.transactionCollections.some(t=>t.id==a))return;this.transactionCollections.push({id:a,data:{concepts:[],connections:[]},createdDate:new Date().toISOString()})}catch(t){console.log("error in initializeTransaction",t)}})}static markTransactionActions(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__markTransactionActions",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__markTransactionActions sw error: ",c),(0,n.handleServiceWorkerException)(c)}this.transactionCollections=this.transactionCollections.map(c=>c.id==a?Object.assign(Object.assign({},c),{data:JSON.parse(JSON.stringify(t))}):c),this.conceptsSyncArray=this.conceptsSyncArray.filter(c=>!t.concepts.some(C=>C.id==c.id||C.ghostId==c.id)),this.connectionSyncArray=this.connectionSyncArray.filter(c=>!t.connections.some(C=>C.id==c.id||C.ghostId==c.id))}catch(c){console.log("error in markTransactionActions",c)}})}static rollbackTransaction(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__rollbackTransaction",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__rollbackTransaction sw error: ",c),(0,n.handleServiceWorkerException)(c)}if(this.transactionCollections.some(c=>c.id==a))return;this.transactionCollections=this.transactionCollections.filter(c=>c.id!=a)}catch(c){console.log("LocalSyncData, roll",c)}})}}S.conceptsSyncArray=[],S.connectionSyncArray=[],S.ghostIdMap=new Map,S.transactionCollections=[]},680:(Q,O,y)=>{O.__esModule=!0;var N=y(1581);Object.keys(N).forEach(function(u){u!=="default"&&u!=="__esModule"&&(u in O&&O[u]===N[u]||(O[u]=N[u]))});var b=y(4451);Object.keys(b).forEach(function(u){u!=="default"&&u!=="__esModule"&&(u in O&&O[u]===b[u]||(O[u]=b[u]))});var n=y(8500);Object.keys(n).forEach(function(u){u!=="default"&&u!=="__esModule"&&(u in O&&O[u]===n[u]||(O[u]=n[u]))})},843:(Q,O,y)=>{y.d(O,{Az:()=>f,Hi:()=>v});var N=y(8146),b=y(3026),n=y(9581),u=y(3518),T=y(1245),w=y(1863),i=y(7876),e=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,[])).next())})},o=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,[])).next())})},d=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,[])).next())})};function f(S){return d(this,void 0,void 0,function*(){const r=T.Logger.logfunction("GetConceptByCharacterAndCategory",S);let a=(0,T.CreateDefaultConcept)();if(S=="the")return a.id=1,a.typeId=5,a.characterValue="the",a;let t=(0,T.SplitStrings)(S);if(t.length>1){let c=1,C=yield f(t[0]);C.id!=0&&(c=C.id),a=yield function(m,I){var E=arguments;return d(this,void 0,void 0,function*(){const L=T.Logger.logfunction("GetConceptByCharacterAndCategoryFromMemory",E);let B=yield T.ConceptsData.GetConceptByCharacterAndCategoryLocal(m,I);return B.id==0&&(B=yield function(D,W){var U=arguments;return e(this,void 0,void 0,function*(){const P=T.Logger.logfunction("GetConceptByCharacterAndCategoryDirectApi",U);let M=(0,T.CreateDefaultConcept)();try{var j=(0,u.Xr)("application/x-www-form-urlencoded");const z=yield fetch(n.B.GetConceptByCharacterAndCategoryDirectUrl(),{method:"POST",headers:j,body:`character_value=${D}&category_id=${W}`});z.ok?(M=yield z.json(),(0,i.K)(M).then(()=>{b.I.AddConcept(M)})):(console.log("This is the concept by category and character error",z.status),(0,w.ry)(z)),T.Logger.logUpdate(P)}catch(z){z instanceof Error?console.log(" This is the concept by category and character error message: ",z.message):console.log(" This is the concept by category and character unexpected error: ",z),(0,w.Mb)(z,n.B.GetConceptByCharacterAndCategoryDirectUrl()),(0,w.ey)(P,"GetConceptByCharacterAndCategoryDirectApi",z)}return M})}(m,I)),T.Logger.logUpdate(L),B})}(S,c)}else t[0]==S&&(a=yield function(c){var C=arguments;return d(this,void 0,void 0,function*(){const m=T.Logger.logfunction("GetConceptByCharacter",C);let I=yield T.ConceptsData.GetConceptByCharacterAndTypeLocal(c,51);return I.id==0&&(I=yield(0,N.Y)(c)),T.Logger.logUpdate(m),I})}(S));return T.Logger.logUpdate(r),a})}function v(S){return d(this,void 0,void 0,function*(){let r=[];try{r=yield function(a){return o(this,void 0,void 0,function*(){let t=[];try{let c=JSON.stringify(a),C=(0,u.Xr)();const m=yield fetch(T.BaseUrl.GetTypeConceptBulk(),{method:"POST",headers:C,body:c});if(m.ok){let I=yield m.json();t=yield(0,T.GetConceptBulk)(I)}else console.log("This is the GetTypeConceptByBulk error",m.status),(0,w.ry)(m)}catch(c){c instanceof Error?console.log(" This is the GetTypeConceptByBulk error message: ",c.message):console.log(" This is the GetTypeConceptByBulk unexpected error: ",c),(0,w.Mb)(c,T.BaseUrl.GetConceptByCharacterAndCategoryDirectUrl())}return t})}(S)}catch(a){console.log(" This is the GetTypeConceptsByCharacterAndCategoryBulk error message: ",a)}return r})}},991:(Q,O,y)=>{y.d(O,{H:()=>T});var N=y(1245),b=y(3996);class n extends b.i{constructor(i,e,o,d){super(i,e,o,d),this.key="",this.value=[],this.height=1,this.key=i,this.value=e,this.leftNode=o,this.rightNode=d}addNode(i,e,o){if(e==null)return i;let d=e.leftNode,f=e.rightNode;if(e.key>i.key)e.leftNode=this.addNode(i,d,o);else{if(!(e.key<i.key))return e;e.rightNode=this.addNode(i,f,o)}e.height=1+Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}}var u=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,[])).next())})};class T{static CreateCompositionKey(i,e){return i}static GetConnectionByOfTheConceptAndTypeId(i,e){let o=this.CreateCompositionKey(i,e);if(this.node){let d=this.node.getFromNode(o,this.node);if(d)return d.value}return null}static addConnection(i){if(i.id>0){let e=this.CreateCompositionKey(i.ofTheConceptId,i.typeId);if(this.node){let o=this.node.getFromNode(e,this.node);if(o){let d=o?.value;d.length==0&&(o.value=[]),d.includes(i.id)||d.push(i.id)}else{let d=[];d.push(i.id);let f=new n(e,d,null,null);this.addNodeToTree(f)}}else{let o=[];o.push(i.id);let d=new n(e,o,null,null);this.addNodeToTree(d)}new Event(`${e}`)}else console.log("cannot insert key id with  n 0 to the connection tree",i)}static addNodeToTree(i){return u(this,void 0,void 0,function*(){return this.node==null?(this.node=i,console.log("this is type dispatch in connection",i),(0,N.dispatchIdEvent)(i.key),this.node):(this.node=this.node.addNode(i,this.node,this.node.height),this.node)})}static removeNodeFromTree(i){return u(this,void 0,void 0,function*(){this.node&&(this.node=this.node.removeNode(this.node,i))})}}T.node=null},999:(Q,O,y)=>{y.d(O,{R:()=>i});var N=y(1245),b=y(1863),n=y(6416),u=y(4711),T=y(5868),w=function(e,o,d,f){return new(d||(d=Promise))(function(v,S){function r(c){try{t(f.next(c))}catch(C){S(C)}}function a(c){try{t(f.throw(c))}catch(C){S(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof d?C:new d(function(m){m(C)})).then(r,a)}t((f=f.apply(e,o||[])).next())})};function i(e){return w(this,arguments,void 0,function*(o,d=null,f=null,v=null,S=null,r=null,a=null,t=!1,c={concepts:[],connections:[]}){var C,m,I,E;const L=N.Logger.logfunction("CreateTheCompositionLocal")||{};if(N.serviceWorker){L.serviceWorker=!0;try{const M=yield(0,N.sendMessage)("CreateTheCompositionLocal",{json:o,ofTheConceptId:d,ofTheConceptUserId:f,mainKey:v,userId:S,accessId:r,sessionInformationId:a,actions:c});return!((m=(C=M?.actions)===null||C===void 0?void 0:C.concepts)===null||m===void 0)&&m.length&&(c.concepts=JSON.parse(JSON.stringify(M.actions.concepts))),!((E=(I=M?.actions)===null||I===void 0?void 0:I.connections)===null||E===void 0)&&E.length&&(c.connections=JSON.parse(JSON.stringify(M.actions.connections))),N.Logger.logUpdate(L),M.data}catch(M){console.error("CreateTheCompositionLocal error sw: ",M),(0,b.ey)(L,"CreateTheCompositionLocal",M),(0,N.handleServiceWorkerException)(M)}}let B=S??999,D=r??999,W=a??999,U=v??0,P=(0,n.u)();for(const M in o)if(typeof o[M]!="string"&&typeof o[M]!="number")if(d==null&&f==null){let j=U,z=yield(0,T.k)(M,"",!0,B,D,W,void 0,c);P=z,j=z.id,U=z.id,yield i(o[M],z.id,z.userId,j,S,r,a,void 0,c)}else{let j=d??999,z=U,K=yield(0,T.k)(M,"",!0,B,D,W,void 0,c);yield(0,u.F)(j,K.id,z,void 0,void 0,void 0,c),yield i(o[M],K.id,K.userId,z,S,r,a,void 0,c)}else{let j=d??999,z=U,K=yield(0,T.k)(M,o[M].toString(),!1,B,D,W,void 0,c);yield(0,u.F)(j,K.id,z,void 0,void 0,void 0,c)}return N.Logger.logUpdate(L),P})}},1106:(Q,O,y)=>{let{nanoid:N}=y(5042),{isAbsolute:b,resolve:n}=y(197),{SourceMapConsumer:u,SourceMapGenerator:T}=y(1866),{fileURLToPath:w,pathToFileURL:i}=y(2739),e=y(3614),o=y(3878),d=y(9746),f=Symbol("lineToIndexCache"),v=!!(u&&T),S=!!(n&&b);function r(t){if(t[f])return t[f];let c=t.css.split(`
`),C=new Array(c.length),m=0;for(let I=0,E=c.length;I<E;I++)C[I]=m,m+=c[I].length+1;return t[f]=C,C}class a{get from(){return this.file||this.id}constructor(c,C={}){if(c==null||typeof c=="object"&&!c.toString)throw new Error(`PostCSS received ${c} instead of CSS string`);if(this.css=c.toString(),this.css[0]==="\uFEFF"||this.css[0]==="ï¿¾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,C.document&&(this.document=C.document.toString()),C.from&&(!S||/^\w+:\/\//.test(C.from)||b(C.from)?this.file=C.from:this.file=n(C.from)),S&&v){let m=new o(this.css,C);if(m.text){this.map=m;let I=m.consumer().file;!this.file&&I&&(this.file=this.mapResolve(I))}}this.file||(this.id="<input css "+N(6)+">"),this.map&&(this.map.file=this.from)}error(c,C,m,I={}){let E,L,B,D,W;if(C&&typeof C=="object"){let P=C,M=m;if(typeof P.offset=="number"){D=P.offset;let j=this.fromOffset(D);C=j.line,m=j.col}else C=P.line,m=P.column,D=this.fromLineAndColumn(C,m);if(typeof M.offset=="number"){B=M.offset;let j=this.fromOffset(B);L=j.line,E=j.col}else L=M.line,E=M.column,B=this.fromLineAndColumn(M.line,M.column)}else if(m)D=this.fromLineAndColumn(C,m);else{D=C;let P=this.fromOffset(D);C=P.line,m=P.col}let U=this.origin(C,m,L,E);return W=U?new e(c,U.endLine===void 0?U.line:{column:U.column,line:U.line},U.endLine===void 0?U.column:{column:U.endColumn,line:U.endLine},U.source,U.file,I.plugin):new e(c,L===void 0?C:{column:m,line:C},L===void 0?m:{column:E,line:L},this.css,this.file,I.plugin),W.input={column:m,endColumn:E,endLine:L,endOffset:B,line:C,offset:D,source:this.css},this.file&&(i&&(W.input.url=i(this.file).toString()),W.input.file=this.file),W}fromLineAndColumn(c,C){return r(this)[c-1]+C-1}fromOffset(c){let C=r(this),m=0;if(c>=C[C.length-1])m=C.length-1;else{let I,E=C.length-2;for(;m<E;)if(I=m+(E-m>>1),c<C[I])E=I-1;else{if(!(c>=C[I+1])){m=I;break}m=I+1}}return{col:c-C[m]+1,line:m+1}}mapResolve(c){return/^\w+:\/\//.test(c)?c:n(this.map.consumer().sourceRoot||this.map.root||".",c)}origin(c,C,m,I){if(!this.map)return!1;let E,L,B=this.map.consumer(),D=B.originalPositionFor({column:C,line:c});if(!D.source)return!1;typeof m=="number"&&(E=B.originalPositionFor({column:I,line:m})),L=b(D.source)?i(D.source):new URL(D.source,this.map.consumer().sourceRoot||i(this.map.mapFile));let W={column:D.column,endColumn:E&&E.column,endLine:E&&E.line,line:D.line,url:L.toString()};if(L.protocol==="file:"){if(!w)throw new Error("file: protocol is not available in this PostCSS build");W.file=w(L)}let U=B.sourceContentFor(D.source);return U&&(W.source=U),W}toJSON(){let c={};for(let C of["hasBOM","css","file","id"])this[C]!=null&&(c[C]=this[C]);return this.map&&(c.map={...this.map},c.map.consumerCache&&(c.map.consumerCache=void 0)),c}}Q.exports=a,a.default=a,d&&d.registerInput&&d.registerInput(a)},1167:(Q,O,y)=>{y.d(O,{Y:()=>w});var N=y(9581),b=y(3518),n=y(1245),u=y(1863),T=function(i,e,o,d){return new(o||(o=Promise))(function(f,v){function S(t){try{a(d.next(t))}catch(c){v(c)}}function r(t){try{a(d.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(S,r)}a((d=d.apply(i,[])).next())})};function w(i){return T(this,void 0,void 0,function*(){const e=n.Logger.logfunction("CreateTheConceptApi",i);let o=(0,n.CreateDefaultConcept)();try{var d=(0,b.Xr)();const f=yield fetch(N.B.CreateTheConceptUrl(),{method:"POST",headers:d,body:JSON.stringify(i)});if(!f.ok)throw(0,u.ry)(f),new Error(`Error! status: ${f.status}`);return o=yield f.json(),n.Logger.logUpdate(e),o}catch(f){f instanceof Error?console.log("Create the concept api error message: ",f.message):console.log("Create the concept api unexpected error: ",f),(0,u.Mb)(f,N.B.CreateTheConceptUrl()),(0,u.ey)(e,"CreateTheConceptApi",f)}})}},1213:(Q,O,y)=>{y.d(O,{f:()=>w});var N=y(9736),b=y(7820),n=y(1245),u=y(176),T=function(i,e,o,d){return new(o||(o=Promise))(function(f,v){function S(t){try{a(d.next(t))}catch(c){v(c)}}function r(t){try{a(d.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(S,r)}a((d=d.apply(i,[])).next())})};function w(i){return T(this,void 0,void 0,function*(){let e=performance.now();try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConceptLocal",{id:i})).data}catch(d){console.error("GetTheConceptLocal error sw: ",d),(0,n.handleServiceWorkerException)(d)}let o=(0,n.CreateDefaultLConcept)();if(i<0){if(o=yield N.v.GetConcept(i),o.id==0){let d=yield b.G.getNodeFromTree(i);if(d?.value){let f=d.value;f&&(o=f)}}}else{let d=yield(0,n.GetTheConcept)(i);o=(0,u.F4)(d)}return o}catch(o){throw n.Logger.logError(e,"unknown","read","unknown",void 0,200,void 0,"GetTheConceptLocal",[i],"unknown",void 0),o}})}},1218:(Q,O,y)=>{y.d(O,{A:()=>w});var N=y(1245),b=y(7282),n=y(1666),u=y(8407),T=function(i,e,o,d){return new(o||(o=Promise))(function(f,v){function S(t){try{a(d.next(t))}catch(c){v(c)}}function r(t){try{a(d.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(S,r)}a((d=d.apply(i,e||[])).next())})};function w(i){return T(this,arguments,void 0,function*(e,o=null,d=null,f=null,v=null,S=null,r=null){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("CreateTheComposition",{json:e,ofTheConceptId:o,ofTheConceptUserId:d,mainKey:f,userId:v,accessId:S,sessionInformationId:r})).data}catch(I){console.error("CreateTheComposition sw error: ",I),(0,N.handleServiceWorkerException)(I)}let a=v??999,t=S??4,c=r??999,C=f??0,m=(0,b.o)();for(const I in e)if(typeof e[I]!="string"&&typeof e[I]!="number")if(o==null&&d==null){let E=C,L=yield(0,u.A)(I,"",!0,a,t,c);m=L,E=L.id,C=L.id,yield w(e[I],L.id,L.userId,E,v,S,r)}else{let E=o??999,L=d??999,B=C,D=yield(0,u.A)(I,"",!0,a,t,c);m=D,yield(0,n.q)(E,L,D.id,B),yield w(e[I],D.id,D.userId,B,v,S,r)}else{let E=o??999,L=d??10267,B=C,D=yield(0,u.A)(I,e[I].toString(),!1,a,t,c);yield(0,n.q)(E,L,D.id,B)}return m})}},1239:(Q,O,y)=>{y.d(O,{I:()=>o,r:()=>e});var N=y(3026),b=y(9581),n=y(3518),u=y(1863),T=y(1245),w=y(1596),i=function(d,f,v,S){return new(v||(v=Promise))(function(r,a){function t(m){try{C(S.next(m))}catch(I){a(I)}}function c(m){try{C(S.throw(m))}catch(I){a(I)}}function C(m){var I;m.done?r(m.value):(I=m.value,I instanceof v?I:new v(function(E){E(I)})).then(t,c)}C((S=S.apply(d,[])).next())})};function e(d){return i(this,void 0,void 0,function*(){const f=T.Logger.logfunction("GetConceptBulk",[d.length])||{};let v=[],S=(new Date().getTime(),performance.now()),r=Array.from(new Set(d));try{if(T.serviceWorker){f.serviceWorker=!0;try{const a=yield(0,T.sendMessage)("GetConceptBulk",{passedConcepts:d});return T.Logger.logUpdate(f),a.data}catch(a){console.error("GetConceptBulk sw error: ",a),(0,u.ey)(f,"GetConceptBulk",a),(0,T.handleServiceWorkerException)(a)}}if(r.length>0){let a=[];for(let t=0;t<r.length;t++)if(!N.I.GetNpc(r[t])){let c=yield N.I.GetConcept(r[t]);c.id==0?a.push(r[t]):v.push(c)}if(a.length==0)return T.Logger.logfunction(f),v;{let t;const c={method:"POST",headers:(0,n.Xr)(),body:JSON.stringify(a)};try{t=yield fetch(b.B.GetConceptBulkUrl(),c)}catch{t=yield(0,w.g)(c,"/api/get_concept_bulk")}yield function(C,m,I,E,L){return i(this,void 0,void 0,function*(){if(C.ok){let B=yield C.json();if(B.length>0)for(let D=0;D<B.length;D++){let W=B[D];N.I.AddConcept(W),I.push(W)}T.Logger.logUpdate(E)}else console.log("Get Concept Bulk error",C.status),T.Logger.logError(L,"unknown","read","unknown",void 0,C.status,C,"GetConceptBulk",[m],"unknown",void 0),(0,u.ry)(C)})}(t,d,v,f,S)}}}catch(a){a instanceof Error?console.log("Get Concept Bulk  error message: ",a.message):console.log("Get Concept Bulk  unexpected error: ",a),T.Logger.logError(S,"unknown","read","unknown",void 0,500,a,"GetConceptBulk",[d],"unknown",void 0),(0,u.Mb)(a,b.B.GetConceptBulkUrl()),(0,u.ey)(f,"GetConceptBulk",a)}return v})}function o(d){return i(this,void 0,void 0,function*(){const f=[];if(d.length>0){const v={"Content-Type":"application/json"};try{const S=yield fetch(b.B.GetConceptBulkUrl(),{method:"POST",headers:v,body:JSON.stringify(d)});if(S.ok){const r=yield S.json();if(r.length>0)for(let a=0;a<r.length;a++){const t=r[a];f.push(t),N.I.AddConcept(t)}}else console.log("bulk concept getter api error: ",S.status),(0,u.ry)(S)}catch(S){S instanceof Error?console.log("bulk concept getter api error: ",S.message):console.log("bulk concept getter api error: ",S),(0,u.Mb)(S,b.B.GetConceptBulkUrl())}}return f})}},1245:(Q,O,y)=>{y.d(O,{ADMIN:()=>xi,ALLID:()=>We.BG,AccessTracker:()=>Cn.J,AddGhostConcept:()=>wi,Anomaly:()=>Xe,BaseUrl:()=>i.B,BinaryTree:()=>Xn.W,BuildWidgetFromId:()=>Bt.Cp,BuilderStatefulWidget:()=>Sn,Composition:()=>Tn,CompositionBinaryTree:()=>jt,CompositionNode:()=>so,Concept:()=>ji.j,ConceptsData:()=>w.I,Connection:()=>te.N,ConnectionData:()=>Gt.d,CountInfo:()=>sr.y,CreateComposition:()=>se.A,CreateConnection:()=>Ot.d,CreateConnectionBetweenEntityLocal:()=>Lo,CreateConnectionBetweenTwoConcepts:()=>me,CreateConnectionBetweenTwoConceptsGeneral:()=>be,CreateConnectionBetweenTwoConceptsLocal:()=>yo.h,CreateData:()=>Jn,CreateDefaultConcept:()=>ne.o,CreateDefaultLConcept:()=>uo.u,CreateSession:()=>pi,CreateSessionVisit:()=>fi,CreateTheCompositionLocal:()=>$.R,CreateTheCompositionWithCache:()=>In,CreateTheConnection:()=>xe.q,CreateTheConnectionGeneral:()=>ae,CreateTheConnectionLocal:()=>Ot.F,DATAID:()=>We.y0,DATAIDDATE:()=>We.iw,DATAV2:()=>We.pU,DelayFunctionExecution:()=>Ei,DeleteConceptById:()=>Zn,DeleteConceptLocal:()=>Li,DeleteConnectionById:()=>de.m,DeleteConnectionByIdBulk:()=>de.E,DeleteConnectionByType:()=>gn.$S,DeleteConnectionByTypeBulk:()=>gn.L0,DeleteUser:()=>jo,DependencyObserver:()=>$t.w,FilterSearch:()=>Vn,FormatFromConnections:()=>Zt.vw,FormatFromConnectionsAltered:()=>Zt.y8,FreeschemaQuery:()=>Tt,FreeschemaQueryApi:()=>$n,GetAllConnectionsOfComposition:()=>ee.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>gn.WC,GetComposition:()=>r.Nj,GetCompositionBulk:()=>ot.dF,GetCompositionBulkWithDataId:()=>ot.cw,GetCompositionFromConnectionsWithDataId:()=>ot.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>ot.km,GetCompositionFromConnectionsWithDataIdInObject:()=>ot.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>ot.Nt,GetCompositionFromConnectionsWithIndex:()=>ot.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>ot.hG,GetCompositionFromMemoryWithConnections:()=>r.JA,GetCompositionList:()=>C,GetCompositionListAll:()=>m,GetCompositionListAllWithId:()=>I,GetCompositionListListener:()=>Pi,GetCompositionListLocal:()=>z,GetCompositionListLocalWithId:()=>K,GetCompositionListWithId:()=>E,GetCompositionListWithIdUpdated:()=>L,GetCompositionListener:()=>Gi,GetCompositionLocal:()=>U,GetCompositionLocalWithId:()=>P,GetCompositionWithAllIds:()=>r.Mb,GetCompositionWithCache:()=>li,GetCompositionWithDataIdBulk:()=>ui,GetCompositionWithDataIdWithCache:()=>co,GetCompositionWithId:()=>r.yz,GetCompositionWithIdAndDateFromMemory:()=>r.Ez,GetConceptBulk:()=>hn.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>fe.A,GetConnectionBetweenTwoConceptsLinker:()=>_i,GetConnectionBulk:()=>Un.j,GetConnectionById:()=>qo,GetConnectionDataPrefetch:()=>ot.QL,GetConnectionOfTheConcept:()=>ue,GetConnectionTypeForCount:()=>To.V,GetFreeschemaImage:()=>Br,GetFreeschemaImageUrl:()=>Rr,GetImageApi:()=>Oo,GetLink:()=>Re,GetLinkListListener:()=>Mi,GetLinkListener:()=>Ui.d,GetLinkRaw:()=>Le,GetLinkerConnectionFromConcepts:()=>Wo,GetLinkerConnectionToConcepts:()=>Mo,GetRelation:()=>lo,GetRelationLocal:()=>Ii,GetRelationRaw:()=>vi,GetTheConcept:()=>ce.A,GetTheConceptLocal:()=>po.f,GetUserGhostId:()=>Ci,JUSTDATA:()=>We.ZJ,LConcept:()=>$i,LConnection:()=>Hi,LISTNORMAL:()=>We.SL,LocalConceptsData:()=>S.v,LocalSyncData:()=>Kt.H,LocalTransaction:()=>ko,LogEvent:()=>ar,Logger:()=>pe.V,LoginToBackend:()=>ei,MakeTheInstanceConcept:()=>we.A,MakeTheInstanceConceptLocal:()=>ge.k,MakeTheTimestamp:()=>zo,MakeTheTypeConceptApi:()=>He,MakeTheTypeConceptLocal:()=>Ee.$,NORMAL:()=>We.yv,PRIVATE:()=>Oi,PUBLIC:()=>Bi,PatcherStructure:()=>qi,Prototype:()=>Er,RAW:()=>We.XZ,RecursiveSearchApi:()=>Jo,RecursiveSearchApiNewRawFullLinker:()=>Xo,RecursiveSearchApiRaw:()=>Kn,RecursiveSearchApiRawFullLinker:()=>Yo,RecursiveSearchApiWithInternalConnections:()=>Qo,RecursiveSearchListener:()=>Wi,SchemaQuery:()=>ir,SchemaQueryListener:()=>yn,SearchAllConcepts:()=>si,SearchLinkInternal:()=>Ai,SearchLinkInternalAll:()=>Ni,SearchLinkMultipleAll:()=>Zt.cf,SearchLinkMultipleAllObservable:()=>mo,SearchLinkMultipleApi:()=>u.j,SearchQuery:()=>Yt,SearchStructure:()=>Ji,SearchWithLinker:()=>ai,SearchWithTypeAndLinker:()=>Ht.zl,SearchWithTypeAndLinkerApi:()=>vo,Selector:()=>cr,SessionData:()=>zi,Signin:()=>oi,Signup:()=>ti,SignupEntity:()=>ni,SplitStrings:()=>T.f,StatefulWidget:()=>jn,SyncData:()=>X.Y,TrashTheConcept:()=>$o,UpdateComposition:()=>ri,UpdateCompositionLocal:()=>Ti.D,UserBinaryTree:()=>Xt,Validator:()=>tr,ViewInternalData:()=>go,ViewInternalDataApi:()=>fo,WidgetTree:()=>No,convertFromConceptToLConcept:()=>Mn.F4,convertFromLConceptToConcept:()=>Mn.dp,convertWidgetTreeToWidget:()=>Nn,convertWidgetTreeToWidgetWithWrapper:()=>_o,createFormFieldData:()=>nr,createPrototypeLocal:()=>xo,dispatchIdEvent:()=>Pr,getFromDatabaseWithType:()=>Ce,getObjectsFromIndexDb:()=>Te,getUserDetails:()=>rr.s,getWidgetBulkFromId:()=>tn,getWidgetFromId:()=>Ir,handleServiceWorkerException:()=>Qe,hasActivatedSW:()=>Ro,importLatestWidget:()=>yr,importRecentWidget:()=>vr,init:()=>Gr,orderTheConnections:()=>Vi.X,recursiveFetch:()=>r.zN,recursiveFetchNew:()=>pn,removeAllChildren:()=>bo,renderImportedWidget:()=>mr,renderLatestWidget:()=>qn,renderPage:()=>gr,renderWidget:()=>Cr,searchLinkMultipleListener:()=>Ri,sendEmail:()=>Ki,sendMessage:()=>je,serviceWorker:()=>Fe,setHasActivatedSW:()=>Dr,storeToDatabase:()=>ve,subscribedListeners:()=>Bo,unwrapContainers:()=>Eo,updateAccessToken:()=>Do,uploadAttachment:()=>Zo,uploadFile:()=>oo,uploadImage:()=>no,uploadImageV2:()=>Ko,validDocumentFormats:()=>to,validImageFormats:()=>eo}),y.r(O);var N={};y.r(N),y.d(N,{ADMIN:()=>xi,ALLID:()=>We.BG,AccessTracker:()=>Cn.J,AddGhostConcept:()=>wi,Anomaly:()=>Xe,BaseUrl:()=>i.B,BinaryTree:()=>Xn.W,BuildWidgetFromId:()=>Bt.Cp,BuilderStatefulWidget:()=>Sn,Composition:()=>Tn,CompositionBinaryTree:()=>jt,CompositionNode:()=>so,Concept:()=>ji.j,ConceptsData:()=>w.I,Connection:()=>te.N,ConnectionData:()=>Gt.d,CountInfo:()=>sr.y,CreateComposition:()=>se.A,CreateConnection:()=>Ot.d,CreateConnectionBetweenEntityLocal:()=>Lo,CreateConnectionBetweenTwoConcepts:()=>me,CreateConnectionBetweenTwoConceptsGeneral:()=>be,CreateConnectionBetweenTwoConceptsLocal:()=>yo.h,CreateData:()=>Jn,CreateDefaultConcept:()=>ne.o,CreateDefaultLConcept:()=>uo.u,CreateSession:()=>pi,CreateSessionVisit:()=>fi,CreateTheCompositionLocal:()=>$.R,CreateTheCompositionWithCache:()=>In,CreateTheConnection:()=>xe.q,CreateTheConnectionGeneral:()=>ae,CreateTheConnectionLocal:()=>Ot.F,DATAID:()=>We.y0,DATAIDDATE:()=>We.iw,DATAV2:()=>We.pU,DelayFunctionExecution:()=>Ei,DeleteConceptById:()=>Zn,DeleteConceptLocal:()=>Li,DeleteConnectionById:()=>de.m,DeleteConnectionByIdBulk:()=>de.E,DeleteConnectionByType:()=>gn.$S,DeleteConnectionByTypeBulk:()=>gn.L0,DeleteUser:()=>jo,DependencyObserver:()=>$t.w,FilterSearch:()=>Vn,FormatFromConnections:()=>Zt.vw,FormatFromConnectionsAltered:()=>Zt.y8,FreeschemaQuery:()=>Tt,FreeschemaQueryApi:()=>$n,GetAllConnectionsOfComposition:()=>ee.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>gn.WC,GetComposition:()=>r.Nj,GetCompositionBulk:()=>ot.dF,GetCompositionBulkWithDataId:()=>ot.cw,GetCompositionFromConnectionsWithDataId:()=>ot.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>ot.km,GetCompositionFromConnectionsWithDataIdInObject:()=>ot.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>ot.Nt,GetCompositionFromConnectionsWithIndex:()=>ot.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>ot.hG,GetCompositionFromMemoryWithConnections:()=>r.JA,GetCompositionList:()=>C,GetCompositionListAll:()=>m,GetCompositionListAllWithId:()=>I,GetCompositionListListener:()=>Pi,GetCompositionListLocal:()=>z,GetCompositionListLocalWithId:()=>K,GetCompositionListWithId:()=>E,GetCompositionListWithIdUpdated:()=>L,GetCompositionListener:()=>Gi,GetCompositionLocal:()=>U,GetCompositionLocalWithId:()=>P,GetCompositionWithAllIds:()=>r.Mb,GetCompositionWithCache:()=>li,GetCompositionWithDataIdBulk:()=>ui,GetCompositionWithDataIdWithCache:()=>co,GetCompositionWithId:()=>r.yz,GetCompositionWithIdAndDateFromMemory:()=>r.Ez,GetConceptBulk:()=>hn.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>fe.A,GetConnectionBetweenTwoConceptsLinker:()=>_i,GetConnectionBulk:()=>Un.j,GetConnectionById:()=>qo,GetConnectionDataPrefetch:()=>ot.QL,GetConnectionOfTheConcept:()=>ue,GetConnectionTypeForCount:()=>To.V,GetFreeschemaImage:()=>Br,GetFreeschemaImageUrl:()=>Rr,GetImageApi:()=>Oo,GetLink:()=>Re,GetLinkListListener:()=>Mi,GetLinkListener:()=>Ui.d,GetLinkRaw:()=>Le,GetLinkerConnectionFromConcepts:()=>Wo,GetLinkerConnectionToConcepts:()=>Mo,GetRelation:()=>lo,GetRelationLocal:()=>Ii,GetRelationRaw:()=>vi,GetTheConcept:()=>ce.A,GetTheConceptLocal:()=>po.f,GetUserGhostId:()=>Ci,JUSTDATA:()=>We.ZJ,LConcept:()=>$i,LConnection:()=>Hi,LISTNORMAL:()=>We.SL,LocalConceptsData:()=>S.v,LocalSyncData:()=>Kt.H,LocalTransaction:()=>ko,LogEvent:()=>ar,Logger:()=>pe.V,LoginToBackend:()=>ei,MakeTheInstanceConcept:()=>we.A,MakeTheInstanceConceptLocal:()=>ge.k,MakeTheTimestamp:()=>zo,MakeTheTypeConceptApi:()=>He,MakeTheTypeConceptLocal:()=>Ee.$,NORMAL:()=>We.yv,PRIVATE:()=>Oi,PUBLIC:()=>Bi,PatcherStructure:()=>qi,Prototype:()=>Er,RAW:()=>We.XZ,RecursiveSearchApi:()=>Jo,RecursiveSearchApiNewRawFullLinker:()=>Xo,RecursiveSearchApiRaw:()=>Kn,RecursiveSearchApiRawFullLinker:()=>Yo,RecursiveSearchApiWithInternalConnections:()=>Qo,RecursiveSearchListener:()=>Wi,SchemaQuery:()=>ir,SchemaQueryListener:()=>yn,SearchAllConcepts:()=>si,SearchLinkInternal:()=>Ai,SearchLinkInternalAll:()=>Ni,SearchLinkMultipleAll:()=>Zt.cf,SearchLinkMultipleAllObservable:()=>mo,SearchLinkMultipleApi:()=>u.j,SearchQuery:()=>Yt,SearchStructure:()=>Ji,SearchWithLinker:()=>ai,SearchWithTypeAndLinker:()=>Ht.zl,SearchWithTypeAndLinkerApi:()=>vo,Selector:()=>cr,SessionData:()=>zi,Signin:()=>oi,Signup:()=>ti,SignupEntity:()=>ni,SplitStrings:()=>T.f,StatefulWidget:()=>jn,SyncData:()=>X.Y,TrashTheConcept:()=>$o,UpdateComposition:()=>ri,UpdateCompositionLocal:()=>Ti.D,UserBinaryTree:()=>Xt,Validator:()=>tr,ViewInternalData:()=>go,ViewInternalDataApi:()=>fo,WidgetTree:()=>No,convertFromConceptToLConcept:()=>Mn.F4,convertFromLConceptToConcept:()=>Mn.dp,convertWidgetTreeToWidget:()=>Nn,convertWidgetTreeToWidgetWithWrapper:()=>_o,createFormFieldData:()=>nr,createPrototypeLocal:()=>xo,dispatchIdEvent:()=>Pr,getFromDatabaseWithType:()=>Ce,getObjectsFromIndexDb:()=>Te,getUserDetails:()=>rr.s,getWidgetBulkFromId:()=>tn,getWidgetFromId:()=>Ir,handleServiceWorkerException:()=>Qe,hasActivatedSW:()=>Ro,importLatestWidget:()=>yr,importRecentWidget:()=>vr,init:()=>Gr,orderTheConnections:()=>Vi.X,recursiveFetch:()=>r.zN,recursiveFetchNew:()=>pn,removeAllChildren:()=>bo,renderImportedWidget:()=>mr,renderLatestWidget:()=>qn,renderPage:()=>gr,renderWidget:()=>Cr,searchLinkMultipleListener:()=>Ri,sendEmail:()=>Ki,sendMessage:()=>je,serviceWorker:()=>Fe,setHasActivatedSW:()=>Dr,storeToDatabase:()=>ve,subscribedListeners:()=>Bo,unwrapContainers:()=>Eo,updateAccessToken:()=>Do,uploadAttachment:()=>Zo,uploadFile:()=>oo,uploadImage:()=>no,uploadImageV2:()=>Ko,validDocumentFormats:()=>to,validImageFormats:()=>eo});var b=y(5020),n=y(205),u=y(2832),T=y(6467),w=y(3026),i=y(9581),e=y(3518),o=y(1863),d=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function f(R,h){var s=arguments;return d(this,void 0,void 0,function*(){const p=pe.V.logfunction("GetAllConceptsByType",s);try{var k=new URLSearchParams;k.append("type",R),k.append("user_id",h.toString());var A=(0,e.Xr)("application/x-www-form-urlencoded");const G=yield fetch(i.B.GetAllConceptsByTypeUrl(),{method:"POST",headers:A,body:k});if(G.ok){const _=yield G.json();for(var x=0;x<_.length;x++)w.I.AddConcept(_[x])}else console.log("GetAllConceptsByType error",G.status),(0,o.ry)(G)}catch(G){G instanceof Error?console.log("GetAllConceptsByType error message: ",G.message):console.log("GetAllConceptsByType unexpected error: ",G),(0,o.Mb)(G,i.B.GetAllConceptsByTypeUrl()),(0,o.ey)(p,"GetAllConceptsByType",G)}})}var v=y(8642),S=y(9736),r=y(8939),a=y(2013),t=y(8064),c=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function C(R,h){var s=arguments;return c(this,arguments,void 0,function*(p,k,A=10,x=1){const G=pe.V.logfunction("GetCompositionList",s)||{};if(Fe){G.serviceWorker=!0;try{const l=yield je("GetCompositionList",{compositionName:p,userId:k,inpage:A,page:x});return pe.V.logUpdate(G),l.data}catch(l){console.error("GetCompositionList sw error: ",l),(0,o.ey)(G,"GetCompositionList",l),Qe(l)}}let _=yield(0,a.A)(p),g=[];if(_){yield f(p,k);let l=yield w.I.GetConceptsByTypeIdAndUser(_.id,k),F=A*(x-1),V=[];for(let H=F;H<F+A;H++)l[H]&&V.push(l[H].id);yield(0,v.Y)(V);for(let H=F;H<F+A;H++)if(l[H]){let q=yield(0,r.kx)(l[H].id);g.push(q)}}return pe.V.logUpdate(G),g})}function m(R,h){return c(this,arguments,void 0,function*(s,p,k=10,A=1){let x=z(s,p),G=C(s,p),_=[];return Promise.race([x,G]).then(g=>{console.log("Promise result",g),_.push(...g)}).catch(g=>{console.log("error in handling",g)}),G.then(g=>{console.log("This is the second promise result",g),_.push(...g)}),_})}function I(R,h){return c(this,arguments,void 0,function*(s,p,k=10,A=1){if(Fe)try{return(yield je("GetCompositionListAllWithId",{compositionName:s,userId:p,inpage:k,page:A})).data}catch(H){console.error("GetCompositionListAllWithId sw error: ",H),Qe(H)}let x=yield(0,t.Ay)(s),G=yield(0,a.A)(s),_=[],g=[],l=[],F=[];x.id!=0&&(g=yield S.v.GetConceptsByTypeIdAndUser(x.id,p)),G.id!=0&&(yield f(s,p),F=yield w.I.GetConceptsByTypeIdAndUser(G.id,p),_=F);for(let H=0;H<g.length;H++){let q=!1;for(let oe=0;oe<F.length;oe++)g[H].ghostId==F[oe].ghostId&&(q=!0);q||l.push(g[H])}console.log("This is the all list",l);let V=[];return V=yield function(H,q){return c(this,arguments,void 0,function*(oe,le,ye=10,Se=1){let he=[],Ae=ye*(Se-1),De=[],Pe=le.length;for(let Me=Ae;Me<Ae+ye-Pe;Me++)oe[Me]&&De.push(oe[Me].id);for(let Me=0;Me<le.length;Me++){let Oe=yield P(le[Me].id);he.push(Oe)}yield(0,v.Y)(De);for(let Me=Ae;Me<Ae+ye-Pe;Me++)if(oe[Me]){let Oe=yield(0,r.RW)(oe[Me].id);he.push(Oe)}return he})}(_,l,k,A),V})}function E(R,h){return c(this,arguments,void 0,function*(s,p,k=10,A=1){if(Fe)try{return(yield je("GetCompositionListWithId",{compositionName:s,userId:p,inpage:k,page:A})).data}catch(_){console.error("GetCompositionListWithId sw error: ",_),Qe(_)}let x=yield(0,a.A)(s),G=[];if(x){yield f(s,p);let _=yield w.I.GetConceptsByTypeIdAndUser(x.id,p),g=k*(A-1),l=[];for(let F=g;F<g+k;F++)_[F]&&l.push(_[F].id);yield(0,v.Y)(l);for(let F=g;F<g+k;F++)if(_[F]){let V=yield(0,r.RW)(_[F].id);G.push(V)}}return G})}function L(R,h){return c(this,arguments,void 0,function*(s,p,k=10,A=1){let x=yield(0,a.w)(s),G=[];if(x){yield f(s,p);let _=yield w.I.GetConceptsByTypeIdAndUser(x.id,p),g=k*(A-1),l=[];for(let F=g;F<g+k;F++)_[F]&&l.push(_[F].id);yield(0,v.Y)(l);for(let F=g;F<g+k;F++)if(_[F]){let V=yield(0,r.RW)(_[F].id);G.push(V)}}return G})}var B=y(4864),D=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})},W=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function U(R){return W(this,void 0,void 0,function*(){var h,s;try{if(Fe)try{return(yield je("GetCompositionLocal",{id:R})).data}catch(_){console.error("GetCompositionLocal error sw: ",_),Qe(_)}let p=[],k={};p=yield B.G.GetConnectionsOfCompositionLocal(R);let A=[];for(let _=0;_<p.length;_++)A.includes(p[_].ofTheConceptId)||A.push(p[_].ofTheConceptId);let x=yield S.v.GetConcept(R);if(x.id==0){let _=yield function(g){var l=arguments;return D(this,void 0,void 0,function*(){const F=pe.V.logfunction("TranslateLocalToReal",l);let V=(0,ne.o)();try{var H=(0,e.ab)("application/x-www-form-urlencoded");const q=yield fetch(i.B.GetRealConceptById(),{method:"POST",headers:H,body:`id=${g}`});if(q.ok)return V=yield q.json(),V.id>0&&w.I.AddConcept(V),V;console.log("Error in Getting Translating concept Error",q.status),(0,o.ry)(q),pe.V.logUpdate(F)}catch(q){q instanceof Error?console.log("Error in Getting Translating concept error message: ",q):console.log("Error in Getting Translating concept unexpected error: ",q),(0,o.Mb)(q,i.B.GetRealConceptById()),(0,o.ey)(F,"TranslateLocalToReal",q)}return V})}(R);if(_.id>0)return yield(0,r.Nj)(_.id)}let G=yield M(R,p,A);return k[(s=(h=x?.type)===null||h===void 0?void 0:h.characterValue)!==null&&s!==void 0?s:"top"]=G,k}catch(p){throw p}})}function P(R){return W(this,void 0,void 0,function*(){var h,s;try{if(Fe)try{return(yield je("GetCompositionLocalWithId",{id:R})).data}catch(_){console.error("GetCompositionLocalWithId error sw: ",_),Qe(_)}let p=[],k={},A={};p=yield B.G.GetConnectionsOfCompositionLocal(R);let x=[];for(let _=0;_<p.length;_++)x.includes(p[_].ofTheConceptId)||x.push(p[_].ofTheConceptId);let G=yield S.v.GetConcept(R);if(G.id!=0){let _=yield M(R,p,x);k[(s=(h=G?.type)===null||h===void 0?void 0:h.characterValue)!==null&&s!==void 0?s:"top"]=_}return A.data=k,A.id=R,A}catch(p){throw p}})}function M(R,h,s){return W(this,arguments,void 0,function*(p,k,A,x=[]){var G,_,g;let l={},F=[],V=yield S.v.GetConcept(p);if(V.id!=0&&V.type==null){let H=V.typeId,q=yield S.v.GetConcept(H);V.type=q}if((G=V?.type)===null||G===void 0||G.characterValue,!A.includes(p))return V?.characterValue;if(x.includes(p))return"";x.push(p);for(let H=0;H<k.length;H++)if(k[H].ofTheConceptId==p){let q=k[H].toTheConceptId,oe=yield S.v.GetConcept(q);if(oe.id!=0&&oe?.type==null){let Se=oe.typeId,he=yield S.v.GetConcept(Se);oe.type=he}let le="the_",ye=((g=(_=oe?.type)===null||_===void 0?void 0:_.characterValue)!==null&&g!==void 0?g:"top").replace(le,"");if(isNaN(Number(ye))){if(ye){const Se=yield M(q,k,A);l[ye]=Se}}else{const Se=yield M(q,k,A);F[ye]=Se,l=F}}return l})}var j=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function z(R,h){return j(this,void 0,void 0,function*(){if(Fe)try{return(yield je("GetCompositionListLocal",{compositionName:R,userId:h})).data}catch(s){console.error("GetCompositionListLocal error sw: ",s),Qe(s)}try{let s=yield(0,t.Ay)(R),p=[];if(s.id!=0){let k=yield S.v.GetConceptsByTypeIdAndUser(s.id,h);for(let A=0;A<k.length;A++){let x=yield U(k[A].id);p.push(x)}}return p}catch(s){throw s}})}function K(R,h){return j(this,void 0,void 0,function*(){if(Fe)try{return(yield je("GetCompositionListLocalWithId",{compositionName:R,userId:h})).data}catch(s){console.error("GetCompositionListLocalWithId error sw: ",s),Qe(s)}try{let s=yield(0,t.Ay)(R),p=[];if(s.id!=0){let k=yield S.v.GetConceptsByTypeIdAndUser(s.id,h);for(let A=0;A<k.length;A++){let x=yield P(k[A].id);p.push(x)}}return p}catch(s){throw s}})}var ee=y(2),se=y(1218),$=y(999),ie=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function ue(R,h,s){var p=arguments;return ie(this,arguments,void 0,function*(k,A,x,G=10,_=1){const g=pe.V.logfunction("GetConnectionOfTheConcept",p)||{};let l=[];try{if(Fe){g.serviceWorker=!0;try{const q=yield je("GetConnectionOfTheConcept",{typeId:k,ofTheConceptId:A,userId:x,inpage:G,page:_});return pe.V.logUpdate(g),q.data}catch(q){console.error("GetConnectionOfTheConcept sw error: ",q),(0,o.ey)(g,"GetConnectionOfTheConcept",q),Qe(q)}}let F=new URLSearchParams;F.append("typeId",`${k}`),F.append("ofTheConceptId",`${A}`),F.append("userId",`${x}`),F.append("inpage",`${G}`),F.append("page",`${_}`);let V=(0,e.Xr)("application/x-www-form-urlencoded");const H=yield fetch(i.B.GetAllConnectionsOfConceptUrl(),{method:"POST",headers:V,body:F});return H.ok?l=yield H.json():((0,o.ey)(g,"GetConnectionOfTheConcept",H.status),(0,o.ry)(H),console.log("Get connection of concept error",H.status)),pe.V.logUpdate(g),l}catch(F){F instanceof Error?console.log("Get connection of concept  error message: ",F.message):console.log("Get connection of concept unexpected error: ",F),(0,o.Mb)(F,i.B.GetAllConnectionsOfConceptUrl()),(0,o.ey)(g,"GetConnectionOfTheConcept",F)}})}var te=y(2155),X=y(442),ne=y(7282),Y=y(5976),J=y(7273),re=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function ae(R,h,s,p){return re(this,arguments,void 0,function*(k,A,x,G,_=1,g=4){if(k>0&&x>0){var l=A,F=yield Y.p.getId(),V=new te.N(F,k,x,l,G,_,g);return k==x?(V.ofTheConceptId=0,V.toTheConceptId=1,V):(V.toUpdate=!0,V.isTemp=!1,X.Y.AddConnection(V),V)}throw new J.z("cannot create connection because id are negative ",!1,400,"")})}var de=y(4818),ce=y(7876),we=y(8407),Ie=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function me(R,h,s){return Ie(this,arguments,void 0,function*(p,k,A,x=!1,G=!1){var _,g;if(Fe)try{return(yield je("CreateConnectionBetweenTwoConcepts",{ofTheConcept:p,toTheConcept:k,linker:A,both:x,count:G})).data}catch(oe){console.error("CreateConnectionBetweenTwoConcepts sw error: ",oe),Qe(oe)}let l=p.userId;if(x){let oe=A+"_by",le=((_=k.type)===null||_===void 0?void 0:_.characterValue)+"_s_"+oe;G&&(yield ke(oe,k,l));let ye=yield(0,we.A)("connection",le,!1,999,999,999),Se=new te.N(0,k.id,p.id,l,ye.id,1e3,4);X.Y.AddConnection(Se)}let F=A+"_s",V=((g=p.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+F;G&&(yield ke(F,p,l));let H=yield(0,we.A)("connection",V,!1,999,999,999),q=new te.N(0,p.id,k.id,l,H.id,1e3,4);return X.Y.AddConnection(q),q})}function ke(R,h){return Ie(this,arguments,void 0,function*(s,p,k=null){var A;let x=p,G=k??p.userId,_=s+"_count",g=((A=p.type)===null||A===void 0?void 0:A.characterValue)+"_s_"+_,l=yield(0,we.A)("connection",g,!1,G,4,999),F=yield ue(l.id,p.id,G,10,1),V=[],H=(0,ne.o)();for(let oe=0;oe<F.length;oe++){let le=yield(0,ce.A)(F[oe].toTheConceptId);V.push(le)}if(V.length<1)H=yield(0,we.A)("count","1",!1,G,4,999);else{let oe=V[0],le=0;try{le=Number(oe.characterValue)}catch{le=0}le+=1,H=yield(0,we.A)("count",le.toString(),!1,G,4,999);for(let ye=0;ye<F.length;ye++)(0,de.m)(F[ye].id)}let q=new te.N(0,x.id,H.id,x.userId,l.id,1e3,4);yield X.Y.AddConnection(q)})}function be(R,h,s){return Ie(this,arguments,void 0,function*(p,k,A,x=!1,G=!1){var _,g;let l=p.userId;if(x){let q=A+"_by",oe=((_=k.type)===null||_===void 0?void 0:_.characterValue)+"_s_"+q;G&&(yield ke(q,k,l));let le=yield(0,we.A)("connection",oe,!1,999,999,999),ye=new te.N(0,k.id,p.id,l,le.id,1e3,4);X.Y.AddConnection(ye)}let F=A+"_s",V=((g=p.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+F;G&&(yield ke(F,p,l));let H=yield(0,we.A)("connection",V,!1,999,999,999);return yield ae(p.id,p.userId,k.id,H.id,1e3,4)})}var ge=y(5868),_e=(y(3655),function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})});function ve(R,h){const s=pe.V.logfunction("storeToDatabase",[R,"noindexdb"]);pe.V.logUpdate(s)}function Ce(R,h,s){return _e(this,void 0,void 0,function*(){const p=pe.V.logfunction("getFromDatabaseWithType",[R,"noindexdb"]);pe.V.logUpdate(p)})}function Te(R){return _e(this,void 0,void 0,function*(){const h=pe.V.logfunction("getObjectsFromIndexDb",[R,"noindexdb"]);pe.V.logUpdate(h)})}var xe=y(1666),fe=y(4402),Ne=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function Re(R,h){var s=arguments;return Ne(this,arguments,void 0,function*(p,k,A=10,x=1){var G;const _=pe.V.logfunction("GetLink",s)||{};if(Fe){_.serviceWorker=!0;try{const H=yield je("GetLink",{id:p,linker:k,inpage:A,page:x});return pe.V.logUpdate(_),H.data}catch(H){console.error("GetLink sw error: ",H),(0,o.ey)(_,"GetLink",H),Qe(H)}}let g=[],l=yield(0,ce.A)(p),F=((G=l.type)===null||G===void 0?void 0:G.characterValue)+"_s_"+k,V=yield(0,fe.A)(F,16);if(V.id>0){let H=yield ue(V.id,l.id,l.userId,A,x),q=[];for(let oe=0;oe<H.length;oe++)q.push(H[oe].toTheConceptId);yield(0,v.Y)(q);for(let oe=0;oe<H.length;oe++){let le=H[oe].toTheConceptId,ye=yield(0,ce.A)(le),Se=yield(0,r.Ez)(ye.id);g.push(Se)}}return pe.V.logUpdate(_),g})}function Le(R,h){var s=arguments;return Ne(this,arguments,void 0,function*(p,k,A=10,x=1){var G;const _=pe.V.logfunction("GetLinkRaw",s);let g=[],l=yield(0,ce.A)(p),F=((G=l.type)===null||G===void 0?void 0:G.characterValue)+"_s_"+k,V=yield(0,fe.A)(F,16);if(V.id>0){let H=yield ue(V.id,l.id,l.userId,A,x),q=[];for(let oe=0;oe<H.length;oe++)q.push(H[oe].toTheConceptId);for(let oe=0;oe<H.length;oe++){let le=H[oe].toTheConceptId,ye=yield(0,ce.A)(le);g.push(ye)}}return pe.V.logUpdate(_),g})}var Ee=y(8357),Be=y(843),Ge=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};const $e=new Map;function He(R,h){var s=arguments;return Ge(this,void 0,void 0,function*(){const p=pe.V.logfunction("MakeTheTypeConceptApi",s);let k=(0,ne.o)();if($e.has(R))return $e.get(R)||k;const A=Ge(this,void 0,void 0,function*(){try{if(k=yield(0,Be.Az)(R),k.id==0||k.typeId==4){let x=(0,e.Xr)("application/x-www-form-urlencoded");const G=yield fetch(i.B.MakeTheTypeConceptUrl(),{method:"POST",headers:x,body:`type=${R}`});if(!G.ok)throw(0,o.ry)(G),new Error(`Error! status: ${G.status}`);k=yield G.json(),pe.V.logUpdate(p)}}catch(x){x instanceof Error?console.log("Make The Type Concept Api error : ",x.message):console.log("Make The Type Concept Api error : ",x),(0,o.Mb)(x,i.B.MakeTheTypeConceptUrl()),(0,o.ey)(p,"MakeTheTypeConceptApi",x)}finally{$e.delete(R)}return k});return $e.set(R,A),A})}var Vt=y(8675),Mr=y(6058),Uo=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function Wo(R){var h=arguments;return Uo(this,void 0,void 0,function*(){const s=pe.V.logfunction("GetLinkerConnectionFromConcepts",h);let p=yield(0,Vt.l)(R);for(let k=0;k<p.length;k++){let A=p[k],x=A.typeId,G=yield(0,ce.A)(x);A.type=G}return pe.V.logUpdate(s),p})}function Mo(R){var h=arguments;return Uo(this,void 0,void 0,function*(){const s=pe.V.logfunction("GetLinkerConnectionToConcepts",h);let p=yield(0,Mr.W)(R);for(let k=0;k<p.length;k++){let A=p[k],x=A.typeId,G=yield(0,ce.A)(x);A.type=G}return pe.V.logUpdate(s),p})}var Vr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})},jr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})},$r=y(6963),Xn=y(2202),Hr=y(5457),qr=y(991),Vo=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function Zn(R){var h=arguments;return Vo(this,void 0,void 0,function*(){const s=pe.V.logfunction("DeleteConceptById",h);if(Fe)try{return(yield je("DeleteConceptById",{id:R})).data}catch(x){console.error("DeleteConceptById sw error: ",x),Qe(x)}if(R>0){var p=yield w.I.GetConcept(R);if(p.id>0){var k=p.typeId,A=p.characterValue;yield Hr.c.removeTypeConcept(k,R),yield $r.f.removeNodeByCharacter(A,R),yield function(x){var G=arguments;return jr(this,void 0,void 0,function*(){let _=!1;const g=pe.V.logfunction("DeleteTheConcept",G);try{const l=new FormData;l.append("id",x.toString());let F=(0,e.BZ)();const V=yield fetch(i.B.DeleteConceptUrl(),{method:"POST",headers:F,body:l});V.ok?_=(yield V.json()).success:(console.log("Delete concept error",V.status),(0,o.ry)(V)),_&&w.I.AddNpc(x),pe.V.logUpdate(g)}catch(l){l instanceof Error?console.log("Delete concept error message: ",l.message):console.log("Delete concept unexpected error: ",l),(0,o.Mb)(l,i.B.DeleteConceptUrl()),(0,o.ey)(g,"DeleteTheConcept",l)}return _})}(R),yield Xn.W.removeNodeFromTree(R),yield qr.H.removeNodeFromTree(R)}}else S.v.RemoveConceptById(R);pe.V.logUpdate(s)})}function jo(R){return Vo(this,void 0,void 0,function*(){if(Fe)try{return(yield je("DeleteUser",{id:R})).data}catch(h){console.error("DeleteUser sw error: ",h),Qe(h)}R>0?function(h){var s=arguments;Vr(this,void 0,void 0,function*(){const p=pe.V.logfunction("DeleteUserInBackend",s);try{var k=(0,e.ab)("application/json","");let A=i.B.DeleteUserUrl();A=A+"?conceptId="+h+"&apiKey=freeschema";const x=yield fetch(A,{method:"POST",headers:k});if(x.ok){let G=yield x.json(),_=Number(G.data);return console.log("this is the delete email concept",_),Zn(_),pe.V.logUpdate(p),_}throw(0,o.ry)(x),new Error(`Delete composition Error! status: ${x.status}`)}catch(A){A instanceof Error?console.log("Delete composition error message: ",A.message):console.log("Delete composition unexpected error: ",A),(0,o.Mb)(A,i.B.DeleteConceptUrl()),(0,o.ey)(p,"DeleteUserInBackend",A)}})}(R):S.v.RemoveConceptById(R)})}var zr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function $o(R,h){return zr(this,void 0,void 0,function*(){try{const s=new Headers;s.append("Authorization","Bearer "+h);const p=new FormData;p.append("id",R.toString());const k=yield fetch(i.B.DeleteConceptUrl(),{method:"POST",body:p,headers:s});if(!k.ok)throw(0,o.ry)(k),new Error(`Delete composition Error! status: ${k.status}`)}catch(s){s instanceof Error?console.log("Delete composition error message: ",s.message):console.log("Delete composition unexpected error: ",s),(0,o.Mb)(s,i.B.DeleteConceptUrl())}})}var Cn=y(1735),Gt=y(8286),Jr=y(1596),Je=y(3278),Ho=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})},Qr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function qo(R){var h=arguments;return Qr(this,void 0,void 0,function*(){const s=pe.V.logfunction("GetConnectionById",h);if(console.log("AccessTracker activation status from GetConnectionById"),Cn.J.activateStatus===!0)try{Cn.J.incrementConnection(R)}catch{console.error("Error adding connection in access tracker"),pe.V.log("ERROR","Error Adding Connection")}if(Fe)try{return(yield je("GetConnectionById",{id:R})).data}catch(k){console.error("GetConnectionById sw error: ",k),Qe(k)}let p=yield Gt.d.GetConnection(R);return p!=null&&p.id!=0||R==null||R==null||(p=yield function(k){var A=arguments;return Ho(this,void 0,void 0,function*(){const x=pe.V.logfunction("GetConnection",A);let G=yield Gt.d.GetConnection(k);try{if(G.id!=0)return G;{const _=new FormData;_.append("id",k.toString());const g={method:"POST",headers:{Authorization:"Bearer "+Je.b.BearerAccessToken},body:_};let l;try{l=yield fetch(i.B.GetConnectionUrl(),g)}catch{l=yield(0,Jr.g)(g,"/api/get-connection-by-id")}return yield function(F,V){return Ho(this,void 0,void 0,function*(){F.ok?(V=yield F.json(),Gt.d.AddConnection(V)):((0,o.ry)(F),console.log("Get Connection Error",F.status))})}(l,G),pe.V.logUpdate(x),G}}catch(_){_ instanceof Error?console.log("Get Connection error message: ",_.message):console.log("Get Connection unexpected error: ",_),(0,o.Mb)(_,i.B.GetConnectionUrl()),(0,o.ey)(x,"GetConnection",_)}})}(R)),pe.V.logUpdate(s),p})}var Yr=y(2212),Xr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})},Zr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function zo(R,h,s){return Zr(this,arguments,void 0,function*(p,k,A,x=4,G=999){const _=pe.V.logfunction("MakeTheTimestamp")||{};if(Fe){_.serviceWorker=!0;try{const q=yield je("MakeTheTimestamp",{type:p,referent:k,userId:A,accessId:x,sessionInformationId:G});return pe.V.logUpdate(_),q.data}catch(q){console.error("MakeTheTimestamp sw error: ",q),(0,o.ey)(_,"MakeTheTimestamp",q),Qe(q)}}let g,l="",F=p.startsWith("the_"),V=(0,ne.o)();return l=F?p:"the_"+p,V=yield He(l,A),g=yield function(q,oe,le,ye,Se,he,Ae){return Xr(this,void 0,void 0,function*(){let De=yield(0,fe.A)(q,ye),Pe=De;return Pe.id==0&&(De=yield(0,Yr.Ay)(q,oe,4,ye,0,he,Ae),Pe=De),Pe})}(k,A,0,V.id,0,x,l),pe.V.logUpdate(_),g})}class Yt{constructor(){this.composition=0,this.type="",this.linker="",this.inpage=10,this.page=1,this.listLinkers=[],this.fullLinkers=[],this.textSearch="",this.logic="or",this.reverse=!1,this.doFilter=!1,this.filterSearches=[],this.selectors=[],this.ofCompositions=[]}}var ot=y(6687),wn=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function Jo(){var R=arguments;return wn(this,arguments,void 0,function*(h=0,s=[],p="",k=[]){const A=pe.V.logfunction("RecursiveSearchApi",R)||{};let x=[];try{if(Fe){A.serviceWorker=!0;try{const F=yield je("RecursiveSearchApi",{composition:h,listLinkers:s,textSearch:p,fullLinkers:k});return pe.V.logUpdate(A),F.data}catch(F){console.error("RecursiveSearchApi sw error: ",F),(0,o.ey)(A,"RecursiveSearchApi",F),Qe(F)}}let G=new Yt;G.composition=h,G.listLinkers=s,G.fullLinkers=k,G.textSearch=p;let _=JSON.stringify(G),g=(0,e.Xr)();const l=yield fetch(i.B.RecursiveSearchUrl(),{method:"POST",headers:g,body:_});if(l.ok){const F=yield l.json();let V=F.compositionIds,H=F.internalConnections;F.externalConnections,x=yield(0,ot.p8)(V,H)}else console.log("recursive search error ",l.status),(0,o.ey)(A,"RecursiveSearchApi",l.status),(0,o.ry)(l);pe.V.logUpdate(A)}catch(G){G instanceof Error?console.log("recursive search error message: ",G.message):console.log("recursive search unexpected error: ",G),(0,o.ey)(A,"RecursiveSearchApi",G),(0,o.Mb)(G,i.B.RecursiveSearchUrl())}return x})}function Qo(){var R=arguments;return wn(this,arguments,void 0,function*(h=0,s=[],p=""){const k=pe.V.logfunction("RecursiveSearchApiWithInternalConnections",R)||{};let A=[];try{if(Fe){k.serviceWorker=!0;try{const l=yield je("RecursiveSearchApiWithInternalConnections",{composition:h,listLinkers:s,textSearch:p});return pe.V.logUpdate(k),l.data}catch(l){console.error("RecursiveSearchApiWithInternalConnections sw error: ",l),(0,o.ey)(k,"RecursiveSearchApiWithInternalConnections",l),Qe(l)}}let x=new Yt;x.composition=h,x.listLinkers=s,x.textSearch=p;let G=JSON.stringify(x),_=(0,e.Xr)();const g=yield fetch(i.B.RecursiveSearchUrl(),{method:"POST",headers:_,body:G});if(g.ok){const l=yield g.json();let F=l.compositionIds,V=l.internalConnections;l.externalConnections,A=yield(0,ot.km)(F,V),pe.V.logUpdate(k)}else console.log("recursive search error ",g.status),(0,o.ey)(k,"GetCompositionConnectionsBetweenTwoConcepts",g.status),(0,o.ry)(g)}catch(x){x instanceof Error?console.log("recursive search error message: ",x.message):console.log("recursive search unexpected error: ",x),(0,o.ey)(k,"GetCompositionConnectionsBetweenTwoConcepts",x),(0,o.Mb)(x,i.B.RecursiveSearchUrl())}return A})}function Kn(){var R=arguments;return wn(this,arguments,void 0,function*(h=0,s=[],p="",k=[]){const A=pe.V.logfunction("RecursiveSearchApiRaw",R)||{};try{if(Fe){A.serviceWorker=!0;try{const l=yield je("RecursiveSearchApiRaw",{composition:h,listLinkers:s,textSearch:p,fullLinkers:k});return pe.V.logUpdate(A),l.data}catch(l){console.error("RecursiveSearchApiRaw sw error: ",l),(0,o.ey)(A,"RecursiveSearchApiRaw",l),Qe(l)}}let x=new Yt;x.composition=h,x.listLinkers=s,x.textSearch=p,x.fullLinkers=k;let G=JSON.stringify(x),_=(0,e.Xr)();const g=yield fetch(i.B.RecursiveSearchUrl(),{method:"POST",headers:_,body:G});if(g.ok){const l=yield g.json();return l.compositionIds,l.internalConnections,l.externalConnections,pe.V.logUpdate(A),l}return console.log("recursive search error ",g.status),(0,o.ey)(A,"RecursiveSearchApiRaw",g.status),(0,o.ry)(g),pe.V.logUpdate(A),[]}catch(x){x instanceof Error?console.log("recursive search error message: ",x.message):console.log("recursive search unexpected error: ",x),(0,o.ey)(A,"RecursiveSearchApiRaw",x),(0,o.Mb)(x,i.B.RecursiveSearchUrl())}})}function Yo(){var R=arguments;return wn(this,arguments,void 0,function*(h=0,s=[],p=""){const k=pe.V.logfunction("RecursiveSearchApiRawFullLinker",R)||{};try{if(Fe){k.serviceWorker=!0;try{const g=yield je("RecursiveSearchApiRawFullLinker",{composition:h,fullLinkers:s,textSearch:p});return pe.V.logUpdate(k),g.data}catch(g){console.error("RecursiveSearchApiRawFullLinker sw error: ",g),(0,o.ey)(k,"RecursiveSearchApiRawFullLinker",g),Qe(g)}}let A=new Yt;A.composition=h,A.fullLinkers=s,A.textSearch=p;let x=JSON.stringify(A),G=(0,e.Xr)();const _=yield fetch(i.B.RecursiveSearchUrl(),{method:"POST",headers:G,body:x});if(_.ok){const g=yield _.json();return g.compositionIds,g.internalConnections,g.externalConnections,pe.V.logUpdate(k),g}return console.log("recursive search error ",_.status),(0,o.ey)(k,"RecursiveSearchApiRawFullLinker",_.status),(0,o.ry)(_),pe.V.logUpdate(k),[]}catch(A){A instanceof Error?console.log("recursive search error message: ",A.message):console.log("recursive search unexpected error: ",A),(0,o.Mb)(A,i.B.RecursiveSearchUrl()),(0,o.ey)(k,"RecursiveSearchApiRawFullLinker",A)}})}function Xo(){var R=arguments;return wn(this,arguments,void 0,function*(h=0,s=[],p=""){const k=pe.V.logfunction("RecursiveSearchApiRawFullLinker",R)||{};try{if(Fe)try{k.serviceWorker=!0;const g=yield je("RecursiveSearchApiNewRawFullLinker",{composition:h,fullLinkers:s,textSearch:p});return pe.V.logUpdate(k),g.data}catch(g){console.error("RecursiveSearchApiNewRawFullLinker sw error: ",g),(0,o.ey)(k,"RecursiveSearchApiNewRawFullLinker",g),Qe(g)}let A=new Yt;A.composition=h,A.fullLinkers=s,A.textSearch=p;let x=JSON.stringify(A),G=(0,e.Xr)();const _=yield fetch(i.B.RecursiveSearchUrl(),{method:"POST",headers:G,body:x});if(_.ok){const g=yield _.json();return g.compositionIds,g.internalConnections,g.externalConnections,pe.V.logUpdate(k),g}return console.log("recursive search error ",_.status),(0,o.ey)(k,"RecursiveSearchApiNewRawFullLinker",_.status),(0,o.ry)(_),pe.V.logUpdate(k),[]}catch(A){A instanceof Error?console.log("recursive search error message: ",A.message):console.log("recursive search unexpected error: ",A),(0,o.Mb)(A,i.B.RecursiveSearchUrl()),(0,o.ey)(k,"RecursiveSearchApiNewRawFullLinker",A)}})}var Pn=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};const eo=["image/jpeg","image/jpg","image/png","image/webp"],to=["application/msword","application/vnd.ms-excel","application/vnd.ms-powerpoint","text/plain","application/pdf"];function Zo(R,h){return Pn(this,void 0,void 0,function*(){const s=pe.V.logfunction("uploadAttachment");try{console.log("File Type",R.type);const p=new FormData;let k;if(to.includes(R.type))p.append("file",R,R.name),k=yield oo(p,h);else{if(!eo.includes(R.type))return{message:"Invalid File Format",success:!1};p.append("image",R,R.name),k=yield no(p,h)}return k?.data?(pe.V.logUpdate(s),{message:"Upload Success",success:!0,url:k.data}):{message:"File Upload Failed",success:!1}}catch(p){throw console.error(p),(0,o.ey)(s,"uploadAttachment",p),p}})}function no(R){return Pn(this,arguments,void 0,function*(h,s=""){const p=pe.V.logfunction("uploadImage");try{const k=yield fetch(i.B.uploadImageUrl(),{method:"POST",body:h,headers:{Authorization:`Bearer ${s}`}});if(!k.ok){const A=k.headers.get("content-type");A&&A.includes("text/plain")&&console.info(k?.text());const x=yield k?.text();return console.error(`${k.status} ${x}`),pe.V.logUpdate(p),null}return yield k.json()}catch(k){return console.error(k),(0,o.ey)(p,"uploadImage",k),null}})}function Ko(R){return Pn(this,arguments,void 0,function*(h,s=""){const p=pe.V.logfunction("uploadImageV2");try{const k=yield fetch(i.B.uploadImageUrlWithSmall(),{method:"POST",body:h,headers:{Authorization:`Bearer ${s}`}});if(!k.ok){const A=k.headers.get("content-type");A&&A.includes("text/plain")&&console.info(k?.text());const x=yield k?.text();return console.error(`${k.status} ${x}`),pe.V.logUpdate(p),null}return yield k.json()}catch(k){return console.error(k),(0,o.ey)(p,"uploadImageV2",k),null}})}function oo(R){return Pn(this,arguments,void 0,function*(h,s=""){const p=pe.V.logfunction("uploadFile");try{const k=yield fetch(i.B.uploadFileUrl(),{method:"POST",body:h,headers:{Authorization:`Bearer ${s}`}});if(!k.ok){const A=k.headers.get("content-type");A&&A.includes("text/plain")&&console.info(k.text());const x=yield k.text();return console.error(`${k.status} ${x}`),null}return pe.V.logUpdate(p),yield k.json()}catch(k){return console.error(k),(0,o.ey)(p,"uploadFile",k),null}})}var hn=y(1239),Un=y(7467),Kr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function ei(R,h){var s=arguments;return Kr(this,arguments,void 0,function*(p,k,A="boomconsole.com"){const x=pe.V.logfunction("LoginToBackend",s);try{let G={email:p,password:k,application:A},_=new Headers;_.append("Content-Type","application/json");let g=JSON.stringify(G);const l=yield fetch(i.B.LoginUrl(),{method:"POST",headers:_,body:g}),F=yield l.json();if(l.ok)return Je.b.BearerAccessToken=F.data.token,pe.V.logUpdate(x),F;console.log("Login tsccs error message: ",l.status),(0,o.ER)(l,F)}catch(G){G instanceof Error?console.log("Login tsccs error message: ",G.message):console.log(" Login tsccs  unexpected error: ",G),(0,o.Mb)(G,i.B.LoginUrl()),(0,o.ey)(x,"LoginToBackend",G)}})}var io=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function ti(R){return io(this,void 0,void 0,function*(){return yield function(){return io(this,arguments,void 0,function*(s="",p={}){let k={message:"success",status:!1,statusCode:200,data:"cannot signup"};try{const A=yield fetch(s,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(p)}),x=yield A.json();return A.ok?k={message:"success",status:!0,statusCode:200,data:x}:(0,o.ER)(A,x),k}catch(A){console.log("Signup Error: ",A),(0,o.Mb)(A,s)}})}(i.B.SignupUrl(),R)})}function ni(R){return io(this,void 0,void 0,function*(){const h=i.B.NODE_URL,s=yield fetch(`${h}/api/v1/entity/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(s.ok)return s.json();throw s.status===404?new Error("404, Not found"):s.status===500?new Error("500, internal server error"):new Error(s.status)})}var es=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function oi(R){return es(this,void 0,void 0,function*(){const h=JSON.stringify({email:R.email,password:R.password});let s={message:"success",status:!1,statusCode:200,data:""};const p=new Headers;p.append("Content-Type","application/json");const k=i.B.LoginUrl();try{const A=yield fetch(k,{method:"POST",headers:p,body:h,redirect:"follow"}),x=yield A.json();return A.ok?s={message:"success",status:!0,statusCode:200,data:x?.data}:(0,o.ER)(A,x),s}catch(A){console.log("Sign in api error",A),(0,o.Mb)(A,k)}})}var ro=y(9934),Wn=y(4485);function ts(R=[],h){Array.isArray(R)&&R.splice(R.findIndex(function(s){return s.id===h.id}),1)}function ns(R=[],h){Array.isArray(R)&&R.splice(R.findIndex(function(s){return s.id===h.id}),1)}class so{constructor(h,s,p,k){this.expiryTime=new Date(Date.now()+6e5),this.height=1,this.key=h,this.value=s,this.leftNode=p,this.rightNode=k}isValid(){const h=new Date(Date.now());return!(this.expiryTime<h&&(jt.removeNodeFromTree(this.key),1))}saveToCache(h){this.value.cached=h}addNode(h,s,p){if(s==null)return h;const k=s.leftNode,A=s.rightNode;if(s.key>h.key)s.leftNode=this.addNode(h,k,p);else{if(!(s.key<h.key))return this.isValid(),h;s.rightNode=this.addNode(h,A,p)}s.height=1+Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode));const x=this.getBalanceFactor(s);if(x>1&&s.leftNode){if(h.key<s.leftNode.key)return this.rightRotate(s);if(h.key>s.leftNode.key)return s.leftNode=this.leftRotate(s.leftNode),this.rightRotate(s)}if(x<-1&&s.rightNode){if(h.key>s.rightNode.key)return this.leftRotate(s);if(h.key<s.rightNode.key)return s.rightNode=this.rightRotate(s.rightNode),this.leftRotate(s)}return this.isValid(),s}rightRotate(h){if(h){const s=h.leftNode;if(s){const p=s.rightNode;return h.leftNode=p,s.rightNode=h,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,s}}return h}leftRotate(h){if(h){const s=h.rightNode;if(s){const p=s.leftNode;return s.leftNode=h,h.rightNode=p,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(h.rightNode))+1,s}}return h}getHeight(h){return h?h.height:0}getBalanceFactor(h){return h==null?0:this.getHeight(h.leftNode)-this.getHeight(h.rightNode)}getFromNode(h,s){return s&&(h==s.key&&s.isValid()?s:h<s.key?this.getFromNode(h,s.leftNode):h>s.key?this.getFromNode(h,s.rightNode):s)}removeNode(h,s){if(h==null)return h;if(h.key>s)return h.leftNode=this.removeNode(h.leftNode,s),h;if(h.key<s)return h.rightNode=this.removeNode(h.rightNode,s),h;if(h.leftNode==null){const p=h.rightNode;return h=null,p}if(h.rightNode==null){const p=h.leftNode;return h=null,p}{const p=this.inOrderSuccessor(h.rightNode);return h.value=p.value,h.key=p.key,h.rightNode=this.removeNode(h.rightNode,p.key),h}}countNodeBelow(h){return h==null?0:1+this.countNodeBelow(h.leftNode)+this.countNodeBelow(h.rightNode)}inOrderSuccessor(h){for(;h.leftNode!=null;)h=h.leftNode;return h}}var ii=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};class jt{static addNodeToTree(h){if(this.root==null)return this.root=h,this.root;this.root=this.root.addNode(h,this.root,this.root.height)}static addCompositionToTree(h){const s=new so(h.id,h,null,null);this.addNodeToTree(s)}static getNodeFromTree(h){return ii(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(h,this.root):null})}static removeNodeFromTree(h){return ii(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,h))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}jt.root=null;var os=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function pn(R,h,s,p){return os(this,arguments,void 0,function*(k,A,x,G,_=[]){var g,l;let F={};const V=[];if(k==0)return"";let H=ao(x,k);if(H!=null&&H.id!=0||k==null||k==null||(H=yield(0,ce.A)(k)),H.id!=0&&H.type==null){const q=H.typeId;let oe=ao(x,q);H.type=oe,oe==null&&q!=null&&q!=null&&(oe=yield(0,ce.A)(q),H.type=oe)}if(!G.includes(k))return H?.characterValue;if(_.includes(k))return"";_.push(k);for(let q=0;q<A.length;q++)if(A[q].ofTheConceptId==k){const oe=A[q].toTheConceptId;if(G.includes(k)){let le=ao(x,oe);if(le!=null&&le.id!=0||oe==null||oe==null||(le=yield(0,ce.A)(oe)),le.id!=0&&le?.type==null){const he=le.typeId;let Ae=yield w.I.GetConcept(he);le.type=Ae,Ae==null&&he!=null&&he!=null&&(Ae=yield(0,ce.A)(he),le.type=Ae)}const ye="the_",Se=((l=(g=le?.type)===null||g===void 0?void 0:g.characterValue)!==null&&l!==void 0?l:"").replace(ye,"");if(isNaN(Number(Se))){if(Se){const he=yield pn(oe,A,x,G,_);F[Se]=he}}else{const he=yield pn(oe,A,x,G,_);V[Se]=he,F=V}}}return F})}function ao(R,h){let s=(0,ne.o)();for(let p=0;p<R.length;p++)if(h==R[p].id)return s=R[p],s;return s}class Tn{constructor(){this.id=0,this.mainConcept=(0,ne.o)(),this.connections=[],this.concepts=[],this.subcompositions=[],this.cached={}}updateCache(){return h=this,s=void 0,k=function*(){if(this.mainConcept.id==0)for(let A=0;A<this.concepts.length;A++)this.concepts[A].id==this.id&&(this.mainConcept=this.concepts[A]);this.cached=yield pn(this.id,this.connections,this.concepts,this.subcompositions,[])},new((p=void 0)||(p=Promise))(function(A,x){function G(l){try{g(k.next(l))}catch(F){x(F)}}function _(l){try{g(k.throw(l))}catch(F){x(F)}}function g(l){var F;l.done?A(l.value):(F=l.value,F instanceof p?F:new p(function(V){V(F)})).then(G,_)}g((k=k.apply(h,s||[])).next())});var h,s,p,k}UpdateAcrossDistributedSystem(){var h,s;try{this.id!=0&&(s=(h=this.id)===null||h===void 0?void 0:h.toString(),i.B.MQTT_CONNECTION&&i.B.MQTT_CONNECTION.publish("compositionUpdate",s))}catch(p){console.log("Error while publishing message",p)}}isUpdating(){this.UpdateAcrossDistributedSystem()}GetDataCache(){var h,s,p;const k={};k[(p=(s=(h=this.mainConcept)===null||h===void 0?void 0:h.type)===null||s===void 0?void 0:s.characterValue)!==null&&p!==void 0?p:""]=this.cached;const A={};return A.data=k,A.id=this.id,A}}var is=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function In(R){return is(this,arguments,void 0,function*(h,s=null,p=null,k=null,A=null,x=null,G=null,_=null){const g=A??999,l=x??4,F=G??999;let V=k??0,H=(0,ne.o)();_==null&&(_=new Tn);for(const q in h)if(typeof h[q]=="object"||Array.isArray(h[q])){const oe=yield(0,we.A)(q,"",!0,g,l,F);if(s==null&&p==null){let le=V;H=oe,le=oe.id,V=oe.id,_.concepts.push(oe),_.id=oe.id,yield In(h[q],oe.id,oe.userId,le,A,x,G,_)}else{const le=s??999,ye=p??999,Se=V;H=oe,_.concepts.push(oe);const he=yield(0,xe.q)(le,ye,oe.id,Se);_.connections.push(he),yield In(h[q],oe.id,oe.userId,Se,A,x,G,_)}h[q]!=null&&h[q]!=null&&_.subcompositions.push(oe.id)}else{const oe=s??999,le=p??999,ye=V,Se=yield(0,we.A)(q,h[q],!1,g,l,F);_.concepts.push(Se);const he=yield(0,xe.q)(oe,le,Se.id,ye);_.connections.push(he)}return H})}var rs=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function ri(R){return rs(this,void 0,void 0,function*(){const h=pe.V.logfunction("UpdateComposition")||{};if(Fe){h.serviceWorker=!0;try{const he=yield je("UpdateComposition",{patcherStructure:R});return pe.V.logUpdate(h),he.data}catch(he){console.error("UpdateComposition sw error: ",he),(0,o.ey)(h,"UpdateComposition",he),Qe(he)}}const s=R.userId,p=R.sessionId,k=R.accessId;let A=[];const x=[];let G=(0,ne.o)(),_=(0,ne.o)();const g=[];let l=R.compositionId;const F=R.ofTheCompositionId;let V=[];if(l<0){let he=yield(0,ce.A)(l,s);if(!(he.id>0))return null;l=he.id}A=yield(0,ee.s)(l);const H=[],q=new Tn,oe=[];q.id=l,q.isUpdating();let le=[];for(let he=0;he<A.length;he++)(0,ro.A)(oe,A[he].ofTheConceptId),(0,ro.A)(H,A[he].ofTheConceptId),(0,ro.A)(H,A[he].toTheConceptId),le.push(A[he].ofTheConceptId);q.subcompositions=oe,q.connections=A;for(let he=0;he<H.length;he++){const Ae=yield(0,ce.A)(H[he]);l==H[he]&&(G=Ae),F==H[he]&&(_=Ae),x.push(Ae)}const ye=R.patchObject;for(const he in ye){let Ae=(0,ne.o)();const De=ye[he];let Pe=G;if(_.id>0&&(Pe=_),Array.isArray(De)||typeof De=="object"){Ae=yield(0,we.A)(he,"",!0,G.userId,4,999),q.subcompositions.push(Ae.id);const Oe=(0,Wn.vo)(x,Ae);for(let Ye=0;Ye<Oe.length;Ye++)if(Oe[Ye].id>0){const at=(0,Wn.wS)(q.connections,Oe[Ye].id);V=V.concat(at),g.push(Oe[Ye])}yield In(ye[he],Ae.id,Ae.userId,G.id,G.userId,4,999,q)}else{Ae=yield(0,we.A)(he,De,!1,s,k,p);const Oe=(0,Wn.vo)(x,Ae);for(let Ye=0;Ye<Oe.length;Ye++)if(Oe[Ye].id>0){const at=(0,Wn.wS)(q.connections,Oe[Ye].id);V=V.concat(at),g.push(Oe[Ye])}}const Me=(0,xe.q)(Pe.id,Pe.userId,Ae.id,G.id);x.push(Ae),q.connections.push(Me)}for(let he=0;he<V.length;he++)ns(q.connections,V[he]),(0,de.m)(V[he].id);for(let he=0;he<g.length;he++)ts(x,g[he]);q.concepts=q.concepts.concat(x),q.mainConcept=G,q.id=G.id,yield q.updateCache(),jt.addCompositionToTree(q),X.Y.SyncDataOnline();let Se=q.GetDataCache();return pe.V.logUpdate(h),Se})}var ss=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function si(R,h,s,p){return ss(this,arguments,void 0,function*(k,A,x,G,_=10,g=1){var l=(0,e.ab)("application/x-www-form-urlencoded",G),F=new URLSearchParams;F.append("type",k),F.append("search",A),F.append("composition",x),F.append("inpage",_.toString()),F.append("page",g.toString());const V=i.B.SearchCompositionsUrl()+"?"+F.toString();try{const H=yield fetch(V,{method:"GET",headers:l});return H.ok?yield H.json():((0,o.ry)(H),[])}catch(H){console.log("This is the searching error",H),(0,o.Mb)(H,V)}})}var as=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function ai(R){return as(this,arguments,void 0,function*(h,s=""){var p=(0,e.ab)("application/json",s);const k=i.B.SearchLinkMultipleAll(),A=JSON.stringify(h);try{const x=yield fetch(k,{method:"POST",headers:p,body:A});return x.ok?yield x.json():(console.log("This is the searching error",x.status),(0,o.ry)(x),[])}catch(x){console.log("This is the searching error",x),(0,o.Mb)(x,k)}})}var ci=y(7139),kn=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function li(R){return kn(this,arguments,void 0,function*(h,s=[]){var p,k;let A=[];const x=[];let G={},_={};const g=yield jt.getNodeFromTree(h),l=[];let F=yield w.I.GetConcept(h);if(F.id==0&&h!=null&&h!=null&&(F=yield(0,ci.r)(h)),g==null){let V=[];V=s.length>0?di(h,s):yield(0,ee.s)(h),A=V;for(let q=0;q<A.length;q++)l.includes(A[q].ofTheConceptId)||(l.push(A[q].ofTheConceptId),x.push(A[q].ofTheConceptId)),x.includes(A[q].toTheConceptId)||x.push(A[q].toTheConceptId);hi(F,A,x,l);let H=[];_=yield(0,r.zN)(h,A,l,H),G[(k=(p=F?.type)===null||p===void 0?void 0:p.characterValue)!==null&&k!==void 0?k:""]=_}else _=g.value.GetDataCache(),G=_;return F.id==0?"":G})}function di(R,h){const s=[];for(let p=0;p<h.length;p++)h[p].typeId==R&&s.push(h[p]);return s}function co(R){return kn(this,arguments,void 0,function*(h,s=[]){var p,k;let A={},x=[];const G=[];let _;const g={},l=yield jt.getNodeFromTree(h),F=[];let V=yield w.I.GetConcept(h);if(V.id==0&&h!=null&&h!=null&&(V=yield(0,ci.r)(h)),l==null){let H=[];H=s.length>0?di(h,s):yield(0,ee.s)(h),x=H;for(let q=0;q<x.length;q++)F.includes(x[q].ofTheConceptId)||(F.push(x[q].ofTheConceptId),G.push(x[q].ofTheConceptId)),G.includes(x[q].toTheConceptId)||G.push(x[q].toTheConceptId);hi(V,x,G,F),_=yield(0,r.zN)(h,x,F),g[(k=(p=V?.type)===null||p===void 0?void 0:p.characterValue)!==null&&k!==void 0?k:""]=_,A.created_at=V.entryTimeStamp,A.data=g,A.id=h}else _=l.value.GetDataCache(),A=_;return V.id==0?"":A})}function ui(R,h){return kn(this,void 0,void 0,function*(){let s=[];const p=[];s=yield(0,Un.j)(h);for(let k=0;k<R.length;k++){const A=yield co(R[k],s);A&&p.push(A)}return p})}function hi(R,h,s,p){return kn(this,void 0,void 0,function*(){const k=new Tn,A=yield function(G){return kn(this,void 0,void 0,function*(){let _=[];const g=[];for(let l=0;l<G?.length;l++){const F=yield w.I.GetConcept(G[l]);F.id==0?g.push(G[l]):_.push(F)}return g?.length==0||(_=yield(0,hn.I)(g)),_})}(s);k.connections=h,k.concepts=A,k.id=R.id,k.subcompositions=p,k.mainConcept=R;const x=yield pn(R.id,h,A,p,[]);k.cached=x,jt.addCompositionToTree(k)})}var cs=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function pi(R){return cs(this,void 0,void 0,function*(){try{var h=(0,e.Xr)();const s=JSON.stringify(R),p=yield fetch(i.B.CreateSessionId(),{method:"POST",headers:h,body:s});return p.ok?p.json():(console.log("Creating session failed",yield p.json()),(0,o.ry)(p),null)}catch(s){console.log("Creating session failed",s),(0,o.Mb)(s,i.B.CreateSessionId())}})}var ls=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function fi(R,h){return ls(this,void 0,void 0,function*(){try{var s=(0,e.Xr)("application/x-www-form-urlencoded");const p=new URLSearchParams;p.append("sessionId",R.toString()),p.append("url",h);const k=yield fetch(i.B.CreateSessionVisitUrl(),{method:"POST",headers:s,body:p});return k.ok?k.json():(console.log("Creating session url failed",yield k.json()),(0,o.ry)(k),null)}catch(p){console.log("Creating session url failed",p),(0,o.Mb)(p,i.B.CreateSessionVisitUrl())}})}var ds=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function gi(R,h,s){return ds(this,arguments,void 0,function*(p,k,A,x=10,G=1){let _=[];try{var g=new URLSearchParams;g.append("typeId",`${p}`),g.append("toTheConceptId",`${k}`),g.append("userId",`${A}`),g.append("inpage",`${x}`),g.append("page",`${G}`);var l=(0,e.Xr)("application/x-www-form-urlencoded");const F=yield fetch(i.B.GetAllConnectionsToConceptUrl(),{method:"POST",headers:l,body:g});return F.ok?_=yield F.json():(console.log("Get connection of concept error",F.status),(0,o.ry)(F)),_}catch(F){throw F instanceof Error?console.log("Get connection of concept  error message: ",F.message):console.log("Get connection of concept unexpected error: ",F),F}})}var yi=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function lo(R,h){var s=arguments;return yi(this,arguments,void 0,function*(p,k,A=10,x=1,G=!1){const _=pe.V.logfunction("GetRelation",s)||{};if(Fe){_.serviceWorker=!0;try{const q=yield je("GetRelation",{id:p,relation:k,inpage:A,page:x,reverse:G});return pe.V.logUpdate(_),q.data}catch(q){console.error("GetRelation error sw: ",q),(0,o.ey)(_,"GetRelation",q),Qe(q)}}let g=[],l=yield(0,ce.A)(p),F=yield(0,Be.Az)(k),V=[];if(F.id>0)if(G){V=yield gi(F.id,l.id,l.userId,A,x);let q=[];for(var H=0;H<V.length;H++)q.push(V[H].ofTheConceptId);yield(0,v.Y)(q);for(let oe=0;oe<V.length;oe++){let le=V[oe].ofTheConceptId,ye=yield(0,ce.A)(le),Se=yield(0,r.Ez)(ye.id);g.push(Se)}}else{V=yield ue(F.id,l.id,l.userId,A,x);let q=[];for(let oe=0;oe<V.length;oe++)q.push(V[oe].toTheConceptId);yield(0,v.Y)(q);for(let oe=0;oe<V.length;oe++){let le=V[oe].toTheConceptId,ye=yield(0,ce.A)(le),Se=yield(0,r.Ez)(ye.id);g.push(Se)}}return pe.V.logUpdate(_),g})}function vi(R,h){var s=arguments;return yi(this,arguments,void 0,function*(p,k,A=10,x=1,G=!1){const _=pe.V.logfunction("GetRelationRaw",s)||{};if(Fe){_.serviceWorker=!0;try{const oe=yield je("GetRelationRaw",{id:p,relation:k,inpage:A,page:x,reverse:G});return pe.V.logUpdate(_),oe.data}catch(oe){console.error("GetRelationRaw error sw: ",oe),(0,o.ey)(_,"GetRelationRaw",oe),Qe(oe)}}let g=[],l=yield(0,ce.A)(p),F=yield(0,Be.Az)(k),V=[],H=[];if(F.id>0){if(G){V=yield gi(F.id,l.id,l.userId,A,x);for(var q=0;q<V.length;q++)H.push(V[q].ofTheConceptId)}else{V=yield ue(F.id,l.id,l.userId,A,x);for(let oe=0;oe<V.length;oe++)H.push(V[oe].toTheConceptId)}g=yield(0,hn.r)(H)}return pe.V.logUpdate(_),g})}var uo=y(6416),Ot=y(4711);class us{constructor(h,s,p,k){this.value=[],this.height=1,this.key=h,this.value.push(s),this.leftNode=p,this.rightNode=k}addNode(h,s,p){if(s==null)return h;var k=s.leftNode,A=s.rightNode;if(s.key>h.key)s.leftNode=this.addNode(h,k,p);else{if(!(s.key<h.key))return s.value.push(...h.value),s;s.rightNode=this.addNode(h,A,p)}s.height=1+Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode));let x=this.getBalanceFactor(s);if(x>1&&s.leftNode){if(h.key<s.leftNode.key)return this.rightRotate(s);if(h.key>s.leftNode.key)return s.leftNode=this.leftRotate(s.leftNode),this.rightRotate(s)}if(x<-1&&s.rightNode){if(h.key>s.rightNode.key)return this.leftRotate(s);if(h.key<s.rightNode.key)return s.rightNode=this.rightRotate(s.rightNode),this.leftRotate(s)}return s}rightRotate(h){if(h){let s=h.leftNode;if(s){let p=s.rightNode;return h.leftNode=p,s.rightNode=h,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,s}}return h}leftRotate(h){if(h){let s=h.rightNode;if(s){let p=s.leftNode;return s.leftNode=h,h.rightNode=p,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(h.rightNode))+1,s}}return h}getHeight(h){return h?h.height:0}getBalanceFactor(h){return h==null?0:this.getHeight(h.leftNode)-this.getHeight(h.rightNode)}getFromNode(h,s){return s&&(h==s.key?s:h<s.key?this.getFromNode(h,s.leftNode):h>s.key?this.getFromNode(h,s.rightNode):s)}removeNode(h,s){if(h==null)return h;if(h.key>s)return h.leftNode=this.removeNode(h.leftNode,s),h;if(h.key<s)return h.rightNode=this.removeNode(h.rightNode,s),h;if(h.leftNode==null){let k=h.rightNode;return h=null,k}if(h.rightNode==null){let k=h.leftNode;return h=null,k}var p=this.inOrderSuccessor(h.rightNode);return h.value=p.value,h.key=p.key,h.rightNode=this.removeNode(h.rightNode,p.key),h}countNodeBelow(h){return h==null?0:1+this.countNodeBelow(h.leftNode)+this.countNodeBelow(h.rightNode)}inOrderSuccessor(h){for(;h.leftNode!=null;)h=h.leftNode;return h}}var ho=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};class Xt{static compositeKey(h,s){return("0000"+h.toString(16).toUpperCase()).slice(-4)+("0000"+s.toString(16).toUpperCase()).slice(-4)}static addNodeToTree(h){if(this.root==null)return this.root=h,this.root;this.root=this.root.addNode(h,this.root,this.root.height)}static waitForDataToLoad(){return ho(this,void 0,void 0,function*(){return new Promise((h,s)=>{this.checkFlag(h),setTimeout(()=>{s("not")},25e3)})})}static checkFlag(h){if(n.B.isDataLoaded)return h("done");setTimeout(Xt.checkFlag,1e3,h)}static addConceptToTree(h,s,p=999){let k=this.compositeKey(s,p);var A=new us(k,h,null,null);this.addNodeToTree(A)}static getNodeFromTree(h,s){return ho(this,void 0,void 0,function*(){let p=this.compositeKey(h,s);return this.root?this.root.getFromNode(p,this.root):null})}static removeNodeFromTree(h){return ho(this,arguments,void 0,function*(s,p=999){if(this.root){let k=this.compositeKey(s,p);this.root=this.root.removeNode(this.root,k)}})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}Xt.root=null;var mi=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function Ci(R,h){return mi(this,arguments,void 0,function*(s,p,k=999){let A=yield Xt.getNodeFromTree(s,k),x=(0,uo.u)();if(A)for(let G=0;G<A.value.length;G++){let _=A.value[G];_.ghostId==p&&(x=_)}return x})}function wi(R,h){return mi(this,arguments,void 0,function*(s,p,k=999){Xt.addConceptToTree(s,p,k)})}var Zt=y(5312),po=y(1213),Ti=y(3729),hs=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})},ps=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function Ii(R,h,s){return ps(this,void 0,void 0,function*(){try{if(Fe)try{return(yield je("GetRelationLocal",{id:R,relation:h,userId:s})).data}catch(x){console.error("GetRelationLocal error sw: ",x),Qe(x)}let p=yield(0,t.$I)(h),k=[];p.id!=0&&(k=yield function(x,G){return hs(this,void 0,void 0,function*(){try{return yield B.G.GetConnectionOfCompositionAndTypeLocal(G,x)}catch(_){throw _}})}(R,p.id));let A=[];for(let x=0;x<k.length;x++){let G=yield U(k[x].toTheConceptId);A.push(G)}return A}catch(p){throw p}})}var fs=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function fo(R){return fs(this,void 0,void 0,function*(){let h=[];try{var s=(0,e.Xr)();const p=yield fetch(i.B.ViewInternalDataUrl(),{method:"POST",headers:s,body:JSON.stringify(R)});if(p.ok){let k=yield p.json(),A={};for(let x=0;x<k.length;x++){let G=k[x].concepts;h=k[x].connections;let _=k[x].id;(0,hn.r)(G),A[_]=h}return A}return console.log("View Internal Data error",p.status),(0,o.ry)(p),h}catch(p){throw p instanceof Error?console.log(" This is the view internal data error message: ",p.message):console.log(" This is the view internal data unexpected error: ",p),p}})}var gs=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function go(R){return gs(this,void 0,void 0,function*(){var h;try{let s=yield fo(R),p=[];for(let k=0;k<R.length;k++){let A=R[k],x=s[A];if(A&&x){let G=[],_={};for(let l=0;l<x.length;l++)G.includes(x[l].ofTheConceptId)||G.push(x[l].ofTheConceptId);let g=yield(0,r.zN)(A,x,G);_.data=g,_.id=A,p.push(_)}else{let G={};G.id=A;let _=yield(0,ce.A)(A),g={};_.type&&(g[(h=_?.type)===null||h===void 0?void 0:h.characterValue]=_.characterValue,G.data=g,p.push(G))}}return p}catch(s){throw s}})}var Mn=y(176),ki=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})},Si=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function Ai(R){return Si(this,arguments,void 0,function*(h,s=""){try{let p=yield function(k){return ki(this,arguments,void 0,function*(A,x=""){var G=(0,e.ab)("application/json",x);let _=i.B.SearchInternalWithAuthenticatedCcsUrl();_=_+"?composition="+A.composition+"&search="+A.search+"&internalComposition="+A.internalComposition+"&type="+A.type+"&inpage="+A.inpage+"&page="+A.page;try{const g=yield fetch(_,{method:"GET",headers:G});return g.ok?yield g.json():(console.log("This is the searching internal error",g.status),(0,o.ry)(g),[])}catch(g){console.log("This is the searching internal error",g),(0,o.Mb)(g,_)}})}(h,s);return yield go(p)}catch(p){throw p}})}function Ni(R){return Si(this,arguments,void 0,function*(h,s=""){try{return yield function(p){return ki(this,void 0,void 0,function*(){var k=(0,e.ab)("application/json","");let A=i.B.SearchInternalWithCcsUrl();A=A+"?composition="+p.composition+"&search="+p.search+"&internalComposition="+p.internalComposition+"&type="+p.type+"&inpage="+p.inpage+"&page="+p.page;try{const x=yield fetch(A,{method:"GET",headers:k});return x.ok?yield x.json():(console.log("This is the searching internal error",x.status),(0,o.ry)(x),[])}catch(x){console.log("This is the searching internal error",x),(0,o.Mb)(x,A)}})}(h)}catch(p){throw p}})}var yo=y(8095),ys=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function Li(R){return ys(this,void 0,void 0,function*(){if(Fe)try{return(yield je("DeleteConceptLocal",{id:R})).data}catch(s){console.error("DeleteConceptLocal error sw: ",s),Qe(s)}let h=yield(0,po.f)(R);S.v.RemoveConcept(h)})}var bi=y(2803),vs=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function _i(R,h,s,p){return vs(this,arguments,void 0,function*(k,A,x,G,_=!0){var g,l;const F=pe.V.logfunction("GetConnectionBetweenTwoConceptsLinker")||{};if(Fe){F.serviceWorker=!0;try{const q=yield je("GetConnectionBetweenTwoConceptsLinker",{ofTheConcept:k,toTheConcept:A,linker:x,fullLinker:G,forward:_});return pe.V.logUpdate(F),q.data}catch(q){console.error("GetConnectionBetweenTwoConceptsLinker sw error: ",q),(0,o.ey)(F,"GetConnectionBetweenTwoConceptsLinker",q),Qe(q)}}let V=(0,ne.o)();if(x!=""){let q="";q=_?((g=k.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+x+"_s":((l=A.type)===null||l===void 0?void 0:l.characterValue)+"_s_"+x+"_by",V=yield(0,we.A)("connection",q,!1,999)}G!=""&&(V=yield He(G,999));let H=[];return H=_?yield(0,bi.x)(k.id,A.id,V.id):yield(0,bi.x)(A.id,k.id,V.id),pe.V.logUpdate(F),H})}function Ei(R,h){return new Promise((s,p)=>{setTimeout(()=>{s(h)},R)})}var We=y(3130);const xi=3,Oi=4,Bi=5;var ms=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function vo(R,h){return ms(this,arguments,void 0,function*(s,p,k=""){let A=i.B.SearchAllTypeWithLinker(s.auth);var x=(0,e.ab)("application/json",k);A=A+"?search="+s.search+"&type="+s.type+"&inpage="+s.inpage+"&page="+s.page;const G=JSON.stringify(p);try{const _=yield fetch(A,{method:"POST",headers:x,body:G});return _.ok?yield _.json():((0,o.ry)(_),console.log("This is the searching multiple error",_.status),[])}catch(_){console.log("This is the searching SearchWithTypeAndLinker error",_),(0,o.Mb)(_,A)}})}var $t=y(4287);class mo extends $t.w{constructor(h,s,p=We.y0){super(),this.searchQuery=[],this.format=We.y0,this.searchQuery=h,this.format=p}bind(){return h=this,s=void 0,k=function*(){return this.data=yield(0,Zt.cf)(this.searchQuery,"",this,this.format),this.mainConcept=this.searchQuery[0].composition,this.listenToEvent(this.mainConcept),console.log("this is the data",this.data),this.data},new((p=void 0)||(p=Promise))(function(A,x){function G(l){try{g(k.next(l))}catch(F){x(F)}}function _(l){try{g(k.throw(l))}catch(F){x(F)}}function g(l){var F;l.done?A(l.value):(F=l.value,F instanceof p?F:new p(function(V){V(F)})).then(G,_)}g((k=k.apply(h,s||[])).next())});var h,s,p,k}}function Ri(R,h,s=We.y0){return new mo(R,h??"",s)}var Di=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};class Cs extends $t.w{constructor(h,s=We.ZJ){super(),this.id=h,this.format=s}bind(){return Di(this,void 0,void 0,function*(){if(!this.isDataLoaded){let h=yield(0,r.hL)(this.id);this.mainConcept=this.id,this.compositionIds=h.compositionList;let s=h.connectionList;for(let p=0;p<s.length;p++)this.internalConnections.push(s[p].id);this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return Di(this,void 0,void 0,function*(){let h=[],s=this.internalConnections;for(let p=0;p<s.length;p++)h.push(yield Gt.d.GetConnection(s[p]));return this.format==We.ZJ?this.data=yield(0,r.ay)(this.mainConcept,h,this.compositionIds):this.format==We.y0?this.data=yield(0,r.$V)(this.mainConcept,h,this.compositionIds):this.format==We.yv?this.data=yield(0,r.re)(this.mainConcept,h,this.compositionIds):this.data=yield(0,r.ay)(this.mainConcept,h,this.compositionIds),this.data})}}function Gi(R,h=We.ZJ){return new Cs(R,h)}var Fi=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};class ws extends $t.w{constructor(h,s,p,k,A){super(),this.data=[],this.startPage=0,this.compositionName=h,this.userId=s,this.inpage=p,this.page=k,this.format=A}bind(){return Fi(this,void 0,void 0,function*(){if(!this.isDataLoaded){var h=yield(0,a.A)(this.compositionName);if(h){yield f(this.compositionName,this.userId);let k=yield w.I.GetConceptsByTypeIdAndUser(h.id,this.userId);for(var s=this.inpage*(this.page-1),p=s;p<s+this.inpage;p++)k[p]&&this.compositionIds.push(k[p].id)}yield(0,v.Y)(this.compositionIds),this.isDataLoaded=!0,this.listenToEventType(h.id);for(let k=0;k<this.compositionIds.length;k++)this.listenToEvent(this.compositionIds[k])}return yield this.build()})}build(){return Fi(this,void 0,void 0,function*(){if(this.data=[],this.format==We.ZJ){for(let h=this.startPage;h<this.startPage+this.inpage;h++)if(this.compositionIds[h]){let s=yield(0,r.kx)(this.compositionIds[h]);this.data.push(s)}}else if(this.format==We.y0){for(let h=this.startPage;h<this.startPage+this.inpage;h++)if(this.compositionIds[h]){let s=yield(0,r.RW)(this.compositionIds[h]);this.data.push(s)}}else if(this.format==We.yv){for(let h=this.startPage;h<this.startPage+this.inpage;h++)if(this.compositionIds[h]){let s=yield(0,r.XI)(this.compositionIds[h]);this.data.push(s)}}else for(let h=this.startPage;h<this.startPage+this.inpage;h++)if(this.compositionIds[h]){let s=yield(0,r.kx)(this.compositionIds[h]);this.data.push(s)}return this.data})}}function Pi(R,h,s,p,k=We.ZJ){return new ws(R,h,s,p,k)}var Ht=y(1320),Ui=y(5328),Co=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};class Ts extends $t.w{constructor(h,s,p="",k){super(),this.searchText="",this.connections=[],this.externalConnectionIds=[],this.data=[],this.mainConcept=h,this.searchLinkers=s,this.textSearch=p,k&&(this.format=k)}listenToEvent(h){window.addEventListener(`${h}`,s=>{if(!this.isUpdating){this.isUpdating=!0;let p=this;setTimeout(function(){return Co(this,void 0,void 0,function*(){let k=yield Gt.d.GetConnectionByOfTheConceptAndType(h,h);for(let A=0;A<k.length;A++)yield Gt.d.GetConnection(k[A]).then(x=>{x.typeId==p.mainConcept?p.internalConnections.includes(x.id)||p.internalConnections.push(x.id):p.linkers.includes(x.id)||p.linkers.push(x.id),p.conceptIds.includes(x.toTheConceptId)||p.conceptIds.push(x.toTheConceptId),p.compositionIds.includes(x.ofTheConceptId)||p.compositionIds.push(x.ofTheConceptId),p.compositionIds.includes(x.toTheConceptId)||p.compositionIds.push(x.toTheConceptId)});p.isUpdating=!1,yield p.bind(),p.notify()})},200)}})}bind(){return Co(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;const h=yield Kn(this.mainConcept,this.searchLinkers,this.textSearch);this.compositionIds=h.compositionIds||[],this.internalConnections=h.internalConnections||[],this.externalConnectionIds=h.externalConnections||[],this.linkers=this.externalConnectionIds,this.connections=yield(0,Un.j)(this.externalConnectionIds);for(let s=0;s<this.compositionIds.length;s++)this.listenToEvent(this.compositionIds[s]);this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return Co(this,void 0,void 0,function*(){return this.externalConnectionIds=this.linkers,this.format&&this.format==We.XZ?this.data={compositionIds:this.compositionIds,internalConnections:this.internalConnections,externalConnections:this.externalConnectionIds}:this.data=yield(0,ot.p8)(this.compositionIds,this.internalConnections),this.data})}}function Wi(R,h,s="",p){return new Ts(R,h,s,p)}var wo=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};class Is extends $t.w{constructor(h,s,p,k=We.y0){super(),this.searchQuery=[],this.format=We.y0,this.mainCompositionIds=[],this.searchCharacter="",this.token="",this.searchStructure=h,this.searchQuery=s,this.searchQuery[0].type=h.composition,this.searchCharacter=h.composition,this.format=k,this.token=Je.b.BearerAccessToken}listenToEventType(h){window.addEventListener(`${h}`,s=>{if(!this.isUpdating){this.isUpdating=!0;let p=this;setTimeout(function(){return wo(this,void 0,void 0,function*(){let k=s;p.mainCompositionIds.includes(k?.detail)||(p.mainCompositionIds.unshift(k?.detail),p.conceptIds.push(k?.detail),p.listenToEvent(k?.detail),Gt.d.GetConnectionsOfConcept(k?.detail).then(A=>{for(let x=0;x<A.length;x++)p.linkers.push(A[x].id)})),p.isUpdating=!1,yield p.bind(),p.notify()})},200)}})}bind(){return wo(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;var h=yield(0,a.A)(this.searchCharacter);let s=yield vo(this.searchStructure,this.searchQuery,this.token);this.conceptIds=s.compositionIds,this.internalConnections=s.internalConnections,this.linkers=s.linkers,this.reverse=s.reverse,this.mainCompositionIds=s.mainCompositionIds,this.listenToEventType(h.id);for(let p=0;p<this.mainCompositionIds.length;p++)this.listenToEvent(this.mainCompositionIds[p])}return yield this.build()})}build(){return wo(this,void 0,void 0,function*(){return yield(0,hn.r)(this.conceptIds),this.format==We.y0?this.data=yield(0,Ht.yV)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse):this.data=yield(0,Ht._W)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse),this.data})}}function Mi(R,h,s,p=We.y0){return new Is(R,h,s,p)}var To=y(4698),Vi=y(6915),ji=y(2615);class $i{constructor(h,s,p,k,A,x,G,_=!1,g,l,F){this.structureType="lconcept",this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=i.B.getRandomizer(),this.id=h,this.userId=s,this.typeId=p,this.ghostId=h,this.categoryId=k,this.characterValue=x,this.accessId=A,this.type=null,this.isNew=_,this.typeCharacter=G,this.entryTimeStamp=g,this.updatedTimeStamp=l,this.isSynced=!1,this.referentId=F}getType(){console.log(this.typeId)}}class Hi{constructor(h,s,p,k,A,x){this.isTemp=!1,this.applicationId=i.B.getRandomizer(),this.type=(0,ne.o)(),this.id=h,this.ofTheConceptId=s,this.toTheConceptId=p,this.typeId=k,this.ghostId=h,this.orderId=A,this.typeCharacter="",this.accessId=x,this.typeCharacter="",this.entryTimeStamp=(0,ne.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date}}class qi{constructor(){this.compositionId=0,this.userId=999,this.sessionId=999,this.accessId=4,this.ofTheCompositionId=0,this.patchObject={}}}class zi{constructor(){this.id="0",this.remote_address="",this.server_port="",this.server_address="",this.server_name="",this.server_software="",this.http_user_agent="",this.self="",this.port="",this.userId="",this.email=""}}var Kt=y(628);class Vn{constructor(){this.type="",this.search="",this.logicoperator="=",this.index=0,this.composition=!0,this.name="",this.operateon=""}}class Ji{constructor(){this.type="",this.search="",this.composition="",this.internalComposition="",this.userId=999,this.inpage=10,this.page=1,this.auth=!0}}var Qi=y(7887),Yi=y(3075),ks=y(7869),Xi=y(9635),pe=y(9700);class Io{static initialize(){try{console.warn("Initialized Application Monitoring for tracking errors..."),this.initGlobalErrorHandlers(),this.logCatchError(),this.logErrorEvent(),this.logUnhandledError(),this.logUserInteractions(),this.logNetworkRequests(),this.logRouteChanges()}catch(h){console.error("Error during Application Monitoring initialization:",h)}}static initGlobalErrorHandlers(){try{if(console.log("this is the window",window),typeof window===void 0)return;window.onerror=(h,s,p,k,A)=>{const x=Je.b.sessionId||"unknown",G={message:h,source:s,lineno:p,colno:k,stack:A?.stack||"undefined",requestFrom:i.B.BASE_APPLICATION,sessionId:x};pe.V.logApplication("ERROR","Runtime Error",G),pe.V.log("ERROR","Runtime Error",G)},window.onunhandledrejection=h=>{const s=Je.b.sessionId||"unknown";pe.V.logApplication("ERROR","Unhandled Promise Rejection",{message:h.reason?h.reason.message:h.reason,stack:h.reason?h.reason.stack:null,requestFrom:i.B.BASE_APPLICATION,sessionId:s}),pe.V.log("ERROR","Unhandled Promise Rejection",{message:h.reason?h.reason.message:h.reason,stack:h.reason?h.reason.stack:null,requestFrom:i.B.BASE_APPLICATION,sessionId:s})}}catch(h){console.warn("Failed to initialize global error handlers:",h)}}static logCatchError(){try{const h=console.error;console.log("Inside originalConsoleError..."),console.error=function(...s){if(s?.[0]=="Intercepted Fetch Error:")return;const p="Console Error",k=Je.b.sessionId||"unknown",A={arguments:s.map(x=>Zi(x)),requestFrom:i.B.BASE_APPLICATION,sessionId:k};pe.V.logApplication("ERROR",p,A),pe.V.log("ERROR",p,A),h.apply(console,s)}}catch(h){console.warn("Failed to override console.error:",h)}}static logErrorEvent(){try{window.addEventListener("error",h=>{var s;console.log("Inside error event...");const p=Je.b.sessionId||"unknown",k={error:((s=h.error)===null||s===void 0?void 0:s.message)||h.message,source:h.filename,line:h.lineno,column:h.colno,stack:h.error?Zi(h.error.stack):void 0,requestFrom:i.B.BASE_APPLICATION,sessionId:p},A="Unhandled Error";pe.V.logApplication("ERROR",A,k),pe.V.log("ERROR",A,k)})}catch(h){console.warn("Failed to add error event listener:",h)}}static logUnhandledError(){try{window.addEventListener("unhandledrejection",h=>{var s,p;console.log("Inside unhandledrejection...");const k=Je.b.sessionId||"unknown",A={reason:((s=h.reason)===null||s===void 0?void 0:s.message)||String(h.reason),stack:((p=h.reason)===null||p===void 0?void 0:p.stack)||"No stack trace available",requestFrom:i.B.BASE_APPLICATION,sessionId:k};pe.V.logApplication("ERROR","Unhandled Promise Rejection",A),pe.V.log("ERROR","Unhandled Promise Rejection",A)})}catch(h){console.warn("Failed to add unhandled rejection event listener:",h)}}static logUserInteractions(){document.addEventListener("click",h=>{var s;const p=Je.b.sessionId||"unknown",k=h.target,A={element:k.tagName,id:k.id,classes:k.className,text:(s=k.innerText)===null||s===void 0?void 0:s.slice(0,50),requestFrom:i.B.BASE_APPLICATION,sessionId:p};pe.V.logApplication("INFO","User Click",A)}),document.addEventListener("input",h=>{const s=h.target;Je.b.sessionId,s.tagName,s.id,s.value,i.B.BASE_APPLICATION}),document.addEventListener("scroll",()=>{Je.b.sessionId,i.B.BASE_APPLICATION})}static logNetworkRequests(){try{if(typeof window===void 0)return;Je.b.sessionId;const h=window?.fetch;if(!h)throw new Error("Original fetch is not available.");const s=[i.B.PostLogger(),i.B.PostPrefetchConceptConnections()];window.fetch=(...p)=>{return k=this,A=void 0,G=function*(){const _=Je.b.sessionId||"unknown",[g,l]=p,F=g instanceof Request?g.url:g instanceof URL?g.toString():g;if(s.includes(F))return console.log("Ignored URLs detected : ",F),h(...p);let V={request:{type:"REQUEST",message:"Network Request",method:l?.method||"GET",url:F,body:l?.body,requestFrom:i.B.BASE_APPLICATION,sessionId:_}};try{const H=yield h(...p);return V.response={type:"RESPONSE",message:"Network Response",url:F,status:H.status,requestFrom:i.B.BASE_APPLICATION,sessionId:_},H}catch(H){throw V.response={type:"ERROR",message:"Network Request Failed",url:F,error:H instanceof Error?H.message:String(H),requestFrom:i.B.BASE_APPLICATION,sessionId:_},pe.V.logApplication("ERROR","Failed Network Request",V),new Error(`Network request failed for ${F}: ${H.message}`)}},new((x=void 0)||(x=Promise))(function(_,g){function l(H){try{V(G.next(H))}catch(q){g(q)}}function F(H){try{V(G.throw(H))}catch(q){g(q)}}function V(H){var q;H.done?_(H.value):(q=H.value,q instanceof x?q:new x(function(oe){oe(q)})).then(l,F)}V((G=G.apply(k,A||[])).next())});var k,A,x,G}}catch(h){console.warn("Failed to override network requests:",h)}}static logPerformanceMetrics(){typeof window!==void 0&&window?.addEventListener("load",()=>{const h=performance.timing;Je.b.sessionId,h.loadEventEnd,h.navigationStart,h.domContentLoadedEventEnd,h.navigationStart,i.B.BASE_APPLICATION})}static logRouteChanges(){const h=history.pushState;setTimeout(()=>{Io.logOnWindowLoad()},3e3),history.pushState=function(...s){const p=Je.b.sessionId||"unknown",k={url:s[2]?new URL(s[2],location.origin).href:location.href,requestFrom:i.B.BASE_APPLICATION,sessionId:p};return pe.V.logApplication("ROUTE","Route Change",k),h.apply(this,s)},window?.addEventListener("beforeunload",()=>{const s=Je.b.sessionId||"unknown",p={url:location.href,requestFrom:i.B.BASE_APPLICATION,sessionId:s};pe.V.logApplication("ROUTE","Unload",p)}),window?.addEventListener("popstate",()=>{const s=Je.b.sessionId||"unknown",p={url:location.href,requestFrom:i.B.BASE_APPLICATION,sessionId:s};pe.V.logApplication("ROUTE","Route Changed (Back/Forward)",p)})}static logOnWindowLoad(){const h=Je.b.sessionId||"unknown",s={url:location.href,requestFrom:i.B.BASE_APPLICATION,sessionId:h};pe.V.logApplication("ROUTE","Initial Load",s)}static logSample(){const h=Je.b.sessionId||"unknown",s={url:location.href,requestFrom:i.B.BASE_APPLICATION,sessionId:h};pe.V.logApplication("ROUTE","Sample",s)}static logWebSocketEvents(){if(typeof window===void 0)return;const h=Je.b.sessionId||"unknown",s=WebSocket;window.WebSocket=class extends s{constructor(p,k){super(p,k);const A={url:p.toString(),requestFrom:i.B.BASE_APPLICATION,sessionId:h};pe.V.logApplication("INFO","WebSocket Open",A),this.addEventListener("message",x=>{const G=Je.b.sessionId||"unknown",_={url:p,data:x.data,requestFrom:i.B.BASE_APPLICATION,sessionId:G};pe.V.logApplication("INFO","WebSocket Message",_)}),this.addEventListener("error",x=>{const G=Je.b.sessionId||"unknown",_={url:p,error:x instanceof Error?x.message:String(x),requestFrom:i.B.BASE_APPLICATION,sessionId:G};pe.V.logApplication("ERROR","WebSocket Error",_)}),this.addEventListener("close",()=>{const x=Je.b.sessionId||"unknown",G={url:p,requestFrom:i.B.BASE_APPLICATION,sessionId:x};pe.V.logApplication("INFO","WebSocket Closed",G)})}}}}function Zi(R){try{return JSON.stringify(R,(h,s)=>s&&typeof s=="object"&&s instanceof Error?{message:s.message,stack:s.stack}:s)}catch{return"Error while serializing value"}}const Ki=(R,h,...s)=>{return p=void 0,k=[R,h,...s],x=function*(G,_,g=!1){try{let l=i.B.sendMail();g&&(l=i.B.sendBulkMail());const F=yield fetch(l,{method:"POST",body:G instanceof FormData?G:JSON.stringify(G),headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`}}),V=F.headers.get("content-type");if(!F.ok){const q=yield F.json();return console.info(`${F.status} ${q}`),null}const H=yield F.json();return V&&V.includes("text/plain")?yield F.text():H}catch(l){return console.error(l),null}},new((A=void 0)||(A=Promise))(function(G,_){function g(V){try{F(x.next(V))}catch(H){_(H)}}function l(V){try{F(x.throw(V))}catch(H){_(H)}}function F(V){var H;V.done?G(V.value):(H=V.value,H instanceof A?H:new A(function(q){q(H)})).then(g,l)}F((x=x.apply(p,k||[])).next())});var p,k,A,x};class Ss{constructor(){this.inDevelopment=!1,this.subscribers=[]}notify(h=null){this.subscribers.map(s=>{s(h||this.data)})}dataChange(h){this.subscribers.push(h)}}class As extends Ss{constructor(){super(...arguments),this.element=null,this.elementIdentifier=0,this.widgetMounted=!1}getComponent(){return this.element}getElementById(h){let s=this.getComponent(),p=document.body;if(s){let k=s.querySelector("#"+h);if(k)return p=k,p}return null}createWidgetWrapperIdentifier(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier.toString()}}class jn extends As{constructor(){super(...arguments),this.html="",this.css="",this.js="",this.state={},this.previousState={},this.childWidgets=[],this.childWidgetElement=[],this.widgetState={},this.parentElement=""}querySelector(h){return this.element?this.element.querySelector(h):null}querySelectorAll(h){return this.element?this.element.querySelectorAll(h):null}getElement(){return this.element}setTitle(h){document.title=h}getHtml(){return this.html}UpdateChildData(h,s){let p=s;p.data=h,p.render(),p.update()}update(){}setState(h){this.previousState=Object.assign({},this),this.data=h,this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}setStateProperty(h){this.previousState=Object.assign({},this),Object.assign(this,h),this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}hasStateChanged(){return!this.isPropertyEqual(this.state,this.previousState)}isPropertyEqual(h,s){if(h===s)return!0;if(typeof h!="object"||typeof s!="object"||h===null||s===null)return!1;const p=Object.keys(h),k=Object.keys(s);if(p.length!==k.length)return!1;for(let A of p){if(!k.includes(A))return!1;for(let x of k)if(A==x&&A!="state"&&A!="previousState"&&h[A]!=s[A])return!1}return!0}loadChildWidgets(){this.childWidgets.map(h=>{let s=this.getElementById(h.parentElement);s&&(s.innerHTML=""),h.mount(s)})}render(){this.element&&(this.element.innerHTML=this.getHtml()),this.loadChildWidgets(),this.after_render()}getElementByClassName(h){let s=this.getComponent();return s?s?.querySelectorAll("."+h):[]}mount_child(){}mount(h){return s=this,p=void 0,A=function*(){h&&(this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier(),this.element.innerHTML=this.getHtml(),this.element.classList.add("mftsccs-marking-rendered"),h.appendChild(this.element),this.parentElement=h.id,this.before_render(),this.mount_child(),this.widgetMounted=!0)},new((k=void 0)||(k=Promise))(function(x,G){function _(F){try{l(A.next(F))}catch(V){G(V)}}function g(F){try{l(A.throw(F))}catch(V){G(V)}}function l(F){var V;F.done?x(F.value):(V=F.value,V instanceof k?V:new k(function(H){H(V)})).then(_,g)}l((A=A.apply(s,p||[])).next())});var s,p,k,A}before_render(){this.render()}after_render(){console.log("this is calling the after render",this)}renderChildWidgets(){function h(s){var p;s&&((p=s.childWidgets)===null||p===void 0||p.forEach(k=>{h(k)}),s.render())}console.log("this is the render child widget",this),this.childWidgets.forEach(s=>{h(s)})}setWidgetState(h,s){this.widgetState[h]=s,function p(k){k&&Array.isArray(k.childWidgets)&&k.childWidgets.forEach(A=>{A.widgetState=Object.assign(Object.assign({},A.widgetState),k.widgetState),p(A)})}(this),this.renderChildWidgets()}getWidgetState(h,s){return Object.keys.length&&this.widgetState[h]?this.widgetState[h]:s}}var en=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};class Sn extends jn{constructor(){super(...arguments),this.childComponents=[],this.componentMounted=!1,this.oldHtml=null,this.phonebooks=[],this.childrenData={},this.childWidgets=[],this.typeValueList=[],this.widgetType="the_element_name",this.parentConceptList=[],this.customFunctions=[],this.widgetDependenciesData=""}getUserId(){return en(this,void 0,void 0,function*(){const h=yield new Promise(s=>{let p=(localStorage==null?void 0:localStorage.getItem("profile"))||"";p?s(JSON.parse(p)):s()});return h?.userId})}getTypeValueList(){return en(this,arguments,void 0,function*(h=""){return new Promise(s=>en(this,void 0,void 0,function*(){const p=(h=this.widgetType)==null?void 0:h.match(/^[a-z0-9]+_[a-z0-9]+/i),k=p?p[0]:"",A=h?.match(/^([a-z0-9]+).*_([a-z0-9]+)$/i),x=A?`${A[1]}_${A[2]}`:"";let G=[],_=new Vn;_.type=x,_.search="1",_.logicoperator=">",_.name="emailfilter",_.operateon="entityEmail",_.composition=!1,G.push(_);let g=new Tt;g.typeConnection=h,g.name="entityEmail";let l=new Tt;l.type=k,l.filterLogic="( emailfilter )",l.filters=G,l.name="top",l.inpage=100,l.freeschemaQueries=[g],l.outputFormat=We.y0,yn(l,"").subscribe(F=>{if(F?.length){const V=F?.map(H=>{var q,oe,le,ye,Se,he,Ae;const De=(ye=(le=(oe=(q=H.data)===null||q===void 0?void 0:q[k])===null||oe===void 0?void 0:oe[h])===null||le===void 0?void 0:le.data)===null||ye===void 0?void 0:ye[x];return{id:(Ae=(he=(Se=H.data)===null||Se===void 0?void 0:Se[k])===null||he===void 0?void 0:he[h])===null||Ae===void 0?void 0:Ae.id,name:De,text:De}});return this.typeValueList=V,s(V),V}})}))})}setTitle(h){document.title=h}getHtml(){return this.html}createRandomNumber(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier}mount_child(){return en(this,void 0,void 0,function*(){try{new Function("tsccs",`
        return (async function() {
          ${this.mountChildWidgetsFunction}
        }).call(this);
      `).bind(this)(N)}catch(h){throw console.log("This is the error in the mount child",h),h}})}setProperty(h){return en(this,void 0,void 0,function*(){return this.widgetType=h,this.getTypeValueList(this.widgetType).then(()=>{var s,p,k;(s=this.element)===null||s===void 0||s.setAttribute("data-type-value",this.widgetType),(k=(p=this.element)===null||p===void 0?void 0:p.parentElement)===null||k===void 0||k.setAttribute("data-type-value",this.widgetType),this.render()}),this})}createTypeEditor(h){(function(s,p){if(s){const k=document.querySelector("#widget-properties #widget-type"),A=k?.querySelectorAll("input");A?.forEach(l=>{l?.remove()});const x=s.target.closest(".added-widget-container"),G=s.target.closest("div");x?x?.getAttribute("data-type-value"):G&&G?.getAttribute("data-type-value");const _=document.createElement("input");_.setAttribute("type","text"),_.setAttribute("name","input-widgetTypeValue"),_.setAttribute("of",p.elementIdentifier.toString()),_.setAttribute("class","form-control"),_.setAttribute("id","widgetType"),_.setAttribute("onchange","updateWidgetTypeValue(event)"),p.widgetType?_.value=p.widgetType:_.setAttribute("placeholder","e.g. the_entity");let g=p;_.addEventListener("change",function(l){var F,V,H;const q=(F=l?.target)===null||F===void 0?void 0:F.value;g.widgetType=q,g.before_render(),g.loadChildWidgets(),(H=(V=g.element)===null||V===void 0?void 0:V.parentElement)===null||H===void 0||H.setAttribute("data-type-value",g.widgetType)}),k?.appendChild(_)}})(h,this)}mount(h){return en(this,void 0,void 0,function*(){if(h){this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier();let s=this;this.inDevelopment?(this.element.onclick=function(p){p.preventDefault(),s.createTypeEditor(p)},this.element.className="mftsccs-marking-element"):this.element.classList.add("mftsccs-marking-rendered"),this.element.innerHTML=this.getHtml(),h?.setAttribute("data-type-value",s.widgetType),h.appendChild(this.element),this.parentElement=h.id,this.componentMounted==0||this.widgetMounted==0?(this.render_custom_functions(),this.render_widgetDependencies(),this.before_render(),this.mount_child(),this.widgetMounted=!0,this.componentMounted=!0):this.render(),this.childWidgetElement=this.getElementByClassName("added-widget-container")}})}render_widgetDependencies(){try{new Function("tsccs",`
        return (async function() {
          ${this.widgetDependenciesData}
        }).call(this);
      `).bind(this)(N)}catch(h){throw console.log("This is the error in the before render",h),h}}render_custom_functions(){var h;const s=(h=this.customFunctions)===null||h===void 0?void 0:h.map(p=>p?.code).join("");try{new Function("tsccs",`
          return (async function() {
            ${s}
          }).call(this);
        `).bind(this)(N)}catch(p){throw console.error("This is the error in the render_custom_functions",p),p}}before_render(){try{new Function("tsccs",`
        return (async function() {
          ${this.componentDidMountFunction}
        }).call(this);
      `).bind(this)(N)}catch(h){throw console.log("This is the error in the before render",h),h}}after_render(){try{new Function("tsccs",`
        return (async function() {
          ${this.addEventFunction}
        }).call(this);
      `).bind(this)(N)}catch(h){throw console.log("This is the error in the after render",h),h}}CreateConnectionBetweenEntityLocal(h,s,p){return en(this,void 0,void 0,function*(){var k;const A=h.userId,x=((k=h.type)===null||k===void 0?void 0:k.characterValue)+"_"+p,G=yield(0,Ee.$)(x,999,999,A);return yield(0,Ot.F)(h.id,s.id,G.id,1e3),"connection created"})}}var Ns=y(3077),wt=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};class ko{constructor(){this.actions={concepts:[],connections:[]},this.success=!0,this.transactionId=Math.random().toString().substring(5)}initialize(){return wt(this,void 0,void 0,function*(){yield Kt.H.initializeTransaction(this.transactionId)})}commitTransaction(){return wt(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield Kt.H.SyncDataOnline(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}commitTransactionWithoutAuth(){return wt(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield Kt.H.SyncDataOnlineWithoutAuth(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}rollbackTransaction(){return wt(this,void 0,void 0,function*(){this.success=!1,this.actions={concepts:[],connections:[]},yield Kt.H.rollbackTransaction(this.transactionId,this.actions)})}markAction(){return wt(this,void 0,void 0,function*(){yield Kt.H.markTransactionActions(this.transactionId,this.actions)})}MakeTheInstanceConceptLocal(h,s){return wt(this,arguments,void 0,function*(p,k,A=!1,x,G,_=999,g=0){try{if(!this.success)throw Error("Query Transaction Expired");const l=yield(0,ge.k)(p,k,A,x,G,_,g,this.actions);return yield this.markAction(),l}catch(l){throw console.log(l),this.success=!1,l}})}MakeTheTypeConceptLocal(h,s,p,k){return wt(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const A=yield(0,Ee.$)(h,s,p,k,this.actions);return yield this.markAction(),A}catch(A){throw console.log(A),this.success=!1,A}})}CreateTheConceptLocal(h,s,p,k,A,x){return wt(this,arguments,void 0,function*(G,_,g,l,F,V,H=!1,q=0,oe={concepts:[],connections:[]}){try{if(!this.success)throw Error("Query Transaction Expired");const le=yield(0,Ns.A)(G,_,g,l,F,V,H,q,this.actions);return yield this.markAction(),le}catch(le){throw console.log(le),this.success=!1,le}})}CreateConnectionBetweenTwoConceptsLocal(h,s,p){return wt(this,arguments,void 0,function*(k,A,x,G=!1){try{if(!this.success)throw Error("Query Transaction Expired");const _=yield(0,yo.h)(k,A,x,G,this.actions);return yield this.markAction(),_}catch(_){throw console.log(_),this.success=!1,_}})}CreateTheConnectionLocal(h,s,p){return wt(this,arguments,void 0,function*(k,A,x,G=1,_="",g=999){try{if(!this.success)throw Error("Query Transaction Expired");const l=yield(0,Ot.F)(k,A,x,G,_,g,this.actions);return yield this.markAction(),l}catch(l){throw console.log(l),this.success=!1,l}})}CreateConnection(h,s,p){return wt(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const k=yield(0,Ot.d)(h,s,p,this.actions);return yield this.markAction(),k}catch(k){throw console.log(k),this.success=!1,k}})}CreateConnectionBetweenEntityLocal(h,s,p){return wt(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const k=yield Lo(h,s,p,this.actions);return yield this.markAction(),k}catch(k){throw console.log(k),this.success=!1,k}})}CreateTheCompositionLocal(h){return wt(this,arguments,void 0,function*(s,p=null,k=null,A=null,x=null,G=null,_=null,g=!1){try{if(!this.success)throw Error("Query Transaction Expired");const l=yield(0,$.R)(s,p,k,A,x,G,_,g,this.actions);return yield this.markAction(),l}catch(l){throw console.log(l),this.success=!1,l}})}}const er={number:/^\d+(\.\d+)?$/,text:/^[\s\S]*$/,textOnly:/^[A-Za-z\s]+$/,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,document:/\.(pdf|docx?|pptx?|xlsx?)$/i,sound:/\.(mp3|wav|ogg|flac)$/i,image:/\.(jpg|jpeg|png|gif|bmp|svg|webp)$/i,video:/\.(mp4|avi|mov|mkv|flv|webm)$/i,url:/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^(?:[01]\d|2[0-3]):[0-5]\d$/,password:/^.{6,}$/,ipaddress:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$|^([0-9a-fA-F]{1,4}:){7}([0-9a-fA-F]{1,4})$/,uuid:/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/};var fn=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};class Xe{constructor(){Xe.cacheInitialized||Xe.initializeAnomalyParameters()}static initializeAnomalyParameters(){return fn(this,void 0,void 0,function*(){try{yield Xe.getAnomalyParameters(),Xe.refreshCache(),Xe.cacheInitialized=!0}catch(h){console.error("Error during anomaly parameter initialization:",h)}})}static getAnomalyParameters(){return fn(this,void 0,void 0,function*(){const h=Date.now();if(Xe.anomalyParamsCache&&h-Xe.lastFetchedTime<Xe.cacheExpiryThreshold)return console.log("Returning cached anomaly parameters"),Xe.anomalyParamsCache;try{return yield Xe.fetchAnomalyParameters()}catch(s){throw console.error("Error fetching anomaly parameters:",s),s}})}static fetchAnomalyParameters(){return fn(this,void 0,void 0,function*(){try{const h=yield fetch("https://devai.freeschema.com/v1/get-frontend-anomaly-parameters",{method:"GET",headers:{"Content-Type":"application/json"}});if(!h.ok)throw new Error("Failed to fetch anomaly parameters");const s=yield h.json();return Xe.anomalyParamsCache=s.data,Xe.lastFetchedTime=Date.now(),s.data}catch(h){throw console.error("API Fetch Error:",h),h}})}static refreshCache(){return fn(this,void 0,void 0,function*(){try{Date.now()-Xe.lastFetchedTime>Xe.cacheExpiryThreshold&&(yield Xe.getAnomalyParameters())}catch(h){console.error("Error refreshing anomaly parameters cache:",h)}})}detectDataType(h){for(const[s,p]of Object.entries(er))if(p.test(h))return s;return null}checkConceptAnomaly(h,s){return fn(this,void 0,void 0,function*(){const p=[];try{if(!s)return p.push("Null value"),{valid:!1,warnings:p};const k=Xe.anomalyParamsCache;h.startsWith("the_")||(h=`the_${h}`);const A=k[h];if(console.log("Concept Details : ",A),!A)return console.warn(`No concept details found for type: ${h}`),p.push(`No concept details found for type: ${h}`),{valid:!1,warnings:p};const x=s.length,{min_length:G,max_length:_,data_types:g}=A,l=x>=G&&x<=_,F=this.detectDataType(s),V=g.includes(F);return l||p.push(`Length of '${s}' is outside the allowed range (min: ${G}, max: ${_}). Current length: ${x}.`),V||p.push(`Type mismatch for '${s}'. Expected types: ${g.join(", ")}, detected type: ${F}.`),l&&V&&p.push(`Concept ${h} is valid. Length: ${x}, Type: ${F}`),{valid:l&&V,warnings:p}}catch(k){return console.error(`Error checking anomaly for ${h} with value ${s}:`,k),{valid:!1,warnings:p}}})}static checkAnomalyInBulk(h){return fn(this,void 0,void 0,function*(){Xe.cacheInitialized||(yield Xe.initializeAnomalyParameters());try{const s={};for(const[p,k]of Object.entries(h)){const A=k.value,{valid:x,warnings:G}=yield new Xe().checkConceptAnomaly(p,A);s[p]={valid:x,warnings:G}}return s}catch(s){throw console.error("Bulk Anomaly Check Error:",s),s}})}static getExportedFunction(){console.log("Main : ",N);const h=Object.keys(N);return console.log("The exported List : ",h),h}static getFunctionaAnomalyParameters(){}}Xe.anomalyParamsCache=null,Xe.cacheInitialized=!1,Xe.lastFetchedTime=0,Xe.cacheExpiryThreshold=6e5;var So=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};class tr{checkUniqueness(h,s){return So(this,void 0,void 0,function*(){const p=pe.V.logfunction("checkUniqueness");h.startsWith("the_")||(h="the_"+h);let k=(yield He(h,999)).id,A=yield(0,fe.A)(s,k);return console.log("This is the concept for validator",A),!(A.id>0||(pe.V.logUpdate(p),0))})}validateField(h){return So(this,void 0,void 0,function*(){var s;const p=pe.V.logfunction("validateField");try{performance.now();const k={},{name:A,value:x,type:G,dataType:_,pattern:g,conceptType:l,maxLength:F,minLength:V,minValue:H,maxValue:q,accept:oe,file:le,required:ye,isUnique:Se}=h;if(console.log(`Validation is happening on : 
`,h),!ye||x!==null&&x!==""||(k.required=`The field ${A} is required.`),_&&x){let he=er[_];he&&x!==""&&!he.test(x)&&(k.dataType=`Invalid value for ${_}`)}if(g&&x){const he=typeof g=="string"?new RegExp(g):g;x===""||he.test(x)||(k.pattern="Pattern doesn't match with value")}if(x&&F!=null&&x.length>F&&(k.maxLength=`Length exceeds the maximum length of ${F}`),x&&V!=null&&x.length<V&&(k.minLength=`Length must be at least ${V} characters long`),H!=null&&x&&!isNaN(Number(x))&&Number(x)<H&&(k.minValue=`Value must be greater than or equal to ${H}`),q!=null&&x&&!isNaN(Number(x))&&Number(x)>q&&(k.maxValue=`Value must be less than or equal to ${q}`),le&&G&&oe){const he=oe.split(",").map(De=>De.trim().toLowerCase()),Ae=(s=le.name.split(".").pop())===null||s===void 0?void 0:s.toLowerCase();Ae&&!he.includes(Ae)&&(k.accept=`File must be a valid file type: ${he.join(", ")}`)}return l&&Se&&x&&((yield this.checkUniqueness(l,x))||(k.unique="Value is not unique")),pe.V.logUpdate(p),console.log("Before Validation Result : ",k),k}catch(k){throw(0,o.ey)(p,"Validator.validateField",k),k}})}validateForm(h){return So(this,void 0,void 0,function*(){const s=pe.V.logfunction("validateForm");try{performance.now();const p={};for(const k in h){const A=yield this.validateField(h[k]);Object.keys(A).length>0&&(p[k]=A)}return pe.V.logUpdate(s),p}catch(p){throw(0,o.ey)(s,"Validator.validateForm",p),p}})}validate(h){const s=pe.V.logfunction("validate");try{let p={};return this.validateField(h).then(k=>{Object.keys(k).length>0?(p.status=!1,p.details=k):p.status=!0}),console.error("Error on validate object"),pe.V.logUpdate(s),p}catch(p){(0,o.ey)(s,"Validator.validate",p)}}}const nr=R=>{var h;const s=document.getElementsByName(R)[0];if(!s)return console.warn(`Element with NAME "${R}" not found.`),{name:null,value:null,type:null,dataType:null,pattern:null,conceptType:null,maxLength:null,minLength:null,minValue:null,maxValue:null,accept:null,file:null,required:!1,isUnique:!0};const p=s.hasAttribute("required")||s.getAttribute("data-required")==="true",k=s.hasAttribute("isUnique")&&s.getAttribute("isUnique")==="true";return{name:s.name,value:s.value,type:s.type,dataType:s.getAttribute("data-type"),pattern:s.getAttribute("data-pattern"),conceptType:s.getAttribute("concept-type"),maxLength:s.getAttribute("maxlength")?parseInt(s.getAttribute("maxlength")):null,minLength:s.getAttribute("minlength")?parseInt(s.getAttribute("minlength")):null,minValue:s.getAttribute("min")?parseInt(s.getAttribute("min")):null,maxValue:s.getAttribute("max")?parseInt(s.getAttribute("max")):null,accept:s.getAttribute("accept")||null,file:s.type==="file"&&((h=s.files)===null||h===void 0?void 0:h[0])||null,required:p,isUnique:k}};var gn=y(2289);class Tt{constructor(){this.type="",this.inpage=10,this.page=1,this.concepts=[],this.conceptIds=[],this.selectors=[],this.freeschemaQueries=[],this.filters=[],this.filterLogic="",this.typeConnection="",this.order="DESC",this.outputFormat=We.yv,this.name="",this.filterAncestor="",this.reverse=!1,this.limit=!1,this.isSecure=!1,this.includeInFilter=!1,this.isOldConnectionType=!1}}var Ls=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function $n(R){var h=arguments;return Ls(this,arguments,void 0,function*(s,p=""){const k=pe.V.logfunction("FreeschemaQueryApi",h);var A=(0,e.ab)("application/json",p);const x=i.B.FreeschemaQueryUrl(),G=JSON.stringify(s);try{const _=yield fetch(x,{method:"POST",headers:A,body:G});return _.ok?yield _.json():((0,o.ry)(_),console.log("This is the freeschema query error",_.status),[])}catch(_){console.log("This is the freeschema query error others",_),(0,o.Mb)(_,x),(0,o.ey)(k,"FreeschemaQueryApi",_)}})}var Ao=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};class or extends $t.w{constructor(h,s){super(),this.query=new Tt,this.countInfoStrings=[],this.order="DESC",this.totalCount=0,this.query=h,this.format=h.outputFormat,this.order=h.order}run(){return Ao(this,void 0,void 0,function*(){var h,s;this.query.outputFormat=We.BG,this.compositionIds=[];let p=yield $n(this.query,"");return this.conceptIds=p.conceptIds,this.internalConnections=(h=p.internalConnections)!==null&&h!==void 0?h:[],this.linkers=(s=p.linkers)!==null&&s!==void 0?s:[],this.reverse=p.reverse,this.compositionIds=p.mainCompositionIds,this.totalCount=p.mainCount,this.countInfoStrings=p.countinfo,yield this.build()})}bind(){return Ao(this,void 0,void 0,function*(){var h,s;if(this.compositionIds.length>0)for(let k=0;k<this.compositionIds.length;k++)this.removeListenToEvent(this.compositionIds[k]);if(this.isDataLoaded)for(let k=0;k<this.compositionIds.length;k++)this.listenToEvent(this.compositionIds[k]);else{this.query.outputFormat=We.BG,this.compositionIds=[];let k=yield $n(this.query,"");this.conceptIds=k.conceptIds,this.internalConnections=(h=k.internalConnections)!==null&&h!==void 0?h:[],this.linkers=(s=k.linkers)!==null&&s!==void 0?s:[],this.reverse=k.reverse,this.compositionIds=k.mainCompositionIds,this.totalCount=k.mainCount,this.countInfoStrings=k.countinfo}let p=yield this.build();if(!this.isDataLoaded){this.isDataLoaded=!0;for(let k=0;k<this.compositionIds.length;k++)this.listenToEvent(this.compositionIds[k]);if(this.query.type!=""){let k=yield He(this.query.type,999);k.id>0&&this.listenToEventType(k.id)}}for(let k=0;k<this.newIds.length;k++)this.listenToEvent(this.newIds[k]);return this.newIds=[],p})}build(){return Ao(this,void 0,void 0,function*(){pe.V.logfunction("build",["schemaquery",this.compositionIds]);let h=(0,To.w)(this.countInfoStrings);return this.format==We.y0?this.data=yield(0,Ht.e$)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,h,this.order):this.format==We.ZJ?this.data=yield(0,Ht.y6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,h,this.order):this.format==We.pU?this.data=yield(0,Ht.rq)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,h,this.order):this.format==We.XZ?(console.log("this is the raw format"),this.data={},this.data.linkers=this.linkers,this.data.conceptIds=this.conceptIds,this.data.compositionIds=this.compositionIds,this.data.reverse=this.reverse,this.data.countInfos=h,this.data.order=this.order):this.data=yield(0,Ht.b6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,h),this.data})}}function yn(R,h){return new or(R,h)}function ir(R,h){return new or(R,h).execute()}class No{constructor(){this.id=0,this.name="",this.html="",this.css="",this.js="",this.library={css:[],js:[]},this.assistant={id:"",input:"",type:""},this.timestamp="",this.widgetId=0,this.type="",this.clean="",this.after_render="",this.before_render="",this.custom_functions=[],this.update="",this.origin=0,this.version=0,this.mount_child="",this.children=[],this.wrapper="0",this.widget=new Sn,this.dependency="",this.root=0}}var bs=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function Lo(R,h,s){return bs(this,arguments,void 0,function*(p,k,A,x={concepts:[],connections:[]}){var G,_,g,l,F;const V=pe.V.logfunction("CreateConnectionBetweenEntityLocal",[p.id,k.id,A]);if(Fe)try{const le=yield je("CreateConnectionBetweenEntityLocal",{concept1Data:p,concept2Data:k,linker:A,actions:x});return!((_=(G=le?.actions)===null||G===void 0?void 0:G.concepts)===null||_===void 0)&&_.length&&(x.concepts=JSON.parse(JSON.stringify(le.actions.concepts))),!((l=(g=le?.actions)===null||g===void 0?void 0:g.connections)===null||l===void 0)&&l.length&&(x.connections=JSON.parse(JSON.stringify(le.actions.connections))),le.data}catch(le){console.log("CreateConnectionBetweenEntityLocal error sw: ",le),Qe(le)}const H=p.userId,q=((F=p.type)===null||F===void 0?void 0:F.characterValue)+"_"+A,oe=yield(0,Ee.$)(q,999,999,H,x);console.log(yield(0,Ot.F)(p.id,k.id,oe.id,1e3,void 0,void 0,x)),pe.V.logUpdate(V)})}var Bt=y(4310);function bo(R){for(;R.firstChild;)R.removeChild(R.firstChild)}var rr=y(490),sr=y(276);function ar(R,h,s){const p=Je.b.sessionId||"unknown",k={url:location.href,requestFrom:i.B.BASE_APPLICATION,sessionId:p,description:h};pe.V.logApplication("USER_EVENT",R,k)}class cr extends jn{constructor(h,s,p,k="",A=10){super(),this.inpage=10,this.selector=s,this.mainType=h,this.filterType=k,this.inpage=A,this.parentDomElement=p,this.mount(this.parentDomElement)}before_render(){this.render()}addFilter(h){if(h!=""){let s=new Vn;s.search=h,s.type=this.filterType,s.logicoperator="like",s.operateon="selector",s.name="selector_filter";let p="( selector_filter )";this.query.filters=[s],this.query.filterLogic=p}else this.query.filters=[],this.query.filterLogic="";console.log("this is the filters",this.query)}after_render(){let h=this.getElementById("selector"),s=this.getElementById("search-bar"),p=this;s.onchange=()=>{p.addFilter(s.value),p.mainDetails.update()};let k=new Tt;k.type=this.mainType,k.inpage=this.inpage;let A=new Tt;A.typeConnection=this.selector,A.name="selector",k.freeschemaQueries=[A],this.query=k,yn(this.query,"").subscribe((x,G)=>{let _={};this.mainDetails=G;for(let g=0;g<x.length;g++){let l=x[g],F=l.id,V=l[this.mainType];if(console.log("this is the selected data myItem",V,x[g],this.mainType,l),V){let H=V[this.selector];if(H){const q=Object.values(H)[0];_[F]=q}}}bo(h);for(const[g,l]of Object.entries(_)){const F=document.createElement("option");F.value=g,F.textContent=l,h.appendChild(F)}console.log("this is the output from selector",x)})}getHtml(){const h=document.createElement("style");return h.textContent=`
.search-select-wrapper {
  width: 300px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-family: Arial, sans-serif;
}

#search-bar {
  padding: 8px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
}

#selector {
  padding: 6px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
}
`,document.head.prepend(h),this.html=`
        <div class="search-select-wrapper">
        <input type="text" placeholder="Select or type..." id='search-bar'>
        <select id='selector'>
        </div>`,this.html}}const lr=`
/* CKEditor content styles */
.ck-content {
  /* Container styles */
  max-width: 100%;
  margin: 0 auto;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  line-height: 1.5;
  padding: 0.75rem;
  background: #fff;
  color: #333;
  border: 1px solid #ccced1;
}

/* Headings */
.ck-content h1, .ck-content h2, .ck-content h3, 
.ck-content h4, .ck-content h5, .ck-content h6 {
  font-weight: 700;
  line-height: 1.2;
  margin: 1em 0 0.5em;
}

.ck-content h1 { font-size: 2.5em; }
.ck-content h2 { font-size: 2em; }
.ck-content h3 { font-size: 1.75em; }
.ck-content h4 { font-size: 1.5em; }
.ck-content h5 { font-size: 1.25em; }
.ck-content h6 { font-size: 1em; }

/* Paragraphs and spacing */
.ck-content p {
  margin: 1em 0;
  line-height: 1.6;
}

/* Links */
.ck-content a {
  color: #1a73e8;
  text-decoration: none;
}

.ck-content a:hover {
  text-decoration: underline;
}

/* Lists */
.ck-content ul,
.ck-content ol {
  padding-left: 2em;
  margin: 1em 0;
}

.ck-content ul {
  list-style: disc;
}

.ck-content ol {
  list-style: decimal;
}

.ck-content li {
  margin: 0.5em 0;
}

/* Blockquotes */
.ck-content blockquote {
  margin: 1em 0;
  padding-left: 1em;
  border-left: 5px solid #ccc;
  font-style: italic;
  color: #666;
}

/* Code blocks */
.ck-content pre {
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 1em;
  margin: 1em 0;
  overflow-x: auto;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.ck-content code {
  background: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-size: 0.9em;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

/* Tables */
.ck-content table {
  border-collapse: collapse;
  width: 100%;
  margin: 1em 0;
}

.ck-content table th,
.ck-content table td {
  border: 1px solid #ddd;
  padding: 0.75em;
  text-align: left;
}

.ck-content table th {
  background: #f5f5f5;
  font-weight: bold;
}

/* Images */
.ck-content img {
  max-width: 100%;
  height: auto;
  margin: 1em 0;
}

.ck-content figure {
  margin: 1em 0;
  text-align: center;
}

.ck-content figure img {
  margin: 0;
}

.ck-content figcaption {
  color: #666;
  font-size: 0.9em;
  margin-top: 0.5em;
}

/* Dark mode */
/*
@media (prefers-color-scheme: dark) {
  .ck-content {
    background: #1a1a1a;
    color: #e0e0e0;
  }

  .ck-content a {
    color: #64b5f6;
  }

  .ck-content blockquote {
    border-left-color: #404040;
    color: #b0b0b0;
  }

  .ck-content pre,
  .ck-content code {
    background: #2d2d2d;
    border-color: #404040;
  }

  .ck-content table th,
  .ck-content table td {
    border-color: #404040;
  }

  .ck-content table th {
    background: #2d2d2d;
  }

  .ck-content figcaption {
    color: #b0b0b0;
  }
}
*/

/* CUSTOM DOCUMENTATION CSS */

#documentation-preview {
  border: 1px solid #ccc;
  padding: 1rem;
}

#documentation-preview h3 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
}

.pre-wrapper {
  background: #f2f5f9;
  border: 1px solid #cecece;
  display: block;
  padding: 1rem;
  border-radius: 0.25rem;
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.pre-wrapper pre {
  margin: 0;
  color: #e87aa2;
}

.widget-doc-section pre {
  background-color: transparent;
}

.widget-doc-section p {
  margin: 0;
}

.widget-doc-section code {
  color: #e87aa2;
  font-size: 0.875rem;
}

.mv-3 {
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.pv-3 {
  padding-top: 1rem;
  padding-bottom: 1rem;
}

  .widget-documentation-heading {
    background-color: #6e757d;
    color: #eee;
    font-size: 1.5rem;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .widget-documentation-heading h4 {
    margin-bottom: 0;
  }

  .close-documentation-button {
    border: none;
    outline: none;
    background-color: transparent;
    line-height: 0;
    margin: 0;
    padding: 0;
    cursor: pointer;
  }

  .close-documentation-button:hover,
  .close-documentation-button:focus  {
    background-color: transparent;
  }

  .documentation-creator {
    text-align: right;
    color: #666;
    margin: 0;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .documentation-creator span {
    font-style: italic;
  }

  .documentation-attachments {
    display: flex;
    flex-wrap: wrap;
  }

  .documentation-attachments img {
    width: 25%;
    height: auto;
    border: 1px solid #ccc;
    padding: 0.25rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .documentation-attachments iframe {
    width: 50%;
    border: 1px solid #ccc;
    padding: 0.25rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .widget-documentation-footer {
    text-align: right;
    margin-top: 1rem;
  }

  .widget-documentation-footer button {
    border-radius: 0;
    border: none;
    padding: 0.5rem 1.5rem;
    text-align: center;
    background: #6e757d;
    color: #eee;
  }

  #widget-details {
    position: absolute;
    right: 0px;
    top: 0px;
    z-index: 9999;
  }

  #widget-details button {
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 0 0 0 0.25rem;
    height: auto;
    width: auto;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  #widget-details button:hover, 
  #widget-details button:focus {
    opacity: 0.75;
  }

  #widget-details button span {
    pointer-events: none;
    font-size: 1rem;
  }

  #widget-details button svg {
    pointer-events: none;
    width: 16px;
    height: 16px;
    fill: #999;
  }

  #widget-documentation-preview-modal {
    border: none;
  }

  @media (min-width: 768px) {
    #widget-documentation-preview-modal {
      flex: 0 0 auto;
      width: 66.66666667%;
    }
  }

`,qt={PAGE_COMP_NAME:"page",WIDGET_COMP_NAME:"widget",PROJECT_COMP_NAME:"project"};var dr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};class Ze{static get(h,s){return dr(this,void 0,void 0,function*(){if(Ze.cache.has(h))return Ze.cache.get(h);if(Ze.promises.has(h))return Ze.promises.get(h);const p=s().then(k=>(Ze.cache.set(h,k),Ze.promises.delete(h),k)).catch(k=>{throw Ze.promises.delete(h),k});return Ze.promises.set(h,p),p})}static has(h){return Ze.cache.has(h)}static peek(h){return Ze.cache.get(h)}static invalidate(h){Ze.cache.delete(h),Ze.promises.delete(h)}static clear(){Ze.cache.clear(),Ze.promises.clear()}static set(h,s){return dr(this,void 0,void 0,function*(){return Ze.promises.delete(h),Ze.cache.set(h,s),s})}static stats(){return{cacheSize:Ze.cache.size,pendingRequests:Ze.promises.size,keys:Array.from(Ze.cache.keys())}}}Ze.cache=new Map,Ze.promises=new Map;var Ke=y(2895);const _s=Ke;Ke.stringify,Ke.fromJSON,Ke.plugin,Ke.parse,Ke.list,Ke.document,Ke.comment,Ke.atRule,Ke.rule,Ke.decl,Ke.root,Ke.CssSyntaxError,Ke.Declaration,Ke.Container,Ke.Processor,Ke.Document,Ke.Comment,Ke.Warning,Ke.AtRule,Ke.Result,Ke.Input,Ke.Rule,Ke.Root,Ke.Node;var Es=y(2110),xs=y.n(Es),Os=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function ur(R){return Os(this,void 0,void 0,function*(){try{return(yield _s([xs()()]).process(R,{from:void 0})).css}catch(h){return console.error("Error processing CSS:",h),null}})}var hr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function An(R){const h=document.getElementById("fspage-properties");if(!h)return;let s=h?.textContent;s=s?s.replace(new RegExp(R,"g"),""):"",h.textContent=s}function pr(R,h){let s=document.querySelector(`meta[name="${R}"]`);s||(s=document.createElement("meta"),s.setAttribute("name",R),document.head.appendChild(s)),s.setAttribute("content",h)}var fr=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function Hn(R){return fr(this,void 0,void 0,function*(){var h,s,p,k;!((s=(h=R?.library)===null||h===void 0?void 0:h.css)===null||s===void 0)&&s.length&&function(A){var x;const G=(x=A?.library)===null||x===void 0?void 0:x.css,_=`vde-css-${A?.origin?A?.origin:A?.widgetId}`;(function(g){const l=`link.${g}`,F=document.querySelectorAll(l);F?.length&&F?.forEach(V=>{V.remove()})})(_),G?.length&&G?.sort((g,l)=>Number(g?.order)-Number(l?.order)),G?.forEach(g=>{const l=document.createElement("link");l.classList.add(_),l.setAttribute("rel","stylesheet"),l.setAttribute("href",g.url),document.head.appendChild(l)})}(R),!((k=(p=R?.library)===null||p===void 0?void 0:p.js)===null||k===void 0)&&k.length&&(yield function(A){return fr(this,void 0,void 0,function*(){var x;const G=(x=A?.library)===null||x===void 0?void 0:x.js,_=`vde-js-${A?.origin?A?.origin:A?.widgetId}`;if(function(g){const l=`script.${g}`,F=document.querySelectorAll(l);F?.length&&F?.forEach(V=>{V.remove()})}(_),G?.length){G.sort((g,l)=>Number(g?.order)-Number(l?.order));for(const g of G)g?.url?document.querySelector(`script[src="${g.url}"]`)?console.log("Library already loaded:",g.url):yield new Promise((l,F)=>{const V=document.createElement("script");V.classList.add(_),V.setAttribute("type","text/javascript"),V.setAttribute("src",g.url),V.setAttribute("crossorigin","anonymous"),V.onload=()=>{l()},V.onerror=H=>{console.error("Failed to load script:",g.url,H),F(new Error(`Failed to load script: ${g.url}`))},document.head.appendChild(V)}):console.warn("Skipping library with invalid URL:",g);console.log("All JavaScript libraries loaded successfully")}})}(R))})}var it=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function gr(R,h,s,p){return it(this,void 0,void 0,function*(){var k;const A=yield lo(R,"the_page_body"),x=new Tt;x.conceptIds=[R],x.inpage=100,x.outputFormat=We.y0,x.selectors=["the_page_body","the_page_title","the_page_slug","the_page_font_family","the_page_font_size","the_page_width","the_page_type","the_page_meta_title","the_page_meta_description","the_page_meta_keywords"],yn(x,"").subscribe(_=>it(this,void 0,void 0,function*(){var g,l;yield function(F){return hr(this,void 0,void 0,function*(){var V,H,q,oe,le,ye,Se,he,Ae,De,Pe,Me,Oe,Ye;[{key:"meta_title",value:(H=(V=F?.[`the_${qt.PAGE_COMP_NAME}_meta_title`])===null||V===void 0?void 0:V.data)===null||H===void 0?void 0:H.the_meta_title},{key:"meta_description",value:(oe=(q=F?.[`the_${qt.PAGE_COMP_NAME}_meta_description`])===null||q===void 0?void 0:q.data)===null||oe===void 0?void 0:oe.the_meta_description},{key:"meta_keywords",value:(ye=(le=F?.[`the_${qt.PAGE_COMP_NAME}_meta_keywords`])===null||le===void 0?void 0:le.data)===null||ye===void 0?void 0:ye.the_meta_keywords},{key:"width",value:(he=(Se=F?.[`the_${qt.PAGE_COMP_NAME}_width`])===null||Se===void 0?void 0:Se.data)===null||he===void 0?void 0:he.the_width},{key:"font_size",value:(De=(Ae=F?.[`the_${qt.PAGE_COMP_NAME}_font_size`])===null||Ae===void 0?void 0:Ae.data)===null||De===void 0?void 0:De.the_font_size},{key:"font_family",value:(Me=(Pe=F?.[`the_${qt.PAGE_COMP_NAME}_font_family`])===null||Pe===void 0?void 0:Pe.data)===null||Me===void 0?void 0:Me.the_font_family},{key:"type",value:(Ye=(Oe=F?.[`the_${qt.PAGE_COMP_NAME}_type`])===null||Oe===void 0?void 0:Oe.data)===null||Ye===void 0?void 0:Ye.the_type}].forEach(at=>{at.value&&function(pt,nt){hr(this,void 0,void 0,function*(){const It=document.getElementById("fspage-properties")||function(){const ft=document.createElement("style");return ft.id="fspage-properties",document.head.appendChild(ft),ft}();let st="";switch(pt){case"width":An(".fspage { width: [^;]+ !important; }"),st=nt?`.fspage { width: ${nt} !important; }`:"";break;case"font_size":An(".fspage { font-size: [^;]+; }"),st=nt?`.fspage { font-size: ${nt}px; }`:"";break;case"font_family":An(".fspage { font-family: [^;]+; }"),st=nt?`.fspage { font-family: ${nt}; }`:"";break;case"type":An(".fspage { width: 1200px; margin: 0 auto; }"),An(".fspage { width: 100%; padding: 0; }"),st=nt==="fixed"?".fspage { width: 1200px; margin: 0 auto; }":nt==="fluid"?".fspage { width: 100%; padding: 0; }":"";break;case"meta_title":document.title=nt;break;case"meta_keywords":pr(pt.replace("meta_",""),nt);break;case"meta_description":return void pr(pt.replace("meta_",""),nt)}It.textContent+=st})}(at.key,at.value)})})}((l=(g=_?.[0])===null||g===void 0?void 0:g.data)===null||l===void 0?void 0:l[`the_${qt.PAGE_COMP_NAME}`])})),document.getElementById("app").classList.add("fspage");const G=document.head.querySelectorAll("style#mystyleid");Array.from(G).forEach(_=>_.remove()),!((k=A?.[0])===null||k===void 0)&&k.id?yield qn(A[0].id,h,s,p):h.innerHTML="<h4>Invalid or Page doesn't exist</h4>"})}function yr(R,h,s,p){return it(this,void 0,void 0,function*(){try{let k=yield(0,Bt.qj)(R),A=k.mainId,x=k.data;const G=yield zn(x,A),_=yield tn(A,[],G);return Ze.cache.set(`wdgt_${A}`,_),console.log("DataCache after, widgetTree -->",Ze.cache,_),_}catch(k){console.error(`Error Caught Rendering Widget: ${k}`)}})}function vr(R,h,s,p){return it(this,void 0,void 0,function*(){try{let k=yield(0,Bt.ml)(R),A=k.mainId,x=k.data;const G=yield zn(x,A);return yield tn(A,[],G)}catch(k){console.error(`Error Caught Rendering Widget: ${k}`)}})}function mr(R,h,s,p){return it(this,void 0,void 0,function*(){let k=(yield(0,Bt.qj)(R)).mainId;console.log("renderImportedWidget latestWidgetId, DataCache.cache -->",k,Ze.cache);const A=Ze.cache.get(`wdgt_${k}`);if(console.log("renderImportedWidget widgetTree -->",A),!A.name)return void(h.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const x=h;yield Hn(A);const G=yield Nn(A,x,void 0,s),_=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");h.classList.add(`${_}`),h.style.position="relative";const g=document.createElement("style");g.id="mystyleid";const l=`
        .${_} {
          ${A.css+G.css+lr} 
        }
      `,F=(yield ur(l))||"";if(g.innerHTML=F,document.head.appendChild(g),A.children.length&&A?.children.forEach(V=>{var H;const q=V?.library;(!((H=q?.css)===null||H===void 0)&&H.length||q?.js.length)&&Hn(V)}),p){const V=document.createElement("div");V.id="widget-details",V.innerHTML="",V.innerHTML=`
        <button class="widget-documentation-btn" widget-id="${A?.origin||A?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">
          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>
        </button>
      `,x.appendChild(V);const H=document.createElement("dialog");H.id="widget-documentation-preview-modal",H.className="col-md-8",H.innerHTML="",H.innerHTML=`
        <div class="widget-documentation-heading">
          <h4>Documentation</h4>
          <button class="close-documentation-button document-preview-close-button" title="Close">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
          </button>
        </div>

        <div id="documentation-view" class="ck-content"></div>

        <div class="widget-documentation-footer">
          <button class="document-preview-close-button">Close</button>
        </div>
      `,x.appendChild(H);const q=x.querySelectorAll(".widget-documentation-btn");q?.forEach(le=>{le.addEventListener("click",ye=>{const Se=ye?.target;Ar(Se?.getAttribute("widget-id"))})});const oe=x.querySelectorAll(".document-preview-close-button");oe?.forEach(le=>{le.addEventListener("click",()=>{Nr("widget-documentation-preview-modal")})})}return x.querySelectorAll(".wb-initial-empty").forEach(V=>{V.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(V=>{V.removeAttribute("onclick")}),G})}function qn(R,h,s,p){return it(this,void 0,void 0,function*(){try{let k=yield(0,Bt.qj)(R),A=k.mainId,x=k.data;const G=yield zn(x,A);return yield wr(A,G,h,s,p)}catch(k){console.error(`Error Caught Rendering Widget: ${k}`),h.textContent=`Error: ${k.message}`}})}function Cr(R,h,s,p){return it(this,void 0,void 0,function*(){try{const k=yield(0,Bt.Cp)(R);return yield wr(R,k,h,s,p)}catch(k){console.error(`Error Caught Rendering Widget: ${k}`)}})}function wr(R,h,s,p){return it(this,arguments,void 0,function*(k,A,x,G,_=!0){const g=yield tn(k,[],A);if(!g.name)return void(x.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const l=x;yield Hn(g);const F=yield Nn(g,l,void 0,G),V=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");x.classList.add(`${V}`),x.style.position="relative";const H=document.createElement("style");H.id="mystyleid";const q=`
        .${V} {
          ${g.css+F.css+lr} 
        }
      `,oe=(yield ur(q))||"";H.innerHTML=oe,g.children.length&&g?.children.forEach(ye=>{var Se;const he=ye?.library;(!((Se=he?.css)===null||Se===void 0)&&Se.length||he?.js.length)&&Hn(ye)}),document.head.appendChild(H);const le=document.createElement("script");if(le.innerHTML=g.js,l.appendChild(le),_){const ye=document.createElement("div");ye.id="widget-details",ye.innerHTML="",ye.innerHTML=`
        <button class="widget-documentation-btn" widget-id="${g?.origin||g?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">
          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>
        </button>
      `,l.appendChild(ye);const Se=document.createElement("dialog");Se.id="widget-documentation-preview-modal",Se.className="col-md-8",Se.innerHTML="",Se.innerHTML=`
        <div class="widget-documentation-heading">
          <h4>Documentation</h4>
          <button class="close-documentation-button document-preview-close-button" title="Close">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
          </button>
        </div>

        <!-- <div id="documentation-preview" class="ck-content"></div> -->
        <div id="documentation-view" class="ck-content"></div>

        <div class="widget-documentation-footer">
          <button class="document-preview-close-button">Close</button>
        </div>
      `,l.appendChild(Se);const he=l.querySelectorAll(".widget-documentation-btn");he?.forEach(De=>{De.addEventListener("click",Pe=>{const Me=Pe?.target;Ar(Me?.getAttribute("widget-id"))})});const Ae=l.querySelectorAll(".document-preview-close-button");Ae?.forEach(De=>{De.addEventListener("click",()=>{Nr("widget-documentation-preview-modal")})})}return l.querySelectorAll(".wb-initial-empty").forEach(ye=>{ye.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(ye=>{ye.removeAttribute("onclick")}),F})}function Tr(R,h){return it(this,void 0,void 0,function*(){var s,p,k,A,x,G,_,g,l,F,V,H;const q=(p=(s=R?.data)===null||s===void 0?void 0:s.the_widget)===null||p===void 0?void 0:p.the_widget_s_child;if(h.push(R),q&&q.length)for(let oe=0;oe<q.length;oe++){const le=q[oe];let ye=(g=(_=(G=(x=(A=(k=le?.data.the_child_widget)===null||k===void 0?void 0:k.the_child_widget_info)===null||A===void 0?void 0:A.data)===null||x===void 0?void 0:x.the_widget)===null||G===void 0?void 0:G.the_widget_origin)===null||_===void 0?void 0:_.data)===null||g===void 0?void 0:g.the_origin;const Se=!!(!((V=(F=(l=le?.data)===null||l===void 0?void 0:l.the_child_widget)===null||F===void 0?void 0:F.the_child_widget_use_latest)===null||V===void 0)&&V.data);ye=Number(ye)||!1;let he=null;if(Se&&ye){const Ae=yield(0,Bt.qj)(ye);he=((H=Ae?.data)===null||H===void 0?void 0:H[0])||[],he.useLatest=!0,le.data.the_child_widget.the_child_widget_info=he}le.data.the_child_widget.the_child_widget_info.sChildId=le.id,yield Tr(le.data.the_child_widget.the_child_widget_info,h)}})}function zn(R,h){return it(this,void 0,void 0,function*(){const s=[],p=[...R];try{const k=p.find(A=>A.id===h);yield Tr(k,s)}catch(k){console.error("convert to real bulk error",k)}return s})}function Ir(R){return it(this,arguments,void 0,function*(h,s=[],p=""){let k=yield(0,Bt.Cp)(h);const A=yield zn(k,h);return yield tn(h,[],A)})}function tn(R){return it(this,arguments,void 0,function*(h,s=[],p,k=""){var A,x,G,_,g,l,F,V,H,q,oe,le,ye,Se,he,Ae,De,Pe,Me,Oe,Ye,at,pt,nt,It,st,ft,ut,Nt,Lt,bt,_t,Pt,Ut,Wt,ct,kt,Ct,gt,St,on,rn,sn,an,cn,ln,dn,un,Ve,zt,bn,_n,En,xn,On,Bn,Rn,Dn,Gn,Jt,Fn;try{const qe=new No,Et=(0,Bt.ix)(p,h);s.push(h);const Ue=(A=Et?.data)===null||A===void 0?void 0:A.the_widget;qe.name=(G=(x=Ue?.the_widget_name)===null||x===void 0?void 0:x.data)===null||G===void 0?void 0:G.the_name,qe.html=(g=(_=Ue?.the_widget_html)===null||_===void 0?void 0:_.data)===null||g===void 0?void 0:g.the_html,qe.css=(F=(l=Ue?.the_widget_css)===null||l===void 0?void 0:l.data)===null||F===void 0?void 0:F.the_css,qe.js=(H=(V=Ue?.the_widget_js)===null||V===void 0?void 0:V.data)===null||H===void 0?void 0:H.the_js,qe.root=Number((oe=(q=Ue?.the_widget_root)===null||q===void 0?void 0:q.id)!==null&&oe!==void 0?oe:0);let Go=qe.root!=0;qe.origin=Go?qe.root:Number(((ye=(le=Ue?.the_widget_origin)===null||le===void 0?void 0:le.data)===null||ye===void 0?void 0:ye.the_origin)||((he=(Se=Ue?.the_widget_origin)===null||Se===void 0?void 0:Se.data)===null||he===void 0?void 0:he.the_originid)),qe.version=(De=(Ae=Ue?.the_widget_version)===null||Ae===void 0?void 0:Ae.data)===null||De===void 0?void 0:De.the_version,qe.clean=(Me=(Pe=Ue?.the_widget_clean)===null||Pe===void 0?void 0:Pe.data)===null||Me===void 0?void 0:Me.the_clean,qe.timestamp=(Ye=(Oe=Ue?.the_widget_timestamp)===null||Oe===void 0?void 0:Oe.data)===null||Ye===void 0?void 0:Ye.the_timestamp,qe.id=Et?.id;const Qt=(pt=(at=Ue?.the_widget_type)===null||at===void 0?void 0:at.data)===null||pt===void 0?void 0:pt.the_type;qe.type=Qt=="null"||Qt==null?"the_element_name":Qt,qe.after_render=(It=(nt=Ue?.the_widget_after_render)===null||nt===void 0?void 0:nt.data)===null||It===void 0?void 0:It.the_after_render,qe.before_render=(ft=(st=Ue?.the_widget_before_render)===null||st===void 0?void 0:st.data)===null||ft===void 0?void 0:ft.the_before_render,qe.dependency=(Nt=(ut=Ue?.the_widget_dependency)===null||ut===void 0?void 0:ut.data)===null||Nt===void 0?void 0:Nt.the_dependency,qe.update=(bt=(Lt=Ue?.the_widget_update)===null||Lt===void 0?void 0:Lt.data)===null||bt===void 0?void 0:bt.the_update,qe.widgetId=h,qe.mount_child=(Pt=(_t=Ue?.the_widget_mount_child)===null||_t===void 0?void 0:_t.data)===null||Pt===void 0?void 0:Pt.the_mount_child;const At=Ue?.the_widget_s_child;Et?.useLatest&&(qe.useLatest=!0),Et?.sChildId&&(qe.sChildId=Et.sChildId);const mn=(Ut=Ue?.the_widget_s_css_library)===null||Ut===void 0?void 0:Ut.map(et=>{var tt,ze,lt,ht,yt,vt,mt,dt;return{order:(ht=(lt=(ze=(tt=et?.data)===null||tt===void 0?void 0:tt.the_css_library)===null||ze===void 0?void 0:ze.the_css_library_order)===null||lt===void 0?void 0:lt.data)===null||ht===void 0?void 0:ht.the_order,url:(dt=(mt=(vt=(yt=et?.data)===null||yt===void 0?void 0:yt.the_css_library)===null||vt===void 0?void 0:vt.the_css_library_url)===null||mt===void 0?void 0:mt.data)===null||dt===void 0?void 0:dt.the_url}}),xt=(Wt=Ue?.the_widget_s_js_library)===null||Wt===void 0?void 0:Wt.map(et=>{var tt,ze,lt,ht,yt,vt,mt,dt;return{order:(ht=(lt=(ze=(tt=et?.data)===null||tt===void 0?void 0:tt.the_js_library)===null||ze===void 0?void 0:ze.the_js_library_order)===null||lt===void 0?void 0:lt.data)===null||ht===void 0?void 0:ht.the_order,url:(dt=(mt=(vt=(yt=et?.data)===null||yt===void 0?void 0:yt.the_js_library)===null||vt===void 0?void 0:vt.the_js_library_url)===null||mt===void 0?void 0:mt.data)===null||dt===void 0?void 0:dt.the_url}});qe.library={css:mn||[],js:xt||[]};const Mt=(kt=(ct=Ue?.the_widget_assistant)===null||ct===void 0?void 0:ct.data)===null||kt===void 0?void 0:kt.the_assistant;qe.assistant={id:(gt=(Ct=Mt?.the_assistant_id)===null||Ct===void 0?void 0:Ct.data)===null||gt===void 0?void 0:gt.the_id,input:(on=(St=Mt?.the_assistant_input)===null||St===void 0?void 0:St.data)===null||on===void 0?void 0:on.the_input,type:(sn=(rn=Mt?.the_assistant_type)===null||rn===void 0?void 0:rn.data)===null||sn===void 0?void 0:sn.the_type};const Yn=(an=Ue?.the_widget_s_custom_function)===null||an===void 0?void 0:an.map(et=>{var tt,ze,lt,ht,yt,vt,mt;const dt=(tt=et?.data)===null||tt===void 0?void 0:tt.the_custom_function;return{id:et?.id,name:(lt=(ze=dt?.the_custom_function_name)===null||ze===void 0?void 0:ze.data)===null||lt===void 0?void 0:lt.the_name,slug:(yt=(ht=dt?.the_custom_function_slug)===null||ht===void 0?void 0:ht.data)===null||yt===void 0?void 0:yt.the_slug,code:(mt=(vt=dt?.the_custom_function_code)===null||vt===void 0?void 0:vt.data)===null||mt===void 0?void 0:mt.the_code}});if(qe.custom_functions=Yn,At?.length)for(let et=0;et<At.length;et++){const tt=((dn=(ln=(cn=At[et])===null||cn===void 0?void 0:cn.data.the_child_widget)===null||ln===void 0?void 0:ln.the_child_widget_info)===null||dn===void 0?void 0:dn.id)||((bn=(zt=(Ve=(un=At[et])===null||un===void 0?void 0:un.data.the_child_widget)===null||Ve===void 0?void 0:Ve.the_child_widget_parent)===null||zt===void 0?void 0:zt.data)===null||bn===void 0?void 0:bn.the_parent),ze=yield tn(tt,s,p,k),lt=(Bn=(On=(xn=(En=(_n=At[et])===null||_n===void 0?void 0:_n.data)===null||En===void 0?void 0:En.the_child_widget)===null||xn===void 0?void 0:xn.the_child_widget_type)===null||On===void 0?void 0:On.data)===null||Bn===void 0?void 0:Bn.the_type,ht=(Fn=(Jt=(Gn=(Dn=(Rn=At[et])===null||Rn===void 0?void 0:Rn.data)===null||Dn===void 0?void 0:Dn.the_child_widget)===null||Gn===void 0?void 0:Gn.the_child_widget_wrapper)===null||Jt===void 0?void 0:Jt.data)===null||Fn===void 0?void 0:Fn.the_wrapper;ze.type=lt=="null"||lt==null?"the_element_name":lt,ze.wrapper=ht,qe.children.push(ze)}return qe}catch(qe){throw qe instanceof Error&&console.error("error converting bulkwidget to widget tree",qe.message),qe}})}function Nn(R,h){return it(this,arguments,void 0,function*(s,p,k=!0,A,x,G=null){var _,g;const l=new Sn;l.html=s.html,G&&(l.parentWidget=kr(G)),l.widgetType=s.type,l.componentDidMountFunction=s.before_render,l.addEventFunction=s.after_render,l.mountChildWidgetsFunction=s.mount_child,l.widgetState=Object.assign({},x),l.customFunctions=s.custom_functions,l.widgetDependenciesData=s.dependency,A&&(l.data=A),p.innerHTML="";const F=p;if(F&&(yield l.mount(F),s.widget=l,s.children.length>0&&((_=l.childWidgetElement)===null||_===void 0?void 0:_.length)>0))for(let V=0;V<((g=s.children)===null||g===void 0?void 0:g.length);V++){const H=s.children[V];for(let q=0;q<l.childWidgetElement.length;q++){const oe=l.childWidgetElement[q];if(H.wrapper===oe.id){const le=Sr(H);H.html=`<div id="${H.wrapper}">${H.html}</div>`;const ye=yield Nn(le,oe,!1,l.data,l.widgetState,l);l.childWidgets.push(ye),l.css=l.css+ye.css+`#${oe.id} { ${H.css} }`,ye.dataChange(Se=>{var he;const Ae=(he=Se?.type)===null||he===void 0?void 0:he.characterValue;Ae&&(l.childrenData[Ae]=Se)})}}}return console.log("newWidget ->",l,s),yield Eo(p,".widget_container"),l})}function kr(R){const h={};for(const[s,p]of Object.entries(R))typeof p=="object"&&p!==null&&Array.isArray(p)||(h[s]=p);return h}function _o(R,h){return it(this,arguments,void 0,function*(s,p,k=!0,A,x,G=null){var _,g;let l=new Sn;l.html=s.html,G&&(l.parentWidget=kr(G)),l.widgetState=Object.assign({},A),l.widgetType=s.type,l.componentDidMountFunction=s.before_render,l.addEventFunction=s.after_render,l.mountChildWidgetsFunction=s.mount_child,l.customFunctions=s.custom_functions,l.widgetDependenciesData=s.dependency,l.inDevelopment=x!==!1,p.innerHTML="";let F=p;if(F&&(yield l.mount(F),s.widget=l,s.children.length>0&&((_=l.childWidgetElement)===null||_===void 0?void 0:_.length)>0))for(let V=0;V<((g=s.children)===null||g===void 0?void 0:g.length);V++){let H=s.children[V];for(let q=0;q<l.childWidgetElement.length;q++){let oe=l.childWidgetElement[q];if(H.wrapper===oe.id){const le=Sr(H),ye=yield _o(le,oe,!1,l.widgetState,x,l);l.childWidgets.push(ye),l.css=l.css+ye.css+`#${oe.id} { ${H.css} }`,ye.dataChange(Se=>{var he;console.log("This is the data change in child",Se);let Ae=(he=Se?.type)===null||he===void 0?void 0:he.characterValue;Ae&&(l.childrenData[Ae]=Se),console.log("new child data",l.childrenData)})}}}return console.log("newWidget ->",l,s),l})}function Sr(R){return R.html=R.html.replace(/<[^>]*\bclass=["'][^"']*\bwidget_container\b[^"']*["'][^>]*>/g,h=>h.replace(/\bwidget_container\b/g,"").trim()),R.html=R.html.replace(/<[^>]*\bdraggable=["'][^"']*\btrue\b[^"']*["'][^>]*>/g,h=>h.replace(/\btrue\b/g,"false").trim()),R.html=R.html.replace(/<[^>]*\bclass=["'][^"']*\bhover-element\b[^"']*["'][^>]*>/g,h=>h.replace(/\bhover-element\b/g,"").trim()),R.html=R.html.replace(/<[^>]*\bclass=["'][^"']*\bwb-block\b[^"']*["'][^>]*>/g,h=>h.replace(/\bwb-block\b/g,"").trim()),R.html=R.html.replace(/<[^>]*onclick="widgetSelected\(event\)"\s*,?\s*ondragover="_dragService\.dragOverWidgetElement\(event\)"\s*,?\s*ondrop="_dragService\.dropWidgetElement\(event\)"\s*,?\s*ondragstart="_dragService\.dragStartWidgetElement\(event\)"\s*,?\s*ondragend="_dragService\.dragEndWidgetElement\(event\)"[^>]*>/g,h=>h.replace(/onclick="widgetSelected\(event\)"/g,'onclick=""').replace(/ondragover="_dragService\.dragOverWidgetElement\(event\)"/g,'ondragover=""').replace(/ondrop="_dragService\.dropWidgetElement\(event\)"/g,'ondrop=""').replace(/ondragstart="_dragService\.dragStartWidgetElement\(event\)"/g,'ondragstart=""').replace(/ondragend="_dragService\.dragEndWidgetElement\(event\)"/g,'ondragend=""').trim()),R.html=R.html.replace(/<[^>]*\bondragstart=["'][^"']*\b_dragService\.onWidgetDragStart\(event\)\b[^"']*["'][^>]*>/g,h=>h.replace(/\b_dragService\.onWidgetDragStart\(event\)\b/g,"").trim()),R}function Bs(R,h){return it(this,void 0,void 0,function*(){return R&&R.nodeType===1&&R.querySelectorAll(h).forEach(s=>{for(;s.firstChild;)s.parentNode.insertBefore(s.firstChild,s);s.remove()}),R})}function Eo(R,h){return it(this,void 0,void 0,function*(){const s=R.querySelectorAll(h);for(const p of s){const k=p.parentElement;if(k){for(;p.firstChild;){const A=yield Bs(p.firstChild,h);k.insertBefore(A,p)}k.removeChild(p)}}})}function Ar(R){return it(this,void 0,void 0,function*(){const h=new Tt;h.typeConnection="the_widget_documentation",h.name="documentationText",h.selectors=["the_documentation_text"];const s=new Tt;s.typeConnection="the_widget_s_documentation",s.name="documentationBlank",s.selectors=["the_documentation_text","the_documentation_content","the_documentation_language","the_documentation_doc_title","the_documentation_folder","the_documentation_creator_email","the_documentation_created_by","the_documentation_content","the_documentation_type","the_documentation_s_doc_url","the_documentation_s_image_url","the_documentation_s_video_link","the_documentation_auth_type","the_documentation_bearer_token","the_documentation_method","the_documentation_method_url","the_documentation_username","the_documentation_password","the_documentation_s_json_list","the_documentation_api_script","the_documentation_api_body","the_documentation_code_editor","the_documentation_return"];const p=new Tt;p.typeConnection="the_documentation_s_json_list",p.name="documentationJSON",p.selectors=["the_json_list_key","the_json_list_value"],s.freeschemaQueries=[p];const k=new Tt;k.conceptIds=[R],k.freeschemaQueries=[h,s],k.inpage=100,k.outputFormat=We.y0,yield yn(k,"").subscribe(A=>it(this,void 0,void 0,function*(){var x,G,_,g,l,F,V,H,q,oe,le;let ye;const Se=((H=(V=(F=(l=(g=(_=(G=(x=A?.[0])===null||x===void 0?void 0:x.data)===null||G===void 0?void 0:G.the_widget)===null||_===void 0?void 0:_.the_widget_documentation)===null||g===void 0?void 0:g.data)===null||l===void 0?void 0:l.the_documentation)===null||F===void 0?void 0:F.the_documentation_text)===null||V===void 0?void 0:V.data)===null||H===void 0?void 0:H.the_text)||"";Se&&(ye=Se);const he=(le=(oe=(q=A?.[0])===null||q===void 0?void 0:q.data)===null||oe===void 0?void 0:oe.the_widget)===null||le===void 0?void 0:le.the_widget_s_documentation;he?.length&&(ye=he?.map(De=>{var Pe,Me,Oe,Ye,at,pt,nt,It,st,ft,ut,Nt,Lt,bt,_t,Pt,Ut,Wt,ct,kt,Ct,gt,St,on,rn,sn,an,cn,ln,dn,un;const Ve=(Pe=De?.data)===null||Pe===void 0?void 0:Pe.the_documentation,zt=(Oe=(Me=Ve?.the_documentation_type)===null||Me===void 0?void 0:Me.data)===null||Oe===void 0?void 0:Oe.the_type,bn=(at=(Ye=Ve?.the_documentation_content)===null||Ye===void 0?void 0:Ye.data)===null||at===void 0?void 0:at.the_content,_n=(nt=(pt=Ve?.the_documentation_creator_email)===null||pt===void 0?void 0:pt.data)===null||nt===void 0?void 0:nt.the_creator_email,En=(st=(It=Ve?.the_documentation_doc_title)===null||It===void 0?void 0:It.data)===null||st===void 0?void 0:st.the_doc_title,xn=(ut=(ft=Ve?.the_documentation_method)===null||ft===void 0?void 0:ft.data)===null||ut===void 0?void 0:ut.the_method,On=(Lt=(Nt=Ve?.the_documentation_method_url)===null||Nt===void 0?void 0:Nt.data)===null||Lt===void 0?void 0:Lt.the_method_url,Bn=(_t=(bt=Ve?.the_documentation_bearer_token)===null||bt===void 0?void 0:bt.data)===null||_t===void 0?void 0:_t.the_bearer_token,Rn=(Ut=(Pt=Ve?.the_documentation_username)===null||Pt===void 0?void 0:Pt.data)===null||Ut===void 0?void 0:Ut.the_username,Dn=(ct=(Wt=Ve?.the_documentation_password)===null||Wt===void 0?void 0:Wt.data)===null||ct===void 0?void 0:ct.the_password,Gn=(Ct=(kt=Ve?.the_documentation_auth_type)===null||kt===void 0?void 0:kt.data)===null||Ct===void 0?void 0:Ct.the_auth_type,Jt=Ve?.the_documentation_s_json_list,Fn=(St=(gt=Ve?.the_documentation_api_script)===null||gt===void 0?void 0:gt.data)===null||St===void 0?void 0:St.the_api_script,qe=(rn=(on=Ve?.the_documentation_api_body)===null||on===void 0?void 0:on.data)===null||rn===void 0?void 0:rn.the_api_body,Et=(an=(sn=Ve?.the_documentation_language)===null||sn===void 0?void 0:sn.data)===null||an===void 0?void 0:an.the_language,Ue=(ln=(cn=Ve?.the_documentation_return)===null||cn===void 0?void 0:cn.data)===null||ln===void 0?void 0:ln.the_return,Go=(un=(dn=Ve?.the_documentation_code_editor)===null||dn===void 0?void 0:dn.data)===null||un===void 0?void 0:un.the_code_editor,Qt=Ve?.the_documentation_s_doc_url,At=Ve?.the_documentation_s_image_url,mn=Ve?.the_documentation_s_video_link;let xt={type:zt,content:bn,creatorEmail:_n,title:En};if(zt==="blank")xt=Object.assign({},xt);else if(zt==="api"){const tt=[];Jt?.length&&Jt?.forEach(ze=>{var lt,ht,yt,vt,mt,dt,Fo,Po;tt.push({key:(vt=(yt=(ht=(lt=ze?.data)===null||lt===void 0?void 0:lt.the_json_list)===null||ht===void 0?void 0:ht.the_json_list_key)===null||yt===void 0?void 0:yt.data)===null||vt===void 0?void 0:vt.the_key,value:(Po=(Fo=(dt=(mt=ze?.data)===null||mt===void 0?void 0:mt.the_json_list)===null||dt===void 0?void 0:dt.the_json_list_value)===null||Fo===void 0?void 0:Fo.data)===null||Po===void 0?void 0:Po.the_value})}),xt=Object.assign(Object.assign({},xt),{method:xn,methodURL:On,authType:Gn,username:Rn,password:Dn,bearerToken:Bn,json:tt,script:Fn,body:qe})}else zt==="function"&&(xt=Object.assign(Object.assign({},xt),{language:Et,return:Ue,codeEditor:Go}));const Mt=[],Yn=[],et=[];return At?.length&&At?.forEach(tt=>{var ze;Mt.push((ze=tt?.data)===null||ze===void 0?void 0:ze.the_image_url)}),mn?.length&&mn?.forEach(tt=>{var ze;Yn.push((ze=tt?.data)===null||ze===void 0?void 0:ze.the_video_link)}),Qt?.length&&Qt?.forEach(tt=>{var ze;et.push((ze=tt.data)===null||ze===void 0?void 0:ze.the_doc_url)}),xt=Object.assign(Object.assign({},xt),{imageList:Mt,linkList:et,videoList:Yn}),xt})),yield function(){return it(this,void 0,void 0,function*(){document.getElementById("widget-documentation-preview-modal").showModal()})}(),function(Ae,De){it(this,void 0,void 0,function*(){const Pe=document.getElementById("documentation-view");if(i.B.DOCUMENTATION_WIDGET!=0)return void(yield qn(i.B.DOCUMENTATION_WIDGET,Pe,{currentWidgetId:De}));const Me=document.getElementById("documentation-preview");Me.innerHTML="",Ae&&Ae?.length&&typeof Ae!="string"?Ae?.forEach(Oe=>{var Ye,at,pt,nt;const It=document.createElement("h3");let st="";switch(Oe?.type){case"api":st="API";break;case"function":st="Functions and Classes";break;case"imgAndLink":st="Images and Links";break;default:st=""}It.innerHTML=`
        ${Oe?.title} ${st?"("+st+")":""}
      `,Me?.appendChild(It);const ft=document.createElement("div");ft.classList.add("widget-doc-content"),Oe?.content&&(ft.innerHTML=Oe.content,Me?.appendChild(ft));const ut=document.createElement("div");if(ut.classList.add("widget-doc-section"),Oe.type==="api"){let ct="";ct=Oe.authType==="basicAuth"?`
            <p>username: <code>${Oe?.username}</code></p>
            <p>password: <code>${Oe?.password}</code></p>
          `:Oe.authType==="bearerToken"?`
          <h6>Token: <code>${Oe?.bearerToken}</code></h6>
          `:"None";const kt=Oe.json.map(St=>`${St?.key}: ${St?.value}`).join(", "),Ct=document.createElement("pre");Ct.textContent=kt,ut.innerHTML=`
          <div class="pv-3">
            <h6>Method Type: <code>${Oe?.method.toUpperCase()}</code></h6>
            <h6>Endpoint: <code>${Oe?.methodURL}</code></h6>
          </div>
          <div class="pv-3">
            <h6>Auth Type: <code>${((Ye=Oe?.authType)===null||Ye===void 0?void 0:Ye.toUpperCase())||""}</code></h6>
            ${ct}
          </div>
          <div class="pv-3">
            <h6>JSON</h6>
            <code class="pre-wrapper" id="json-list-pre"></code>
          </div>
          <div class="pv-3">
            <h6>Body</h6>
            ${Oe.body}
          </div>
          <div class="pv-3">
            <h6>Scripts</h6>
            ${Oe.script}
          </div>
        `;const gt=ut.querySelector("#json-list-pre");gt&&(gt.appendChild(Ct),gt.removeAttribute("id"))}else if(Oe.type==="function"){const ct=document.createElement("pre");ct.textContent=Oe?.codeEditor;const kt=document.createElement("pre");kt.textContent=Oe?.return,ut.innerHTML=`
          <div class="mv-3">
            <h6>Parameter</h6>
            <p>Language: ${Oe?.language}</p>
            <code class="pre-wrapper" id="editor-pre"></pre></code>
            <h6>Returns</h6>
            <code class="pre-wrapper" id="return-pre"></code>
          </div>
        `;const Ct=ut.querySelector("#editor-pre");Ct&&(Ct.appendChild(ct),Ct.removeAttribute("id"));const gt=ut.querySelector("#return-pre");gt&&(gt.appendChild(kt),gt.removeAttribute("id"))}const Nt=document.createElement("div");Nt.classList.add("mv-3");const Lt=(at=Oe?.linkList)===null||at===void 0?void 0:at.map(ct=>`
            <p>${ct}</p>
          `).join(""),bt=(pt=Oe?.imageList)===null||pt===void 0?void 0:pt.map(ct=>`
          <img src="${ct}">
        `).join(""),_t=(nt=Oe?.videoList)===null||nt===void 0?void 0:nt.map(ct=>`
            <iframe width="560" height="315" src="${ct}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        `).join(""),Pt=Lt?.length?`
          <div class="mv-3">
          <h6>Web links</h6>
          ${Lt}
          </div>
        `:"",Ut=bt?.length?`
          <h6>Attachments</h6>
          <div class="documentation-attachments">
            ${bt}
          </div>
        `:"",Wt=_t?.length?`
            <h6>Videos</h6>
            <div class="documentation-attachments">
              ${_t}
            </div>
            `:"";Nt.innerHTML=`
        <div class="mv-3">
          ${Pt}
          ${Ut}
          ${Wt}
        </div>
        <p class="documentation-creator">- added by: <span>${Oe?.creatorEmail}</span></p>
      `,ut?.appendChild(Nt),Me?.appendChild(ut)}):Ae!==void 0&&(Me.innerHTML=Ae)})}(ye,R)}))})}function Nr(R){return it(this,void 0,void 0,function*(){const h=document.getElementById(R),s=h?.querySelector("form");s?.reset(),h?.close()})}var Rs=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function Jn(R){return Rs(this,arguments,void 0,function*(h,s=null,p="",k={concepts:[],connections:[]}){var A,x,G,_;if(Fe)try{const V=yield je("CreateData",{json:h,ofConcept:s,typeConcept:p,actions:k});return!((x=(A=V?.actions)===null||A===void 0?void 0:A.concepts)===null||x===void 0)&&x.length&&(k.concepts=JSON.parse(JSON.stringify(V.actions.concepts))),!((_=(G=V?.actions)===null||G===void 0?void 0:G.connections)===null||_===void 0)&&_.length&&(k.connections=JSON.parse(JSON.stringify(V.actions.connections))),V.data}catch(V){console.error("CreateTheComposition sw error: ",V),Qe(V)}let g=999,l=999,F=(0,ne.o)();for(const V in h){let H=Ds(V);if(typeof h[V]!="string"&&typeof h[V]!="number")if(s==null||s.id==0)F=yield(0,ge.k)(H,"",!0,g,4,l,void 0,k),Array.isArray(h[V])&&(H=Lr(H)),yield Jn(h[V],F,H,k);else{Array.isArray(h[V])&&(H=br(H));let q=br(V),oe=yield(0,ge.k)(H,"",!0,g,4,l,void 0,k);F=oe;let le=_r(p,q),ye=yield(0,Ee.$)(le,l,g,g,k);yield(0,Ot.F)(s.id,oe.id,ye.id,1e3,ye.characterValue,g,k),Array.isArray(h[V])&&(H=Lr(H)),yield Jn(h[V],oe,H,k)}else{let q=_r(p,V),oe=yield(0,Ee.$)(q,l,g,g,k),le=yield(0,ge.k)(V,h[V].toString(),!1,g,4,l,void 0,k);console.log("this is the type concept in down",oe,le),s!=null&&(yield(0,Ot.F)(s.id,le.id,oe.id,1e3,q,g,k))}}return F})}function Ds(R){return R.startsWith("the_")?R:"the_"+R}function Lr(R){return R.endsWith("_s")?R:R+"_s"}function br(R){return R.replace(/_s$/,"")}const Gs=R=>/^[+-]?\d+(\.\d+)?$/.test(R);function _r(R,h){return Gs(h)?R+"_":R+"_"+function(s){return s.startsWith("the_")?s.slice(4):s}(h)}class Er{constructor(){this.prototype="",this.required=[],this.optional=[],this.field="string",this.childPrototypes=[],this.isCompositional=!1,this.options=[],this.isQueryType=!1,this.querySelector=null,this.concepts=[],this.connections=[],this.addedConcepts=[],this.addedConnections=[]}}function Rt(R,h){if(Array.isArray(R)&&Array.isArray(h))for(let s=0;s<h.length;s++)R.push(h[s]);return R}var nn=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function xo(R){return nn(this,arguments,void 0,function*(h,s=null){let p=[],k=[],A=[],x=(0,ne.o)();try{s==null&&(s=new ko,yield s.initialize());let G=[];if(h.isCompositional){if(x=yield function(l,F,V,H){return nn(this,void 0,void 0,function*(){let q=(0,ne.o)(),oe=yield H.MakeTheInstanceConceptLocal("the_composition","",!0,999,999,999),le=yield H.MakeTheTypeConceptLocal("the_composition_type",999,999,999),ye=yield H.MakeTheTypeConceptLocal(l,999,999,999),Se=yield H.CreateTheConnectionLocal(oe.id,ye.id,le.id,1e3,"the_composition_type");return q=oe,F.push(le),F.push(ye),V.push(Se),q})}(h.prototype,p,k,s),h.isQueryType){let l=yield function(V,H,q){return nn(this,void 0,void 0,function*(){let oe=[],le=[],ye="the_composition_filter_type",Se="the_composition_selector",he=yield q.MakeTheTypeConceptLocal(ye,999,999,999),Ae=yield q.MakeTheTypeConceptLocal(Se,999,999,999);if(V!=null){let De=yield q.MakeTheTypeConceptLocal(V.selector,999,999,999);oe.push(De);let Pe=yield q.MakeTheTypeConceptLocal(V.filterType,999,999,999);oe.push(De),oe.push(Pe);let Me=yield q.CreateTheConnectionLocal(H.id,De.id,Ae.id,1e3,Se,999);le.push(Me);let Oe=yield q.CreateTheConnectionLocal(H.id,Pe.id,he.id,1e3,ye,999);le.push(Oe)}return{concepts:oe,connections:le}})}(h.querySelector,x,s),F=l.concepts;Rt(A,l.connections),Rt(p,F)}if(h.options.length>0){let l=yield function(V,H,q){return nn(this,void 0,void 0,function*(){let oe=[],le=[],ye="the_composition_s_option",Se=yield q.MakeTheTypeConceptLocal(ye,999,999,999);for(let he=0;he<V.length;he++){let Ae=V[he].type,De=V[he].value,Pe=yield q.MakeTheInstanceConceptLocal(Ae,De,!1,999,999,999);oe.push(Pe);let Me=yield q.CreateTheConnectionLocal(H.id,Pe.id,Se.id,1e3,ye,999);le.push(Me)}return{concepts:oe,connections:le}})}(h.options,x,s),F=l.concepts;Rt(A,l.connections),Rt(p,F)}}else x=yield function(l,F){return nn(this,void 0,void 0,function*(){let V=yield(0,ce.A)(5124),H=yield F.MakeTheTypeConceptLocal(l,999,999,999);return yield function(oe,le,ye,Se){return nn(this,void 0,void 0,function*(){let he=yield Se.CreateTheConceptLocal("",le.characterValue,999,oe.id,le.id,4,!1);return he.characterValue=le.characterValue,he.typeCharacter=le.characterValue,he.isComposition=!0,he.type=le,he})}(V,H,0,F)})}(h.prototype,s),A=yield Or(h.required,x,p,s,!0),G=yield Or(h.optional,x,p,s),p.push(x);let _=xr(x,!0,!0),g=yield s.MakeTheTypeConceptLocal(_,999,999,999);if(p.push(g),h.childPrototypes.length>0)for(let l=0;l<h.childPrototypes.length;l++){let F=yield xo(h.childPrototypes[l]),V=F.mainConcept,H=F.connections,q=F.concepts,oe=yield s.CreateTheConnectionLocal(x.id,V.id,g.id,1e3,_,999);A.push(oe),Rt(A,H),Rt(p,q),p.push(V)}Rt(A,G),Rt(A,k),Rt(p,h.addedConcepts),Rt(A,h.addedConnections),h.concepts=p,h.connections=A,console.log("this is the connections",A)}catch{s?.rollbackTransaction()}return{concepts:p,connections:A,mainConcept:x}})}function xr(R,h=!0,s=!1){var p;let k="the_prototype_of_"+((p=R.type)===null||p===void 0?void 0:p.characterValue);return k+=h?"_requires":"_optional",s&&(k+="_the_composition"),k}function Or(R,h,s,p){return nn(this,arguments,void 0,function*(k,A,x,G,_=!1,g=!1){let l=[],F=[],V=xr(A,_,g),H=yield G.MakeTheTypeConceptLocal(V,999,999,999);x.push(H);for(let q=0;q<k.length;q++){let oe=yield G.MakeTheTypeConceptLocal(k[q],999,999,999);l.push(oe)}for(let q=0;q<l.length;q++){let oe=yield G.CreateTheConnectionLocal(A.id,l[q].id,H.id,1e3,V,999);F.push(oe)}for(let q=0;q<l.length;q++)x.push(l[q]);return F})}var Fs=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,[])).next())})};function Oo(R){return Fs(this,void 0,void 0,function*(){let h;try{const s=yield fetch(i.B.GetCachedImage(R),{method:"GET"});return s.ok?h=s.body:(console.log("Error in Getting Image",s.status),(0,o.ry)(s)),h}catch(s){throw s instanceof Error?console.log("Error in Getting Local concept by character value error message: ",s):console.log("Error in Getting Local concept by character value unexpected error: ",s),h}})}var Ps=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};function Br(R){return Ps(this,arguments,void 0,function*(h,s="normal"){let p,k=h.split("/").pop();if(s=="small"){let A=k?.split(".");A&&(k=A[0]+"_small."+A[1])}return k&&(p=yield Oo(k)),p})}function Rr(R,h="normal"){let s=R;try{if(R){let p=R.split("/").pop();if(h=="small"){let k=p?.split(".");k&&(p=k[0]+"_small."+k[1])}p&&(s=i.B.GetCachedImage(p))}}catch{console.log("This url has error",R)}return s}var Fe,rt=function(R,h,s,p){return new(s||(s=Promise))(function(k,A){function x(g){try{_(p.next(g))}catch(l){A(l)}}function G(g){try{_(p.throw(g))}catch(l){A(l)}}function _(g){var l;g.done?k(g.value):(l=g.value,l instanceof s?l:new s(function(F){F(l)})).then(x,G)}_((p=p.apply(R,h||[])).next())})};const Us=Date.now().toString(36)+Math.random().toString(36).substring(2);let Bo=[],Ft=[],Ro=!1;function Dr(R){Ro=R}function Do(R="",h){Je.b.BearerAccessToken=R,Fe&&je("updateAccessToken",{accessToken:R,session:Je.b.sessionId})}function Gr(){return rt(this,arguments,void 0,function*(R="",h="",s="",p="",k=!0,A="",x=void 0,G={},_={}){var g;try{i.B.BASE_URL=R,i.B.AI_URL=h,i.B.NODE_URL=p,i.B.BASE_APPLICATION=A,i.B.LOG_SERVER=(g=_.logserver)!==null&&g!==void 0?g:"https://logdev.freeschema.com",console.log("setting the logserver",i.B.LOG_SERVER,_.logserver),Do(s);let l=Math.floor(1e8*Math.random());i.B.setRandomizer(l);const F={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1};if(i.B.FLAGS=F,i.B.FLAGS=Object.assign(Object.assign({},F),G),function(V){const H=pe.V.logfunction("initializeFlags",arguments);try{return V.logApplication&&(Io.initialize(),pe.V.logApplicationActivationStatus=!0,console.warn("Application log started.")),V.logPackage&&(pe.V.logPackageActivationStatus=!0,console.warn("Package log started.")),V.accessTracker&&(Cn.J.activateStatus=!0,console.warn("Access Tracker Activated.")),V.isTest&&(n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0,n.B.isLocalDataLoaded=!0,n.B.isLocalTypeLoaded=!0,n.B.isLocalCharacterLoaded=!0,n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0,n.B.isLocalConnectionLoaded=!0),pe.V.logUpdate(H),V}catch(q){throw(0,o.ey)(H,"initializeFlags",q),q}}(i.B.FLAGS),!("serviceWorker"in navigator))return yield Ln(),void console.warn("Service Worker not supported in this browser.");if(yield function(){return rt(this,void 0,void 0,function*(){var V;let H=sessionStorage.getItem("cacheServers"),q=sessionStorage.getItem("config"),oe=(V=sessionStorage.getItem("session"))!==null&&V!==void 0?V:"999",le=parseInt(oe);H!==void 0&&H!=="undefined"||(i.B.NODE_CACHE_URL=i.B.BASE_URL),H=JSON.parse(H);const ye=JSON.parse(q);H&&ye&&ye.documentationWidget&&le!=999?(Array.isArray(H)&&H.length?i.B.NODE_CACHE_URL=H[0]:i.B.NODE_CACHE_URL=i.B.BASE_URL,Je.b.setSession(le),i.B.DOCUMENTATION_WIDGET=ye.documentationWidget):yield function(){return rt(this,void 0,void 0,function*(){var Se,he;let Ae;try{let De=(he=(Se=window?.location)===null||Se===void 0?void 0:Se.hostname)!==null&&he!==void 0?he:"boomconsole";if(Ae=yield fetch(i.B.getAppConfig()+"?application="+De,{method:"POST"}),!Ae.ok)throw new Error("Failed to sync data to the server.");const Pe=yield Ae.json();Pe.success&&(sessionStorage.setItem("cacheServers",JSON.stringify(Pe.servers)),sessionStorage.setItem("config",JSON.stringify(Pe.config)),sessionStorage.setItem("session",Pe.session),Je.b.setSession(Pe.session),Pe.servers?i.B.NODE_CACHE_URL=Pe.servers[0]:i.B.NODE_CACHE_URL=i.B.BASE_URL,Pe.config&&(i.B.DOCUMENTATION_WIDGET=Pe.config.documentationWidget))}catch(De){console.error("error getting app config from server",De.message)}})}(),console.log("before the payload in app",Je.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&je("SESSION_DATA",{type:"SESSION_DATA",data:i.B.NODE_CACHE_URL,session:Je.b.sessionId})})}(),function(){navigator.serviceWorker.addEventListener("message",V=>rt(this,void 0,void 0,function*(){var H,q,oe,le;try{if(V.data&&V.data.type==="API_401"){const{requestDetails:ye}=V.data,Se={method:ye.method,headers:new Headers(ye.headers),body:ye.body},he=yield fetch(ye.url,Se),Ae=yield he?.json();(q=(H=navigator?.serviceWorker)===null||H===void 0?void 0:H.controller)===null||q===void 0||q.postMessage({type:"API_RESPONSE",messageId:V.data.messageId,response:new Response(Ae,{status:he.status,statusText:he.statusText,headers:he.headers})})}}catch(ye){console.error("Error during listenPostMessage",ye),(le=(oe=navigator?.serviceWorker)===null||oe===void 0?void 0:oe.controller)===null||le===void 0||le.postMessage({type:"API_RESPONSE",messageId:V.data.messageId})}}))}(),function(){Xi.x.addEventListener("message",V=>rt(this,void 0,void 0,function*(){const{type:H,payload:q}=V.data;if(!H)return;let oe={success:!1,data:void 0};Fr[H]?yield Fr[H](q):console.warn(`Unable to handle "${H}" case in BC service worker`)}))}(),x&&x.activate&&x.manual)yield new Promise((V,H)=>{navigator.serviceWorker.ready.then(q=>rt(this,void 0,void 0,function*(){console.log("registraions ready",q),Fe=q.active,yield vn(),V("done")})).catch(q=>{console.error("Error: Ready service worker",q),H(q)}).finally(()=>console.log("Finally service worker ready done")),setTimeout(()=>H("Timeout ready"),3e4)});else if(x&&x?.activate)try{console.log("service worker initialiing"),yield function(V){var H=arguments;return rt(this,void 0,void 0,function*(){const q=pe.V.logfunction("handleRegisterServiceWorker",H);yield new Promise((oe,le)=>{var ye,Se;let he=!1;navigator.serviceWorker.register((ye=V.pathToSW)!==null&&ye!==void 0?ye:"./serviceWorker.bundle.js",{scope:(Se=V.scope)!==null&&Se!==void 0?Se:"/"}).then(Ae=>rt(this,void 0,void 0,function*(){console.log("Service Worker registered:",Ae),setInterval(()=>{Ft.length&&Qn()},2e3),console.log("update listen start"),Ae.onupdatefound=()=>{const De=Ae.installing;console.log("new worker",De),De&&(De.onstatechange=()=>rt(this,void 0,void 0,function*(){console.warn("on state change triggered",De.state,navigator.serviceWorker.controller),De.state==="installing"&&(console.log("Service Worker installing"),Fe=void 0),De.state!=="activated"&&De.state!=="redundant"||!navigator.serviceWorker.controller||(Fe=De,console.log("New Service Worker is active",Ae),setTimeout(()=>{console.log("Message Processed after some time"),Qn()},5e3),yield vn(),he=!0,Qn(),oe())}))},Ae.addEventListener("controllerchange",()=>rt(this,void 0,void 0,function*(){console.warn("controller change triggered",navigator.serviceWorker.controller),navigator.serviceWorker.controller&&(Fe=navigator.serviceWorker.controller,console.warn("Service worker has been activated; controller change"),yield vn())})),(Ae.installing||Ae.waiting||Ae.active)&&Ae.addEventListener("statechange",De=>rt(this,void 0,void 0,function*(){var Pe;((Pe=De?.target)===null||Pe===void 0?void 0:Pe.state)==="activating"&&(Fe=navigator.serviceWorker.controller,console.warn("Service Worker is activating statechange"),yield vn())})),Ae.active?(console.log("active sw"),Fe=Ae.active,yield vn(),Qn(),oe()):setTimeout(()=>{he||le("Not Completed Initialization")},1e4)})).catch(Ae=>rt(this,void 0,void 0,function*(){yield Ln(),le(Ae),console.error("Service Worker registration failed:",Ae),(0,o.ey)(q,"handleRegisterServiceWorker",Ae)}))})})}(x)}catch(V){yield Ln(),console.error("Unable to start service worker",V)}else yield Ln(),console.warn("Service Worker not activated");return!0}catch(l){yield Ln(),console.warn("Cannot initialize the system",l)}})}function je(R,h){return rt(this,arguments,void 0,function*(s,p,k=0){let A=!1;const x=Math.random().toString(36).substring(2);p.messageId=x,p.TABID=Us;const G=JSON.parse(JSON.stringify(p));let _;return s!="checkProcess"&&k==0&&(_=setInterval(()=>rt(this,void 0,void 0,function*(){if(!A&&!(yield function(g,l){return rt(this,void 0,void 0,function*(){var F;try{const V=yield je("checkProcess",{checkMessageId:g});if(console.log("check interval data res for type ",l,g,V.data),(F=V?.data)===null||F===void 0?void 0:F.processing)return!0}catch(V){return console.error("error on checing executing process",l,g,V),!1}})}(x,s))&&(clearInterval(_),!A)){if(console.log("Failed to handle type "+s+" message not found "+x,"retrying: ",k==0,s),k==0&&s!="checkProcess")return console.log("retrying ",s,x),yield je(s,p,k+1);console.log("Failed to handle type "+s+" "+x)}}),2e3)),new Promise((g,l)=>{if(navigator.serviceWorker.controller||Fe||console.log("",navigator.serviceWorker.controller,Fe,s),navigator.serviceWorker.controller||Fe){const F=V=>{var H,q,oe,le,ye,Se;((H=V?.data)===null||H===void 0?void 0:H.messageId)==x&&(A=!0,clearInterval(_),V.data.success||(((q=V?.data)===null||q===void 0?void 0:q.status)==401?l((0,o.ry)(new Response("Unauthorized",{status:401,statusText:(oe=V?.data)===null||oe===void 0?void 0:oe.statusText}))):((le=V?.data)===null||le===void 0?void 0:le.status)==500?l((0,o.Mb)(new Response("Internal Server Error",{status:500,statusText:(ye=V?.data)===null||ye===void 0?void 0:ye.statusText}))):(console.error("Error in the response from worker:",V),l(`Failed to handle action ${s} ${JSON.stringify(p)}, Response: ${JSON.stringify(V.data)}`))),!((Se=V.data)===null||Se===void 0)&&Se.actions&&(p.actions=JSON.parse(JSON.stringify(V.data.actions))),g(V.data),navigator.serviceWorker.removeEventListener("message",F))};if(navigator.serviceWorker.addEventListener("message",F),navigator.serviceWorker.controller)s!="checkProcess"&&console.log("sent to sw",s,x),navigator.serviceWorker.controller.postMessage({type:s,payload:G});else if(Fe){console.warn(`controller not found but serviceWorker is available. messageId: ${x}, type: ${s}`);try{Fe.postMessage({type:s,payload:G})}catch(V){console.log("Retrying again on catch service worker",V),Fe.postMessage({type:s,payload:G})}}else console.warn(`Service Worker hasn't loaded yet. messageId: ${x}, type: ${s}`),console.info("ready",navigator.serviceWorker.ready),setTimeout(()=>{console.warn(`Re-Trying after certain time. messageId: ${x}, type: ${s}`),Fe?(console.info("This is triggered "),Fe?.postMessage({type:s,payload:p})):(console.log("not ready",s),clearInterval(_),l("Service worker not ready"))},3e4);setTimeout(()=>{clearInterval(_),l(`No response from service worker after timeout: ${s}`),navigator.serviceWorker.removeEventListener("message",F)},21e4)}else Ft.push({message:{type:s,payload:G}}),s=="init"&&(clearInterval(_),g(null))})})}const Fr={GetLinkListener:R=>rt(void 0,void 0,void 0,function*(){const h=Bo.find(s=>s.listenerId==R.listenerId);return h?.callback(R.data),{success:!0}}),dispatchEvent:R=>rt(void 0,void 0,void 0,function*(){if(Fe){let h=new CustomEvent(R.id||"",R.data);dispatchEvent(h)}return{success:!0}}),checkInit:R=>rt(void 0,void 0,void 0,function*(){return console.log("service worker init 0"),navigator.serviceWorker.controller&&(console.log("service worker init 1"),Fe=navigator.serviceWorker.controller),yield vn(),{success:!0}})};function Ln(){return rt(this,void 0,void 0,function*(){yield(0,ks.A)();const R=new Date().getTime();yield(0,b.A)().then(()=>{let h=new Date().getTime()-R;console.log("The time taken to prepare concept  data is  ",h)}).catch(h=>{throw h}),yield(0,Yi.Ay)().then(()=>{let h=new Date().getTime()-R;console.log("The time taken to prepare local concept  ",h)}).catch(h=>{throw h}),yield(0,Qi.p)().then(()=>{n.B.isLocalConnectionLoaded=!0}).catch(h=>{throw h}),yield(0,Yi.xd)().catch(h=>{throw console.log("This is the error in populating binary tree"),h}),yield(0,Qi.a)().then(()=>{n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0;let h=new Date().getTime()-R;console.log("The time taken to prepare connections  ",h)}).catch(h=>{throw h})})}function Pr(R,h={}){if(Fe||typeof window<"u"){let s=new CustomEvent(`${R}`,h);dispatchEvent(s)}else Xi.x.postMessage({type:"dispatchEvent",payload:{id:R,data:h}})}function Qn(){return rt(this,void 0,void 0,function*(){console.log("message queue",Ft);const R=Ft.find(h=>{var s;return((s=h?.message)===null||s===void 0?void 0:s.type)=="init"});if(R){console.log("Processing Init Queue poped",R?.type,R);const h=Ft.indexOf(R);h>-1&&Ft.splice(h,1),yield je(R?.type,R?.payload)}for(console.log("message queue while",Ft);Ft.length>0;){const{message:h,resolve:s,reject:p}=Ft.shift();console.log("Queue poped",h.type,h),yield je(h.type,h.payload)}})}const Qe=R=>{if(R instanceof J.z)throw console.error("FreeSchemaResponse Error",R),R;console.error("Service Worker Error",R)};function vn(){return rt(this,void 0,void 0,function*(){yield je("init",{url:i.B.BASE_URL,aiurl:i.B.AI_URL,accessToken:Je.b.BearerAccessToken,nodeUrl:i.B.NODE_URL,enableAi:!1,applicationName:i.B.BASE_APPLICATION,flags:i.B.FLAGS})})}},1320:(Q,O,y)=>{y.d(O,{zl:()=>a,b6:()=>C,e$:()=>I,y6:()=>m,rq:()=>E,yV:()=>t,_W:()=>c});var N=y(1245),b=y(6687);function n(L){return L.startsWith("the_")?L.slice(4):L}var u=function(L,B,D,W){return new(D||(D=Promise))(function(U,P){function M(K){try{z(W.next(K))}catch(ee){P(ee)}}function j(K){try{z(W.throw(K))}catch(ee){P(ee)}}function z(K){var ee;K.done?U(K.value):(ee=K.value,ee instanceof D?ee:new D(function(se){se(ee)})).then(M,j)}z((W=W.apply(L,B||[])).next())})};function T(L,B,D){return u(this,void 0,void 0,function*(){var W,U,P,M,j,z,K,ee;let se=[];for(let $=0;$<L.length;$++)se.push(L[$].toTheConceptId),se.push(L[$].ofTheConceptId),se.push(L[$].typeId);for(let $=0;$<L.length;$++){let ie=!1;D.includes(L[$].id)&&(ie=!0);let ue=yield(0,N.GetTheConcept)(L[$].ofTheConceptId),te=yield(0,N.GetTheConcept)(L[$].toTheConceptId);if(ie==1&&ue.id!=0&&te.id!=0){let X,ne=(U=(W=te.type)===null||W===void 0?void 0:W.characterValue)!==null&&U!==void 0?U:"self";L[$].toTheConceptId in B?X=B[L[$].toTheConceptId]:(X={},X[ne]={},B[L[$].toTheConceptId]=X);let Y=yield(0,N.GetTheConcept)(L[$].typeId);try{let J=(M=(P=ue?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:"none",re=ue.characterValue;Y.characterValue,Y.characterValue.includes("_s_")&&(ue.id in B||(B[ue.id]={}),B[ue.id][J]=re),B[te.id]={}}catch(J){console.log("this is error",J)}}if(ue.id!=0&&te.id!=0){let X,ne=(z=(j=ue.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:"self";L[$].ofTheConceptId in B?X=B[L[$].ofTheConceptId]:(X={},X[ne]={},B[L[$].ofTheConceptId]=X);let Y=yield(0,N.GetTheConcept)(L[$].typeId);try{let J=(ee=(K=te?.type)===null||K===void 0?void 0:K.characterValue)!==null&&ee!==void 0?ee:"none",re=te.characterValue;Y.characterValue.includes("_s_")&&(te.id in B||(B[te.id]={}),B[te.id][J]=re),B[ue.id]={}}catch(J){console.log("this is error",J)}}}return B})}var w=y(5312),i=y(7876),e=function(L,B,D,W){return new(D||(D=Promise))(function(U,P){function M(K){try{z(W.next(K))}catch(ee){P(ee)}}function j(K){try{z(W.throw(K))}catch(ee){P(ee)}}function z(K){var ee;K.done?U(K.value):(ee=K.value,ee instanceof D?ee:new D(function(se){se(ee)})).then(M,j)}z((W=W.apply(L,B||[])).next())})};function o(L,B,D){if(L in B){let W=B[L];W&&(D[W.connectionType+"_count"]=W.count)}}var d=function(L,B,D,W){return new(D||(D=Promise))(function(U,P){function M(K){try{z(W.next(K))}catch(ee){P(ee)}}function j(K){try{z(W.throw(K))}catch(ee){P(ee)}}function z(K){var ee;K.done?U(K.value):(ee=K.value,ee instanceof D?ee:new D(function(se){se(ee)})).then(M,j)}z((W=W.apply(L,B||[])).next())})},f=y(4698),v=y(6915),S=function(L,B,D,W){return new(D||(D=Promise))(function(U,P){function M(K){try{z(W.next(K))}catch(ee){P(ee)}}function j(K){try{z(W.throw(K))}catch(ee){P(ee)}}function z(K){var ee;K.done?U(K.value):(ee=K.value,ee instanceof D?ee:new D(function(se){se(ee)})).then(M,j)}z((W=W.apply(L,B||[])).next())})},r=function(L,B,D,W){return new(D||(D=Promise))(function(U,P){function M(K){try{z(W.next(K))}catch(ee){P(ee)}}function j(K){try{z(W.throw(K))}catch(ee){P(ee)}}function z(K){var ee;K.done?U(K.value):(ee=K.value,ee instanceof D?ee:new D(function(se){se(ee)})).then(M,j)}z((W=W.apply(L,B||[])).next())})};function a(L,B){return r(this,arguments,void 0,function*(D,W,U=""){let P=yield(0,N.SearchWithTypeAndLinkerApi)(D,W,U),M=P.compositionIds,j=P.internalConnections,z=P.linkers,K=P.reverse,ee=P.mainCompositionIds,se=yield(0,b.QL)(z),$=yield(0,b.MT)(M,j);return yield(0,w.NK)(se,$,ee,K)})}function t(L,B,D,W,U){return r(this,void 0,void 0,function*(){let P=yield(0,b.QL)(L),M=yield(0,b.rv)(B,D);return yield(0,w.Ve)(P,M,B,W,U)})}function c(L,B,D,W,U){return r(this,void 0,void 0,function*(){let P=yield(0,b.QL)(L),M=yield(0,b.D)(B,D);return yield(0,w.NK)(P,M,W,U)})}function C(L,B,D,W,U){return r(this,void 0,void 0,function*(){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnections",{linkers:L,conceptIds:B,mainCompositionIds:D,reverse:W,countInfos:U})).data}catch(z){console.error("formatConnections error sw: ",z),(0,N.handleServiceWorkerException)(z)}let P=yield(0,b.QL)(L);P=(0,v.X)(P);let M=[];return M=yield T(P,M,W),M=yield function(z,K,ee){return u(this,void 0,void 0,function*(){var se,$,ie,ue,te,X,ne,Y;let J=[];for(let re=0;re<z.length;re++)J.push(z[re].toTheConceptId),J.push(z[re].ofTheConceptId),J.push(z[re].typeId);z.sort(function(re,ae){return ae.id-re.id});for(let re=0;re<z.length;re++){let ae=!1;ee.includes(z[re].id)&&(ae=!0);let de=yield(0,N.GetTheConcept)(z[re].ofTheConceptId),ce=yield(0,N.GetTheConcept)(z[re].toTheConceptId);if(ae==1&&de.id!=0&&ce.id!=0){let we,Ie=($=(se=ce.type)===null||se===void 0?void 0:se.characterValue)!==null&&$!==void 0?$:"self";z[re].toTheConceptId in K?(we=K[z[re].toTheConceptId],Ie in we||(we[Ie]={})):(we={},we[Ie]={},K[z[re].toTheConceptId]=we);let me=yield(0,N.GetTheConcept)(z[re].typeId);try{let ke=(ue=(ie=de?.type)===null||ie===void 0?void 0:ie.characterValue)!==null&&ue!==void 0?ue:"none",be=de.characterValue,ge=me.characterValue;ge==""&&(ge=ke,ge=n(ge));let _e={[ke]:be},ve=ge+"_reverse";me.characterValue.includes("_s_")||(typeof we[Ie]=="string"&&(we[Ie]={}),we[Ie][ve]=_e)}catch(ke){console.log("this is error",ke)}}if(de.id!=0&&ce.id!=0){let we,Ie=(X=(te=de.type)===null||te===void 0?void 0:te.characterValue)!==null&&X!==void 0?X:"self";z[re].ofTheConceptId in K?(we=K[z[re].ofTheConceptId],Ie in we||(we[Ie]={})):(we={},we[Ie]={},K[z[re].ofTheConceptId]=we);let me=yield(0,N.GetTheConcept)(z[re].typeId);try{let ke=(Y=(ne=ce?.type)===null||ne===void 0?void 0:ne.characterValue)!==null&&Y!==void 0?Y:"none",be=ce.characterValue,ge=me.characterValue,_e=(me.characterValue,!1);ge==""&&(ge=ke,ge=n(ge),_e=!0);let ve={[ke]:be};isNaN(Number(ge))?me.characterValue.includes("_s_")||(typeof we[Ie]=="string"&&(we[Ie]={}),we[Ie][ge]=_e?be:ve):(Array.isArray(we[Ie])||(we[Ie]=[]),we[Ie].push(be))}catch(ke){console.log("this is error",ke)}}}return K})}(P,M,W),yield function(z,K,ee,se){return u(this,arguments,void 0,function*($,ie,ue,te,X=[]){var ne,Y,J,re,ae,de;let ce=[],we=[];for(let Ie=0;Ie<$.length;Ie++)we.push($[Ie].toTheConceptId),we.push($[Ie].ofTheConceptId),we.push($[Ie].typeId);$.sort(function(Ie,me){return me.id-Ie.id});for(let Ie=0;Ie<$.length;Ie++){let me=!1;X.includes($[Ie].id)&&(me=!0);let ke=yield(0,N.GetTheConcept)($[Ie].ofTheConceptId),be=yield(0,N.GetTheConcept)($[Ie].toTheConceptId);if(me==1&&ke.id!=0&&be.id!=0&&be.id in ie){let ge,_e=(Y=(ne=be.type)===null||ne===void 0?void 0:ne.characterValue)!==null&&Y!==void 0?Y:"self";$[Ie].toTheConceptId in ie?ge=ie[$[Ie].toTheConceptId]:(ge={},ge[_e]={},ie[$[Ie].toTheConceptId]=ge);let ve=yield(0,N.GetTheConcept)($[Ie].typeId);try{let Ce=ve.characterValue+"_reverse",Te=ie[$[Ie].ofTheConceptId];Te&&(Array.isArray(ge[_e][Ce])?ge[_e][Ce].push(Te):ve.characterValue.includes("_s_")?(ge[_e][Ce]=[],ge[_e][Ce].push(Te)):ge[_e][Ce]=Te)}catch(Ce){console.log("this is error",Ce)}}if(ke.id!=0&&be.id!=0&&ke.id in ie){let ge,_e=(re=(J=ke.type)===null||J===void 0?void 0:J.characterValue)!==null&&re!==void 0?re:"self";$[Ie].ofTheConceptId in ie?(ge=ie[$[Ie].ofTheConceptId],typeof ge[_e]=="string"&&(ge[_e]={})):(ge={},ge[_e]={},ie[$[Ie].ofTheConceptId]=ge);let ve=!1,Ce=(yield(0,N.GetTheConcept)($[Ie].typeId)).characterValue;Ce==""&&(Ce=be.characterValue,ve=!0),Ce==""&&(Ce=(de=(ae=be?.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&de!==void 0?de:"");try{let Te=ie[$[Ie].toTheConceptId];Te&&(Array.isArray(ge[_e])?ve?ge[_e].push(Te[Ce]):ge[_e].push(Te):Array.isArray(ge[_e][Ce])?ge[_e][Ce].push(Te):Ce.includes("_s_")?(ge[_e][Ce]=[],ve?ge[_e][Ce].push(Te[Ce]):ge[_e][Ce].push(Te)):ge[_e][Ce]=ve?Te[Ce]:Te)}catch(Te){console.log("this is error",Te)}}}for(let Ie=0;Ie<ue.length;Ie++){let me=ie[ue[Ie]];me?(me.id=ue[Ie],ce.push(me)):(yield N.ConceptsData.GetConcept(ue[Ie])).id!=0&&(me={},me.id=ue[Ie],ce.push(me))}return ce})}(P,M,D,[],W)})}function m(L,B,D,W,U){return r(this,arguments,void 0,function*(P,M,j,z,K,ee="DESC"){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnectionsJustId",{linkers:P,conceptIds:M,mainCompositionIds:j,reverse:z,countInfos:K,order:ee})).data}catch(te){console.error("formatConnectionsJustId error sw: ",te),(0,N.handleServiceWorkerException)(te)}let se=yield(0,b.QL)(P),$=yield(0,f.V)(K);se=(0,v.X)(se,ee);let ie=[];return ie=yield T(se,ie,z),ie=yield function(te,X){return e(this,arguments,void 0,function*(ne,Y,J=[]){var re,ae,de,ce,we,Ie,me,ke;let be=[];for(let ge=0;ge<ne.length;ge++)be.push(ne[ge].toTheConceptId),be.push(ne[ge].ofTheConceptId),be.push(ne[ge].typeId);for(let ge=0;ge<ne.length;ge++){let _e=!1,ve=yield(0,i.A)(ne[ge].ofTheConceptId),Ce=yield(0,i.A)(ne[ge].toTheConceptId);if(J.includes(ne[ge].id)&&(_e=!0),_e==1&&ve.id!=0&&Ce.id!=0){let Te,xe=yield(0,i.A)(ne[ge].typeId),fe=(ae=(re=Ce.type)===null||re===void 0?void 0:re.characterValue)!==null&&ae!==void 0?ae:"self";ne[ge].toTheConceptId in Y?(Te=Y[ne[ge].toTheConceptId],fe in Te||(Te[fe]={})):(Te={},Te[fe]={},Y[ne[ge].toTheConceptId]=Te);try{let Ne=(ce=(de=ve?.type)===null||de===void 0?void 0:de.characterValue)!==null&&ce!==void 0?ce:"none",Re=ve.characterValue,Le=xe.characterValue;Le==""&&(Le=Ne,Le=n(Le));let Ee={id:ve.id,[Ne]:Re,created_on:ne[ge].entryTimeStamp},Be=Le+"_reverse";Be.includes("_s_")||(typeof Te[fe]=="string"&&(Te[fe]={}),Te[fe][Be]=Ee)}catch(Ne){console.log("this is error",Ne)}}if(ve.id!=0&&Ce.id!=0){let Te,xe=yield(0,i.A)(ne[ge].typeId),fe=(Ie=(we=ve.type)===null||we===void 0?void 0:we.characterValue)!==null&&Ie!==void 0?Ie:"self";ne[ge].ofTheConceptId in Y?(Te=Y[ne[ge].ofTheConceptId],fe in Te||(Te[fe]={})):(Te={},Te[fe]={},Y[ne[ge].ofTheConceptId]=Te);try{let Ne=(ke=(me=Ce?.type)===null||me===void 0?void 0:me.characterValue)!==null&&ke!==void 0?ke:"none",Re=Ce.characterValue,Le=xe.characterValue,Ee=!1;Le==""&&(Le=Ne,Le=n(Le),Ee=!0);let Be={};Be[Ne]={id:Ce.id,data:Re,created_on:ne[ge].entryTimeStamp},isNaN(Number(Le))?Le.includes("_s_")||(typeof Te[fe]=="string"&&(Te[fe]={}),Te[fe][Le]=Ee?Be[Ne]:Be):(Array.isArray(Te[fe])||(Te[fe]=[]),Te[fe].push(Be[Ne]))}catch(Ne){console.log("this is error",Ne)}}}return Y})}(se,ie,z),yield function(te,X,ne){return e(this,arguments,void 0,function*(Y,J,re,ae=[],de){var ce,we,Ie,me,ke,be,ge;new Date().getTime();let _e=[],ve=[];for(let Ce=0;Ce<Y.length;Ce++)ve.push(Y[Ce].toTheConceptId),ve.push(Y[Ce].ofTheConceptId),ve.push(Y[Ce].typeId);for(let Ce=0;Ce<Y.length;Ce++){let Te=!1,xe=yield(0,i.A)(Y[Ce].ofTheConceptId),fe=yield(0,i.A)(Y[Ce].toTheConceptId);if(ae.includes(Y[Ce].id)&&(Te=!0),Te==1&&xe.id!=0&&fe.id!=0&&fe.id in J){let Ne,Re=yield(0,i.A)(Y[Ce].typeId),Le=(we=(ce=fe.type)===null||ce===void 0?void 0:ce.characterValue)!==null&&we!==void 0?we:"self";Y[Ce].toTheConceptId in J,Y[Ce].toTheConceptId in J?(Ne=J[Y[Ce].toTheConceptId],typeof Ne[Le]=="string"&&(Ne[Le]={})):(Ne={},Ne[Le]={},J[Y[Ce].toTheConceptId]=Ne);try{if(J[Y[Ce].ofTheConceptId]){let Ee=J[Y[Ce].ofTheConceptId];Ee&&(Ee.id=xe.id,Ee.created_on=xe.entryTimeStamp);let Be=Re.characterValue+"_reverse";Array.isArray(Ne[Le][Be])?Ne[Le][Be].push(Ee):Be.includes("_s_")?(Ne[Le][Be]=[],Ne[Le][Be].push(Ee)):Ne[Le][Be]=Ee}}catch(Ee){console.log("this is error",Ee)}}if(xe.id!=0&&fe.id!=0&&xe.id in J){let Ne,Re=yield(0,i.A)(Y[Ce].typeId),Le=(me=(Ie=xe.type)===null||Ie===void 0?void 0:Ie.characterValue)!==null&&me!==void 0?me:"self";Y[Ce].toTheConceptId in J,Y[Ce].ofTheConceptId in J?(Ne=J[Y[Ce].ofTheConceptId],typeof Ne[Le]=="string"&&(Ne[Le]={})):(Ne={},Ne[Le]={},J[Y[Ce].ofTheConceptId]=Ne),o(xe.id,de,Ne);let Ee=!1,Be=Re.characterValue;Be==""&&(Be=fe.characterValue,Ee=!0),Be==""&&(Be=((ke=fe?.type)===null||ke===void 0?void 0:ke.characterValue)||"");try{let Ge=(ge=(be=fe?.type)===null||be===void 0?void 0:be.characterValue)!==null&&ge!==void 0?ge:"none",$e=J[Y[Ce].toTheConceptId];if($e){let He={};He[Ge]={data:$e[Ge],id:fe.id,created_on:Y[Ce].entryTimeStamp},Array.isArray(Ne[Le])?Ee?Ne[Le].push($e[Be]):Ne[Le].push($e):Array.isArray(Ne[Le][Be])?Ne[Le][Be].push(He):Be.includes("_s_")?(Ne[Le][Be]=[],Ee?Ne[Le][Be].push(He[Ge]):Ne[Le][Be].push(He)):Ne[Le][Be]=Ee?He[Ge]:He,o(fe.id,de,He)}}catch(Ge){console.log("this is error",Ge)}}}for(let Ce=0;Ce<re.length;Ce++){let Te={};Te=J[re[Ce]],Te?Te.id=re[Ce]:(yield N.ConceptsData.GetConcept(re[Ce])).id!=0&&(Te={},Te.id=re[Ce]),_e.push(Te)}return _e})}(se,ie,j,z,$)})}function I(L,B,D,W,U){return r(this,arguments,void 0,function*(P,M,j,z,K,ee="DESC"){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnectionsDataId",{linkers:P,conceptIds:M,mainCompositionIds:j,reverse:z,countInfos:K,order:ee})).data}catch(te){console.error("GetConnectionDataPrefetch error sw: ",te),(0,N.handleServiceWorkerException)(te)}let se=yield(0,b.QL)(P),$=yield(0,f.V)(K);se=(0,v.X)(se,ee);let ie=[];return ie=yield function(te,X){var ne=arguments;return d(this,arguments,void 0,function*(Y,J,re=[]){var ae,de,ce,we,Ie,me,ke,be;const ge=N.Logger.logfunction("FormatFunctionData",ne);let _e=[];for(let ve=0;ve<Y.length;ve++)_e.push(Y[ve].toTheConceptId),_e.push(Y[ve].ofTheConceptId),_e.push(Y[ve].typeId);for(let ve=0;ve<Y.length;ve++){let Ce=!1,Te=yield(0,N.GetTheConcept)(Y[ve].ofTheConceptId),xe=yield(0,N.GetTheConcept)(Y[ve].toTheConceptId);if(re.includes(Y[ve].id)&&(Ce=!0),Ce==1&&Te.id!=0&&xe.id!=0){let fe,Ne=yield(0,N.GetTheConcept)(Y[ve].typeId),Re=(de=(ae=xe.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&de!==void 0?de:"self";Y[ve].toTheConceptId in J?fe=J[Y[ve].toTheConceptId]:(fe={},fe[Re]={},J[Y[ve].toTheConceptId]=fe);try{let Le=(we=(ce=Te?.type)===null||ce===void 0?void 0:ce.characterValue)!==null&&we!==void 0?we:"none",Ee=Te.characterValue;(Ne.characterValue+"_reverse").includes("_s_")&&(Te.id in J||(J[Te.id]={}),J[Te.id][Le]=Ee),J[xe.id]={}}catch(Le){console.log("this is error",Le)}}if(Te.id!=0&&xe.id!=0){let fe,Ne=yield(0,N.GetTheConcept)(Y[ve].typeId),Re=(me=(Ie=Te.type)===null||Ie===void 0?void 0:Ie.characterValue)!==null&&me!==void 0?me:"self";Y[ve].ofTheConceptId in J?fe=J[Y[ve].ofTheConceptId]:(fe={},fe[Re]={},J[Y[ve].ofTheConceptId]=fe);try{let Le=(be=(ke=xe?.type)===null||ke===void 0?void 0:ke.characterValue)!==null&&be!==void 0?be:"none",Ee=xe.characterValue;Ne.characterValue.includes("_s_")&&(xe.id in J||(J[xe.id]={}),J[xe.id][Le]=Ee),J[Te.id]={}}catch(Le){console.log("this is error",Le)}}}return N.Logger.logUpdate(ge),J})}(se,ie,z),ie=yield function(te,X){var ne=arguments;return d(this,arguments,void 0,function*(Y,J,re=[]){var ae,de,ce,we,Ie,me,ke,be;const ge=N.Logger.logfunction("FormatFunctionDataForData",ne);let _e=[];for(let ve=0;ve<Y.length;ve++)_e.push(Y[ve].toTheConceptId),_e.push(Y[ve].ofTheConceptId),_e.push(Y[ve].typeId);for(let ve=0;ve<Y.length;ve++){let Ce=!1,Te=yield(0,N.GetTheConcept)(Y[ve].ofTheConceptId),xe=yield(0,N.GetTheConcept)(Y[ve].toTheConceptId);if(re.includes(Y[ve].id)&&(Ce=!0),Ce==1&&Te.id!=0&&xe.id!=0){let fe,Ne=yield(0,N.GetTheConcept)(Y[ve].typeId),Re=(de=(ae=xe.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&de!==void 0?de:"self";Y[ve].toTheConceptId in J?(fe=J[Y[ve].toTheConceptId],Re in fe||(fe[Re]={})):(fe={},fe[Re]={},J[Y[ve].toTheConceptId]=fe);try{let Le=(we=(ce=Te?.type)===null||ce===void 0?void 0:ce.characterValue)!==null&&we!==void 0?we:"none",Ee=Te.characterValue,Be=Ne.characterValue;Be==""&&(Be=Le,Be=n(Be));let Ge={id:Te.id,data:{[Le]:Ee}},$e=Be+"_reverse";$e.includes("_s_")||(typeof fe[Re]=="string"&&(fe[Re]={}),fe[Re][$e]=Ge)}catch(Le){console.log("this is error",Le)}}if(Te.id!=0&&xe.id!=0){let fe,Ne=yield(0,N.GetTheConcept)(Y[ve].typeId),Re=(me=(Ie=Te.type)===null||Ie===void 0?void 0:Ie.characterValue)!==null&&me!==void 0?me:"self";Y[ve].ofTheConceptId in J?(fe=J[Y[ve].ofTheConceptId],Re in fe||(fe[Re]={})):(fe={},fe[Re]={},J[Y[ve].ofTheConceptId]=fe);try{let Le=(be=(ke=xe?.type)===null||ke===void 0?void 0:ke.characterValue)!==null&&be!==void 0?be:"none",Ee=xe.characterValue,Be=Ne.characterValue,Ge=!1;Be==""&&(Be=Le,Be=n(Be),Ge=!0);let $e={id:xe.id,data:{[Le]:Ee}};isNaN(Number(Be))?Be.includes("_s_")||(typeof fe[Re]=="string"&&(fe[Re]={}),fe[Re][Be]=$e):(Array.isArray(fe[Re])||(fe[Re]=[]),fe[Re].push($e))}catch(Le){console.log("this is error",Le)}}}return N.Logger.logUpdate(ge),J})}(se,ie,z),yield function(te,X,ne,Y){var J=arguments;return d(this,arguments,void 0,function*(re,ae,de,ce,we=[],Ie){var me,ke,be,ge,_e,ve;const Ce=N.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",J);let Te=[],xe=[];for(let fe=0;fe<re.length;fe++)xe.push(re[fe].toTheConceptId),xe.push(re[fe].ofTheConceptId),xe.push(re[fe].typeId);for(let fe=0;fe<re.length;fe++){let Ne=!1,Re=yield(0,N.GetTheConcept)(re[fe].ofTheConceptId),Le=yield(0,N.GetTheConcept)(re[fe].toTheConceptId);if(we.includes(re[fe].id)&&(Ne=!0),Ne==1&&Re.id!=0&&Le.id!=0&&Le.id in ae){let Ee,Be=yield(0,N.GetTheConcept)(re[fe].typeId),Ge=(ke=(me=Le.type)===null||me===void 0?void 0:me.characterValue)!==null&&ke!==void 0?ke:"self";re[fe].toTheConceptId in ae,re[fe].toTheConceptId in ae?(Ee=ae[re[fe].toTheConceptId],typeof Ee[Ge]=="string"&&(Ee[Ge]={})):(Ee={},Ee[Ge]={},ae[re[fe].toTheConceptId]=Ee),o(Le.id,Ie,Ee);try{if(ae[re[fe].ofTheConceptId]){let $e={id:Re.id,data:ae[re[fe].ofTheConceptId],created_on:re[fe].entryTimeStamp},He=Be.characterValue+"_reverse";Array.isArray(Ee[Ge][He])?Ee[Ge][He].push($e):He.includes("_s_")?(Ee[Ge][He]=[],Ee[Ge][He].push($e)):Ee[Ge][He]=$e}}catch($e){console.log("this is error",$e)}}if(Re.id!=0&&Le.id!=0&&Re.id in ae){let Ee,Be=yield(0,N.GetTheConcept)(re[fe].typeId),Ge=(ge=(be=Re.type)===null||be===void 0?void 0:be.characterValue)!==null&&ge!==void 0?ge:"self";re[fe].toTheConceptId in ae,re[fe].ofTheConceptId in ae?(Ee=ae[re[fe].ofTheConceptId],typeof Ee[Ge]=="string"&&(Ee[Ge]={})):(Ee={},Ee[Ge]={},ae[re[fe].ofTheConceptId]=Ee),o(Re.id,Ie,Ee);let $e=Be.characterValue;$e==""&&($e=Le.characterValue),$e==""&&($e=((_e=Le?.type)===null||_e===void 0?void 0:_e.characterValue)||"");try{(ve=Le?.type)===null||ve===void 0||ve.characterValue;let He=ae[re[fe].toTheConceptId];if(He){let Vt={id:Le.id,data:ae[re[fe].toTheConceptId],created_on:re[fe].entryTimeStamp};Array.isArray(Ee[Ge])?Ee[Ge].push(He):Array.isArray(Ee[Ge][$e])?Ee[Ge][Be.characterValue].push(Vt):$e.includes("_s_")?(Ee[Ge][$e]=[],Ee[Ge][$e].push(Vt)):Ee[Ge][$e]=Vt,o(Le.id,Ie,Vt)}}catch(He){console.log("this is error",He)}}}for(let fe=0;fe<ce.length;fe++){let Ne={};Ne.id=ce[fe];let Re=yield(0,N.GetTheConcept)(Ne.id);Ne.data=ae[ce[fe]],Ne.created_on=Re.entryTimeStamp,Te.push(Ne)}return N.Logger.logUpdate(Ce),Te})}(se,ie,[],j,z,$)})}function E(L,B,D,W,U){return r(this,arguments,void 0,function*(P,M,j,z,K,ee="DESC"){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnectionsV2",{linkers:P,conceptIds:M,mainCompositionIds:j,reverse:z,countInfos:K,order:ee})).data}catch(te){console.error("formatConnectionsV2 error sw: ",te),(0,N.handleServiceWorkerException)(te)}let se=yield(0,b.QL)(P),$=yield(0,f.V)(K);se=(0,v.X)(se,ee);let ie={};return ie=yield function(te){var X=arguments;return S(this,arguments,void 0,function*(ne,Y={},J=[]){var re,ae,de,ce,we;const Ie=N.Logger.logfunction("FormatFunctionDataV2",X);for(const me of ne){const ke=J.includes(me.id),be=yield(0,N.GetTheConcept)(me.ofTheConceptId),ge=yield(0,N.GetTheConcept)(me.toTheConceptId),_e=yield(0,N.GetTheConcept)(me.typeId);if(be.id===0||ge.id===0)continue;const ve=ke?ge:be,Ce=ke?be:ge,Te=(ae=(re=ve.type)===null||re===void 0?void 0:re.characterValue)!==null&&ae!==void 0?ae:"self",xe=(ce=(de=Ce.type)===null||de===void 0?void 0:de.characterValue)!==null&&ce!==void 0?ce:"none",fe=Ce.characterValue;(we=_e.characterValue)===null||we===void 0||we.includes("_s_"),Y[ve.id]||(Y[ve.id]={}),Y[ve.id][Te]||(Y[ve.id][Te]={}),Y[Ce.id]||(Y[Ce.id]={}),Y[Ce.id][xe]=fe}return N.Logger.logUpdate(Ie),Y})}(se,ie,z),ie=yield function(te){var X=arguments;return S(this,arguments,void 0,function*(ne,Y={},J=[]){var re,ae,de,ce,we;const Ie=N.Logger.logfunction("FormatFunctionDataForDataV2",X);for(const me of ne){const ke=J.includes(me.id),be=yield(0,N.GetTheConcept)(me.ofTheConceptId),ge=yield(0,N.GetTheConcept)(me.toTheConceptId),_e=yield(0,N.GetTheConcept)(me.typeId);if(be.id===0||ge.id===0)continue;const ve=ke?ge:be,Ce=ke?be:ge,Te=(ae=(re=ve.type)===null||re===void 0?void 0:re.characterValue)!==null&&ae!==void 0?ae:"self",xe=(ce=(de=Ce.type)===null||de===void 0?void 0:de.characterValue)!==null&&ce!==void 0?ce:"none",fe=Ce.characterValue,Ne=(we=_e.characterValue)!==null&&we!==void 0?we:"";let Re=Ne===""?n(xe):Ne;const Le=Re.includes("_s_"),Ee=!isNaN(Number(Re)),Be={id:Ce.id,data:{[xe]:fe}};Y[ve.id]||(Y[ve.id]={}),Te in Y[ve.id]&&typeof Y[ve.id][Te]!="string"||(Y[ve.id][Te]=Ee?[]:{});try{if(Le)continue;Ee?Y[ve.id][Te].push(Be):Y[ve.id][Te][ke?`${Re}_reverse`:Re]=Be}catch(Ge){console.error("Error formatting concept data:",Ge)}}return N.Logger.logUpdate(Ie),Y})}(se,ie,z),yield function(te,X,ne){var Y=arguments;return S(this,arguments,void 0,function*(J,re,ae,de=[],ce){var we,Ie,me;const ke=N.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",Y),be=[];for(const ge of J){const _e=de.includes(ge.id),ve=yield(0,N.GetTheConcept)(ge.ofTheConceptId),Ce=yield(0,N.GetTheConcept)(ge.toTheConceptId),Te=yield(0,N.GetTheConcept)(ge.typeId);if(ve.id===0||Ce.id===0)continue;const xe=_e?Ce:ve,fe=_e?ve:Ce,Ne=xe.id,Re=fe.id,Le=(Ie=(we=xe.type)===null||we===void 0?void 0:we.characterValue)!==null&&Ie!==void 0?Ie:"self",Ee=Te.characterValue+"_reverse",Be=Te.characterValue||fe.characterValue||((me=fe.type)===null||me===void 0?void 0:me.characterValue)||"";if(re[Ne]){const Ge=re[Ne][Le],$e=re[Re],He={id:fe.id,data:$e,created_on:ge.entryTimeStamp};o(Ne,ce,re[Ne]);try{_e?Array.isArray(Ge[Ee])?Ge[Ee].push(He):Ge[Ee]=[He]:Array.isArray(Ge)?Ge.push($e):Array.isArray(Ge[Be])?Ge[Be].push(He):Be.includes("_s_")?(Ge[Be]=[],Ge[Be].push(He)):Ge[Be]=[He],o(Re,ce,He)}catch(Vt){console.error("Error processing connection:",Vt)}}else console.log("This is the error in the source")}for(const ge of ae){const _e=yield(0,N.GetTheConcept)(ge);be.push({id:ge,data:re[ge],created_on:_e.entryTimeStamp})}return N.Logger.logUpdate(ke),be})}(se,ie,j,z,$)})}},1412:(Q,O,y)=>{function N(b=[],n=[]){}y.d(O,{e:()=>N})},1534:(Q,O,y)=>{let N=y(7793),b=y(1752);class n extends N{get selectors(){return b.comma(this.selector)}set selectors(T){let w=this.selector?this.selector.match(/,\s*/):null,i=w?w[0]:","+this.raw("between","beforeOpen");this.selector=T.join(i)}constructor(T){super(T),this.type="rule",this.nodes||(this.nodes=[])}}Q.exports=n,n.default=n,N.registerRule(n)},1557:(Q,O)=>{O.__esModule=!0,O.default=function(y){for(var N=arguments.length,b=new Array(N>1?N-1:0),n=1;n<N;n++)b[n-1]=arguments[n];for(;b.length>0;){var u=b.shift();y[u]||(y[u]={}),y=y[u]}},Q.exports=O.default},1581:(Q,O)=>{O.__esModule=!0,O.UNIVERSAL=O.TAG=O.STRING=O.SELECTOR=O.ROOT=O.PSEUDO=O.NESTING=O.ID=O.COMMENT=O.COMBINATOR=O.CLASS=O.ATTRIBUTE=void 0,O.TAG="tag",O.STRING="string",O.SELECTOR="selector",O.ROOT="root",O.PSEUDO="pseudo",O.NESTING="nesting",O.ID="id",O.COMMENT="comment",O.COMBINATOR="combinator",O.CLASS="class",O.ATTRIBUTE="attribute",O.UNIVERSAL="universal"},1596:(Q,O,y)=>{y.d(O,{g:()=>u});var N=y(1245),b=y(3278),n=function(T,w,i,e){return new(i||(i=Promise))(function(o,d){function f(r){try{S(e.next(r))}catch(a){d(a)}}function v(r){try{S(e.throw(r))}catch(a){d(a)}}function S(r){var a;r.done?o(r.value):(a=r.value,a instanceof i?a:new i(function(t){t(a)})).then(f,v)}S((e=e.apply(T,[])).next())})};function u(T,w){return n(this,void 0,void 0,function*(){if(typeof self<"u"&&typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)throw new Error("Cannot switch server from service worker");try{(function(){const i=N.BaseUrl.NODE_CACHE_URL;if(i===N.BaseUrl.BASE_URL)throw new Error("Base Server Down");let e=sessionStorage.getItem("cacheServers");e=JSON.parse(e);const o=e.indexOf(i);if(N.BaseUrl.isNearestCache=!1,e.includes(i)&&o!==-1&&e.splice(o,1),sessionStorage.setItem("cacheServers",JSON.stringify(e)),e.length){const d=e[0];N.BaseUrl.NODE_CACHE_URL=d}else N.BaseUrl.NODE_CACHE_URL=N.BaseUrl.BASE_URL;console.log("before the payload",b.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&(0,N.sendMessage)("SESSION_DATA",{type:"SESSION_DATA",data:N.BaseUrl.NODE_CACHE_URL,session:b.b.sessionId})})();try{return yield fetch(`${N.BaseUrl.NODE_CACHE_URL}${w}`,T)}catch{return yield u(T,w)}}catch(i){throw i}})}},1666:(Q,O,y)=>{y.d(O,{q:()=>u});var N=y(2155),b=y(442),n=y(1863);function u(T,w,i,e){var o=w,d=new N.N(0,T,i,o,e,1,4);if(T==i)return d.ofTheConceptId=0,d.toTheConceptId=1,d;try{d.isTemp=!0,d.id=Math.floor(1e8*Math.random()),b.Y.AddConnection(d)}catch(f){(0,n.Mb)(f)}return d}},1669:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(3295))&&N.__esModule?N:{default:N},n=y(1581);function u(w,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,i)}var T=function(w){var i,e;function o(d){var f;return(f=w.call(this,d)||this).type=n.UNIVERSAL,f.value="*",f}return e=w,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,u(i,e),o}(b.default);O.default=T,Q.exports=O.default},1704:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,i)}var T=function(w){var i,e;function o(d){var f;return(f=w.call(this,d)||this).type=n.COMBINATOR,f}return e=w,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,u(i,e),o}(b.default);O.default=T,Q.exports=O.default},1735:(Q,O,y)=>{y.d(O,{J:()=>T});var N,b=y(1245),n=y(3278),u=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,[])).next())})};class T{static incrementConcept(i){try{i&&(this.conceptsData[i]=(this.conceptsData[i]||0)+1)}catch{console.error("Failed on increment concept")}}static incrementConnection(i){try{i&&(this.connectionsData[i]=(this.connectionsData[i]||0)+1)}catch{console.error("Failed on increment connection")}}static getTopConcepts(i){return Object.entries(this.conceptsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,i)}static getTopConnections(i){return Object.entries(this.connectionsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,i)}static saveDataToLocalStorage(){const i={concepts:this.conceptsData,connections:this.connectionsData};localStorage?.setItem(this.accessData,JSON.stringify(i))}static loadDataFromLocalStorage(){const i=localStorage==null?void 0:localStorage.getItem(this.accessData);if(i){const e=JSON.parse(i);this.conceptsData=e.concepts||{},this.connectionsData=e.connections||{}}}static sendToServer(){return u(this,void 0,void 0,function*(){try{yield this.syncToServer()}catch{console.error("Failed to process Access Tracker Sync with Server")}})}static syncToServer(){return u(this,void 0,void 0,function*(){try{if(!Object.keys(this.conceptsData).length&&!Object.keys(this.connectionsData).length)return;const i=n.b.BearerAccessToken;if(!i)return;const e=this.conceptsData&&Object.keys(this.conceptsData).length>0?this.conceptsData:{},o=this.connectionsData&&Object.keys(this.connectionsData).length>0?this.connectionsData:{},d=yield fetch(b.BaseUrl.PostPrefetchConceptConnections(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({concepts:e,connections:o})});if(!d.ok)throw new Error("Failed to sync data to the server.");yield d.json(),this.conceptsData={},this.connectionsData={},this.setNextSyncTime()}catch(i){console.error("Sync error:",i)}})}static setNextSyncTime(){this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS}static startAutoSync(){setInterval(()=>{const i=Date.now();this.nextSyncTime&&i>=this.nextSyncTime&&this.syncNow().catch(console.error)},6e4)}static syncNow(){return u(this,void 0,void 0,function*(){try{this.activateStatus?yield this.syncToServer():console.warn("Access Tracker inactive.")}catch{console.error("Error on sync access tracker")}})}static GetSuggestedConcepts(i){return u(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(b.BaseUrl.GetSuggestedConcepts());i!==void 0&&o.searchParams.append("top",i.toString());const d=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!d.ok){const v=yield d.text();throw new Error(`Failed to load concepts: ${d.status} ${d.statusText}. Details: ${v}`)}const f=(yield d.json())||[];return yield this.addConceptToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested concepts:",e.message),new Error("Unable to fetch suggested concepts. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested concepts."))}})}static GetSuggestedConnections(i){return u(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(b.BaseUrl.GetSuggestedConnections());i!==void 0&&o.searchParams.append("top",i.toString());const d=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!d.ok){const v=yield d.text();throw new Error(`Failed to load connections: ${d.status} ${d.statusText}. Details: ${v}`)}const f=(yield d.json())||[];return yield this.addConnectionToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested Connections:",e.message),new Error("Unable to fetch suggested connections. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested Connections."))}})}static addConceptToBinaryTree(i){return u(this,void 0,void 0,function*(){try{i.forEach(e=>{b.ConceptsData.AddConcept(e)})}catch{console.error("Error on adding Concepts Data into tree")}})}static addConnectionToBinaryTree(i){return u(this,void 0,void 0,function*(){try{i.forEach(e=>{b.ConnectionData.AddConnection(e)})}catch{console.error("Error on adding Connections Data into tree")}})}}N=T,T.conceptsData={},T.connectionsData={},T.SYNC_INTERVAL_MS=12e4,T.nextSyncTime=Date.now(),T.activateStatus=!1,T.accessData="Access Data",N.startAutoSync()},1752:Q=>{let O={comma:y=>O.split(y,[","],!0),space:y=>O.split(y,[" ",`
`,"	"]),split(y,N,b){let n=[],u="",T=!1,w=0,i=!1,e="",o=!1;for(let d of y)o?o=!1:d==="\\"?o=!0:i?d===e&&(i=!1):d==='"'||d==="'"?(i=!0,e=d):d==="("?w+=1:d===")"?w>0&&(w-=1):w===0&&N.includes(d)&&(T=!0),T?(u!==""&&n.push(u.trim()),u="",T=!1):u+=d;return(b||u!=="")&&n.push(u.trim()),n}};Q.exports=O,O.default=O},1863:(Q,O,y)=>{y.d(O,{ER:()=>u,Mb:()=>T,ey:()=>w,ry:()=>n});var N=y(1245),b=y(7273);function n(i){if(N.Logger.log("ERROR",i.statusText,{code:i.status,data:i.statusText}),i.status==401||i.status==406){let e=new b.z(i.statusText,!1,i.status,"");throw e.setUrl(i.url),e}if(i.status==500){let e=new b.z(i.statusText,!1,i.status,"");throw e.setUrl(i.url),e}}function u(i,e={}){if(N.Logger.log("ERROR",e.statusText,{code:i.status,data:i.status}),i.status==401||i.status==406){let o=new b.z(e.statusText,!1,i.status,"");throw o.setUrl(i.url),o}if(i.status==500){let o=new b.z(e.statusText,!1,i.status,"");throw o.setUrl(i.url),o}}function T(i,e=""){if(N.Logger.log("ERROR",i.message,{code:i.status,data:i.stack}),i.status){let o=new b.z(i.message,!1,i.status,i.stack);throw o.setUrl(e),o}{let o=new b.z(i.message,!1,500,i.stack);throw o.setUrl(e),o}}function w(i,e,o){var d;try{if(!i)return void console.error(`Error in ${e}: logData is undefined`);const f=Date.now();i.startTime=(d=i.startTime)!==null&&d!==void 0?d:f,i.responseTime=f-i.startTime+" ms",i.level="ERROR",i.errorMessage=o?.message||"Unknown error occurred",console.error(`Error in function ${e}:`,o)}catch(f){console.error("Failed to handle package function error:",f)}}},1866:()=>{},2013:(Q,O,y)=>{y.d(O,{A:()=>w,w:()=>i});var N=y(8146),b=y(1245),n=y(3026),u=y(1863),T=function(e,o,d,f){return new(d||(d=Promise))(function(v,S){function r(c){try{t(f.next(c))}catch(C){S(C)}}function a(c){try{t(f.throw(c))}catch(C){S(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof d?C:new d(function(m){m(C)})).then(r,a)}t((f=f.apply(e,[])).next())})};function w(e){var o=arguments;return T(this,void 0,void 0,function*(){const d=b.Logger.logfunction("GetConceptByCharacter",o)||{};if(b.serviceWorker){d.serviceWorker=!0;try{const S=yield(0,b.sendMessage)("GetConceptByCharacter",{characterValue:e});return b.Logger.logUpdate(d),S.data}catch(S){console.error("GetConceptByCharacter sw error: ",S),(0,u.ey)(d,"GetConceptByCharacter",S),(0,b.handleServiceWorkerException)(S)}}let f=yield n.I.GetConceptByCharacter(e),v=`${e}`;return f!=null&&f?.id!=0||!v||(yield(0,N.Y)(e),f=yield n.I.GetConceptByCharacterAndTypeLocal(e,51),f.id==0&&(f=yield n.I.GetConceptByCharacter(e))),b.Logger.logUpdate(d),f})}function i(e){var o=arguments;return T(this,void 0,void 0,function*(){const d=b.Logger.logfunction("GetConceptByCharacterUpdated",o)||{};if(b.serviceWorker){d.serviceWorker=!0;try{const S=yield(0,b.sendMessage)("GetConceptByCharacterUpdated",{characterValue:e});return b.Logger.logUpdate(d),S.data}catch(S){console.error("GetConceptByCharacterUpdated error sw: ",S),(0,u.ey)(d,"GetConceptByCharacterUpdated",S),(0,b.handleServiceWorkerException)(S)}}let f=yield n.I.GetConceptByCharacter(e),v=`${e}`;return f!=null&&f?.id!=0||!v||(yield(0,N.Y)(e),f=yield n.I.GetConceptByCharacter(e)),b.Logger.logUpdate(d),f})}},2110:(Q,O,y)=>{const{AtRule:N,Rule:b}=y(2895);let n=y(7149);function u(r,a){let t;try{n(c=>{t=c}).processSync(r)}catch(c){throw r.includes(":")?a?a.error("Missed semicolon"):c:a?a.error(c.message):c}return t.at(0)}function T(r,a){let t=!1;return r.each(c=>{if(c.type==="nesting"){let C=a.clone({});c.value!=="&"?c.replaceWith(u(c.value.replace("&",C.toString()))):c.replaceWith(C),t=!0}else"nodes"in c&&c.nodes&&T(c,a)&&(t=!0)}),t}function w(r,a){let t=[];for(let c of r.selectors){let C=u(c,r);for(let m of a.selectors){if(!m)continue;let I=u(m,a);T(I,C)||(I.prepend(n.combinator({value:" "})),I.prepend(C.clone({}))),t.push(I.toString())}}return t}function i(r,a){if(r.prev()?.type!=="comment")return a.after(r),r;let t=r.prev();return r.parent.toString().match(/[*]\/ *\n.*{/)?a.after(r).after(t):a.after(r),r}function e(r,a,t,c=!0){return a.length?(t=function(C,m,I){let E=new b({nodes:[],selector:C});return E.append(m),I.after(E),E}(r,a,t),c&&(a=[]),[t,a]):[t,a]}function o(r,a=""){let t=r.concat(a),c={};for(let C of t)c[C.replace(/^@/,"")]=!0;return c}function d(r){let a=r[v];if(a){let t,c,C,m,I=r.nodes,E=-1,L=function(B){let D=[],W=B.parent;for(;W&&W instanceof N;)D.push(W),W=W.parent;return D}(r);if(L.forEach((B,D)=>{if(a(B.name))t=B,E=D,C=m;else{let W=m;m=B.clone({nodes:[]}),W&&m.append(W),c=c||m}}),t?C?(c.append(I),t.after(C)):t.after(I):r.after(I),r.next()&&t){let B;L.slice(0,E+1).forEach((D,W,U)=>{let P=B;B=D.clone({nodes:[]}),P&&B.append(P);let M=[],j=(U[W-1]||r).next();for(;j;)M.push(j),j=j.next();B.append(M)}),B&&(C||I[I.length-1]).after(B)}}else r.after(r.nodes);r.remove()}const f=Symbol("rootRuleMergeSel"),v=Symbol("rootRuleEscapes"),S=Symbol("hasRootRule");Q.exports=(r={})=>{let a=o(["media","supports","layer","container","starting-style"],r.bubble),t=function(I){return function E(L,B,D,W=D){let U=[];if(B.each(P=>{P.type==="rule"&&D?W&&(P.selectors=w(L,P)):P.type==="atrule"&&P.nodes?I[P.name]?E(L,P,W):B[f]!==!1&&U.push(P):U.push(P)}),D&&U.length){let P=L.clone({nodes:[]});for(let M of U)P.append(M);B.prepend(P)}}}(a),c=o(["document","font-face","keyframes","-webkit-keyframes","-moz-keyframes"],r.unwrap),C=(r.rootRuleName||"at-root").replace(/^@/,""),m=r.preserveEmpty;return{Once(I){I.walkAtRules(C,E=>{(function(L){let{params:B}=L,{escapes:D,selector:W,type:U}=function(P){let M=(P=P.trim()).match(/^\((.*)\)$/);if(!M)return{selector:P,type:"basic"};let j=M[1].match(/^(with(?:out)?):(.+)$/);if(j){let z=j[1]==="with",K=Object.fromEntries(j[2].trim().split(/\s+/).map(se=>[se,!0]));if(z&&K.all)return{type:"noop"};let ee=se=>!!K[se];return K.all?ee=()=>!0:z&&(ee=se=>se!=="all"&&!K[se]),{escapes:ee,type:"withrules"}}return{type:"unknown"}}(B);if(U==="unknown")throw L.error(`Unknown @${L.name} parameter ${JSON.stringify(B)}`);if(U==="basic"&&W){let P=new b({nodes:L.nodes,selector:W});L.removeAll(),L.append(P)}L[v]=D,L[f]=D?!D("all"):U==="noop"})(E),I[S]=!0})},postcssPlugin:"postcss-nested",RootExit(I){I[S]&&(I.walkAtRules(C,d),I[S]=!1)},Rule(I){let E=!1,L=I,B=!1,D=[];I.each(W=>{switch(W.type){case"atrule":[L,D]=e(I.selector,D,L),W.name===C?(E=!0,t(I,W,!0,W[f]),L=i(W,L)):a[W.name]?(B=!0,E=!0,t(I,W,!0),L=i(W,L)):c[W.name]?(B=!0,E=!0,t(I,W,!1),L=i(W,L)):B&&D.push(W);break;case"decl":B&&D.push(W);break;case"rule":[L,D]=e(I.selector,D,L),B=!0,E=!0,W.selectors=w(I,W),L=i(W,L)}}),e(I.selector,D,L,!1),E&&m!==!0&&(I.raws.semicolon=!0,I.nodes.length===0&&I.remove())}}},Q.exports.postcss=!0},2155:(Q,O,y)=>{y.d(O,{N:()=>n});var N=y(7282),b=y(9581);class n{constructor(T=0,w,i,e,o,d,f){this.count=0,this.isTemp=!1,this.toUpdate=!1,this.applicationId=b.B.getRandomizer(),this.type=(0,N.o)(),this.ofConcept=(0,N.o)(),this.toConcept=(0,N.o)(),this.id=T,this.ofTheConceptId=w,this.toTheConceptId=i,this.userId=e,this.typeId=o,this.ghostId=T,this.orderId=d,this.accessId=f,this.entryTimeStamp=(0,N.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date,this.typeCharacter=""}}},2202:(Q,O,y)=>{y.d(O,{W:()=>w});var N=y(6963),b=y(6731),n=y(205),u=y(1245),T=function(i,e,o,d){return new(o||(o=Promise))(function(f,v){function S(t){try{a(d.next(t))}catch(c){v(c)}}function r(t){try{a(d.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(S,r)}a((d=d.apply(i,[])).next())})};class w{static addNodeToTree(e){if(this.root==null)return this.root=e,this.root;this.root=this.root.addNode(e,this.root,this.root.height)}static waitForDataToLoad(){return T(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isDataLoaded)return e("done");setTimeout(w.checkFlag,1e3,e)}static addConceptToTree(e){let o=new b.b(e.id,e,null,null),d=new b.b(e.characterValue,e,null,null);N.f.addNodeToTree(d),this.addNodeToTree(o)}static getNodeFromTree(e){return T(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(e,this.root):null})}static removeNodeFromTree(e){return T(this,void 0,void 0,function*(){if(this.root){let o=new Event(`${e}`);console.log("this is the fired event after delete",o),(0,u.dispatchIdEvent)(e),this.root=this.root.removeNode(this.root,e)}})}static getConceptListFromIds(e,o,d){return T(this,void 0,void 0,function*(){this.root&&this.root.checkIfIdsInNode(this.root,e,o,d)})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}w.root=null},2212:(Q,O,y)=>{y.d(O,{Ay:()=>i,N:()=>e});var N=y(1167),b=y(2615),n=y(5976),u=y(442),T=y(1245),w=function(o,d,f,v){return new(f||(f=Promise))(function(S,r){function a(C){try{c(v.next(C))}catch(m){r(m)}}function t(C){try{c(v.throw(C))}catch(m){r(m)}}function c(C){var m;C.done?S(C.value):(m=C.value,m instanceof f?m:new f(function(I){I(m)})).then(a,t)}c((v=v.apply(o,[])).next())})};function i(o,d,f,v,S,r,a){return w(this,void 0,void 0,function*(){let t=yield n.B.getId(),c=new Date,C=new Date,m=new b.j(t,d,v,f,S,o,r,!0,c,C,a);return m.isTemp=!1,u.Y.AddConcept(m),m})}function e(o,d,f,v,S,r,a){return w(this,void 0,void 0,function*(){let t=yield n.B.getId(),c=new Date,C=new Date,m=new b.j(t,d,v,f,S,o,r,!1,c,C,a);return T.ConceptsData.AddConcept(m),(0,N.Y)([m]),m})}},2289:(Q,O,y)=>{y.d(O,{$S:()=>e,L0:()=>o,WC:()=>d});var N=y(8675),b=y(6058),n=y(1245),u=y(1863);y(3518);var T=y(843),w=y(4818),i=function(f,v,S,r){return new(S||(S=Promise))(function(a,t){function c(I){try{m(r.next(I))}catch(E){t(E)}}function C(I){try{m(r.throw(I))}catch(E){t(E)}}function m(I){var E;I.done?a(I.value):(E=I.value,E instanceof S?E:new S(function(L){L(E)})).then(c,C)}m((r=r.apply(f,v||[])).next())})};function e(f,v){var S=arguments;return i(this,void 0,void 0,function*(){const r=n.Logger.logfunction("DeleteConnectionByType",S)||{};if(n.serviceWorker){r.serviceWorker=!0;try{const I=yield(0,n.sendMessage)("DeleteConnectionByType",{id:f,linker:v});return n.Logger.logUpdate(r),I.data}catch(I){console.error("DeleteConnectionByType sw error: ",I),(0,u.ey)(r,"DeleteConnectionByType",I),(0,n.handleServiceWorkerException)(I)}}let a=yield(0,N.l)(f);for(let I=0;I<a.length;I++)n.ConnectionData.AddConnection(a[I]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=yield(0,n.GetConceptByCharacter)(v),C=[];for(let I=0;I<t.length;I++)t[I].typeId==c.id&&C.push(t[I]);let m=!1;for(let I=0;I<C.length;I++)m=yield(0,n.DeleteConnectionById)(C[I].id);return n.Logger.logUpdate(r),m})}function o(f,v){var S=arguments;return i(this,void 0,void 0,function*(){const r=n.Logger.logfunction("DeleteConnectionByTypeBulk",S)||{};if(n.serviceWorker){r.serviceWorker=!0;try{const m=yield(0,n.sendMessage)("DeleteConnectionByTypeBulk",{id:f,linkers:v});return n.Logger.logUpdate(r),m.data}catch(m){console.error("DeleteConnectionByTypeBulk sw error: ",m),(0,u.ey)(r,"DeleteConnectionByTypeBulk",m),(0,n.handleServiceWorkerException)(m)}}let a=yield(0,N.l)(f);for(let m=0;m<a.length;m++)n.ConnectionData.AddConnection(a[m]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=[];c=yield(0,T.Hi)(v);let C=[];console.log("this is all the connections for deleting taken",t,c,v);for(let m=0;m<t.length;m++)for(let I=0;I<c.length;I++)t[m].typeId==c[I].id&&C.push(t[m].id);return console.log("these are the to delete",C),n.Logger.logUpdate(r),yield(0,w.E)(C)})}function d(f,v){return i(this,arguments,void 0,function*(S,r,a=!1){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetAllTheConnectionsByTypeAndOfTheConcept",{id:S,linker:r,reverse:a})).data}catch(c){console.error("GetAllTheConnectionsByTypeAndOfTheConcept sw error: ",c),(0,n.handleServiceWorkerException)(c)}let t=[];if(a){let c=yield(0,b.W)(S),C=yield(0,n.MakeTheTypeConceptApi)(r,999);for(let m=0;m<c.length;m++)c[m].typeId==C.id&&t.push(c[m])}else{let c=yield(0,N.l)(S);for(let I=0;I<c.length;I++)n.ConnectionData.AddConnection(c[I]);let C=yield n.ConnectionData.GetConnectionsOfConcept(S),m=yield(0,n.GetConceptByCharacter)(r);for(let I=0;I<C.length;I++)C[I].typeId==m.id&&t.push(C[I])}return t})}},2299:(Q,O,y)=>{y.d(O,{B:()=>N});class N{constructor(n){this.id=1,this.isOnlineSync=!1,this.isOnlineSync=n}}},2515:(Q,O,y)=>{y.d(O,{x:()=>N});class N{constructor(n,u,T,w){this.variants=[],this.height=1,this.key=n,this.value=u,this.leftNode=T,this.rightNode=w,this.currentNode=null}addCurrentNode(n,u){return u==null?u=n:(n.value.typeId!=u.value.typeId&&(u.currentNode=this.addCurrentNode(n,u.currentNode)),u)}addCurrentNodeType(n,u){if(u==null)return n;var T=!1;for(let w=0;w<u.variants.length;w++)u.variants[w].value.id==n.value.id&&(T=!0);return T||u.variants.push(n),u}addNode(n,u,T){if(u==null)return n;var w=u.leftNode,i=u.rightNode;if(u.key>n.key)u.leftNode=this.addNode(n,w,T);else{if(!(u.key<n.key))return u;u.rightNode=this.addNode(n,i,T)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}return u}addCharacterNode(n,u,T){if(n.value.characterValue!=""){if(u==null)return n;var w=u.leftNode,i=u.rightNode;if(u.key>n.key)u.leftNode=this.addCharacterNode(n,w,T);else{if(!(u.key<n.key))return u.key==n.key&&u.key!=""&&u.value.id!=n.value.id&&u.addCurrentNodeType(n,u),u;u.rightNode=this.addCharacterNode(n,i,T)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}}return u}addTypeNode(n,u,T){if(n.value.typeId!=0){if(u==null)return n;var w=u.leftNode,i=u.rightNode;if(u.key>n.key)u.leftNode=this.addTypeNode(n,w,T);else{if(!(u.key<n.key))return u.key==n.key&&u.key!=0&&u.value.id!=n.value.id&&u.addCurrentNodeType(n,u),u;u.rightNode=this.addTypeNode(n,i,T)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}}return u}rightRotate(n){if(n){let u=n.leftNode;if(u){let T=u.rightNode;return n.leftNode=T,u.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,u}}return n}leftRotate(n){if(n){let u=n.rightNode;if(u){let T=u.leftNode;return u.leftNode=n,n.rightNode=T,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(n.rightNode))+1,u}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return n==null?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getFromNode(n,u.leftNode):n>u.key?this.getFromNode(n,u.rightNode):u)}updateNodeSyncStatus(n,u,T){if(T){if(n==T.key){let w=T.value;return w.isSynced=u,T.value=w,T}return n<T.key?this.updateNodeSyncStatus(n,u,T.leftNode):n>T.key?this.updateNodeSyncStatus(n,u,T.rightNode):T}return T}getCharacterFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getCharacterFromNode(n,u.leftNode):n>u.key?this.getCharacterFromNode(n,u.rightNode):u)}getFromNodeWithCharacterAndType(n,u,T){if(n=`${n}`,T){if(n==T.key){if(n==T.value.characterValue&&u==T.value.typeId)return T;for(let w=0;w<T.variants.length;w++)if(T.variants[w].value.typeId==u)return T.variants[w]}else{if(n<T.key)return this.getFromNodeWithCharacterAndType(n,u,T.leftNode);if(n>T.key)return this.getFromNodeWithCharacterAndType(n,u,T.rightNode)}return null}return T}getFromNodeWithCharacterAndCategory(n,u,T){if(n=`${n}`,T){if(n==T.key){if(n==T.value.characterValue&&u==T.value.categoryId)return T;for(let w=0;w<T.variants.length;w++)if(T.variants[w].value.categoryId==u)return T.variants[w]}else{if(n<T.key)return this.getFromNodeWithCharacterAndCategory(n,u,T.leftNode);if(n>T.key)return this.getFromNodeWithCharacterAndCategory(n,u,T.rightNode)}return null}return T}removeNode(n,u){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNode(n.leftNode,u),n;if(n.key<u)return n.rightNode=this.removeNode(n.rightNode,u),n;if(n.leftNode==null){let w=n.rightNode;return n=null,w}if(n.rightNode==null){let w=n.leftNode;return n=null,w}var T=this.inOrderSuccessor(n.rightNode);return n.value=T.value,n.key=T.key,n.variants=T.variants,n.currentNode=T.currentNode,n.rightNode=this.removeNode(n.rightNode,T.key),n}removeNodeWithVariants(n,u,T){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNodeWithVariants(n.leftNode,u,T),n;if(n.key<u)return n.rightNode=this.removeNodeWithVariants(n.rightNode,u,T),n;if(n.variants.length>0){if(n.value.id==T){var w=n.variants[0];if(w)return n.value=w.value,n.key=w.key,n.currentNode=w.currentNode,n.variants.splice(0,1),n}else for(let e=0;e<n.variants.length;e++)if(T==n.variants[e].value.id)return n.variants.splice(e,1),n}if(n.leftNode==null){let e=n.rightNode;return n=null,e}if(n.rightNode==null){let e=n.leftNode;return n=null,e}var i=this.inOrderSuccessor(n.rightNode);return n.value=i.value,n.key=i.key,n.variants=i.variants,n.currentNode=i.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,i.key,T),n}countNodeBelow(n){return n==null?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;n.leftNode!=null;)n=n.leftNode;return n}}},2615:(Q,O,y)=>{y.d(O,{j:()=>b});var N=y(1245);class b{constructor(u,T,w,i,e,o,d,f=!1,v,S,r){this.count=0,this.typeCharacter="",this.referent=null,this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=N.BaseUrl.getRandomizer(),this.x=0,this.y=0,this.id=u,this.userId=T,this.typeId=w,this.ghostId=u,this.categoryId=i,this.referentId=e,this.characterValue=`${o}`,this.accessId=d,this.typeCharacter=r,this.type=null,this.isNew=f,this.entryTimeStamp=v,this.updatedTimeStamp=S}getType(){console.log(this.typeId)}}},2648:(Q,O,y)=>{O.__esModule=!0,O.FIELDS=void 0,O.default=function(f){var v,S,r,a,t,c,C,m,I,E,L,B,D=[],W=f.css.valueOf(),U=W.length,P=-1,M=1,j=0,z=0;function K(ee,se){if(!f.safe)throw f.error("Unclosed "+ee,M,j-P,j);m=(W+=se).length-1}for(;j<U;){switch((v=W.charCodeAt(j))===n.newline&&(P=j,M+=1),v){case n.space:case n.tab:case n.newline:case n.cr:case n.feed:m=j;do m+=1,(v=W.charCodeAt(m))===n.newline&&(P=m,M+=1);while(v===n.space||v===n.newline||v===n.tab||v===n.cr||v===n.feed);B=n.space,r=M,S=m-P-1,z=m;break;case n.plus:case n.greaterThan:case n.tilde:case n.pipe:m=j;do m+=1,v=W.charCodeAt(m);while(v===n.plus||v===n.greaterThan||v===n.tilde||v===n.pipe);B=n.combinator,r=M,S=j-P,z=m;break;case n.asterisk:case n.ampersand:case n.bang:case n.comma:case n.equals:case n.dollar:case n.caret:case n.openSquare:case n.closeSquare:case n.colon:case n.semicolon:case n.openParenthesis:case n.closeParenthesis:B=v,r=M,S=j-P,z=(m=j)+1;break;case n.singleQuote:case n.doubleQuote:L=v===n.singleQuote?"'":'"',m=j;do for(a=!1,(m=W.indexOf(L,m+1))===-1&&K("quote",L),t=m;W.charCodeAt(t-1)===n.backslash;)t-=1,a=!a;while(a);B=n.str,r=M,S=j-P,z=m+1;break;default:v===n.slash&&W.charCodeAt(j+1)===n.asterisk?((m=W.indexOf("*/",j+2)+1)===0&&K("comment","*/"),(c=(C=W.slice(j,m+1).split(`
`)).length-1)>0?(I=M+c,E=m-C[c].length):(I=M,E=P),B=n.comment,M=I,r=I,S=m-E):v===n.slash?(B=v,r=M,S=j-P,z=(m=j)+1):(m=o(W,j),B=n.word,r=M,S=m-P),z=m+1}D.push([B,M,j-P,r,S,j,z]),E&&(P=E,E=null),j=z}return D};var N,b,n=function(f,v){if(f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var S=u(v);if(S&&S.has(f))return S.get(f);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in f)if(t!=="default"&&Object.prototype.hasOwnProperty.call(f,t)){var c=a?Object.getOwnPropertyDescriptor(f,t):null;c&&(c.get||c.set)?Object.defineProperty(r,t,c):r[t]=f[t]}return r.default=f,S&&S.set(f,r),r}(y(71));function u(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,S=new WeakMap;return(u=function(r){return r?S:v})(f)}for(var T=((N={})[n.tab]=!0,N[n.newline]=!0,N[n.cr]=!0,N[n.feed]=!0,N),w=((b={})[n.space]=!0,b[n.tab]=!0,b[n.newline]=!0,b[n.cr]=!0,b[n.feed]=!0,b[n.ampersand]=!0,b[n.asterisk]=!0,b[n.bang]=!0,b[n.comma]=!0,b[n.colon]=!0,b[n.semicolon]=!0,b[n.openParenthesis]=!0,b[n.closeParenthesis]=!0,b[n.openSquare]=!0,b[n.closeSquare]=!0,b[n.singleQuote]=!0,b[n.doubleQuote]=!0,b[n.plus]=!0,b[n.pipe]=!0,b[n.tilde]=!0,b[n.greaterThan]=!0,b[n.equals]=!0,b[n.dollar]=!0,b[n.caret]=!0,b[n.slash]=!0,b),i={},e=0;e<22;e++)i["0123456789abcdefABCDEF".charCodeAt(e)]=!0;function o(f,v){var S,r=v;do{if(S=f.charCodeAt(r),w[S])return r-1;S===n.backslash?r=d(f,r)+1:r++}while(r<f.length);return r-1}function d(f,v){var S=v,r=f.charCodeAt(S+1);if(!T[r])if(i[r]){var a=0;do S++,a++,r=f.charCodeAt(S+1);while(i[r]&&a<6);a<6&&r===n.space&&S++}else S++;return S}O.FIELDS={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6}},2739:()=>{},2803:(Q,O,y)=>{y.d(O,{x:()=>w});var N=y(8286),b=y(9581),n=y(1863),u=y(1245),T=function(i,e,o,d){return new(o||(o=Promise))(function(f,v){function S(t){try{a(d.next(t))}catch(c){v(c)}}function r(t){try{a(d.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(S,r)}a((d=d.apply(i,[])).next())})};function w(i,e,o){var d=arguments;return T(this,void 0,void 0,function*(){const f=u.Logger.logfunction("GetCompositionConnectionsBetweenTwoConcepts",d)||{};var v=[];try{if(u.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,u.sendMessage)("GetCompositionConnectionsBetweenTwoConcepts",{ofConceptId:i,toConcept:e,mainKey:o});return u.Logger.logUpdate(f),t.data}catch(t){console.error("GetCompositionConnectionsBetweenTwoConcepts sw error: ",t),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",t),(0,u.handleServiceWorkerException)(t)}}var S=new FormData;S.append("ofConceptId",i.toString()),S.append("mainKey",o.toString()),S.append("toConceptId",e.toString());const a=yield fetch(b.B.GetCompositionConnectionBetweenTwoConceptsUrl(),{method:"POST",body:S,redirect:"follow"});if(a.ok){const t=yield a.json();for(var r=0;r<t.length;r++)N.d.AddConnection(t[r]),v.push(t[r]);u.Logger.logUpdate(f)}else console.log("Get composition connection between two concepts",a.status),(0,n.ry)(a)}catch(a){a instanceof Error?console.log("Get composition connection between two concepts error message: ",a.message):console.log("Get composition connection between two concepts unexpected error: ",a),(0,n.Mb)(a,b.B.GetCompositionConnectionBetweenTwoConceptsUrl()),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",a)}return v})}},2832:(Q,O,y)=>{y.d(O,{j:()=>w});var N=y(1245),b=y(9581),n=y(1863),u=y(3518),T=function(i,e,o,d){return new(o||(o=Promise))(function(f,v){function S(t){try{a(d.next(t))}catch(c){v(c)}}function r(t){try{a(d.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(S,r)}a((d=d.apply(i,e||[])).next())})};function w(i){var e=arguments;return T(this,arguments,void 0,function*(o,d=""){const f=N.Logger.logfunction("SearchLinkMultipleApi",e);let v=performance.now();var S=(0,u.ab)("application/json",d);const r=b.B.SearchLinkMultipleAllApiUrl(),a=JSON.stringify(o);try{const t=yield fetch(r,{method:"POST",headers:S,body:a});if(t.ok){let c=yield t.json();return N.Logger.logUpdate(f),c}return(0,n.ry)(t),console.log("This is the searching multiple error",t.status),N.Logger.logError(v,"unknown","search","unknown",void 0,t.status,t,"SearchLinkMultipleApi",[o,d],"unknown",void 0),[]}catch(t){console.log("This is the searching multiple error",t),N.Logger.logError(v,"unknown","search","unknown",void 0,500,t,"SearchLinkMultipleApi",[o,d],"unknown",void 0),(0,n.Mb)(t,r),(0,n.ey)(f,"SearchLinkMultipleApi",t)}})}},2895:(Q,O,y)=>{let N=y(396),b=y(9371),n=y(7793),u=y(3614),T=y(5238),w=y(145),i=y(3438),e=y(1106),o=y(6966),d=y(1752),f=y(3152),v=y(9577),S=y(6846),r=y(3717),a=y(5644),t=y(1534),c=y(3303),C=y(38);function m(...I){return I.length===1&&Array.isArray(I[0])&&(I=I[0]),new S(I)}m.plugin=function(I,E){let L,B=!1;function D(...W){console&&console.warn&&!B&&(B=!0,console.warn(I+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),Ur.LANG&&Ur.LANG.startsWith("cn")&&console.warn(I+`: éé¢ postcss.plugin è¢«å¼ç¨. è¿ç§»æå:
https://www.w3ctech.com/topic/2226`));let U=E(...W);return U.postcssPlugin=I,U.postcssVersion=new S().version,U}return Object.defineProperty(D,"postcss",{get:()=>(L||(L=D()),L)}),D.process=function(W,U,P){return m([D(P)]).process(W,U)},D},m.stringify=c,m.parse=v,m.fromJSON=i,m.list=d,m.comment=I=>new b(I),m.atRule=I=>new N(I),m.decl=I=>new T(I),m.rule=I=>new t(I),m.root=I=>new a(I),m.document=I=>new w(I),m.CssSyntaxError=u,m.Declaration=T,m.Container=n,m.Processor=S,m.Document=w,m.Comment=b,m.Warning=C,m.AtRule=N,m.Result=r,m.Input=e,m.Rule=t,m.Root=a,m.Node=f,o.registerPostcss(m),Q.exports=m,m.default=m},2918:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,i)}var T=function(w){var i,e;function o(d){var f;return(f=w.call(this,d)||this).type=n.NESTING,f.value="&",f}return e=w,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,u(i,e),o}(b.default);O.default=T,Q.exports=O.default},3026:(Q,O,y)=>{y.d(O,{I:()=>v});var N=y(3655),b=y(2202),n=y(6963),u=y(5457),T=y(7282),w=y(1245);class i{constructor(r,a,t,c){this.height=1,this.key=r,this.value=a,this.leftNode=t,this.rightNode=c}addNode(r,a,t){if(a==null)return r;let c=a.leftNode,C=a.rightNode;if(a.key>r.key)a.leftNode=this.addNode(r,c,t);else{if(!(a.key<r.key))return a;a.rightNode=this.addNode(r,C,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let m=this.getBalanceFactor(a);if(m>1&&a.leftNode){if(r.key<a.leftNode.key)return this.rightRotate(a);if(r.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(m<-1&&a.rightNode){if(r.key>a.rightNode.key)return this.leftRotate(a);if(r.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}rightRotate(r){if(r){let a=r.leftNode;if(a){let t=a.rightNode;return r.leftNode=t,a.rightNode=r,r.height=Math.max(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode))+1,a}}return r}leftRotate(r){if(r){let a=r.rightNode;if(a){let t=a.leftNode;return a.leftNode=r,r.rightNode=t,r.height=Math.max(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(r.rightNode))+1,a}}return r}getHeight(r){return r?r.height:0}getBalanceFactor(r){return r==null?0:this.getHeight(r.leftNode)-this.getHeight(r.rightNode)}getFromNode(r,a){return a&&(r==a.key?a:r<a.key?this.getFromNode(r,a.leftNode):r>a.key?this.getFromNode(r,a.rightNode):a)}removeNode(r,a){if(r==null)return r;if(r.key>a)return r.leftNode=this.removeNode(r.leftNode,a),r;if(r.key<a)return r.rightNode=this.removeNode(r.rightNode,a),r;if(r.leftNode==null){let t=r.rightNode;return r=null,t}if(r.rightNode==null){let t=r.leftNode;return r=null,t}{let t=this.inOrderSuccessor(r.rightNode);return r.value=t.value,r.key=t.key,r.rightNode=this.removeNode(r.rightNode,t.key),r}}countNodeBelow(r){return r==null?0:1+this.countNodeBelow(r.leftNode)+this.countNodeBelow(r.rightNode)}inOrderSuccessor(r){for(;r.leftNode!=null;)r=r.leftNode;return r}}var e=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,[])).next())})};class o{static addNodeToTree(r){if(this.root==null)return this.root=r,this.root;this.root=this.root.addNode(r,this.root,this.root.height)}static addWidgetToTree(r){let a=new i(r.widgetId,r,null,null);this.addNodeToTree(a)}static getNodeFromTree(r){return e(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(r,this.root):null})}static removeNodeFromTree(r){return e(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,r))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}o.root=null;class d{constructor(){this.widgetId=0,this.mainId=0,this.conceptIds=[],this.linkers=[],this.reverse=[],this.mainCompositionIds=[],this.countinfo=[]}}var f=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,[])).next())})};class v{constructor(){this.name="conceptsArray"}static CheckContains(r){for(var a=!1,t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].id==r.id&&(a=!0);return a}static AddNpc(r){this.NPC.includes(r)||(this.NPC.length>10&&(this.NPC=[]),this.NPC.push(r))}static GetNpc(r){return!!this.NPC.includes(r)}static AddConceptToStorage(r){r.id>0&&(0,N.kH)("concept",r)}static GetConceptBulkData(r,a,t){return f(this,void 0,void 0,function*(){yield b.W.getConceptListFromIds(r,a,t)})}static AddWidget(r){if(w.serviceWorker)try{(0,w.sendMessage)("ConceptsData__AddWidget",{widgetDetails:r})}catch(a){console.error("Concept Data, Add Widget sw error: ",a),(0,w.handleServiceWorkerException)(a)}r.widgetId>0&&o.addWidgetToTree(r)}static AddConcept(r){if(w.serviceWorker)try{(0,w.sendMessage)("ConceptsData__AddConcept",{concept:r})}catch(a){console.error("Concept Data, Add Concpet sw error: ",a),(0,w.handleServiceWorkerException)(a)}r.id>0&&(b.W.addConceptToTree(r),u.c.addConceptToTree(r))}static AddConceptToMemory(r){r.id>0&&(b.W.addConceptToTree(r),u.c.addConceptToTree(r))}static AddConceptTemporary(r){var a=this.CheckContains(r);this.conceptDictionary[r.id]=r,a&&this.RemoveConcept(r),this.conceptsArray.push(r)}static RemoveConcept(r){for(var a=0;a<this.conceptsArray.length;a++)this.conceptsArray[a].id==r.id&&this.conceptsArray.splice(a,1);(0,N.wh)("concept",r.id)}static GetWidget(r){return f(this,void 0,void 0,function*(){let a=new d;if(w.serviceWorker)try{return(yield(0,w.sendMessage)("ConceptsData__GetWidget",{id:r})).data}catch(c){console.error("Concept Data, Get Widget sw error: ",c),(0,w.handleServiceWorkerException)(c)}let t=yield o.getNodeFromTree(r);return t!=null&&(a=t.value),a})}static RemoveWidget(r){return f(this,void 0,void 0,function*(){if(w.serviceWorker)try{return(yield(0,w.sendMessage)("ConceptsData__RemoveWidget",{id:r})).data}catch(a){console.error("Concept Data, Remove Widget sw error: ",a),(0,w.handleServiceWorkerException)(a)}yield o.removeNodeFromTree(r)})}static GetConcept(r){return f(this,void 0,void 0,function*(){if(w.serviceWorker)try{return(yield(0,w.sendMessage)("ConceptsData__GetConcept",{id:r})).data}catch(C){console.error("Concept Data, Get Concpet sw error: ",C),(0,w.handleServiceWorkerException)(C)}if(r==0||r==null||r==null)return(0,T.o)();var a=(0,T.o)(),t=yield b.W.getNodeFromTree(r);if(t?.value){var c=t.value;c&&(a=c)}return a})}static GetConceptByCharacter(r){return f(this,void 0,void 0,function*(){var a=(0,T.o)(),t=n.f.getNodeFromTree(r);return t&&(a=t.value),a})}static GetConceptByCharacterUpdated(r){return f(this,void 0,void 0,function*(){var a=(0,T.o)(),t=n.f.getNodeFromTree(r);return t&&(a=t.value),a})}static GetConceptByCharacterAndTypeLocal(r,a){return f(this,void 0,void 0,function*(){return(0,T.o)(),yield u.c.getTypeVariantsWithCharacterValueNew(r,a)})}static GetConceptByCharacterAndCategoryLocal(r,a){return f(this,void 0,void 0,function*(){var t=(0,T.o)(),c=yield n.f.getCharacterAndCategoryFromTree(r,a);return c&&(t=c.value),t})}static GetConceptsByTypeId(r){let a=[];for(var t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].typeId==r&&a.push(this.conceptsArray[t]);return a}static GetConceptsByTypeIdAndUser(r,a){var t=arguments;return f(this,void 0,void 0,function*(){if(w.Logger.logfunction("ConceptsData.GetConceptsByTypeIdAndUser",t),w.serviceWorker)try{return(yield(0,w.sendMessage)("ConceptsData__GetConceptsByTypeIdAndUser",{typeId:r,userId:a})).data}catch(C){console.error("Concept Data, Get Concpet sw error:",C),(0,w.handleServiceWorkerException)(C)}let c=[];return c=yield u.c.getTypeVariantsFromTreeWithUserIdNew(r,a),c})}static GetBinaryCharacterTree(){return n.f.characterRoot}getName(){return this.name}}v.conceptsArray=[],v.NPC=[],v.conceptDictionary=[]},3075:(Q,O,y)=>{y.d(O,{Ay:()=>e,EO:()=>o,xd:()=>d});var N=y(205),b=y(9736),n=y(5257),u=y(9003),T=y(1245),w=y(1863),i=function(f,v,S,r){return new(S||(S=Promise))(function(a,t){function c(I){try{m(r.next(I))}catch(E){t(E)}}function C(I){try{m(r.throw(I))}catch(E){t(E)}}function m(I){var E;I.done?a(I.value):(E=I.value,E instanceof S?E:new S(function(L){L(E)})).then(c,C)}m((r=r.apply(f,[])).next())})};function e(){return i(this,void 0,void 0,function*(){const f=T.Logger.logfunction("CreateLocalBinaryTreeFromIndexDb");try{let v=[];if(Array.isArray(v))for(let S=0;S<v.length;S++){let r=v[S];b.v.AddConceptToMemory(r)}N.B.isLocalDataLoaded=!0,N.B.isLocalTypeLoaded=!0,N.B.isLocalCharacterLoaded=!0,T.Logger.logUpdate(f)}catch(v){yield(0,T.DelayFunctionExecution)(2e3,e());let S={message:"Cannot create local binary tree from index db",data:v,ok:!1,status:400};throw(0,w.ey)(f,"CreateLocalBinaryTreeFromIndexDb",v),S}})}function o(){return i(this,void 0,void 0,function*(){var f;const v=T.Logger.logfunction("PopulateTheLocalConceptsToMemory");try{yield(f=navigator.locks)===null||f===void 0?void 0:f.request("dblock",S=>i(this,void 0,void 0,function*(){let r=yield(0,u.S5)("localid");if(Array.isArray(r)){if(r[0]){let a=r[0].value;if(a)n.R.AddConceptId(r[0]),yield(0,u.kH)("localid",{id:0,value:a-10});else{a=-Math.floor(1e8*Math.random());let t={id:0,value:a},c={id:0,value:a-10};n.R.AddConceptId(t),yield(0,u.kH)("localid",c)}}r[2]}})),T.Logger.logUpdate(v)}catch(S){let r={message:"Cannot populate Local Ids from the Index Db",data:S,ok:!1,status:400};throw(0,w.ey)(v,"PopulateTheLocalConceptsToMemory",S),r}})}function d(){return i(this,void 0,void 0,function*(){var f;const v=T.Logger.logfunction("PopulateTheLocalConnectionToMemory");try{yield(f=navigator.locks)===null||f===void 0?void 0:f.request("dblock",S=>i(this,void 0,void 0,function*(){let r=yield(0,u.S5)("localid");if(Array.isArray(r)){if(r[1]){let a=r[1].value;if(a)n.R.AddConnectionId(r[1]),yield(0,u.kH)("localid",{id:1,value:a-10});else{a=-Math.floor(1e8*Math.random());let t={id:0,value:a},c={id:0,value:a-10};n.R.AddConnectionId(t),yield(0,u.kH)("localid",c)}}r[2]}})),T.Logger.logUpdate(v)}catch(S){let r={message:"Cannot populate Local Ids from the Index Db",data:S,ok:!1,status:400};throw(0,w.ey)(v,"PopulateTheLocalConnectionToMemory",S),r}})}},3077:(Q,O,y)=>{y.d(O,{A:()=>i});var N=y(1245),b=y(2615),n=y(9736),u=y(5257),T=y(9700),w=function(e,o,d,f){return new(d||(d=Promise))(function(v,S){function r(c){try{t(f.next(c))}catch(C){S(C)}}function a(c){try{t(f.throw(c))}catch(C){S(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof d?C:new d(function(m){m(C)})).then(r,a)}t((f=f.apply(e,o||[])).next())})};function i(e,o,d,f,v,S){return w(this,arguments,void 0,function*(r,a,t,c,C,m,I=!1,E=0,L={concepts:[],connections:[]}){var B,D,W,U;let P=performance.now();try{if(N.serviceWorker)try{const se=yield(0,N.sendMessage)("CreateTheConceptLocal",{referent:r,typecharacter:a,userId:t,categoryId:c,typeId:C,accessId:m,isComposition:I,referentId:E});return!((D=(B=se?.actions)===null||B===void 0?void 0:B.concepts)===null||D===void 0)&&D.length&&(L.concepts=JSON.parse(JSON.stringify(se.actions.concepts))),!((U=(W=se?.actions)===null||W===void 0?void 0:W.connections)===null||U===void 0)&&U.length&&(L.connections=JSON.parse(JSON.stringify(se.actions.connections))),se.data}catch(se){console.error("CreateTheConceptLocal error sw: ",se),(0,N.handleServiceWorkerException)(se)}let M=yield u.R.getConceptId(),j=!0,z=new Date,K=new Date;if(r=="the")return new b.j(1,999,5,5,E,r,m,j,z,K,a);let ee=new b.j(M,t,C,c,E,r,m,j,z,K,a);return ee.isTemp=!0,ee.isComposition=I,n.v.AddConcept(ee),L.concepts.push(ee),ee}catch(M){throw T.V.logError(P,t,"create","unknown","unknown",500,void 0,"createTheConceptLocal",[r,a,t,c,C,m,I],void 0),M}})}},3130:(Q,O,y)=>{y.d(O,{BG:()=>w,SL:()=>i,XZ:()=>T,ZJ:()=>n,iw:()=>u,pU:()=>e,y0:()=>b,yv:()=>N});const N=1,b=2,n=3,u=4,T=5,w=6,i=7,e=8},3152:(Q,O,y)=>{let N=y(3614),b=y(7668),n=y(3303),{isClean:u,my:T}=y(4151);function w(o,d){let f=new o.constructor;for(let v in o){if(!Object.prototype.hasOwnProperty.call(o,v)||v==="proxyCache")continue;let S=o[v],r=typeof S;v==="parent"&&r==="object"?d&&(f[v]=d):v==="source"?f[v]=S:Array.isArray(S)?f[v]=S.map(a=>w(a,f)):(r==="object"&&S!==null&&(S=w(S)),f[v]=S)}return f}function i(o,d){if(d&&d.offset!==void 0)return d.offset;let f=1,v=1,S=0;for(let r=0;r<o.length;r++){if(v===d.line&&f===d.column){S=r;break}o[r]===`
`?(f=1,v+=1):f+=1}return S}class e{get proxyOf(){return this}constructor(d={}){this.raws={},this[u]=!1,this[T]=!0;for(let f in d)if(f==="nodes"){this.nodes=[];for(let v of d[f])typeof v.clone=="function"?this.append(v.clone()):this.append(v)}else this[f]=d[f]}addToError(d){if(d.postcssNode=this,d.stack&&this.source&&/\n\s{4}at /.test(d.stack)){let f=this.source;d.stack=d.stack.replace(/\n\s{4}at /,`$&${f.input.from}:${f.start.line}:${f.start.column}$&`)}return d}after(d){return this.parent.insertAfter(this,d),this}assign(d={}){for(let f in d)this[f]=d[f];return this}before(d){return this.parent.insertBefore(this,d),this}cleanRaws(d){delete this.raws.before,delete this.raws.after,d||delete this.raws.between}clone(d={}){let f=w(this);for(let v in d)f[v]=d[v];return f}cloneAfter(d={}){let f=this.clone(d);return this.parent.insertAfter(this,f),f}cloneBefore(d={}){let f=this.clone(d);return this.parent.insertBefore(this,f),f}error(d,f={}){if(this.source){let{end:v,start:S}=this.rangeBy(f);return this.source.input.error(d,{column:S.column,line:S.line},{column:v.column,line:v.line},f)}return new N(d)}getProxyProcessor(){return{get:(d,f)=>f==="proxyOf"?d:f==="root"?()=>d.root().toProxy():d[f],set:(d,f,v)=>(d[f]===v||(d[f]=v,f!=="prop"&&f!=="value"&&f!=="name"&&f!=="params"&&f!=="important"&&f!=="text"||d.markDirty()),!0)}}markClean(){this[u]=!0}markDirty(){if(this[u]){this[u]=!1;let d=this;for(;d=d.parent;)d[u]=!1}}next(){if(!this.parent)return;let d=this.parent.index(this);return this.parent.nodes[d+1]}positionBy(d={}){let f=this.source.start;if(d.index)f=this.positionInside(d.index);else if(d.word){let v="document"in this.source.input?this.source.input.document:this.source.input.css,S=v.slice(i(v,this.source.start),i(v,this.source.end)).indexOf(d.word);S!==-1&&(f=this.positionInside(S))}return f}positionInside(d){let f=this.source.start.column,v=this.source.start.line,S="document"in this.source.input?this.source.input.document:this.source.input.css,r=i(S,this.source.start),a=r+d;for(let t=r;t<a;t++)S[t]===`
`?(f=1,v+=1):f+=1;return{column:f,line:v,offset:a}}prev(){if(!this.parent)return;let d=this.parent.index(this);return this.parent.nodes[d-1]}rangeBy(d={}){let f="document"in this.source.input?this.source.input.document:this.source.input.css,v={column:this.source.start.column,line:this.source.start.line,offset:i(f,this.source.start)},S=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:i(f,this.source.end)+1}:{column:v.column+1,line:v.line,offset:v.offset+1};if(d.word){let r=f.slice(i(f,this.source.start),i(f,this.source.end)).indexOf(d.word);r!==-1&&(v=this.positionInside(r),S=this.positionInside(r+d.word.length))}else d.start?v={column:d.start.column,line:d.start.line,offset:i(f,d.start)}:d.index&&(v=this.positionInside(d.index)),d.end?S={column:d.end.column,line:d.end.line,offset:i(f,d.end)}:typeof d.endIndex=="number"?S=this.positionInside(d.endIndex):d.index&&(S=this.positionInside(d.index+1));return(S.line<v.line||S.line===v.line&&S.column<=v.column)&&(S={column:v.column+1,line:v.line,offset:v.offset+1}),{end:S,start:v}}raw(d,f){return new b().raw(this,d,f)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...d){if(this.parent){let f=this,v=!1;for(let S of d)S===this?v=!0:v?(this.parent.insertAfter(f,S),f=S):this.parent.insertBefore(f,S);v||this.remove()}return this}root(){let d=this;for(;d.parent&&d.parent.type!=="document";)d=d.parent;return d}toJSON(d,f){let v={},S=f==null;f=f||new Map;let r=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let t=this[a];if(Array.isArray(t))v[a]=t.map(c=>typeof c=="object"&&c.toJSON?c.toJSON(null,f):c);else if(typeof t=="object"&&t.toJSON)v[a]=t.toJSON(null,f);else if(a==="source"){if(t==null)continue;let c=f.get(t.input);c==null&&(c=r,f.set(t.input,r),r++),v[a]={end:t.end,inputId:c,start:t.start}}else v[a]=t}return S&&(v.inputs=[...f.keys()].map(a=>a.toJSON())),v}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(d=n){d.stringify&&(d=d.stringify);let f="";return d(this,v=>{f+=v}),f}warn(d,f,v={}){let S={node:this};for(let r in v)S[r]=v[r];return d.warn(f,S)}}Q.exports=e,e.default=e},3278:(Q,O,y)=>{y.d(O,{b:()=>N});class N{static setSession(n){n&&(N.sessionId=n)}}N.BearerAccessToken="",N.sessionId=998},3295:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N=n(y(8937)),b=y(9606);function n(i){return i&&i.__esModule?i:{default:i}}function u(i,e){for(var o=0;o<e.length;o++){var d=e[o];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}function T(i,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,d){return o.__proto__=d,o},T(i,e)}var w=function(i){var e,o;function d(){return i.apply(this,arguments)||this}o=i,(e=d).prototype=Object.create(o.prototype),e.prototype.constructor=e,T(e,o);var f,v,S=d.prototype;return S.qualifiedName=function(r){return this.namespace?this.namespaceString+"|"+r:r},S.valueToString=function(){return this.qualifiedName(i.prototype.valueToString.call(this))},f=d,(v=[{key:"namespace",get:function(){return this._namespace},set:function(r){if(r===!0||r==="*"||r==="&")return this._namespace=r,void(this.raws&&delete this.raws.namespace);var a=(0,N.default)(r,{isIdentifier:!0});this._namespace=r,a!==r?((0,b.ensureObject)(this,"raws"),this.raws.namespace=a):this.raws&&delete this.raws.namespace}},{key:"ns",get:function(){return this._namespace},set:function(r){this.namespace=r}},{key:"namespaceString",get:function(){if(this.namespace){var r=this.stringifyProperty("namespace");return r===!0?"":r}return""}}])&&u(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),d}(n(y(4646)).default);O.default=w,Q.exports=O.default},3303:(Q,O,y)=>{let N=y(7668);function b(n,u){new N(u).stringify(n)}Q.exports=b,b.default=b},3438:(Q,O,y)=>{let N=y(396),b=y(9371),n=y(5238),u=y(1106),T=y(3878),w=y(5644),i=y(1534);function e(o,d){if(Array.isArray(o))return o.map(S=>e(S));let{inputs:f,...v}=o;if(f){d=[];for(let S of f){let r={...S,__proto__:u.prototype};r.map&&(r.map={...r.map,__proto__:T.prototype}),d.push(r)}}if(v.nodes&&(v.nodes=o.nodes.map(S=>e(S,d))),v.source){let{inputId:S,...r}=v.source;v.source=r,S!=null&&(v.source.input=d[S])}if(v.type==="root")return new w(v);if(v.type==="decl")return new n(v);if(v.type==="rule")return new i(v);if(v.type==="comment")return new b(v);if(v.type==="atrule")return new N(v);throw new Error("Unknown node type: "+o.type)}Q.exports=e,e.default=e},3518:(Q,O,y)=>{y.d(O,{BZ:()=>T,Xr:()=>n,ab:()=>u});var N=y(3278),b=y(490);function n(w="application/json",i="application/json"){var e;let o={},d=(e=N.b.sessionId)===null||e===void 0?void 0:e.toString();return o=N.b.BearerAccessToken!=""?{"Content-Type":w,Authorization:"Bearer "+N.b.BearerAccessToken,Accept:i,"X-Session-id":d}:{"Content-Type":w,Accept:i,"X-Session-id":d},o}function u(w="application/json",i="",e="application/json"){var o;i==""&&(i=N.b.BearerAccessToken);let d={},f=(o=N.b.sessionId)===null||o===void 0?void 0:o.toString();return d=i!=""?{"Content-Type":w,Authorization:"Bearer "+i,Accept:e,"X-Session-id":f}:{"Content-Type":w,Accept:e,"X-Session-id":f},d}function T(){var w;let i=N.b.BearerAccessToken,e=(w=N.b.sessionId)===null||w===void 0?void 0:w.toString();if(i==""){let d=(0,b.s)();d.token!=""&&(N.b.BearerAccessToken=d.token,i=d.token)}let o=new Headers;return o.append("Authorization","Bearer "+i),o.append("X-Session-Id",e),o}},3604:(Q,O,y)=>{let{dirname:N,relative:b,resolve:n,sep:u}=y(197),{SourceMapConsumer:T,SourceMapGenerator:w}=y(1866),{pathToFileURL:i}=y(2739),e=y(1106),o=!!(T&&w),d=!!(N&&n&&b&&u);Q.exports=class{constructor(f,v,S,r){this.stringify=f,this.mapOpts=S.map||{},this.root=v,this.opts=S,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let f;f=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let v=`
`;this.css.includes(`\r
`)&&(v=`\r
`),this.css+=v+"/*# sourceMappingURL="+f+" */"}applyPrevMaps(){for(let f of this.previous()){let v,S=this.toUrl(this.path(f.file)),r=f.root||N(f.file);this.mapOpts.sourcesContent===!1?(v=new T(f.text),v.sourcesContent&&(v.sourcesContent=null)):v=f.consumer(),this.map.applySourceMap(v,S,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let f;for(let v=this.root.nodes.length-1;v>=0;v--)f=this.root.nodes[v],f.type==="comment"&&f.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(v)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),d&&o&&this.isMap())return this.generateMap();{let f="";return this.stringify(this.root,v=>{f+=v}),[f]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let f=this.previous()[0].consumer();f.file=this.outputFile(),this.map=w.fromSourceMap(f,{ignoreInvalidMapping:!0})}else this.map=new w({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new w({file:this.outputFile(),ignoreInvalidMapping:!0});let f,v,S=1,r=1,a="<no source>",t={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(c,C,m)=>{if(this.css+=c,C&&m!=="end"&&(t.generated.line=S,t.generated.column=r-1,C.source&&C.source.start?(t.source=this.sourcePath(C),t.original.line=C.source.start.line,t.original.column=C.source.start.column-1,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,this.map.addMapping(t))),v=c.match(/\n/g),v?(S+=v.length,f=c.lastIndexOf(`
`),r=c.length-f):r+=c.length,C&&m!=="start"){let I=C.parent||{raws:{}};(C.type==="decl"||C.type==="atrule"&&!C.nodes)&&C===I.last&&!I.raws.semicolon||(C.source&&C.source.end?(t.source=this.sourcePath(C),t.original.line=C.source.end.line,t.original.column=C.source.end.column-1,t.generated.line=S,t.generated.column=r-2,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,t.generated.line=S,t.generated.column=r-1,this.map.addMapping(t)))}})}isAnnotation(){return!!this.isInline()||(this.mapOpts.annotation!==void 0?this.mapOpts.annotation:!this.previous().length||this.previous().some(f=>f.annotation))}isInline(){if(this.mapOpts.inline!==void 0)return this.mapOpts.inline;let f=this.mapOpts.annotation;return(f===void 0||f===!0)&&(!this.previous().length||this.previous().some(v=>v.inline))}isMap(){return this.opts.map!==void 0?!!this.opts.map:this.previous().length>0}isSourcesContent(){return this.mapOpts.sourcesContent!==void 0?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(f=>f.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(f){if(this.mapOpts.absolute||f.charCodeAt(0)===60||/^\w+:\/\//.test(f))return f;let v=this.memoizedPaths.get(f);if(v)return v;let S=this.opts.to?N(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(S=N(n(S,this.mapOpts.annotation)));let r=b(S,f);return this.memoizedPaths.set(f,r),r}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(f=>{if(f.source&&f.source.input.map){let v=f.source.input.map;this.previousMaps.includes(v)||this.previousMaps.push(v)}});else{let f=new e(this.originalCSS,this.opts);f.map&&this.previousMaps.push(f.map)}return this.previousMaps}setSourcesContent(){let f={};if(this.root)this.root.walk(v=>{if(v.source){let S=v.source.input.from;if(S&&!f[S]){f[S]=!0;let r=this.usesFileUrls?this.toFileUrl(S):this.toUrl(this.path(S));this.map.setSourceContent(r,v.source.input.css)}}});else if(this.css){let v=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(v,this.css)}}sourcePath(f){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(f.source.input.from):this.toUrl(this.path(f.source.input.from))}toBase64(f){return Buffer?Buffer.from(f).toString("base64"):window.btoa(unescape(encodeURIComponent(f)))}toFileUrl(f){let v=this.memoizedFileURLs.get(f);if(v)return v;if(i){let S=i(f).toString();return this.memoizedFileURLs.set(f,S),S}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(f){let v=this.memoizedURLs.get(f);if(v)return v;u==="\\"&&(f=f.replace(/\\/g,"/"));let S=encodeURI(f).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(f,S),S}}},3614:(Q,O,y)=>{let N=y(8633),b=y(9746);class n extends Error{constructor(T,w,i,e,o,d){super(T),this.name="CssSyntaxError",this.reason=T,o&&(this.file=o),e&&(this.source=e),d&&(this.plugin=d),w!==void 0&&i!==void 0&&(typeof w=="number"?(this.line=w,this.column=i):(this.line=w.line,this.column=w.column,this.endLine=i.line,this.endColumn=i.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,n)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",this.line!==void 0&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(T){if(!this.source)return"";let w=this.source;T==null&&(T=N.isColorSupported);let i=r=>r,e=r=>r,o=r=>r;if(T){let{bold:r,gray:a,red:t}=N.createColors(!0);e=c=>r(t(c)),i=c=>a(c),b&&(o=c=>b(c))}let d=w.split(/\r?\n/),f=Math.max(this.line-3,0),v=Math.min(this.line+2,d.length),S=String(v).length;return d.slice(f,v).map((r,a)=>{let t=f+1+a,c=" "+(" "+t).slice(-S)+" | ";if(t===this.line){if(r.length>160){let m=20,I=Math.max(0,this.column-m),E=Math.max(this.column+m,this.endColumn+m),L=r.slice(I,E),B=i(c.replace(/\d/g," "))+r.slice(0,Math.min(this.column-1,m-1)).replace(/[^\t]/g," ");return e(">")+i(c)+o(L)+`
 `+B+e("^")}let C=i(c.replace(/\d/g," "))+r.slice(0,this.column-1).replace(/[^\t]/g," ");return e(">")+i(c)+o(r)+`
 `+C+e("^")}return" "+i(c)+o(r)}).join(`
`)}toString(){let T=this.showSourceCode();return T&&(T=`

`+T+`
`),this.name+": "+this.message+T}}Q.exports=n,n.default=n},3631:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=function(o,d){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var f=u(d);if(f&&f.has(o))return f.get(o);var v={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in o)if(r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)){var a=S?Object.getOwnPropertyDescriptor(o,r):null;a&&(a.get||a.set)?Object.defineProperty(v,r,a):v[r]=o[r]}return v.default=o,f&&f.set(o,v),v}(y(1581));function u(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,f=new WeakMap;return(u=function(v){return v?f:d})(o)}function T(o,d){(d==null||d>o.length)&&(d=o.length);for(var f=0,v=new Array(d);f<d;f++)v[f]=o[f];return v}function w(o,d){for(var f=0;f<d.length;f++){var v=d[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}function i(o,d){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},i(o,d)}var e=function(o){var d,f;function v(t){var c;return(c=o.call(this,t)||this).nodes||(c.nodes=[]),c}f=o,(d=v).prototype=Object.create(f.prototype),d.prototype.constructor=d,i(d,f);var S,r,a=v.prototype;return a.append=function(t){return t.parent=this,this.nodes.push(t),this},a.prepend=function(t){for(var c in t.parent=this,this.nodes.unshift(t),this.indexes)this.indexes[c]++;return this},a.at=function(t){return this.nodes[t]},a.index=function(t){return typeof t=="number"?t:this.nodes.indexOf(t)},a.removeChild=function(t){var c;for(var C in t=this.index(t),this.at(t).parent=void 0,this.nodes.splice(t,1),this.indexes)(c=this.indexes[C])>=t&&(this.indexes[C]=c-1);return this},a.removeAll=function(){for(var t,c=function(C,m){var I=typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(I)return(I=I.call(C)).next.bind(I);if(Array.isArray(C)||(I=function(L,B){if(L){if(typeof L=="string")return T(L,B);var D=Object.prototype.toString.call(L).slice(8,-1);return D==="Object"&&L.constructor&&(D=L.constructor.name),D==="Map"||D==="Set"?Array.from(L):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?T(L,B):void 0}}(C))||m){I&&(C=I);var E=0;return function(){return E>=C.length?{done:!0}:{done:!1,value:C[E++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(this.nodes);!(t=c()).done;)t.value.parent=void 0;return this.nodes=[],this},a.empty=function(){return this.removeAll()},a.insertAfter=function(t,c){var C;c.parent=this;for(var m,I=this.index(t),E=[],L=2;L<arguments.length;L++)E.push(arguments[L]);for(var B in(C=this.nodes).splice.apply(C,[I+1,0,c].concat(E)),c.parent=this,this.indexes)I<(m=this.indexes[B])&&(this.indexes[B]=m+arguments.length-1);return this},a.insertBefore=function(t,c){var C;c.parent=this;for(var m,I=this.index(t),E=[],L=2;L<arguments.length;L++)E.push(arguments[L]);for(var B in(C=this.nodes).splice.apply(C,[I,0,c].concat(E)),c.parent=this,this.indexes)(m=this.indexes[B])>=I&&(this.indexes[B]=m+arguments.length-1);return this},a._findChildAtPosition=function(t,c){var C=void 0;return this.each(function(m){if(m.atPosition){var I=m.atPosition(t,c);if(I)return C=I,!1}else if(m.isAtPosition(t,c))return C=m,!1}),C},a.atPosition=function(t,c){return this.isAtPosition(t,c)?this._findChildAtPosition(t,c)||this:void 0},a._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},a.each=function(t){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var c=this.lastEach;if(this.indexes[c]=0,this.length){for(var C,m;this.indexes[c]<this.length&&(C=this.indexes[c],(m=t(this.at(C),C))!==!1);)this.indexes[c]+=1;return delete this.indexes[c],m!==!1&&void 0}},a.walk=function(t){return this.each(function(c,C){var m=t(c,C);if(m!==!1&&c.length&&(m=c.walk(t)),m===!1)return!1})},a.walkAttributes=function(t){var c=this;return this.walk(function(C){if(C.type===n.ATTRIBUTE)return t.call(c,C)})},a.walkClasses=function(t){var c=this;return this.walk(function(C){if(C.type===n.CLASS)return t.call(c,C)})},a.walkCombinators=function(t){var c=this;return this.walk(function(C){if(C.type===n.COMBINATOR)return t.call(c,C)})},a.walkComments=function(t){var c=this;return this.walk(function(C){if(C.type===n.COMMENT)return t.call(c,C)})},a.walkIds=function(t){var c=this;return this.walk(function(C){if(C.type===n.ID)return t.call(c,C)})},a.walkNesting=function(t){var c=this;return this.walk(function(C){if(C.type===n.NESTING)return t.call(c,C)})},a.walkPseudos=function(t){var c=this;return this.walk(function(C){if(C.type===n.PSEUDO)return t.call(c,C)})},a.walkTags=function(t){var c=this;return this.walk(function(C){if(C.type===n.TAG)return t.call(c,C)})},a.walkUniversals=function(t){var c=this;return this.walk(function(C){if(C.type===n.UNIVERSAL)return t.call(c,C)})},a.split=function(t){var c=this,C=[];return this.reduce(function(m,I,E){var L=t.call(c,I);return C.push(I),L?(m.push(C),C=[]):E===c.length-1&&m.push(C),m},[])},a.map=function(t){return this.nodes.map(t)},a.reduce=function(t,c){return this.nodes.reduce(t,c)},a.every=function(t){return this.nodes.every(t)},a.some=function(t){return this.nodes.some(t)},a.filter=function(t){return this.nodes.filter(t)},a.sort=function(t){return this.nodes.sort(t)},a.toString=function(){return this.map(String).join("")},S=v,(r=[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}])&&w(S.prototype,r),Object.defineProperty(S,"prototype",{writable:!1}),v}(b.default);O.default=e,Q.exports=O.default},3655:(Q,O,y)=>{y.d(O,{El:()=>d,b8:()=>o,kH:()=>e,qI:()=>i,wh:()=>f});var N=y(2299),b=y(9581),n=y(1245),u=y(1863);let T=10;class w{}function i(v){const S=n.Logger.logfunction("openDatabase",[v,"indexdb"]);return new Promise(function(r,a){w.db&&(n.Logger.logUpdate(S),r(w.db));let t=b.B.BASE_URL+"_FreeSchema"+b.B.BASE_APPLICATION;const c=indexedDB.open(t,T);console.log("this is the update version",T,c),c.onupgradeneeded=C=>{let m=C.target.result,I="concept",E="connection",L="settings";console.log("this is the version update for index",T),m.objectStoreNames.contains(I)&&m.deleteObjectStore(I),m.objectStoreNames.contains(E)&&m.deleteObjectStore(E),m.objectStoreNames.contains(L)&&m.deleteObjectStore(L),m.objectStoreNames.contains(I)||(m.createObjectStore(I,{keyPath:"id"}).transaction.oncomplete=B=>{}),m.objectStoreNames.contains(E)||(m.createObjectStore(E,{keyPath:"id"}).transaction.oncomplete=B=>{}),m.objectStoreNames.contains(L)||(m.createObjectStore(L,{keyPath:"id"}).transaction.oncomplete=B=>{}),n.Logger.logUpdate(S),r(m)},c.onerror=C=>{console.error("Why didn't you allow my web app to use IndexedDB?!",C),indexedDB.deleteDatabase(t),i(v),(0,u.ey)(S,"openDatabase",C),a(C)},c.onsuccess=function(C){let m=C.target;w.db=m.result,n.Logger.logUpdate(S),r(w.db)}})}function e(v,S){const r=n.Logger.logfunction("UpdateToDatabase",[v,"indexdb"]);return new Promise(function(a,t){i(v).then(c=>{const C=c.transaction(v,"readwrite").objectStore(v).put(S);C.onsuccess=m=>{n.Logger.logUpdate(r),a(S)},C.onerror=m=>{let I={status:400,ok:!1,message:"Cannot Update to the database"+v,data:m,body:S};(0,u.ey)(r,"UpdateToDatabase",I),t(I)}}).catch(c=>{let C={status:400,ok:!1,message:"Cannot update to database because you cannot open the database",data:c};(0,u.ey)(r,"UpdateToDatabase",C),t(C)})})}function o(){const v=n.Logger.logfunction("GetLastSettingsFromDatabase",["indexdb"]);return new Promise(function(S,r){let a="settings";i(a).then(t=>{let c=t.transaction(a,"readwrite").objectStore(a).getAll();c.onsuccess=()=>{let C=new N.B(!1),m=c.result;for(let I=0;I<m.length;I++)C=m[I];n.Logger.logUpdate(v),S(C)},c.onerror=C=>{(0,u.ey)(v,"GetLastSettingsFromDatabase",C),r(C)}}).catch(t=>{let c={status:400,ok:!1,message:"Cannot get last object from database because you cannot open the database",data:t};(0,u.ey)(v,"GetLastSettingsFromDatabase",c),r(c)})})}function d(v){const S=n.Logger.logfunction("AiUpdateFlag",["indexdb"]);return new Promise(function(r,a){let t="settings";i(t).then(c=>{const C=c.transaction(t,"readwrite").objectStore(t).put(v);C.onsuccess=m=>{n.Logger.logUpdate(S),r(v)},C.onerror=m=>{let I={status:400,ok:!1,message:"Cannot update AI flag",data:m,body:v};(0,u.ey)(S,"AiUpdateFlag",I),a(I)}}).catch(c=>{let C={status:400,ok:!1,message:"Cannot update AI flag because you cannot open the database",data:c};(0,u.ey)(S,"AiUpdateFlag",C),a(C)})})}function f(v,S){const r=n.Logger.logfunction("removeFromDatabase",[v,"indexdb"]);return new Promise(function(a,t){i(v).then(c=>{const C=c.transaction(v,"readwrite").objectStore(v).delete(Number(S));C.onsuccess=function(m){n.Logger.logUpdate(r),a(S)},C.onerror=m=>{let I={status:400,ok:!1,message:"Cannot remove from the database"+v,data:m};(0,u.ey)(r,"removeFromDatabase",I),t(I)}}).catch(c=>{let C={status:400,ok:!1,message:"Cannot remove from the database because you cannot open the database",data:c,body:S};(0,u.ey)(r,"removeFromDatabase",C),t(C)})})}},3717:(Q,O,y)=>{let N=y(38);class b{get content(){return this.css}constructor(u,T,w){this.processor=u,this.messages=[],this.root=T,this.opts=w,this.css="",this.map=void 0}toString(){return this.css}warn(u,T={}){T.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(T.plugin=this.lastPlugin.postcssPlugin);let w=new N(u,T);return this.messages.push(w),w}warnings(){return this.messages.filter(u=>u.type==="warning")}}Q.exports=b,b.default=b},3729:(Q,O,y)=>{y.d(O,{D:()=>f});var N=y(9934),b=y(4485),n=y(2),u=y(7876),T=y(4818),w=y(999),i=y(5868),e=y(1245),o=y(176),d=function(v,S,r,a){return new(r||(r=Promise))(function(t,c){function C(E){try{I(a.next(E))}catch(L){c(L)}}function m(E){try{I(a.throw(E))}catch(L){c(L)}}function I(E){var L;E.done?t(E.value):(L=E.value,L instanceof r?L:new r(function(B){B(L)})).then(C,m)}I((a=a.apply(v,S||[])).next())})};function f(v){return d(this,arguments,void 0,function*(S,r={concepts:[],connections:[]}){var a,t,c,C;if(performance.now(),e.serviceWorker)try{const ie=yield(0,e.sendMessage)("UpdateCompositionLocal",{patcherStructure:S,actions:r});return!((t=(a=ie?.actions)===null||a===void 0?void 0:a.concepts)===null||t===void 0)&&t.length&&(r.concepts=JSON.parse(JSON.stringify(ie.actions.concepts))),!((C=(c=ie?.actions)===null||c===void 0?void 0:c.connections)===null||C===void 0)&&C.length&&(r.connections=JSON.parse(JSON.stringify(ie.actions.connections))),ie.data}catch(ie){console.error("UpdateCompositionLocal error sw: ",ie),(0,e.handleServiceWorkerException)(ie)}const m=S.userId,I=S.sessionId,E=S.accessId;let L=[];const B=[];let D=(0,e.CreateDefaultLConcept)(),W=(0,e.CreateDefaultLConcept)();const U=[],P=S.compositionId,M=S.ofTheCompositionId;let j=[],z=yield(0,n.s)(P);for(let ie=0;ie<z.length;ie++)L.push((0,o.P6)(z[ie]));const K=[],ee=[];let se=[];for(let ie=0;ie<L.length;ie++)(0,N.A)(ee,L[ie].ofTheConceptId),(0,N.A)(K,L[ie].ofTheConceptId),(0,N.A)(K,L[ie].toTheConceptId),se.push(L[ie].ofTheConceptId);for(let ie=0;ie<K.length;ie++){const ue=yield(0,u.A)(K[ie]);P==K[ie]&&(D=(0,o.F4)(ue)),M==K[ie]&&(W=(0,o.F4)(ue)),B.push((0,o.F4)(ue))}const $=S.patchObject;for(const ie in $){let ue=(0,e.CreateDefaultLConcept)();const te=$[ie];let X=D;W.id>0&&(X=W),Array.isArray(te)||typeof te=="object"?(ue=yield(0,i.k)(ie,"",!0,D.userId,4,999,void 0,r),yield(0,w.R)($[ie],ue.id,ue.userId,D.id,D.userId,4,999,void 0,r)):ue=yield(0,i.k)(ie,te,!1,m,E,I,void 0,r);const ne=(0,b.nm)(B,ue);for(let Y=0;Y<ne.length;Y++)if(ne[Y].id>0){const J=(0,b.gt)(L,ne[Y].id);j=j.concat(J),U.push(ne[Y])}yield(0,e.CreateTheConnectionLocal)(X.id,ue.id,D.id,2,void 0,void 0,r),B.push(ue)}for(let ie=0;ie<j.length;ie++)yield(0,T.m)(j[ie].id);yield e.LocalSyncData.SyncDataOnline(void 0,r)})}},3878:(Q,O,y)=>{let{existsSync:N,readFileSync:b}=y(9977),{dirname:n,join:u}=y(197),{SourceMapConsumer:T,SourceMapGenerator:w}=y(1866);class i{constructor(o,d){if(d.map===!1)return;this.loadAnnotation(o),this.inline=this.startWith(this.annotation,"data:");let f=d.map?d.map.prev:void 0,v=this.loadMap(d.from,f);!this.mapFile&&d.from&&(this.mapFile=d.from),this.mapFile&&(this.root=n(this.mapFile)),v&&(this.text=v)}consumer(){return this.consumerCache||(this.consumerCache=new T(this.text)),this.consumerCache}decodeInline(o){let d=o.match(/^data:application\/json;charset=utf-?8,/)||o.match(/^data:application\/json,/);if(d)return decodeURIComponent(o.substr(d[0].length));let f=o.match(/^data:application\/json;charset=utf-?8;base64,/)||o.match(/^data:application\/json;base64,/);if(f)return v=o.substr(f[0].length),Buffer?Buffer.from(v,"base64").toString():window.atob(v);var v;let S=o.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+S)}getAnnotationURL(o){return o.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(o){return typeof o=="object"&&(typeof o.mappings=="string"||typeof o._mappings=="string"||Array.isArray(o.sections))}loadAnnotation(o){let d=o.match(/\/\*\s*# sourceMappingURL=/g);if(!d)return;let f=o.lastIndexOf(d.pop()),v=o.indexOf("*/",f);f>-1&&v>-1&&(this.annotation=this.getAnnotationURL(o.substring(f,v)))}loadFile(o){if(this.root=n(o),N(o))return this.mapFile=o,b(o,"utf-8").toString().trim()}loadMap(o,d){if(d===!1)return!1;if(d){if(typeof d=="string")return d;if(typeof d!="function"){if(d instanceof T)return w.fromSourceMap(d).toString();if(d instanceof w)return d.toString();if(this.isMap(d))return JSON.stringify(d);throw new Error("Unsupported previous source map format: "+d.toString())}{let f=d(o);if(f){let v=this.loadFile(f);if(!v)throw new Error("Unable to load previous source map: "+f.toString());return v}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let f=this.annotation;return o&&(f=u(n(o),f)),this.loadFile(f)}}}startWith(o,d){return!!o&&o.substr(0,d.length)===d}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}Q.exports=i,i.default=i},3996:(Q,O,y)=>{y.d(O,{i:()=>N});class N{constructor(n,u,T,w){this.key="",this.value=[],this.height=1,this.key=n,this.value=u,this.leftNode=T,this.rightNode=w}getFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getFromNode(n,u.leftNode):n>u.key?this.getFromNode(n,u.rightNode):u)}rightRotate(n){if(n){let u=n.leftNode;if(u){let T=u.rightNode;return n.leftNode=T,u.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,u}}return n}leftRotate(n){if(n){let u=n.rightNode;if(u){let T=u.leftNode;return u.leftNode=n,n.rightNode=T,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(n.rightNode))+1,u}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return n==null?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}removeNode(n,u){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNode(n.leftNode,u),n;if(n.key<u)return n.rightNode=this.removeNode(n.rightNode,u),n;if(n.leftNode==null){let T=n.rightNode;return n=null,T}if(n.rightNode==null){let T=n.leftNode;return n=null,T}{let T=this.inOrderSuccessor(n.rightNode);return n.value=T.value,n.key=T.key,n.variants=T.variants,n.currentNode=T.currentNode,n.rightNode=this.removeNode(n.rightNode,T.key),n}}inOrderSuccessor(n){for(;n.leftNode!=null;)n=n.leftNode;return n}}},4151:Q=>{Q.exports.isClean=Symbol("isClean"),Q.exports.my=Symbol("my")},4195:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N=T(y(8937)),b=y(9606),n=T(y(4646)),u=y(1581);function T(o){return o&&o.__esModule?o:{default:o}}function w(o,d){for(var f=0;f<d.length;f++){var v=d[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}function i(o,d){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},i(o,d)}var e=function(o){var d,f,v,S;function r(a){var t;return(t=o.call(this,a)||this).type=u.CLASS,t._constructed=!0,t}return f=o,(d=r).prototype=Object.create(f.prototype),d.prototype.constructor=d,i(d,f),r.prototype.valueToString=function(){return"."+o.prototype.valueToString.call(this)},v=r,(S=[{key:"value",get:function(){return this._value},set:function(a){if(this._constructed){var t=(0,N.default)(a,{isIdentifier:!0});t!==a?((0,b.ensureObject)(this,"raws"),this.raws.value=t):this.raws&&delete this.raws.value}this._value=a}}])&&w(v.prototype,S),Object.defineProperty(v,"prototype",{writable:!1}),r}(n.default);O.default=e,Q.exports=O.default},4211:(Q,O,y)=>{let N=y(3604),b=y(9577);const n=y(3717);let u=y(3303);y(6156);class T{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let i,e=b;try{i=e(this._css,this._opts)}catch(o){this.error=o}if(this.error)throw this.error;return this._root=i,i}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(i,e,o){let d;e=e.toString(),this.stringified=!1,this._processor=i,this._css=e,this._opts=o,this._map=void 0;let f=u;this.result=new n(this._processor,d,this._opts),this.result.css=e;let v=this;Object.defineProperty(this.result,"root",{get:()=>v.root});let S=new N(f,d,this._opts,e);if(S.isMap()){let[r,a]=S.generate();r&&(this.result.css=r),a&&(this.result.map=a)}else S.clearAnnotation(),this.result.css=S.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(i){return this.async().catch(i)}finally(i){return this.async().then(i,i)}sync(){if(this.error)throw this.error;return this.result}then(i,e){return this.async().then(i,e)}toString(){return this._css}warnings(){return[]}}Q.exports=T,T.default=T},4287:(Q,O,y)=>{y.d(O,{w:()=>u});var N=y(1245),b=y(3130),n=function(T,w,i,e){return new(i||(i=Promise))(function(o,d){function f(r){try{S(e.next(r))}catch(a){d(a)}}function v(r){try{S(e.throw(r))}catch(a){d(a)}}function S(r){var a;r.done?o(r.value):(a=r.value,a instanceof i?a:new i(function(t){t(a)})).then(f,v)}S((e=e.apply(T,[])).next())})};class u{constructor(){this.subscribers=[],this.mainConcept=0,this.compositionIds=[],this.conceptIds=[],this.internalConnections=[],this.reverse=[],this.linkers=[],this.newIds=[],this.dependency=[],this.isDataLoaded=!1,this.isUpdating=!1,this.fetched=!1,this.format=b.yv,this.eventHandlers={}}listenToEventType(w){if(this.eventHandlers[w])return;const i=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){let d=e;if(!o.compositionIds.includes(d?.detail)){o.compositionIds.unshift(d?.detail),o.listenToEvent(d?.detail);let f=d?.detail,v=yield N.ConnectionData.GetConnectionByOfTheConceptAndType(f,f);for(let S=0;S<v.length;S++)yield N.ConnectionData.GetConnection(v[S]).then(r=>{r.typeId==o.mainConcept?o.internalConnections.includes(r.id)||o.internalConnections.push(r.id):o.linkers.includes(r.id)||o.linkers.push(r.id),o.conceptIds.includes(r.toTheConceptId)||o.conceptIds.push(r.toTheConceptId),o.compositionIds.includes(r.ofTheConceptId)||o.compositionIds.push(r.ofTheConceptId)})}o.isUpdating=!1,yield o.bind(),o.notify()})},200)}});this.eventHandlers[w]=i,window.addEventListener(`${w}`,i)}listenToEvent(w){if(this.eventHandlers[w])return;const i=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){let d=yield N.ConnectionData.GetConnectionByOfTheConceptAndType(w,w);for(let f=0;f<d.length;f++)yield N.ConnectionData.GetConnection(d[f]).then(v=>{v.typeId==o.mainConcept?o.internalConnections.includes(v.id)||o.internalConnections.push(v.id):o.linkers.includes(v.id)||o.linkers.push(v.id),o.conceptIds.includes(v.toTheConceptId)||o.conceptIds.push(v.toTheConceptId),o.compositionIds.includes(v.ofTheConceptId)||(o.compositionIds.push(v.ofTheConceptId),o.newIds.includes(v.ofTheConceptId)||o.newIds.push(v.ofTheConceptId))});o.isUpdating=!1,yield o.bind(),o.notify()})},200)}});this.eventHandlers[w]=i,window.addEventListener(`${w}`,i)}removeListenToEvent(w){const i=this.eventHandlers[w];i&&(window.removeEventListener(`${w}`,i),delete this.eventHandlers[w])}listenToEventConnectionType(w,i){window.addEventListener(`${w}`,e=>{if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){let d=yield N.ConnectionData.GetConnectionByOfTheConceptAndType(w,w);for(let f=0;f<d.length;f++)d.typeId==i&&(yield N.ConnectionData.GetConnection(d[f]).then(v=>{v.typeId==o.mainConcept?o.internalConnections.includes(v.id)||o.internalConnections.push(v.id):o.linkers.includes(v.id)||o.linkers.push(v.id),o.conceptIds.includes(v.toTheConceptId)||o.conceptIds.push(v.toTheConceptId),o.compositionIds.includes(v.ofTheConceptId)||o.compositionIds.push(v.ofTheConceptId)}));o.isUpdating=!1,yield o.bind(),o.notify()})},200)}})}bind(){return n(this,void 0,void 0,function*(){console.log("this is the old execute data")})}run(){return n(this,void 0,void 0,function*(){console.log("this is non subscriber data")})}update(){return n(this,void 0,void 0,function*(){this.isDataLoaded=!1,yield this.bind(),this.notify()})}subscribe(w){return n(this,void 0,void 0,function*(){return this.subscribers.push(w),yield this.bind(),w(this.data,this)})}execute(){return n(this,void 0,void 0,function*(){return yield this.run()})}unsubscribe(w){return this.subscribers.filter(i=>i!=w),this.subscribers.length}notify(){this.subscribers.map(w=>{w(this.data,this)})}}},4310:(Q,O,y)=>{y.d(O,{Cp:()=>f,ix:()=>r,ml:()=>S,qj:()=>v});var N=y(1245),b=y(1596),n=y(4698),u=y(1863),T=y(1320),w=y(3518),i=function(a,t,c,C){return new(c||(c=Promise))(function(m,I){function E(D){try{B(C.next(D))}catch(W){I(W)}}function L(D){try{B(C.throw(D))}catch(W){I(W)}}function B(D){var W;D.done?m(D.value):(W=D.value,W instanceof c?W:new c(function(U){U(W)})).then(E,L)}B((C=C.apply(a,[])).next())})};const e=new Map,o=new Map,d=new Map;function f(a){var t=arguments;return i(this,void 0,void 0,function*(){N.Logger.logfunction("BuildWidgetFromId",t);try{if(N.serviceWorker)return(yield(0,N.sendMessage)("BuildWidgetFromId",{id:a})).data}catch(m){console.error("BuildWidgetFromId error sw: ",m),(0,N.handleServiceWorkerException)(m)}let c={};if(e.has(a))return e.get(a)||c;const C=i(this,void 0,void 0,function*(){try{let m=[],I=[],E=[],L=[],B="DESC",D=[],W={},U=(0,w.Xr)("application/json"),P=N.BaseUrl.getWidgetData()+"?id="+a;const M=yield fetch(P,{method:"GET",headers:U});if(!M.ok)return(0,u.ry)(M),console.log("This is the BuildWidgetFromId error",M.status),[];W=yield M.json(),m=W.conceptIds,I=W.linkers,E=W.reverse,L=W.mainCompositionIds,D=W.countinfo;let j=(0,n.w)(D);return c=yield(0,T.e$)(I,m,L,E,j,B),c}catch(m){throw console.log("this is the error in the build widget",m),m}finally{e.delete(a)}});return e.set(a,C),C})}function v(a){var t=arguments;return i(this,void 0,void 0,function*(){N.Logger.logfunction("BuildWidgetFromIdForLatest",t);try{if(N.serviceWorker)return(yield(0,N.sendMessage)("BuildWidgetFromIdForLatest",{id:a})).data}catch(m){console.error("BuildWidgetFromIdForLatest error sw: ",m),(0,N.handleServiceWorkerException)(m)}let c={};if(o.has(a))return o.get(a)||c;const C=i(this,void 0,void 0,function*(){try{let m,I=[],E=[],L=[],B=[],D="DESC",W=[],U={},P=(0,w.Xr)("application/json");try{let j=N.BaseUrl.getLatestWidgetData()+"?id="+a;m=yield fetch(j,{method:"GET",headers:P})}catch{m=yield(0,b.g)({method:"GET",headers:P},"?id="+a)}if(!m.ok)return(0,u.ry)(m),console.log("This is the BuildWidgetFromId error",m.status),[];U=yield m.json(),I=U.conceptIds,E=U.linkers,L=U.reverse,B=U.mainCompositionIds,W=U.countinfo;let M=(0,n.w)(W);return c=yield(0,T.e$)(E,I,B,L,M,D),{data:c,mainId:U.mainId}}catch(m){throw console.log("this is the error in the build widget",m),m}finally{o.delete(a)}});return o.set(a,C),C})}function S(a){var t=arguments;return i(this,void 0,void 0,function*(){N.Logger.logfunction("BuildWidgetFromIdForRecent",t);try{if(N.serviceWorker)return(yield(0,N.sendMessage)("BuildWidgetFromIdForRecent",{id:a})).data}catch(m){console.error("BuildWidgetFromIdForRecent error sw: ",m),(0,N.handleServiceWorkerException)(m)}let c={};if(d.has(a))return d.get(a)||c;const C=i(this,void 0,void 0,function*(){try{let m,I=[],E=[],L=[],B=[],D="DESC",W=[],U={},P=(0,w.Xr)("application/json");try{let j=N.BaseUrl.getRecentWidgetData()+"?id="+a;m=yield fetch(j,{method:"GET",headers:P})}catch{m=yield(0,b.g)({method:"GET",headers:P},"?id="+a)}if(!m.ok)return(0,u.ry)(m),console.log("This is the BuildWidgetFromId error",m.status),[];U=yield m.json(),I=U.conceptIds,E=U.linkers,L=U.reverse,B=U.mainCompositionIds,W=U.countinfo;let M=(0,n.w)(W);return c=yield(0,T.e$)(E,I,B,L,M,D),{data:c,mainId:U.mainId}}catch(m){throw console.log("this is the error in the build widget",m),m}finally{d.delete(a)}});return d.set(a,C),C})}function r(a,t){for(let c=0;c<a.length;c++)if(a[c].id==t)return a[c]}},4364:(Q,O,y)=>{y.d(O,{s:()=>u});var N=y(1239),b=y(1245),n=function(T,w,i,e){return new(i||(i=Promise))(function(o,d){function f(r){try{S(e.next(r))}catch(a){d(a)}}function v(r){try{S(e.throw(r))}catch(a){d(a)}}function S(r){var a;r.done?o(r.value):(a=r.value,a instanceof i?a:new i(function(t){t(a)})).then(f,v)}S((e=e.apply(T,w||[])).next())})};function u(){return n(this,arguments,void 0,function*(T=[]){const w=b.Logger.logfunction("FindConceptsFromConnections",[T.length]);let i=[];if(T.length>0){for(let e=0;e<T.length;e++)i.includes(T[e].ofTheConceptId)||i.push(T[e].ofTheConceptId),i.includes(T[e].toTheConceptId)||i.push(T[e].toTheConceptId),i.includes(T[e].typeId)||i.push(T[e].typeId);yield(0,N.r)(i)}b.Logger.logUpdate(w)})}},4402:(Q,O,y)=>{y.d(O,{A:()=>e});var N=y(3026),b=y(9581),n=y(3518),u=y(1863),T=y(1245),w=y(7876),i=function(o,d,f,v){return new(f||(f=Promise))(function(S,r){function a(C){try{c(v.next(C))}catch(m){r(m)}}function t(C){try{c(v.throw(C))}catch(m){r(m)}}function c(C){var m;C.done?S(C.value):(m=C.value,m instanceof f?m:new f(function(I){I(m)})).then(a,t)}c((v=v.apply(o,[])).next())})};function e(o,d){var f=arguments;return i(this,void 0,void 0,function*(){const v=T.Logger.logfunction("GetConceptByCharacterAndType",f);try{if(T.serviceWorker)try{return(yield(0,T.sendMessage)("GetConceptByCharacterAndType",{characterValue:o,typeId:d})).data}catch(c){console.error("GetConceptByCharacterAndType sw error: ",c),(0,T.handleServiceWorkerException)(c)}let t=yield N.I.GetConceptByCharacterAndTypeLocal(o,d);if(t==null||t.id==0){var S={character_value:`${o}`,type_id:d},r=JSON.stringify(S),a=(0,n.Xr)();const c=yield fetch(b.B.GetConceptByCharacterAndTypeUrl(),{method:"POST",headers:a,body:r});c.ok?(t=yield c.json(),(0,w.K)(t).then(m=>{N.I.AddConcept(t)})):((0,u.ry)(c),console.log("This is the concept by type and character error",c.status))}return T.Logger.logUpdate(v),t}catch(t){t instanceof Error?console.log(" This is the concept by type and character error message: ",t.message):console.log(" This is the concept by type and character unexpected error: ",t),(0,u.Mb)(t,b.B.GetConceptByCharacterAndTypeUrl()),(0,u.ey)(v,"GetConceptByCharacterAndType",t)}})}},4451:(Q,O,y)=>{O.__esModule=!0,O.universal=O.tag=O.string=O.selector=O.root=O.pseudo=O.nesting=O.id=O.comment=O.combinator=O.className=O.attribute=void 0;var N=S(y(5588)),b=S(y(4195)),n=S(y(1704)),u=S(y(425)),T=S(y(7071)),w=S(y(2918)),i=S(y(7324)),e=S(y(518)),o=S(y(339)),d=S(y(5799)),f=S(y(9720)),v=S(y(1669));function S(r){return r&&r.__esModule?r:{default:r}}O.attribute=function(r){return new N.default(r)},O.className=function(r){return new b.default(r)},O.combinator=function(r){return new n.default(r)},O.comment=function(r){return new u.default(r)},O.id=function(r){return new T.default(r)},O.nesting=function(r){return new w.default(r)},O.pseudo=function(r){return new i.default(r)},O.root=function(r){return new e.default(r)},O.selector=function(r){return new o.default(r)},O.string=function(r){return new d.default(r)},O.tag=function(r){return new f.default(r)},O.universal=function(r){return new v.default(r)}},4485:(Q,O,y)=>{function N(T=[],w){var i,e;let o=[],d=(i=w.type)===null||i===void 0?void 0:i.characterValue;if(d?.startsWith("the_")||(d="the_"+d),Array.isArray(T))for(let f=0;f<T.length;f++){let v=(e=T[f].type)===null||e===void 0?void 0:e.characterValue;v?.startsWith("the_")||(v="the_"+v),w.typeId!=T[f].typeId&&d!=v||o.push(T[f])}return o}function b(T=[],w){let i=[],e=w.typeCharacter;if(e?.startsWith("the_")||(e="the_"+e),Array.isArray(T))for(let o=0;o<T.length;o++){let d=T[o].typeCharacter;d?.startsWith("the_")||(d="the_"+d),w.typeId!=T[o].typeId&&e!=d||i.push(T[o])}return i}function n(T=[],w){let i=[];if(Array.isArray(T)){const e=T.find(d=>d.toTheConceptId==w);e&&i.push(e);const o=T.find(d=>d.ofTheConceptId==w);o&&i.push(o)}return i}function u(T=[],w){let i=[];if(Array.isArray(T)){const e=T.find(d=>d.toTheConceptId==w);e&&i.push(e);const o=T.find(d=>d.ofTheConceptId==w);o&&i.push(o)}return i}y.d(O,{gt:()=>u,nm:()=>b,vo:()=>N,wS:()=>n}),y(2155),y(7282)},4643:(Q,O,y)=>{function N(b){try{if(!y.g.localStorage)return!1}catch{return!1}var n=y.g.localStorage[b];return n!=null&&String(n).toLowerCase()==="true"}Q.exports=function(b,n){if(N("noDeprecation"))return b;var u=!1;return function(){if(!u){if(N("throwDeprecation"))throw new Error(n);N("traceDeprecation")?console.trace(n):console.warn(n),u=!0}return b.apply(this,arguments)}}},4646:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N=y(9606);function b(T,w){for(var i=0;i<w.length;i++){var e=w[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(T,e.key,e)}}var n=function T(w,i){if(typeof w!="object"||w===null)return w;var e=new w.constructor;for(var o in w)if(w.hasOwnProperty(o)){var d=w[o];o==="parent"&&typeof d=="object"?i&&(e[o]=i):e[o]=d instanceof Array?d.map(function(f){return T(f,e)}):T(d,e)}return e},u=function(){function T(o){o===void 0&&(o={}),Object.assign(this,o),this.spaces=this.spaces||{},this.spaces.before=this.spaces.before||"",this.spaces.after=this.spaces.after||""}var w,i,e=T.prototype;return e.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function(){if(this.parent){for(var o in arguments)this.parent.insertBefore(this,arguments[o]);this.remove()}return this},e.next=function(){return this.parent.at(this.parent.index(this)+1)},e.prev=function(){return this.parent.at(this.parent.index(this)-1)},e.clone=function(o){o===void 0&&(o={});var d=n(this);for(var f in o)d[f]=o[f];return d},e.appendToPropertyAndEscape=function(o,d,f){this.raws||(this.raws={});var v=this[o],S=this.raws[o];this[o]=v+d,S||f!==d?this.raws[o]=(S||v)+f:delete this.raws[o]},e.setPropertyAndEscape=function(o,d,f){this.raws||(this.raws={}),this[o]=d,this.raws[o]=f},e.setPropertyWithoutEscape=function(o,d){this[o]=d,this.raws&&delete this.raws[o]},e.isAtPosition=function(o,d){if(this.source&&this.source.start&&this.source.end)return!(this.source.start.line>o||this.source.end.line<o||this.source.start.line===o&&this.source.start.column>d||this.source.end.line===o&&this.source.end.column<d)},e.stringifyProperty=function(o){return this.raws&&this.raws[o]||this[o]},e.valueToString=function(){return String(this.stringifyProperty("value"))},e.toString=function(){return[this.rawSpaceBefore,this.valueToString(),this.rawSpaceAfter].join("")},w=T,(i=[{key:"rawSpaceBefore",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.before;return o===void 0&&(o=this.spaces&&this.spaces.before),o||""},set:function(o){(0,N.ensureObject)(this,"raws","spaces"),this.raws.spaces.before=o}},{key:"rawSpaceAfter",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.after;return o===void 0&&(o=this.spaces.after),o||""},set:function(o){(0,N.ensureObject)(this,"raws","spaces"),this.raws.spaces.after=o}}])&&b(w.prototype,i),Object.defineProperty(w,"prototype",{writable:!1}),T}();O.default=u,Q.exports=O.default},4698:(Q,O,y)=>{y.d(O,{V:()=>w,w:()=>T});var N=y(7139),b=y(1245),n=y(276),u=function(e,o,d,f){return new(d||(d=Promise))(function(v,S){function r(c){try{t(f.next(c))}catch(C){S(C)}}function a(c){try{t(f.throw(c))}catch(C){S(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof d?C:new d(function(m){m(C)})).then(r,a)}t((f=f.apply(e,[])).next())})};function T(e=[]){let o=[];if(e.length>0)for(let d=0;d<e.length;d++){let f=i(e[d]);o.push(f)}return o}function w(e){var o=arguments;return u(this,void 0,void 0,function*(){const d=b.Logger.logfunction("GetConnectionTypeForCount",o);let f={};for(let v=0;v<e.length;v++){let S=yield(0,N.r)(e[v].connectionTypeId);e[v].connectionType=S.characterValue,f[e[v].conceptId]=e[v]}return b.Logger.logUpdate(d),f})}function i(e){const o=e.split("_");if(o.length===3){let d=new n.y;return d.conceptId=Number(o[0]),d.connectionTypeId=Number(o[1]),d.count=Number(o[2]),d}throw new Error("Input string must contain exactly three parts separated by underscores.")}},4711:(Q,O,y)=>{y.d(O,{F:()=>i,d:()=>e});var N=y(2155),b=y(4864),n=y(5257),u=y(9700),T=y(1245),w=function(o,d,f,v){return new(f||(f=Promise))(function(S,r){function a(C){try{c(v.next(C))}catch(m){r(m)}}function t(C){try{c(v.throw(C))}catch(m){r(m)}}function c(C){var m;C.done?S(C.value):(m=C.value,m instanceof f?m:new f(function(I){I(m)})).then(a,t)}c((v=v.apply(o,d||[])).next())})};function i(o,d,f){return w(this,arguments,void 0,function*(v,S,r,a=1,t="",c=999,C={concepts:[],connections:[]}){var m,I,E,L;let B=performance.now();if(T.serviceWorker)try{const D=yield(0,T.sendMessage)("CreateTheConnectionLocal",{ofTheConceptId:v,toTheConceptId:S,typeId:r,orderId:a,typeString:t,userId:c,actions:C});return!((I=(m=D?.actions)===null||m===void 0?void 0:m.concepts)===null||I===void 0)&&I.length&&(C.concepts=JSON.parse(JSON.stringify(D.actions.concepts))),!((L=(E=D?.actions)===null||E===void 0?void 0:E.connections)===null||L===void 0)&&L.length&&(C.connections=JSON.parse(JSON.stringify(D.actions.connections))),D.data}catch(D){console.log("CreateTheConnectionLocal error sw: ",D),(0,T.handleServiceWorkerException)(D)}try{let D=4,W=yield n.R.getConnectionId(),U=0,P=0,M=0;U=v,P=S,M=r;let j=new N.N(0,0,0,0,0,0,0);return v!=S&&(j=new N.N(W,U,P,c,r,a,D),j.isTemp=!0,j.typeCharacter=t,T.LocalSyncData.AddConnection(j),b.G.AddConnection(j),C.connections.push(j)),j}catch(D){throw u.V.logError(B,c,"create","Unknown","Unknown",500,void 0,"CreateTheConnectionLocal",[v,S,r,a,t,c],"UnknownUserAgent",[]),D}})}function e(o,d,f){return w(this,arguments,void 0,function*(v,S,r,a={concepts:[],connections:[]}){var t,c,C,m;if(T.serviceWorker)try{const L=yield(0,T.sendMessage)("CreateConnection",{ofTheConcept:v,toTheConcept:S,connectionTypeString:r,actions:a});return!((c=(t=L?.actions)===null||t===void 0?void 0:t.concepts)===null||c===void 0)&&c.length&&(a.concepts=JSON.parse(JSON.stringify(L.actions.concepts))),!((m=(C=L?.actions)===null||C===void 0?void 0:C.connections)===null||m===void 0)&&m.length&&(a.connections=JSON.parse(JSON.stringify(L.actions.connections))),L.data}catch(L){console.log("CreateConnection error sw: ",L),(0,T.handleServiceWorkerException)(L)}let I=yield(0,T.MakeTheTypeConceptLocal)(r,999,999,999),E=v.userId;return yield i(v.id,S.id,I.id,1e3,r,E,a)})}},4818:(Q,O,y)=>{y.d(O,{m:()=>d,E:()=>f});var N=y(1245),b=y(1863),n=y(3518),u=function(v,S,r,a){return new(r||(r=Promise))(function(t,c){function C(E){try{I(a.next(E))}catch(L){c(L)}}function m(E){try{I(a.throw(E))}catch(L){c(L)}}function I(E){var L;E.done?t(E.value):(L=E.value,L instanceof r?L:new r(function(B){B(L)})).then(C,m)}I((a=a.apply(v,[])).next())})},T=y(9581),w=function(v,S,r,a){return new(r||(r=Promise))(function(t,c){function C(E){try{I(a.next(E))}catch(L){c(L)}}function m(E){try{I(a.throw(E))}catch(L){c(L)}}function I(E){var L;E.done?t(E.value):(L=E.value,L instanceof r?L:new r(function(B){B(L)})).then(C,m)}I((a=a.apply(v,[])).next())})},i=y(5239),e=y(4864),o=function(v,S,r,a){return new(r||(r=Promise))(function(t,c){function C(E){try{I(a.next(E))}catch(L){c(L)}}function m(E){try{I(a.throw(E))}catch(L){c(L)}}function I(E){var L;E.done?t(E.value):(L=E.value,L instanceof r?L:new r(function(B){B(L)})).then(C,m)}I((a=a.apply(v,[])).next())})};function d(v){var S=arguments;return o(this,void 0,void 0,function*(){const r=N.Logger.logfunction("DeleteConnectionById",S);if(N.serviceWorker)try{return(yield(0,N.sendMessage)("DeleteConnectionById",{id:v})).data}catch(t){console.error("DeleteConnectionById sw error: ",t),(0,N.handleServiceWorkerException)(t)}let a=!0;return v>0?(a=yield function(t){var c=arguments;return w(this,void 0,void 0,function*(){const C=N.Logger.logfunction("DeleteTheConnection",c);let m=!1;try{const I=new FormData;I.append("id",t.toString());let E=(0,n.BZ)();const L=yield fetch(T.B.DeleteTheConnectionUrl(),{method:"POST",headers:E,body:I,redirect:"follow"});N.Logger.logUpdate(C),L.ok?m=(yield L.json()).success:(console.log("Delete connection error status: ",L.status),(0,b.ry)(L)),m&&N.ConnectionData.AddNpConn(t)}catch(I){I instanceof Error?console.log("Delete connection error message: ",I.message):console.log("Delete connection unexpected error: ",I),(0,b.Mb)(I,T.B.DeleteTheConnectionUrl()),(0,b.ey)(C,"DeleteTheConnection",I)}return m})}(v),i.O.removeNodeFromTree(v)):e.G.RemoveConnectionById(v),N.Logger.logUpdate(r),a})}function f(v){var S=arguments;return o(this,void 0,void 0,function*(){const r=N.Logger.logfunction("DeleteConnectionByIdBulk",S);if(N.serviceWorker)try{return(yield(0,N.sendMessage)("DeleteConnectionByIdBulk",{ids:v})).data}catch(t){console.error("DeleteConnectionByIdBulk sw error: ",t),(0,N.handleServiceWorkerException)(t)}let a=yield function(t){var c=arguments;return u(this,void 0,void 0,function*(){const C=N.Logger.logfunction("DeleteTheConnectionBulkApi",c);let m=!1;try{let I=(0,n.BZ)();I.append("Content-Type","application/json");const E=yield fetch(N.BaseUrl.DeleteTheConnectionBulkUrl(),{method:"POST",headers:I,body:JSON.stringify(t)});if(N.Logger.logUpdate(C),E.ok?m=(yield E.json()).success:(console.log("Delete connection Bulk Api error status: ",E.status),(0,b.ry)(E)),m)for(let L=0;L<t.length;L++){let B=t[L];N.ConnectionData.AddNpConn(B)}}catch(I){I instanceof Error?console.log("Delete connection Bulk Api error message: ",I.message):console.log("Delete connection Bulk Api unexpected error: ",I),(0,b.Mb)(I,N.BaseUrl.DeleteTheConnectionUrl()),(0,b.ey)(C,"DeleteTheConnectionBulkApi",I)}return m})}(v);if(a)for(let t=0;t<v.length;t++){let c=v[t];c>0?i.O.removeNodeFromTree(c):e.G.RemoveConnectionById(c)}return N.Logger.logUpdate(r),a})}},4864:(Q,O,y)=>{y.d(O,{G:()=>w});var N=y(2155),b=y(8286),n=y(205),u=y(628),T=function(i,e,o,d){return new(o||(o=Promise))(function(f,v){function S(t){try{a(d.next(t))}catch(c){v(c)}}function r(t){try{a(d.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(S,r)}a((d=d.apply(i,[])).next())})};class w{constructor(){this.name="Connection Array"}static CheckContains(e){for(var o=!1,d=0;d<this.connectionArray.length;d++)this.connectionArray[d].id==e.id&&(o=!0);return o}static AddConnection(e){this.CheckContains(e)&&this.RemoveConnection(e),e.id,this.connectionArray.push(e)}static AddConnectionToMemory(e){this.CheckContains(e)&&this.RemoveConnection(e),this.connectionArray.push(e)}static AddToDictionary(e){this.connectionDictionary[e.id]=e}static RemoveConnection(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e.id&&this.connectionArray.splice(o,1);e.id}static RemoveConnectionById(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e&&this.connectionArray.splice(o,1);u.H.RemoveConnectionById(e)}static AddPermanentConnection(e){e.id>0&&b.d.AddConnection(function(o){let d=new N.N(0,0,0,0,0,0,0);return d.ofTheConceptId=o.ofTheConceptId,d.toTheConceptId=o.toTheConceptId,d.typeId=o.typeId,d.orderId=o.orderId,d.id=o.id,d}(e))}static GetConnection(e){var o;o=null;for(var d=0;d<this.connectionArray.length;d++)this.connectionArray[d].id==e&&(o=this.connectionArray[d]);return o}static waitForDataToLoad(){return T(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isLocalConnectionLoaded)return e("done");setTimeout(w.checkFlag,1e3,e)}static GetConnectionsOfCompositionLocal(e){return T(this,void 0,void 0,function*(){var o=[];try{for(var d=0;d<this.connectionArray.length;d++)this.connectionArray[d].typeId==e&&o.push(this.connectionArray[d]);return o}catch{return o}})}static GetConnectionOfCompositionAndTypeLocal(e,o){return T(this,void 0,void 0,function*(){var d=[];try{for(var f=0;f<this.connectionArray.length;f++)this.connectionArray[f].typeId==e&&this.connectionArray[f].ofTheConceptId==o&&d.push(this.connectionArray[f]);return d}catch{return d}})}getName(){return this.name}}w.connectionArray=[],w.connectionDictionary=[]},5020:(Q,O,y)=>{y.d(O,{A:()=>T});var N=y(1245),b=y(3026),n=y(205),u=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,[])).next())})};function T(){return u(this,void 0,void 0,function*(){try{let w=[];if(Array.isArray(w))for(let i=0;i<w.length;i++){let e=w[i];b.I.AddConceptToMemory(e)}n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0}catch(w){throw yield(0,N.DelayFunctionExecution)(2e3,T()),{message:"Cannot create Binary Tree Concept",ok:!1,status:400,data:w}}})}},5042:Q=>{Q.exports={nanoid:(O=21)=>{let y="",N=0|O;for(;N--;)y+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return y},customAlphabet:(O,y=21)=>(N=y)=>{let b="",n=0|N;for(;n--;)b+=O[Math.random()*O.length|0];return b}}},5170:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b,n=L(y(518)),u=L(y(339)),T=L(y(4195)),w=L(y(425)),i=L(y(7071)),e=L(y(9720)),o=L(y(5799)),d=L(y(7324)),f=E(y(5588)),v=L(y(1669)),S=L(y(1704)),r=L(y(2918)),a=L(y(263)),t=E(y(2648)),c=E(y(71)),C=E(y(1581)),m=y(9606);function I($){if(typeof WeakMap!="function")return null;var ie=new WeakMap,ue=new WeakMap;return(I=function(te){return te?ue:ie})($)}function E($,ie){if($&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var ue=I(ie);if(ue&&ue.has($))return ue.get($);var te={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in $)if(ne!=="default"&&Object.prototype.hasOwnProperty.call($,ne)){var Y=X?Object.getOwnPropertyDescriptor($,ne):null;Y&&(Y.get||Y.set)?Object.defineProperty(te,ne,Y):te[ne]=$[ne]}return te.default=$,ue&&ue.set($,te),te}function L($){return $&&$.__esModule?$:{default:$}}function B($,ie){for(var ue=0;ue<ie.length;ue++){var te=ie[ue];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty($,te.key,te)}}var D=((N={})[c.space]=!0,N[c.cr]=!0,N[c.feed]=!0,N[c.newline]=!0,N[c.tab]=!0,N),W=Object.assign({},D,((b={})[c.comment]=!0,b));function U($){return{line:$[t.FIELDS.START_LINE],column:$[t.FIELDS.START_COL]}}function P($){return{line:$[t.FIELDS.END_LINE],column:$[t.FIELDS.END_COL]}}function M($,ie,ue,te){return{start:{line:$,column:ie},end:{line:ue,column:te}}}function j($){return M($[t.FIELDS.START_LINE],$[t.FIELDS.START_COL],$[t.FIELDS.END_LINE],$[t.FIELDS.END_COL])}function z($,ie){if($)return M($[t.FIELDS.START_LINE],$[t.FIELDS.START_COL],ie[t.FIELDS.END_LINE],ie[t.FIELDS.END_COL])}function K($,ie){var ue=$[ie];if(typeof ue=="string")return ue.indexOf("\\")!==-1&&((0,m.ensureObject)($,"raws"),$[ie]=(0,m.unesc)(ue),$.raws[ie]===void 0&&($.raws[ie]=ue)),$}function ee($,ie){for(var ue=-1,te=[];(ue=$.indexOf(ie,ue+1))!==-1;)te.push(ue);return te}var se=function(){function $(X,ne){ne===void 0&&(ne={}),this.rule=X,this.options=Object.assign({lossy:!1,safe:!1},ne),this.position=0,this.css=typeof this.rule=="string"?this.rule:this.rule.selector,this.tokens=(0,t.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var Y=z(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new n.default({source:Y}),this.root.errorGenerator=this._errorGenerator();var J=new u.default({source:{start:{line:1,column:1}},sourceIndex:0});this.root.append(J),this.current=J,this.loop()}var ie,ue,te=$.prototype;return te._errorGenerator=function(){var X=this;return function(ne,Y){return typeof X.rule=="string"?new Error(ne):X.rule.error(ne,Y)}},te.attribute=function(){var X=[],ne=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[t.FIELDS.TYPE]!==c.closeSquare;)X.push(this.currToken),this.position++;if(this.currToken[t.FIELDS.TYPE]!==c.closeSquare)return this.expected("closing square bracket",this.currToken[t.FIELDS.START_POS]);var Y=X.length,J={source:M(ne[1],ne[2],this.currToken[3],this.currToken[4]),sourceIndex:ne[t.FIELDS.START_POS]};if(Y===1&&!~[c.word].indexOf(X[0][t.FIELDS.TYPE]))return this.expected("attribute",X[0][t.FIELDS.START_POS]);for(var re=0,ae="",de="",ce=null,we=!1;re<Y;){var Ie=X[re],me=this.content(Ie),ke=X[re+1];switch(Ie[t.FIELDS.TYPE]){case c.space:if(we=!0,this.options.lossy)break;if(ce){(0,m.ensureObject)(J,"spaces",ce);var be=J.spaces[ce].after||"";J.spaces[ce].after=be+me;var ge=(0,m.getProp)(J,"raws","spaces",ce,"after")||null;ge&&(J.raws.spaces[ce].after=ge+me)}else ae+=me,de+=me;break;case c.asterisk:ke[t.FIELDS.TYPE]===c.equals?(J.operator=me,ce="operator"):J.namespace&&(ce!=="namespace"||we)||!ke||(ae&&((0,m.ensureObject)(J,"spaces","attribute"),J.spaces.attribute.before=ae,ae=""),de&&((0,m.ensureObject)(J,"raws","spaces","attribute"),J.raws.spaces.attribute.before=ae,de=""),J.namespace=(J.namespace||"")+me,(0,m.getProp)(J,"raws","namespace")&&(J.raws.namespace+=me),ce="namespace"),we=!1;break;case c.dollar:if(ce==="value"){var _e=(0,m.getProp)(J,"raws","value");J.value+="$",_e&&(J.raws.value=_e+"$");break}case c.caret:ke[t.FIELDS.TYPE]===c.equals&&(J.operator=me,ce="operator"),we=!1;break;case c.combinator:if(me==="~"&&ke[t.FIELDS.TYPE]===c.equals&&(J.operator=me,ce="operator"),me!=="|"){we=!1;break}ke[t.FIELDS.TYPE]===c.equals?(J.operator=me,ce="operator"):J.namespace||J.attribute||(J.namespace=!0),we=!1;break;case c.word:if(ke&&this.content(ke)==="|"&&X[re+2]&&X[re+2][t.FIELDS.TYPE]!==c.equals&&!J.operator&&!J.namespace)J.namespace=me,ce="namespace";else if(!J.attribute||ce==="attribute"&&!we)ae&&((0,m.ensureObject)(J,"spaces","attribute"),J.spaces.attribute.before=ae,ae=""),de&&((0,m.ensureObject)(J,"raws","spaces","attribute"),J.raws.spaces.attribute.before=de,de=""),J.attribute=(J.attribute||"")+me,(0,m.getProp)(J,"raws","attribute")&&(J.raws.attribute+=me),ce="attribute";else if(!J.value&&J.value!==""||ce==="value"&&!we&&!J.quoteMark){var ve=(0,m.unesc)(me),Ce=(0,m.getProp)(J,"raws","value")||"",Te=J.value||"";J.value=Te+ve,J.quoteMark=null,(ve!==me||Ce)&&((0,m.ensureObject)(J,"raws"),J.raws.value=(Ce||Te)+me),ce="value"}else{var xe=me==="i"||me==="I";!J.value&&J.value!==""||!J.quoteMark&&!we?(J.value||J.value==="")&&(ce="value",J.value+=me,J.raws.value&&(J.raws.value+=me)):(J.insensitive=xe,xe&&me!=="I"||((0,m.ensureObject)(J,"raws"),J.raws.insensitiveFlag=me),ce="insensitive",ae&&((0,m.ensureObject)(J,"spaces","insensitive"),J.spaces.insensitive.before=ae,ae=""),de&&((0,m.ensureObject)(J,"raws","spaces","insensitive"),J.raws.spaces.insensitive.before=de,de=""))}we=!1;break;case c.str:if(!J.attribute||!J.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:Ie[t.FIELDS.START_POS]});var fe=(0,f.unescapeValue)(me),Ne=fe.unescaped,Re=fe.quoteMark;J.value=Ne,J.quoteMark=Re,ce="value",(0,m.ensureObject)(J,"raws"),J.raws.value=me,we=!1;break;case c.equals:if(!J.attribute)return this.expected("attribute",Ie[t.FIELDS.START_POS],me);if(J.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:Ie[t.FIELDS.START_POS]});J.operator=J.operator?J.operator+me:me,ce="operator",we=!1;break;case c.comment:if(ce)if(we||ke&&ke[t.FIELDS.TYPE]===c.space||ce==="insensitive"){var Le=(0,m.getProp)(J,"spaces",ce,"after")||"",Ee=(0,m.getProp)(J,"raws","spaces",ce,"after")||Le;(0,m.ensureObject)(J,"raws","spaces",ce),J.raws.spaces[ce].after=Ee+me}else{var Be=J[ce]||"",Ge=(0,m.getProp)(J,"raws",ce)||Be;(0,m.ensureObject)(J,"raws"),J.raws[ce]=Ge+me}else de+=me;break;default:return this.error('Unexpected "'+me+'" found.',{index:Ie[t.FIELDS.START_POS]})}re++}K(J,"attribute"),K(J,"namespace"),this.newNode(new f.default(J)),this.position++},te.parseWhitespaceEquivalentTokens=function(X){X<0&&(X=this.tokens.length);var ne=this.position,Y=[],J="",re=void 0;do if(D[this.currToken[t.FIELDS.TYPE]])this.options.lossy||(J+=this.content());else if(this.currToken[t.FIELDS.TYPE]===c.comment){var ae={};J&&(ae.before=J,J=""),re=new w.default({value:this.content(),source:j(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS],spaces:ae}),Y.push(re)}while(++this.position<X);if(J){if(re)re.spaces.after=J;else if(!this.options.lossy){var de=this.tokens[ne],ce=this.tokens[this.position-1];Y.push(new o.default({value:"",source:M(de[t.FIELDS.START_LINE],de[t.FIELDS.START_COL],ce[t.FIELDS.END_LINE],ce[t.FIELDS.END_COL]),sourceIndex:de[t.FIELDS.START_POS],spaces:{before:J,after:""}}))}}return Y},te.convertWhitespaceNodesToSpace=function(X,ne){var Y=this;ne===void 0&&(ne=!1);var J="",re="";return X.forEach(function(ae){var de=Y.lossySpace(ae.spaces.before,ne),ce=Y.lossySpace(ae.rawSpaceBefore,ne);J+=de+Y.lossySpace(ae.spaces.after,ne&&de.length===0),re+=de+ae.value+Y.lossySpace(ae.rawSpaceAfter,ne&&ce.length===0)}),re===J&&(re=void 0),{space:J,rawSpace:re}},te.isNamedCombinator=function(X){return X===void 0&&(X=this.position),this.tokens[X+0]&&this.tokens[X+0][t.FIELDS.TYPE]===c.slash&&this.tokens[X+1]&&this.tokens[X+1][t.FIELDS.TYPE]===c.word&&this.tokens[X+2]&&this.tokens[X+2][t.FIELDS.TYPE]===c.slash},te.namedCombinator=function(){if(this.isNamedCombinator()){var X=this.content(this.tokens[this.position+1]),ne=(0,m.unesc)(X).toLowerCase(),Y={};ne!==X&&(Y.value="/"+X+"/");var J=new S.default({value:"/"+ne+"/",source:M(this.currToken[t.FIELDS.START_LINE],this.currToken[t.FIELDS.START_COL],this.tokens[this.position+2][t.FIELDS.END_LINE],this.tokens[this.position+2][t.FIELDS.END_COL]),sourceIndex:this.currToken[t.FIELDS.START_POS],raws:Y});return this.position=this.position+3,J}this.unexpected()},te.combinator=function(){var X=this;if(this.content()==="|")return this.namespace();var ne=this.locateNextMeaningfulToken(this.position);if(!(ne<0||this.tokens[ne][t.FIELDS.TYPE]===c.comma||this.tokens[ne][t.FIELDS.TYPE]===c.closeParenthesis)){var Y,J=this.currToken,re=void 0;if(ne>this.position&&(re=this.parseWhitespaceEquivalentTokens(ne)),this.isNamedCombinator()?Y=this.namedCombinator():this.currToken[t.FIELDS.TYPE]===c.combinator?(Y=new S.default({value:this.content(),source:j(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS]}),this.position++):D[this.currToken[t.FIELDS.TYPE]]||re||this.unexpected(),Y){if(re){var ae=this.convertWhitespaceNodesToSpace(re),de=ae.space,ce=ae.rawSpace;Y.spaces.before=de,Y.rawSpaceBefore=ce}}else{var we=this.convertWhitespaceNodesToSpace(re,!0),Ie=we.space,me=we.rawSpace;me||(me=Ie);var ke={},be={spaces:{}};Ie.endsWith(" ")&&me.endsWith(" ")?(ke.before=Ie.slice(0,Ie.length-1),be.spaces.before=me.slice(0,me.length-1)):Ie.startsWith(" ")&&me.startsWith(" ")?(ke.after=Ie.slice(1),be.spaces.after=me.slice(1)):be.value=me,Y=new S.default({value:" ",source:z(J,this.tokens[this.position-1]),sourceIndex:J[t.FIELDS.START_POS],spaces:ke,raws:be})}return this.currToken&&this.currToken[t.FIELDS.TYPE]===c.space&&(Y.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(Y)}var ge=this.parseWhitespaceEquivalentTokens(ne);if(ge.length>0){var _e=this.current.last;if(_e){var ve=this.convertWhitespaceNodesToSpace(ge),Ce=ve.space,Te=ve.rawSpace;Te!==void 0&&(_e.rawSpaceAfter+=Te),_e.spaces.after+=Ce}else ge.forEach(function(xe){return X.newNode(xe)})}},te.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;this.current._inferEndPosition();var X=new u.default({source:{start:U(this.tokens[this.position+1])},sourceIndex:this.tokens[this.position+1][t.FIELDS.START_POS]});this.current.parent.append(X),this.current=X,this.position++},te.comment=function(){var X=this.currToken;this.newNode(new w.default({value:this.content(),source:j(X),sourceIndex:X[t.FIELDS.START_POS]})),this.position++},te.error=function(X,ne){throw this.root.error(X,ne)},te.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[t.FIELDS.START_POS]})},te.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[t.FIELDS.START_POS])},te.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[t.FIELDS.START_POS])},te.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[t.FIELDS.START_POS])},te.unexpectedPipe=function(){return this.error("Unexpected '|'.",this.currToken[t.FIELDS.START_POS])},te.namespace=function(){var X=this.prevToken&&this.content(this.prevToken)||!0;return this.nextToken[t.FIELDS.TYPE]===c.word?(this.position++,this.word(X)):this.nextToken[t.FIELDS.TYPE]===c.asterisk?(this.position++,this.universal(X)):void this.unexpectedPipe()},te.nesting=function(){if(this.nextToken&&this.content(this.nextToken)==="|")this.position++;else{var X=this.currToken;this.newNode(new r.default({value:this.content(),source:j(X),sourceIndex:X[t.FIELDS.START_POS]})),this.position++}},te.parentheses=function(){var X=this.current.last,ne=1;if(this.position++,X&&X.type===C.PSEUDO){var Y=new u.default({source:{start:U(this.tokens[this.position])},sourceIndex:this.tokens[this.position][t.FIELDS.START_POS]}),J=this.current;for(X.append(Y),this.current=Y;this.position<this.tokens.length&&ne;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&ne++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&ne--,ne?this.parse():(this.current.source.end=P(this.currToken),this.current.parent.source.end=P(this.currToken),this.position++);this.current=J}else{for(var re,ae=this.currToken,de="(";this.position<this.tokens.length&&ne;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&ne++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&ne--,re=this.currToken,de+=this.parseParenthesisToken(this.currToken),this.position++;X?X.appendToPropertyAndEscape("value",de,de):this.newNode(new o.default({value:de,source:M(ae[t.FIELDS.START_LINE],ae[t.FIELDS.START_COL],re[t.FIELDS.END_LINE],re[t.FIELDS.END_COL]),sourceIndex:ae[t.FIELDS.START_POS]}))}if(ne)return this.expected("closing parenthesis",this.currToken[t.FIELDS.START_POS])},te.pseudo=function(){for(var X=this,ne="",Y=this.currToken;this.currToken&&this.currToken[t.FIELDS.TYPE]===c.colon;)ne+=this.content(),this.position++;return this.currToken?this.currToken[t.FIELDS.TYPE]!==c.word?this.expected(["pseudo-class","pseudo-element"],this.currToken[t.FIELDS.START_POS]):void this.splitWord(!1,function(J,re){ne+=J,X.newNode(new d.default({value:ne,source:z(Y,X.currToken),sourceIndex:Y[t.FIELDS.START_POS]})),re>1&&X.nextToken&&X.nextToken[t.FIELDS.TYPE]===c.openParenthesis&&X.error("Misplaced parenthesis.",{index:X.nextToken[t.FIELDS.START_POS]})}):this.expected(["pseudo-class","pseudo-element"],this.position-1)},te.space=function(){var X=this.content();this.position===0||this.prevToken[t.FIELDS.TYPE]===c.comma||this.prevToken[t.FIELDS.TYPE]===c.openParenthesis||this.current.nodes.every(function(ne){return ne.type==="comment"})?(this.spaces=this.optionalSpace(X),this.position++):this.position===this.tokens.length-1||this.nextToken[t.FIELDS.TYPE]===c.comma||this.nextToken[t.FIELDS.TYPE]===c.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(X),this.position++):this.combinator()},te.string=function(){var X=this.currToken;this.newNode(new o.default({value:this.content(),source:j(X),sourceIndex:X[t.FIELDS.START_POS]})),this.position++},te.universal=function(X){var ne=this.nextToken;if(ne&&this.content(ne)==="|")return this.position++,this.namespace();var Y=this.currToken;this.newNode(new v.default({value:this.content(),source:j(Y),sourceIndex:Y[t.FIELDS.START_POS]}),X),this.position++},te.splitWord=function(X,ne){for(var Y=this,J=this.nextToken,re=this.content();J&&~[c.dollar,c.caret,c.equals,c.word].indexOf(J[t.FIELDS.TYPE]);){this.position++;var ae=this.content();if(re+=ae,ae.lastIndexOf("\\")===ae.length-1){var de=this.nextToken;de&&de[t.FIELDS.TYPE]===c.space&&(re+=this.requiredSpace(this.content(de)),this.position++)}J=this.nextToken}var ce=ee(re,".").filter(function(ke){var be=re[ke-1]==="\\",ge=/^\d+\.\d+%$/.test(re);return!be&&!ge}),we=ee(re,"#").filter(function(ke){return re[ke-1]!=="\\"}),Ie=ee(re,"#{");Ie.length&&(we=we.filter(function(ke){return!~Ie.indexOf(ke)}));var me=(0,a.default)(function(){var ke=Array.prototype.concat.apply([],arguments);return ke.filter(function(be,ge){return ge===ke.indexOf(be)})}([0].concat(ce,we)));me.forEach(function(ke,be){var ge,_e=me[be+1]||re.length,ve=re.slice(ke,_e);if(be===0&&ne)return ne.call(Y,ve,me.length);var Ce=Y.currToken,Te=Ce[t.FIELDS.START_POS]+me[be],xe=M(Ce[1],Ce[2]+ke,Ce[3],Ce[2]+(_e-1));if(~ce.indexOf(ke)){var fe={value:ve.slice(1),source:xe,sourceIndex:Te};ge=new T.default(K(fe,"value"))}else if(~we.indexOf(ke)){var Ne={value:ve.slice(1),source:xe,sourceIndex:Te};ge=new i.default(K(Ne,"value"))}else{var Re={value:ve,source:xe,sourceIndex:Te};K(Re,"value"),ge=new e.default(Re)}Y.newNode(ge,X),X=null}),this.position++},te.word=function(X){var ne=this.nextToken;return ne&&this.content(ne)==="|"?(this.position++,this.namespace()):this.splitWord(X)},te.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},te.parse=function(X){switch(this.currToken[t.FIELDS.TYPE]){case c.space:this.space();break;case c.comment:this.comment();break;case c.openParenthesis:this.parentheses();break;case c.closeParenthesis:X&&this.missingParenthesis();break;case c.openSquare:this.attribute();break;case c.dollar:case c.caret:case c.equals:case c.word:this.word();break;case c.colon:this.pseudo();break;case c.comma:this.comma();break;case c.asterisk:this.universal();break;case c.ampersand:this.nesting();break;case c.slash:case c.combinator:this.combinator();break;case c.str:this.string();break;case c.closeSquare:this.missingSquareBracket();case c.semicolon:this.missingBackslash();default:this.unexpected()}},te.expected=function(X,ne,Y){if(Array.isArray(X)){var J=X.pop();X=X.join(", ")+" or "+J}var re=/^[aeiou]/.test(X[0])?"an":"a";return Y?this.error("Expected "+re+" "+X+', found "'+Y+'" instead.',{index:ne}):this.error("Expected "+re+" "+X+".",{index:ne})},te.requiredSpace=function(X){return this.options.lossy?" ":X},te.optionalSpace=function(X){return this.options.lossy?"":X},te.lossySpace=function(X,ne){return this.options.lossy?ne?" ":"":X},te.parseParenthesisToken=function(X){var ne=this.content(X);return X[t.FIELDS.TYPE]===c.space?this.requiredSpace(ne):ne},te.newNode=function(X,ne){return ne&&(/^ +$/.test(ne)&&(this.options.lossy||(this.spaces=(this.spaces||"")+ne),ne=!0),X.namespace=ne,K(X,"namespace")),this.spaces&&(X.spaces.before=this.spaces,this.spaces=""),this.current.append(X)},te.content=function(X){return X===void 0&&(X=this.currToken),this.css.slice(X[t.FIELDS.START_POS],X[t.FIELDS.END_POS])},te.locateNextMeaningfulToken=function(X){X===void 0&&(X=this.position+1);for(var ne=X;ne<this.tokens.length;){if(!W[this.tokens[ne][t.FIELDS.TYPE]])return ne;ne++}return-1},ie=$,(ue=[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}])&&B(ie.prototype,ue),Object.defineProperty(ie,"prototype",{writable:!1}),$}();O.default=se,Q.exports=O.default},5238:(Q,O,y)=>{let N=y(3152);class b extends N{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(u){u&&u.value!==void 0&&typeof u.value!="string"&&(u={...u,value:String(u.value)}),super(u),this.type="decl"}}Q.exports=b,b.default=b},5239:(Q,O,y)=>{y.d(O,{O:()=>T});var N=y(205),b=y(1245);class n{constructor(i,e,o,d){this.leftNode=null,this.rightNode=null,this.variants=[],this.height=1,this.key=i,this.value=e,this.leftNode=o,this.rightNode=d,this.currentNode=null}addCurrentNode(i,e){return e==null?e=i:(i.value.typeId!=e.value.typeId&&(e.currentNode=this.addCurrentNode(i,e.currentNode)),e)}addCurrentNodeType(i,e){if(e==null)return i;let o=!1;i.value.id==e.value.id&&(o=!0);for(let d=0;d<e.variants.length;d++)e.variants[d].value.id==i.value.id&&(o=!0);return o||e.variants.push(i),e}getMax(i,e){return i>e?i:e}addNode(i,e,o){if(e==null)return(0,b.dispatchIdEvent)(i.value.ofTheConceptId),i;let d=e.leftNode,f=e.rightNode;if(i.key<e.key)e.leftNode=this.addNode(i,d,o);else{if(!(i.key>e.key))return e;e.rightNode=this.addNode(i,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}addTypeNode(i,e,o){if(i.value.typeId!=0){if(e==null)return i;let d=e.leftNode,f=e.rightNode;if(e.key>i.key)e.leftNode=this.addTypeNode(i,d,o);else{if(!(e.key<i.key))return e.key==i.key&&e.key!=0&&e.addCurrentNodeType(i,e),e;e.rightNode=this.addTypeNode(i,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(i.key<e.leftNode.key)return this.rightRotate(e);if(i.key>e.leftNode.key)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(i.key>e.rightNode.key)return this.leftRotate(e);if(i.key<e.rightNode.key)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}}return e}rightRotate(i){if(i){let e=i.leftNode;if(e){let o=e.rightNode;return i.leftNode=o,e.rightNode=i,i.height=this.getMax(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,e}throw console.log("this is the error in right rotation",i,e),new Error("Cannot perform right rotation: left node is null.")}return i}leftRotate(i){if(i){let e=i.rightNode;if(e){let o=e.leftNode;return e.leftNode=i,i.rightNode=o,i.height=this.getMax(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(i.rightNode))+1,e}throw console.log("this is the error in left rotation",i,e),new Error("Cannot perform left rotation: right node is null.")}return i}getHeight(i){return i?i.height:0}getBalanceFactor(i){return i==null?0:this.getHeight(i.leftNode)-this.getHeight(i.rightNode)}getFromNode(i,e){try{if(e)return i==e.key?(e.value.count?e.value.count++:e.value.count=1,e):i<e.key?this.getFromNode(i,e.leftNode):i>e.key?this.getFromNode(i,e.rightNode):e}catch{console.log("this is the exception",i,e,e?.leftNode,e?.rightNode)}return e}getCharacterFromNode(i,e){return e&&(i==e.key?e:i<e.key?this.getCharacterFromNode(i,e.leftNode):i>e.key?this.getCharacterFromNode(i,e.rightNode):e)}checkIfIdsInNode(i,e,o,d){if(i){if(e.includes(i.key)){o.push(i.value);let f=e.indexOf(i.key);e.splice(f,1)}i.leftNode&&this.checkIfIdsInNode(i.leftNode,e,o,d),i.rightNode&&this.checkIfIdsInNode(i.rightNode,e,o,d)}}traverse(i){let e=0;return i&&(e+=1,i?.leftNode&&(e+=this.traverse(i.leftNode)),i.rightNode&&(e+=this.traverse(i.rightNode))),e}removeNode(i,e){if(i==null)return i;if(i.key>e)return i.leftNode=this.removeNode(i.leftNode,e),i;if(i.key<e)return i.rightNode=this.removeNode(i.rightNode,e),i;if(new Event(`${i.value.ofTheConceptId}`),(0,b.dispatchIdEvent)(i.value.ofTheConceptId),i.leftNode==null){let o=i.rightNode;return i=null,o}if(i.rightNode==null){let o=i.leftNode;return i=null,o}{let o=this.inOrderSuccessor(i.rightNode);return i.value=o.value,i.key=o.key,i.variants=o.variants,i.currentNode=o.currentNode,i.rightNode=this.removeNode(i.rightNode,o.key),i}}removeNodeWithVariants(i,e,o){if(i==null)return i;if(i.key>e)return i.leftNode=this.removeNodeWithVariants(i.leftNode,e,o),i;if(i.key<e)return i.rightNode=this.removeNodeWithVariants(i.rightNode,e,o),i;if(i.variants.length>0){if(i.value.id==o){let d=i.variants[0];if(d)return i.value=d.value,i.key=d.key,i.currentNode=d.currentNode,i.variants.splice(0,1),i}else for(let d=0;d<i.variants.length;d++)if(o==i.variants[d].value.id)return i.variants.splice(d,1),i}if(i.leftNode==null){let d=i.rightNode;return i=null,d}if(i.rightNode==null){let d=i.leftNode;return i=null,d}{let d=this.inOrderSuccessor(i.rightNode);return i.value=d.value,i.key=d.key,i.variants=d.variants,i.currentNode=d.currentNode,i.rightNode=this.removeNodeWithVariants(i.rightNode,d.key,o),i}}inOrderSuccessor(i){for(;i.leftNode!=null;)i=i.leftNode;return i}}var u=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,[])).next())})};class T{static addNodeToTree(i){try{if(this.connectionroot==null)return this.connectionroot=i,this.connectionroot;this.connectionroot=this.connectionroot.addNode(i,this.connectionroot,this.connectionroot.height)}catch(e){throw console.log("This is the error in making the tree",e),e}}static addConnectionToTree(i){let e=new n(i.id,i,null,null);this.addNodeToTree(e)}static traverse(){var i;return(i=this.connectionroot)===null||i===void 0?void 0:i.traverse(this.connectionroot)}static waitForDataToLoad(){return u(this,void 0,void 0,function*(){return new Promise((i,e)=>{this.checkFlag(i),setTimeout(()=>{e("not")},25e3)})})}static checkFlag(i){if(N.B.isConnectionLoaded)return i("done");setTimeout(T.checkFlag,1e3,i)}static removeNodeFromTree(i){return u(this,void 0,void 0,function*(){this.connectionroot&&(this.connectionroot=this.connectionroot.removeNode(this.connectionroot,i))})}static getNodeFromTree(i){return u(this,void 0,void 0,function*(){try{return this.connectionroot?this.connectionroot.getFromNode(i,this.connectionroot):this.connectionroot}catch{console.log("this is the getNodeFromTree",i,this.connectionroot)}})}static getConnectionListFromIds(i,e,o){return u(this,void 0,void 0,function*(){this.connectionroot&&this.connectionroot.checkIfIdsInNode(this.connectionroot,i,e,o)})}}T.connectionroot=null},5257:(Q,O,y)=>{y.d(O,{R:()=>u});var N=y(9003),b=y(3075),n=function(T,w,i,e){return new(i||(i=Promise))(function(o,d){function f(r){try{S(e.next(r))}catch(a){d(a)}}function v(r){try{S(e.throw(r))}catch(a){d(a)}}function S(r){var a;r.done?o(r.value):(a=r.value,a instanceof i?a:new i(function(t){t(a)})).then(f,v)}S((e=e.apply(T,[])).next())})};class u{static AddConceptId(w){this.localId=w.value,(0,N.kH)("localid",w)}static getConceptId(){return n(this,void 0,void 0,function*(){try{if(this.localId){if(this.ReservedLocalId.length<5){yield(0,b.EO)().then(()=>{let i=this.localId;for(let e=1;e<10;e++){let o=this.localId-e;this.ReservedLocalId.push(o),i=o}this.AddConceptId({id:0,value:i})}).catch(i=>(console.log(" getid: cannot get the id from indexdb"),-Math.floor(1e8*Math.random())));let w=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),w}{let w=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),w}}return yield(0,b.EO)().then(()=>{let w=this.localId;for(let i=1;i<10;i++){let e=this.localId-i;this.ReservedLocalId.push(e),w=e}this.AddConceptId({id:0,value:w})}),this.getConceptId()}catch(w){return console.log(" getid: this is the eror in concept",w),-Math.floor(1e8*Math.random())}})}static AddConnectionId(w){this.localConnectionId=w.value}static getConnectionId(){return n(this,void 0,void 0,function*(){try{if(this.localConnectionId){if(this.ReservedConnectionId.length<5){yield(0,b.xd)().then(()=>{let i=this.localConnectionId;for(let e=1;e<10;e++){let o=this.localConnectionId-e;this.ReservedConnectionId.push(o),i=o}}).catch(i=>(console.log("this is the new event",i),-Math.floor(1e8*Math.random())));let w=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),w}{let w=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),w}}return yield(0,b.xd)().then(()=>{let w=this.localConnectionId;for(let i=1;i<10;i++){let e=this.localConnectionId-i;this.ReservedConnectionId.push(e),w=e}this.AddConnectionId({id:1,value:w})}),this.getConnectionId()}catch{return-Math.floor(1e8*Math.random())}})}}u.ReservedLocalId=[],u.ReservedConnectionId=[]},5284:(Q,O,y)=>{y.d(O,{B:()=>T});var N=y(1245),b=y(8286),n=y(1863),u=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,i||[])).next())})};function T(){return u(this,arguments,void 0,function*(w=[]){const i=N.Logger.logfunction("FindConnectionsOfCompositionsBulkInMemory",[w.length])||{};let e=[];try{if(N.serviceWorker){i.serviceWorker=!0;try{const o=yield(0,N.sendMessage)("FindConnectionsOfCompositionsBulkInMemory",{composition_ids:w});return N.Logger.logUpdate(i),o.data}catch(o){console.error("FindConnectionsOfCompositionsBulkInMemory sw error: ",o),(0,n.ey)(i,"FindConnectionsOfCompositionsBulkInMemory",o),(0,N.handleServiceWorkerException)(o)}}for(let o=0;o<w.length;o++){let d=yield b.d.GetConnectionsOfConcept(w[o]);e.push(...d)}return N.Logger.logUpdate(i),e}catch(o){return console.error("FindConnectionsOfCompositionsBulkInMemory error: ",o),(0,n.ey)(i,"FindConnectionsOfCompositionsBulkInMemory",o),e}})}},5286:(Q,O)=>{function y(b){for(var n=b.toLowerCase(),u="",T=!1,w=0;w<6&&n[w]!==void 0;w++){var i=n.charCodeAt(w);if(T=i===32,!(i>=97&&i<=102||i>=48&&i<=57))break;u+=n[w]}if(u.length!==0){var e=parseInt(u,16);return e>=55296&&e<=57343||e===0||e>1114111?["ï¿½",u.length+(T?1:0)]:[String.fromCodePoint(e),u.length+(T?1:0)]}}O.__esModule=!0,O.default=function(b){if(!N.test(b))return b;for(var n="",u=0;u<b.length;u++)if(b[u]!=="\\")n+=b[u];else{var T=y(b.slice(u+1,u+7));if(T!==void 0){n+=T[0],u+=T[1];continue}if(b[u+1]==="\\"){n+="\\",u++;continue}b.length===u+1&&(n+=b[u])}return n};var N=/\\/;Q.exports=O.default},5312:(Q,O,y)=>{y.d(O,{NK:()=>d,Ve:()=>f,cf:()=>e,vw:()=>v,y8:()=>o});var N=y(2832),b=y(3130),n=y(1245),u=y(1863),T=y(6687),w=y(1320),i=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,r||[])).next())})};function e(S){var r=arguments;return i(this,arguments,void 0,function*(a,t="",c=null,C=b.y0){var m,I,E,L,B,D,W,U;const P=n.Logger.logfunction("SearchLinkMultipleAll",r)||{};try{try{if(n.serviceWorker){P.serviceWorker=!0;const ue=yield(0,n.sendMessage)("SearchLinkMultipleAll",{searchQuery:a,token:t,caller:c,format:C});return n.Logger.logUpdate(P),ue.data}}catch(ue){console.error("SearchLinkMultipleAll error sw: ",ue),(0,u.ey)(P,"SearchLinkMultipleAll",ue),(0,n.handleServiceWorkerException)(ue)}let M=[],j=[],z=[],K=[],ee=a[0].composition,se={},$={};c?.isDataLoaded?(se.compositionIds=(m=c.conceptIds)===null||m===void 0?void 0:m.slice(),se.internalConnections=(I=c.internalConnections)===null||I===void 0?void 0:I.slice(),se.linkers=(E=c.linkers)===null||E===void 0?void 0:E.slice(),se.reverse=(L=c.reverse)===null||L===void 0?void 0:L.slice(),$=se,M=$.compositionIds,z=$.internalConnections,j=$.linkers,K=$.reverse):(se=yield(0,N.j)(a,t),c&&(c.conceptIds=(B=se.compositionIds)===null||B===void 0?void 0:B.slice(),c.internalConnections=(D=se.internalConnections)===null||D===void 0?void 0:D.slice(),c.linkers=(W=se.linkers)===null||W===void 0?void 0:W.slice(),c.reverse=(U=se.reverse)===null||U===void 0?void 0:U.slice(),c.isDataLoaded=!0),$=se,M=$.compositionIds,z=$.internalConnections,j=$.linkers,K=$.reverse);let ie=yield function(ue,te,X,ne,Y,J){return i(this,arguments,void 0,function*(re,ae,de,ce,we,Ie,me=b.y0){try{let ke,be,ge=yield(0,T.QL)(re);return me==b.ZJ?(ke=yield(0,T.MT)(ae,de),be=yield v(re,ke,we,ce)):me==b.yv?(ke=yield(0,T.D)(ae,de),be=yield v(re,ke,we,ce)):me==100?(ke=yield(0,T.nr)(ae,de),be=yield o(ge,ke,we,ce)):me==b.SL?be=yield(0,w._W)(re,ae,de,Ie.ofCompositions,ce):(ke=yield(0,T.rv)(ae,de),be=yield o(ge,ke,we,ce)),be}catch(ke){return void console.log("Error Occured in build layer",ke)}})}(j,M,z,K,ee,a[0],C);return n.Logger.logUpdate(P),ie}catch(M){throw console.log("this is the error in the search link multiple",M),(0,u.ey)(P,"SearchLinkMultipleAll",M),M}})}function o(S,r,a){return i(this,arguments,void 0,function*(t,c,C,m=[]){new Date().getTime();let I={},E=[];for(let L=0;L<t.length;L++)E.push(t[L].toTheConceptId),E.push(t[L].ofTheConceptId),E.push(t[L].typeId);t.sort(function(L,B){return B.id-L.id});for(let L=0;L<t.length;L++){let B=!1;if(m.includes(t[L].id)&&(B=!0),B==1){if(c[t[L].ofTheConceptId]&&c[t[L].toTheConceptId]){let D=c[t[L].toTheConceptId],W=yield(0,n.GetTheConcept)(t[L].typeId),U=D?.data,P=Object.keys(U)[0];try{let M=W.characterValue+"_reverse";typeof U=="string"&&(U={}),Array.isArray(U[P][M])||(typeof U[P]=="string"&&(U[P]={}),U[P][M]=[]),U[P][M].push(c[t[L].ofTheConceptId])}catch(M){console.log("this is error",M)}}}else if(c[t[L].ofTheConceptId]&&c[t[L].toTheConceptId]){let D=c[t[L].ofTheConceptId],W=yield(0,n.GetTheConcept)(t[L].typeId),U=D?.data,P=Object.keys(U)[0];try{typeof U=="string"&&(U={}),Array.isArray(U[P][W.characterValue])||(typeof U[P]=="string"&&(U[P]={}),U[P][W.characterValue]=[]),U[P][W.characterValue].push(c[t[L].toTheConceptId])}catch(M){console.log("this is error",M)}}}return I=c[C],I})}function d(S,r,a){return i(this,arguments,void 0,function*(t,c,C,m=[]){let I=[],E=[];for(let L=0;L<t.length;L++)E.push(t[L].toTheConceptId),E.push(t[L].ofTheConceptId),E.push(t[L].typeId);t.sort(function(L,B){return B.id-L.id});for(let L=0;L<t.length;L++){let B=!1;if(m.includes(t[L].id)&&(B=!0),B==1){if(c[t[L].ofTheConceptId]&&c[t[L].toTheConceptId]){let D=c[t[L].toTheConceptId],W=yield(0,n.GetTheConcept)(t[L].typeId),U=Object.keys(D)[0];try{let P=W.characterValue+"_reverse";typeof D=="string"&&(D={}),Array.isArray(D[U][P])||(typeof D[U]=="string"&&(D[U]={}),D[U][P]=[]),D[U][P].push(c[t[L].ofTheConceptId])}catch(P){console.log("this is error",P)}}}else if(c[t[L].ofTheConceptId]&&c[t[L].toTheConceptId]){let D=c[t[L].ofTheConceptId],W=yield(0,n.GetTheConcept)(t[L].typeId),U=Object.keys(D)[0];try{typeof D=="string"&&(D={}),Array.isArray(D[U][W.characterValue])||(typeof D[U]=="string"&&(D[U]={}),D[U][W.characterValue]=[]),D[U][W.characterValue].push(c[t[L].toTheConceptId])}catch(P){console.log("this is error",P)}}}for(let L=0;L<C.length;L++){let B=c[C[L]];B&&I.push(B)}return I})}function f(S,r,a,t){return i(this,arguments,void 0,function*(c,C,m,I,E=[]){new Date().getTime();let L=[],B=[];for(let D=0;D<c.length;D++)B.push(c[D].toTheConceptId),B.push(c[D].ofTheConceptId),B.push(c[D].typeId);c.sort(function(D,W){return W.id-D.id});for(let D=0;D<c.length;D++){let W=!1;if(E.includes(c[D].id)&&(W=!0),W==1){if(C[c[D].ofTheConceptId]&&C[c[D].toTheConceptId]){let U=C[c[D].toTheConceptId],P=yield(0,n.GetTheConcept)(c[D].typeId),M=U?.data,j=Object.keys(M)[0];try{let z=P.characterValue+"_reverse";typeof M=="string"&&(M={}),Array.isArray(M[j][z])||(typeof M[j]=="string"&&(M[j]={}),M[j][z]=[]),M[j][z].push(C[c[D].ofTheConceptId])}catch(z){console.log("this is error",z)}}}else if(C[c[D].ofTheConceptId]&&C[c[D].toTheConceptId]){let U=C[c[D].ofTheConceptId],P=yield(0,n.GetTheConcept)(c[D].typeId),M=U?.data,j=Object.keys(M)[0];try{typeof M=="string"&&(M={}),Array.isArray(M[j][P.characterValue])||(typeof M[j]=="string"&&(M[j]={}),M[j][P.characterValue]=[]),M[j][P.characterValue].push(C[c[D].toTheConceptId])}catch(z){console.log("this is error",z)}}}for(let D=0;D<I.length;D++){let W=C[I[D]];W&&L.push(W)}return L})}function v(S,r,a){return i(this,arguments,void 0,function*(t,c,C,m=[]){let I={},E=yield(0,n.GetConnectionBulk)(t),L=[];for(let B=0;B<E.length;B++)L.push(E[B].toTheConceptId),L.push(E[B].ofTheConceptId),L.push(E[B].typeId);yield(0,n.GetConceptBulk)(L),E.sort(function(B,D){return D.id-B.id});for(let B=0;B<E.length;B++){let D=!1;if(m.includes(E[B].id)&&(D=!0),D==1){if(c[E[B].ofTheConceptId]&&c[E[B].toTheConceptId]){let W=c[E[B].toTheConceptId],U=yield(0,n.GetTheConcept)(E[B].typeId),P=W,M=Object.keys(P)[0];try{let j=U.characterValue+"_reverse";typeof P=="string"&&(P={}),Array.isArray(P[M][j])||(typeof P[M]=="string"&&(P[M]={}),P[M][j]=[]),P[M][j].push(c[E[B].ofTheConceptId])}catch(j){console.log("this is error",j)}}}else if(c[E[B].ofTheConceptId]&&c[E[B].toTheConceptId]){let W=c[E[B].ofTheConceptId],U=yield(0,n.GetTheConcept)(E[B].typeId),P=W,M=Object.keys(P)[0];try{typeof P=="string"&&(P={}),Array.isArray(P[M][U.characterValue])||(typeof P[M]=="string"&&(P[M]={}),P[M][U.characterValue]=[]),P[M][U.characterValue].push(c[E[B].toTheConceptId])}catch(j){console.log("this is error",j)}}}return I=c[C],I})}},5328:(Q,O,y)=>{y.d(O,{d:()=>i});var N=y(1245),b=y(3130),n=y(8939),u=y(4287),T=function(e,o,d,f){return new(d||(d=Promise))(function(v,S){function r(c){try{t(f.next(c))}catch(C){S(C)}}function a(c){try{t(f.throw(c))}catch(C){S(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof d?C:new d(function(m){m(C)})).then(r,a)}t((f=f.apply(e,[])).next())})};class w extends u.w{constructor(o,d,f,v,S){super(),this.connections=[],this.data=[],this.mainConcept=o,this.linker=d,this.inpage=f,this.page=v,this.format=S}bind(){return T(this,void 0,void 0,function*(){var o;if(!this.isDataLoaded){let v=yield(0,N.GetTheConcept)(this.mainConcept),S=((o=v.type)===null||o===void 0?void 0:o.characterValue)+"_s_"+this.linker,r=yield(0,N.GetConceptByCharacterAndType)(S,16);if(r.id>0){let a=yield(0,N.GetConnectionOfTheConcept)(r.id,v.id,v.userId,this.inpage,this.page);this.connections=a;for(var d=[],f=0;f<this.connections.length;f++)d.push(this.connections[f].toTheConceptId),this.linkers.push(this.connections[f].id),this.listenToEvent(this.connections[f].toTheConceptId);yield(0,N.GetAllConnectionsOfCompositionBulk)(d)}this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return T(this,void 0,void 0,function*(){this.data=[],this.connections=yield(0,N.GetConnectionBulk)(this.linkers);for(var o=0;o<this.connections.length;o++){let d=this.connections[o].toTheConceptId,f=yield(0,N.GetTheConcept)(d);if(console.log("this is the format",this.format),this.format==b.yv){let v=yield(0,n.RW)(f.id);this.data.push(v)}else if(this.format==b.ZJ){let v=yield(0,n.kx)(f.id);this.data.push(v)}else if(this.format==b.iw){let v=yield(0,N.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}else{let v=yield(0,N.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}}return this.data})}}function i(e,o,d,f,v=b.yv){return new w(e,o,d,f,v)}},5457:(Q,O,y)=>{y.d(O,{c:()=>w});var N=y(1245),b=y(7282),n=y(205);class u{constructor(e,o){this.value=[],this.height=1,this.key=e,this.value.push(o),this.leftNode=null,this.rightNode=null,this.currentNode=null}addType(e,o,d){var f,v,S,r;if(e==null)return(0,N.dispatchIdEvent)(o,{detail:d}),new u(o,d);if(o<e.key)e.leftNode=this.addType(e.leftNode,o,d);else{if(!(o>e.key))return e.value.includes(d)||((0,N.dispatchIdEvent)(o,{detail:d}),e.value.push(d)),e;e.rightNode=this.addType(e.rightNode,o,d)}e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1;const a=this.getBalanceFactor(e);return a>1&&o<((f=e.leftNode)===null||f===void 0?void 0:f.key)?this.rightRotate(e):a<-1&&o>((v=e.rightNode)===null||v===void 0?void 0:v.key)?this.leftRotate(e):a>1&&o>((S=e.leftNode)===null||S===void 0?void 0:S.key)?(e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)):a<-1&&o<((r=e.rightNode)===null||r===void 0?void 0:r.key)?(e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)):e}rightRotate(e){if(e){let o=e.leftNode;if(o){let d=o.rightNode;return e.leftNode=d,o.rightNode=e,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(o.rightNode))+1,o}}return e}leftRotate(e){if(e){let o=e.rightNode;if(o){let d=o.leftNode;return o.leftNode=e,e.rightNode=d,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(e.rightNode))+1,o}}return e}getHeight(e){return e?e.height:0}getBalanceFactor(e){return e==null?0:this.getHeight(e.leftNode)-this.getHeight(e.rightNode)}getFromNode(e,o){return o&&(e==o.key?o:e<o.key?this.getFromNode(e,o.leftNode):e>o.key?this.getFromNode(e,o.rightNode):o)}removeNodeWithVariants(e,o,d){if(e==null)return e;if(e.key>o)return e.leftNode=this.removeNodeWithVariants(e.leftNode,o,d),e;if(e.key<o)return e.rightNode=this.removeNodeWithVariants(e.rightNode,o,d),e;if(e.value.length>0){for(let f=0;f<e.value.length;f++)if(d==e.value[f])return e.value.splice(f,1),e}if(e.leftNode==null){let f=e.rightNode;return e=null,f}if(e.rightNode==null){let f=e.leftNode;return e=null,f}{let f=this.inOrderSuccessor(e.rightNode);return e.value=f.value,e.key=f.key,e.currentNode=f.currentNode,e.rightNode=this.removeNodeWithVariants(e.rightNode,f.key,d),e}}countNodeBelow(e){return e==null?0:1+this.countNodeBelow(e.leftNode)+this.countNodeBelow(e.rightNode)}inOrderSuccessor(e){for(;e.leftNode!=null;)e=e.leftNode;return e}}var T=function(i,e,o,d){return new(o||(o=Promise))(function(f,v){function S(t){try{a(d.next(t))}catch(c){v(c)}}function r(t){try{a(d.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(C){C(c)})).then(S,r)}a((d=d.apply(i,[])).next())})};class w{static addType(e){return T(this,void 0,void 0,function*(){return this.root==null?(this.root=e,new CustomEvent(`${e.key}`,{detail:e.value[0]}),(0,N.dispatchIdEvent)(e.key,{detail:e.value[0]}),this.root):(this.root=this.root.addType(this.root,e.key,e.value[0]),this.root)})}static addConceptToTree(e){if(e.typeId!=0){let o=new u(e.typeId,e.id);this.addType(o)}}static removeTypeConcept(e,o){this.root&&(this.root=this.root.removeNodeWithVariants(this.root,e,o))}static getNodeFromTreeNew(e){return this.root?this.root.getFromNode(e,this.root):this.root}static getTypeVariantsFromTreeNew(e){return T(this,void 0,void 0,function*(){let o=this.getNodeFromTreeNew(e),d=[],f=[];if(o){d=o.value;for(let v=0;v<d.length;v++){let S=!1;for(let r=0;r<f.length;r++)f[r].id==d[v]&&(S=!0);S||f.push(yield(0,N.GetTheConcept)(d[v]))}}return f})}static waitForDataToLoad(){return T(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isTypeLoaded)return e("done");setTimeout(w.checkFlag,1e3,e)}static getTypeVariantsFromTreeWithUserIdNew(e,o){return T(this,void 0,void 0,function*(){let d=[],f=yield this.getTypeVariantsFromTreeNew(e);console.log("these are all the concepts",f);for(let v=0;v<f.length;v++)f[v].userId==o&&d.push(f[v]);return d})}static getTypeVariantsWithCharacterValueNew(e,o){return T(this,void 0,void 0,function*(){let d=yield this.getTypeVariantsFromTreeNew(o);console.log("this is all the concepts for character",d);let f=(0,b.o)();for(let v=0;v<d.length;v++)d[v].characterValue==e&&(f=d[v]);return f})}static countNumberOfNodes(){return this.typeRoot?this.typeRoot.countNodeBelow(this.typeRoot):0}}w.typeRoot=null,w.root=null},5588:(Q,O,y)=>{O.__esModule=!0,O.default=void 0,O.unescapeValue=r;var N,b=w(y(8937)),n=w(y(5286)),u=w(y(3295)),T=y(1581);function w(C){return C&&C.__esModule?C:{default:C}}function i(C,m){for(var I=0;I<m.length;I++){var E=m[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(C,E.key,E)}}function e(C,m){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,E){return I.__proto__=E,I},e(C,m)}var o=y(4643),d=/^('|")([^]*)\1$/,f=o(function(){},"Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead."),v=o(function(){},"Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead."),S=o(function(){},"Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.");function r(C){var m=!1,I=null,E=C,L=E.match(d);return L&&(I=L[1],E=L[2]),(E=(0,n.default)(E))!==C&&(m=!0),{deprecatedUsage:m,unescaped:E,quoteMark:I}}var a=function(C){var m,I;function E(W){var U;return W===void 0&&(W={}),U=C.call(this,function(P){if(P.quoteMark!==void 0||P.value===void 0)return P;S();var M=r(P.value),j=M.quoteMark,z=M.unescaped;return P.raws||(P.raws={}),P.raws.value===void 0&&(P.raws.value=P.value),P.value=z,P.quoteMark=j,P}(W))||this,U.type=T.ATTRIBUTE,U.raws=U.raws||{},Object.defineProperty(U.raws,"unquoted",{get:o(function(){return U.value},"attr.raws.unquoted is deprecated. Call attr.value instead."),set:o(function(){return U.value},"Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.")}),U._constructed=!0,U}I=C,(m=E).prototype=Object.create(I.prototype),m.prototype.constructor=m,e(m,I);var L,B,D=E.prototype;return D.getQuotedValue=function(W){W===void 0&&(W={});var U=this._determineQuoteMark(W),P=t[U];return(0,b.default)(this._value,P)},D._determineQuoteMark=function(W){return W.smart?this.smartQuoteMark(W):this.preferredQuoteMark(W)},D.setValue=function(W,U){U===void 0&&(U={}),this._value=W,this._quoteMark=this._determineQuoteMark(U),this._syncRawValue()},D.smartQuoteMark=function(W){var U=this.value,P=U.replace(/[^']/g,"").length,M=U.replace(/[^"]/g,"").length;if(P+M===0){var j=(0,b.default)(U,{isIdentifier:!0});if(j===U)return E.NO_QUOTE;var z=this.preferredQuoteMark(W);if(z===E.NO_QUOTE){var K=this.quoteMark||W.quoteMark||E.DOUBLE_QUOTE,ee=t[K];if((0,b.default)(U,ee).length<j.length)return K}return z}return M===P?this.preferredQuoteMark(W):M<P?E.DOUBLE_QUOTE:E.SINGLE_QUOTE},D.preferredQuoteMark=function(W){var U=W.preferCurrentQuoteMark?this.quoteMark:W.quoteMark;return U===void 0&&(U=W.preferCurrentQuoteMark?W.quoteMark:this.quoteMark),U===void 0&&(U=E.DOUBLE_QUOTE),U},D._syncRawValue=function(){var W=(0,b.default)(this._value,t[this.quoteMark]);W===this._value?this.raws&&delete this.raws.value:this.raws.value=W},D._handleEscapes=function(W,U){if(this._constructed){var P=(0,b.default)(U,{isIdentifier:!0});P!==U?this.raws[W]=P:delete this.raws[W]}},D._spacesFor=function(W){var U=this.spaces[W]||{},P=this.raws.spaces&&this.raws.spaces[W]||{};return Object.assign({before:"",after:""},U,P)},D._stringFor=function(W,U,P){U===void 0&&(U=W),P===void 0&&(P=c);var M=this._spacesFor(U);return P(this.stringifyProperty(W),M)},D.offsetOf=function(W){var U=1,P=this._spacesFor("attribute");if(U+=P.before.length,W==="namespace"||W==="ns")return this.namespace?U:-1;if(W==="attributeNS"||(U+=this.namespaceString.length,this.namespace&&(U+=1),W==="attribute"))return U;U+=this.stringifyProperty("attribute").length,U+=P.after.length;var M=this._spacesFor("operator");U+=M.before.length;var j=this.stringifyProperty("operator");if(W==="operator")return j?U:-1;U+=j.length,U+=M.after.length;var z=this._spacesFor("value");U+=z.before.length;var K=this.stringifyProperty("value");return W==="value"?K?U:-1:(U+=K.length,U+=z.after.length,U+=this._spacesFor("insensitive").before.length,W==="insensitive"&&this.insensitive?U:-1)},D.toString=function(){var W=this,U=[this.rawSpaceBefore,"["];return U.push(this._stringFor("qualifiedAttribute","attribute")),this.operator&&(this.value||this.value==="")&&(U.push(this._stringFor("operator")),U.push(this._stringFor("value")),U.push(this._stringFor("insensitiveFlag","insensitive",function(P,M){return!(P.length>0)||W.quoted||M.before.length!==0||W.spaces.value&&W.spaces.value.after||(M.before=" "),c(P,M)}))),U.push("]"),U.push(this.rawSpaceAfter),U.join("")},L=E,(B=[{key:"quoted",get:function(){var W=this.quoteMark;return W==="'"||W==='"'},set:function(W){v()}},{key:"quoteMark",get:function(){return this._quoteMark},set:function(W){this._constructed?this._quoteMark!==W&&(this._quoteMark=W,this._syncRawValue()):this._quoteMark=W}},{key:"qualifiedAttribute",get:function(){return this.qualifiedName(this.raws.attribute||this.attribute)}},{key:"insensitiveFlag",get:function(){return this.insensitive?"i":""}},{key:"value",get:function(){return this._value},set:function(W){if(this._constructed){var U=r(W),P=U.deprecatedUsage,M=U.unescaped,j=U.quoteMark;if(P&&f(),M===this._value&&j===this._quoteMark)return;this._value=M,this._quoteMark=j,this._syncRawValue()}else this._value=W}},{key:"insensitive",get:function(){return this._insensitive},set:function(W){W||(this._insensitive=!1,!this.raws||this.raws.insensitiveFlag!=="I"&&this.raws.insensitiveFlag!=="i"||(this.raws.insensitiveFlag=void 0)),this._insensitive=W}},{key:"attribute",get:function(){return this._attribute},set:function(W){this._handleEscapes("attribute",W),this._attribute=W}}])&&i(L.prototype,B),Object.defineProperty(L,"prototype",{writable:!1}),E}(u.default);O.default=a,a.NO_QUOTE=null,a.SINGLE_QUOTE="'",a.DOUBLE_QUOTE='"';var t=((N={"'":{quotes:"single",wrap:!0},'"':{quotes:"double",wrap:!0}}).null={isIdentifier:!0},N);function c(C,m){return""+m.before+C+m.after}},5644:(Q,O,y)=>{let N,b,n=y(7793);class u extends n{constructor(w){super(w),this.type="root",this.nodes||(this.nodes=[])}normalize(w,i,e){let o=super.normalize(w);if(i){if(e==="prepend")this.nodes.length>1?i.raws.before=this.nodes[1].raws.before:delete i.raws.before;else if(this.first!==i)for(let d of o)d.raws.before=i.raws.before}return o}removeChild(w,i){let e=this.index(w);return!i&&e===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[e].raws.before),super.removeChild(w)}toResult(w={}){return new N(new b,this,w).stringify()}}u.registerLazyResult=T=>{N=T},u.registerProcessor=T=>{b=T},Q.exports=u,u.default=u,n.registerRoot(u)},5781:Q=>{const C=/[\t\n\f\r "#'()/;[\\\]{}]/g,m=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,I=/.[\r\n"'(/\\]/,E=/[\da-f]/i;Q.exports=function(L,B={}){let D,W,U,P,M,j,z,K,ee,se,$=L.css.valueOf(),ie=B.ignoreErrors,ue=$.length,te=0,X=[],ne=[];function Y(J){throw L.error("Unclosed "+J,te)}return{back:function(J){ne.push(J)},endOfFile:function(){return ne.length===0&&te>=ue},nextToken:function(J){if(ne.length)return ne.pop();if(te>=ue)return;let re=!!J&&J.ignoreUnclosed;switch(D=$.charCodeAt(te),D){case 10:case 32:case 9:case 13:case 12:P=te;do P+=1,D=$.charCodeAt(P);while(D===32||D===10||D===9||D===13||D===12);j=["space",$.slice(te,P)],te=P-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let ae=String.fromCharCode(D);j=[ae,ae,te];break}case 40:if(se=X.length?X.pop()[1]:"",ee=$.charCodeAt(te+1),se==="url"&&ee!==39&&ee!==34&&ee!==32&&ee!==10&&ee!==9&&ee!==12&&ee!==13){P=te;do{if(z=!1,P=$.indexOf(")",P+1),P===-1){if(ie||re){P=te;break}Y("bracket")}for(K=P;$.charCodeAt(K-1)===92;)K-=1,z=!z}while(z);j=["brackets",$.slice(te,P+1),te,P],te=P}else P=$.indexOf(")",te+1),W=$.slice(te,P+1),P===-1||I.test(W)?j=["(","(",te]:(j=["brackets",W,te,P],te=P);break;case 39:case 34:M=D===39?"'":'"',P=te;do{if(z=!1,P=$.indexOf(M,P+1),P===-1){if(ie||re){P=te+1;break}Y("string")}for(K=P;$.charCodeAt(K-1)===92;)K-=1,z=!z}while(z);j=["string",$.slice(te,P+1),te,P],te=P;break;case 64:C.lastIndex=te+1,C.test($),P=C.lastIndex===0?$.length-1:C.lastIndex-2,j=["at-word",$.slice(te,P+1),te,P],te=P;break;case 92:for(P=te,U=!0;$.charCodeAt(P+1)===92;)P+=1,U=!U;if(D=$.charCodeAt(P+1),U&&D!==47&&D!==32&&D!==10&&D!==9&&D!==13&&D!==12&&(P+=1,E.test($.charAt(P)))){for(;E.test($.charAt(P+1));)P+=1;$.charCodeAt(P+1)===32&&(P+=1)}j=["word",$.slice(te,P+1),te,P],te=P;break;default:D===47&&$.charCodeAt(te+1)===42?(P=$.indexOf("*/",te+2)+1,P===0&&(ie||re?P=$.length:Y("comment")),j=["comment",$.slice(te,P+1),te,P],te=P):(m.lastIndex=te+1,m.test($),P=m.lastIndex===0?$.length-1:m.lastIndex-2,j=["word",$.slice(te,P+1),te,P],X.push(j),te=P)}return te++,j},position:function(){return te}}}},5799:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,i)}var T=function(w){var i,e;function o(d){var f;return(f=w.call(this,d)||this).type=n.STRING,f}return e=w,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,u(i,e),o}(b.default);O.default=T,Q.exports=O.default},5868:(Q,O,y)=>{y.d(O,{k:()=>i});var N=y(3077),b=y(8357),n=y(9736),u=y(1245),T=y(1863),w=function(e,o,d,f){return new(d||(d=Promise))(function(v,S){function r(c){try{t(f.next(c))}catch(C){S(C)}}function a(c){try{t(f.throw(c))}catch(C){S(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof d?C:new d(function(m){m(C)})).then(r,a)}t((f=f.apply(e,o||[])).next())})};function i(e,o){var d=arguments;return w(this,arguments,void 0,function*(f,v,S=!1,r,a,t=999,c=0,C={concepts:[],connections:[]}){var m,I,E,L;const B=u.Logger.logfunction("MakeTheInstanceConceptLocal",d)||{};if(u.serviceWorker){B.serviceWorker=!0;try{const D=yield(0,u.sendMessage)("MakeTheInstanceConceptLocal",{type:f,referent:v,composition:S,userId:r,accessId:a,sessionInformationId:t,referentId:c,actions:C});return!((I=(m=D?.actions)===null||m===void 0?void 0:m.concepts)===null||I===void 0)&&I.length&&(C.concepts=JSON.parse(JSON.stringify(D.actions.concepts))),!((L=(E=D?.actions)===null||E===void 0?void 0:E.connections)===null||L===void 0)&&L.length&&(C.connections=JSON.parse(JSON.stringify(D.actions.connections))),u.Logger.logUpdate(B),D.data}catch(D){console.error("MakeTheInstanceConceptLocal error sw: ",D),(0,T.ey)(B,"MakeTheInstanceConceptLocal",D),(0,u.handleServiceWorkerException)(D)}}try{let D,W,U=999,P=4,M=r,j=4,z="",K=v.length;if(z=f.startsWith("the_")?f:"the_"+f,S)D=yield(0,b.$)(f,U,r,r,C),W=yield(0,N.A)(v,f,r,P,D.id,j,!0,c,C);else if(K>255)D=yield(0,b.$)(z,U,M,r,C),W=yield(0,N.A)(v,z,r,P,D.id,j,void 0,void 0,C);else{D=yield(0,b.$)(z,U,M,r,C);let ee=yield n.v.GetConceptByCharacterAndTypeLocal(v,D.id);W=ee,ee.id==0&&ee.userId==0&&(W=yield(0,N.A)(v,z,r,P,D.id,j,void 0,void 0,C))}return W.type=D,u.LocalSyncData.AddConcept(W),C.concepts.push(W),u.Logger.logUpdate(B),W}catch(D){throw(0,T.ey)(B,"MakeTheInstanceConceptLocal",D),D}})}},5976:(Q,O,y)=>{y.d(O,{p:()=>i,B:()=>w});var N=y(9581),b=y(3518),n=y(1863),u=y(1245),T=function(e,o,d,f){return new(d||(d=Promise))(function(v,S){function r(c){try{t(f.next(c))}catch(C){S(C)}}function a(c){try{t(f.throw(c))}catch(C){S(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof d?C:new d(function(m){m(C)})).then(r,a)}t((f=f.apply(e,[])).next())})};class w{static getId(){return T(this,void 0,void 0,function*(){this.ids.length<5&&(yield function(){var d,f,v,S,r=arguments;return d=this,f=void 0,S=function*(){const a=u.Logger.logfunction("GetReservedIds",r);try{let t=(0,b.Xr)("application/x-www-form-urlencoded");const c=yield fetch(N.B.GetReservedIdUrl(),{method:"GET",headers:t});if(!c.ok)throw(0,n.ry)(c),new Error(`Error! status: ${c.status}`);const C=yield c.json();for(let m=0;m<C.length;m++)w.AddId(C[m]);u.Logger.logUpdate(a)}catch(t){t instanceof Error?console.log("get reserved ids error message: ",t.message):console.log("get reserved ids  unexpected error: ",t),(0,n.Mb)(t,N.B.GetReservedIdUrl()),(0,n.ey)(a,"GetReservedIds",t)}},new((v=void 0)||(v=Promise))(function(a,t){function c(I){try{m(S.next(I))}catch(E){t(E)}}function C(I){try{m(S.throw(I))}catch(E){t(E)}}function m(I){var E;I.done?a(I.value):(E=I.value,E instanceof v?E:new v(function(L){L(E)})).then(c,C)}m((S=S.apply(d,f||[])).next())})}());var o=this.ids[0];return this.ids.shift(),o})}static AddId(o){this.ids.includes(o)||this.ids.push(o)}}w.ids=[];class i{static getId(){return T(this,void 0,void 0,function*(){this.connectionIds.length<5&&(yield function(){var d,f,v,S,r=arguments;return d=this,f=void 0,S=function*(){const a=u.Logger.logfunction("GetReservedConnectionIds",r);try{let t=(0,b.Xr)("application/x-www-form-urlencoded");const c=yield fetch(N.B.GetReservedConnectionIdUrl(),{method:"GET",headers:t});if(!c.ok)throw(0,n.ry)(c),new Error(`Error! status: ${c.status}`);const C=yield c.json();for(let m=0;m<C.length;m++)i.AddId(C[m]);u.Logger.logUpdate(a)}catch(t){t instanceof Error?console.log("get reserved connection ids error message: ",t.message):console.log("get reserved connection ids  unexpected error: ",t),(0,n.Mb)(t,N.B.GetReservedConnectionIdUrl()),(0,n.ey)(a,"GetReservedConnectionIds",t)}},new((v=void 0)||(v=Promise))(function(a,t){function c(I){try{m(S.next(I))}catch(E){t(E)}}function C(I){try{m(S.throw(I))}catch(E){t(E)}}function m(I){var E;I.done?a(I.value):(E=I.value,E instanceof v?E:new v(function(L){L(E)})).then(c,C)}m((S=S.apply(d,f||[])).next())})}());var o=this.connectionIds[0];return this.connectionIds.shift(),o})}static AddId(o){this.connectionIds.includes(o)||this.connectionIds.push(o)}}i.connectionIds=[]},6058:(Q,O,y)=>{y.d(O,{W:()=>T});var N=y(1863),b=y(3518),n=y(1245),u=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,[])).next())})};function T(w){var i=arguments;return u(this,void 0,void 0,function*(){const e=n.Logger.logfunction("GetAllLinkerConnectionsToTheConcept",i);var o=[];try{new Date().getTime();var d=(0,b.Xr)("application/x-www-form-urlencoded");const S=yield fetch(n.BaseUrl.GetAllLinkerConnectionToConceptUrl()+`?conceptId=${w}`,{method:"GET",headers:d});if(S.ok){const r=yield S.json();for(var f=0;f<r.length;f++){var v=r[f];o.push(v)}n.Logger.logUpdate(e)}else console.log("Get all linker connection To the concepts error","cannot get respone"),(0,N.ry)(S)}catch(S){S instanceof Error?console.log("Get all linker connection To the concepts error: ",S.message):console.log("Get all linker connection To the concepts error(Unexpected): ",S),(0,N.Mb)(S,n.BaseUrl.GetAllLinkerConnectionToConceptUrl()),(0,N.ey)(e,"GetAllLinkerConnectionsToTheConcept",S)}return o})}},6156:Q=>{let O={};Q.exports=function(y){O[y]||(O[y]=!0,typeof console<"u"&&console.warn&&console.warn(y))}},6291:(Q,O)=>{O.__esModule=!0,O.default=function(y){for(var N=arguments.length,b=new Array(N>1?N-1:0),n=1;n<N;n++)b[n-1]=arguments[n];for(;b.length>0;){var u=b.shift();if(!y[u])return;y=y[u]}return y},Q.exports=O.default},6416:(Q,O,y)=>{y.d(O,{u:()=>b});var N=y(2615);function b(){let n=new Date,u=new Date;return new N.j(0,0,0,0,0,"0",0,!1,n,u,"0")}},6467:(Q,O,y)=>{function N(b){const n=b.lastIndexOf("_");let u=[];return u=n>0?[b.substring(0,n),b.substring(n+1,b.length)]:[b],u}y.d(O,{f:()=>N})},6687:(Q,O,y)=>{y.d(O,{D:()=>m,MT:()=>C,Nt:()=>v,QL:()=>a,as:()=>S,cw:()=>o,dF:()=>e,hG:()=>r,km:()=>f,nr:()=>c,p8:()=>d,rv:()=>t});var N=y(8642),b=y(7467),n=y(1245),u=y(1863),T=y(5284),w=y(8939),i=function(I,E,L,B){return new(L||(L=Promise))(function(D,W){function U(j){try{M(B.next(j))}catch(z){W(z)}}function P(j){try{M(B.throw(j))}catch(z){W(z)}}function M(j){var z;j.done?D(j.value):(z=j.value,z instanceof L?z:new L(function(K){K(z)})).then(U,P)}M((B=B.apply(I,E||[])).next())})};function e(){return i(this,arguments,void 0,function*(I=[]){yield(0,N.Y)(I);let E=[];for(let L=0;L<I.length;L++){let B=yield(0,w.kx)(I[L]);E.push(B)}return E})}function o(){return i(this,arguments,void 0,function*(I=[]){yield(0,N.Y)(I);let E=[];for(let L=0;L<I.length;L++){let B=yield(0,w.RW)(I[L]);E.push(B)}return E})}function d(){return i(this,arguments,void 0,function*(I=[],E=[]){const L=n.Logger.logfunction("GetCompositionFromConnectionsWithDataId",[I])||{};if(n.serviceWorker){L.serviceWorker=!0;try{const D=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataId",{conceptIds:I,connectionIds:E});return n.Logger.logUpdate(L),D.data}catch(D){console.error("GetCompositionFromConnectionsWithDataId error sw: ",D),(0,u.ey)(L,"GetCompositionFromConnectionsWithDataId",D),(0,n.handleServiceWorkerException)(D)}}let B=[];for(let D=0;D<I.length;D++){let W=yield(0,w.RW)(I[D]);B.push(W)}return n.Logger.logUpdate(L),B})}function f(){var I=arguments;return i(this,arguments,void 0,function*(E=[],L=[]){const B=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdFromConnections",I)||{};if(n.serviceWorker){B.serviceWorker=!0;try{const U=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdFromConnections",{conceptIds:E,connectionIds:L});return n.Logger.logUpdate(B),U.data}catch(U){console.error("GetCompositionFromConnectionsWithDataIdFromConnections error sw: ",U),(0,u.ey)(B,"GetCompositionFromConnectionsWithDataIdFromConnections",U),(0,n.handleServiceWorkerException)(U)}}let D=yield(0,b.j)(L),W=[];for(let U=0;U<E.length;U++){let P=yield(0,w.PT)(E[U],D);W.push(P)}return n.Logger.logUpdate(B),W})}function v(){var I=arguments;return i(this,arguments,void 0,function*(E=[],L=[]){const B=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdIndex",I)||{};if(n.serviceWorker){B.serviceWorker=!0;try{const W=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdIndex",{conceptIds:E,connectionIds:L});return n.Logger.logUpdate(B),W.data}catch(W){console.error("GetCompositionFromConnectionsWithDataIdIndex error sw: ",W),(0,u.ey)(B,"GetCompositionFromConnectionsWithDataIdIndex",W),(0,n.handleServiceWorkerException)(W)}}yield(0,b.j)(L),yield(0,T.B)(E);let D={};for(let W=0;W<E.length;W++){let U=yield(0,w.RW)(E[W]);D[E[W]]=U}return n.Logger.logUpdate(B),D})}function S(){return i(this,arguments,void 0,function*(I=[],E=[]){yield(0,b.j)(E),yield(0,T.B)(I);let L={};for(let B=0;B<I.length;B++){let D=yield(0,w.kx)(I[B]);L[I[B]]=D}return L})}function r(){return i(this,arguments,void 0,function*(I=[],E=[]){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetCompositionFromConnectionsWithIndexFromConnections",{conceptIds:I,connectionIds:E})).data}catch(D){console.error("GetCompositionFromConnectionsWithIndexFromConnections error sw: ",D),(0,n.handleServiceWorkerException)(D)}let L=yield(0,b.j)(E),B=[];for(let D=0;D<I.length;D++){let W=yield(0,w.JA)(I[D],L);B[I[D]]=W}return B})}function a(I){var E=arguments;return i(this,void 0,void 0,function*(){const L=n.Logger.logfunction("GetConnectionDataPrefetch",E)||{};if(n.serviceWorker){L.serviceWorker=!0;try{const M=yield(0,n.sendMessage)("GetConnectionDataPrefetch",{connectionIds:I});return n.Logger.logUpdate(L),M.data}catch(M){console.error("GetConnectionDataPrefetch error sw: ",M),(0,u.ey)(L,"GetConnectionDataPrefetch",M),(0,n.handleServiceWorkerException)(M)}}let B=[],D=[],W={};for(let M=0;M<I.length;M++){let j=yield n.ConnectionData.GetConnection(I[M]);j.id==0?B.push(I[M]):D.push(j)}for(let M=0;M<B.length;M++)W[I[M]]=!1;let U=[],P=yield(0,b.j)(B);D=[...D,...P];for(let M=0;M<D.length;M++)U.push(D[M].ofTheConceptId),U.push(D[M].toTheConceptId),U.push(D[M].typeId);return yield(0,n.GetConceptBulk)(U),n.Logger.logUpdate(L),D})}function t(){var I=arguments;return i(this,arguments,void 0,function*(E=[],L=[]){const B=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdInObject",I);yield(0,b.j)(L);let D={};for(let W=0;W<E.length;W++){let U=yield(0,w.RW)(E[W]);D[E[W]]=U}return n.Logger.logUpdate(B),D})}function c(){return i(this,arguments,void 0,function*(I=[],E=[]){yield(0,b.j)(E);let L={};for(let B=0;B<I.length;B++){let D=yield(0,w.$N)(I[B]);L[I[B]]=D}return L})}function C(){return i(this,arguments,void 0,function*(I=[],E=[]){yield(0,b.j)(E);let L={};for(let B=0;B<I.length;B++){let D=yield(0,w.kx)(I[B]);L[I[B]]=D}return L})}function m(){return i(this,arguments,void 0,function*(I=[],E=[]){yield(0,b.j)(E);let L={};for(let B=0;B<I.length;B++){let D=yield(0,w.XI)(I[B]);L[I[B]]=D,console.log("this is the normal data",I[B],D)}return L})}},6731:(Q,O,y)=>{y.d(O,{b:()=>N});class N{constructor(n,u,T,w){this.variants=[],this.height=1,this.key=n,this.value=u,this.leftNode=T,this.rightNode=w,this.currentNode=null}addCurrentNode(n,u){return u==null?u=n:(n.value.typeId!=u.value.typeId&&(u.currentNode=this.addCurrentNode(n,u.currentNode)),u)}addCurrentNodeType(n,u){if(u==null)return n;let T=!1;for(let w=0;w<u.variants.length;w++)u.variants[w].value.id==n.value.id&&(T=!0);return T||u.variants.push(n),u}addNode(n,u,T){if(u==null)return n;let w=u.leftNode,i=u.rightNode;if(u.key>n.key)u.leftNode=this.addNode(n,w,T);else{if(!(u.key<n.key))return u;u.rightNode=this.addNode(n,i,T)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}return u}checkIfIdsInNode(n,u,T,w){if(n){if(u.includes(n.key)){T.push(n.value);let i=u.indexOf(n.key);u.splice(i,1)}n.leftNode&&this.checkIfIdsInNode(n.leftNode,u,T,w),n.rightNode&&this.checkIfIdsInNode(n.rightNode,u,T,w)}}addCharacterNode(n,u,T){if(n.value.characterValue!=""){if(u==null)return n;let w=u.leftNode,i=u.rightNode;if(u.key>n.key)u.leftNode=this.addCharacterNode(n,w,T);else{if(!(u.key<n.key))return u.key==n.key&&u.key!=""&&u.value.id!=n.value.id&&u.addCurrentNodeType(n,u),u;u.rightNode=this.addCharacterNode(n,i,T)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}}return u}addTypeNode(n,u,T){if(n.value.typeId!=0){if(u==null)return console.log("adding the type node to the tree",n),n;let w=u.leftNode,i=u.rightNode;if(u.key>n.key)u.leftNode=this.addTypeNode(n,w,T);else{if(!(u.key<n.key))return console.log("adding the type node to the tree down",n),u.key==n.key&&u.key!=0&&u.value.id!=n.value.id&&u.addCurrentNodeType(n,u),console.log("adding the type node to the tree last",u),u;u.rightNode=this.addTypeNode(n,i,T)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}}return u}rightRotate(n){if(n){let u=n.leftNode;if(u){let T=u.rightNode;return n.leftNode=T,u.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,u}}return n}leftRotate(n){if(n){let u=n.rightNode;if(u){let T=u.leftNode;return u.leftNode=n,n.rightNode=T,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(n.rightNode))+1,u}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return n==null?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getFromNode(n,u.leftNode):n>u.key?this.getFromNode(n,u.rightNode):u)}getCharacterFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getCharacterFromNode(n,u.leftNode):n>u.key?this.getCharacterFromNode(n,u.rightNode):u)}getCharacterFromNodeUpdated(n,u){var T;return u&&(n==u.key||((T=u.value)===null||T===void 0?void 0:T.typeId)==51?u:n<u.key?this.getCharacterFromNode(n,u.leftNode):n>u.key?this.getCharacterFromNode(n,u.rightNode):u)}getFromNodeWithCharacterAndType(n,u,T){if(n=`${n}`,T){if(n==T.key){if(n==T.value.characterValue&&u==T.value.typeId)return T;for(let w=0;w<T.variants.length;w++)if(T.variants[w].value.typeId==u)return T.variants[w]}else{if(n<T.key)return this.getFromNodeWithCharacterAndType(n,u,T.leftNode);if(n>T.key)return this.getFromNodeWithCharacterAndType(n,u,T.rightNode)}return null}return T}getFromNodeWithCharacterAndCategory(n,u,T){if(n=`${n}`,T){if(n==T.key){if(n==T.value.characterValue&&u==T.value.categoryId)return T;for(let w=0;w<T.variants.length;w++)if(T.variants[w].value.categoryId==u)return T.variants[w]}else{if(n<T.key)return this.getFromNodeWithCharacterAndCategory(n,u,T.leftNode);if(n>T.key)return this.getFromNodeWithCharacterAndCategory(n,u,T.rightNode)}return null}return T}removeNode(n,u){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNode(n.leftNode,u),n;if(n.key<u)return n.rightNode=this.removeNode(n.rightNode,u),n;if(n.leftNode==null){let T=n.rightNode;return n=null,T}if(n.rightNode==null){let T=n.leftNode;return n=null,T}{let T=this.inOrderSuccessor(n.rightNode);return n.value=T.value,n.key=T.key,n.variants=T.variants,n.currentNode=T.currentNode,n.rightNode=this.removeNode(n.rightNode,T.key),n}}removeNodeWithVariants(n,u,T){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNodeWithVariants(n.leftNode,u,T),n;if(n.key<u)return n.rightNode=this.removeNodeWithVariants(n.rightNode,u,T),n;if(n.variants.length>0){if(n.value.id==T){let w=n.variants[0];if(w)return n.value=w.value,n.key=w.key,n.currentNode=w.currentNode,n.variants.splice(0,1),n}else for(let w=0;w<n.variants.length;w++)if(T==n.variants[w].value.id)return n.variants.splice(w,1),n}if(n.leftNode==null){let w=n.rightNode;return n=null,w}if(n.rightNode==null){let w=n.leftNode;return n=null,w}{let w=this.inOrderSuccessor(n.rightNode);return n.value=w.value,n.key=w.key,n.variants=w.variants,n.currentNode=w.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,w.key,T),n}}countNodeBelow(n){return n==null?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;n.leftNode!=null;)n=n.leftNode;return n}}},6846:(Q,O,y)=>{let N=y(145),b=y(6966),n=y(4211),u=y(5644);class T{constructor(i=[]){this.version="8.5.6",this.plugins=this.normalize(i)}normalize(i){let e=[];for(let o of i)if(o.postcss===!0?o=o():o.postcss&&(o=o.postcss),typeof o=="object"&&Array.isArray(o.plugins))e=e.concat(o.plugins);else if(typeof o=="object"&&o.postcssPlugin)e.push(o);else if(typeof o=="function")e.push(o);else if(typeof o!="object"||!o.parse&&!o.stringify)throw new Error(o+" is not a PostCSS plugin");return e}process(i,e={}){return this.plugins.length||e.parser||e.stringifier||e.syntax?new b(this,i,e):new n(this,i,e)}use(i){return this.plugins=this.plugins.concat(this.normalize([i])),this}}Q.exports=T,T.default=T,u.registerProcessor(T),N.registerProcessor(T)},6915:(Q,O,y)=>{function N(b,n="DESC"){return n=="ASC"?b.sort(function(u,T){return u.id-T.id}):b.sort(function(u,T){return T.id-u.id}),b}y.d(O,{X:()=>N})},6963:(Q,O,y)=>{y.d(O,{f:()=>u});var N=y(205),b=y(6731),n=function(T,w,i,e){return new(i||(i=Promise))(function(o,d){function f(r){try{S(e.next(r))}catch(a){d(a)}}function v(r){try{S(e.throw(r))}catch(a){d(a)}}function S(r){var a;r.done?o(r.value):(a=r.value,a instanceof i?a:new i(function(t){t(a)})).then(f,v)}S((e=e.apply(T,[])).next())})};class u{static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((w,i)=>{this.checkFlag(w),setTimeout(()=>{i("not")},25e3)})})}static checkFlag(w){if(N.B.isCharacterLoaded)return w("done");setTimeout(u.checkFlag,1e3,w)}static addNodeToTree(w){return n(this,void 0,void 0,function*(){return this.characterRoot==null?(this.characterRoot=w,this.characterRoot):(this.characterRoot=this.characterRoot.addCharacterNode(w,this.characterRoot,this.characterRoot.height),this.characterRoot)})}static removeNodeByCharacter(w,i){return n(this,void 0,void 0,function*(){this.characterRoot&&this.characterRoot.removeNodeWithVariants(this.characterRoot,w,i)})}static countNumberOfNodes(){return this.characterRoot?this.characterRoot.countNodeBelow(this.characterRoot):0}static addConceptToTree(w){if(w.characterValue!=""){var i=new b.b(w.characterValue,w,null,null);this.addNodeToTree(i)}}static getNodeFromTree(w){return this.characterRoot?this.characterRoot.getCharacterFromNode(w,this.characterRoot):this.characterRoot}static getNodeFromTreeUpdated(w){return this.characterRoot?this.characterRoot.getCharacterFromNode(w,this.characterRoot):this.characterRoot}static getCharacterAndTypeFromTree(w,i){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndType(w,i,this.characterRoot):this.characterRoot})}static getCharacterAndCategoryFromTree(w,i){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndCategory(w,i,this.characterRoot):this.characterRoot})}static removeConceptCharacter(w){this.characterRoot&&(this.characterRoot=this.characterRoot.removeNode(this.characterRoot,w))}}u.characterRoot=null},6966:(Q,O,y)=>{let N=y(7793),b=y(145),n=y(3604),u=y(9577),T=y(3717),w=y(5644),i=y(3303),{isClean:e,my:o}=y(4151);y(6156);const d={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},f={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},v={Once:!0,postcssPlugin:!0,prepare:!0};function S(m){return typeof m=="object"&&typeof m.then=="function"}function r(m){let I=!1,E=d[m.type];return m.type==="decl"?I=m.prop.toLowerCase():m.type==="atrule"&&(I=m.name.toLowerCase()),I&&m.append?[E,E+"-"+I,0,E+"Exit",E+"Exit-"+I]:I?[E,E+"-"+I,E+"Exit",E+"Exit-"+I]:m.append?[E,0,E+"Exit"]:[E,E+"Exit"]}function a(m){let I;return I=m.type==="document"?["Document",0,"DocumentExit"]:m.type==="root"?["Root",0,"RootExit"]:r(m),{eventIndex:0,events:I,iterator:0,node:m,visitorIndex:0,visitors:[]}}function t(m){return m[e]=!1,m.nodes&&m.nodes.forEach(I=>t(I)),m}let c={};class C{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(I,E,L){let B;if(this.stringified=!1,this.processed=!1,typeof E!="object"||E===null||E.type!=="root"&&E.type!=="document")if(E instanceof C||E instanceof T)B=t(E.root),E.map&&(L.map===void 0&&(L.map={}),L.map.inline||(L.map.inline=!1),L.map.prev=E.map);else{let D=u;L.syntax&&(D=L.syntax.parse),L.parser&&(D=L.parser),D.parse&&(D=D.parse);try{B=D(E,L)}catch(W){this.processed=!0,this.error=W}B&&!B[o]&&N.rebuild(B)}else B=t(E);this.result=new T(I,B,L),this.helpers={...c,postcss:c,result:this.result},this.plugins=this.processor.plugins.map(D=>typeof D=="object"&&D.prepare?{...D,...D.prepare(this.result)}:D)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(I){return this.async().catch(I)}finally(I){return this.async().then(I,I)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(I,E){let L=this.result.lastPlugin;try{E&&E.addToError(I),this.error=I,I.name!=="CssSyntaxError"||I.plugin?L.postcssVersion:(I.plugin=L.postcssPlugin,I.setMessage())}catch(B){console&&console.error&&console.error(B)}return I}prepareVisitors(){this.listeners={};let I=(E,L,B)=>{this.listeners[L]||(this.listeners[L]=[]),this.listeners[L].push([E,B])};for(let E of this.plugins)if(typeof E=="object")for(let L in E){if(!f[L]&&/^[A-Z]/.test(L))throw new Error(`Unknown event ${L} in ${E.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!v[L])if(typeof E[L]=="object")for(let B in E[L])I(E,B==="*"?L:L+"-"+B.toLowerCase(),E[L][B]);else typeof E[L]=="function"&&I(E,L,E[L])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let I=0;I<this.plugins.length;I++){let E=this.plugins[I],L=this.runOnRoot(E);if(S(L))try{await L}catch(B){throw this.handleError(B)}}if(this.prepareVisitors(),this.hasListener){let I=this.result.root;for(;!I[e];){I[e]=!0;let E=[a(I)];for(;E.length>0;){let L=this.visitTick(E);if(S(L))try{await L}catch(B){let D=E[E.length-1].node;throw this.handleError(B,D)}}}if(this.listeners.OnceExit)for(let[E,L]of this.listeners.OnceExit){this.result.lastPlugin=E;try{if(I.type==="document"){let B=I.nodes.map(D=>L(D,this.helpers));await Promise.all(B)}else await L(I,this.helpers)}catch(B){throw this.handleError(B)}}}return this.processed=!0,this.stringify()}runOnRoot(I){this.result.lastPlugin=I;try{if(typeof I=="object"&&I.Once){if(this.result.root.type==="document"){let E=this.result.root.nodes.map(L=>I.Once(L,this.helpers));return S(E[0])?Promise.all(E):E}return I.Once(this.result.root,this.helpers)}if(typeof I=="function")return I(this.result.root,this.result)}catch(E){throw this.handleError(E)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let I=this.result.opts,E=i;I.syntax&&(E=I.syntax.stringify),I.stringifier&&(E=I.stringifier),E.stringify&&(E=E.stringify);let L=new n(E,this.result.root,this.result.opts).generate();return this.result.css=L[0],this.result.map=L[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let I of this.plugins)if(S(this.runOnRoot(I)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let I=this.result.root;for(;!I[e];)I[e]=!0,this.walkSync(I);if(this.listeners.OnceExit)if(I.type==="document")for(let E of I.nodes)this.visitSync(this.listeners.OnceExit,E);else this.visitSync(this.listeners.OnceExit,I)}return this.result}then(I,E){return this.async().then(I,E)}toString(){return this.css}visitSync(I,E){for(let[L,B]of I){let D;this.result.lastPlugin=L;try{D=B(E,this.helpers)}catch(W){throw this.handleError(W,E.proxyOf)}if(E.type!=="root"&&E.type!=="document"&&!E.parent)return!0;if(S(D))throw this.getAsyncError()}}visitTick(I){let E=I[I.length-1],{node:L,visitors:B}=E;if(L.type!=="root"&&L.type!=="document"&&!L.parent)return void I.pop();if(B.length>0&&E.visitorIndex<B.length){let[W,U]=B[E.visitorIndex];E.visitorIndex+=1,E.visitorIndex===B.length&&(E.visitors=[],E.visitorIndex=0),this.result.lastPlugin=W;try{return U(L.toProxy(),this.helpers)}catch(P){throw this.handleError(P,L)}}if(E.iterator!==0){let W,U=E.iterator;for(;W=L.nodes[L.indexes[U]];)if(L.indexes[U]+=1,!W[e])return W[e]=!0,void I.push(a(W));E.iterator=0,delete L.indexes[U]}let D=E.events;for(;E.eventIndex<D.length;){let W=D[E.eventIndex];if(E.eventIndex+=1,W===0)return void(L.nodes&&L.nodes.length&&(L[e]=!0,E.iterator=L.getIterator()));if(this.listeners[W])return void(E.visitors=this.listeners[W])}I.pop()}walkSync(I){I[e]=!0;let E=r(I);for(let L of E)if(L===0)I.nodes&&I.each(B=>{B[e]||this.walkSync(B)});else{let B=this.listeners[L];if(B&&this.visitSync(B,I.toProxy()))return}}warnings(){return this.sync().warnings()}}C.registerPostcss=m=>{c=m},Q.exports=C,C.default=C,w.registerLazyResult(C),b.registerLazyResult(C)},7071:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,i)}var T=function(w){var i,e;function o(d){var f;return(f=w.call(this,d)||this).type=n.ID,f}return e=w,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,u(i,e),o.prototype.valueToString=function(){return"#"+w.prototype.valueToString.call(this)},o}(b.default);O.default=T,Q.exports=O.default},7139:(Q,O,y)=>{y.d(O,{r:()=>e});var N=y(3026),b=y(9581),n=y(1245),u=y(1863),T=y(1596),w=y(3278),i=function(o,d,f,v){return new(f||(f=Promise))(function(S,r){function a(C){try{c(v.next(C))}catch(m){r(m)}}function t(C){try{c(v.throw(C))}catch(m){r(m)}}function c(C){var m;C.done?S(C.value):(m=C.value,m instanceof f?m:new f(function(I){I(m)})).then(a,t)}c((v=v.apply(o,[])).next())})};function e(o){var d=arguments;return i(this,void 0,void 0,function*(){const f=n.Logger.logfunction("GetConcept",d)||{};let v=(0,n.CreateDefaultConcept)();const S=new FormData;S.append("id",o.toString());try{if(n.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,n.sendMessage)("GetConcept",{id:o});return n.Logger.logUpdate(f),t.data}catch(t){console.error("GetConcept sw error: ",t),(0,u.ey)(f,"GetConcept",t),(0,n.handleServiceWorkerException)(t)}}if(o==0||o==null||o==null)return v;var r=yield N.I.GetConcept(o);let a=N.I.GetNpc(o);if(r.id!=0||a)return n.Logger.logUpdate(f),r;{let t;const c={method:"POST",body:S,headers:{Authorization:"Bearer "+w.b.BearerAccessToken}};try{console.log("this is the url",b.B.GetConceptUrl()),t=yield fetch(b.B.GetConceptUrl(),c)}catch{t=yield(0,T.g)(c,"/api/getConcept")}return yield function(C,m,I,E){return i(this,void 0,void 0,function*(){return C.ok?(m=yield C.json()).id>0?N.I.AddConcept(m):N.I.AddNpc(E):(console.log("Get the concept error",C.status),(0,u.ry)(C)),n.Logger.logUpdate(I),m})}(t,v,f,o)}}catch(a){a instanceof Error?console.log("Get the concept error message: ",a.message):console.log("Get the concept unexpected error: ",a),(0,u.Mb)(a,b.B.GetConceptUrl()),(0,u.ey)(f,"GetConcept",a)}})}},7149:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(8349))&&N.__esModule?N:{default:N},n=function(i,e){if(i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var o=u(e);if(o&&o.has(i))return o.get(i);var d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in i)if(v!=="default"&&Object.prototype.hasOwnProperty.call(i,v)){var S=f?Object.getOwnPropertyDescriptor(i,v):null;S&&(S.get||S.set)?Object.defineProperty(d,v,S):d[v]=i[v]}return d.default=i,o&&o.set(i,d),d}(y(680));function u(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,o=new WeakMap;return(u=function(d){return d?o:e})(i)}var T=function(i){return new b.default(i)};Object.assign(T,n),delete T.__esModule;var w=T;O.default=w,Q.exports=O.default},7273:(Q,O,y)=>{y.d(O,{z:()=>b});var N=y(9581);class b{constructor(u,T,w,i){this.url=N.B.BASE_URL,this.message=u,this.ok=T,this.status=w,this.data=i}getMessage(){return this.message}setMessage(u){return this.message=u,this}getStatus(){return this.status}setStatus(u){return this.status=u,this}getData(){return this.data}setData(u){return this.data=u,this}getOk(){return this.ok}setOk(u){return this.ok=u,this}getUrl(){return this.url}setUrl(u){return this.url=u,this}}},7282:(Q,O,y)=>{y.d(O,{Y:()=>n,o:()=>b});var N=y(2615);function b(){let u=n(new Date),T=n(new Date);return new N.j(0,0,0,0,0,"0",0,!1,u,T,"0")}function n(u){const T=u.getMonth()+1,w=u.getDate(),i=u.getFullYear();let e=u.getHours();const o=u.getMinutes(),d=u.getSeconds(),f=e>=12?"PM":"AM";e%=12,e=e||12;const v=S=>S.toString().padStart(2,"0");return`${T}/${w}/${i} ${e}:${v(o)}:${v(d)} ${f}`}},7324:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(3631))&&N.__esModule?N:{default:N},n=y(1581);function u(w,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,i)}var T=function(w){var i,e;function o(d){var f;return(f=w.call(this,d)||this).type=n.PSEUDO,f}return e=w,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,u(i,e),o.prototype.toString=function(){var d=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),d,this.rawSpaceAfter].join("")},o}(b.default);O.default=T,Q.exports=O.default},7467:(Q,O,y)=>{y.d(O,{j:()=>o});var N=y(8286),b=y(9581),n=y(4364),u=y(3518),T=y(1863),w=y(1245),i=y(1596),e=function(d,f,v,S){return new(v||(v=Promise))(function(r,a){function t(m){try{C(S.next(m))}catch(I){a(I)}}function c(m){try{C(S.throw(m))}catch(I){a(I)}}function C(m){var I;m.done?r(m.value):(I=m.value,I instanceof v?I:new v(function(E){E(I)})).then(t,c)}C((S=S.apply(d,f||[])).next())})};function o(){return e(this,arguments,void 0,function*(d=[]){const f=w.Logger.logfunction("GetConnectionBulk",d.length)||{};let v=[];try{if(w.serviceWorker){f.serviceWorker=!0;try{const S=yield(0,w.sendMessage)("GetConnectionBulk",{connectionIds:d});return w.Logger.logUpdate(f),S.data}catch(S){console.error("GetConnectionBulk sw error: ",S),(0,T.ey)(f,"GetConnectionBulk",S),(0,w.handleServiceWorkerException)(S)}}if(d.length>0){let S=[];for(let r=0;r<d.length;r++)if(!N.d.GetNpConn(d[r])){let a=yield N.d.GetConnection(d[r]);a.id==0?S.push(d[r]):v.push(a)}if(S.length==0)return w.Logger.logUpdate(f),v;{let r;const a={method:"POST",headers:(0,u.Xr)(),body:JSON.stringify(S)};try{r=yield fetch(b.B.GetConnectionBulkUrl(),a)}catch{r=yield(0,i.g)(a,"/api/get_connection_bulk")}yield function(t,c,C){return e(this,void 0,void 0,function*(){if(t.ok){const m=yield t.json();if(m.length>0)for(let I=0;I<m.length;I++){let E=m[I];c.push(E),N.d.AddConnection(E)}}else(0,T.ey)(C,"GetConnectionBulk",t.status),(0,T.ry)(t),console.log("Get Connection Bulk error",t.status)})}(r,v,f),w.Logger.logUpdate(f)}}}catch(S){S instanceof Error?console.log("Get Connection Bulk error message: ",S):console.log("Get Connection Bulk unexpected error: ",S),(0,T.ey)(f,"GetConnectionBulk",S),(0,T.Mb)(S,b.B.GetConnectionBulkUrl())}return yield(0,n.s)(v),v})}},7668:Q=>{const O={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class y{constructor(b){this.builder=b}atrule(b,n){let u="@"+b.name,T=b.params?this.rawValue(b,"params"):"";if(b.raws.afterName!==void 0?u+=b.raws.afterName:T&&(u+=" "),b.nodes)this.block(b,u+T);else{let w=(b.raws.between||"")+(n?";":"");this.builder(u+T+w,b)}}beforeAfter(b,n){let u;u=b.type==="decl"?this.raw(b,null,"beforeDecl"):b.type==="comment"?this.raw(b,null,"beforeComment"):n==="before"?this.raw(b,null,"beforeRule"):this.raw(b,null,"beforeClose");let T=b.parent,w=0;for(;T&&T.type!=="root";)w+=1,T=T.parent;if(u.includes(`
`)){let i=this.raw(b,null,"indent");if(i.length)for(let e=0;e<w;e++)u+=i}return u}block(b,n){let u,T=this.raw(b,"between","beforeOpen");this.builder(n+T+"{",b,"start"),b.nodes&&b.nodes.length?(this.body(b),u=this.raw(b,"after")):u=this.raw(b,"after","emptyBody"),u&&this.builder(u),this.builder("}",b,"end")}body(b){let n=b.nodes.length-1;for(;n>0&&b.nodes[n].type==="comment";)n-=1;let u=this.raw(b,"semicolon");for(let T=0;T<b.nodes.length;T++){let w=b.nodes[T],i=this.raw(w,"before");i&&this.builder(i),this.stringify(w,n!==T||u)}}comment(b){let n=this.raw(b,"left","commentLeft"),u=this.raw(b,"right","commentRight");this.builder("/*"+n+b.text+u+"*/",b)}decl(b,n){let u=this.raw(b,"between","colon"),T=b.prop+u+this.rawValue(b,"value");b.important&&(T+=b.raws.important||" !important"),n&&(T+=";"),this.builder(T,b)}document(b){this.body(b)}raw(b,n,u){let T;if(u||(u=n),n&&(T=b.raws[n],T!==void 0))return T;let w=b.parent;if(u==="before"&&(!w||w.type==="root"&&w.first===b||w&&w.type==="document"))return"";if(!w)return O[u];let i=b.root();if(i.rawCache||(i.rawCache={}),i.rawCache[u]!==void 0)return i.rawCache[u];if(u==="before"||u==="after")return this.beforeAfter(b,u);{let o="raw"+((e=u)[0].toUpperCase()+e.slice(1));this[o]?T=this[o](i,b):i.walk(d=>{if(T=d.raws[n],T!==void 0)return!1})}var e;return T===void 0&&(T=O[u]),i.rawCache[u]=T,T}rawBeforeClose(b){let n;return b.walk(u=>{if(u.nodes&&u.nodes.length>0&&u.raws.after!==void 0)return n=u.raws.after,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeComment(b,n){let u;return b.walkComments(T=>{if(T.raws.before!==void 0)return u=T.raws.before,u.includes(`
`)&&(u=u.replace(/[^\n]+$/,"")),!1}),u===void 0?u=this.raw(n,null,"beforeDecl"):u&&(u=u.replace(/\S/g,"")),u}rawBeforeDecl(b,n){let u;return b.walkDecls(T=>{if(T.raws.before!==void 0)return u=T.raws.before,u.includes(`
`)&&(u=u.replace(/[^\n]+$/,"")),!1}),u===void 0?u=this.raw(n,null,"beforeRule"):u&&(u=u.replace(/\S/g,"")),u}rawBeforeOpen(b){let n;return b.walk(u=>{if(u.type!=="decl"&&(n=u.raws.between,n!==void 0))return!1}),n}rawBeforeRule(b){let n;return b.walk(u=>{if(u.nodes&&(u.parent!==b||b.first!==u)&&u.raws.before!==void 0)return n=u.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawColon(b){let n;return b.walkDecls(u=>{if(u.raws.between!==void 0)return n=u.raws.between.replace(/[^\s:]/g,""),!1}),n}rawEmptyBody(b){let n;return b.walk(u=>{if(u.nodes&&u.nodes.length===0&&(n=u.raws.after,n!==void 0))return!1}),n}rawIndent(b){if(b.raws.indent)return b.raws.indent;let n;return b.walk(u=>{let T=u.parent;if(T&&T!==b&&T.parent&&T.parent===b&&u.raws.before!==void 0){let w=u.raws.before.split(`
`);return n=w[w.length-1],n=n.replace(/\S/g,""),!1}}),n}rawSemicolon(b){let n;return b.walk(u=>{if(u.nodes&&u.nodes.length&&u.last.type==="decl"&&(n=u.raws.semicolon,n!==void 0))return!1}),n}rawValue(b,n){let u=b[n],T=b.raws[n];return T&&T.value===u?T.raw:u}root(b){this.body(b),b.raws.after&&this.builder(b.raws.after)}rule(b){this.block(b,this.rawValue(b,"selector")),b.raws.ownSemicolon&&this.builder(b.raws.ownSemicolon,b,"end")}stringify(b,n){if(!this[b.type])throw new Error("Unknown AST node type "+b.type+". Maybe you need to change PostCSS stringifier.");this[b.type](b,n)}}Q.exports=y,y.default=y},7793:(Q,O,y)=>{let N,b,n,u,T=y(9371),w=y(5238),i=y(3152),{isClean:e,my:o}=y(4151);function d(S){return S.map(r=>(r.nodes&&(r.nodes=d(r.nodes)),delete r.source,r))}function f(S){if(S[e]=!1,S.proxyOf.nodes)for(let r of S.proxyOf.nodes)f(r)}class v extends i{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...r){for(let a of r){let t=this.normalize(a,this.last);for(let c of t)this.proxyOf.nodes.push(c)}return this.markDirty(),this}cleanRaws(r){if(super.cleanRaws(r),this.nodes)for(let a of this.nodes)a.cleanRaws(r)}each(r){if(!this.proxyOf.nodes)return;let a,t,c=this.getIterator();for(;this.indexes[c]<this.proxyOf.nodes.length&&(a=this.indexes[c],t=r(this.proxyOf.nodes[a],a),t!==!1);)this.indexes[c]+=1;return delete this.indexes[c],t}every(r){return this.nodes.every(r)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let r=this.lastEach;return this.indexes[r]=0,r}getProxyProcessor(){return{get:(r,a)=>a==="proxyOf"?r:r[a]?a==="each"||typeof a=="string"&&a.startsWith("walk")?(...t)=>r[a](...t.map(c=>typeof c=="function"?(C,m)=>c(C.toProxy(),m):c)):a==="every"||a==="some"?t=>r[a]((c,...C)=>t(c.toProxy(),...C)):a==="root"?()=>r.root().toProxy():a==="nodes"?r.nodes.map(t=>t.toProxy()):a==="first"||a==="last"?r[a].toProxy():r[a]:r[a],set:(r,a,t)=>(r[a]===t||(r[a]=t,a!=="name"&&a!=="params"&&a!=="selector"||r.markDirty()),!0)}}index(r){return typeof r=="number"?r:(r.proxyOf&&(r=r.proxyOf),this.proxyOf.nodes.indexOf(r))}insertAfter(r,a){let t,c=this.index(r),C=this.normalize(a,this.proxyOf.nodes[c]).reverse();c=this.index(r);for(let m of C)this.proxyOf.nodes.splice(c+1,0,m);for(let m in this.indexes)t=this.indexes[m],c<t&&(this.indexes[m]=t+C.length);return this.markDirty(),this}insertBefore(r,a){let t,c=this.index(r),C=c===0&&"prepend",m=this.normalize(a,this.proxyOf.nodes[c],C).reverse();c=this.index(r);for(let I of m)this.proxyOf.nodes.splice(c,0,I);for(let I in this.indexes)t=this.indexes[I],c<=t&&(this.indexes[I]=t+m.length);return this.markDirty(),this}normalize(r,a){if(typeof r=="string")r=d(b(r).nodes);else if(r===void 0)r=[];else if(Array.isArray(r)){r=r.slice(0);for(let t of r)t.parent&&t.parent.removeChild(t,"ignore")}else if(r.type==="root"&&this.type!=="document"){r=r.nodes.slice(0);for(let t of r)t.parent&&t.parent.removeChild(t,"ignore")}else if(r.type)r=[r];else if(r.prop){if(r.value===void 0)throw new Error("Value field is missed in node creation");typeof r.value!="string"&&(r.value=String(r.value)),r=[new w(r)]}else if(r.selector||r.selectors)r=[new u(r)];else if(r.name)r=[new N(r)];else{if(!r.text)throw new Error("Unknown node type in node creation");r=[new T(r)]}return r.map(t=>(t[o]||v.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[e]&&f(t),t.raws||(t.raws={}),t.raws.before===void 0&&a&&a.raws.before!==void 0&&(t.raws.before=a.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...r){r=r.reverse();for(let a of r){let t=this.normalize(a,this.first,"prepend").reverse();for(let c of t)this.proxyOf.nodes.unshift(c);for(let c in this.indexes)this.indexes[c]=this.indexes[c]+t.length}return this.markDirty(),this}push(r){return r.parent=this,this.proxyOf.nodes.push(r),this}removeAll(){for(let r of this.proxyOf.nodes)r.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(r){let a;r=this.index(r),this.proxyOf.nodes[r].parent=void 0,this.proxyOf.nodes.splice(r,1);for(let t in this.indexes)a=this.indexes[t],a>=r&&(this.indexes[t]=a-1);return this.markDirty(),this}replaceValues(r,a,t){return t||(t=a,a={}),this.walkDecls(c=>{a.props&&!a.props.includes(c.prop)||a.fast&&!c.value.includes(a.fast)||(c.value=c.value.replace(r,t))}),this.markDirty(),this}some(r){return this.nodes.some(r)}walk(r){return this.each((a,t)=>{let c;try{c=r(a,t)}catch(C){throw a.addToError(C)}return c!==!1&&a.walk&&(c=a.walk(r)),c})}walkAtRules(r,a){return a?r instanceof RegExp?this.walk((t,c)=>{if(t.type==="atrule"&&r.test(t.name))return a(t,c)}):this.walk((t,c)=>{if(t.type==="atrule"&&t.name===r)return a(t,c)}):(a=r,this.walk((t,c)=>{if(t.type==="atrule")return a(t,c)}))}walkComments(r){return this.walk((a,t)=>{if(a.type==="comment")return r(a,t)})}walkDecls(r,a){return a?r instanceof RegExp?this.walk((t,c)=>{if(t.type==="decl"&&r.test(t.prop))return a(t,c)}):this.walk((t,c)=>{if(t.type==="decl"&&t.prop===r)return a(t,c)}):(a=r,this.walk((t,c)=>{if(t.type==="decl")return a(t,c)}))}walkRules(r,a){return a?r instanceof RegExp?this.walk((t,c)=>{if(t.type==="rule"&&r.test(t.selector))return a(t,c)}):this.walk((t,c)=>{if(t.type==="rule"&&t.selector===r)return a(t,c)}):(a=r,this.walk((t,c)=>{if(t.type==="rule")return a(t,c)}))}}v.registerParse=S=>{b=S},v.registerRule=S=>{u=S},v.registerAtRule=S=>{N=S},v.registerRoot=S=>{n=S},Q.exports=v,v.default=v,v.rebuild=S=>{S.type==="atrule"?Object.setPrototypeOf(S,N.prototype):S.type==="rule"?Object.setPrototypeOf(S,u.prototype):S.type==="decl"?Object.setPrototypeOf(S,w.prototype):S.type==="comment"?Object.setPrototypeOf(S,T.prototype):S.type==="root"&&Object.setPrototypeOf(S,n.prototype),S[o]=!0,S.nodes&&S.nodes.forEach(r=>{v.rebuild(r)})}},7820:(Q,O,y)=>{y.d(O,{G:()=>u});var N=y(205),b=y(2515),n=function(T,w,i,e){return new(i||(i=Promise))(function(o,d){function f(r){try{S(e.next(r))}catch(a){d(a)}}function v(r){try{S(e.throw(r))}catch(a){d(a)}}function S(r){var a;r.done?o(r.value):(a=r.value,a instanceof i?a:new i(function(t){t(a)})).then(f,v)}S((e=e.apply(T,[])).next())})};class u{static addNodeToTree(w){if(this.root==null)return this.root=w,this.root;this.root=this.root.addNode(w,this.root,this.root.height)}static addConceptToTree(w){var i=new b.x(w.ghostId,w,null,null);this.addNodeToTree(i)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((w,i)=>{this.checkFlag(w),setTimeout(()=>{i("not")},25e3)})})}static checkFlag(w){if(N.B.isLocalDataLoaded)return w("done");setTimeout(u.checkFlag,1e3,w)}static getNodeFromTree(w){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(w,this.root):null})}static removeNodeFromTree(w){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,w))})}}u.root=null},7869:(Q,O,y)=>{y.d(O,{_:()=>S,A:()=>v});var N=y(9581),b=y(3026),n=y(1863),u=y(3518),T=y(1245),w=function(r,a,t,c){return new(t||(t=Promise))(function(C,m){function I(B){try{L(c.next(B))}catch(D){m(D)}}function E(B){try{L(c.throw(B))}catch(D){m(D)}}function L(B){var D;B.done?C(B.value):(D=B.value,D instanceof t?D:new t(function(W){W(D)})).then(I,E)}L((c=c.apply(r,[])).next())})},i=y(2299);class e{}e.isUpdated=!1,e.isOnlineSync=!1;var o=y(3655),d=y(9003),f=function(r,a,t,c){return new(t||(t=Promise))(function(C,m){function I(B){try{L(c.next(B))}catch(D){m(D)}}function E(B){try{L(c.throw(B))}catch(D){m(D)}}function L(B){var D;B.done?C(B.value):(D=B.value,D instanceof t?D:new t(function(W){W(D)})).then(I,E)}L((c=c.apply(r,a||[])).next())})};function v(){return f(this,arguments,void 0,function*(r=!0){try{if(yield(0,o.qI)("concepts"),yield(0,d.qI)("concepts"),r){if((yield(0,o.b8)()).isOnlineSync)return!0;yield function(){return w(this,void 0,void 0,function*(){const a=T.Logger.logfunction("GetAiData");try{const C=new Date().getTime();var t=(0,u.ab)("application/x-www-form-urlencoded");const m=yield fetch(N.B.GetAllAiData(),{method:"GET",headers:t});m.ok||(console.log("Ai Error Message: ","Cannot get response"),(0,n.ry)(m));const I=yield m.json();for(var c=0;c<I.length;c++)b.I.AddConcept(I[c]);S();let E=new Date().getTime()-C;console.log("The time taken is ",E),T.Logger.logUpdate(a)}catch(C){C instanceof Error?console.log("Ai Error Message: ",C.message):console.log("Ai Error Message: ",C),(0,n.Mb)(C,N.B.GetAllAiData())}})}()}return!0}catch(a){return console.log({message:"cannot initlize the AI system",ok:!1,status:400,data:a}),!0}})}function S(){return f(this,void 0,void 0,function*(){e.isOnlineSync=!0;var r=new i.B(e.isOnlineSync);(0,o.El)(r)})}},7876:(Q,O,y)=>{y.d(O,{A:()=>e,K:()=>o});var N=y(1735),b=y(7139),n=y(1245),u=y(3026),T=y(7282),w=function(d,f,v,S){return new(v||(v=Promise))(function(r,a){function t(m){try{C(S.next(m))}catch(I){a(I)}}function c(m){try{C(S.throw(m))}catch(I){a(I)}}function C(m){var I;m.done?r(m.value):(I=m.value,I instanceof v?I:new v(function(E){E(I)})).then(t,c)}C((S=S.apply(d,f||[])).next())})};const i=new Map;function e(d){return w(this,arguments,void 0,function*(f,v=999){let S=performance.now();if(N.J.activateStatus)try{N.J.incrementConcept(f)}catch{console.error("Error adding connection in access tracker"),n.Logger.log("ERROR","Error Adding Connection")}if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConcept",{id:f,userId:v})).data}catch(t){console.error("GetTheConcept sw error: ",t),(0,n.handleServiceWorkerException)(t)}let r=(0,T.o)();if(i.has(f))return i.get(f)||r;const a=w(this,void 0,void 0,function*(){try{if(f<0)return yield n.LocalConceptsData.GetConceptByGhostId(f);if(r=yield u.I.GetConcept(f),(r==null||r.id==0)&&f!=null&&f!=null&&(r=yield(0,b.r)(f)),r.id!=0&&r.type==null&&(yield u.I.GetConcept(r.typeId))==null&&r.typeId!=null&&r.typeId!=null){let t=yield(0,b.r)(r.typeId);r.type=t}return r}catch(t){throw console.error("this is the error in the getting concept",t),n.Logger.logError(S,v,"read","unknown",void 0,500,t,"GetTheConcept",[f,v],"unknown",void 0),t}finally{i.delete(f)}});return i.set(f,a),a})}function o(d){return w(this,void 0,void 0,function*(){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("AddTypeConcept",{concept:d})).data}catch(f){console.error("AddTypeConcept sw error: ",f),(0,n.handleServiceWorkerException)(f)}if(d.type==null){let f=yield u.I.GetConcept(d.typeId);if(f.id==0&&d.typeId!=0&&d.typeId!=999){let v=yield(0,b.r)(d.typeId);d.type=v}else d.type=f}})}},7887:(Q,O,y)=>{y.d(O,{a:()=>u,p:()=>T});var N=y(8286),b=y(4864),n=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,[])).next())})};function u(){return n(this,void 0,void 0,function*(){try{let w=[];if(Array.isArray(w))for(let i=0;i<w.length;i++)N.d.AddConnectionToMemory(w[i])}catch(w){throw{message:"Cannot create Connection Binary Tree Concept",ok:!1,status:400,data:w}}})}function T(){return n(this,void 0,void 0,function*(){try{let w=[];if(Array.isArray(w))for(let i=0;i<w.length;i++)b.G.AddConnectionToMemory(w[i])}catch(w){throw{message:"Cannot create Local Connection Binary Tree Concept",ok:!1,status:400,data:w}}})}},8064:(Q,O,y)=>{y.d(O,{$I:()=>T,Ay:()=>u});var N=y(9736),b=(y(9581),y(3518),y(1245));y(1863);var n=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,[])).next())})};function u(w){return n(this,void 0,void 0,function*(){return yield N.v.GetConceptByCharacterAndTypeLocal(w,51)})}function T(w){return n(this,void 0,void 0,function*(){if(b.serviceWorker)try{return(yield(0,b.sendMessage)("GetConceptByCharacterAndCategoryLocal",{character:w})).data}catch(o){console.error("GetConceptByCharacterAndCategoryLocal error sw: ",o),(0,b.handleServiceWorkerException)(o)}let i=(0,b.CreateDefaultLConcept)();if(w=="the")return i.id=1,i.typeId=5,i.characterValue="the",i;let e=(0,b.SplitStrings)(w);if(e.length>1){let o=1,d=yield T(e[0]);d.id!=0&&(o=d.id),i=yield function(f,v){return n(this,void 0,void 0,function*(){return N.v.GetConceptByCharacterAndCategoryLocal(f,v)})}(w,o)}else e[0]==w&&(i=yield u(w));return i})}},8095:(Q,O,y)=>{y.d(O,{h:()=>T});var N=y(1245),b=y(9700),n=y(1863),u=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,i||[])).next())})};function T(w,i,e){var o=arguments;return u(this,arguments,void 0,function*(d,f,v,S=!1,r={concepts:[],connections:[]}){var a,t,c,C,m,I;const E=b.V.logfunction("CreateConnectionBetweenTwoConceptsLocal",o)||{};let L=performance.now();try{if(N.serviceWorker){E.serviceWorker=!0;try{const P=yield(0,N.sendMessage)("CreateConnectionBetweenTwoConceptsLocal",{ofTheConcept:d,toTheConcept:f,linker:v,both:S,actions:r});return!((t=(a=P?.actions)===null||a===void 0?void 0:a.concepts)===null||t===void 0)&&t.length&&(r.concepts=JSON.parse(JSON.stringify(P.actions.concepts))),!((C=(c=P?.actions)===null||c===void 0?void 0:c.connections)===null||C===void 0)&&C.length&&(r.connections=JSON.parse(JSON.stringify(P.actions.connections))),b.V.logUpdate(E),P.data}catch(P){console.error("CreateConnectionBetweenTwoConceptsLocal sw error: ",P),(0,n.ey)(E,"CreateConnectionBetweenTwoConceptsLocal",P),(0,N.handleServiceWorkerException)(P)}}if(d.userId,S){let P=((m=f.type)===null||m===void 0?void 0:m.characterValue)+"_s_"+v+"_by";var B=yield(0,N.MakeTheInstanceConceptLocal)("connection",P,!1,999,999,999,0,r);yield(0,N.CreateTheConnectionLocal)(f.id,d.id,B.id,1e3,void 0,void 0,r)}let W=((I=d.type)===null||I===void 0?void 0:I.characterValue)+"_s_"+v+"_s";var D=yield(0,N.MakeTheInstanceConceptLocal)("connection",W,!1,999,999,999,void 0,r);let U=yield(0,N.CreateTheConnectionLocal)(d.id,f.id,D.id,1e3,void 0,void 0,r);return b.V.logUpdate(E),U}catch(W){throw b.V.logError(L,d.userId,"create",void 0,void 0,500,W,"CreateConnectionBetweenTwoConceptsLocal",[d,f,v,S],void 0,void 0),(0,n.ey)(E,"CreateConnectionBetweenTwoConceptsLocal",W),W}})}},8146:(Q,O,y)=>{y.d(O,{Y:()=>i});var N=y(3026),b=y(9581),n=y(1245),u=y(1863),T=y(7876),w=function(e,o,d,f){return new(d||(d=Promise))(function(v,S){function r(c){try{t(f.next(c))}catch(C){S(C)}}function a(c){try{t(f.throw(c))}catch(C){S(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof d?C:new d(function(m){m(C)})).then(r,a)}t((f=f.apply(e,[])).next())})};function i(e){var o=arguments;return w(this,void 0,void 0,function*(){const d=n.Logger.logfunction("GetConceptByCharacterValue",o);let f=(0,n.CreateDefaultConcept)();try{const v=new FormData;v.append("character_value",e);const S=yield fetch(b.B.GetConceptByCharacterValueUrl(),{method:"POST",body:v});S.ok?(f=yield S.json(),f.id>0&&(0,T.K)(f).then(r=>{N.I.AddConcept(f)}),n.Logger.logUpdate(d)):((0,u.ry)(S),console.log("Error in Getting concept by character value Error",S.status))}catch(v){v instanceof Error?console.log("Error in Getting concept by character value error message: ",v):console.log("Error in Getting concept by character value unexpected error: ",v),(0,u.Mb)(v,b.B.GetConceptByCharacterValueUrl()),(0,u.ey)(d,"GetConceptByCharacterValue",v)}return f})}},8286:(Q,O,y)=>{y.d(O,{d:()=>v});var N=y(1735),b=y(1245),n=y(3655),u=y(1863),T=y(2155),w=y(5239),i=y(991),e=y(3996);class o extends e.i{constructor(r,a,t,c){super(r,a,t,c),this.key="",this.value=[],this.height=1,this.key=r,this.value=a,this.leftNode=t,this.rightNode=c}addNode(r,a,t){if(a==null)return r;let c=a.leftNode,C=a.rightNode;if(a.key>r.key)a.leftNode=this.addNode(r,c,t);else{if(!(a.key<r.key))return a;a.rightNode=this.addNode(r,C,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let m=this.getBalanceFactor(a);if(m>1&&a.leftNode){if(r.key<a.leftNode.key)return this.rightRotate(a);if(r.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(m<-1&&a.rightNode){if(r.key>a.rightNode.key)return this.leftRotate(a);if(r.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}}class d{static CreateCompositionKey(r){return r}static addNodeToTree(r){return a=this,t=void 0,C=function*(){return this.connectionTypeRoot==null?(this.connectionTypeRoot=r,this.connectionTypeRoot):(this.connectionTypeRoot=this.connectionTypeRoot.addNode(r,this.connectionTypeRoot,this.connectionTypeRoot.height),this.connectionTypeRoot)},new((c=void 0)||(c=Promise))(function(m,I){function E(D){try{B(C.next(D))}catch(W){I(W)}}function L(D){try{B(C.throw(D))}catch(W){I(W)}}function B(D){var W;D.done?m(D.value):(W=D.value,W instanceof c?W:new c(function(U){U(W)})).then(E,L)}B((C=C.apply(a,t||[])).next())});var a,t,c,C}static addConnectionToTree(r){if(r.id>0){let a=this.CreateCompositionKey(r.typeId);if(this.connectionTypeRoot){let t=this.connectionTypeRoot.getFromNode(a,this.connectionTypeRoot);if(t){let c=t?.value;c.length==0&&(t.value=[]),c.includes(r.id)||c.push(r.id)}else{let c=[];c.push(r.id);let C=new o(a,c,null,null);this.addNodeToTree(C)}}else{let t=[];t.push(r.id);let c=new o(a,t,null,null);this.addNodeToTree(c)}}else console.log("cannot insert key id with  n 0 to the connection tree",r)}static GetConnectionByOfTheConceptAndTypeId(r,a){let t=this.CreateCompositionKey(a);if(this.connectionTypeRoot){let c=this.connectionTypeRoot.getFromNode(t,this.connectionTypeRoot);if(c)return c.value}return null}}d.connectionTypeRoot=null;var f=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,[])).next())})};class v{constructor(){this.name="Connection Array"}static CheckContains(r){let a=!1;for(let t=0;t<this.connectionArray.length;t++)this.connectionArray[t].id==r.id&&(a=!0);return a}static AddConnectionToStorage(r){(0,n.kH)("connection",r)}static AddNpConn(r){this.deletedConnections.includes(r)||this.deletedConnections.push(r)}static GetNpConn(r){return!!this.deletedConnections.includes(r)}static AddConnection(r){try{w.O.addConnectionToTree(r),d.addConnectionToTree(r),i.H.addConnection(r)}catch(a){throw console.log("this is the error in making the connection"),a}}static AddConnectionToMemory(r){r.isTemp||(w.O.addConnectionToTree(r),d.addConnectionToTree(r),i.H.addConnection(r))}static AddToDictionary(r){this.connectionDictionary[r.id]=r}static RemoveConnection(r){r.id!=0&&((0,n.wh)("connection",r.id),w.O.removeNodeFromTree(r.id),i.H.removeNodeFromTree(r.id))}static GetConnectionTypeOfTree(){i.H.node}static GetConnectionByOfTheConceptAndType(r,a){return f(this,void 0,void 0,function*(){try{if(b.serviceWorker)try{return(yield(0,b.sendMessage)("ConnectionData__GetConnectionByOfTheConceptAndType",{ofTheConceptId:r,typeId:a})).data}catch(t){console.error("GetConnectionByOfTheConceptAndType sw error: ",t),(0,b.handleServiceWorkerException)(t)}return i.H.GetConnectionByOfTheConceptAndTypeId(r,a)||[]}catch(t){return console.log("this is the error in GetConnectionByOfTheConceptAndType",t),[]}})}static GetConnectionByOfType(r,a){const t=b.Logger.logfunction("ConnectionData.GetConnectionByOfType",arguments);let c=d.GetConnectionByOfTheConceptAndTypeId(r,a);return c?(b.Logger.logUpdate(t),c):(b.Logger.logUpdate(t),[])}static GetConnectionTree(){return w.O.connectionroot}static GetConnectionTypeTree(){return d.connectionTypeRoot}static GetConnectionBulkData(r,a,t){return f(this,void 0,void 0,function*(){yield w.O.getConnectionListFromIds(r,a,t)})}static GetConnection(r){return f(this,void 0,void 0,function*(){N.J.incrementConnection(r);let a=new T.N(0,0,0,0,0,0,0);try{if(b.serviceWorker)try{return(yield(0,b.sendMessage)("ConnectionData__GetConnection",{id:r})).data}catch(c){console.error("GetConnection sw error: ",c),(0,b.handleServiceWorkerException)(c)}let t=yield w.O.getNodeFromTree(r);if(t?.value){let c=t.value;c&&(a=c)}return a}catch(t){return console.log("this is the error in GetConnection",t),a}})}static GetConnectionsOfCompositionLocal(r){var a=arguments;return f(this,void 0,void 0,function*(){const t=b.Logger.logfunction("ConnectionData.GetConnectionsOfCompositionLocal",a)||{};let c=[];try{if(b.serviceWorker){t.serviceWorker=!0;try{const m=yield(0,b.sendMessage)("ConnectionData__GetConnectionsOfCompositionLocal",{id:r});return b.Logger.logUpdate(t),m.data}catch(m){console.error("GetConnectionsOfCompositionLocal sw error: ",m),(0,u.ey)(t,"GetConnectionsOfCompositionLocal",m),(0,b.handleServiceWorkerException)(m)}}let C=[];C=v.GetConnectionByOfType(r,r);for(let m=0;m<C.length;m++){let I=yield w.O.getNodeFromTree(C[m]);I&&c.push(I.value),b.Logger.logUpdate(t)}}catch(C){console.log("this is the error GetConnectionsOfCompositionLocal",r,c),(0,u.ey)(t,"ConnectionData.GetConnectionsOfCompositionLocal",C)}return c})}static GetConnectionsOfConcept(r){return f(this,void 0,void 0,function*(){let a=[],t=[];try{if(b.serviceWorker)try{return(yield(0,b.sendMessage)("ConnectionData__GetConnectionsOfConcept",{id:r})).data}catch(c){console.error("GetConnectionsOfConcept sw error: ",c),(0,b.handleServiceWorkerException)(c)}a=yield v.GetConnectionByOfTheConceptAndType(r,r);for(let c=0;c<a.length;c++){let C=yield w.O.getNodeFromTree(a[c]);C&&t.push(C.value)}return t}catch(c){return console.log("this is the error in GetConnectionsOfConcept",c),t}})}getName(){return this.name}}v.deletedConnections=[],v.connectionArray=[],v.connectionDictionary=[]},8339:(Q,O,y)=>{let N=y(396),b=y(9371),n=y(5238),u=y(5644),T=y(1534),w=y(5781);const i={empty:!0,space:!0};Q.exports=class{constructor(e){this.input=e,this.root=new u,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let o,d,f,v=new N;v.name=e[1].slice(1),v.name===""&&this.unnamedAtrule(v,e),this.init(v,e[2]);let S=!1,r=!1,a=[],t=[];for(;!this.tokenizer.endOfFile();){if(o=(e=this.tokenizer.nextToken())[0],o==="("||o==="["?t.push(o==="("?")":"]"):o==="{"&&t.length>0?t.push("}"):o===t[t.length-1]&&t.pop(),t.length===0){if(o===";"){v.source.end=this.getPosition(e[2]),v.source.end.offset++,this.semicolon=!0;break}if(o==="{"){r=!0;break}if(o==="}"){if(a.length>0){for(f=a.length-1,d=a[f];d&&d[0]==="space";)d=a[--f];d&&(v.source.end=this.getPosition(d[3]||d[2]),v.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){S=!0;break}}v.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(v.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(v,"params",a),S&&(e=a[a.length-1],v.source.end=this.getPosition(e[3]||e[2]),v.source.end.offset++,this.spaces=v.raws.between,v.raws.between="")):(v.raws.afterName="",v.params=""),r&&(v.nodes=[],this.current=v)}checkMissedSemicolon(e){let o=this.colon(e);if(o===!1)return;let d,f=0;for(let v=o-1;v>=0&&(d=e[v],d[0]==="space"||(f+=1,f!==2));v--);throw this.input.error("Missed semicolon",d[0]==="word"?d[3]+1:d[2])}colon(e){let o,d,f,v=0;for(let[S,r]of e.entries()){if(d=r,f=d[0],f==="("&&(v+=1),f===")"&&(v-=1),v===0&&f===":"){if(o){if(o[0]==="word"&&o[1]==="progid")continue;return S}this.doubleColon(d)}o=d}return!1}comment(e){let o=new b;this.init(o,e[2]),o.source.end=this.getPosition(e[3]||e[2]),o.source.end.offset++;let d=e[1].slice(2,-2);if(/^\s*$/.test(d))o.text="",o.raws.left=d,o.raws.right="";else{let f=d.match(/^(\s*)([^]*\S)(\s*)$/);o.text=f[2],o.raws.left=f[1],o.raws.right=f[3]}}createTokenizer(){this.tokenizer=w(this.input)}decl(e,o){let d=new n;this.init(d,e[0][2]);let f,v=e[e.length-1];for(v[0]===";"&&(this.semicolon=!0,e.pop()),d.source.end=this.getPosition(v[3]||v[2]||function(a){for(let t=a.length-1;t>=0;t--){let c=a[t],C=c[3]||c[2];if(C)return C}}(e)),d.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),d.raws.before+=e.shift()[1];for(d.source.start=this.getPosition(e[0][2]),d.prop="";e.length;){let a=e[0][0];if(a===":"||a==="space"||a==="comment")break;d.prop+=e.shift()[1]}for(d.raws.between="";e.length;){if(f=e.shift(),f[0]===":"){d.raws.between+=f[1];break}f[0]==="word"&&/\w/.test(f[1])&&this.unknownWord([f]),d.raws.between+=f[1]}d.prop[0]!=="_"&&d.prop[0]!=="*"||(d.raws.before+=d.prop[0],d.prop=d.prop.slice(1));let S,r=[];for(;e.length&&(S=e[0][0],S==="space"||S==="comment");)r.push(e.shift());this.precheckMissedSemicolon(e);for(let a=e.length-1;a>=0;a--){if(f=e[a],f[1].toLowerCase()==="!important"){d.important=!0;let t=this.stringFrom(e,a);t=this.spacesFromEnd(e)+t,t!==" !important"&&(d.raws.important=t);break}if(f[1].toLowerCase()==="important"){let t=e.slice(0),c="";for(let C=a;C>0;C--){let m=t[C][0];if(c.trim().startsWith("!")&&m!=="space")break;c=t.pop()[1]+c}c.trim().startsWith("!")&&(d.important=!0,d.raws.important=c,e=t)}if(f[0]!=="space"&&f[0]!=="comment")break}e.some(a=>a[0]!=="space"&&a[0]!=="comment")&&(d.raws.between+=r.map(a=>a[1]).join(""),r=[]),this.raw(d,"value",r.concat(e),o),d.value.includes(":")&&!o&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let o=new T;this.init(o,e[2]),o.selector="",o.raws.between="",this.current=o}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let o=this.current.nodes[this.current.nodes.length-1];o&&o.type==="rule"&&!o.raws.ownSemicolon&&(o.raws.ownSemicolon=this.spaces,this.spaces="",o.source.end=this.getPosition(e[2]),o.source.end.offset+=o.raws.ownSemicolon.length)}}getPosition(e){let o=this.input.fromOffset(e);return{column:o.col,line:o.line,offset:e}}init(e,o){this.current.push(e),e.source={input:this.input,start:this.getPosition(o)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let o=!1,d=null,f=!1,v=null,S=[],r=e[1].startsWith("--"),a=[],t=e;for(;t;){if(d=t[0],a.push(t),d==="("||d==="[")v||(v=t),S.push(d==="("?")":"]");else if(r&&f&&d==="{")v||(v=t),S.push("}");else if(S.length===0){if(d===";"){if(f)return void this.decl(a,r);break}if(d==="{")return void this.rule(a);if(d==="}"){this.tokenizer.back(a.pop()),o=!0;break}d===":"&&(f=!0)}else d===S[S.length-1]&&(S.pop(),S.length===0&&(v=null));t=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(o=!0),S.length>0&&this.unclosedBracket(v),o&&f){if(!r)for(;a.length&&(t=a[a.length-1][0],t==="space"||t==="comment");)this.tokenizer.back(a.pop());this.decl(a,r)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,o,d,f){let v,S,r,a,t=d.length,c="",C=!0;for(let m=0;m<t;m+=1)v=d[m],S=v[0],S!=="space"||m!==t-1||f?S==="comment"?(a=d[m-1]?d[m-1][0]:"empty",r=d[m+1]?d[m+1][0]:"empty",i[a]||i[r]||c.slice(-1)===","?C=!1:c+=v[1]):c+=v[1]:C=!1;if(!C){let m=d.reduce((I,E)=>I+E[1],"");e.raws[o]={raw:m,value:c}}e[o]=c}rule(e){e.pop();let o=new T;this.init(o,e[0][2]),o.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(o,"selector",e),this.current=o}spacesAndCommentsFromEnd(e){let o,d="";for(;e.length&&(o=e[e.length-1][0],o==="space"||o==="comment");)d=e.pop()[1]+d;return d}spacesAndCommentsFromStart(e){let o,d="";for(;e.length&&(o=e[0][0],o==="space"||o==="comment");)d+=e.shift()[1];return d}spacesFromEnd(e){let o,d="";for(;e.length&&(o=e[e.length-1][0],o==="space");)d=e.pop()[1]+d;return d}stringFrom(e,o){let d="";for(let f=o;f<e.length;f++)d+=e[f][1];return e.splice(o,e.length-o),d}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,o){throw this.input.error("At-rule without name",{offset:o[2]},{offset:o[2]+o[1].length})}}},8349:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(5170))&&N.__esModule?N:{default:N},n=function(){function u(w,i){this.func=w||function(){},this.funcRes=null,this.options=i}var T=u.prototype;return T._shouldUpdateSelector=function(w,i){return i===void 0&&(i={}),Object.assign({},this.options,i).updateSelector!==!1&&typeof w!="string"},T._isLossy=function(w){return w===void 0&&(w={}),Object.assign({},this.options,w).lossless===!1},T._root=function(w,i){return i===void 0&&(i={}),new b.default(w,this._parseOptions(i)).root},T._parseOptions=function(w){return{lossy:this._isLossy(w)}},T._run=function(w,i){var e=this;return i===void 0&&(i={}),new Promise(function(o,d){try{var f=e._root(w,i);Promise.resolve(e.func(f)).then(function(v){var S=void 0;return e._shouldUpdateSelector(w,i)&&(S=f.toString(),w.selector=S),{transform:v,root:f,string:S}}).then(o,d)}catch(v){return void d(v)}})},T._runSync=function(w,i){i===void 0&&(i={});var e=this._root(w,i),o=this.func(e);if(o&&typeof o.then=="function")throw new Error("Selector processor returned a promise to a synchronous call.");var d=void 0;return i.updateSelector&&typeof w!="string"&&(d=e.toString(),w.selector=d),{transform:o,root:e,string:d}},T.ast=function(w,i){return this._run(w,i).then(function(e){return e.root})},T.astSync=function(w,i){return this._runSync(w,i).root},T.transform=function(w,i){return this._run(w,i).then(function(e){return e.transform})},T.transformSync=function(w,i){return this._runSync(w,i).transform},T.process=function(w,i){return this._run(w,i).then(function(e){return e.string||e.root.toString()})},T.processSync=function(w,i){var e=this._runSync(w,i);return e.string||e.root.toString()},u}();O.default=n,Q.exports=O.default},8354:(Q,O)=>{O.__esModule=!0,O.default=function(y){for(var N="",b=y.indexOf("/*"),n=0;b>=0;){N+=y.slice(n,b);var u=y.indexOf("*/",b+2);if(u<0)return N;n=u+2,b=y.indexOf("/*",n)}return N+y.slice(n)},Q.exports=O.default},8357:(Q,O,y)=>{y.d(O,{$:()=>e});var N=y(3077),b=y(8064),n=y(6467),u=y(9975),T=y(1245),w=y(1863),i=function(o,d,f,v){return new(f||(f=Promise))(function(S,r){function a(C){try{c(v.next(C))}catch(m){r(m)}}function t(C){try{c(v.throw(C))}catch(m){r(m)}}function c(C){var m;C.done?S(C.value):(m=C.value,m instanceof f?m:new f(function(I){I(m)})).then(a,t)}c((v=v.apply(o,d||[])).next())})};function e(o,d,f,v){var S=arguments;return i(this,arguments,void 0,function*(r,a,t,c,C={concepts:[],connections:[]}){var m,I,E,L;const B=T.Logger.logfunction("MakeTheTypeConceptLocal",S)||{};if(T.serviceWorker){B.serviceWorker=!0;try{const W=yield(0,T.sendMessage)("MakeTheTypeConceptLocal",{typeString:r,sessionId:a,sessionUserId:t,userId:c,actions:C});return!((I=(m=W?.actions)===null||m===void 0?void 0:m.concepts)===null||I===void 0)&&I.length&&(C.concepts=JSON.parse(JSON.stringify(W.actions.concepts))),!((L=(E=W?.actions)===null||E===void 0?void 0:E.connections)===null||L===void 0)&&L.length&&(C.connections=JSON.parse(JSON.stringify(W.actions.connections))),T.Logger.logUpdate(B),W.data}catch(W){console.error("MakeTheTypeConceptLocal error sw: ",W),(0,w.ey)(B,"MakeTheTypeConceptLocal",W),(0,T.handleServiceWorkerException)(W)}}let D=yield(0,b.$I)(r);if(D&&(D.id==0||D.userId==0)){let W=(0,n.f)(r);if(W[0]==r)D=yield(0,u.A)(r,"the",c,1,51,C);else{let U=yield e(W[0],a,t,c,C),P=yield e(W[1],a,t,c,C);D=yield(0,N.A)(r,W[1],c,U.id,P.id,4,void 0,null,C)}}return T.Logger.logUpdate(B),D})}},8407:(Q,O,y)=>{y.d(O,{A:()=>v});var N=y(9581),b=y(3518),n=y(1863),u=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,[])).next())})},T=y(4402),w=y(1245),i=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,[])).next())})};class e{constructor(r,a,t,c,C,m,I,E,L,B){this.id=0,this.userId=r,this.data=a,this.securityId=t,this.securityUserId=c,this.accessId=C,this.accessUserId=m,this.sessionId=I,this.sessionUserId=E,this.entryTimestamp=L,this.isNew=B}}var o=y(7282),d=y(2212),f=function(S,r,a,t){return new(a||(a=Promise))(function(c,C){function m(L){try{E(t.next(L))}catch(B){C(B)}}function I(L){try{E(t.throw(L))}catch(B){C(B)}}function E(L){var B;L.done?c(L.value):(B=L.value,B instanceof a?B:new a(function(D){D(B)})).then(m,I)}E((t=t.apply(S,r||[])).next())})};function v(S,r){var a=arguments;return f(this,arguments,void 0,function*(t,c,C=!1,m,I=4,E=999,L=0){const B=w.Logger.logfunction("MakeTheInstanceConcept",a)||{};if(w.serviceWorker){B.serviceWorker=!0;try{const se=yield(0,w.sendMessage)("MakeTheInstanceConcept",{type:t,referent:c,composition:C,userId:m,passedAccessId:I,passedSessionId:E,referentId:L});return w.Logger.logUpdate(B),se.data}catch(se){console.error("MakeTheInstanceConcept sw error: ",se),(0,n.ey)(B,"MakeTheInstanceConcept",se),(0,w.handleServiceWorkerException)(se)}}let D,W=E,U=m,P=m,M=I,j=m,z="",K=c.length,ee=(0,o.o)();if(z=t.startsWith("the_")?t:"the_"+t,C)ee=yield(0,w.MakeTheTypeConceptApi)(t,m),D=yield(0,d.Ay)(c,m,4,ee.id,L,M,t);else if(K>255)ee=yield(0,w.MakeTheTypeConceptApi)(z,m),D=yield(0,d.Ay)(c,m,4,ee.id,L,M,z),function(se){u(this,void 0,void 0,function*(){try{var $=(0,b.Xr)();const ie=yield fetch(N.B.CreateTheTextDataUrl(),{method:"POST",headers:$,body:JSON.stringify(se)});if(!ie.ok)throw(0,n.ry)(ie),new Error(`Error! status: ${ie.status}`);return yield ie.json()}catch(ie){throw ie instanceof Error?console.log("Create the text error message: ",ie.message):console.log("Create the text unexpected error: ",ie),ie}})}(new e(m,c,999,U,M,j,W,P,Date.now().toString(),!0));else{ee=yield(0,w.MakeTheTypeConceptApi)(z,m);let se=yield(0,T.A)(c,ee.id);D=se,se.id==0&&se.userId==0&&(D=yield(0,d.N)(c,m,4,ee.id,12,M,z),function($,ie,ue,te){var X=arguments;i(this,void 0,void 0,function*(){const ne=w.Logger.logfunction("MakeTheNameInBackend",X);try{let Y={newConceptId:$,referent:ie,typeId:ue,typeUserId:te},J=(0,b.Xr)(),re=JSON.stringify(Y);const ae=yield fetch(N.B.MakeTheNameInBackendUrl(),{method:"POST",headers:J,body:re});w.Logger.logUpdate(ne),ae.ok||(0,n.ry)(ae)}catch(Y){Y instanceof Error?console.log("make the name in backend error message: ",Y.message):console.log("make the name in backend unexpected error: ",Y),(0,n.Mb)(Y,N.B.MakeTheNameInBackendUrl()),(0,n.ey)(ne,"MakeTheNameInBackend",Y)}})}(D.id,`${c}`,ee.id,m))}return D.type=ee,w.Logger.logUpdate(B),D})}},8500:(Q,O,y)=>{O.__esModule=!0,O.isComment=O.isCombinator=O.isClassName=O.isAttribute=void 0,O.isContainer=function(m){return!(!u(m)||!m.walk)},O.isIdentifier=void 0,O.isNamespace=function(m){return w(m)||t(m)},O.isNesting=void 0,O.isNode=u,O.isPseudo=void 0,O.isPseudoClass=function(m){return v(m)&&!C(m)},O.isPseudoElement=C,O.isUniversal=O.isTag=O.isString=O.isSelector=O.isRoot=void 0;var N,b=y(1581),n=((N={})[b.ATTRIBUTE]=!0,N[b.CLASS]=!0,N[b.COMBINATOR]=!0,N[b.COMMENT]=!0,N[b.ID]=!0,N[b.NESTING]=!0,N[b.PSEUDO]=!0,N[b.ROOT]=!0,N[b.SELECTOR]=!0,N[b.STRING]=!0,N[b.TAG]=!0,N[b.UNIVERSAL]=!0,N);function u(m){return typeof m=="object"&&n[m.type]}function T(m,I){return u(I)&&I.type===m}var w=T.bind(null,b.ATTRIBUTE);O.isAttribute=w;var i=T.bind(null,b.CLASS);O.isClassName=i;var e=T.bind(null,b.COMBINATOR);O.isCombinator=e;var o=T.bind(null,b.COMMENT);O.isComment=o;var d=T.bind(null,b.ID);O.isIdentifier=d;var f=T.bind(null,b.NESTING);O.isNesting=f;var v=T.bind(null,b.PSEUDO);O.isPseudo=v;var S=T.bind(null,b.ROOT);O.isRoot=S;var r=T.bind(null,b.SELECTOR);O.isSelector=r;var a=T.bind(null,b.STRING);O.isString=a;var t=T.bind(null,b.TAG);O.isTag=t;var c=T.bind(null,b.UNIVERSAL);function C(m){return v(m)&&m.value&&(m.value.startsWith("::")||m.value.toLowerCase()===":before"||m.value.toLowerCase()===":after"||m.value.toLowerCase()===":first-letter"||m.value.toLowerCase()===":first-line")}O.isUniversal=c},8633:Q=>{var O=String,y=function(){return{isColorSupported:!1,reset:O,bold:O,dim:O,italic:O,underline:O,inverse:O,hidden:O,strikethrough:O,black:O,red:O,green:O,yellow:O,blue:O,magenta:O,cyan:O,white:O,gray:O,bgBlack:O,bgRed:O,bgGreen:O,bgYellow:O,bgBlue:O,bgMagenta:O,bgCyan:O,bgWhite:O,blackBright:O,redBright:O,greenBright:O,yellowBright:O,blueBright:O,magentaBright:O,cyanBright:O,whiteBright:O,bgBlackBright:O,bgRedBright:O,bgGreenBright:O,bgYellowBright:O,bgBlueBright:O,bgMagentaBright:O,bgCyanBright:O,bgWhiteBright:O}};Q.exports=y(),Q.exports.createColors=y},8642:(Q,O,y)=>{y.d(O,{Y:()=>d});var N=y(8286),b=y(9581),n=y(4364),u=y(5284),T=y(1412),w=y(3518),i=y(1863),e=y(1245),o=function(f,v,S,r){return new(S||(S=Promise))(function(a,t){function c(I){try{m(r.next(I))}catch(E){t(E)}}function C(I){try{m(r.throw(I))}catch(E){t(E)}}function m(I){var E;I.done?a(I.value):(E=I.value,E instanceof S?E:new S(function(L){L(E)})).then(c,C)}m((r=r.apply(f,v||[])).next())})};function d(){var f=arguments;return o(this,arguments,void 0,function*(v=[]){const S=e.Logger.logfunction("GetAllConnectionsOfCompositionBulk",f)||{};if(e.serviceWorker){S.serviceWorker=!0;try{const c=yield(0,e.sendMessage)("GetAllConnectionsOfCompositionBulk",{composition_ids:v});return e.Logger.logUpdate(S),c.data}catch(c){console.error("GetAllConnectionsOfCompositionBulk sw error: ",c),(0,i.ey)(S,"GetAllConnectionsOfCompositionBulk",c),(0,e.handleServiceWorkerException)(c)}}var r=[];if(v.length<=0)return r;var a=yield(0,u.B)(v),t=yield function(){var c=arguments;return o(this,arguments,void 0,function*(C=[]){const m=e.Logger.logfunction("GetAllConnectionsOfCompositionOnline",c);var I=[];try{var E=(0,w.Xr)();const B=yield fetch(b.B.GetAllConnectionsOfCompositionBulkUrl(),{method:"POST",headers:E,body:JSON.stringify(C)});if(B.ok){const D=yield B.json();for(var L=0;L<D.length;L++)N.d.AddConnection(D[L]),I.push(D[L])}else console.log("Get all connections of composition bulk error message: ","Cannot get response"),(0,i.ry)(B);return e.Logger.logUpdate(m),I}catch(B){B instanceof Error?console.log("Get all connections of composition bulk error message: ",B.message):console.log("Get all connections of composition bulk unexpected error: ",B),(0,i.Mb)(B,b.B.GetAllConnectionsOfCompositionBulkUrl()),(0,i.ey)(m,"GetAllConnectionsOfCompositionOnline",B)}})}(v);return r=t,(0,T.e)(r,a),yield(0,n.s)(r),e.Logger.logUpdate(S),r})}},8675:(Q,O,y)=>{y.d(O,{l:()=>T});var N=y(1863),b=y(3518),n=y(1245),u=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,[])).next())})};function T(w){var i=arguments;return u(this,void 0,void 0,function*(){n.Logger.logfunction("GetAllLinkerConnectionsFromTheConcept",i);var e=[];try{new Date().getTime();var o=(0,b.Xr)("application/x-www-form-urlencoded");const v=yield fetch(n.BaseUrl.GetAllLinkerConnectionOfConceptUrl()+`?conceptId=${w}`,{method:"GET",headers:o});if(v.ok){const S=yield v.json();for(var d=0;d<S.length;d++){var f=S[d];e.push(f)}}else console.log("Get all linker connection from the concepts error","cannot get respone"),(0,N.ry)(v)}catch(v){v instanceof Error?console.log("Get all linker connection from the concepts error: ",v.message):console.log("Get all linker connection from the concepts error(Unexpected): ",v),(0,N.Mb)(v,n.BaseUrl.GetAllLinkerConnectionOfConceptUrl())}return e})}},8937:Q=>{var O={}.hasOwnProperty,y=/[ -,\.\/:-@\[-\^`\{-~]/,N=/[ -,\.\/:-@\[\]\^`\{-~]/,b=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,n=function u(T,w){(w=function(c,C){if(!c)return C;var m={};for(var I in C)m[I]=O.call(c,I)?c[I]:C[I];return m}(w,u.options)).quotes!="single"&&w.quotes!="double"&&(w.quotes="single");for(var i=w.quotes=="double"?'"':"'",e=w.isIdentifier,o=T.charAt(0),d="",f=0,v=T.length;f<v;){var S=T.charAt(f++),r=S.charCodeAt(),a=void 0;if(r<32||r>126){if(r>=55296&&r<=56319&&f<v){var t=T.charCodeAt(f++);(64512&t)==56320?r=((1023&r)<<10)+(1023&t)+65536:f--}a="\\"+r.toString(16).toUpperCase()+" "}else a=w.escapeEverything?y.test(S)?"\\"+S:"\\"+r.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(S)?"\\"+r.toString(16).toUpperCase()+" ":S=="\\"||!e&&(S=='"'&&i==S||S=="'"&&i==S)||e&&N.test(S)?"\\"+S:S;d+=a}return e&&(/^-[-\d]/.test(d)?d="\\-"+d.slice(1):/\d/.test(o)&&(d="\\3"+o+" "+d.slice(1))),d=d.replace(b,function(c,C,m){return C&&C.length%2?c:(C||"")+m}),!e&&w.wrap?i+d+i:d};n.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},n.version="3.0.0",Q.exports=n},8939:(Q,O,y)=>{y.d(O,{$N:()=>m,$V:()=>d,Ez:()=>I,JA:()=>c,Mb:()=>S,Nj:()=>v,PT:()=>C,RW:()=>t,XI:()=>a,ay:()=>o,hL:()=>e,kx:()=>r,re:()=>f,yz:()=>E,zN:()=>D});var N=y(7139),b=y(2),n=y(3026),u=y(8286),T=y(1245),w=y(1863),i=function(U,P,M,j){return new(M||(M=Promise))(function(z,K){function ee(ie){try{$(j.next(ie))}catch(ue){K(ue)}}function se(ie){try{$(j.throw(ie))}catch(ue){K(ue)}}function $(ie){var ue;ie.done?z(ie.value):(ue=ie.value,ue instanceof M?ue:new M(function(te){te(ue)})).then(ee,se)}$((j=j.apply(U,P||[])).next())})};function e(U){return i(this,void 0,void 0,function*(){let P={connectionList:[],compositionList:[]};try{if(T.serviceWorker)try{return(yield(0,T.sendMessage)("GetCompositionById",{id:U})).data}catch(j){console.error("GetCompositionById error sw: ",j),(0,T.handleServiceWorkerException)(j)}let M=yield(0,b.s)(U);P.connectionList=M;for(let j=0;j<P.connectionList.length;j++)P.compositionList.includes(P.connectionList[j].ofTheConceptId)||P.compositionList.push(P.connectionList[j].ofTheConceptId);return P}catch(M){return console.error("GetCompositionById error: ",M),P}})}function o(U,P,M){return i(this,void 0,void 0,function*(){var j,z;let K={},ee=yield n.I.GetConcept(U);ee.id==0&&U!=null&&U!=null&&(ee=yield(0,N.r)(U));let se=yield D(U,P,M);return K[(z=(j=ee?.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:""]=se,K})}function d(U,P,M){return i(this,void 0,void 0,function*(){var j,z;let K={},ee=yield n.I.GetConcept(U);ee.id==0&&U!=null&&U!=null&&(ee=yield(0,N.r)(U));let se=yield D(U,P,M);K[(z=(j=ee?.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:""]=se;let $={};return $.created_at=ee.entryTimeStamp,$.data=K,$.id=U,$})}function f(U,P,M){return i(this,void 0,void 0,function*(){var j,z;let K={},ee=yield n.I.GetConcept(U);ee.id==0&&U!=null&&U!=null&&(ee=yield(0,N.r)(U));let se=yield B(ee,P,M);return K[(z=(j=ee?.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:""]=se,K})}function v(U){return i(this,void 0,void 0,function*(){var P,M;if(T.serviceWorker)try{return(yield(0,T.sendMessage)("GetComposition",{id:U})).data}catch($){console.error("GetComposition error sw: ",$),(0,T.handleServiceWorkerException)($)}let j=[],z={};j=yield(0,b.s)(U);let K=[];for(let $=0;$<j.length;$++)K.includes(j[$].ofTheConceptId)||K.push(j[$].ofTheConceptId);let ee=yield n.I.GetConcept(U);ee.id==0&&U!=null&&U!=null&&(ee=yield(0,N.r)(U));let se=yield D(U,j,K);return z[(M=(P=ee?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,z})}function S(U){return i(this,void 0,void 0,function*(){var P,M;let j=[],z={};j=yield(0,b.s)(U);let K=[];for(let $=0;$<j.length;$++)K.includes(j[$].ofTheConceptId)||K.push(j[$].ofTheConceptId);let ee=yield n.I.GetConcept(U);ee.id==0&&U!=null&&U!=null&&(ee=yield(0,N.r)(U));let se=yield W(U,j,K);return z[(M=(P=ee?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,z})}function r(U){return i(this,void 0,void 0,function*(){var P,M;if(T.serviceWorker)try{return(yield(0,T.sendMessage)("GetCompositionFromMemory",{id:U})).data}catch($){console.error("GetCompositionFromMemory error sw: ",$),(0,T.handleServiceWorkerException)($)}let j=[],z={};j=yield u.d.GetConnectionsOfCompositionLocal(U);let K=[];for(let $=0;$<j.length;$++)K.includes(j[$].ofTheConceptId)||K.push(j[$].ofTheConceptId);let ee=yield n.I.GetConcept(U);ee.id==0&&U!=null&&U!=null&&(ee=yield(0,N.r)(U));let se=yield L(ee,j,K);return z[(M=(P=ee?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,z})}function a(U){return i(this,void 0,void 0,function*(){var P,M;if(T.serviceWorker)try{return(yield(0,T.sendMessage)("GetCompositionFromMemoryNormal",{id:U})).data}catch($){console.error("GetCompositionFromMemoryNormal error sw: ",$),(0,T.handleServiceWorkerException)($)}let j=[],z={};j=yield u.d.GetConnectionsOfCompositionLocal(U);let K=[];for(let $=0;$<j.length;$++)K.includes(j[$].ofTheConceptId)||K.push(j[$].ofTheConceptId);let ee=yield n.I.GetConcept(U);ee.id==0&&U!=null&&U!=null&&(ee=yield(0,N.r)(U));let se=yield B(ee,j,K);return z[(M=(P=ee?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,z})}function t(U){var P=arguments;return i(this,void 0,void 0,function*(){var M,j;const z=T.Logger.logfunction("GetCompositionWithIdFromMemory",P)||{};if(T.serviceWorker){z.serviceWorker=!0;try{const $=yield(0,T.sendMessage)("GetCompositionWithIdFromMemory",{id:U});return T.Logger.logUpdate(z),$.data}catch($){console.error("GetCompositionWithIdFromMemory error sw: ",$),(0,w.ey)(z,"GetCompositionWithIdFromMemory",$),(0,T.handleServiceWorkerException)($)}}let K={},ee=[],se={};try{ee=yield u.d.GetConnectionsOfCompositionLocal(U);let $=[];for(let te=0;te<ee.length;te++)$.includes(ee[te].ofTheConceptId)||$.push(ee[te].ofTheConceptId);let ie=yield n.I.GetConcept(U);ie.id==0&&U!=null&&U!=null&&(ie=yield(0,N.r)(U));let ue=yield L(ie,ee,$);se[(j=(M=ie?.type)===null||M===void 0?void 0:M.characterValue)!==null&&j!==void 0?j:""]=ue,K.created_at=ie.entryTimeStamp,K.data=se,K.id=U}catch($){console.log("this is the exception in GetCompositionWithIdFromMemory",U),(0,w.ey)(z,"GetCompositionWithIdFromMemory",$)}return T.Logger.logUpdate(z),K})}function c(U,P){var M=arguments;return i(this,void 0,void 0,function*(){var j,z;const K=T.Logger.logfunction("GetCompositionFromMemoryWithConnections",M)||{};if(T.serviceWorker){K.serviceWorker=!0;try{const te=yield(0,T.sendMessage)("GetCompositionFromMemoryWithConnections",{id:U,connectionList:P});return T.Logger.logUpdate(K),te.data}catch(te){console.error("GetCompositionFromMemoryWithConnections error sw: ",te),(0,w.ey)(K,"GetCompositionFromMemoryWithConnections",te),(0,T.handleServiceWorkerException)(te)}}let ee={},se=[];for(let te=0;te<P.length;te++)se.includes(P[te].ofTheConceptId)||se.push(P[te].ofTheConceptId);let $=yield n.I.GetConcept(U);$.id==0&&U!=null&&U!=null&&($=yield(0,N.r)(U));let ie=yield L($,P,se);ee[(z=(j=$?.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:""]=ie;let ue={};return ue.created_at=$.entryTimeStamp,ue.data=ee,ue.id=U,T.Logger.logUpdate(K),ue})}function C(U,P){return i(this,void 0,void 0,function*(){var M,j;const z=T.Logger.logfunction("GetCompositionWithIdFromMemoryFromConnection",[U])||{};if(T.serviceWorker){z.serviceWorker=!0;try{const ue=yield(0,T.sendMessage)("GetCompositionWithIdFromMemory",{id:U});return T.Logger.logUpdate(z),ue.data}catch(ue){console.error("GetCompositionWithIdFromMemory error sw: ",ue),(0,w.ey)(z,"GetCompositionWithIdFromMemoryFromConnection",ue),(0,T.handleServiceWorkerException)(ue)}}let K={},ee=[];for(let ue=0;ue<P.length;ue++)ee.includes(P[ue].ofTheConceptId)||ee.push(P[ue].ofTheConceptId);let se=yield n.I.GetConcept(U);se.id==0&&U!=null&&U!=null&&(se=yield(0,N.r)(U));let $=yield L(se,P,ee);K[(j=(M=se?.type)===null||M===void 0?void 0:M.characterValue)!==null&&j!==void 0?j:""]=$;let ie={};return ie.created_at=se.entryTimeStamp,ie.data=K,ie.id=U,T.Logger.logUpdate(z),ie})}function m(U){return i(this,void 0,void 0,function*(){var P;if(T.serviceWorker)try{return(yield(0,T.sendMessage)("GetCompositionWithIdFromMemoryNew",{id:U})).data}catch($){console.error("GetCompositionWithIdFromMemoryNew error sw: ",$),(0,T.handleServiceWorkerException)($)}let M=[],j={};M=yield u.d.GetConnectionsOfCompositionLocal(U);let z=[];for(let $=0;$<M.length;$++)z.includes(M[$].ofTheConceptId)||z.push(M[$].ofTheConceptId);let K=yield n.I.GetConcept(U);K.id==0&&U!=null&&U!=null&&(console.log("this concept you cannot find ",U),K=yield(0,N.r)(U)),new Date().getTime();let ee=yield function($,ie,ue){return i(this,arguments,void 0,function*(te,X,ne,Y=[]){var J,re,ae,de,ce,we,Ie,me;let ke={},be=te.id,ge=(new Date().getTime(),(re=(J=te?.type)===null||J===void 0?void 0:J.characterValue)!==null&&re!==void 0?re:"");if(!ne.includes(be))return{[ge]:te?.characterValue};if(Y.includes(be))return"";Y.push(be);for(let ve=0;ve<X.length;ve++){let Ce=yield(0,T.GetTheConcept)(X[ve].ofTheConceptId),Te=yield(0,T.GetTheConcept)(X[ve].toTheConceptId);X[ve].ofConcept=Ce,X[ve].toConcept=Te;let xe=Ce.id,fe="the_",Ne=((de=(ae=Te?.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&de!==void 0?de:"").replace(fe,"");ke[xe]!=null&&ke[xe]!=null||(ke[xe]={}),ke[xe][Ne]=Te.characterValue}let _e={};for(let ve=0;ve<X.length;ve++){let Ce=X[ve].ofConcept,Te=X[ve].toConcept,xe=(we=(ce=Ce?.type)===null||ce===void 0?void 0:ce.characterValue)!==null&&we!==void 0?we:"",fe="the_",Ne=((me=(Ie=Te?.type)===null||Ie===void 0?void 0:Ie.characterValue)!==null&&me!==void 0?me:"").replace(fe,"");_e[Ce.id]!=null&&_e[Ce.id]!=null||(_e[Ce.id]={});let Re=_e[Ce.id];Re[xe]!=null&&Re[xe]!=null||(Re[xe]={}),ke[X[ve].ofTheConceptId]!=null&&ke[X[ve].toTheConceptId]!=null?Re[xe][Ne]=ke[Te.id]:Re[xe][Ne]=Te.characterValue}return _e[te.id]})}(K,M,z);(P=K?.type)===null||P===void 0||P.characterValue,j=ee;let se={};return se.created_at=K.entryTimeStamp,se.data=j,se.id=U,se})}function I(U){return i(this,void 0,void 0,function*(){var P,M;if(T.serviceWorker)try{return(yield(0,T.sendMessage)("GetCompositionWithIdAndDateFromMemory",{id:U})).data}catch(ie){console.error("GetCompositionWithIdAndDateFromMemory error sw: ",ie),(0,T.handleServiceWorkerException)(ie)}let j=[],z={};j=yield u.d.GetConnectionsOfCompositionLocal(U);let K=[];for(let ie=0;ie<j.length;ie++)K.includes(j[ie].ofTheConceptId)||K.push(j[ie].ofTheConceptId);let ee=yield n.I.GetConcept(U);ee.id==0&&U!=null&&U!=null&&(ee=yield(0,N.r)(U));let se=yield D(U,j,K);z[(M=(P=ee?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se;let $={};return $.data=z,$.id=U,$.created_at=ee.entryTimeStamp,$})}function E(U){var P=arguments;return i(this,void 0,void 0,function*(){var M,j;const z=T.Logger.logfunction("GetCompositionWithId",P)||{};if(T.serviceWorker){z.serviceWorker=!0;try{const te=yield(0,T.sendMessage)("GetCompositionWithId",{id:U});return T.Logger.logUpdate(z),te.data}catch(te){console.error("GetCompositionWithId error sw: ",te),(0,w.ey)(z,"GetCompositionWithId",te),(0,T.handleServiceWorkerException)(te)}}let K=[],ee={};K=yield(0,b.s)(U);let se=[];for(let te=0;te<K.length;te++)se.includes(K[te].ofTheConceptId)||se.push(K[te].ofTheConceptId);let $=yield n.I.GetConcept(U);$.id==0&&U!=null&&U!=null&&($=yield(0,N.r)(U));let ie=yield D(U,K,se);ee[(j=(M=$?.type)===null||M===void 0?void 0:M.characterValue)!==null&&j!==void 0?j:""]=ie;let ue={};return ue.data=ee,ue.id=U,T.Logger.logUpdate(z),ue})}function L(U,P,M){return i(this,arguments,void 0,function*(j,z,K,ee=[]){var se,$,ie;let ue={},te=[],X=j.id;if((se=j?.type)===null||se===void 0||se.characterValue,!K.includes(X))return j?.characterValue;if(ee.includes(X))return"";ee.push(X);for(let ne=0;ne<z.length;ne++)if(z[ne].ofTheConceptId==X)if(X!=z[ne].toTheConceptId){let Y=z[ne].toTheConceptId,J=yield n.I.GetConcept(Y);if(J!=null&&J.id!=0||Y==null||Y==null||(J=yield(0,N.r)(Y)),J.id!=0&&J?.type==null){let de=J.typeId,ce=yield n.I.GetConcept(de);J.type=ce,ce==null&&de!=null&&de!=null&&(ce=yield(0,N.r)(de),J.type=ce)}let re="the_",ae=((ie=($=J?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(re,"");if(isNaN(Number(ae))){if(ae){const de=yield L(J,z,K,ee);ue[ae]=de}}else{const de=yield L(J,z,K,ee);te[ae]=de,ue=te}}else console.log("this is the faulty connection ",z[ne]);return ue})}function B(U,P,M){return i(this,arguments,void 0,function*(j,z,K,ee=[]){var se,$,ie;const ue=T.Logger.logfunction("recursiveFetchConceptNormal",[j]);new Date().getTime();let te={},X=[],ne=j.id;if(te.id=ne,(se=j?.type)===null||se===void 0||se.characterValue,!K.includes(ne))return j?.characterValue;if(ee.includes(ne))return"";ee.push(ne);for(let Y=0;Y<z.length;Y++)if(z[Y].ofTheConceptId==ne)if(ne!=z[Y].toTheConceptId){let J=z[Y].toTheConceptId,re=yield n.I.GetConcept(J);if(re!=null&&re.id!=0||J==null||J==null||(re=yield(0,N.r)(J)),re.id!=0&&re?.type==null){let ce=re.typeId,we=yield n.I.GetConcept(ce);re.type=we,we==null&&ce!=null&&ce!=null&&(we=yield(0,N.r)(ce),re.type=we)}let ae="the_",de=((ie=($=re?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(ae,"");if(isNaN(Number(de))){if(de){const ce=yield L(re,z,K,ee);te[de]=ce}}else{const ce=yield L(re,z,K,ee);X[de]=ce,te=X}}else console.log("this is the faulty connection ",z[Y]);return T.Logger.logUpdate(ue),te})}function D(U,P,M){return i(this,arguments,void 0,function*(j,z,K,ee=[]){var se,$,ie;let ue={},te=[];if(j==0)return null;let X=yield n.I.GetConcept(j);if(X!=null&&X.id!=0||j==null||j==null||(X=yield(0,N.r)(j)),X.id!=0&&X.type==null){let ne=X.typeId,Y=yield n.I.GetConcept(ne);X.type=Y,Y==null&&ne!=null&&ne!=null&&(Y=yield(0,N.r)(ne),X.type=Y)}if((se=X?.type)===null||se===void 0||se.characterValue,!K.includes(j))return X?.characterValue;if(ee.includes(j))return"";ee.push(j);for(let ne=0;ne<z.length;ne++)if(new Date().getTime(),z[ne].ofTheConceptId==j)if(j!=z[ne].toTheConceptId){let Y=z[ne].toTheConceptId,J=yield n.I.GetConcept(Y);if(J!=null&&J.id!=0||Y==null||Y==null||(J=yield(0,N.r)(Y)),J.id!=0&&J?.type==null){let de=J.typeId,ce=yield n.I.GetConcept(de);J.type=ce,ce==null&&de!=null&&de!=null&&(ce=yield(0,N.r)(de),J.type=ce)}let re="the_",ae=((ie=($=J?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(re,"");if(isNaN(Number(ae))){if(ae){const de=yield D(Y,z,K,ee);ue[ae]=de}}else{const de=yield D(Y,z,K,ee);te[ae]=de,ue=te}}else console.log("this is the faulty connection ",z[ne]);return ue})}function W(U,P,M){return i(this,arguments,void 0,function*(j,z,K,ee=[]){var se,$,ie;let ue={},te=[];if(j==0)return null;let X=yield n.I.GetConcept(j);if(X!=null&&X.id!=0||j==null||j==null||(X=yield(0,N.r)(j)),X.id!=0&&X.type==null){let ne=X.typeId,Y=yield n.I.GetConcept(ne);X.type=Y,Y==null&&ne!=null&&ne!=null&&(Y=yield(0,N.r)(ne),X.type=Y)}if((se=X?.type)===null||se===void 0||se.characterValue,!K.includes(j))return X?.characterValue;if(ee.includes(j))return"";ee.push(j),ue.id=j;for(let ne=0;ne<z.length;ne++)if(z[ne].ofTheConceptId==j){let Y=z[ne].toTheConceptId,J=yield n.I.GetConcept(Y);if(J!=null&&J.id!=0||Y==null||Y==null||(J=yield(0,N.r)(Y)),J&&J?.type==null){let de=J.typeId,ce=yield n.I.GetConcept(de);J.type=ce,ce==null&&de!=null&&de!=null&&(ce=yield(0,N.r)(de),J.type=ce)}let re="the_",ae=((ie=($=J?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(re,"");if(isNaN(Number(ae))){if(ae){const de=yield W(Y,z,K);ue[ae]=de}}else{const de=yield W(Y,z,K);te[ae]=de,ue=te}}return ue})}},9003:(Q,O,y)=>{y.d(O,{S5:()=>i,kH:()=>o,qI:()=>w});var N=y(1863),b=y(1245),n=function(d,f,v,S){return new(v||(v=Promise))(function(r,a){function t(m){try{C(S.next(m))}catch(I){a(I)}}function c(m){try{C(S.throw(m))}catch(I){a(I)}}function C(m){var I;m.done?r(m.value):(I=m.value,I instanceof v?I:new v(function(E){E(I)})).then(t,c)}C((S=S.apply(d,[])).next())})};let u=10;class T{}function w(d){const f=b.Logger.logfunction("openDatabase",arguments);return new Promise(function(v,S){T.db&&(b.Logger.logUpdate(f),v(T.db));let r=b.BaseUrl.BASE_URL+"_FreeSchemaLocal"+b.BaseUrl.BASE_APPLICATION;const a=indexedDB.open(r,u);a.onupgradeneeded=t=>{var c=t.target.result,C="localconcept",m="localconnection",I="localid";console.log("this is the version upgrade",u),c.objectStoreNames.contains(C)&&c.deleteObjectStore(C),c.objectStoreNames.contains(m)&&c.deleteObjectStore(m),c.objectStoreNames.contains(I)&&c.deleteObjectStore(I),c.objectStoreNames.contains(C)||(c.createObjectStore(C,{keyPath:"id"}).transaction.oncomplete=E=>{}),c.objectStoreNames.contains(m)||(c.createObjectStore(m,{keyPath:"id"}).transaction.oncomplete=E=>{}),c.objectStoreNames.contains(I)||(c.createObjectStore(I,{keyPath:"id"}).transaction.oncomplete=E=>{e(I,{id:0,value:-100}),e(I,{id:1,value:-200}),e(I,{id:3,value:b.BaseUrl.getRandomizer()})}),v(c)},a.onerror=t=>{console.error("Why didn't you allow my web app to use IndexedDB?!",t),indexedDB.deleteDatabase(r),w(d),(0,N.ey)(f,"openDatabase",t),S(t)},a.onsuccess=function(t){var c=t.target;T.db=c.result,b.Logger.logUpdate(f),v(T.db)}})}function i(d){var f=arguments;return n(this,void 0,void 0,function*(){const v=b.Logger.logfunction("getObjectsFromLocalIndexDb",f);return new Promise(function(S,r){w(d).then(a=>{var t=[],c=a.transaction(d,"readwrite").objectStore(d).getAll();c.onsuccess=()=>{const C=c.result;for(var m=0;m<C.length;m++)t.push(C[m]);b.Logger.logUpdate(v),S(t)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot get objects from database because you cannot open the Local database",data:a};(0,N.ey)(v,"getObjectsFromLocalIndexDb",t),r(t)})})})}function e(d,f){const v=b.Logger.logfunction("storeToDatabase",[d,"localindexdb"]);return new Promise(function(S,r){w(d).then(a=>{const t=a.transaction(d,"readwrite").objectStore(d).add(f);t.onsuccess=c=>{b.Logger.logUpdate(v),S(f)},t.onerror=c=>{let C={status:400,ok:!1,message:"Cannot store to the Local database "+d,data:c,body:f};(0,N.ey)(v,"storeToDatabase",C),r(C)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot store to database because you cannot open the Local database",data:a};(0,N.ey)(v,"storeToDatabase",t),r(t)})})}function o(d,f){const v=b.Logger.logfunction("UpdateToDatabase",arguments);return new Promise(function(S,r){w(d).then(a=>{const t=a.transaction(d,"readwrite").objectStore(d).put(f);t.onsuccess=c=>{b.Logger.logUpdate(v),S(f)},t.onerror=c=>{let C={status:400,ok:!1,message:"Cannot Update to the Local database"+d,data:c,body:f};(0,N.ey)(v,"UpdateToDatabase",C),r(C)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot update to database because you cannot open the Local database",data:a};(0,N.ey)(v,"UpdateToDatabase",t),r(t)})})}},9371:(Q,O,y)=>{let N=y(3152);class b extends N{constructor(u){super(u),this.type="comment"}}Q.exports=b,b.default=b},9577:(Q,O,y)=>{let N=y(7793),b=y(1106),n=y(8339);function u(T,w){let i=new b(T,w),e=new n(i);try{e.parse()}catch(o){throw o}return e.root}Q.exports=u,u.default=u,N.registerParse(u)},9581:(Q,O,y)=>{y.d(O,{B:()=>N});class N{static setRandomizer(n){console.log("set randomizer",n),this.BASE_RANDOMIZER=n}static getRandomizer(){return this.BASE_RANDOMIZER}static GetConceptUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/getConcept":this.NODE_CACHE_URL+"/api/getConcept"}static GetConnectionUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get-connection-by-id":this.NODE_CACHE_URL+"/api/get-connection-by-id"}static GetConceptBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get_concept_bulk":this.NODE_CACHE_URL+"/api/get_concept_bulk"}static GetConnectionBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get_connection_bulk":this.NODE_CACHE_URL+"/api/get_connection_bulk"}static GetAllConceptsOfUserUrl(){return this.BASE_URL+"/api/get_all_concepts_of_user"}static GetAllConnectionsOfUserUrl(){return this.BASE_URL+"/api/get_all_connections_of_user"}static GetAllConnectionsOfCompositionUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition"}static GetAllConnectionsOfCompositionBulkUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition_bulk"}static GetConceptByCharacterValueUrl(){return this.BASE_URL+"/api/get_concept_by_character_value"}static GetConceptByCharacterAndTypeUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_type"}static GetConceptByCharacterAndCategoryUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category"}static GetConceptByCharacterAndCategoryDirectUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category_direct"}static GetCharacterByCharacterUrl(){return this.BASE_URL+"/api/get_character_by_character"}static GetAllConceptsByTypeUrl(){return this.BASE_URL+"/api/get_all_concepts_by_type"}static GetAllConnectionsOfConceptUrl(){return this.BASE_URL+"/api/get-link-connections"}static GetAllConnectionsToConceptUrl(){return this.BASE_URL+"/api/get-link-reverse-connections"}static GetAllAiData(){return this.BASE_URL+"/api/get-preloaded-concepts"}static getAppConfig(){return this.NODE_URL+"/api/v1/config"}static PostPrefetchConceptConnections(){return this.NODE_URL+"/api/v1/access-tracker/sync-access-tracker"}static GetSuggestedConcepts(){return this.NODE_URL+"/api/v1/access-tracker/list-concepts-file"}static GetSuggestedConnections(){return this.NODE_URL+"/api/v1/access-tracker/list-connections-file"}static PostLogger(){return this.LOG_SERVER+"/api/logger"}static LogHealth(){return this.LOG_SERVER+"/api/check"}static GetAllPrefetchConnectionsUrl(){return this.BASE_URL+"/api/get_all_connections_of_user?inpage=500"}static GetAllLinkerConnectionOfConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-from-concept"}static GetAllLinkerConnectionToConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-to-concept"}static DeleteConceptUrl(){return this.BASE_URL+"/api/delete_concept"}static DeleteUserUrl(){return this.BASE_URL+"/api/deleteuser"}static RecursiveSearchUrl(){return this.BASE_URL+"/api/recursivesearch-concept-connection"}static SearchLinkMultipleAllApiUrl(){return this.BASE_URL+"/api/Connection/search-link-multiple-all-ccs"}static MakeTheNameInBackendUrl(){return this.BASE_URL+"/api/make-name-from-frontend"}static SearchAllTypeWithLinker(n=!0){return n?this.BASE_URL+"/api/search-all-with-linker-ccs":this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static LoginUrl(){return this.BASE_URL+"/api/auth/login"}static SignupUrl(){return this.BASE_URL+"/api/auth/signup"}static GetCompositionConnectionBetweenTwoConceptsUrl(){return this.BASE_URL+"/api/get-composition-connection-between-two-concepts"}static SearchCompositionsUrl(){return this.BASE_URL+"/api/search-compositions"}static SearchLinkMultipleAll(){return this.BASE_URL+"/api/Connection/search-link-multiple-all"}static CreateSessionId(){return this.BASE_URL+"/api/create-session-id-remote"}static CreateSessionVisitUrl(){return this.BASE_URL+"/api/create-remote-session-visit"}static ViewInternalDataUrl(){return this.BASE_URL+"/api/view-api-internal-data-ccs-id-bulk"}static SearchInternalWithAuthenticatedCcsUrl(){return this.BASE_URL+"/api/search-composition-internal-authenticated-ccs"}static SearchInternalWithCcsUrl(){return this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static CreateGhostConceptApiUrl(n=!0){return n?N.NODE_URL+"/api/v1/local-concepts":N.NODE_URL+"/api/v1/local-concepts-without-auth"}static CreateGhostConnectionApiUrl(){return N.NODE_URL+"/api/v1/local-connections"}static GetRealConceptById(){return N.NODE_URL+"/api/v1/local-concepts-translate"}static GetReservedIdUrl(){return this.BASE_URL+"/api/get_reserved_ids"}static GetReservedConnectionIdUrl(){return this.BASE_URL+"/api/get_reserved_connection_ids"}static CreateTheTextDataUrl(){return this.BASE_URL+"/api/create_text_data"}static CreateTheCharacterDataUrl(){return this.BASE_URL+"/api/create_character_data"}static CreateTheConceptUrl(){return this.BASE_URL+"/api/create_the_concept"}static CreateTheConnectionUrl(){return this.BASE_URL+"/api/create_the_connection"}static CreateTheConnectionNewUrl(){return this.BASE_URL+"/api/create_the_connection_new"}static MakeTheTypeConceptUrl(){return this.BASE_URL+"/api/make_the_type_concept"}static DeleteTheConnectionUrl(){return this.BASE_URL+"/api/delete_connection"}static DeleteTheConnectionBulkUrl(){return this.BASE_URL+"/api/delete_connection_bulk"}static GetTypeConceptBulk(){return this.BASE_URL+"/api/get_type_concept_by_character_bulk"}static FreeschemaQueryUrl(){return this.BASE_URL+"/api/freeschema-query"}static uploadImageUrl(){return this.BASE_URL+"/api/Image/UploadImage"}static uploadImageUrlWithSmall(){return this.BASE_URL+"/api/Image/UploadImageV2"}static uploadFileUrl(){return this.BASE_URL+"/api/Image/UploadFile"}static sendMail(){return this.BASE_URL+"/api/sendmail"}static sendBulkMail(){return this.BASE_URL+"/api/sendmail/bulk"}static getWidgetData(){return this.BASE_URL+"/api/get-widget"}static getLatestWidgetData(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get-latest-widget":this.NODE_CACHE_URL+"/api/get-latest-widget"}static getRecentWidgetData(){return this.BASE_URL+"/api/get-recent-widget"}static getConnectionsByTypes(){return this.BASE_URL+"/api/get-connection-by-types"}static CreatePrototypeUrl(){return this.BASE_URL+"/api/create-prototype"}static GetCachedImage(n){return"https://cdn.boomconcole.com/freeschema/"+n}}N.BASE_URL="https://localhost:7053/",N.NODE_CACHE_URL="",N.AI_URL="https://ai.freeschema.com",N.MQTT_URL="192.168.1.249",N.NODE_URL="http://localhost:5001",N.LOG_SERVER="https://logdev.freeschema.com",N.BASE_APPLICATION="",N.DOCUMENTATION_WIDGET=0,N.isNearestCache=!0,N.FLAGS={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1},N.BASE_RANDOMIZER=999},9606:(Q,O,y)=>{O.__esModule=!0,O.unesc=O.stripComments=O.getProp=O.ensureObject=void 0;var N=T(y(5286));O.unesc=N.default;var b=T(y(6291));O.getProp=b.default;var n=T(y(1557));O.ensureObject=n.default;var u=T(y(8354));function T(w){return w&&w.__esModule?w:{default:w}}O.stripComments=u.default},9635:(Q,O,y)=>{y.d(O,{x:()=>N});const N=new BroadcastChannel("Freeschema_mftsccs_browser_channel")},9700:(Q,O,y)=>{y.d(O,{V:()=>i});var N,b=y(1245),n=y(3278),u=y(1863),T=y(3518),w=function(e,o,d,f){return new(d||(d=Promise))(function(v,S){function r(c){try{t(f.next(c))}catch(C){S(C)}}function a(c){try{t(f.throw(c))}catch(C){S(C)}}function t(c){var C;c.done?v(c.value):(C=c.value,C instanceof d?C:new d(function(m){m(C)})).then(r,a)}t((f=f.apply(e,[])).next())})};class i{static startAutoSync(){this.autoSyncInterval?console.warn("Auto-sync is already running."):(this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS,setInterval(()=>{const o=Date.now();this.nextSyncTime&&o>=this.nextSyncTime&&(this.nextSyncTime=o+this.SYNC_INTERVAL_MS,this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())},3e4))}static stopAutoSync(){this.autoSyncInterval!==null&&(clearInterval(this.autoSyncInterval),this.autoSyncInterval=null,this.nextSyncTime=null)}static setLogLevel(o){this.logLevel=o}static shouldLog(o){return this.LOG_LEVELS.indexOf(o)>=this.LOG_LEVELS.indexOf(this.logLevel)}static formatLogData(o,d,f){const v=Object.assign({timestamp:new Date().toISOString(),level:o,message:d},f);return this.packageLogsData.push(v),o=="ERROR"&&(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer()),v}static log(o,d,f){if(this.logPackageActivationStatus)try{this.formatLogData(o,d,f||null)}catch(v){console.error("Error on Logger Log : ",v)}}static logUpdate(o){var d;try{if(!this.logPackageActivationStatus)return{};if(!o)return{};const f=Date.now();o.startTime=(d=o.startTime)!==null&&d!==void 0?d:f;const v=f-o.startTime;o.responseTime=`${v} ms`,!o.serviceWorker==1&&(o.serviceWorker=!1)}catch(f){(0,u.ey)(o,"Logger.logUpdate",f)}}static logfunction(o,...d){if(!this.logPackageActivationStatus)return{};const f=Date.now();let v=d;const S=b.BaseUrl.getRandomizer(),r=n.b.sessionId;let a={startTime:f,functionName:o,functionParameters:v,requestFrom:b.BaseUrl.BASE_APPLICATION,sessionId:r,applicationId:S};return this.formatLogData("INFO","function called",a)}static logError(o,d,f,v,S,r,a,t,c,C,m){try{const I=n.b.sessionId,E={startTime:o,userId:d,operationType:f,requestFrom:v,requestIP:S,responseStatus:r,responseTime:`${(performance.now()-o).toFixed(3)}ms`,responseSize:a?`${JSON.stringify(a).length}`:"0",sessionId:I?.toString(),functionName:t,functionParameters:c,userAgent:C,conceptsUsed:m};this.formatLogData("ERROR",`Information logged for ${t}`,E)}catch{console.error("Error on logError")}}static logApplication(o,d,f){if(this.logApplicationActivationStatus)try{const v={timestamp:new Date().toISOString(),level:o,message:d,data:f||null};this.applicationLogsData.push(v),o!="ROUTE"&&o!="USER_EVENT"||(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())}catch(v){console.error("Failed to log application activity:",v)}}static checkLoggerServerStatus(){return w(this,void 0,void 0,function*(){let o=1e4+N.checkInterval;const d=new Date;if(N.lastCheck&&d.getTime()-N.lastCheck.getTime()<o)console.log("still cooling down");else{try{let f=b.BaseUrl.LogHealth();N.lastCheck=new Date,(yield fetch(f,{method:"GET"})).ok&&(N.isLoggerActive=!0,N.checkInterval=0)}catch{console.warn("This is error in the logger check")}N.checkInterval=N.checkInterval+500}})}static sendApplicationLogsToServer(){return w(this,void 0,void 0,function*(){const o=this.applicationLogsData;try{if(!N.isLoggerActive)return void N.checkLoggerServerStatus();if(o.length===0)return;this.applicationLogsData=[],n.b.BearerAccessToken;const d=50;let f=(0,T.Xr)(),v=0;for(;o.length!=0;){const S=o.slice(0,d),r=yield fetch(b.BaseUrl.PostLogger(),{method:"POST",headers:f,body:JSON.stringify({logType:this.appLogs,logData:S})});r.ok||r.status===404&&(N.isLoggerActive=!1),o.splice(0,d),v+=d,v++}}catch{N.isLoggerActive=!1}})}static sendPackageLogsToServer(){return w(this,void 0,void 0,function*(){const o=this.packageLogsData;try{if(!N.isLoggerActive)return void N.checkLoggerServerStatus();if(o.length===0)return;this.packageLogsData=[];const d=300;let f=0;for(;o.length!=0;){const v=o.slice(0,d);let S=(0,T.Xr)();const r=yield fetch(b.BaseUrl.PostLogger(),{method:"POST",headers:S,body:JSON.stringify({logType:this.mftsccsBrowser,logData:v})});if(!r.ok)return void(r.status===404&&(N.isLoggerActive=!1));o.splice(0,d),f++}}catch{N.isLoggerActive=!1}})}static saveLogToLocalStorage(o,d){try{if(typeof localStorage===void 0)return void console.warn("Local Storage type undefined");{const f=JSON.parse((localStorage==null?void 0:localStorage.getItem(o))||"[]");f.push(d),localStorage?.setItem(o,JSON.stringify(f))}}catch{console.error("Error on saving log in localstorage"),this.log("ERROR","Error while saving log in local storage")}}static clearLogsFromLocalStorage(o){typeof localStorage!==void 0?localStorage?.removeItem(o):console.warn("localStorage is not available")}}N=i,i.isLoggerActive=!0,i.lastCheck=new Date,i.checkInterval=0,i.logLevel="INFO",i.packageLogsData=[],i.applicationLogsData=[],i.LOG_LEVELS=["DEBUG","INFO","WARNING","ERROR","ROUTE"],i.SYNC_INTERVAL_MS=6e4,i.nextSyncTime=null,i.appLogs="app",i.mftsccsBrowser="mftsccs",i.logApplicationActivationStatus=!1,i.logPackageActivationStatus=!1,i.autoSyncInterval=null,N.startAutoSync()},9720:(Q,O,y)=>{O.__esModule=!0,O.default=void 0;var N,b=(N=y(3295))&&N.__esModule?N:{default:N},n=y(1581);function u(w,i){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,i)}var T=function(w){var i,e;function o(d){var f;return(f=w.call(this,d)||this).type=n.TAG,f}return e=w,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,u(i,e),o}(b.default);O.default=T,Q.exports=O.default},9736:(Q,O,y)=>{y.d(O,{v:()=>c});var N=y(205),b=y(2515),n=function(C,m,I,E){return new(I||(I=Promise))(function(L,B){function D(P){try{U(E.next(P))}catch(M){B(M)}}function W(P){try{U(E.throw(P))}catch(M){B(M)}}function U(P){var M;P.done?L(P.value):(M=P.value,M instanceof I?M:new I(function(j){j(M)})).then(D,W)}U((E=E.apply(C,[])).next())})};class u{static addNodeToTree(m){if(this.root==null)return this.root=m,this.root;this.root=this.root.addNode(m,this.root,this.root.height)}static addConceptToTree(m){var I=new b.x(m.id,m,null,null);new b.x(m.characterValue,m,null,null),this.addNodeToTree(I)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((m,I)=>{this.checkFlag(m),setTimeout(()=>{I("not")},25e3)})})}static checkFlag(m){if(N.B.isLocalDataLoaded)return m("done");setTimeout(u.checkFlag,1e3,m)}static getNodeFromTree(m){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(m,this.root):null})}static getCharacterAndTypeFromTree(m,I){return this.root?this.root.getFromNodeWithCharacterAndType(m,I,this.root):this.root}static updateSyncStatus(m){return this.root?this.root.updateNodeSyncStatus(m,!0,this.root):this.root}static removeNodeFromTree(m){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,m))})}}u.root=null;var T=function(C,m,I,E){return new(I||(I=Promise))(function(L,B){function D(P){try{U(E.next(P))}catch(M){B(M)}}function W(P){try{U(E.throw(P))}catch(M){B(M)}}function U(P){var M;P.done?L(P.value):(M=P.value,M instanceof I?M:new I(function(j){j(M)})).then(D,W)}U((E=E.apply(C,[])).next())})};class w{static waitForDataToLoad(){return T(this,void 0,void 0,function*(){return new Promise((m,I)=>{this.checkFlag(m),setTimeout(()=>{I("not")},25e3)})})}static checkFlag(m){if(N.B.isLocalCharacterLoaded)return m("done");setTimeout(w.checkFlag,1e3,m)}static addNodeToTree(m){return T(this,void 0,void 0,function*(){return this.LocalCharacterRoot==null?(this.LocalCharacterRoot=m,this.LocalCharacterRoot):(this.LocalCharacterRoot=this.LocalCharacterRoot.addCharacterNode(m,this.LocalCharacterRoot,this.LocalCharacterRoot.height),this.LocalCharacterRoot)})}static addConceptToTree(m){if(m.characterValue!=""){var I=new b.x(m.characterValue,m,null,null);this.addNodeToTree(I)}}static getNodeFromTree(m){return this.LocalCharacterRoot?this.LocalCharacterRoot.getCharacterFromNode(m,this.LocalCharacterRoot):this.LocalCharacterRoot}static getCharacterAndTypeFromTree(m,I){return T(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndType(m,I,this.LocalCharacterRoot):this.LocalCharacterRoot})}static getCharacterAndCategoryFromTree(m,I){return T(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndCategory(m,I,this.LocalCharacterRoot):this.LocalCharacterRoot})}static removeConceptType(m,I){this.LocalCharacterRoot&&(this.LocalCharacterRoot=this.LocalCharacterRoot.removeNodeWithVariants(this.LocalCharacterRoot,m,I))}}w.LocalCharacterRoot=null;var i=function(C,m,I,E){return new(I||(I=Promise))(function(L,B){function D(P){try{U(E.next(P))}catch(M){B(M)}}function W(P){try{U(E.throw(P))}catch(M){B(M)}}function U(P){var M;P.done?L(P.value):(M=P.value,M instanceof I?M:new I(function(j){j(M)})).then(D,W)}U((E=E.apply(C,[])).next())})};class e{static addNodeToTree(m){return i(this,void 0,void 0,function*(){return this.LocalTypeRoot==null?(this.LocalTypeRoot=m,this.LocalTypeRoot):(this.LocalTypeRoot=this.LocalTypeRoot.addTypeNode(m,this.LocalTypeRoot,this.LocalTypeRoot.height),this.LocalTypeRoot)})}static addConceptToTree(m){if(m.typeId!=0){var I=new b.x(m.typeId,m,null,null);this.addNodeToTree(I)}}static removeConceptType(m,I){this.LocalTypeRoot&&(this.LocalTypeRoot=this.LocalTypeRoot.removeNodeWithVariants(this.LocalTypeRoot,m,I))}static getNodeFromTree(m){return this.LocalTypeRoot?this.LocalTypeRoot.getFromNode(m,this.LocalTypeRoot):this.LocalTypeRoot}static getTypeVariantsFromTree(m){var I=this.getNodeFromTree(m),E=[];if(I){E.push(I?.value);for(let L=0;L<I.variants.length;L++)E.push(I.variants[L].value);return E}}static waitForDataToLoad(){return i(this,void 0,void 0,function*(){return new Promise((m,I)=>{this.checkFlag(m),setTimeout(()=>{I("not")},25e3)})})}static checkFlag(m){if(N.B.isLocalTypeLoaded)return m("done");setTimeout(e.checkFlag,1e3,m)}static getTypeVariantsFromTreeWithUserId(m,I){return i(this,void 0,void 0,function*(){var E=[],L=this.getNodeFromTree(m);if(L){console.log("this is the node to type",L),L.value.userId!=I&&L.value.userId!=999||E.push(L?.value);for(let B=0;B<L.variants.length;B++)L.variants[B].value.userId!=I&&L.value.userId!=999||E.push(L.variants[B].value)}return E})}}e.LocalTypeRoot=null;var o=y(6416),d=y(3026),f=y(7820),v=y(4864),S=y(628),r=y(1245),a=y(3278),t=function(C,m,I,E){return new(I||(I=Promise))(function(L,B){function D(P){try{U(E.next(P))}catch(M){B(M)}}function W(P){try{U(E.throw(P))}catch(M){B(M)}}function U(P){var M;P.done?L(P.value):(M=P.value,M instanceof I?M:new I(function(j){j(M)})).then(D,W)}U((E=E.apply(C,[])).next())})};class c{constructor(){this.name="conceptsArray"}static AddConcept(m){m.id!=0&&(u.addConceptToTree(m),w.addConceptToTree(m),e.addConceptToTree(m),this.localconceptsArray.push(m))}static AddPermanentConcept(m){m.id!=0&&(u.removeNodeFromTree(m.ghostId),w.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId),f.G.addConceptToTree(m),d.I.AddConcept(m),(0,r.AddGhostConcept)(m,m.userId,a.b.sessionId))}static RemoveConcept(m){return t(this,void 0,void 0,function*(){try{m.id!=0&&(u.removeNodeFromTree(m.ghostId),w.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId))}catch(I){throw I}})}static RemoveConceptById(m){return t(this,void 0,void 0,function*(){try{let I=yield c.GetConcept(m);I.id!=0&&(u.removeNodeFromTree(m),w.removeConceptType(I.characterValue,I.ghostId),e.removeConceptType(I.typeId,I.ghostId),S.H.RemoveConcept(I))}catch(I){throw I}})}static AddConceptToMemory(m){m.id!=0&&(u.addConceptToTree(m),w.addConceptToTree(m),e.addConceptToTree(m))}static GetConcept(m){return t(this,void 0,void 0,function*(){var I=(0,o.u)(),E=yield u.getNodeFromTree(m);if(E?.value){var L=E.value;L&&(I=L)}return I})}static UpdateConceptSyncStatus(m){return t(this,void 0,void 0,function*(){u.updateSyncStatus(m)})}static GetConceptByGhostId(m){return t(this,void 0,void 0,function*(){var I=(0,o.u)(),E=yield f.G.getNodeFromTree(m);if(E?.value){var L=E.value;L&&(I=L)}return I})}static GetConceptByCharacter(m){return t(this,void 0,void 0,function*(){var I=(0,o.u)(),E=w.getNodeFromTree(m);return E&&(I=E.value),I})}static GetConceptByCharacterAndTypeLocal(m,I){return t(this,void 0,void 0,function*(){var E=(0,o.u)(),L=yield w.getCharacterAndTypeFromTree(m,I);return L&&(E=L.value),E})}static GetConceptByCharacterAndCategoryLocal(m,I){return t(this,void 0,void 0,function*(){var E=(0,o.u)(),L=yield w.getCharacterAndCategoryFromTree(m,I);return L&&(E=L.value),E})}static GetConceptsByTypeId(m){let I=[];for(var E=0;E<this.localconceptsArray.length;E++)this.localconceptsArray[E].typeId==m&&I.push(this.localconceptsArray[E]);return I}static GetConceptsByTypeIdAndUser(m,I){return t(this,void 0,void 0,function*(){let E=[];return E=yield e.getTypeVariantsFromTreeWithUserId(m,I),E})}static ClearData(){return t(this,void 0,void 0,function*(){this.localconceptsArray=[],v.G.connectionArray=[]})}getName(){return this.name}}c.localconceptsArray=[]},9746:()=>{},9934:(Q,O,y)=>{function N(b,n){return b.indexOf(n)===-1&&b.push(n),b}y.d(O,{A:()=>N})},9975:(Q,O,y)=>{y.d(O,{A:()=>T});var N=y(1245),b=y(9736),n=y(3077),u=function(w,i,e,o){return new(e||(e=Promise))(function(d,f){function v(a){try{r(o.next(a))}catch(t){f(t)}}function S(a){try{r(o.throw(a))}catch(t){f(t)}}function r(a){var t;a.done?d(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,S)}r((o=o.apply(w,i||[])).next())})};function T(w,i,e,o,d){return u(this,arguments,void 0,function*(f,v,S,r,a,t={concepts:[],connections:[]}){var c,C,m,I;if(N.serviceWorker)try{const B=yield(0,N.sendMessage)("MakeTheConceptLocal",{referent:f,typeCharacter:v,userId:S,categoryId:r,typeId:a,actions:t});return!((C=(c=B?.actions)===null||c===void 0?void 0:c.concepts)===null||C===void 0)&&C.length&&(t.concepts=JSON.parse(JSON.stringify(B.actions.concepts))),!((I=(m=B?.actions)===null||m===void 0?void 0:m.connections)===null||I===void 0)&&I.length&&(t.connections=JSON.parse(JSON.stringify(B.actions.connections))),B.data}catch(B){console.error("MakeTheConceptLocal error sw: ",B),(0,N.handleServiceWorkerException)(B)}let E=yield b.v.GetConceptByCharacterAndTypeLocal(f,a),L=E;return v=="the"&&(r=1),L.id==0&&(E=yield(0,n.A)(f,v,S,r,a,4,void 0,null,t),L=E),L})}},9977:()=>{}},Wr={};function Dt(Q){var O=Wr[Q];if(O!==void 0)return O.exports;var y=Wr[Q]={exports:{}};return Ws[Q](y,y.exports,Dt),y.exports}Dt.n=Q=>{var O=Q&&Q.__esModule?()=>Q.default:()=>Q;return Dt.d(O,{a:O}),O},Dt.d=(Q,O)=>{for(var y in O)Dt.o(O,y)&&!Dt.o(Q,y)&&Object.defineProperty(Q,y,{enumerable:!0,get:O[y]})},Dt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Dt.o=(Q,O)=>Object.prototype.hasOwnProperty.call(Q,O),Dt.r=Q=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})};var Z=Dt(1245);const Ms=Z.ADMIN,Vs=Z.ALLID,js=Z.AccessTracker,$s=Z.AddGhostConcept,Hs=Z.Anomaly,qs=Z.BaseUrl,zs=Z.BinaryTree,Js=Z.BuildWidgetFromId,Qs=Z.BuilderStatefulWidget,Ys=Z.Composition,Xs=Z.CompositionBinaryTree,Zs=Z.CompositionNode,Ks=Z.Concept,ea=Z.ConceptsData,ta=Z.Connection,na=Z.ConnectionData,oa=Z.CountInfo,ia=Z.CreateComposition,ra=Z.CreateConnection,sa=Z.CreateConnectionBetweenEntityLocal,aa=Z.CreateConnectionBetweenTwoConcepts,ca=Z.CreateConnectionBetweenTwoConceptsGeneral,la=Z.CreateConnectionBetweenTwoConceptsLocal,da=Z.CreateData,ua=Z.CreateDefaultConcept,ha=Z.CreateDefaultLConcept,pa=Z.CreateSession,fa=Z.CreateSessionVisit,ga=Z.CreateTheCompositionLocal,ya=Z.CreateTheCompositionWithCache,va=Z.CreateTheConnection,ma=Z.CreateTheConnectionGeneral,Ca=Z.CreateTheConnectionLocal,wa=Z.DATAID,Ta=Z.DATAIDDATE,Ia=Z.DATAV2,ka=Z.DelayFunctionExecution,Sa=Z.DeleteConceptById,Aa=Z.DeleteConceptLocal,Na=Z.DeleteConnectionById,La=Z.DeleteConnectionByIdBulk,ba=Z.DeleteConnectionByType,_a=Z.DeleteConnectionByTypeBulk,Ea=Z.DeleteUser,xa=Z.DependencyObserver,Oa=Z.FilterSearch,Ba=Z.FormatFromConnections,Ra=Z.FormatFromConnectionsAltered,Da=Z.FreeschemaQuery,Ga=Z.FreeschemaQueryApi,Fa=Z.GetAllConnectionsOfComposition,Pa=Z.GetAllConnectionsOfCompositionBulk,Ua=Z.GetAllTheConnectionsByTypeAndOfTheConcept,Wa=Z.GetComposition,Ma=Z.GetCompositionBulk,Va=Z.GetCompositionBulkWithDataId,ja=Z.GetCompositionFromConnectionsWithDataId,$a=Z.GetCompositionFromConnectionsWithDataIdFromConnections,Ha=Z.GetCompositionFromConnectionsWithDataIdInObject,qa=Z.GetCompositionFromConnectionsWithDataIdIndex,za=Z.GetCompositionFromConnectionsWithIndex,Ja=Z.GetCompositionFromConnectionsWithIndexFromConnections,Qa=Z.GetCompositionFromMemoryWithConnections,Ya=Z.GetCompositionList,Xa=Z.GetCompositionListAll,Za=Z.GetCompositionListAllWithId,Ka=Z.GetCompositionListListener,ec=Z.GetCompositionListLocal,tc=Z.GetCompositionListLocalWithId,nc=Z.GetCompositionListWithId,oc=Z.GetCompositionListWithIdUpdated,ic=Z.GetCompositionListener,rc=Z.GetCompositionLocal,sc=Z.GetCompositionLocalWithId,ac=Z.GetCompositionWithAllIds,cc=Z.GetCompositionWithCache,lc=Z.GetCompositionWithDataIdBulk,dc=Z.GetCompositionWithDataIdWithCache,uc=Z.GetCompositionWithId,hc=Z.GetCompositionWithIdAndDateFromMemory,pc=Z.GetConceptBulk,fc=Z.GetConceptByCharacter,gc=Z.GetConceptByCharacterAndCategoryLocal,yc=Z.GetConceptByCharacterAndType,vc=Z.GetConnectionBetweenTwoConceptsLinker,mc=Z.GetConnectionBulk,Cc=Z.GetConnectionById,wc=Z.GetConnectionDataPrefetch,Tc=Z.GetConnectionOfTheConcept,Ic=Z.GetConnectionTypeForCount,kc=Z.GetFreeschemaImage,Sc=Z.GetFreeschemaImageUrl,Ac=Z.GetImageApi,Nc=Z.GetLink,Lc=Z.GetLinkListListener,bc=Z.GetLinkListener,_c=Z.GetLinkRaw,Ec=Z.GetLinkerConnectionFromConcepts,xc=Z.GetLinkerConnectionToConcepts,Oc=Z.GetRelation,Bc=Z.GetRelationLocal,Rc=Z.GetRelationRaw,Dc=Z.GetTheConcept,Gc=Z.GetTheConceptLocal,Fc=Z.GetUserGhostId,Pc=Z.JUSTDATA,Uc=Z.LConcept,Wc=Z.LConnection,Mc=Z.LISTNORMAL,Vc=Z.LocalConceptsData,jc=Z.LocalSyncData,$c=Z.LocalTransaction,Hc=Z.LogEvent,qc=Z.Logger,zc=Z.LoginToBackend,Jc=Z.MakeTheInstanceConcept,Qc=Z.MakeTheInstanceConceptLocal,Yc=Z.MakeTheTimestamp,Xc=Z.MakeTheTypeConceptApi,Zc=Z.MakeTheTypeConceptLocal,Kc=Z.NORMAL,el=Z.PRIVATE,tl=Z.PUBLIC,nl=Z.PatcherStructure,ol=Z.Prototype,il=Z.RAW,rl=Z.RecursiveSearchApi,sl=Z.RecursiveSearchApiNewRawFullLinker,al=Z.RecursiveSearchApiRaw,cl=Z.RecursiveSearchApiRawFullLinker,ll=Z.RecursiveSearchApiWithInternalConnections,dl=Z.RecursiveSearchListener,ul=Z.SchemaQuery,hl=Z.SchemaQueryListener,pl=Z.SearchAllConcepts,fl=Z.SearchLinkInternal,gl=Z.SearchLinkInternalAll,yl=Z.SearchLinkMultipleAll,vl=Z.SearchLinkMultipleAllObservable,ml=Z.SearchLinkMultipleApi,Cl=Z.SearchQuery,wl=Z.SearchStructure,Tl=Z.SearchWithLinker,Il=Z.SearchWithTypeAndLinker,kl=Z.SearchWithTypeAndLinkerApi,Sl=Z.Selector,Al=Z.SessionData,Nl=Z.Signin,Ll=Z.Signup,bl=Z.SignupEntity,_l=Z.SplitStrings,El=Z.StatefulWidget,xl=Z.SyncData,Ol=Z.TrashTheConcept,Bl=Z.UpdateComposition,Rl=Z.UpdateCompositionLocal,Dl=Z.UserBinaryTree,Gl=Z.Validator,Fl=Z.ViewInternalData,Pl=Z.ViewInternalDataApi,Ul=Z.WidgetTree,Wl=Z.convertFromConceptToLConcept,Ml=Z.convertFromLConceptToConcept,Vl=Z.convertWidgetTreeToWidget,jl=Z.convertWidgetTreeToWidgetWithWrapper,$l=Z.createFormFieldData,Hl=Z.createPrototypeLocal,ql=Z.dispatchIdEvent,zl=Z.getFromDatabaseWithType,Jl=Z.getObjectsFromIndexDb,Ql=Z.getUserDetails,Yl=Z.getWidgetBulkFromId,Xl=Z.getWidgetFromId,Zl=Z.handleServiceWorkerException,Kl=Z.hasActivatedSW,ed=Z.importLatestWidget,td=Z.importRecentWidget,nd=Z.init,od=Z.orderTheConnections,id=Z.recursiveFetch,rd=Z.recursiveFetchNew,sd=Z.removeAllChildren,ad=Z.renderImportedWidget,cd=Z.renderLatestWidget,ld=Z.renderPage,dd=Z.renderWidget,ud=Z.searchLinkMultipleListener,hd=Z.sendEmail,pd=Z.sendMessage,fd=Z.serviceWorker,gd=Z.setHasActivatedSW,yd=Z.storeToDatabase,vd=Z.subscribedListeners,md=Z.unwrapContainers,Cd=Z.updateAccessToken,wd=Z.uploadAttachment,Td=Z.uploadFile,Id=Z.uploadImage,kd=Z.uploadImageV2,Sd=Z.validDocumentFormats,Ad=Z.validImageFormats,Nd=Object.freeze(Object.defineProperty({__proto__:null,ADMIN:Ms,ALLID:Vs,AccessTracker:js,AddGhostConcept:$s,Anomaly:Hs,BaseUrl:qs,BinaryTree:zs,BuildWidgetFromId:Js,BuilderStatefulWidget:Qs,Composition:Ys,CompositionBinaryTree:Xs,CompositionNode:Zs,Concept:Ks,ConceptsData:ea,Connection:ta,ConnectionData:na,CountInfo:oa,CreateComposition:ia,CreateConnection:ra,CreateConnectionBetweenEntityLocal:sa,CreateConnectionBetweenTwoConcepts:aa,CreateConnectionBetweenTwoConceptsGeneral:ca,CreateConnectionBetweenTwoConceptsLocal:la,CreateData:da,CreateDefaultConcept:ua,CreateDefaultLConcept:ha,CreateSession:pa,CreateSessionVisit:fa,CreateTheCompositionLocal:ga,CreateTheCompositionWithCache:ya,CreateTheConnection:va,CreateTheConnectionGeneral:ma,CreateTheConnectionLocal:Ca,DATAID:wa,DATAIDDATE:Ta,DATAV2:Ia,DelayFunctionExecution:ka,DeleteConceptById:Sa,DeleteConceptLocal:Aa,DeleteConnectionById:Na,DeleteConnectionByIdBulk:La,DeleteConnectionByType:ba,DeleteConnectionByTypeBulk:_a,DeleteUser:Ea,DependencyObserver:xa,FilterSearch:Oa,FormatFromConnections:Ba,FormatFromConnectionsAltered:Ra,FreeschemaQuery:Da,FreeschemaQueryApi:Ga,GetAllConnectionsOfComposition:Fa,GetAllConnectionsOfCompositionBulk:Pa,GetAllTheConnectionsByTypeAndOfTheConcept:Ua,GetComposition:Wa,GetCompositionBulk:Ma,GetCompositionBulkWithDataId:Va,GetCompositionFromConnectionsWithDataId:ja,GetCompositionFromConnectionsWithDataIdFromConnections:$a,GetCompositionFromConnectionsWithDataIdInObject:Ha,GetCompositionFromConnectionsWithDataIdIndex:qa,GetCompositionFromConnectionsWithIndex:za,GetCompositionFromConnectionsWithIndexFromConnections:Ja,GetCompositionFromMemoryWithConnections:Qa,GetCompositionList:Ya,GetCompositionListAll:Xa,GetCompositionListAllWithId:Za,GetCompositionListListener:Ka,GetCompositionListLocal:ec,GetCompositionListLocalWithId:tc,GetCompositionListWithId:nc,GetCompositionListWithIdUpdated:oc,GetCompositionListener:ic,GetCompositionLocal:rc,GetCompositionLocalWithId:sc,GetCompositionWithAllIds:ac,GetCompositionWithCache:cc,GetCompositionWithDataIdBulk:lc,GetCompositionWithDataIdWithCache:dc,GetCompositionWithId:uc,GetCompositionWithIdAndDateFromMemory:hc,GetConceptBulk:pc,GetConceptByCharacter:fc,GetConceptByCharacterAndCategoryLocal:gc,GetConceptByCharacterAndType:yc,GetConnectionBetweenTwoConceptsLinker:vc,GetConnectionBulk:mc,GetConnectionById:Cc,GetConnectionDataPrefetch:wc,GetConnectionOfTheConcept:Tc,GetConnectionTypeForCount:Ic,GetFreeschemaImage:kc,GetFreeschemaImageUrl:Sc,GetImageApi:Ac,GetLink:Nc,GetLinkListListener:Lc,GetLinkListener:bc,GetLinkRaw:_c,GetLinkerConnectionFromConcepts:Ec,GetLinkerConnectionToConcepts:xc,GetRelation:Oc,GetRelationLocal:Bc,GetRelationRaw:Rc,GetTheConcept:Dc,GetTheConceptLocal:Gc,GetUserGhostId:Fc,JUSTDATA:Pc,LConcept:Uc,LConnection:Wc,LISTNORMAL:Mc,LocalConceptsData:Vc,LocalSyncData:jc,LocalTransaction:$c,LogEvent:Hc,Logger:qc,LoginToBackend:zc,MakeTheInstanceConcept:Jc,MakeTheInstanceConceptLocal:Qc,MakeTheTimestamp:Yc,MakeTheTypeConceptApi:Xc,MakeTheTypeConceptLocal:Zc,NORMAL:Kc,PRIVATE:el,PUBLIC:tl,PatcherStructure:nl,Prototype:ol,RAW:il,RecursiveSearchApi:rl,RecursiveSearchApiNewRawFullLinker:sl,RecursiveSearchApiRaw:al,RecursiveSearchApiRawFullLinker:cl,RecursiveSearchApiWithInternalConnections:ll,RecursiveSearchListener:dl,SchemaQuery:ul,SchemaQueryListener:hl,SearchAllConcepts:pl,SearchLinkInternal:fl,SearchLinkInternalAll:gl,SearchLinkMultipleAll:yl,SearchLinkMultipleAllObservable:vl,SearchLinkMultipleApi:ml,SearchQuery:Cl,SearchStructure:wl,SearchWithLinker:Tl,SearchWithTypeAndLinker:Il,SearchWithTypeAndLinkerApi:kl,Selector:Sl,SessionData:Al,Signin:Nl,Signup:Ll,SignupEntity:bl,SplitStrings:_l,StatefulWidget:El,SyncData:xl,TrashTheConcept:Ol,UpdateComposition:Bl,UpdateCompositionLocal:Rl,UserBinaryTree:Dl,Validator:Gl,ViewInternalData:Fl,ViewInternalDataApi:Pl,WidgetTree:Ul,convertFromConceptToLConcept:Wl,convertFromLConceptToConcept:Ml,convertWidgetTreeToWidget:Vl,convertWidgetTreeToWidgetWithWrapper:jl,createFormFieldData:$l,createPrototypeLocal:Hl,dispatchIdEvent:ql,getFromDatabaseWithType:zl,getObjectsFromIndexDb:Jl,getUserDetails:Ql,getWidgetBulkFromId:Yl,getWidgetFromId:Xl,handleServiceWorkerException:Zl,hasActivatedSW:Kl,importLatestWidget:ed,importRecentWidget:td,init:nd,orderTheConnections:od,recursiveFetch:id,recursiveFetchNew:rd,removeAllChildren:sd,renderImportedWidget:ad,renderLatestWidget:cd,renderPage:ld,renderWidget:dd,searchLinkMultipleListener:ud,sendEmail:hd,sendMessage:pd,serviceWorker:fd,setHasActivatedSW:gd,storeToDatabase:yd,subscribedListeners:vd,unwrapContainers:md,updateAccessToken:Cd,uploadAttachment:wd,uploadFile:Td,uploadImage:Id,uploadImageV2:kd,validDocumentFormats:Sd,validImageFormats:Ad},Symbol.toStringTag,{value:"Module"}));export{cl as A,yl as B,nd as C,mc as D,Wa as E,Cd as F,Ca as G,ba as H,id as I,Vl as J,Gc as K,bl as L,Sa as M,cd as N,ga as O,Oa as Q,vc as R,Aa as V,Da as Z,hl as _,Dc as a,ul as b,$c as c,Cl as d,Za as e,ud as f,wa as g,Qc as h,Qs as i,Xl as j,jl as k,qs as l,Na as m,Ul as n,Ua as o,sa as p,Oc as q,ra as r,jc as s,Nd as t,Jc as u,Kc as v,Gl as w,Pc as x,Zc as y,El as z};
