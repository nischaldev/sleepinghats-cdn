var Vr={};/*! For license information please see main.bundle.js.LICENSE.txt */var Vs={2:(Y,x,y)=>{y.d(x,{s:()=>e});var N=y(8286),b=y(9581),n=y(1412),h=y(3518),k=y(1863),C=y(5205),r=function(l,f,v,I){return new(v||(v=Promise))(function(i,a){function t(m){try{w(I.next(m))}catch(S){a(S)}}function c(m){try{w(I.throw(m))}catch(S){a(S)}}function w(m){var S;m.done?i(m.value):(S=m.value,S instanceof v?S:new v(function(E){E(S)})).then(t,c)}w((I=I.apply(l,[])).next())})};function e(l){var f=arguments;return r(this,void 0,void 0,function*(){const v=C.Logger.logfunction("GetAllConnectionsOfComposition",f);var I=[];if((I=yield N.d.GetConnectionsOfConcept(l)).length==0)I=yield o(l);else{var i=yield o(l);(0,n.e)(i,I),I=i}return C.Logger.logUpdate(v),I})}function o(l){var f=arguments;return r(this,void 0,void 0,function*(){const v=C.Logger.logfunction("GetAllConnectionsOfCompositionOnline",f);var I=[];try{(0,h.Xr)("application/json");const a=new Headers,t=new FormData;t.append("composition_id",l.toString());const c=yield fetch(b.B.GetAllConnectionsOfCompositionUrl(),{method:"POST",headers:a,body:t});if(console.log("this is getting connection from online",b.B.GetAllConnectionsOfCompositionUrl(),l),!c.ok)throw(0,k.ry)(c),new Error(`Error! status: ${c.status}`);const w=yield c.json();for(var i=0;i<w.length;i++)N.d.AddConnection(w[i]),I.push(w[i]);return C.Logger.logUpdate(v),I}catch(a){a instanceof Error?console.log("Get all connection of composition error : ",a.message):console.log("Get all connection of composition error : ",a),(0,k.Mb)(a,b.B.GetAllConnectionsOfCompositionUrl()),(0,k.ey)(v,"GetAllConnectionsOfCompositionOnline",a)}})}},38:Y=>{class x{constructor(N,b={}){if(this.type="warning",this.text=N,b.node&&b.node.source){let n=b.node.rangeBy(b);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in b)this[n]=b[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}Y.exports=x,x.default=x},71:(Y,x)=>{x.__esModule=!0,x.word=x.tilde=x.tab=x.str=x.space=x.slash=x.singleQuote=x.semicolon=x.plus=x.pipe=x.openSquare=x.openParenthesis=x.newline=x.greaterThan=x.feed=x.equals=x.doubleQuote=x.dollar=x.cr=x.comment=x.comma=x.combinator=x.colon=x.closeSquare=x.closeParenthesis=x.caret=x.bang=x.backslash=x.at=x.asterisk=x.ampersand=void 0,x.ampersand=38,x.asterisk=42,x.at=64,x.comma=44,x.colon=58,x.semicolon=59,x.openParenthesis=40,x.closeParenthesis=41,x.openSquare=91,x.closeSquare=93,x.dollar=36,x.tilde=126,x.caret=94,x.plus=43,x.equals=61,x.pipe=124,x.greaterThan=62,x.space=32,x.singleQuote=39,x.doubleQuote=34,x.slash=47,x.bang=33,x.backslash=92,x.cr=13,x.feed=12,x.newline=10,x.tab=9,x.str=39,x.comment=-1,x.word=-2,x.combinator=-3},145:(Y,x,y)=>{let N,b,n=y(7793);class h extends n{constructor(C){super({type:"document",...C}),this.nodes||(this.nodes=[])}toResult(C={}){return new N(new b,this,C).stringify()}}h.registerLazyResult=k=>{N=k},h.registerProcessor=k=>{b=k},Y.exports=h,h.default=h},176:(Y,x,y)=>{y.d(x,{F4:()=>h,P6:()=>C,dp:()=>k});var N=y(2155),b=y(7282),n=y(6416);function h(r){var e,o;const l=(0,n.u)();return l.id=r.id,l.ghostId=r.ghostId,l.userId=r.userId,l.accessId=r.accessId,l.categoryId=r.categoryId,l.characterValue=r.characterValue,l.entryTimeStamp=r.entryTimeStamp,l.typeId=r.typeId,l.type=r.type,l.isTemp=!1,l.typeCharacter=(o=(e=r?.type)===null||e===void 0?void 0:e.characterValue)!==null&&o!==void 0?o:"",l}function k(r){const e=(0,b.o)();return e.id=r.id,e.ghostId=r.ghostId,e.userId=r.userId,e.accessId=r.accessId,e.entryTimeStamp=r.entryTimeStamp,e.typeId=r.typeId,e.categoryId=r.categoryId,e}function C(r){const e=new N.N(0,0,0,0,0,0,0);return e.id=r.id,e.ghostId=r.ghostId,e.accessId=r.accessId,e.ofTheConceptId=r.ofTheConceptId,e.toTheConceptId=r.toTheConceptId,e.entryTimeStamp=r.entryTimeStamp,e.typeId=r.typeId,e.isTemp=!1,e}},197:()=>{},205:(Y,x,y)=>{y.d(x,{B:()=>N});class N{}N.isTypeLoaded=!1,N.isCharacterLoaded=!1,N.isDataLoaded=!1,N.isLocalDataLoaded=!1,N.isLocalCharacterLoaded=!1,N.isLocalTypeLoaded=!1,N.isConnectionLoaded=!1,N.isConnectionTypeLoaded=!1,N.isLocalConnectionLoaded=!1},263:(Y,x)=>{x.__esModule=!0,x.default=function(y){return y.sort(function(N,b){return N-b})},Y.exports=x.default},276:(Y,x,y)=>{y.d(x,{y:()=>N});class N{constructor(){this.conceptId=0,this.connectionTypeId=0,this.connectionType="",this.count=0}}},339:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(3631))&&N.__esModule?N:{default:N},n=y(1581);function h(C,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(C,r)}var k=function(C){var r,e;function o(l){var f;return(f=C.call(this,l)||this).type=n.SELECTOR,f}return e=C,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(b.default);x.default=k,Y.exports=x.default},396:(Y,x,y)=>{let N=y(7793);class b extends N{constructor(h){super(h),this.type="atrule"}append(...h){return this.proxyOf.nodes||(this.nodes=[]),super.append(...h)}prepend(...h){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...h)}}Y.exports=b,b.default=b,N.registerAtRule(b)},425:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function h(C,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(C,r)}var k=function(C){var r,e;function o(l){var f;return(f=C.call(this,l)||this).type=n.COMMENT,f}return e=C,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(b.default);x.default=k,Y.exports=x.default},442:(Y,x,y)=>{y.d(x,{Y:()=>o});var N=y(1167),b=y(2155),n=y(9581),h=y(3518),k=y(1863),C=y(3026),r=y(8286),e=y(5205);class o{static CheckContains(f){for(var v=!1,I=0;I<this.conceptsSyncArray.length;I++)this.conceptsSyncArray[I].id==f.id&&(v=!0);return v}static SyncDataDelete(f){for(var v=0;v<this.conceptsSyncArray.length;v++)f==this.conceptsSyncArray[v].id&&this.conceptsSyncArray.splice(v,1);for(v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].ofTheConceptId!=f&&this.connectionSyncArray[v].toTheConceptId!=f&&this.connectionSyncArray[v].typeId!=f||this.connectionSyncArray.splice(v,1)}static CheckContainsConnection(f){for(var v=!1,I=0;I<this.connectionSyncArray.length;I++)this.connectionSyncArray[I].id==f.id&&(v=!0);return v}static AddConcept(f){this.conceptsSyncArray.push(f)}static RemoveConcept(f){for(var v=0;v<this.conceptsSyncArray.length;v++)this.conceptsSyncArray[v].id==f.id&&this.conceptsSyncArray.splice(v,1)}static AddConnection(f){this.connectionSyncArray.push(f)}static RemoveConnection(f){for(var v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].id==f.id&&this.connectionSyncArray.splice(v,1)}static SyncDataOnline(){return f=this,v=void 0,i=function*(){if(e.serviceWorker)try{return(yield(0,e.sendMessage)("SyncData__SyncDataOnline",{})).data}catch(a){console.error("SyncData__SyncDataOnline sw error: ",a),(0,e.handleServiceWorkerException)(a)}for(let a=0;a<this.conceptsSyncArray.length;a++)C.I.AddConcept(this.conceptsSyncArray[a]);for(let a=0;a<this.connectionSyncArray.length;a++)r.d.AddConnection(this.connectionSyncArray[a]);if(this.conceptsSyncArray.length>0){let a=this.conceptsSyncArray.slice();this.conceptsSyncArray=[],(0,N.Y)(a)}if(this.connectionSyncArray.length>0){let a=this.connectionSyncArray.slice();this.connectionSyncArray=[],yield function(t){return c=this,w=void 0,S=function*(){let E=new b.N(0,0,0,0,0,0,0);try{var L=(0,h.Xr)(),R=JSON.stringify(t);const D=yield fetch(n.B.CreateTheConnectionUrl(),{method:"POST",headers:L,body:R});return D.ok?yield D.json():(console.log("Create the connection error message: ",D.status),(0,k.ry)(D)),E}catch(D){throw D instanceof Error?console.log("Create the connection error message: ",D.message):console.log(" Create the connection unexpected error: ",D),D}},new((m=void 0)||(m=Promise))(function(E,L){function R(U){try{W(S.next(U))}catch(P){L(P)}}function D(U){try{W(S.throw(U))}catch(P){L(P)}}function W(U){var P;U.done?E(U.value):(P=U.value,P instanceof m?P:new m(function(M){M(P)})).then(R,D)}W((S=S.apply(c,w||[])).next())});var c,w,m,S}(a)}return"done"},new((I=void 0)||(I=Promise))(function(a,t){function c(S){try{m(i.next(S))}catch(E){t(E)}}function w(S){try{m(i.throw(S))}catch(E){t(E)}}function m(S){var E;S.done?a(S.value):(E=S.value,E instanceof I?E:new I(function(L){L(E)})).then(c,w)}m((i=i.apply(f,v||[])).next())});var f,v,I,i}}o.conceptsSyncArray=[],o.connectionSyncArray=[]},490:(Y,x,y)=>{function N(){var b,n,h,k;let C={entity:0,userConcept:0,userId:0,token:""};try{let r=(localStorage==null?void 0:localStorage.getItem("profile"))||"";if(r){const e=JSON.parse(r);C.entity=(b=e?.entityId)!==null&&b!==void 0?b:0,C.userConcept=(n=e?.userConcept)!==null&&n!==void 0?n:0,C.userId=(h=e?.userId)!==null&&h!==void 0?h:0,C.token=(k=e?.token)!==null&&k!==void 0?k:""}}catch{console.log("This is the exception in getting user details from local storage")}return C}y.d(x,{s:()=>N})},518:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(3631))&&N.__esModule?N:{default:N},n=y(1581);function h(r,e){for(var o=0;o<e.length;o++){var l=e[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}function k(r,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o},k(r,e)}var C=function(r){var e,o;function l(i){var a;return(a=r.call(this,i)||this).type=n.ROOT,a}o=r,(e=l).prototype=Object.create(o.prototype),e.prototype.constructor=e,k(e,o);var f,v,I=l.prototype;return I.toString=function(){var i=this.reduce(function(a,t){return a.push(String(t)),a},[]).join(",");return this.trailingComma?i+",":i},I.error=function(i,a){return this._error?this._error(i,a):new Error(i)},f=l,(v=[{key:"errorGenerator",set:function(i){this._error=i}}])&&h(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),l}(b.default);x.default=C,Y.exports=x.default},628:(Y,x,y)=>{y.d(x,{H:()=>I});var N=y(9581),b=y(3278),n=y(5205),h=y(1863),k=function(i,a,t,c){return new(t||(t=Promise))(function(w,m){function S(R){try{L(c.next(R))}catch(D){m(D)}}function E(R){try{L(c.throw(R))}catch(D){m(D)}}function L(R){var D;R.done?w(R.value):(D=R.value,D instanceof t?D:new t(function(W){W(D)})).then(S,E)}L((c=c.apply(i,a||[])).next())})};const C=(i,a,...t)=>k(void 0,[i,a,...t],void 0,function*(c,w,m=!0){let S={concepts:[],connections:[]};try{const E=new Headers;let L={concepts:c,connections:w};E.set("Content-Type","application/json"),E.set("Authorization","Bearer "+b.b.BearerAccessToken),E.set("Accept","application/json"),E.set("X-Session-Id",b.b.sessionId.toString()),E.set("Randomizer",N.B.getRandomizer().toString());const R=yield fetch(N.B.CreateGhostConceptApiUrl(m),{method:"POST",headers:E,body:JSON.stringify(L)});if(!R.ok)throw(0,h.ry)(R),new Error(`Error! status: ${R.status}`);const D=yield R.json();return S.concepts=D.concepts,S.connections=D.connections,S}catch(E){throw E instanceof Error?console.log("Create the concept api error message: ",E.message):console.log("Create the concept api unexpected error: ",E),E}});function r(i,a){const t=[];for(let c=0;c<i.length;c+=a){const w=i.slice(c,c+a);t.push(w)}return t}const e=(...i)=>k(void 0,[...i],void 0,function*(a=[]){return yield Promise.all(a.map(t=>{let c=JSON.parse(JSON.stringify(t));return delete c.type,delete c.ofConcept,delete c.toConcept,c}))});var o=y(9003),l=y(9736),f=y(4864),v=function(i,a,t,c){return new(t||(t=Promise))(function(w,m){function S(R){try{L(c.next(R))}catch(D){m(D)}}function E(R){try{L(c.throw(R))}catch(D){m(D)}}function L(R){var D;R.done?w(R.value):(D=R.value,D instanceof t?D:new t(function(W){W(D)})).then(S,E)}L((c=c.apply(i,a||[])).next())})};class I{static CheckContains(a){for(var t=!1,c=0;c<this.conceptsSyncArray.length;c++)this.conceptsSyncArray[c].id==a.id&&(t=!0);return t}static SyncDataDelete(a){for(var t=0;t<this.conceptsSyncArray.length;t++)a==this.conceptsSyncArray[t].id&&this.conceptsSyncArray.splice(t,1);for(t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].ofTheConceptId!=a&&this.connectionSyncArray[t].toTheConceptId!=a&&this.connectionSyncArray[t].typeId!=a||this.connectionSyncArray.splice(t,1)}static CheckContainsConnection(a){for(var t=!1,c=0;c<this.connectionSyncArray.length;c++)this.connectionSyncArray[c].id==a.id&&(t=!0);return t}static AddConcept(a){try{let t=!1;I.CheckIfTheConceptIdExists(a.id,this.conceptsSyncArray).id!=0&&(t=!0),t||this.conceptsSyncArray.push(a)}catch(t){throw t}}static RemoveConcept(a){for(var t=0;t<this.conceptsSyncArray.length;t++)this.conceptsSyncArray[t].id==a.id&&this.conceptsSyncArray.splice(t,1)}static SyncDataOnlineWithoutAuth(a,t){return v(this,arguments,void 0,function*(c,w,m=!1){return I.SyncDataOnline(c,w,m)})}static SyncDataOnline(a,t){return v(this,arguments,void 0,function*(c,w,m=!0){let S=performance.now();console.log("syncing...",c,w,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,m),setTimeout(()=>{console.log("syncing...",c,w,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,m)},5e3);try{if(n.serviceWorker)try{return console.log("syncing in the service worker",c,m),(yield(0,n.sendMessage)("LocalSyncData__SyncDataOnline",{transactionId:c,withAuth:m})).data}catch(P){console.error("LocalSyncData__SyncDataOnline sw error: ",P),(0,n.handleServiceWorkerException)(P)}console.log("syncing in the without service worker syncing",c,m);let E=[],L=[];if(c&&this.transactionCollections.some(P=>P.id==c)){const P=this.transactionCollections.find(M=>M.id==c);if(this.transactionCollections=this.transactionCollections.filter(M=>M.id!=c),this.transactionCollections=this.transactionCollections.filter(M=>new Date(M.createdDate).getTime()>new Date().getTime()-6048e5),!P)return;E=P.data.concepts.slice(),L=P.data.connections.slice()}else Array.isArray(w?.concepts)&&Array.isArray(w?.connections)?(console.log("this is the concepts and connections array",w?.concepts,w?.connections),E=w.concepts.slice(),L=w.connections.slice(),console.log("this is the concepts and connections array",E,L),this.conceptsSyncArray=this.conceptsSyncArray.filter(P=>{const M=w.concepts.some(j=>P.id==j.id||P.ghostId==j.ghostId);return M||console.warn(`Concept not found in sync array: ${P.id||P.ghostId}`),M}),this.connectionSyncArray=this.connectionSyncArray.filter(P=>{const M=w.connections.some(j=>P.id==j.id||P.ghostId==j.ghostId);return M||console.warn(`Connection not found in sync array: ${P.id||P.ghostId}`),M})):(console.warn("Syncing this way has been Depreceted in service worker."),console.info("Only if serive worker is not running"),E=this.conceptsSyncArray.slice()||[],L=this.connectionSyncArray.slice()||[],this.connectionSyncArray=[],this.conceptsSyncArray=[]);console.log("syncing... inside the syncer",m);let R=[];for(let P=0;P<E.length;P++)R.push(E[P]),yield l.v.UpdateConceptSyncStatus(E[P].id);console.log("syncing... inside the syncer 2",m,E),yield this.UpdateConceptListToIncludeRelatedConcepts(L,R);let D=yield function(P,M){return k(this,arguments,void 0,function*(j,J,Z=!0){const K=n.Logger.logfunction("CreateTheGhostConceptApi",[j.length,J.length]);try{let $={concepts:[],connections:[]};const ie=yield e(j),ue=yield e(J);if(j.length+J.length<=2*1e3){const le=yield C(ie,ue,Z);return Array.isArray(le?.concepts)&&($.concepts=[...$.concepts,...le.concepts]),Array.isArray(le?.connections)&&($.connections=[...$.connections,...le.connections]),n.Logger.logUpdate(K),$}const ee=r(ie,1e3),Q=r(ue,1e3),te=[],oe=[];console.log("This is the with auth in syncing",Z);for(let le=0;le<ee.length;le++){const ae=ee[le];te.push(C(ae,[],Z))}const H=yield Promise.all(te);for(let le=0;le<H.length;le++){const ae=H[le];Array.isArray(ae?.concepts)&&($.concepts=[...$.concepts,...ae.concepts]),Array.isArray(ae?.connections)&&($.connections=[...$.connections,...ae.connections])}for(let le=0;le<Q.length;le++){const ae=Q[le];oe.push(C([],ae,Z))}const re=yield Promise.all(oe);for(let le=0;le<re.length;le++){const ae=re[le];Array.isArray(ae?.concepts)&&($.concepts=[...$.concepts,...ae.concepts]),Array.isArray(ae?.connections)&&($.connections=[...$.connections,...ae.connections])}return n.Logger.logUpdate(K),$}catch(se){throw console.log(se),(0,h.ey)(K,"CreateTheGhostConceptApi",se),se}})}(R,L,m);console.log("syncing... inside the syncer 3",m);let W=D.concepts,U=D.connections;for(let P=0;P<W.length;P++)l.v.AddPermanentConcept(W[P]);for(let P=0;P<U.length;P++)f.G.AddPermanentConnection(U[P]);return E}catch(E){throw n.Logger.logError(S,"unknown",void 0,"unknown",void 0,500,E,"SyncDataOnline",[],"unknown",void 0),E}})}static ConvertGhostIdsInConnections(a){var t,c,w;for(let m=0;m<a.length;m++){let S=a[m].ofTheConceptId,E=a[m].toTheConceptId,L=a[m].typeId,R=(t=I.ghostIdMap.get(S))!==null&&t!==void 0?t:S,D=(c=I.ghostIdMap.get(E))!==null&&c!==void 0?c:E,W=(w=I.ghostIdMap.get(L))!==null&&w!==void 0?w:L;a[m].ofTheConceptId=R,a[m].toTheConceptId=D,a[m].typeId=W}}static UpdateConceptListToIncludeRelatedConcepts(a,t){return v(this,void 0,void 0,function*(){for(let c=0;c<a.length;c++){let w=a[c].ofTheConceptId,m=a[c].toTheConceptId,S=a[c].typeId;if(w<0){let E=this.CheckIfTheConceptIdExists(w,t);E.id==0&&(E=yield l.v.GetConceptByGhostId(w),E.id!=0?E.id!=E.ghostId&&(a[c].ofTheConceptId=E.id):(E=yield l.v.GetConcept(w),this.AddConceptIfDoesNotExist(E,t)))}if(m<0){let E=this.CheckIfTheConceptIdExists(m,t);E.id==0&&(E=yield l.v.GetConceptByGhostId(m),E.id!=0?E.id!=E.ghostId&&(a[c].toTheConceptId=E.id):(E=yield l.v.GetConcept(m),this.AddConceptIfDoesNotExist(E,t)))}if(S<0){let E=this.CheckIfTheConceptIdExists(S,t);E.id==0&&(E=yield l.v.GetConceptByGhostId(S),E.id!=0?E.id!=E.ghostId&&(a[c].typeId=E.id):(E=yield l.v.GetConcept(S),this.AddConceptIfDoesNotExist(E,t)))}}})}static AddConceptIfDoesNotExist(a,t=[]){let c=!1;for(let w=0;w<t.length;w++)a.ghostId==t[w].ghostId&&(c=!0);c||t.push(a)}static CheckIfTheConceptIdExists(a,t=[]){let c=(0,n.CreateDefaultLConcept)();for(let w=0;w<t.length;w++)a!=t[w].ghostId&&a!=t[w].id||(c=t[w]);return c}static AddConnection(a){this.connectionSyncArray.push(a)}static RemoveConnection(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a.id&&this.connectionSyncArray.splice(t,1)}static RemoveConnectionById(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a&&this.connectionSyncArray.splice(t,1)}static syncDataLocalDb(){return v(this,void 0,void 0,function*(){if(this.conceptsSyncArray.length>0){for(let a=0;a<this.conceptsSyncArray.length;a++)(0,o.kH)("localconcept",this.conceptsSyncArray[a]);this.conceptsSyncArray=[]}if(this.connectionSyncArray.length>0){for(let a=0;a<this.connectionSyncArray.length;a++)(0,o.kH)("localconnection",this.connectionSyncArray[a]);this.connectionSyncArray=[]}return"done"})}static initializeTransaction(a){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__initializeTransaction",{transactionId:a})).data}catch(t){console.error("LocalSyncData__initializeTransaction sw error: ",t),(0,n.handleServiceWorkerException)(t)}if(this.transactionCollections.some(t=>t.id==a))return;this.transactionCollections.push({id:a,data:{concepts:[],connections:[]},createdDate:new Date().toISOString()})}catch(t){console.log("error in initializeTransaction",t)}})}static markTransactionActions(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__markTransactionActions",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__markTransactionActions sw error: ",c),(0,n.handleServiceWorkerException)(c)}this.transactionCollections=this.transactionCollections.map(c=>c.id==a?Object.assign(Object.assign({},c),{data:JSON.parse(JSON.stringify(t))}):c),this.conceptsSyncArray=this.conceptsSyncArray.filter(c=>!t.concepts.some(w=>w.id==c.id||w.ghostId==c.id)),this.connectionSyncArray=this.connectionSyncArray.filter(c=>!t.connections.some(w=>w.id==c.id||w.ghostId==c.id))}catch(c){console.log("error in markTransactionActions",c)}})}static rollbackTransaction(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__rollbackTransaction",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__rollbackTransaction sw error: ",c),(0,n.handleServiceWorkerException)(c)}if(this.transactionCollections.some(c=>c.id==a))return;this.transactionCollections=this.transactionCollections.filter(c=>c.id!=a)}catch(c){console.log("LocalSyncData, roll",c)}})}}I.conceptsSyncArray=[],I.connectionSyncArray=[],I.ghostIdMap=new Map,I.transactionCollections=[]},680:(Y,x,y)=>{x.__esModule=!0;var N=y(1581);Object.keys(N).forEach(function(h){h!=="default"&&h!=="__esModule"&&(h in x&&x[h]===N[h]||(x[h]=N[h]))});var b=y(4451);Object.keys(b).forEach(function(h){h!=="default"&&h!=="__esModule"&&(h in x&&x[h]===b[h]||(x[h]=b[h]))});var n=y(8500);Object.keys(n).forEach(function(h){h!=="default"&&h!=="__esModule"&&(h in x&&x[h]===n[h]||(x[h]=n[h]))})},843:(Y,x,y)=>{y.d(x,{Az:()=>f,Hi:()=>v});var N=y(8146),b=y(3026),n=y(9581),h=y(3518),k=y(5205),C=y(1863),r=y(7876),e=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,[])).next())})},o=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,[])).next())})},l=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,[])).next())})};function f(I){return l(this,void 0,void 0,function*(){const i=k.Logger.logfunction("GetConceptByCharacterAndCategory",I);let a=(0,k.CreateDefaultConcept)();if(I=="the")return a.id=1,a.typeId=5,a.characterValue="the",a;let t=(0,k.SplitStrings)(I);if(t.length>1){let c=1,w=yield f(t[0]);w.id!=0&&(c=w.id),a=yield function(m,S){var E=arguments;return l(this,void 0,void 0,function*(){const L=k.Logger.logfunction("GetConceptByCharacterAndCategoryFromMemory",E);let R=yield k.ConceptsData.GetConceptByCharacterAndCategoryLocal(m,S);return R.id==0&&(R=yield function(D,W){var U=arguments;return e(this,void 0,void 0,function*(){const P=k.Logger.logfunction("GetConceptByCharacterAndCategoryDirectApi",U);let M=(0,k.CreateDefaultConcept)();try{var j=(0,h.Xr)("application/x-www-form-urlencoded");const J=yield fetch(n.B.GetConceptByCharacterAndCategoryDirectUrl(),{method:"POST",headers:j,body:`character_value=${D}&category_id=${W}`});J.ok?(M=yield J.json(),(0,r.K)(M).then(()=>{b.I.AddConcept(M)})):(console.log("This is the concept by category and character error",J.status),(0,C.ry)(J)),k.Logger.logUpdate(P)}catch(J){J instanceof Error?console.log(" This is the concept by category and character error message: ",J.message):console.log(" This is the concept by category and character unexpected error: ",J),(0,C.Mb)(J,n.B.GetConceptByCharacterAndCategoryDirectUrl()),(0,C.ey)(P,"GetConceptByCharacterAndCategoryDirectApi",J)}return M})}(m,S)),k.Logger.logUpdate(L),R})}(I,c)}else t[0]==I&&(a=yield function(c){var w=arguments;return l(this,void 0,void 0,function*(){const m=k.Logger.logfunction("GetConceptByCharacter",w);let S=yield k.ConceptsData.GetConceptByCharacterAndTypeLocal(c,51);return S.id==0&&(S=yield(0,N.Y)(c)),k.Logger.logUpdate(m),S})}(I));return k.Logger.logUpdate(i),a})}function v(I){return l(this,void 0,void 0,function*(){let i=[];try{i=yield function(a){return o(this,void 0,void 0,function*(){let t=[];try{let c=JSON.stringify(a),w=(0,h.Xr)();const m=yield fetch(k.BaseUrl.GetTypeConceptBulk(),{method:"POST",headers:w,body:c});if(m.ok){let S=yield m.json();t=yield(0,k.GetConceptBulk)(S)}else console.log("This is the GetTypeConceptByBulk error",m.status),(0,C.ry)(m)}catch(c){c instanceof Error?console.log(" This is the GetTypeConceptByBulk error message: ",c.message):console.log(" This is the GetTypeConceptByBulk unexpected error: ",c),(0,C.Mb)(c,k.BaseUrl.GetConceptByCharacterAndCategoryDirectUrl())}return t})}(I)}catch(a){console.log(" This is the GetTypeConceptsByCharacterAndCategoryBulk error message: ",a)}return i})}},991:(Y,x,y)=>{y.d(x,{H:()=>k});var N=y(5205),b=y(3996);class n extends b.i{constructor(r,e,o,l){super(r,e,o,l),this.key="",this.value=[],this.height=1,this.key=r,this.value=e,this.leftNode=o,this.rightNode=l}addNode(r,e,o){if(e==null)return r;let l=e.leftNode,f=e.rightNode;if(e.key>r.key)e.leftNode=this.addNode(r,l,o);else{if(!(e.key<r.key))return e;e.rightNode=this.addNode(r,f,o)}e.height=1+Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}}var h=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,[])).next())})};class k{static CreateCompositionKey(r,e){return r}static GetConnectionByOfTheConceptAndTypeId(r,e){let o=this.CreateCompositionKey(r,e);if(this.node){let l=this.node.getFromNode(o,this.node);if(l)return l.value}return null}static addConnection(r){if(r.id>0){let e=this.CreateCompositionKey(r.ofTheConceptId,r.typeId);if(this.node){let o=this.node.getFromNode(e,this.node);if(o){let l=o?.value;l.length==0&&(o.value=[]),l.includes(r.id)||l.push(r.id)}else{let l=[];l.push(r.id);let f=new n(e,l,null,null);this.addNodeToTree(f)}}else{let o=[];o.push(r.id);let l=new n(e,o,null,null);this.addNodeToTree(l)}new Event(`${e}`)}else console.log("cannot insert key id with  n 0 to the connection tree",r)}static addNodeToTree(r){return h(this,void 0,void 0,function*(){return this.node==null?(this.node=r,console.log("this is type dispatch in connection",r),(0,N.dispatchIdEvent)(r.key),this.node):(this.node=this.node.addNode(r,this.node,this.node.height),this.node)})}static removeNodeFromTree(r){return h(this,void 0,void 0,function*(){this.node&&(this.node=this.node.removeNode(this.node,r))})}}k.node=null},999:(Y,x,y)=>{y.d(x,{R:()=>r});var N=y(5205),b=y(1863),n=y(6416),h=y(4711),k=y(5868),C=function(e,o,l,f){return new(l||(l=Promise))(function(v,I){function i(c){try{t(f.next(c))}catch(w){I(w)}}function a(c){try{t(f.throw(c))}catch(w){I(w)}}function t(c){var w;c.done?v(c.value):(w=c.value,w instanceof l?w:new l(function(m){m(w)})).then(i,a)}t((f=f.apply(e,o||[])).next())})};function r(e){return C(this,arguments,void 0,function*(o,l=null,f=null,v=null,I=null,i=null,a=null,t=!1,c={concepts:[],connections:[]}){var w,m,S,E;const L=N.Logger.logfunction("CreateTheCompositionLocal")||{};if(N.serviceWorker){L.serviceWorker=!0;try{const M=yield(0,N.sendMessage)("CreateTheCompositionLocal",{json:o,ofTheConceptId:l,ofTheConceptUserId:f,mainKey:v,userId:I,accessId:i,sessionInformationId:a,actions:c});return!((m=(w=M?.actions)===null||w===void 0?void 0:w.concepts)===null||m===void 0)&&m.length&&(c.concepts=JSON.parse(JSON.stringify(M.actions.concepts))),!((E=(S=M?.actions)===null||S===void 0?void 0:S.connections)===null||E===void 0)&&E.length&&(c.connections=JSON.parse(JSON.stringify(M.actions.connections))),N.Logger.logUpdate(L),M.data}catch(M){console.error("CreateTheCompositionLocal error sw: ",M),(0,b.ey)(L,"CreateTheCompositionLocal",M),(0,N.handleServiceWorkerException)(M)}}let R=I??999,D=i??999,W=a??999,U=v??0,P=(0,n.u)();for(const M in o)if(typeof o[M]!="string"&&typeof o[M]!="number")if(l==null&&f==null){let j=U,J=yield(0,k.k)(M,"",!0,R,D,W,void 0,c);P=J,j=J.id,U=J.id,yield r(o[M],J.id,J.userId,j,I,i,a,void 0,c)}else{let j=l??999,J=U,Z=yield(0,k.k)(M,"",!0,R,D,W,void 0,c);yield(0,h.F)(j,Z.id,J,void 0,void 0,void 0,c),yield r(o[M],Z.id,Z.userId,J,I,i,a,void 0,c)}else{let j=l??999,J=U,Z=yield(0,k.k)(M,o[M].toString(),!1,R,D,W,void 0,c);yield(0,h.F)(j,Z.id,J,void 0,void 0,void 0,c)}return N.Logger.logUpdate(L),P})}},1106:(Y,x,y)=>{let{nanoid:N}=y(5042),{isAbsolute:b,resolve:n}=y(197),{SourceMapConsumer:h,SourceMapGenerator:k}=y(1866),{fileURLToPath:C,pathToFileURL:r}=y(2739),e=y(3614),o=y(3878),l=y(9746),f=Symbol("lineToIndexCache"),v=!!(h&&k),I=!!(n&&b);function i(t){if(t[f])return t[f];let c=t.css.split(`
`),w=new Array(c.length),m=0;for(let S=0,E=c.length;S<E;S++)w[S]=m,m+=c[S].length+1;return t[f]=w,w}class a{get from(){return this.file||this.id}constructor(c,w={}){if(c==null||typeof c=="object"&&!c.toString)throw new Error(`PostCSS received ${c} instead of CSS string`);if(this.css=c.toString(),this.css[0]==="\uFEFF"||this.css[0]==="ï¿¾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,w.document&&(this.document=w.document.toString()),w.from&&(!I||/^\w+:\/\//.test(w.from)||b(w.from)?this.file=w.from:this.file=n(w.from)),I&&v){let m=new o(this.css,w);if(m.text){this.map=m;let S=m.consumer().file;!this.file&&S&&(this.file=this.mapResolve(S))}}this.file||(this.id="<input css "+N(6)+">"),this.map&&(this.map.file=this.from)}error(c,w,m,S={}){let E,L,R,D,W;if(w&&typeof w=="object"){let P=w,M=m;if(typeof P.offset=="number"){D=P.offset;let j=this.fromOffset(D);w=j.line,m=j.col}else w=P.line,m=P.column,D=this.fromLineAndColumn(w,m);if(typeof M.offset=="number"){R=M.offset;let j=this.fromOffset(R);L=j.line,E=j.col}else L=M.line,E=M.column,R=this.fromLineAndColumn(M.line,M.column)}else if(m)D=this.fromLineAndColumn(w,m);else{D=w;let P=this.fromOffset(D);w=P.line,m=P.col}let U=this.origin(w,m,L,E);return W=U?new e(c,U.endLine===void 0?U.line:{column:U.column,line:U.line},U.endLine===void 0?U.column:{column:U.endColumn,line:U.endLine},U.source,U.file,S.plugin):new e(c,L===void 0?w:{column:m,line:w},L===void 0?m:{column:E,line:L},this.css,this.file,S.plugin),W.input={column:m,endColumn:E,endLine:L,endOffset:R,line:w,offset:D,source:this.css},this.file&&(r&&(W.input.url=r(this.file).toString()),W.input.file=this.file),W}fromLineAndColumn(c,w){return i(this)[c-1]+w-1}fromOffset(c){let w=i(this),m=0;if(c>=w[w.length-1])m=w.length-1;else{let S,E=w.length-2;for(;m<E;)if(S=m+(E-m>>1),c<w[S])E=S-1;else{if(!(c>=w[S+1])){m=S;break}m=S+1}}return{col:c-w[m]+1,line:m+1}}mapResolve(c){return/^\w+:\/\//.test(c)?c:n(this.map.consumer().sourceRoot||this.map.root||".",c)}origin(c,w,m,S){if(!this.map)return!1;let E,L,R=this.map.consumer(),D=R.originalPositionFor({column:w,line:c});if(!D.source)return!1;typeof m=="number"&&(E=R.originalPositionFor({column:S,line:m})),L=b(D.source)?r(D.source):new URL(D.source,this.map.consumer().sourceRoot||r(this.map.mapFile));let W={column:D.column,endColumn:E&&E.column,endLine:E&&E.line,line:D.line,url:L.toString()};if(L.protocol==="file:"){if(!C)throw new Error("file: protocol is not available in this PostCSS build");W.file=C(L)}let U=R.sourceContentFor(D.source);return U&&(W.source=U),W}toJSON(){let c={};for(let w of["hasBOM","css","file","id"])this[w]!=null&&(c[w]=this[w]);return this.map&&(c.map={...this.map},c.map.consumerCache&&(c.map.consumerCache=void 0)),c}}Y.exports=a,a.default=a,l&&l.registerInput&&l.registerInput(a)},1167:(Y,x,y)=>{y.d(x,{Y:()=>C});var N=y(9581),b=y(3518),n=y(5205),h=y(1863),k=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function I(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(w){w(c)})).then(I,i)}a((l=l.apply(r,[])).next())})};function C(r){return k(this,void 0,void 0,function*(){const e=n.Logger.logfunction("CreateTheConceptApi",r);let o=(0,n.CreateDefaultConcept)();try{var l=(0,b.Xr)();const f=yield fetch(N.B.CreateTheConceptUrl(),{method:"POST",headers:l,body:JSON.stringify(r)});if(!f.ok)throw(0,h.ry)(f),new Error(`Error! status: ${f.status}`);return o=yield f.json(),n.Logger.logUpdate(e),o}catch(f){f instanceof Error?console.log("Create the concept api error message: ",f.message):console.log("Create the concept api unexpected error: ",f),(0,h.Mb)(f,N.B.CreateTheConceptUrl()),(0,h.ey)(e,"CreateTheConceptApi",f)}})}},1213:(Y,x,y)=>{y.d(x,{f:()=>C});var N=y(9736),b=y(7820),n=y(5205),h=y(176),k=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function I(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(w){w(c)})).then(I,i)}a((l=l.apply(r,[])).next())})};function C(r){return k(this,void 0,void 0,function*(){let e=performance.now();try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConceptLocal",{id:r})).data}catch(l){console.error("GetTheConceptLocal error sw: ",l),(0,n.handleServiceWorkerException)(l)}let o=(0,n.CreateDefaultLConcept)();if(r<0){if(o=yield N.v.GetConcept(r),o.id==0){let l=yield b.G.getNodeFromTree(r);if(l?.value){let f=l.value;f&&(o=f)}}}else{let l=yield(0,n.GetTheConcept)(r);o=(0,h.F4)(l)}return o}catch(o){throw n.Logger.logError(e,"unknown","read","unknown",void 0,200,void 0,"GetTheConceptLocal",[r],"unknown",void 0),o}})}},1218:(Y,x,y)=>{y.d(x,{A:()=>C});var N=y(5205),b=y(7282),n=y(1666),h=y(8407),k=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function I(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(w){w(c)})).then(I,i)}a((l=l.apply(r,e||[])).next())})};function C(r){return k(this,arguments,void 0,function*(e,o=null,l=null,f=null,v=null,I=null,i=null){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("CreateTheComposition",{json:e,ofTheConceptId:o,ofTheConceptUserId:l,mainKey:f,userId:v,accessId:I,sessionInformationId:i})).data}catch(S){console.error("CreateTheComposition sw error: ",S),(0,N.handleServiceWorkerException)(S)}let a=v??999,t=I??4,c=i??999,w=f??0,m=(0,b.o)();for(const S in e)if(typeof e[S]!="string"&&typeof e[S]!="number")if(o==null&&l==null){let E=w,L=yield(0,h.A)(S,"",!0,a,t,c);m=L,E=L.id,w=L.id,yield C(e[S],L.id,L.userId,E,v,I,i)}else{let E=o??999,L=l??999,R=w,D=yield(0,h.A)(S,"",!0,a,t,c);m=D,yield(0,n.q)(E,L,D.id,R),yield C(e[S],D.id,D.userId,R,v,I,i)}else{let E=o??999,L=l??10267,R=w,D=yield(0,h.A)(S,e[S].toString(),!1,a,t,c);yield(0,n.q)(E,L,D.id,R)}return m})}},1239:(Y,x,y)=>{y.d(x,{I:()=>o,r:()=>e});var N=y(3026),b=y(9581),n=y(3518),h=y(1863),k=y(5205),C=y(1596),r=function(l,f,v,I){return new(v||(v=Promise))(function(i,a){function t(m){try{w(I.next(m))}catch(S){a(S)}}function c(m){try{w(I.throw(m))}catch(S){a(S)}}function w(m){var S;m.done?i(m.value):(S=m.value,S instanceof v?S:new v(function(E){E(S)})).then(t,c)}w((I=I.apply(l,[])).next())})};function e(l){return r(this,void 0,void 0,function*(){const f=k.Logger.logfunction("GetConceptBulk",[l.length])||{};let v=[],I=(new Date().getTime(),performance.now()),i=Array.from(new Set(l));try{if(k.serviceWorker){f.serviceWorker=!0;try{const a=yield(0,k.sendMessage)("GetConceptBulk",{passedConcepts:l});return k.Logger.logUpdate(f),a.data}catch(a){console.error("GetConceptBulk sw error: ",a),(0,h.ey)(f,"GetConceptBulk",a),(0,k.handleServiceWorkerException)(a)}}if(i.length>0){let a=[];for(let t=0;t<i.length;t++)if(!N.I.GetNpc(i[t])){let c=yield N.I.GetConcept(i[t]);c.id==0?a.push(i[t]):v.push(c)}if(a.length==0)return k.Logger.logfunction(f),v;{let t;const c={method:"POST",headers:(0,n.Xr)(),body:JSON.stringify(a)};try{t=yield fetch(b.B.GetConceptBulkUrl(),c)}catch{t=yield(0,C.g)(c,"/api/get_concept_bulk")}yield function(w,m,S,E,L){return r(this,void 0,void 0,function*(){if(w.ok){let R=yield w.json();if(R.length>0)for(let D=0;D<R.length;D++){let W=R[D];N.I.AddConcept(W),S.push(W)}k.Logger.logUpdate(E)}else console.log("Get Concept Bulk error",w.status),k.Logger.logError(L,"unknown","read","unknown",void 0,w.status,w,"GetConceptBulk",[m],"unknown",void 0),(0,h.ry)(w)})}(t,l,v,f,I)}}}catch(a){a instanceof Error?console.log("Get Concept Bulk  error message: ",a.message):console.log("Get Concept Bulk  unexpected error: ",a),k.Logger.logError(I,"unknown","read","unknown",void 0,500,a,"GetConceptBulk",[l],"unknown",void 0),(0,h.Mb)(a,b.B.GetConceptBulkUrl()),(0,h.ey)(f,"GetConceptBulk",a)}return v})}function o(l){return r(this,void 0,void 0,function*(){const f=[];if(l.length>0){const v={"Content-Type":"application/json"};try{const I=yield fetch(b.B.GetConceptBulkUrl(),{method:"POST",headers:v,body:JSON.stringify(l)});if(I.ok){const i=yield I.json();if(i.length>0)for(let a=0;a<i.length;a++){const t=i[a];f.push(t),N.I.AddConcept(t)}}else console.log("bulk concept getter api error: ",I.status),(0,h.ry)(I)}catch(I){I instanceof Error?console.log("bulk concept getter api error: ",I.message):console.log("bulk concept getter api error: ",I),(0,h.Mb)(I,b.B.GetConceptBulkUrl())}}return f})}},1320:(Y,x,y)=>{y.d(x,{zl:()=>a,b6:()=>w,e$:()=>S,y6:()=>m,rq:()=>E,yV:()=>t,_W:()=>c});var N=y(5205),b=y(6687);function n(L){return L.startsWith("the_")?L.slice(4):L}var h=function(L,R,D,W){return new(D||(D=Promise))(function(U,P){function M(Z){try{J(W.next(Z))}catch(K){P(K)}}function j(Z){try{J(W.throw(Z))}catch(K){P(K)}}function J(Z){var K;Z.done?U(Z.value):(K=Z.value,K instanceof D?K:new D(function(se){se(K)})).then(M,j)}J((W=W.apply(L,R||[])).next())})};function k(L,R,D){return h(this,void 0,void 0,function*(){var W,U,P,M,j,J,Z,K;let se=[];for(let $=0;$<L.length;$++)se.push(L[$].toTheConceptId),se.push(L[$].ofTheConceptId),se.push(L[$].typeId);for(let $=0;$<L.length;$++){let ie=!1;D.includes(L[$].id)&&(ie=!0);let ue=yield(0,N.GetTheConcept)(L[$].ofTheConceptId),ee=yield(0,N.GetTheConcept)(L[$].toTheConceptId);if(ie==1&&ue.id!=0&&ee.id!=0){let Q,te=(U=(W=ee.type)===null||W===void 0?void 0:W.characterValue)!==null&&U!==void 0?U:"self";L[$].toTheConceptId in R?Q=R[L[$].toTheConceptId]:(Q={},Q[te]={},R[L[$].toTheConceptId]=Q);let oe=yield(0,N.GetTheConcept)(L[$].typeId);try{let H=(M=(P=ue?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:"none",re=ue.characterValue;oe.characterValue,oe.characterValue.includes("_s_")&&(ue.id in R||(R[ue.id]={}),R[ue.id][H]=re),R[ee.id]={}}catch(H){console.log("this is error",H)}}if(ue.id!=0&&ee.id!=0){let Q,te=(J=(j=ue.type)===null||j===void 0?void 0:j.characterValue)!==null&&J!==void 0?J:"self";L[$].ofTheConceptId in R?Q=R[L[$].ofTheConceptId]:(Q={},Q[te]={},R[L[$].ofTheConceptId]=Q);let oe=yield(0,N.GetTheConcept)(L[$].typeId);try{let H=(K=(Z=ee?.type)===null||Z===void 0?void 0:Z.characterValue)!==null&&K!==void 0?K:"none",re=ee.characterValue;oe.characterValue.includes("_s_")&&(ee.id in R||(R[ee.id]={}),R[ee.id][H]=re),R[ue.id]={}}catch(H){console.log("this is error",H)}}}return R})}var C=y(5312),r=y(7876),e=function(L,R,D,W){return new(D||(D=Promise))(function(U,P){function M(Z){try{J(W.next(Z))}catch(K){P(K)}}function j(Z){try{J(W.throw(Z))}catch(K){P(K)}}function J(Z){var K;Z.done?U(Z.value):(K=Z.value,K instanceof D?K:new D(function(se){se(K)})).then(M,j)}J((W=W.apply(L,R||[])).next())})};function o(L,R,D){if(L in R){let W=R[L];W&&(D[W.connectionType+"_count"]=W.count)}}var l=function(L,R,D,W){return new(D||(D=Promise))(function(U,P){function M(Z){try{J(W.next(Z))}catch(K){P(K)}}function j(Z){try{J(W.throw(Z))}catch(K){P(K)}}function J(Z){var K;Z.done?U(Z.value):(K=Z.value,K instanceof D?K:new D(function(se){se(K)})).then(M,j)}J((W=W.apply(L,R||[])).next())})},f=y(4698),v=y(6915),I=function(L,R,D,W){return new(D||(D=Promise))(function(U,P){function M(Z){try{J(W.next(Z))}catch(K){P(K)}}function j(Z){try{J(W.throw(Z))}catch(K){P(K)}}function J(Z){var K;Z.done?U(Z.value):(K=Z.value,K instanceof D?K:new D(function(se){se(K)})).then(M,j)}J((W=W.apply(L,R||[])).next())})},i=function(L,R,D,W){return new(D||(D=Promise))(function(U,P){function M(Z){try{J(W.next(Z))}catch(K){P(K)}}function j(Z){try{J(W.throw(Z))}catch(K){P(K)}}function J(Z){var K;Z.done?U(Z.value):(K=Z.value,K instanceof D?K:new D(function(se){se(K)})).then(M,j)}J((W=W.apply(L,R||[])).next())})};function a(L,R){return i(this,arguments,void 0,function*(D,W,U=""){let P=yield(0,N.SearchWithTypeAndLinkerApi)(D,W,U),M=P.compositionIds,j=P.internalConnections,J=P.linkers,Z=P.reverse,K=P.mainCompositionIds,se=yield(0,b.QL)(J),$=yield(0,b.MT)(M,j);return yield(0,C.NK)(se,$,K,Z)})}function t(L,R,D,W,U){return i(this,void 0,void 0,function*(){let P=yield(0,b.QL)(L),M=yield(0,b.rv)(R,D);return yield(0,C.Ve)(P,M,R,W,U)})}function c(L,R,D,W,U){return i(this,void 0,void 0,function*(){let P=yield(0,b.QL)(L),M=yield(0,b.D)(R,D);return yield(0,C.NK)(P,M,W,U)})}function w(L,R,D,W,U){return i(this,void 0,void 0,function*(){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnections",{linkers:L,conceptIds:R,mainCompositionIds:D,reverse:W,countInfos:U})).data}catch(J){console.error("formatConnections error sw: ",J),(0,N.handleServiceWorkerException)(J)}let P=yield(0,b.QL)(L);P=(0,v.X)(P);let M=[];return M=yield k(P,M,W),M=yield function(J,Z,K){return h(this,void 0,void 0,function*(){var se,$,ie,ue,ee,Q,te,oe;let H=[];for(let re=0;re<J.length;re++)H.push(J[re].toTheConceptId),H.push(J[re].ofTheConceptId),H.push(J[re].typeId);J.sort(function(re,le){return le.id-re.id});for(let re=0;re<J.length;re++){let le=!1;K.includes(J[re].id)&&(le=!0);let ae=yield(0,N.GetTheConcept)(J[re].ofTheConceptId),he=yield(0,N.GetTheConcept)(J[re].toTheConceptId);if(le==1&&ae.id!=0&&he.id!=0){let Ce,we=($=(se=he.type)===null||se===void 0?void 0:se.characterValue)!==null&&$!==void 0?$:"self";J[re].toTheConceptId in Z?(Ce=Z[J[re].toTheConceptId],we in Ce||(Ce[we]={})):(Ce={},Ce[we]={},Z[J[re].toTheConceptId]=Ce);let ve=yield(0,N.GetTheConcept)(J[re].typeId);try{let ke=(ue=(ie=ae?.type)===null||ie===void 0?void 0:ie.characterValue)!==null&&ue!==void 0?ue:"none",Ee=ae.characterValue,ge=ve.characterValue;ge==""&&(ge=ke,ge=n(ge));let xe={[ke]:Ee},Ae=ge+"_reverse";ve.characterValue.includes("_s_")||(typeof Ce[we]=="string"&&(Ce[we]={}),Ce[we][Ae]=xe)}catch(ke){console.log("this is error",ke)}}if(ae.id!=0&&he.id!=0){let Ce,we=(Q=(ee=ae.type)===null||ee===void 0?void 0:ee.characterValue)!==null&&Q!==void 0?Q:"self";J[re].ofTheConceptId in Z?(Ce=Z[J[re].ofTheConceptId],we in Ce||(Ce[we]={})):(Ce={},Ce[we]={},Z[J[re].ofTheConceptId]=Ce);let ve=yield(0,N.GetTheConcept)(J[re].typeId);try{let ke=(oe=(te=he?.type)===null||te===void 0?void 0:te.characterValue)!==null&&oe!==void 0?oe:"none",Ee=he.characterValue,ge=ve.characterValue,xe=(ve.characterValue,!1);ge==""&&(ge=ke,ge=n(ge),xe=!0);let Ae={[ke]:Ee};isNaN(Number(ge))?ve.characterValue.includes("_s_")||(typeof Ce[we]=="string"&&(Ce[we]={}),Ce[we][ge]=xe?Ee:Ae):(Array.isArray(Ce[we])||(Ce[we]=[]),Ce[we].push(Ee))}catch(ke){console.log("this is error",ke)}}}return Z})}(P,M,W),yield function(J,Z,K,se){return h(this,arguments,void 0,function*($,ie,ue,ee,Q=[]){var te,oe,H,re,le,ae;let he=[],Ce=[];for(let we=0;we<$.length;we++)Ce.push($[we].toTheConceptId),Ce.push($[we].ofTheConceptId),Ce.push($[we].typeId);$.sort(function(we,ve){return ve.id-we.id});for(let we=0;we<$.length;we++){let ve=!1;Q.includes($[we].id)&&(ve=!0);let ke=yield(0,N.GetTheConcept)($[we].ofTheConceptId),Ee=yield(0,N.GetTheConcept)($[we].toTheConceptId);if(ve==1&&ke.id!=0&&Ee.id!=0&&Ee.id in ie){let ge,xe=(oe=(te=Ee.type)===null||te===void 0?void 0:te.characterValue)!==null&&oe!==void 0?oe:"self";$[we].toTheConceptId in ie?ge=ie[$[we].toTheConceptId]:(ge={},ge[xe]={},ie[$[we].toTheConceptId]=ge);let Ae=yield(0,N.GetTheConcept)($[we].typeId);try{let ce=Ae.characterValue+"_reverse",Te=ie[$[we].ofTheConceptId];Te&&(Array.isArray(ge[xe][ce])?ge[xe][ce].push(Te):Ae.characterValue.includes("_s_")?(ge[xe][ce]=[],ge[xe][ce].push(Te)):ge[xe][ce]=Te)}catch(ce){console.log("this is error",ce)}}if(ke.id!=0&&Ee.id!=0&&ke.id in ie){let ge,xe=(re=(H=ke.type)===null||H===void 0?void 0:H.characterValue)!==null&&re!==void 0?re:"self";$[we].ofTheConceptId in ie?(ge=ie[$[we].ofTheConceptId],typeof ge[xe]=="string"&&(ge[xe]={})):(ge={},ge[xe]={},ie[$[we].ofTheConceptId]=ge);let Ae=!1,ce=(yield(0,N.GetTheConcept)($[we].typeId)).characterValue;ce==""&&(ce=Ee.characterValue,Ae=!0),ce==""&&(ce=(ae=(le=Ee?.type)===null||le===void 0?void 0:le.characterValue)!==null&&ae!==void 0?ae:"");try{let Te=ie[$[we].toTheConceptId];Te&&(Array.isArray(ge[xe])?Ae?ge[xe].push(Te[ce]):ge[xe].push(Te):Array.isArray(ge[xe][ce])?ge[xe][ce].push(Te):ce.includes("_s_")?(ge[xe][ce]=[],Ae?ge[xe][ce].push(Te[ce]):ge[xe][ce].push(Te)):ge[xe][ce]=Ae?Te[ce]:Te)}catch(Te){console.log("this is error",Te)}}}for(let we=0;we<ue.length;we++){let ve=ie[ue[we]];ve?(ve.id=ue[we],he.push(ve)):(yield N.ConceptsData.GetConcept(ue[we])).id!=0&&(ve={},ve.id=ue[we],he.push(ve))}return he})}(P,M,D,[],W)})}function m(L,R,D,W,U){return i(this,arguments,void 0,function*(P,M,j,J,Z,K="DESC"){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnectionsJustId",{linkers:P,conceptIds:M,mainCompositionIds:j,reverse:J,countInfos:Z,order:K})).data}catch(ee){console.error("formatConnectionsJustId error sw: ",ee),(0,N.handleServiceWorkerException)(ee)}let se=yield(0,b.QL)(P),$=yield(0,f.V)(Z);se=(0,v.X)(se,K);let ie=[];return ie=yield k(se,ie,J),ie=yield function(ee,Q){return e(this,arguments,void 0,function*(te,oe,H=[]){var re,le,ae,he,Ce,we,ve,ke;let Ee=[];for(let ge=0;ge<te.length;ge++)Ee.push(te[ge].toTheConceptId),Ee.push(te[ge].ofTheConceptId),Ee.push(te[ge].typeId);for(let ge=0;ge<te.length;ge++){let xe=!1,Ae=yield(0,r.A)(te[ge].ofTheConceptId),ce=yield(0,r.A)(te[ge].toTheConceptId);if(H.includes(te[ge].id)&&(xe=!0),xe==1&&Ae.id!=0&&ce.id!=0){let Te,Oe=yield(0,r.A)(te[ge].typeId),be=(le=(re=ce.type)===null||re===void 0?void 0:re.characterValue)!==null&&le!==void 0?le:"self";te[ge].toTheConceptId in oe?(Te=oe[te[ge].toTheConceptId],be in Te||(Te[be]={})):(Te={},Te[be]={},oe[te[ge].toTheConceptId]=Te);try{let pe=(he=(ae=Ae?.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&he!==void 0?he:"none",De=Ae.characterValue,_e=Oe.characterValue;_e==""&&(_e=pe,_e=n(_e));let Be={id:Ae.id,[pe]:De,created_on:te[ge].entryTimeStamp},Ne=_e+"_reverse";Ne.includes("_s_")||(typeof Te[be]=="string"&&(Te[be]={}),Te[be][Ne]=Be)}catch(pe){console.log("this is error",pe)}}if(Ae.id!=0&&ce.id!=0){let Te,Oe=yield(0,r.A)(te[ge].typeId),be=(we=(Ce=Ae.type)===null||Ce===void 0?void 0:Ce.characterValue)!==null&&we!==void 0?we:"self";te[ge].ofTheConceptId in oe?(Te=oe[te[ge].ofTheConceptId],be in Te||(Te[be]={})):(Te={},Te[be]={},oe[te[ge].ofTheConceptId]=Te);try{let pe=(ke=(ve=ce?.type)===null||ve===void 0?void 0:ve.characterValue)!==null&&ke!==void 0?ke:"none",De=ce.characterValue,_e=Oe.characterValue,Be=!1;_e==""&&(_e=pe,_e=n(_e),Be=!0);let Ne={};Ne[pe]={id:ce.id,data:De,created_on:te[ge].entryTimeStamp},isNaN(Number(_e))?_e.includes("_s_")||(typeof Te[be]=="string"&&(Te[be]={}),Te[be][_e]=Be?Ne[pe]:Ne):(Array.isArray(Te[be])||(Te[be]=[]),Te[be].push(Ne[pe]))}catch(pe){console.log("this is error",pe)}}}return oe})}(se,ie,J),yield function(ee,Q,te){return e(this,arguments,void 0,function*(oe,H,re,le=[],ae){var he,Ce,we,ve,ke,Ee,ge;new Date().getTime();let xe=[],Ae=[];for(let ce=0;ce<oe.length;ce++)Ae.push(oe[ce].toTheConceptId),Ae.push(oe[ce].ofTheConceptId),Ae.push(oe[ce].typeId);for(let ce=0;ce<oe.length;ce++){let Te=!1,Oe=yield(0,r.A)(oe[ce].ofTheConceptId),be=yield(0,r.A)(oe[ce].toTheConceptId);if(le.includes(oe[ce].id)&&(Te=!0),Te==1&&Oe.id!=0&&be.id!=0&&be.id in H){let pe,De=yield(0,r.A)(oe[ce].typeId),_e=(Ce=(he=be.type)===null||he===void 0?void 0:he.characterValue)!==null&&Ce!==void 0?Ce:"self";oe[ce].toTheConceptId in H,oe[ce].toTheConceptId in H?(pe=H[oe[ce].toTheConceptId],typeof pe[_e]=="string"&&(pe[_e]={})):(pe={},pe[_e]={},H[oe[ce].toTheConceptId]=pe);try{if(H[oe[ce].ofTheConceptId]){let Be=H[oe[ce].ofTheConceptId];Be&&(Be.id=Oe.id,Be.created_on=Oe.entryTimeStamp);let Ne=De.characterValue+"_reverse";Array.isArray(pe[_e][Ne])?pe[_e][Ne].push(Be):Ne.includes("_s_")?(pe[_e][Ne]=[],pe[_e][Ne].push(Be)):pe[_e][Ne]=Be}}catch(Be){console.log("this is error",Be)}}if(Oe.id!=0&&be.id!=0&&Oe.id in H){let pe,De=yield(0,r.A)(oe[ce].typeId),_e=(ve=(we=Oe.type)===null||we===void 0?void 0:we.characterValue)!==null&&ve!==void 0?ve:"self";oe[ce].toTheConceptId in H,oe[ce].ofTheConceptId in H?(pe=H[oe[ce].ofTheConceptId],typeof pe[_e]=="string"&&(pe[_e]={})):(pe={},pe[_e]={},H[oe[ce].ofTheConceptId]=pe),o(Oe.id,ae,pe);let Be=!1,Ne=De.characterValue;Ne==""&&(Ne=be.characterValue,Be=!0),Ne==""&&(Ne=((ke=be?.type)===null||ke===void 0?void 0:ke.characterValue)||"");try{let Ue=(ge=(Ee=be?.type)===null||Ee===void 0?void 0:Ee.characterValue)!==null&&ge!==void 0?ge:"none",je=H[oe[ce].toTheConceptId];if(je){let ze={};ze[Ue]={data:je[Ue],id:be.id,created_on:oe[ce].entryTimeStamp},Array.isArray(pe[_e])?Be?pe[_e].push(je[Ne]):pe[_e].push(je):Array.isArray(pe[_e][Ne])?pe[_e][Ne].push(ze):Ne.includes("_s_")?(pe[_e][Ne]=[],Be?pe[_e][Ne].push(ze[Ue]):pe[_e][Ne].push(ze)):pe[_e][Ne]=Be?ze[Ue]:ze,o(be.id,ae,ze)}}catch(Ue){console.log("this is error",Ue)}}}for(let ce=0;ce<re.length;ce++){let Te={};Te=H[re[ce]],Te?Te.id=re[ce]:(yield N.ConceptsData.GetConcept(re[ce])).id!=0&&(Te={},Te.id=re[ce]),xe.push(Te)}return xe})}(se,ie,j,J,$)})}function S(L,R,D,W,U){return i(this,arguments,void 0,function*(P,M,j,J,Z,K="DESC"){try{if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnectionsDataId",{linkers:P,conceptIds:M,mainCompositionIds:j,reverse:J,countInfos:Z,order:K})).data}catch(Q){console.error("formatConnectionsDataId error sw: ",Q),(0,N.handleServiceWorkerException)(Q)}let se,$;try{se=yield(0,b.QL)(P)}catch(Q){throw console.error("Error in GetConnectionDataPrefetch:",Q),new Error(`Failed to prefetch connections: ${Q instanceof Error?Q.message:String(Q)}`)}try{$=yield(0,f.V)(Z)}catch(Q){throw console.error("Error in GetConnectionTypeForCount:",Q),new Error(`Failed to get connection type for count: ${Q instanceof Error?Q.message:String(Q)}`)}try{se=(0,v.X)(se,K)}catch(Q){throw console.error("Error in orderTheConnections:",Q),new Error(`Failed to order connections: ${Q instanceof Error?Q.message:String(Q)}`)}let ie,ue=[],ee=[];try{ue=yield function(Q,te){var oe=arguments;return l(this,arguments,void 0,function*(H,re,le=[]){var ae,he,Ce,we,ve,ke,Ee,ge;try{const xe=N.Logger.logfunction("FormatFunctionData",oe);let Ae=[];for(let ce=0;ce<H.length;ce++)Ae.push(H[ce].toTheConceptId),Ae.push(H[ce].ofTheConceptId),Ae.push(H[ce].typeId);for(let ce=0;ce<H.length;ce++)try{let Te=!1,Oe=yield(0,N.GetTheConcept)(H[ce].ofTheConceptId),be=yield(0,N.GetTheConcept)(H[ce].toTheConceptId);if(le.includes(H[ce].id)&&(Te=!0),Te==1&&Oe.id!=0&&be.id!=0){let pe,De=yield(0,N.GetTheConcept)(H[ce].typeId),_e=(he=(ae=be.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&he!==void 0?he:"self";H[ce].toTheConceptId in re?pe=re[H[ce].toTheConceptId]:(pe={},pe[_e]={},re[H[ce].toTheConceptId]=pe);try{let Be=(we=(Ce=Oe?.type)===null||Ce===void 0?void 0:Ce.characterValue)!==null&&we!==void 0?we:"none",Ne=Oe.characterValue;(De.characterValue+"_reverse").includes("_s_")&&(Oe.id in re||(re[Oe.id]={}),re[Oe.id][Be]=Ne),re[be.id]={}}catch(Be){console.log("this is error",Be)}}if(Oe.id!=0&&be.id!=0){let pe,De=yield(0,N.GetTheConcept)(H[ce].typeId),_e=(ke=(ve=Oe.type)===null||ve===void 0?void 0:ve.characterValue)!==null&&ke!==void 0?ke:"self";H[ce].ofTheConceptId in re?pe=re[H[ce].ofTheConceptId]:(pe={},pe[_e]={},re[H[ce].ofTheConceptId]=pe);try{let Be=(ge=(Ee=be?.type)===null||Ee===void 0?void 0:Ee.characterValue)!==null&&ge!==void 0?ge:"none",Ne=be.characterValue;De.characterValue.includes("_s_")&&(be.id in re||(re[be.id]={}),re[be.id][Be]=Ne),re[Oe.id]={}}catch(Be){console.log("this is error",Be)}}}catch(Te){console.log("Error processing connection at index",ce,Te)}return N.Logger.logUpdate(xe),re}catch(xe){throw console.log("Error in FormatFunctionData",xe),xe}})}(se,ue,J)}catch(Q){throw console.error("Error in FormatFunctionData:",Q),new Error(`Failed to format function data: ${Q instanceof Error?Q.message:String(Q)}`)}try{ue=yield function(Q,te){var oe=arguments;return l(this,arguments,void 0,function*(H,re,le=[]){var ae,he,Ce,we,ve,ke,Ee,ge;try{const xe=N.Logger.logfunction("FormatFunctionDataForData",oe);let Ae=[];for(let ce=0;ce<H.length;ce++)Ae.push(H[ce].toTheConceptId),Ae.push(H[ce].ofTheConceptId),Ae.push(H[ce].typeId);for(let ce=0;ce<H.length;ce++)try{let Te=!1,Oe=yield(0,N.GetTheConcept)(H[ce].ofTheConceptId),be=yield(0,N.GetTheConcept)(H[ce].toTheConceptId);if(le.includes(H[ce].id)&&(Te=!0),Te==1&&Oe.id!=0&&be.id!=0){let pe,De=yield(0,N.GetTheConcept)(H[ce].typeId),_e=(he=(ae=be.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&he!==void 0?he:"self";H[ce].toTheConceptId in re?(pe=re[H[ce].toTheConceptId],_e in pe||(pe[_e]={})):(pe={},pe[_e]={},re[H[ce].toTheConceptId]=pe);try{let Be=(we=(Ce=Oe?.type)===null||Ce===void 0?void 0:Ce.characterValue)!==null&&we!==void 0?we:"none",Ne=Oe.characterValue,Ue=De.characterValue;Ue==""&&(Ue=Be,Ue=n(Ue));let je={id:Oe.id,data:{[Be]:Ne}},ze=Ue+"_reverse";ze.includes("_s_")||(typeof pe[_e]=="string"&&(pe[_e]={}),pe[_e][ze]=je)}catch(Be){console.log("this is error",Be)}}if(Oe.id!=0&&be.id!=0){let pe,De=yield(0,N.GetTheConcept)(H[ce].typeId),_e=(ke=(ve=Oe.type)===null||ve===void 0?void 0:ve.characterValue)!==null&&ke!==void 0?ke:"self";H[ce].ofTheConceptId in re?(pe=re[H[ce].ofTheConceptId],_e in pe||(pe[_e]={})):(pe={},pe[_e]={},re[H[ce].ofTheConceptId]=pe);try{let Be=(ge=(Ee=be?.type)===null||Ee===void 0?void 0:Ee.characterValue)!==null&&ge!==void 0?ge:"none",Ne=be.characterValue,Ue=De.characterValue,je=!1;Ue==""&&(Ue=Be,Ue=n(Ue),je=!0);let ze={id:be.id,data:{[Be]:Ne}};isNaN(Number(Ue))?Ue.includes("_s_")||(typeof pe[_e]=="string"&&(pe[_e]={}),pe[_e][Ue]=ze):(Array.isArray(pe[_e])||(pe[_e]=[]),pe[_e].push(ze))}catch(Be){console.log("this is error",Be)}}}catch(Te){console.log("Error processing connection at index",ce,Te)}return N.Logger.logUpdate(xe),re}catch(xe){throw console.log("Error in FormatFunctionDataForData",xe),xe}})}(se,ue,J)}catch(Q){throw console.error("Error in FormatFunctionDataForData:",Q),new Error(`Failed to format function data for data: ${Q instanceof Error?Q.message:String(Q)}`)}try{ie=yield function(Q,te,oe,H){var re=arguments;return l(this,arguments,void 0,function*(le,ae,he,Ce,we=[],ve){var ke,Ee,ge,xe,Ae,ce;try{const Te=N.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",re);let Oe=[],be=[];for(let pe=0;pe<le.length;pe++)be.push(le[pe].toTheConceptId),be.push(le[pe].ofTheConceptId),be.push(le[pe].typeId);for(let pe=0;pe<le.length;pe++)try{let De=!1,_e=yield(0,N.GetTheConcept)(le[pe].ofTheConceptId),Be=yield(0,N.GetTheConcept)(le[pe].toTheConceptId);if(we.includes(le[pe].id)&&(De=!0),De==1&&_e.id!=0&&Be.id!=0&&Be.id in ae){let Ne,Ue=yield(0,N.GetTheConcept)(le[pe].typeId),je=(Ee=(ke=Be.type)===null||ke===void 0?void 0:ke.characterValue)!==null&&Ee!==void 0?Ee:"self",ze=!1;le[pe].toTheConceptId in ae&&(ze=!0),le[pe].toTheConceptId in ae?(Ne=ae[le[pe].toTheConceptId],typeof Ne[je]=="string"&&(Ne[je]={})):(Ne={},Ne[je]={},ae[le[pe].toTheConceptId]=Ne),o(Be.id,ve,Ne);try{if(ae[le[pe].ofTheConceptId]){let Lt={id:_e.id,data:ae[le[pe].ofTheConceptId],created_on:le[pe].entryTimeStamp},dt=Ue.characterValue+"_reverse";Array.isArray(Ne[je][dt])?Ne[je][dt].push(Lt):dt.includes("_s_")?(Ne[je][dt]=[],Ne[je][dt].push(Lt)):Ne[je][dt]=Lt}}catch(Lt){console.log("this is error",Lt)}}if(_e.id!=0&&Be.id!=0&&_e.id in ae){let Ne,Ue=yield(0,N.GetTheConcept)(le[pe].typeId),je=(xe=(ge=_e.type)===null||ge===void 0?void 0:ge.characterValue)!==null&&xe!==void 0?xe:"self",ze=!1;le[pe].toTheConceptId in ae&&(ze=!0),le[pe].ofTheConceptId in ae?(Ne=ae[le[pe].ofTheConceptId],typeof Ne[je]=="string"&&(Ne[je]={})):(Ne={},Ne[je]={},ae[le[pe].ofTheConceptId]=Ne),o(_e.id,ve,Ne);let Lt=!0,dt=Ue.characterValue;dt==""&&(dt=Be.characterValue,Lt=!0),dt==""&&(dt=((Ae=Be?.type)===null||Ae===void 0?void 0:Ae.characterValue)||"");try{(ce=Be?.type)===null||ce===void 0||ce.characterValue;let Xt=ae[le[pe].toTheConceptId];if(Xt){let Zt={id:Be.id,data:ae[le[pe].toTheConceptId],created_on:le[pe].entryTimeStamp};Array.isArray(Ne[je])?Ne[je].push(Xt):Array.isArray(Ne[je][dt])?Ne[je][Ue.characterValue].push(Zt):dt.includes("_s_")?(Ne[je][dt]=[],Ne[je][dt].push(Zt)):Ne[je][dt]=Zt,o(Be.id,ve,Zt)}}catch(Xt){console.log("this is error",Xt)}}}catch(De){console.log("Error processing connection at index",pe,De)}for(let pe=0;pe<Ce.length;pe++)try{let De={};De.id=Ce[pe];let _e=yield(0,N.GetTheConcept)(De.id);De.data=ae[Ce[pe]],De.created_on=_e.entryTimeStamp,Oe.push(De)}catch(De){console.log("Error processing main composition at index",pe,De)}return N.Logger.logUpdate(Te),Oe}catch(Te){throw console.log("Error in FormatFromConnectionsAlteredArrayExternal",Te),Te}})}(se,ue,ee,j,J,$)}catch(Q){throw console.error("Error in FormatFromConnectionsAlteredArrayExternal:",Q),new Error(`Failed to format from connections altered array external: ${Q instanceof Error?Q.message:String(Q)}`)}return ie}catch(se){throw console.error("Error in formatConnectionsDataId:",se),se}})}function E(L,R,D,W,U){return i(this,arguments,void 0,function*(P,M,j,J,Z,K="DESC"){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnectionsV2",{linkers:P,conceptIds:M,mainCompositionIds:j,reverse:J,countInfos:Z,order:K})).data}catch(ee){console.error("formatConnectionsV2 error sw: ",ee),(0,N.handleServiceWorkerException)(ee)}let se=yield(0,b.QL)(P),$=yield(0,f.V)(Z);se=(0,v.X)(se,K);let ie={};return ie=yield function(ee){var Q=arguments;return I(this,arguments,void 0,function*(te,oe={},H=[]){var re,le,ae,he,Ce;const we=N.Logger.logfunction("FormatFunctionDataV2",Q);for(const ve of te){const ke=H.includes(ve.id),Ee=yield(0,N.GetTheConcept)(ve.ofTheConceptId),ge=yield(0,N.GetTheConcept)(ve.toTheConceptId),xe=yield(0,N.GetTheConcept)(ve.typeId);if(Ee.id===0||ge.id===0)continue;const Ae=ke?ge:Ee,ce=ke?Ee:ge,Te=(le=(re=Ae.type)===null||re===void 0?void 0:re.characterValue)!==null&&le!==void 0?le:"self",Oe=(he=(ae=ce.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&he!==void 0?he:"none",be=ce.characterValue;(Ce=xe.characterValue)===null||Ce===void 0||Ce.includes("_s_"),oe[Ae.id]||(oe[Ae.id]={}),oe[Ae.id][Te]||(oe[Ae.id][Te]={}),oe[ce.id]||(oe[ce.id]={}),oe[ce.id][Oe]=be}return N.Logger.logUpdate(we),oe})}(se,ie,J),ie=yield function(ee){var Q=arguments;return I(this,arguments,void 0,function*(te,oe={},H=[]){var re,le,ae,he,Ce;const we=N.Logger.logfunction("FormatFunctionDataForDataV2",Q);for(const ve of te){const ke=H.includes(ve.id),Ee=yield(0,N.GetTheConcept)(ve.ofTheConceptId),ge=yield(0,N.GetTheConcept)(ve.toTheConceptId),xe=yield(0,N.GetTheConcept)(ve.typeId);if(Ee.id===0||ge.id===0)continue;const Ae=ke?ge:Ee,ce=ke?Ee:ge,Te=(le=(re=Ae.type)===null||re===void 0?void 0:re.characterValue)!==null&&le!==void 0?le:"self",Oe=(he=(ae=ce.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&he!==void 0?he:"none",be=ce.characterValue,pe=(Ce=xe.characterValue)!==null&&Ce!==void 0?Ce:"";let De=pe===""?n(Oe):pe;const _e=De.includes("_s_"),Be=!isNaN(Number(De)),Ne={id:ce.id,data:{[Oe]:be}};oe[Ae.id]||(oe[Ae.id]={}),Te in oe[Ae.id]&&typeof oe[Ae.id][Te]!="string"||(oe[Ae.id][Te]=Be?[]:{});try{if(_e)continue;Be?oe[Ae.id][Te].push(Ne):oe[Ae.id][Te][ke?`${De}_reverse`:De]=Ne}catch(Ue){console.error("Error formatting concept data:",Ue)}}return N.Logger.logUpdate(we),oe})}(se,ie,J),yield function(ee,Q,te){var oe=arguments;return I(this,arguments,void 0,function*(H,re,le,ae=[],he){var Ce,we,ve;const ke=N.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",oe),Ee=[];for(const ge of H){const xe=ae.includes(ge.id),Ae=yield(0,N.GetTheConcept)(ge.ofTheConceptId),ce=yield(0,N.GetTheConcept)(ge.toTheConceptId),Te=yield(0,N.GetTheConcept)(ge.typeId);if(Ae.id===0||ce.id===0)continue;const Oe=xe?ce:Ae,be=xe?Ae:ce,pe=Oe.id,De=be.id,_e=(we=(Ce=Oe.type)===null||Ce===void 0?void 0:Ce.characterValue)!==null&&we!==void 0?we:"self",Be=Te.characterValue+"_reverse",Ne=Te.characterValue||be.characterValue||((ve=be.type)===null||ve===void 0?void 0:ve.characterValue)||"";if(re[pe]){const Ue=re[pe][_e],je=re[De],ze={id:be.id,data:je,created_on:ge.entryTimeStamp};o(pe,he,re[pe]);try{xe?Array.isArray(Ue[Be])?Ue[Be].push(ze):Ue[Be]=[ze]:Array.isArray(Ue)?Ue.push(je):Array.isArray(Ue[Ne])?Ue[Ne].push(ze):Ne.includes("_s_")?(Ue[Ne]=[],Ue[Ne].push(ze)):Ue[Ne]=[ze],o(De,he,ze)}catch(Lt){console.error("Error processing connection:",Lt)}}else console.log("This is the error in the source")}for(const ge of le){const xe=yield(0,N.GetTheConcept)(ge);Ee.push({id:ge,data:re[ge],created_on:xe.entryTimeStamp})}return N.Logger.logUpdate(ke),Ee})}(se,ie,j,J,$)})}},1412:(Y,x,y)=>{function N(b=[],n=[]){}y.d(x,{e:()=>N})},1534:(Y,x,y)=>{let N=y(7793),b=y(1752);class n extends N{get selectors(){return b.comma(this.selector)}set selectors(k){let C=this.selector?this.selector.match(/,\s*/):null,r=C?C[0]:","+this.raw("between","beforeOpen");this.selector=k.join(r)}constructor(k){super(k),this.type="rule",this.nodes||(this.nodes=[])}}Y.exports=n,n.default=n,N.registerRule(n)},1557:(Y,x)=>{x.__esModule=!0,x.default=function(y){for(var N=arguments.length,b=new Array(N>1?N-1:0),n=1;n<N;n++)b[n-1]=arguments[n];for(;b.length>0;){var h=b.shift();y[h]||(y[h]={}),y=y[h]}},Y.exports=x.default},1581:(Y,x)=>{x.__esModule=!0,x.UNIVERSAL=x.TAG=x.STRING=x.SELECTOR=x.ROOT=x.PSEUDO=x.NESTING=x.ID=x.COMMENT=x.COMBINATOR=x.CLASS=x.ATTRIBUTE=void 0,x.TAG="tag",x.STRING="string",x.SELECTOR="selector",x.ROOT="root",x.PSEUDO="pseudo",x.NESTING="nesting",x.ID="id",x.COMMENT="comment",x.COMBINATOR="combinator",x.CLASS="class",x.ATTRIBUTE="attribute",x.UNIVERSAL="universal"},1596:(Y,x,y)=>{y.d(x,{g:()=>h});var N=y(5205),b=y(3278),n=function(k,C,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{I(e.next(i))}catch(a){l(a)}}function v(i){try{I(e.throw(i))}catch(a){l(a)}}function I(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}I((e=e.apply(k,[])).next())})};function h(k,C){return n(this,void 0,void 0,function*(){if(typeof self<"u"&&typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)throw new Error("Cannot switch server from service worker");try{(function(){const r=N.BaseUrl.NODE_CACHE_URL;let e=N.BaseUrl.BASE_APPLICATION+"_cacheServers";if(r===N.BaseUrl.BASE_URL)throw new Error("Base Server Down");let o=sessionStorage.getItem(e);o=JSON.parse(o);const l=o.indexOf(r);if(N.BaseUrl.isNearestCache=!1,o.includes(r)&&l!==-1&&o.splice(l,1),sessionStorage.setItem(e,JSON.stringify(o)),o.length){const f=o[0];N.BaseUrl.NODE_CACHE_URL=f}else N.BaseUrl.NODE_CACHE_URL=N.BaseUrl.BASE_URL;console.log("before the payload",b.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&(0,N.sendMessage)("SESSION_DATA",{type:"SESSION_DATA",data:N.BaseUrl.NODE_CACHE_URL,session:b.b.sessionId})})();try{return yield fetch(`${N.BaseUrl.NODE_CACHE_URL}${C}`,k)}catch{return yield h(k,C)}}catch(r){throw r}})}},1666:(Y,x,y)=>{y.d(x,{q:()=>h});var N=y(2155),b=y(442),n=y(1863);function h(k,C,r,e){var o=C,l=new N.N(0,k,r,o,e,1,4);if(k==r)return l.ofTheConceptId=0,l.toTheConceptId=1,l;try{l.isTemp=!0,l.id=Math.floor(1e8*Math.random()),b.Y.AddConnection(l)}catch(f){(0,n.Mb)(f)}return l}},1669:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(3295))&&N.__esModule?N:{default:N},n=y(1581);function h(C,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(C,r)}var k=function(C){var r,e;function o(l){var f;return(f=C.call(this,l)||this).type=n.UNIVERSAL,f.value="*",f}return e=C,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(b.default);x.default=k,Y.exports=x.default},1704:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function h(C,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(C,r)}var k=function(C){var r,e;function o(l){var f;return(f=C.call(this,l)||this).type=n.COMBINATOR,f}return e=C,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(b.default);x.default=k,Y.exports=x.default},1735:(Y,x,y)=>{y.d(x,{J:()=>k});var N,b=y(5205),n=y(3278),h=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,[])).next())})};class k{static incrementConcept(r){try{r&&(this.conceptsData[r]=(this.conceptsData[r]||0)+1)}catch{console.error("Failed on increment concept")}}static incrementConnection(r){try{r&&(this.connectionsData[r]=(this.connectionsData[r]||0)+1)}catch{console.error("Failed on increment connection")}}static getTopConcepts(r){return Object.entries(this.conceptsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,r)}static getTopConnections(r){return Object.entries(this.connectionsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,r)}static saveDataToLocalStorage(){const r={concepts:this.conceptsData,connections:this.connectionsData};localStorage?.setItem(this.accessData,JSON.stringify(r))}static loadDataFromLocalStorage(){const r=localStorage==null?void 0:localStorage.getItem(this.accessData);if(r){const e=JSON.parse(r);this.conceptsData=e.concepts||{},this.connectionsData=e.connections||{}}}static sendToServer(){return h(this,void 0,void 0,function*(){try{yield this.syncToServer()}catch{console.error("Failed to process Access Tracker Sync with Server")}})}static syncToServer(){return h(this,void 0,void 0,function*(){try{if(!Object.keys(this.conceptsData).length&&!Object.keys(this.connectionsData).length)return;const r=n.b.BearerAccessToken;if(!r)return;const e=this.conceptsData&&Object.keys(this.conceptsData).length>0?this.conceptsData:{},o=this.connectionsData&&Object.keys(this.connectionsData).length>0?this.connectionsData:{},l=yield fetch(b.BaseUrl.PostPrefetchConceptConnections(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({concepts:e,connections:o})});if(!l.ok)throw new Error("Failed to sync data to the server.");yield l.json(),this.conceptsData={},this.connectionsData={},this.setNextSyncTime()}catch(r){console.error("Sync error:",r)}})}static setNextSyncTime(){this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS}static startAutoSync(){setInterval(()=>{const r=Date.now();this.nextSyncTime&&r>=this.nextSyncTime&&this.syncNow().catch(console.error)},6e4)}static syncNow(){return h(this,void 0,void 0,function*(){try{this.activateStatus?yield this.syncToServer():console.warn("Access Tracker inactive.")}catch{console.error("Error on sync access tracker")}})}static GetSuggestedConcepts(r){return h(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(b.BaseUrl.GetSuggestedConcepts());r!==void 0&&o.searchParams.append("top",r.toString());const l=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!l.ok){const v=yield l.text();throw new Error(`Failed to load concepts: ${l.status} ${l.statusText}. Details: ${v}`)}const f=(yield l.json())||[];return yield this.addConceptToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested concepts:",e.message),new Error("Unable to fetch suggested concepts. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested concepts."))}})}static GetSuggestedConnections(r){return h(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(b.BaseUrl.GetSuggestedConnections());r!==void 0&&o.searchParams.append("top",r.toString());const l=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!l.ok){const v=yield l.text();throw new Error(`Failed to load connections: ${l.status} ${l.statusText}. Details: ${v}`)}const f=(yield l.json())||[];return yield this.addConnectionToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested Connections:",e.message),new Error("Unable to fetch suggested connections. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested Connections."))}})}static addConceptToBinaryTree(r){return h(this,void 0,void 0,function*(){try{r.forEach(e=>{b.ConceptsData.AddConcept(e)})}catch{console.error("Error on adding Concepts Data into tree")}})}static addConnectionToBinaryTree(r){return h(this,void 0,void 0,function*(){try{r.forEach(e=>{b.ConnectionData.AddConnection(e)})}catch{console.error("Error on adding Connections Data into tree")}})}}N=k,k.conceptsData={},k.connectionsData={},k.SYNC_INTERVAL_MS=12e4,k.nextSyncTime=Date.now(),k.activateStatus=!1,k.accessData="Access Data",N.startAutoSync()},1752:Y=>{let x={comma:y=>x.split(y,[","],!0),space:y=>x.split(y,[" ",`
`,"	"]),split(y,N,b){let n=[],h="",k=!1,C=0,r=!1,e="",o=!1;for(let l of y)o?o=!1:l==="\\"?o=!0:r?l===e&&(r=!1):l==='"'||l==="'"?(r=!0,e=l):l==="("?C+=1:l===")"?C>0&&(C-=1):C===0&&N.includes(l)&&(k=!0),k?(h!==""&&n.push(h.trim()),h="",k=!1):h+=l;return(b||h!=="")&&n.push(h.trim()),n}};Y.exports=x,x.default=x},1863:(Y,x,y)=>{y.d(x,{ER:()=>h,Mb:()=>k,ey:()=>C,ry:()=>n});var N=y(5205),b=y(7273);function n(r){if(N.Logger.log("ERROR",r.statusText,{code:r.status,data:r.statusText}),r.status==401||r.status==406){let e=new b.z(r.statusText,!1,r.status,"");throw e.setUrl(r.url),e}if(r.status==500){let e=new b.z(r.statusText,!1,r.status,"");throw e.setUrl(r.url),e}}function h(r,e={}){if(N.Logger.log("ERROR",e.statusText,{code:r.status,data:r.status}),r.status==401||r.status==406){let o=new b.z(e.statusText,!1,r.status,"");throw o.setUrl(r.url),o}if(r.status==500){let o=new b.z(e.statusText,!1,r.status,"");throw o.setUrl(r.url),o}}function k(r,e=""){if(N.Logger.log("ERROR",r.message,{code:r.status,data:r.stack}),r.status){let o=new b.z(r.message,!1,r.status,r.stack);throw o.setUrl(e),o}{let o=new b.z(r.message,!1,500,r.stack);throw o.setUrl(e),o}}function C(r,e,o){var l;try{if(!r)return void console.error(`Error in ${e}: logData is undefined`);const f=Date.now();r.startTime=(l=r.startTime)!==null&&l!==void 0?l:f,r.responseTime=f-r.startTime+" ms",r.level="ERROR",r.errorMessage=o?.message||"Unknown error occurred",console.error(`Error in function ${e}:`,o)}catch(f){console.error("Failed to handle package function error:",f)}}},1866:()=>{},2013:(Y,x,y)=>{y.d(x,{A:()=>C,w:()=>r});var N=y(8146),b=y(5205),n=y(3026),h=y(1863),k=function(e,o,l,f){return new(l||(l=Promise))(function(v,I){function i(c){try{t(f.next(c))}catch(w){I(w)}}function a(c){try{t(f.throw(c))}catch(w){I(w)}}function t(c){var w;c.done?v(c.value):(w=c.value,w instanceof l?w:new l(function(m){m(w)})).then(i,a)}t((f=f.apply(e,[])).next())})};function C(e){var o=arguments;return k(this,void 0,void 0,function*(){const l=b.Logger.logfunction("GetConceptByCharacter",o)||{};if(b.serviceWorker){l.serviceWorker=!0;try{const I=yield(0,b.sendMessage)("GetConceptByCharacter",{characterValue:e});return b.Logger.logUpdate(l),I.data}catch(I){console.error("GetConceptByCharacter sw error: ",I),(0,h.ey)(l,"GetConceptByCharacter",I),(0,b.handleServiceWorkerException)(I)}}let f=yield n.I.GetConceptByCharacter(e),v=`${e}`;return f!=null&&f?.id!=0||!v||(yield(0,N.Y)(e),f=yield n.I.GetConceptByCharacterAndTypeLocal(e,51),f.id==0&&(f=yield n.I.GetConceptByCharacter(e))),b.Logger.logUpdate(l),f})}function r(e){var o=arguments;return k(this,void 0,void 0,function*(){const l=b.Logger.logfunction("GetConceptByCharacterUpdated",o)||{};if(b.serviceWorker){l.serviceWorker=!0;try{const I=yield(0,b.sendMessage)("GetConceptByCharacterUpdated",{characterValue:e});return b.Logger.logUpdate(l),I.data}catch(I){console.error("GetConceptByCharacterUpdated error sw: ",I),(0,h.ey)(l,"GetConceptByCharacterUpdated",I),(0,b.handleServiceWorkerException)(I)}}let f=yield n.I.GetConceptByCharacter(e),v=`${e}`;return f!=null&&f?.id!=0||!v||(yield(0,N.Y)(e),f=yield n.I.GetConceptByCharacter(e)),b.Logger.logUpdate(l),f})}},2110:(Y,x,y)=>{const{AtRule:N,Rule:b}=y(2895);let n=y(7149);function h(i,a){let t;try{n(c=>{t=c}).processSync(i)}catch(c){throw i.includes(":")?a?a.error("Missed semicolon"):c:a?a.error(c.message):c}return t.at(0)}function k(i,a){let t=!1;return i.each(c=>{if(c.type==="nesting"){let w=a.clone({});c.value!=="&"?c.replaceWith(h(c.value.replace("&",w.toString()))):c.replaceWith(w),t=!0}else"nodes"in c&&c.nodes&&k(c,a)&&(t=!0)}),t}function C(i,a){let t=[];for(let c of i.selectors){let w=h(c,i);for(let m of a.selectors){if(!m)continue;let S=h(m,a);k(S,w)||(S.prepend(n.combinator({value:" "})),S.prepend(w.clone({}))),t.push(S.toString())}}return t}function r(i,a){if(i.prev()?.type!=="comment")return a.after(i),i;let t=i.prev();return i.parent.toString().match(/[*]\/ *\n.*{/)?a.after(i).after(t):a.after(i),i}function e(i,a,t,c=!0){return a.length?(t=function(w,m,S){let E=new b({nodes:[],selector:w});return E.append(m),S.after(E),E}(i,a,t),c&&(a=[]),[t,a]):[t,a]}function o(i,a=""){let t=i.concat(a),c={};for(let w of t)c[w.replace(/^@/,"")]=!0;return c}function l(i){let a=i[v];if(a){let t,c,w,m,S=i.nodes,E=-1,L=function(R){let D=[],W=R.parent;for(;W&&W instanceof N;)D.push(W),W=W.parent;return D}(i);if(L.forEach((R,D)=>{if(a(R.name))t=R,E=D,w=m;else{let W=m;m=R.clone({nodes:[]}),W&&m.append(W),c=c||m}}),t?w?(c.append(S),t.after(w)):t.after(S):i.after(S),i.next()&&t){let R;L.slice(0,E+1).forEach((D,W,U)=>{let P=R;R=D.clone({nodes:[]}),P&&R.append(P);let M=[],j=(U[W-1]||i).next();for(;j;)M.push(j),j=j.next();R.append(M)}),R&&(w||S[S.length-1]).after(R)}}else i.after(i.nodes);i.remove()}const f=Symbol("rootRuleMergeSel"),v=Symbol("rootRuleEscapes"),I=Symbol("hasRootRule");Y.exports=(i={})=>{let a=o(["media","supports","layer","container","starting-style"],i.bubble),t=function(S){return function E(L,R,D,W=D){let U=[];if(R.each(P=>{P.type==="rule"&&D?W&&(P.selectors=C(L,P)):P.type==="atrule"&&P.nodes?S[P.name]?E(L,P,W):R[f]!==!1&&U.push(P):U.push(P)}),D&&U.length){let P=L.clone({nodes:[]});for(let M of U)P.append(M);R.prepend(P)}}}(a),c=o(["document","font-face","keyframes","-webkit-keyframes","-moz-keyframes"],i.unwrap),w=(i.rootRuleName||"at-root").replace(/^@/,""),m=i.preserveEmpty;return{Once(S){S.walkAtRules(w,E=>{(function(L){let{params:R}=L,{escapes:D,selector:W,type:U}=function(P){let M=(P=P.trim()).match(/^\((.*)\)$/);if(!M)return{selector:P,type:"basic"};let j=M[1].match(/^(with(?:out)?):(.+)$/);if(j){let J=j[1]==="with",Z=Object.fromEntries(j[2].trim().split(/\s+/).map(se=>[se,!0]));if(J&&Z.all)return{type:"noop"};let K=se=>!!Z[se];return Z.all?K=()=>!0:J&&(K=se=>se!=="all"&&!Z[se]),{escapes:K,type:"withrules"}}return{type:"unknown"}}(R);if(U==="unknown")throw L.error(`Unknown @${L.name} parameter ${JSON.stringify(R)}`);if(U==="basic"&&W){let P=new b({nodes:L.nodes,selector:W});L.removeAll(),L.append(P)}L[v]=D,L[f]=D?!D("all"):U==="noop"})(E),S[I]=!0})},postcssPlugin:"postcss-nested",RootExit(S){S[I]&&(S.walkAtRules(w,l),S[I]=!1)},Rule(S){let E=!1,L=S,R=!1,D=[];S.each(W=>{switch(W.type){case"atrule":[L,D]=e(S.selector,D,L),W.name===w?(E=!0,t(S,W,!0,W[f]),L=r(W,L)):a[W.name]?(R=!0,E=!0,t(S,W,!0),L=r(W,L)):c[W.name]?(R=!0,E=!0,t(S,W,!1),L=r(W,L)):R&&D.push(W);break;case"decl":R&&D.push(W);break;case"rule":[L,D]=e(S.selector,D,L),R=!0,E=!0,W.selectors=C(S,W),L=r(W,L)}}),e(S.selector,D,L,!1),E&&m!==!0&&(S.raws.semicolon=!0,S.nodes.length===0&&S.remove())}}},Y.exports.postcss=!0},2155:(Y,x,y)=>{y.d(x,{N:()=>n});var N=y(7282),b=y(9581);class n{constructor(k=0,C,r,e,o,l,f){this.count=0,this.isTemp=!1,this.toUpdate=!1,this.applicationId=b.B.getRandomizer(),this.type=(0,N.o)(),this.ofConcept=(0,N.o)(),this.toConcept=(0,N.o)(),this.id=k,this.ofTheConceptId=C,this.toTheConceptId=r,this.userId=e,this.typeId=o,this.ghostId=k,this.orderId=l,this.accessId=f,this.entryTimeStamp=(0,N.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date,this.typeCharacter=""}}},2202:(Y,x,y)=>{y.d(x,{W:()=>C});var N=y(6963),b=y(6731),n=y(205),h=y(5205),k=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function I(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(w){w(c)})).then(I,i)}a((l=l.apply(r,[])).next())})};class C{static addNodeToTree(e){if(this.root==null)return this.root=e,this.root;this.root=this.root.addNode(e,this.root,this.root.height)}static waitForDataToLoad(){return k(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isDataLoaded)return e("done");setTimeout(C.checkFlag,1e3,e)}static addConceptToTree(e){let o=new b.b(e.id,e,null,null),l=new b.b(e.characterValue,e,null,null);N.f.addNodeToTree(l),this.addNodeToTree(o)}static getNodeFromTree(e){return k(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(e,this.root):null})}static removeNodeFromTree(e){return k(this,void 0,void 0,function*(){if(this.root){let o=new Event(`${e}`);console.log("this is the fired event after delete",o),(0,h.dispatchIdEvent)(e),this.root=this.root.removeNode(this.root,e)}})}static getConceptListFromIds(e,o,l){return k(this,void 0,void 0,function*(){this.root&&this.root.checkIfIdsInNode(this.root,e,o,l)})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}C.root=null},2212:(Y,x,y)=>{y.d(x,{Ay:()=>r,N:()=>e});var N=y(1167),b=y(2615),n=y(5976),h=y(442),k=y(5205),C=function(o,l,f,v){return new(f||(f=Promise))(function(I,i){function a(w){try{c(v.next(w))}catch(m){i(m)}}function t(w){try{c(v.throw(w))}catch(m){i(m)}}function c(w){var m;w.done?I(w.value):(m=w.value,m instanceof f?m:new f(function(S){S(m)})).then(a,t)}c((v=v.apply(o,[])).next())})};function r(o,l,f,v,I,i,a){return C(this,void 0,void 0,function*(){let t=yield n.B.getId(),c=new Date,w=new Date,m=new b.j(t,l,v,f,I,o,i,!0,c,w,a);return m.isTemp=!1,h.Y.AddConcept(m),m})}function e(o,l,f,v,I,i,a){return C(this,void 0,void 0,function*(){let t=yield n.B.getId(),c=new Date,w=new Date,m=new b.j(t,l,v,f,I,o,i,!1,c,w,a);return k.ConceptsData.AddConcept(m),(0,N.Y)([m]),m})}},2289:(Y,x,y)=>{y.d(x,{$S:()=>e,L0:()=>o,WC:()=>l});var N=y(8675),b=y(6058),n=y(5205),h=y(1863);y(3518);var k=y(843),C=y(4818),r=function(f,v,I,i){return new(I||(I=Promise))(function(a,t){function c(S){try{m(i.next(S))}catch(E){t(E)}}function w(S){try{m(i.throw(S))}catch(E){t(E)}}function m(S){var E;S.done?a(S.value):(E=S.value,E instanceof I?E:new I(function(L){L(E)})).then(c,w)}m((i=i.apply(f,v||[])).next())})};function e(f,v){var I=arguments;return r(this,void 0,void 0,function*(){const i=n.Logger.logfunction("DeleteConnectionByType",I)||{};if(n.serviceWorker){i.serviceWorker=!0;try{const S=yield(0,n.sendMessage)("DeleteConnectionByType",{id:f,linker:v});return n.Logger.logUpdate(i),S.data}catch(S){console.error("DeleteConnectionByType sw error: ",S),(0,h.ey)(i,"DeleteConnectionByType",S),(0,n.handleServiceWorkerException)(S)}}let a=yield(0,N.l)(f);for(let S=0;S<a.length;S++)n.ConnectionData.AddConnection(a[S]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=yield(0,n.GetConceptByCharacter)(v),w=[];for(let S=0;S<t.length;S++)t[S].typeId==c.id&&w.push(t[S]);let m=!1;for(let S=0;S<w.length;S++)m=yield(0,n.DeleteConnectionById)(w[S].id);return n.Logger.logUpdate(i),m})}function o(f,v){var I=arguments;return r(this,void 0,void 0,function*(){const i=n.Logger.logfunction("DeleteConnectionByTypeBulk",I)||{};if(n.serviceWorker){i.serviceWorker=!0;try{const m=yield(0,n.sendMessage)("DeleteConnectionByTypeBulk",{id:f,linkers:v});return n.Logger.logUpdate(i),m.data}catch(m){console.error("DeleteConnectionByTypeBulk sw error: ",m),(0,h.ey)(i,"DeleteConnectionByTypeBulk",m),(0,n.handleServiceWorkerException)(m)}}let a=yield(0,N.l)(f);for(let m=0;m<a.length;m++)n.ConnectionData.AddConnection(a[m]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=[];c=yield(0,k.Hi)(v);let w=[];console.log("this is all the connections for deleting taken",t,c,v);for(let m=0;m<t.length;m++)for(let S=0;S<c.length;S++)t[m].typeId==c[S].id&&w.push(t[m].id);return console.log("these are the to delete",w),n.Logger.logUpdate(i),yield(0,C.E)(w)})}function l(f,v){return r(this,arguments,void 0,function*(I,i,a=!1){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetAllTheConnectionsByTypeAndOfTheConcept",{id:I,linker:i,reverse:a})).data}catch(c){console.error("GetAllTheConnectionsByTypeAndOfTheConcept sw error: ",c),(0,n.handleServiceWorkerException)(c)}let t=[];if(a){let c=yield(0,b.W)(I),w=yield(0,n.MakeTheTypeConceptApi)(i,999);for(let m=0;m<c.length;m++)c[m].typeId==w.id&&t.push(c[m])}else{let c=yield(0,N.l)(I);for(let S=0;S<c.length;S++)n.ConnectionData.AddConnection(c[S]);let w=yield n.ConnectionData.GetConnectionsOfConcept(I),m=yield(0,n.GetConceptByCharacter)(i);for(let S=0;S<w.length;S++)w[S].typeId==m.id&&t.push(w[S])}return t})}},2299:(Y,x,y)=>{y.d(x,{B:()=>N});class N{constructor(n){this.id=1,this.isOnlineSync=!1,this.isOnlineSync=n}}},2515:(Y,x,y)=>{y.d(x,{x:()=>N});class N{constructor(n,h,k,C){this.variants=[],this.height=1,this.key=n,this.value=h,this.leftNode=k,this.rightNode=C,this.currentNode=null}addCurrentNode(n,h){return h==null?h=n:(n.value.typeId!=h.value.typeId&&(h.currentNode=this.addCurrentNode(n,h.currentNode)),h)}addCurrentNodeType(n,h){if(h==null)return n;var k=!1;for(let C=0;C<h.variants.length;C++)h.variants[C].value.id==n.value.id&&(k=!0);return k||h.variants.push(n),h}addNode(n,h,k){if(h==null)return n;var C=h.leftNode,r=h.rightNode;if(h.key>n.key)h.leftNode=this.addNode(n,C,k);else{if(!(h.key<n.key))return h;h.rightNode=this.addNode(n,r,k)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}return h}addCharacterNode(n,h,k){if(n.value.characterValue!=""){if(h==null)return n;var C=h.leftNode,r=h.rightNode;if(h.key>n.key)h.leftNode=this.addCharacterNode(n,C,k);else{if(!(h.key<n.key))return h.key==n.key&&h.key!=""&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),h;h.rightNode=this.addCharacterNode(n,r,k)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}addTypeNode(n,h,k){if(n.value.typeId!=0){if(h==null)return n;var C=h.leftNode,r=h.rightNode;if(h.key>n.key)h.leftNode=this.addTypeNode(n,C,k);else{if(!(h.key<n.key))return h.key==n.key&&h.key!=0&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),h;h.rightNode=this.addTypeNode(n,r,k)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}rightRotate(n){if(n){let h=n.leftNode;if(h){let k=h.rightNode;return n.leftNode=k,h.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,h}}return n}leftRotate(n){if(n){let h=n.rightNode;if(h){let k=h.leftNode;return h.leftNode=n,n.rightNode=k,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(n.rightNode))+1,h}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return n==null?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getFromNode(n,h.leftNode):n>h.key?this.getFromNode(n,h.rightNode):h)}updateNodeSyncStatus(n,h,k){if(k){if(n==k.key){let C=k.value;return C.isSynced=h,k.value=C,k}return n<k.key?this.updateNodeSyncStatus(n,h,k.leftNode):n>k.key?this.updateNodeSyncStatus(n,h,k.rightNode):k}return k}getCharacterFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getCharacterFromNode(n,h.leftNode):n>h.key?this.getCharacterFromNode(n,h.rightNode):h)}getFromNodeWithCharacterAndType(n,h,k){if(n=`${n}`,k){if(n==k.key){if(n==k.value.characterValue&&h==k.value.typeId)return k;for(let C=0;C<k.variants.length;C++)if(k.variants[C].value.typeId==h)return k.variants[C]}else{if(n<k.key)return this.getFromNodeWithCharacterAndType(n,h,k.leftNode);if(n>k.key)return this.getFromNodeWithCharacterAndType(n,h,k.rightNode)}return null}return k}getFromNodeWithCharacterAndCategory(n,h,k){if(n=`${n}`,k){if(n==k.key){if(n==k.value.characterValue&&h==k.value.categoryId)return k;for(let C=0;C<k.variants.length;C++)if(k.variants[C].value.categoryId==h)return k.variants[C]}else{if(n<k.key)return this.getFromNodeWithCharacterAndCategory(n,h,k.leftNode);if(n>k.key)return this.getFromNodeWithCharacterAndCategory(n,h,k.rightNode)}return null}return k}removeNode(n,h){if(n==null)return n;if(n.key>h)return n.leftNode=this.removeNode(n.leftNode,h),n;if(n.key<h)return n.rightNode=this.removeNode(n.rightNode,h),n;if(n.leftNode==null){let C=n.rightNode;return n=null,C}if(n.rightNode==null){let C=n.leftNode;return n=null,C}var k=this.inOrderSuccessor(n.rightNode);return n.value=k.value,n.key=k.key,n.variants=k.variants,n.currentNode=k.currentNode,n.rightNode=this.removeNode(n.rightNode,k.key),n}removeNodeWithVariants(n,h,k){if(n==null)return n;if(n.key>h)return n.leftNode=this.removeNodeWithVariants(n.leftNode,h,k),n;if(n.key<h)return n.rightNode=this.removeNodeWithVariants(n.rightNode,h,k),n;if(n.variants.length>0){if(n.value.id==k){var C=n.variants[0];if(C)return n.value=C.value,n.key=C.key,n.currentNode=C.currentNode,n.variants.splice(0,1),n}else for(let e=0;e<n.variants.length;e++)if(k==n.variants[e].value.id)return n.variants.splice(e,1),n}if(n.leftNode==null){let e=n.rightNode;return n=null,e}if(n.rightNode==null){let e=n.leftNode;return n=null,e}var r=this.inOrderSuccessor(n.rightNode);return n.value=r.value,n.key=r.key,n.variants=r.variants,n.currentNode=r.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,r.key,k),n}countNodeBelow(n){return n==null?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;n.leftNode!=null;)n=n.leftNode;return n}}},2615:(Y,x,y)=>{y.d(x,{j:()=>b});var N=y(5205);class b{constructor(h,k,C,r,e,o,l,f=!1,v,I,i){this.count=0,this.typeCharacter="",this.referent=null,this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=N.BaseUrl.getRandomizer(),this.x=0,this.y=0,this.id=h,this.userId=k,this.typeId=C,this.ghostId=h,this.categoryId=r,this.referentId=e,this.characterValue=`${o}`,this.accessId=l,this.typeCharacter=i,this.type=null,this.isNew=f,this.entryTimeStamp=v,this.updatedTimeStamp=I}getType(){console.log(this.typeId)}}},2648:(Y,x,y)=>{x.__esModule=!0,x.FIELDS=void 0,x.default=function(f){var v,I,i,a,t,c,w,m,S,E,L,R,D=[],W=f.css.valueOf(),U=W.length,P=-1,M=1,j=0,J=0;function Z(K,se){if(!f.safe)throw f.error("Unclosed "+K,M,j-P,j);m=(W+=se).length-1}for(;j<U;){switch((v=W.charCodeAt(j))===n.newline&&(P=j,M+=1),v){case n.space:case n.tab:case n.newline:case n.cr:case n.feed:m=j;do m+=1,(v=W.charCodeAt(m))===n.newline&&(P=m,M+=1);while(v===n.space||v===n.newline||v===n.tab||v===n.cr||v===n.feed);R=n.space,i=M,I=m-P-1,J=m;break;case n.plus:case n.greaterThan:case n.tilde:case n.pipe:m=j;do m+=1,v=W.charCodeAt(m);while(v===n.plus||v===n.greaterThan||v===n.tilde||v===n.pipe);R=n.combinator,i=M,I=j-P,J=m;break;case n.asterisk:case n.ampersand:case n.bang:case n.comma:case n.equals:case n.dollar:case n.caret:case n.openSquare:case n.closeSquare:case n.colon:case n.semicolon:case n.openParenthesis:case n.closeParenthesis:R=v,i=M,I=j-P,J=(m=j)+1;break;case n.singleQuote:case n.doubleQuote:L=v===n.singleQuote?"'":'"',m=j;do for(a=!1,(m=W.indexOf(L,m+1))===-1&&Z("quote",L),t=m;W.charCodeAt(t-1)===n.backslash;)t-=1,a=!a;while(a);R=n.str,i=M,I=j-P,J=m+1;break;default:v===n.slash&&W.charCodeAt(j+1)===n.asterisk?((m=W.indexOf("*/",j+2)+1)===0&&Z("comment","*/"),(c=(w=W.slice(j,m+1).split(`
`)).length-1)>0?(S=M+c,E=m-w[c].length):(S=M,E=P),R=n.comment,M=S,i=S,I=m-E):v===n.slash?(R=v,i=M,I=j-P,J=(m=j)+1):(m=o(W,j),R=n.word,i=M,I=m-P),J=m+1}D.push([R,M,j-P,i,I,j,J]),E&&(P=E,E=null),j=J}return D};var N,b,n=function(f,v){if(f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var I=h(v);if(I&&I.has(f))return I.get(f);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in f)if(t!=="default"&&Object.prototype.hasOwnProperty.call(f,t)){var c=a?Object.getOwnPropertyDescriptor(f,t):null;c&&(c.get||c.set)?Object.defineProperty(i,t,c):i[t]=f[t]}return i.default=f,I&&I.set(f,i),i}(y(71));function h(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,I=new WeakMap;return(h=function(i){return i?I:v})(f)}for(var k=((N={})[n.tab]=!0,N[n.newline]=!0,N[n.cr]=!0,N[n.feed]=!0,N),C=((b={})[n.space]=!0,b[n.tab]=!0,b[n.newline]=!0,b[n.cr]=!0,b[n.feed]=!0,b[n.ampersand]=!0,b[n.asterisk]=!0,b[n.bang]=!0,b[n.comma]=!0,b[n.colon]=!0,b[n.semicolon]=!0,b[n.openParenthesis]=!0,b[n.closeParenthesis]=!0,b[n.openSquare]=!0,b[n.closeSquare]=!0,b[n.singleQuote]=!0,b[n.doubleQuote]=!0,b[n.plus]=!0,b[n.pipe]=!0,b[n.tilde]=!0,b[n.greaterThan]=!0,b[n.equals]=!0,b[n.dollar]=!0,b[n.caret]=!0,b[n.slash]=!0,b),r={},e=0;e<22;e++)r["0123456789abcdefABCDEF".charCodeAt(e)]=!0;function o(f,v){var I,i=v;do{if(I=f.charCodeAt(i),C[I])return i-1;I===n.backslash?i=l(f,i)+1:i++}while(i<f.length);return i-1}function l(f,v){var I=v,i=f.charCodeAt(I+1);if(!k[i])if(r[i]){var a=0;do I++,a++,i=f.charCodeAt(I+1);while(r[i]&&a<6);a<6&&i===n.space&&I++}else I++;return I}x.FIELDS={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6}},2739:()=>{},2803:(Y,x,y)=>{y.d(x,{x:()=>C});var N=y(8286),b=y(9581),n=y(1863),h=y(5205),k=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function I(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(w){w(c)})).then(I,i)}a((l=l.apply(r,[])).next())})};function C(r,e,o){var l=arguments;return k(this,void 0,void 0,function*(){const f=h.Logger.logfunction("GetCompositionConnectionsBetweenTwoConcepts",l)||{};var v=[];try{if(h.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,h.sendMessage)("GetCompositionConnectionsBetweenTwoConcepts",{ofConceptId:r,toConcept:e,mainKey:o});return h.Logger.logUpdate(f),t.data}catch(t){console.error("GetCompositionConnectionsBetweenTwoConcepts sw error: ",t),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",t),(0,h.handleServiceWorkerException)(t)}}var I=new FormData;I.append("ofConceptId",r.toString()),I.append("mainKey",o.toString()),I.append("toConceptId",e.toString());const a=yield fetch(b.B.GetCompositionConnectionBetweenTwoConceptsUrl(),{method:"POST",body:I,redirect:"follow"});if(a.ok){const t=yield a.json();for(var i=0;i<t.length;i++)N.d.AddConnection(t[i]),v.push(t[i]);h.Logger.logUpdate(f)}else console.log("Get composition connection between two concepts",a.status),(0,n.ry)(a)}catch(a){a instanceof Error?console.log("Get composition connection between two concepts error message: ",a.message):console.log("Get composition connection between two concepts unexpected error: ",a),(0,n.Mb)(a,b.B.GetCompositionConnectionBetweenTwoConceptsUrl()),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",a)}return v})}},2832:(Y,x,y)=>{y.d(x,{j:()=>C});var N=y(5205),b=y(9581),n=y(1863),h=y(3518),k=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function I(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(w){w(c)})).then(I,i)}a((l=l.apply(r,e||[])).next())})};function C(r){var e=arguments;return k(this,arguments,void 0,function*(o,l=""){const f=N.Logger.logfunction("SearchLinkMultipleApi",e);let v=performance.now();var I=(0,h.ab)("application/json",l);const i=b.B.SearchLinkMultipleAllApiUrl(),a=JSON.stringify(o);try{const t=yield fetch(i,{method:"POST",headers:I,body:a});if(t.ok){let c=yield t.json();return N.Logger.logUpdate(f),c}return(0,n.ry)(t),console.log("This is the searching multiple error",t.status),N.Logger.logError(v,"unknown","search","unknown",void 0,t.status,t,"SearchLinkMultipleApi",[o,l],"unknown",void 0),[]}catch(t){console.log("This is the searching multiple error",t),N.Logger.logError(v,"unknown","search","unknown",void 0,500,t,"SearchLinkMultipleApi",[o,l],"unknown",void 0),(0,n.Mb)(t,i),(0,n.ey)(f,"SearchLinkMultipleApi",t)}})}},2895:(Y,x,y)=>{let N=y(396),b=y(9371),n=y(7793),h=y(3614),k=y(5238),C=y(145),r=y(3438),e=y(1106),o=y(6966),l=y(1752),f=y(3152),v=y(9577),I=y(6846),i=y(3717),a=y(5644),t=y(1534),c=y(3303),w=y(38);function m(...S){return S.length===1&&Array.isArray(S[0])&&(S=S[0]),new I(S)}m.plugin=function(S,E){let L,R=!1;function D(...W){console&&console.warn&&!R&&(R=!0,console.warn(S+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),Vr.LANG&&Vr.LANG.startsWith("cn")&&console.warn(S+`: éé¢ postcss.plugin è¢«å¼ç¨. è¿ç§»æå:
https://www.w3ctech.com/topic/2226`));let U=E(...W);return U.postcssPlugin=S,U.postcssVersion=new I().version,U}return Object.defineProperty(D,"postcss",{get:()=>(L||(L=D()),L)}),D.process=function(W,U,P){return m([D(P)]).process(W,U)},D},m.stringify=c,m.parse=v,m.fromJSON=r,m.list=l,m.comment=S=>new b(S),m.atRule=S=>new N(S),m.decl=S=>new k(S),m.rule=S=>new t(S),m.root=S=>new a(S),m.document=S=>new C(S),m.CssSyntaxError=h,m.Declaration=k,m.Container=n,m.Processor=I,m.Document=C,m.Comment=b,m.Warning=w,m.AtRule=N,m.Result=i,m.Input=e,m.Rule=t,m.Root=a,m.Node=f,o.registerPostcss(m),Y.exports=m,m.default=m},2918:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function h(C,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(C,r)}var k=function(C){var r,e;function o(l){var f;return(f=C.call(this,l)||this).type=n.NESTING,f.value="&",f}return e=C,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(b.default);x.default=k,Y.exports=x.default},3026:(Y,x,y)=>{y.d(x,{I:()=>v});var N=y(3655),b=y(2202),n=y(6963),h=y(5457),k=y(7282),C=y(5205);class r{constructor(i,a,t,c){this.height=1,this.key=i,this.value=a,this.leftNode=t,this.rightNode=c}addNode(i,a,t){if(a==null)return i;let c=a.leftNode,w=a.rightNode;if(a.key>i.key)a.leftNode=this.addNode(i,c,t);else{if(!(a.key<i.key))return a;a.rightNode=this.addNode(i,w,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let m=this.getBalanceFactor(a);if(m>1&&a.leftNode){if(i.key<a.leftNode.key)return this.rightRotate(a);if(i.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(m<-1&&a.rightNode){if(i.key>a.rightNode.key)return this.leftRotate(a);if(i.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}rightRotate(i){if(i){let a=i.leftNode;if(a){let t=a.rightNode;return i.leftNode=t,a.rightNode=i,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode))+1,a}}return i}leftRotate(i){if(i){let a=i.rightNode;if(a){let t=a.leftNode;return a.leftNode=i,i.rightNode=t,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(i.rightNode))+1,a}}return i}getHeight(i){return i?i.height:0}getBalanceFactor(i){return i==null?0:this.getHeight(i.leftNode)-this.getHeight(i.rightNode)}getFromNode(i,a){return a&&(i==a.key?a:i<a.key?this.getFromNode(i,a.leftNode):i>a.key?this.getFromNode(i,a.rightNode):a)}removeNode(i,a){if(i==null)return i;if(i.key>a)return i.leftNode=this.removeNode(i.leftNode,a),i;if(i.key<a)return i.rightNode=this.removeNode(i.rightNode,a),i;if(i.leftNode==null){let t=i.rightNode;return i=null,t}if(i.rightNode==null){let t=i.leftNode;return i=null,t}{let t=this.inOrderSuccessor(i.rightNode);return i.value=t.value,i.key=t.key,i.rightNode=this.removeNode(i.rightNode,t.key),i}}countNodeBelow(i){return i==null?0:1+this.countNodeBelow(i.leftNode)+this.countNodeBelow(i.rightNode)}inOrderSuccessor(i){for(;i.leftNode!=null;)i=i.leftNode;return i}}var e=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,[])).next())})};class o{static addNodeToTree(i){if(this.root==null)return this.root=i,this.root;this.root=this.root.addNode(i,this.root,this.root.height)}static addWidgetToTree(i){let a=new r(i.widgetId,i,null,null);this.addNodeToTree(a)}static getNodeFromTree(i){return e(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(i,this.root):null})}static removeNodeFromTree(i){return e(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,i))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}o.root=null;class l{constructor(){this.widgetId=0,this.mainId=0,this.conceptIds=[],this.linkers=[],this.reverse=[],this.mainCompositionIds=[],this.countinfo=[]}}var f=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,[])).next())})};class v{constructor(){this.name="conceptsArray"}static CheckContains(i){for(var a=!1,t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].id==i.id&&(a=!0);return a}static AddNpc(i){this.NPC.includes(i)||(this.NPC.length>10&&(this.NPC=[]),this.NPC.push(i))}static GetNpc(i){return!!this.NPC.includes(i)}static AddConceptToStorage(i){i.id>0&&(0,N.kH)("concept",i)}static GetConceptBulkData(i,a,t){return f(this,void 0,void 0,function*(){yield b.W.getConceptListFromIds(i,a,t)})}static AddWidget(i){if(C.serviceWorker)try{(0,C.sendMessage)("ConceptsData__AddWidget",{widgetDetails:i})}catch(a){console.error("Concept Data, Add Widget sw error: ",a),(0,C.handleServiceWorkerException)(a)}i.widgetId>0&&o.addWidgetToTree(i)}static AddConcept(i){if(C.serviceWorker)try{(0,C.sendMessage)("ConceptsData__AddConcept",{concept:i})}catch(a){console.error("Concept Data, Add Concpet sw error: ",a),(0,C.handleServiceWorkerException)(a)}i.id>0&&(b.W.addConceptToTree(i),h.c.addConceptToTree(i))}static AddConceptToMemory(i){i.id>0&&(b.W.addConceptToTree(i),h.c.addConceptToTree(i))}static AddConceptTemporary(i){var a=this.CheckContains(i);this.conceptDictionary[i.id]=i,a&&this.RemoveConcept(i),this.conceptsArray.push(i)}static RemoveConcept(i){for(var a=0;a<this.conceptsArray.length;a++)this.conceptsArray[a].id==i.id&&this.conceptsArray.splice(a,1);(0,N.wh)("concept",i.id)}static GetWidget(i){return f(this,void 0,void 0,function*(){let a=new l;if(C.serviceWorker)try{return(yield(0,C.sendMessage)("ConceptsData__GetWidget",{id:i})).data}catch(c){console.error("Concept Data, Get Widget sw error: ",c),(0,C.handleServiceWorkerException)(c)}let t=yield o.getNodeFromTree(i);return t!=null&&(a=t.value),a})}static RemoveWidget(i){return f(this,void 0,void 0,function*(){if(C.serviceWorker)try{return(yield(0,C.sendMessage)("ConceptsData__RemoveWidget",{id:i})).data}catch(a){console.error("Concept Data, Remove Widget sw error: ",a),(0,C.handleServiceWorkerException)(a)}yield o.removeNodeFromTree(i)})}static GetConcept(i){return f(this,void 0,void 0,function*(){if(C.serviceWorker)try{return(yield(0,C.sendMessage)("ConceptsData__GetConcept",{id:i})).data}catch(w){console.error("Concept Data, Get Concpet sw error: ",w),(0,C.handleServiceWorkerException)(w)}if(i==0||i==null||i==null)return(0,k.o)();var a=(0,k.o)(),t=yield b.W.getNodeFromTree(i);if(t?.value){var c=t.value;c&&(a=c)}return a})}static GetConceptByCharacter(i){return f(this,void 0,void 0,function*(){var a=(0,k.o)(),t=n.f.getNodeFromTree(i);return t&&(a=t.value),a})}static GetConceptByCharacterUpdated(i){return f(this,void 0,void 0,function*(){var a=(0,k.o)(),t=n.f.getNodeFromTree(i);return t&&(a=t.value),a})}static GetConceptByCharacterAndTypeLocal(i,a){return f(this,void 0,void 0,function*(){return(0,k.o)(),yield h.c.getTypeVariantsWithCharacterValueNew(i,a)})}static GetConceptByCharacterAndCategoryLocal(i,a){return f(this,void 0,void 0,function*(){var t=(0,k.o)(),c=yield n.f.getCharacterAndCategoryFromTree(i,a);return c&&(t=c.value),t})}static GetConceptsByTypeId(i){let a=[];for(var t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].typeId==i&&a.push(this.conceptsArray[t]);return a}static GetConceptsByTypeIdAndUser(i,a){var t=arguments;return f(this,void 0,void 0,function*(){if(C.Logger.logfunction("ConceptsData.GetConceptsByTypeIdAndUser",t),C.serviceWorker)try{return(yield(0,C.sendMessage)("ConceptsData__GetConceptsByTypeIdAndUser",{typeId:i,userId:a})).data}catch(w){console.error("Concept Data, Get Concpet sw error:",w),(0,C.handleServiceWorkerException)(w)}let c=[];return c=yield h.c.getTypeVariantsFromTreeWithUserIdNew(i,a),c})}static GetBinaryCharacterTree(){return n.f.characterRoot}getName(){return this.name}}v.conceptsArray=[],v.NPC=[],v.conceptDictionary=[]},3075:(Y,x,y)=>{y.d(x,{Ay:()=>e,EO:()=>o,xd:()=>l});var N=y(205),b=y(9736),n=y(5257),h=y(9003),k=y(5205),C=y(1863),r=function(f,v,I,i){return new(I||(I=Promise))(function(a,t){function c(S){try{m(i.next(S))}catch(E){t(E)}}function w(S){try{m(i.throw(S))}catch(E){t(E)}}function m(S){var E;S.done?a(S.value):(E=S.value,E instanceof I?E:new I(function(L){L(E)})).then(c,w)}m((i=i.apply(f,[])).next())})};function e(){return r(this,void 0,void 0,function*(){const f=k.Logger.logfunction("CreateLocalBinaryTreeFromIndexDb");try{let v=[];if(Array.isArray(v))for(let I=0;I<v.length;I++){let i=v[I];b.v.AddConceptToMemory(i)}N.B.isLocalDataLoaded=!0,N.B.isLocalTypeLoaded=!0,N.B.isLocalCharacterLoaded=!0,k.Logger.logUpdate(f)}catch(v){yield(0,k.DelayFunctionExecution)(2e3,e());let I={message:"Cannot create local binary tree from index db",data:v,ok:!1,status:400};throw(0,C.ey)(f,"CreateLocalBinaryTreeFromIndexDb",v),I}})}function o(){return r(this,void 0,void 0,function*(){var f;const v=k.Logger.logfunction("PopulateTheLocalConceptsToMemory");try{yield(f=navigator.locks)===null||f===void 0?void 0:f.request("dblock",I=>r(this,void 0,void 0,function*(){let i=yield(0,h.S5)("localid");if(Array.isArray(i)){if(i[0]){let a=i[0].value;if(a)n.R.AddConceptId(i[0]),yield(0,h.kH)("localid",{id:0,value:a-10});else{a=-Math.floor(1e8*Math.random());let t={id:0,value:a},c={id:0,value:a-10};n.R.AddConceptId(t),yield(0,h.kH)("localid",c)}}i[2]}})),k.Logger.logUpdate(v)}catch(I){let i={message:"Cannot populate Local Ids from the Index Db",data:I,ok:!1,status:400};throw(0,C.ey)(v,"PopulateTheLocalConceptsToMemory",I),i}})}function l(){return r(this,void 0,void 0,function*(){var f;const v=k.Logger.logfunction("PopulateTheLocalConnectionToMemory");try{yield(f=navigator.locks)===null||f===void 0?void 0:f.request("dblock",I=>r(this,void 0,void 0,function*(){let i=yield(0,h.S5)("localid");if(Array.isArray(i)){if(i[1]){let a=i[1].value;if(a)n.R.AddConnectionId(i[1]),yield(0,h.kH)("localid",{id:1,value:a-10});else{a=-Math.floor(1e8*Math.random());let t={id:0,value:a},c={id:0,value:a-10};n.R.AddConnectionId(t),yield(0,h.kH)("localid",c)}}i[2]}})),k.Logger.logUpdate(v)}catch(I){let i={message:"Cannot populate Local Ids from the Index Db",data:I,ok:!1,status:400};throw(0,C.ey)(v,"PopulateTheLocalConnectionToMemory",I),i}})}},3077:(Y,x,y)=>{y.d(x,{A:()=>r});var N=y(5205),b=y(2615),n=y(9736),h=y(5257),k=y(9700),C=function(e,o,l,f){return new(l||(l=Promise))(function(v,I){function i(c){try{t(f.next(c))}catch(w){I(w)}}function a(c){try{t(f.throw(c))}catch(w){I(w)}}function t(c){var w;c.done?v(c.value):(w=c.value,w instanceof l?w:new l(function(m){m(w)})).then(i,a)}t((f=f.apply(e,o||[])).next())})};function r(e,o,l,f,v,I){return C(this,arguments,void 0,function*(i,a,t,c,w,m,S=!1,E=0,L={concepts:[],connections:[]}){var R,D,W,U;let P=performance.now();try{if(N.serviceWorker)try{const se=yield(0,N.sendMessage)("CreateTheConceptLocal",{referent:i,typecharacter:a,userId:t,categoryId:c,typeId:w,accessId:m,isComposition:S,referentId:E});return!((D=(R=se?.actions)===null||R===void 0?void 0:R.concepts)===null||D===void 0)&&D.length&&(L.concepts=JSON.parse(JSON.stringify(se.actions.concepts))),!((U=(W=se?.actions)===null||W===void 0?void 0:W.connections)===null||U===void 0)&&U.length&&(L.connections=JSON.parse(JSON.stringify(se.actions.connections))),se.data}catch(se){console.error("CreateTheConceptLocal error sw: ",se),(0,N.handleServiceWorkerException)(se)}let M=yield h.R.getConceptId(),j=!0,J=new Date,Z=new Date;if(i=="the")return new b.j(1,999,5,5,E,i,m,j,J,Z,a);let K=new b.j(M,t,w,c,E,i,m,j,J,Z,a);return K.isTemp=!0,K.isComposition=S,n.v.AddConcept(K),L.concepts.push(K),K}catch(M){throw k.V.logError(P,t,"create","unknown","unknown",500,void 0,"createTheConceptLocal",[i,a,t,c,w,m,S],void 0),M}})}},3130:(Y,x,y)=>{y.d(x,{BG:()=>C,SL:()=>r,XZ:()=>k,ZJ:()=>n,iw:()=>h,pU:()=>e,y0:()=>b,yv:()=>N});const N=1,b=2,n=3,h=4,k=5,C=6,r=7,e=8},3152:(Y,x,y)=>{let N=y(3614),b=y(7668),n=y(3303),{isClean:h,my:k}=y(4151);function C(o,l){let f=new o.constructor;for(let v in o){if(!Object.prototype.hasOwnProperty.call(o,v)||v==="proxyCache")continue;let I=o[v],i=typeof I;v==="parent"&&i==="object"?l&&(f[v]=l):v==="source"?f[v]=I:Array.isArray(I)?f[v]=I.map(a=>C(a,f)):(i==="object"&&I!==null&&(I=C(I)),f[v]=I)}return f}function r(o,l){if(l&&l.offset!==void 0)return l.offset;let f=1,v=1,I=0;for(let i=0;i<o.length;i++){if(v===l.line&&f===l.column){I=i;break}o[i]===`
`?(f=1,v+=1):f+=1}return I}class e{get proxyOf(){return this}constructor(l={}){this.raws={},this[h]=!1,this[k]=!0;for(let f in l)if(f==="nodes"){this.nodes=[];for(let v of l[f])typeof v.clone=="function"?this.append(v.clone()):this.append(v)}else this[f]=l[f]}addToError(l){if(l.postcssNode=this,l.stack&&this.source&&/\n\s{4}at /.test(l.stack)){let f=this.source;l.stack=l.stack.replace(/\n\s{4}at /,`$&${f.input.from}:${f.start.line}:${f.start.column}$&`)}return l}after(l){return this.parent.insertAfter(this,l),this}assign(l={}){for(let f in l)this[f]=l[f];return this}before(l){return this.parent.insertBefore(this,l),this}cleanRaws(l){delete this.raws.before,delete this.raws.after,l||delete this.raws.between}clone(l={}){let f=C(this);for(let v in l)f[v]=l[v];return f}cloneAfter(l={}){let f=this.clone(l);return this.parent.insertAfter(this,f),f}cloneBefore(l={}){let f=this.clone(l);return this.parent.insertBefore(this,f),f}error(l,f={}){if(this.source){let{end:v,start:I}=this.rangeBy(f);return this.source.input.error(l,{column:I.column,line:I.line},{column:v.column,line:v.line},f)}return new N(l)}getProxyProcessor(){return{get:(l,f)=>f==="proxyOf"?l:f==="root"?()=>l.root().toProxy():l[f],set:(l,f,v)=>(l[f]===v||(l[f]=v,f!=="prop"&&f!=="value"&&f!=="name"&&f!=="params"&&f!=="important"&&f!=="text"||l.markDirty()),!0)}}markClean(){this[h]=!0}markDirty(){if(this[h]){this[h]=!1;let l=this;for(;l=l.parent;)l[h]=!1}}next(){if(!this.parent)return;let l=this.parent.index(this);return this.parent.nodes[l+1]}positionBy(l={}){let f=this.source.start;if(l.index)f=this.positionInside(l.index);else if(l.word){let v="document"in this.source.input?this.source.input.document:this.source.input.css,I=v.slice(r(v,this.source.start),r(v,this.source.end)).indexOf(l.word);I!==-1&&(f=this.positionInside(I))}return f}positionInside(l){let f=this.source.start.column,v=this.source.start.line,I="document"in this.source.input?this.source.input.document:this.source.input.css,i=r(I,this.source.start),a=i+l;for(let t=i;t<a;t++)I[t]===`
`?(f=1,v+=1):f+=1;return{column:f,line:v,offset:a}}prev(){if(!this.parent)return;let l=this.parent.index(this);return this.parent.nodes[l-1]}rangeBy(l={}){let f="document"in this.source.input?this.source.input.document:this.source.input.css,v={column:this.source.start.column,line:this.source.start.line,offset:r(f,this.source.start)},I=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:r(f,this.source.end)+1}:{column:v.column+1,line:v.line,offset:v.offset+1};if(l.word){let i=f.slice(r(f,this.source.start),r(f,this.source.end)).indexOf(l.word);i!==-1&&(v=this.positionInside(i),I=this.positionInside(i+l.word.length))}else l.start?v={column:l.start.column,line:l.start.line,offset:r(f,l.start)}:l.index&&(v=this.positionInside(l.index)),l.end?I={column:l.end.column,line:l.end.line,offset:r(f,l.end)}:typeof l.endIndex=="number"?I=this.positionInside(l.endIndex):l.index&&(I=this.positionInside(l.index+1));return(I.line<v.line||I.line===v.line&&I.column<=v.column)&&(I={column:v.column+1,line:v.line,offset:v.offset+1}),{end:I,start:v}}raw(l,f){return new b().raw(this,l,f)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...l){if(this.parent){let f=this,v=!1;for(let I of l)I===this?v=!0:v?(this.parent.insertAfter(f,I),f=I):this.parent.insertBefore(f,I);v||this.remove()}return this}root(){let l=this;for(;l.parent&&l.parent.type!=="document";)l=l.parent;return l}toJSON(l,f){let v={},I=f==null;f=f||new Map;let i=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let t=this[a];if(Array.isArray(t))v[a]=t.map(c=>typeof c=="object"&&c.toJSON?c.toJSON(null,f):c);else if(typeof t=="object"&&t.toJSON)v[a]=t.toJSON(null,f);else if(a==="source"){if(t==null)continue;let c=f.get(t.input);c==null&&(c=i,f.set(t.input,i),i++),v[a]={end:t.end,inputId:c,start:t.start}}else v[a]=t}return I&&(v.inputs=[...f.keys()].map(a=>a.toJSON())),v}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(l=n){l.stringify&&(l=l.stringify);let f="";return l(this,v=>{f+=v}),f}warn(l,f,v={}){let I={node:this};for(let i in v)I[i]=v[i];return l.warn(f,I)}}Y.exports=e,e.default=e},3278:(Y,x,y)=>{y.d(x,{b:()=>N});class N{static setSession(n){n&&(N.sessionId=n)}}N.BearerAccessToken="",N.sessionId=998},3295:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N=n(y(8937)),b=y(9606);function n(r){return r&&r.__esModule?r:{default:r}}function h(r,e){for(var o=0;o<e.length;o++){var l=e[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}function k(r,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o},k(r,e)}var C=function(r){var e,o;function l(){return r.apply(this,arguments)||this}o=r,(e=l).prototype=Object.create(o.prototype),e.prototype.constructor=e,k(e,o);var f,v,I=l.prototype;return I.qualifiedName=function(i){return this.namespace?this.namespaceString+"|"+i:i},I.valueToString=function(){return this.qualifiedName(r.prototype.valueToString.call(this))},f=l,(v=[{key:"namespace",get:function(){return this._namespace},set:function(i){if(i===!0||i==="*"||i==="&")return this._namespace=i,void(this.raws&&delete this.raws.namespace);var a=(0,N.default)(i,{isIdentifier:!0});this._namespace=i,a!==i?((0,b.ensureObject)(this,"raws"),this.raws.namespace=a):this.raws&&delete this.raws.namespace}},{key:"ns",get:function(){return this._namespace},set:function(i){this.namespace=i}},{key:"namespaceString",get:function(){if(this.namespace){var i=this.stringifyProperty("namespace");return i===!0?"":i}return""}}])&&h(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),l}(n(y(4646)).default);x.default=C,Y.exports=x.default},3303:(Y,x,y)=>{let N=y(7668);function b(n,h){new N(h).stringify(n)}Y.exports=b,b.default=b},3438:(Y,x,y)=>{let N=y(396),b=y(9371),n=y(5238),h=y(1106),k=y(3878),C=y(5644),r=y(1534);function e(o,l){if(Array.isArray(o))return o.map(I=>e(I));let{inputs:f,...v}=o;if(f){l=[];for(let I of f){let i={...I,__proto__:h.prototype};i.map&&(i.map={...i.map,__proto__:k.prototype}),l.push(i)}}if(v.nodes&&(v.nodes=o.nodes.map(I=>e(I,l))),v.source){let{inputId:I,...i}=v.source;v.source=i,I!=null&&(v.source.input=l[I])}if(v.type==="root")return new C(v);if(v.type==="decl")return new n(v);if(v.type==="rule")return new r(v);if(v.type==="comment")return new b(v);if(v.type==="atrule")return new N(v);throw new Error("Unknown node type: "+o.type)}Y.exports=e,e.default=e},3518:(Y,x,y)=>{y.d(x,{BZ:()=>k,Xr:()=>n,ab:()=>h});var N=y(3278),b=y(490);function n(C="application/json",r="application/json"){var e;let o={},l=(e=N.b.sessionId)===null||e===void 0?void 0:e.toString();return o=N.b.BearerAccessToken!=""?{"Content-Type":C,Authorization:"Bearer "+N.b.BearerAccessToken,Accept:r,"X-Session-id":l}:{"Content-Type":C,Accept:r,"X-Session-id":l},o}function h(C="application/json",r="",e="application/json"){var o;r==""&&(r=N.b.BearerAccessToken);let l={},f=(o=N.b.sessionId)===null||o===void 0?void 0:o.toString();return l=r!=""?{"Content-Type":C,Authorization:"Bearer "+r,Accept:e,"X-Session-id":f}:{"Content-Type":C,Accept:e,"X-Session-id":f},l}function k(){var C;let r=N.b.BearerAccessToken,e=(C=N.b.sessionId)===null||C===void 0?void 0:C.toString();if(r==""){let l=(0,b.s)();l.token!=""&&(N.b.BearerAccessToken=l.token,r=l.token)}let o=new Headers;return o.append("Authorization","Bearer "+r),o.append("X-Session-Id",e),o}},3604:(Y,x,y)=>{let{dirname:N,relative:b,resolve:n,sep:h}=y(197),{SourceMapConsumer:k,SourceMapGenerator:C}=y(1866),{pathToFileURL:r}=y(2739),e=y(1106),o=!!(k&&C),l=!!(N&&n&&b&&h);Y.exports=class{constructor(f,v,I,i){this.stringify=f,this.mapOpts=I.map||{},this.root=v,this.opts=I,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let f;f=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let v=`
`;this.css.includes(`\r
`)&&(v=`\r
`),this.css+=v+"/*# sourceMappingURL="+f+" */"}applyPrevMaps(){for(let f of this.previous()){let v,I=this.toUrl(this.path(f.file)),i=f.root||N(f.file);this.mapOpts.sourcesContent===!1?(v=new k(f.text),v.sourcesContent&&(v.sourcesContent=null)):v=f.consumer(),this.map.applySourceMap(v,I,this.toUrl(this.path(i)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let f;for(let v=this.root.nodes.length-1;v>=0;v--)f=this.root.nodes[v],f.type==="comment"&&f.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(v)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),l&&o&&this.isMap())return this.generateMap();{let f="";return this.stringify(this.root,v=>{f+=v}),[f]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let f=this.previous()[0].consumer();f.file=this.outputFile(),this.map=C.fromSourceMap(f,{ignoreInvalidMapping:!0})}else this.map=new C({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new C({file:this.outputFile(),ignoreInvalidMapping:!0});let f,v,I=1,i=1,a="<no source>",t={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(c,w,m)=>{if(this.css+=c,w&&m!=="end"&&(t.generated.line=I,t.generated.column=i-1,w.source&&w.source.start?(t.source=this.sourcePath(w),t.original.line=w.source.start.line,t.original.column=w.source.start.column-1,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,this.map.addMapping(t))),v=c.match(/\n/g),v?(I+=v.length,f=c.lastIndexOf(`
`),i=c.length-f):i+=c.length,w&&m!=="start"){let S=w.parent||{raws:{}};(w.type==="decl"||w.type==="atrule"&&!w.nodes)&&w===S.last&&!S.raws.semicolon||(w.source&&w.source.end?(t.source=this.sourcePath(w),t.original.line=w.source.end.line,t.original.column=w.source.end.column-1,t.generated.line=I,t.generated.column=i-2,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,t.generated.line=I,t.generated.column=i-1,this.map.addMapping(t)))}})}isAnnotation(){return!!this.isInline()||(this.mapOpts.annotation!==void 0?this.mapOpts.annotation:!this.previous().length||this.previous().some(f=>f.annotation))}isInline(){if(this.mapOpts.inline!==void 0)return this.mapOpts.inline;let f=this.mapOpts.annotation;return(f===void 0||f===!0)&&(!this.previous().length||this.previous().some(v=>v.inline))}isMap(){return this.opts.map!==void 0?!!this.opts.map:this.previous().length>0}isSourcesContent(){return this.mapOpts.sourcesContent!==void 0?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(f=>f.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(f){if(this.mapOpts.absolute||f.charCodeAt(0)===60||/^\w+:\/\//.test(f))return f;let v=this.memoizedPaths.get(f);if(v)return v;let I=this.opts.to?N(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(I=N(n(I,this.mapOpts.annotation)));let i=b(I,f);return this.memoizedPaths.set(f,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(f=>{if(f.source&&f.source.input.map){let v=f.source.input.map;this.previousMaps.includes(v)||this.previousMaps.push(v)}});else{let f=new e(this.originalCSS,this.opts);f.map&&this.previousMaps.push(f.map)}return this.previousMaps}setSourcesContent(){let f={};if(this.root)this.root.walk(v=>{if(v.source){let I=v.source.input.from;if(I&&!f[I]){f[I]=!0;let i=this.usesFileUrls?this.toFileUrl(I):this.toUrl(this.path(I));this.map.setSourceContent(i,v.source.input.css)}}});else if(this.css){let v=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(v,this.css)}}sourcePath(f){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(f.source.input.from):this.toUrl(this.path(f.source.input.from))}toBase64(f){return Buffer?Buffer.from(f).toString("base64"):window.btoa(unescape(encodeURIComponent(f)))}toFileUrl(f){let v=this.memoizedFileURLs.get(f);if(v)return v;if(r){let I=r(f).toString();return this.memoizedFileURLs.set(f,I),I}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(f){let v=this.memoizedURLs.get(f);if(v)return v;h==="\\"&&(f=f.replace(/\\/g,"/"));let I=encodeURI(f).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(f,I),I}}},3614:(Y,x,y)=>{let N=y(8633),b=y(9746);class n extends Error{constructor(k,C,r,e,o,l){super(k),this.name="CssSyntaxError",this.reason=k,o&&(this.file=o),e&&(this.source=e),l&&(this.plugin=l),C!==void 0&&r!==void 0&&(typeof C=="number"?(this.line=C,this.column=r):(this.line=C.line,this.column=C.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,n)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",this.line!==void 0&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(k){if(!this.source)return"";let C=this.source;k==null&&(k=N.isColorSupported);let r=i=>i,e=i=>i,o=i=>i;if(k){let{bold:i,gray:a,red:t}=N.createColors(!0);e=c=>i(t(c)),r=c=>a(c),b&&(o=c=>b(c))}let l=C.split(/\r?\n/),f=Math.max(this.line-3,0),v=Math.min(this.line+2,l.length),I=String(v).length;return l.slice(f,v).map((i,a)=>{let t=f+1+a,c=" "+(" "+t).slice(-I)+" | ";if(t===this.line){if(i.length>160){let m=20,S=Math.max(0,this.column-m),E=Math.max(this.column+m,this.endColumn+m),L=i.slice(S,E),R=r(c.replace(/\d/g," "))+i.slice(0,Math.min(this.column-1,m-1)).replace(/[^\t]/g," ");return e(">")+r(c)+o(L)+`
 `+R+e("^")}let w=r(c.replace(/\d/g," "))+i.slice(0,this.column-1).replace(/[^\t]/g," ");return e(">")+r(c)+o(i)+`
 `+w+e("^")}return" "+r(c)+o(i)}).join(`
`)}toString(){let k=this.showSourceCode();return k&&(k=`

`+k+`
`),this.name+": "+this.message+k}}Y.exports=n,n.default=n},3631:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=function(o,l){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var f=h(l);if(f&&f.has(o))return f.get(o);var v={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(i!=="default"&&Object.prototype.hasOwnProperty.call(o,i)){var a=I?Object.getOwnPropertyDescriptor(o,i):null;a&&(a.get||a.set)?Object.defineProperty(v,i,a):v[i]=o[i]}return v.default=o,f&&f.set(o,v),v}(y(1581));function h(o){if(typeof WeakMap!="function")return null;var l=new WeakMap,f=new WeakMap;return(h=function(v){return v?f:l})(o)}function k(o,l){(l==null||l>o.length)&&(l=o.length);for(var f=0,v=new Array(l);f<l;f++)v[f]=o[f];return v}function C(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}function r(o,l){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},r(o,l)}var e=function(o){var l,f;function v(t){var c;return(c=o.call(this,t)||this).nodes||(c.nodes=[]),c}f=o,(l=v).prototype=Object.create(f.prototype),l.prototype.constructor=l,r(l,f);var I,i,a=v.prototype;return a.append=function(t){return t.parent=this,this.nodes.push(t),this},a.prepend=function(t){for(var c in t.parent=this,this.nodes.unshift(t),this.indexes)this.indexes[c]++;return this},a.at=function(t){return this.nodes[t]},a.index=function(t){return typeof t=="number"?t:this.nodes.indexOf(t)},a.removeChild=function(t){var c;for(var w in t=this.index(t),this.at(t).parent=void 0,this.nodes.splice(t,1),this.indexes)(c=this.indexes[w])>=t&&(this.indexes[w]=c-1);return this},a.removeAll=function(){for(var t,c=function(w,m){var S=typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(S)return(S=S.call(w)).next.bind(S);if(Array.isArray(w)||(S=function(L,R){if(L){if(typeof L=="string")return k(L,R);var D=Object.prototype.toString.call(L).slice(8,-1);return D==="Object"&&L.constructor&&(D=L.constructor.name),D==="Map"||D==="Set"?Array.from(L):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?k(L,R):void 0}}(w))||m){S&&(w=S);var E=0;return function(){return E>=w.length?{done:!0}:{done:!1,value:w[E++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(this.nodes);!(t=c()).done;)t.value.parent=void 0;return this.nodes=[],this},a.empty=function(){return this.removeAll()},a.insertAfter=function(t,c){var w;c.parent=this;for(var m,S=this.index(t),E=[],L=2;L<arguments.length;L++)E.push(arguments[L]);for(var R in(w=this.nodes).splice.apply(w,[S+1,0,c].concat(E)),c.parent=this,this.indexes)S<(m=this.indexes[R])&&(this.indexes[R]=m+arguments.length-1);return this},a.insertBefore=function(t,c){var w;c.parent=this;for(var m,S=this.index(t),E=[],L=2;L<arguments.length;L++)E.push(arguments[L]);for(var R in(w=this.nodes).splice.apply(w,[S,0,c].concat(E)),c.parent=this,this.indexes)(m=this.indexes[R])>=S&&(this.indexes[R]=m+arguments.length-1);return this},a._findChildAtPosition=function(t,c){var w=void 0;return this.each(function(m){if(m.atPosition){var S=m.atPosition(t,c);if(S)return w=S,!1}else if(m.isAtPosition(t,c))return w=m,!1}),w},a.atPosition=function(t,c){return this.isAtPosition(t,c)?this._findChildAtPosition(t,c)||this:void 0},a._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},a.each=function(t){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var c=this.lastEach;if(this.indexes[c]=0,this.length){for(var w,m;this.indexes[c]<this.length&&(w=this.indexes[c],(m=t(this.at(w),w))!==!1);)this.indexes[c]+=1;return delete this.indexes[c],m!==!1&&void 0}},a.walk=function(t){return this.each(function(c,w){var m=t(c,w);if(m!==!1&&c.length&&(m=c.walk(t)),m===!1)return!1})},a.walkAttributes=function(t){var c=this;return this.walk(function(w){if(w.type===n.ATTRIBUTE)return t.call(c,w)})},a.walkClasses=function(t){var c=this;return this.walk(function(w){if(w.type===n.CLASS)return t.call(c,w)})},a.walkCombinators=function(t){var c=this;return this.walk(function(w){if(w.type===n.COMBINATOR)return t.call(c,w)})},a.walkComments=function(t){var c=this;return this.walk(function(w){if(w.type===n.COMMENT)return t.call(c,w)})},a.walkIds=function(t){var c=this;return this.walk(function(w){if(w.type===n.ID)return t.call(c,w)})},a.walkNesting=function(t){var c=this;return this.walk(function(w){if(w.type===n.NESTING)return t.call(c,w)})},a.walkPseudos=function(t){var c=this;return this.walk(function(w){if(w.type===n.PSEUDO)return t.call(c,w)})},a.walkTags=function(t){var c=this;return this.walk(function(w){if(w.type===n.TAG)return t.call(c,w)})},a.walkUniversals=function(t){var c=this;return this.walk(function(w){if(w.type===n.UNIVERSAL)return t.call(c,w)})},a.split=function(t){var c=this,w=[];return this.reduce(function(m,S,E){var L=t.call(c,S);return w.push(S),L?(m.push(w),w=[]):E===c.length-1&&m.push(w),m},[])},a.map=function(t){return this.nodes.map(t)},a.reduce=function(t,c){return this.nodes.reduce(t,c)},a.every=function(t){return this.nodes.every(t)},a.some=function(t){return this.nodes.some(t)},a.filter=function(t){return this.nodes.filter(t)},a.sort=function(t){return this.nodes.sort(t)},a.toString=function(){return this.map(String).join("")},I=v,(i=[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}])&&C(I.prototype,i),Object.defineProperty(I,"prototype",{writable:!1}),v}(b.default);x.default=e,Y.exports=x.default},3655:(Y,x,y)=>{y.d(x,{El:()=>l,b8:()=>o,kH:()=>e,qI:()=>r,wh:()=>f});var N=y(2299),b=y(9581),n=y(5205),h=y(1863);let k=10;class C{}function r(v){const I=n.Logger.logfunction("openDatabase",[v,"indexdb"]);return new Promise(function(i,a){C.db&&(n.Logger.logUpdate(I),i(C.db));let t=b.B.BASE_URL+"_FreeSchema"+b.B.BASE_APPLICATION;const c=indexedDB.open(t,k);console.log("this is the update version",k,c),c.onupgradeneeded=w=>{let m=w.target.result,S="concept",E="connection",L="settings";console.log("this is the version update for index",k),m.objectStoreNames.contains(S)&&m.deleteObjectStore(S),m.objectStoreNames.contains(E)&&m.deleteObjectStore(E),m.objectStoreNames.contains(L)&&m.deleteObjectStore(L),m.objectStoreNames.contains(S)||(m.createObjectStore(S,{keyPath:"id"}).transaction.oncomplete=R=>{}),m.objectStoreNames.contains(E)||(m.createObjectStore(E,{keyPath:"id"}).transaction.oncomplete=R=>{}),m.objectStoreNames.contains(L)||(m.createObjectStore(L,{keyPath:"id"}).transaction.oncomplete=R=>{}),n.Logger.logUpdate(I),i(m)},c.onerror=w=>{console.error("Why didn't you allow my web app to use IndexedDB?!",w),indexedDB.deleteDatabase(t),r(v),(0,h.ey)(I,"openDatabase",w),a(w)},c.onsuccess=function(w){let m=w.target;C.db=m.result,n.Logger.logUpdate(I),i(C.db)}})}function e(v,I){const i=n.Logger.logfunction("UpdateToDatabase",[v,"indexdb"]);return new Promise(function(a,t){r(v).then(c=>{const w=c.transaction(v,"readwrite").objectStore(v).put(I);w.onsuccess=m=>{n.Logger.logUpdate(i),a(I)},w.onerror=m=>{let S={status:400,ok:!1,message:"Cannot Update to the database"+v,data:m,body:I};(0,h.ey)(i,"UpdateToDatabase",S),t(S)}}).catch(c=>{let w={status:400,ok:!1,message:"Cannot update to database because you cannot open the database",data:c};(0,h.ey)(i,"UpdateToDatabase",w),t(w)})})}function o(){const v=n.Logger.logfunction("GetLastSettingsFromDatabase",["indexdb"]);return new Promise(function(I,i){let a="settings";r(a).then(t=>{let c=t.transaction(a,"readwrite").objectStore(a).getAll();c.onsuccess=()=>{let w=new N.B(!1),m=c.result;for(let S=0;S<m.length;S++)w=m[S];n.Logger.logUpdate(v),I(w)},c.onerror=w=>{(0,h.ey)(v,"GetLastSettingsFromDatabase",w),i(w)}}).catch(t=>{let c={status:400,ok:!1,message:"Cannot get last object from database because you cannot open the database",data:t};(0,h.ey)(v,"GetLastSettingsFromDatabase",c),i(c)})})}function l(v){const I=n.Logger.logfunction("AiUpdateFlag",["indexdb"]);return new Promise(function(i,a){let t="settings";r(t).then(c=>{const w=c.transaction(t,"readwrite").objectStore(t).put(v);w.onsuccess=m=>{n.Logger.logUpdate(I),i(v)},w.onerror=m=>{let S={status:400,ok:!1,message:"Cannot update AI flag",data:m,body:v};(0,h.ey)(I,"AiUpdateFlag",S),a(S)}}).catch(c=>{let w={status:400,ok:!1,message:"Cannot update AI flag because you cannot open the database",data:c};(0,h.ey)(I,"AiUpdateFlag",w),a(w)})})}function f(v,I){const i=n.Logger.logfunction("removeFromDatabase",[v,"indexdb"]);return new Promise(function(a,t){r(v).then(c=>{const w=c.transaction(v,"readwrite").objectStore(v).delete(Number(I));w.onsuccess=function(m){n.Logger.logUpdate(i),a(I)},w.onerror=m=>{let S={status:400,ok:!1,message:"Cannot remove from the database"+v,data:m};(0,h.ey)(i,"removeFromDatabase",S),t(S)}}).catch(c=>{let w={status:400,ok:!1,message:"Cannot remove from the database because you cannot open the database",data:c,body:I};(0,h.ey)(i,"removeFromDatabase",w),t(w)})})}},3717:(Y,x,y)=>{let N=y(38);class b{get content(){return this.css}constructor(h,k,C){this.processor=h,this.messages=[],this.root=k,this.opts=C,this.css="",this.map=void 0}toString(){return this.css}warn(h,k={}){k.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(k.plugin=this.lastPlugin.postcssPlugin);let C=new N(h,k);return this.messages.push(C),C}warnings(){return this.messages.filter(h=>h.type==="warning")}}Y.exports=b,b.default=b},3729:(Y,x,y)=>{y.d(x,{D:()=>f});var N=y(9934),b=y(4485),n=y(2),h=y(7876),k=y(4818),C=y(999),r=y(5868),e=y(5205),o=y(176),l=function(v,I,i,a){return new(i||(i=Promise))(function(t,c){function w(E){try{S(a.next(E))}catch(L){c(L)}}function m(E){try{S(a.throw(E))}catch(L){c(L)}}function S(E){var L;E.done?t(E.value):(L=E.value,L instanceof i?L:new i(function(R){R(L)})).then(w,m)}S((a=a.apply(v,I||[])).next())})};function f(v){return l(this,arguments,void 0,function*(I,i={concepts:[],connections:[]}){var a,t,c,w;if(performance.now(),e.serviceWorker)try{const ie=yield(0,e.sendMessage)("UpdateCompositionLocal",{patcherStructure:I,actions:i});return!((t=(a=ie?.actions)===null||a===void 0?void 0:a.concepts)===null||t===void 0)&&t.length&&(i.concepts=JSON.parse(JSON.stringify(ie.actions.concepts))),!((w=(c=ie?.actions)===null||c===void 0?void 0:c.connections)===null||w===void 0)&&w.length&&(i.connections=JSON.parse(JSON.stringify(ie.actions.connections))),ie.data}catch(ie){console.error("UpdateCompositionLocal error sw: ",ie),(0,e.handleServiceWorkerException)(ie)}const m=I.userId,S=I.sessionId,E=I.accessId;let L=[];const R=[];let D=(0,e.CreateDefaultLConcept)(),W=(0,e.CreateDefaultLConcept)();const U=[],P=I.compositionId,M=I.ofTheCompositionId;let j=[],J=yield(0,n.s)(P);for(let ie=0;ie<J.length;ie++)L.push((0,o.P6)(J[ie]));const Z=[],K=[];let se=[];for(let ie=0;ie<L.length;ie++)(0,N.A)(K,L[ie].ofTheConceptId),(0,N.A)(Z,L[ie].ofTheConceptId),(0,N.A)(Z,L[ie].toTheConceptId),se.push(L[ie].ofTheConceptId);for(let ie=0;ie<Z.length;ie++){const ue=yield(0,h.A)(Z[ie]);P==Z[ie]&&(D=(0,o.F4)(ue)),M==Z[ie]&&(W=(0,o.F4)(ue)),R.push((0,o.F4)(ue))}const $=I.patchObject;for(const ie in $){let ue=(0,e.CreateDefaultLConcept)();const ee=$[ie];let Q=D;W.id>0&&(Q=W),Array.isArray(ee)||typeof ee=="object"?(ue=yield(0,r.k)(ie,"",!0,D.userId,4,999,void 0,i),yield(0,C.R)($[ie],ue.id,ue.userId,D.id,D.userId,4,999,void 0,i)):ue=yield(0,r.k)(ie,ee,!1,m,E,S,void 0,i);const te=(0,b.nm)(R,ue);for(let oe=0;oe<te.length;oe++)if(te[oe].id>0){const H=(0,b.gt)(L,te[oe].id);j=j.concat(H),U.push(te[oe])}yield(0,e.CreateTheConnectionLocal)(Q.id,ue.id,D.id,2,void 0,void 0,i),R.push(ue)}for(let ie=0;ie<j.length;ie++)yield(0,k.m)(j[ie].id);yield e.LocalSyncData.SyncDataOnline(void 0,i)})}},3878:(Y,x,y)=>{let{existsSync:N,readFileSync:b}=y(9977),{dirname:n,join:h}=y(197),{SourceMapConsumer:k,SourceMapGenerator:C}=y(1866);class r{constructor(o,l){if(l.map===!1)return;this.loadAnnotation(o),this.inline=this.startWith(this.annotation,"data:");let f=l.map?l.map.prev:void 0,v=this.loadMap(l.from,f);!this.mapFile&&l.from&&(this.mapFile=l.from),this.mapFile&&(this.root=n(this.mapFile)),v&&(this.text=v)}consumer(){return this.consumerCache||(this.consumerCache=new k(this.text)),this.consumerCache}decodeInline(o){let l=o.match(/^data:application\/json;charset=utf-?8,/)||o.match(/^data:application\/json,/);if(l)return decodeURIComponent(o.substr(l[0].length));let f=o.match(/^data:application\/json;charset=utf-?8;base64,/)||o.match(/^data:application\/json;base64,/);if(f)return v=o.substr(f[0].length),Buffer?Buffer.from(v,"base64").toString():window.atob(v);var v;let I=o.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+I)}getAnnotationURL(o){return o.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(o){return typeof o=="object"&&(typeof o.mappings=="string"||typeof o._mappings=="string"||Array.isArray(o.sections))}loadAnnotation(o){let l=o.match(/\/\*\s*# sourceMappingURL=/g);if(!l)return;let f=o.lastIndexOf(l.pop()),v=o.indexOf("*/",f);f>-1&&v>-1&&(this.annotation=this.getAnnotationURL(o.substring(f,v)))}loadFile(o){if(this.root=n(o),N(o))return this.mapFile=o,b(o,"utf-8").toString().trim()}loadMap(o,l){if(l===!1)return!1;if(l){if(typeof l=="string")return l;if(typeof l!="function"){if(l instanceof k)return C.fromSourceMap(l).toString();if(l instanceof C)return l.toString();if(this.isMap(l))return JSON.stringify(l);throw new Error("Unsupported previous source map format: "+l.toString())}{let f=l(o);if(f){let v=this.loadFile(f);if(!v)throw new Error("Unable to load previous source map: "+f.toString());return v}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let f=this.annotation;return o&&(f=h(n(o),f)),this.loadFile(f)}}}startWith(o,l){return!!o&&o.substr(0,l.length)===l}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}Y.exports=r,r.default=r},3996:(Y,x,y)=>{y.d(x,{i:()=>N});class N{constructor(n,h,k,C){this.key="",this.value=[],this.height=1,this.key=n,this.value=h,this.leftNode=k,this.rightNode=C}getFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getFromNode(n,h.leftNode):n>h.key?this.getFromNode(n,h.rightNode):h)}rightRotate(n){if(n){let h=n.leftNode;if(h){let k=h.rightNode;return n.leftNode=k,h.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,h}}return n}leftRotate(n){if(n){let h=n.rightNode;if(h){let k=h.leftNode;return h.leftNode=n,n.rightNode=k,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(n.rightNode))+1,h}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return n==null?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}removeNode(n,h){if(n==null)return n;if(n.key>h)return n.leftNode=this.removeNode(n.leftNode,h),n;if(n.key<h)return n.rightNode=this.removeNode(n.rightNode,h),n;if(n.leftNode==null){let k=n.rightNode;return n=null,k}if(n.rightNode==null){let k=n.leftNode;return n=null,k}{let k=this.inOrderSuccessor(n.rightNode);return n.value=k.value,n.key=k.key,n.variants=k.variants,n.currentNode=k.currentNode,n.rightNode=this.removeNode(n.rightNode,k.key),n}}inOrderSuccessor(n){for(;n.leftNode!=null;)n=n.leftNode;return n}}},4151:Y=>{Y.exports.isClean=Symbol("isClean"),Y.exports.my=Symbol("my")},4195:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N=k(y(8937)),b=y(9606),n=k(y(4646)),h=y(1581);function k(o){return o&&o.__esModule?o:{default:o}}function C(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}function r(o,l){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},r(o,l)}var e=function(o){var l,f,v,I;function i(a){var t;return(t=o.call(this,a)||this).type=h.CLASS,t._constructed=!0,t}return f=o,(l=i).prototype=Object.create(f.prototype),l.prototype.constructor=l,r(l,f),i.prototype.valueToString=function(){return"."+o.prototype.valueToString.call(this)},v=i,(I=[{key:"value",get:function(){return this._value},set:function(a){if(this._constructed){var t=(0,N.default)(a,{isIdentifier:!0});t!==a?((0,b.ensureObject)(this,"raws"),this.raws.value=t):this.raws&&delete this.raws.value}this._value=a}}])&&C(v.prototype,I),Object.defineProperty(v,"prototype",{writable:!1}),i}(n.default);x.default=e,Y.exports=x.default},4211:(Y,x,y)=>{let N=y(3604),b=y(9577);const n=y(3717);let h=y(3303);y(6156);class k{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let r,e=b;try{r=e(this._css,this._opts)}catch(o){this.error=o}if(this.error)throw this.error;return this._root=r,r}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(r,e,o){let l;e=e.toString(),this.stringified=!1,this._processor=r,this._css=e,this._opts=o,this._map=void 0;let f=h;this.result=new n(this._processor,l,this._opts),this.result.css=e;let v=this;Object.defineProperty(this.result,"root",{get:()=>v.root});let I=new N(f,l,this._opts,e);if(I.isMap()){let[i,a]=I.generate();i&&(this.result.css=i),a&&(this.result.map=a)}else I.clearAnnotation(),this.result.css=I.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(r){return this.async().catch(r)}finally(r){return this.async().then(r,r)}sync(){if(this.error)throw this.error;return this.result}then(r,e){return this.async().then(r,e)}toString(){return this._css}warnings(){return[]}}Y.exports=k,k.default=k},4287:(Y,x,y)=>{y.d(x,{w:()=>h});var N=y(5205),b=y(3130),n=function(k,C,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{I(e.next(i))}catch(a){l(a)}}function v(i){try{I(e.throw(i))}catch(a){l(a)}}function I(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}I((e=e.apply(k,[])).next())})};class h{constructor(){this.subscribers=[],this.mainConcept=0,this.compositionIds=[],this.conceptIds=[],this.internalConnections=[],this.reverse=[],this.linkers=[],this.newIds=[],this.dependency=[],this.isDataLoaded=!1,this.isUpdating=!1,this.fetched=!1,this.format=b.yv,this.eventHandlers={}}listenToEventType(C){if(this.eventHandlers[C])return;const r=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){try{let l=e;if(!o.compositionIds.includes(l?.detail)){o.compositionIds.unshift(l?.detail),o.listenToEvent(l?.detail);let f=l?.detail,v=yield N.ConnectionData.GetConnectionByOfTheConceptAndType(f,f);for(let I=0;I<v.length;I++)yield N.ConnectionData.GetConnection(v[I]).then(i=>{i.typeId==o.mainConcept?o.internalConnections.includes(i.id)||o.internalConnections.push(i.id):o.linkers.includes(i.id)||o.linkers.push(i.id),o.conceptIds.includes(i.toTheConceptId)||o.conceptIds.push(i.toTheConceptId),o.compositionIds.includes(i.ofTheConceptId)||o.compositionIds.push(i.ofTheConceptId)})}o.isUpdating=!1,yield o.bind(),o.notify()}catch(l){throw console.error("Error in typeHandler event listener:",l),o.isUpdating=!1,l}})},200)}});this.eventHandlers[C]=r,window.addEventListener(`${C}`,r)}listenToEvent(C){if(this.eventHandlers[C])return;const r=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){try{let l=yield N.ConnectionData.GetConnectionByOfTheConceptAndType(C,C);for(let f=0;f<l.length;f++)yield N.ConnectionData.GetConnection(l[f]).then(v=>{v.typeId==o.mainConcept?o.internalConnections.includes(v.id)||o.internalConnections.push(v.id):o.linkers.includes(v.id)||o.linkers.push(v.id),o.conceptIds.includes(v.toTheConceptId)||o.conceptIds.push(v.toTheConceptId),o.compositionIds.includes(v.ofTheConceptId)||(o.compositionIds.push(v.ofTheConceptId),o.newIds.includes(v.ofTheConceptId)||o.newIds.push(v.ofTheConceptId))});o.isUpdating=!1,yield o.bind(),o.notify()}catch(l){throw console.error("Error in event listener for concept",C,":",l),o.isUpdating=!1,l}})},200)}});this.eventHandlers[C]=r,window.addEventListener(`${C}`,r)}removeListenToEvent(C){const r=this.eventHandlers[C];r&&(window.removeEventListener(`${C}`,r),delete this.eventHandlers[C])}listenToEventConnectionType(C,r){const e=`${C}_type_${r}`;if(this.eventHandlers[e])return;const o=l=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let f=this;setTimeout(function(){return n(this,void 0,void 0,function*(){try{let v=yield N.ConnectionData.GetConnectionByOfTheConceptAndType(C,C);for(let I=0;I<v.length;I++)v[I].typeId==r&&(yield N.ConnectionData.GetConnection(v[I]).then(i=>{i.typeId==f.mainConcept?f.internalConnections.includes(i.id)||f.internalConnections.push(i.id):f.linkers.includes(i.id)||f.linkers.push(i.id),f.conceptIds.includes(i.toTheConceptId)||f.conceptIds.push(i.toTheConceptId),f.compositionIds.includes(i.ofTheConceptId)||f.compositionIds.push(i.ofTheConceptId)}));f.isUpdating=!1,yield f.bind(),f.notify()}catch(v){throw console.error("Error in connectionType handler:",v),f.isUpdating=!1,v}})},200)}});this.eventHandlers[e]=o,window.addEventListener(`${C}`,o)}bind(){return n(this,void 0,void 0,function*(){console.log("this is the old execute data")})}run(){return n(this,void 0,void 0,function*(){console.log("this is non subscriber data")})}update(){return n(this,void 0,void 0,function*(){this.isDataLoaded=!1,yield this.bind(),this.notify()})}subscribe(C,r){return n(this,void 0,void 0,function*(){this.subscribers.push(C);try{return yield this.bind(),C(this.data,this)}catch(e){throw console.error("Error in subscribe:",e),r&&r(e),e}})}execute(){return n(this,void 0,void 0,function*(){return yield this.run()})}unsubscribe(C){return this.subscribers.filter(r=>r!=C),this.subscribers.length}notify(){this.subscribers.map(C=>{C(this.data,this)})}}},4310:(Y,x,y)=>{y.d(x,{Cp:()=>f,ix:()=>i,ml:()=>I,qj:()=>v});var N=y(5205),b=y(1596),n=y(4698),h=y(1863),k=y(1320),C=y(3518),r=function(a,t,c,w){return new(c||(c=Promise))(function(m,S){function E(D){try{R(w.next(D))}catch(W){S(W)}}function L(D){try{R(w.throw(D))}catch(W){S(W)}}function R(D){var W;D.done?m(D.value):(W=D.value,W instanceof c?W:new c(function(U){U(W)})).then(E,L)}R((w=w.apply(a,[])).next())})};const e=new Map,o=new Map,l=new Map;function f(a){var t=arguments;return r(this,void 0,void 0,function*(){N.Logger.logfunction("BuildWidgetFromId",t);try{if(N.serviceWorker)return(yield(0,N.sendMessage)("BuildWidgetFromId",{id:a})).data}catch(m){console.error("BuildWidgetFromId error sw: ",m),(0,N.handleServiceWorkerException)(m)}let c={};if(e.has(a))return e.get(a)||c;const w=r(this,void 0,void 0,function*(){try{let m=[],S=[],E=[],L=[],R="DESC",D=[],W={},U=(0,C.Xr)("application/json"),P=N.BaseUrl.getWidgetData()+"?id="+a;const M=yield fetch(P,{method:"GET",headers:U});if(!M.ok)return(0,h.ry)(M),console.log("This is the BuildWidgetFromId error",M.status),[];W=yield M.json(),m=W.conceptIds,S=W.linkers,E=W.reverse,L=W.mainCompositionIds,D=W.countinfo;let j=(0,n.w)(D);return c=yield(0,k.e$)(S,m,L,E,j,R),c}catch(m){throw console.log("this is the error in the build widget",m),m}finally{e.delete(a)}});return e.set(a,w),w})}function v(a){var t=arguments;return r(this,void 0,void 0,function*(){N.Logger.logfunction("BuildWidgetFromIdForLatest",t);try{if(N.serviceWorker)return(yield(0,N.sendMessage)("BuildWidgetFromIdForLatest",{id:a})).data}catch(m){console.error("BuildWidgetFromIdForLatest error sw: ",m),(0,N.handleServiceWorkerException)(m)}let c={};if(o.has(a))return o.get(a)||c;const w=r(this,void 0,void 0,function*(){try{let m,S=[],E=[],L=[],R=[],D="DESC",W=[],U={},P=(0,C.Xr)("application/json");try{let j=N.BaseUrl.getLatestWidgetData()+"?id="+a;m=yield fetch(j,{method:"GET",headers:P})}catch{m=yield(0,b.g)({method:"GET",headers:P},"?id="+a)}if(!m.ok)return(0,h.ry)(m),console.log("This is the BuildWidgetFromId error",m.status),[];U=yield m.json(),S=U.conceptIds,E=U.linkers,L=U.reverse,R=U.mainCompositionIds,W=U.countinfo;let M=(0,n.w)(W);return c=yield(0,k.e$)(E,S,R,L,M,D),{data:c,mainId:U.mainId}}catch(m){throw console.log("this is the error in the build widget",m),m}finally{o.delete(a)}});return o.set(a,w),w})}function I(a){var t=arguments;return r(this,void 0,void 0,function*(){N.Logger.logfunction("BuildWidgetFromIdForRecent",t);try{if(N.serviceWorker)return(yield(0,N.sendMessage)("BuildWidgetFromIdForRecent",{id:a})).data}catch(m){console.error("BuildWidgetFromIdForRecent error sw: ",m),(0,N.handleServiceWorkerException)(m)}let c={};if(l.has(a))return l.get(a)||c;const w=r(this,void 0,void 0,function*(){try{let m,S=[],E=[],L=[],R=[],D="DESC",W=[],U={},P=(0,C.Xr)("application/json");try{let j=N.BaseUrl.getRecentWidgetData()+"?id="+a;m=yield fetch(j,{method:"GET",headers:P})}catch{m=yield(0,b.g)({method:"GET",headers:P},"?id="+a)}if(!m.ok)return(0,h.ry)(m),console.log("This is the BuildWidgetFromId error",m.status),[];U=yield m.json(),S=U.conceptIds,E=U.linkers,L=U.reverse,R=U.mainCompositionIds,W=U.countinfo;let M=(0,n.w)(W);return c=yield(0,k.e$)(E,S,R,L,M,D),{data:c,mainId:U.mainId}}catch(m){throw console.log("this is the error in the build widget",m),m}finally{l.delete(a)}});return l.set(a,w),w})}function i(a,t){for(let c=0;c<a.length;c++)if(a[c].id==t)return a[c]}},4364:(Y,x,y)=>{y.d(x,{s:()=>h});var N=y(1239),b=y(5205),n=function(k,C,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{I(e.next(i))}catch(a){l(a)}}function v(i){try{I(e.throw(i))}catch(a){l(a)}}function I(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}I((e=e.apply(k,C||[])).next())})};function h(){return n(this,arguments,void 0,function*(k=[]){const C=b.Logger.logfunction("FindConceptsFromConnections",[k.length]);let r=[];if(k.length>0){for(let e=0;e<k.length;e++)r.includes(k[e].ofTheConceptId)||r.push(k[e].ofTheConceptId),r.includes(k[e].toTheConceptId)||r.push(k[e].toTheConceptId),r.includes(k[e].typeId)||r.push(k[e].typeId);yield(0,N.r)(r)}b.Logger.logUpdate(C)})}},4402:(Y,x,y)=>{y.d(x,{A:()=>e});var N=y(3026),b=y(9581),n=y(3518),h=y(1863),k=y(5205),C=y(7876),r=function(o,l,f,v){return new(f||(f=Promise))(function(I,i){function a(w){try{c(v.next(w))}catch(m){i(m)}}function t(w){try{c(v.throw(w))}catch(m){i(m)}}function c(w){var m;w.done?I(w.value):(m=w.value,m instanceof f?m:new f(function(S){S(m)})).then(a,t)}c((v=v.apply(o,[])).next())})};function e(o,l){var f=arguments;return r(this,void 0,void 0,function*(){const v=k.Logger.logfunction("GetConceptByCharacterAndType",f);try{if(k.serviceWorker)try{return(yield(0,k.sendMessage)("GetConceptByCharacterAndType",{characterValue:o,typeId:l})).data}catch(c){console.error("GetConceptByCharacterAndType sw error: ",c),(0,k.handleServiceWorkerException)(c)}let t=yield N.I.GetConceptByCharacterAndTypeLocal(o,l);if(t==null||t.id==0){var I={character_value:`${o}`,type_id:l},i=JSON.stringify(I),a=(0,n.Xr)();const c=yield fetch(b.B.GetConceptByCharacterAndTypeUrl(),{method:"POST",headers:a,body:i});c.ok?(t=yield c.json(),(0,C.K)(t).then(m=>{N.I.AddConcept(t)})):((0,h.ry)(c),console.log("This is the concept by type and character error",c.status))}return k.Logger.logUpdate(v),t}catch(t){t instanceof Error?console.log(" This is the concept by type and character error message: ",t.message):console.log(" This is the concept by type and character unexpected error: ",t),(0,h.Mb)(t,b.B.GetConceptByCharacterAndTypeUrl()),(0,h.ey)(v,"GetConceptByCharacterAndType",t)}})}},4451:(Y,x,y)=>{x.__esModule=!0,x.universal=x.tag=x.string=x.selector=x.root=x.pseudo=x.nesting=x.id=x.comment=x.combinator=x.className=x.attribute=void 0;var N=I(y(5588)),b=I(y(4195)),n=I(y(1704)),h=I(y(425)),k=I(y(7071)),C=I(y(2918)),r=I(y(7324)),e=I(y(518)),o=I(y(339)),l=I(y(5799)),f=I(y(9720)),v=I(y(1669));function I(i){return i&&i.__esModule?i:{default:i}}x.attribute=function(i){return new N.default(i)},x.className=function(i){return new b.default(i)},x.combinator=function(i){return new n.default(i)},x.comment=function(i){return new h.default(i)},x.id=function(i){return new k.default(i)},x.nesting=function(i){return new C.default(i)},x.pseudo=function(i){return new r.default(i)},x.root=function(i){return new e.default(i)},x.selector=function(i){return new o.default(i)},x.string=function(i){return new l.default(i)},x.tag=function(i){return new f.default(i)},x.universal=function(i){return new v.default(i)}},4485:(Y,x,y)=>{function N(k=[],C){var r,e;let o=[],l=(r=C.type)===null||r===void 0?void 0:r.characterValue;if(l?.startsWith("the_")||(l="the_"+l),Array.isArray(k))for(let f=0;f<k.length;f++){let v=(e=k[f].type)===null||e===void 0?void 0:e.characterValue;v?.startsWith("the_")||(v="the_"+v),C.typeId!=k[f].typeId&&l!=v||o.push(k[f])}return o}function b(k=[],C){let r=[],e=C.typeCharacter;if(e?.startsWith("the_")||(e="the_"+e),Array.isArray(k))for(let o=0;o<k.length;o++){let l=k[o].typeCharacter;l?.startsWith("the_")||(l="the_"+l),C.typeId!=k[o].typeId&&e!=l||r.push(k[o])}return r}function n(k=[],C){let r=[];if(Array.isArray(k)){const e=k.find(l=>l.toTheConceptId==C);e&&r.push(e);const o=k.find(l=>l.ofTheConceptId==C);o&&r.push(o)}return r}function h(k=[],C){let r=[];if(Array.isArray(k)){const e=k.find(l=>l.toTheConceptId==C);e&&r.push(e);const o=k.find(l=>l.ofTheConceptId==C);o&&r.push(o)}return r}y.d(x,{gt:()=>h,nm:()=>b,vo:()=>N,wS:()=>n}),y(2155),y(7282)},4643:(Y,x,y)=>{function N(b){try{if(!y.g.localStorage)return!1}catch{return!1}var n=y.g.localStorage[b];return n!=null&&String(n).toLowerCase()==="true"}Y.exports=function(b,n){if(N("noDeprecation"))return b;var h=!1;return function(){if(!h){if(N("throwDeprecation"))throw new Error(n);N("traceDeprecation")?console.trace(n):console.warn(n),h=!0}return b.apply(this,arguments)}}},4646:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N=y(9606);function b(k,C){for(var r=0;r<C.length;r++){var e=C[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(k,e.key,e)}}var n=function k(C,r){if(typeof C!="object"||C===null)return C;var e=new C.constructor;for(var o in C)if(C.hasOwnProperty(o)){var l=C[o];o==="parent"&&typeof l=="object"?r&&(e[o]=r):e[o]=l instanceof Array?l.map(function(f){return k(f,e)}):k(l,e)}return e},h=function(){function k(o){o===void 0&&(o={}),Object.assign(this,o),this.spaces=this.spaces||{},this.spaces.before=this.spaces.before||"",this.spaces.after=this.spaces.after||""}var C,r,e=k.prototype;return e.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function(){if(this.parent){for(var o in arguments)this.parent.insertBefore(this,arguments[o]);this.remove()}return this},e.next=function(){return this.parent.at(this.parent.index(this)+1)},e.prev=function(){return this.parent.at(this.parent.index(this)-1)},e.clone=function(o){o===void 0&&(o={});var l=n(this);for(var f in o)l[f]=o[f];return l},e.appendToPropertyAndEscape=function(o,l,f){this.raws||(this.raws={});var v=this[o],I=this.raws[o];this[o]=v+l,I||f!==l?this.raws[o]=(I||v)+f:delete this.raws[o]},e.setPropertyAndEscape=function(o,l,f){this.raws||(this.raws={}),this[o]=l,this.raws[o]=f},e.setPropertyWithoutEscape=function(o,l){this[o]=l,this.raws&&delete this.raws[o]},e.isAtPosition=function(o,l){if(this.source&&this.source.start&&this.source.end)return!(this.source.start.line>o||this.source.end.line<o||this.source.start.line===o&&this.source.start.column>l||this.source.end.line===o&&this.source.end.column<l)},e.stringifyProperty=function(o){return this.raws&&this.raws[o]||this[o]},e.valueToString=function(){return String(this.stringifyProperty("value"))},e.toString=function(){return[this.rawSpaceBefore,this.valueToString(),this.rawSpaceAfter].join("")},C=k,(r=[{key:"rawSpaceBefore",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.before;return o===void 0&&(o=this.spaces&&this.spaces.before),o||""},set:function(o){(0,N.ensureObject)(this,"raws","spaces"),this.raws.spaces.before=o}},{key:"rawSpaceAfter",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.after;return o===void 0&&(o=this.spaces.after),o||""},set:function(o){(0,N.ensureObject)(this,"raws","spaces"),this.raws.spaces.after=o}}])&&b(C.prototype,r),Object.defineProperty(C,"prototype",{writable:!1}),k}();x.default=h,Y.exports=x.default},4698:(Y,x,y)=>{y.d(x,{V:()=>C,w:()=>k});var N=y(7139),b=y(5205),n=y(276),h=function(e,o,l,f){return new(l||(l=Promise))(function(v,I){function i(c){try{t(f.next(c))}catch(w){I(w)}}function a(c){try{t(f.throw(c))}catch(w){I(w)}}function t(c){var w;c.done?v(c.value):(w=c.value,w instanceof l?w:new l(function(m){m(w)})).then(i,a)}t((f=f.apply(e,[])).next())})};function k(e=[]){let o=[];if(e.length>0)for(let l=0;l<e.length;l++){let f=r(e[l]);o.push(f)}return o}function C(e){var o=arguments;return h(this,void 0,void 0,function*(){const l=b.Logger.logfunction("GetConnectionTypeForCount",o);let f={};for(let v=0;v<e.length;v++){let I=yield(0,N.r)(e[v].connectionTypeId);e[v].connectionType=I.characterValue,f[e[v].conceptId]=e[v]}return b.Logger.logUpdate(l),f})}function r(e){const o=e.split("_");if(o.length===3){let l=new n.y;return l.conceptId=Number(o[0]),l.connectionTypeId=Number(o[1]),l.count=Number(o[2]),l}throw new Error("Input string must contain exactly three parts separated by underscores.")}},4711:(Y,x,y)=>{y.d(x,{F:()=>r,d:()=>e});var N=y(2155),b=y(4864),n=y(5257),h=y(9700),k=y(5205),C=function(o,l,f,v){return new(f||(f=Promise))(function(I,i){function a(w){try{c(v.next(w))}catch(m){i(m)}}function t(w){try{c(v.throw(w))}catch(m){i(m)}}function c(w){var m;w.done?I(w.value):(m=w.value,m instanceof f?m:new f(function(S){S(m)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function r(o,l,f){return C(this,arguments,void 0,function*(v,I,i,a=1,t="",c=999,w={concepts:[],connections:[]}){var m,S,E,L;let R=performance.now();if(k.serviceWorker)try{const D=yield(0,k.sendMessage)("CreateTheConnectionLocal",{ofTheConceptId:v,toTheConceptId:I,typeId:i,orderId:a,typeString:t,userId:c,actions:w});return!((S=(m=D?.actions)===null||m===void 0?void 0:m.concepts)===null||S===void 0)&&S.length&&(w.concepts=JSON.parse(JSON.stringify(D.actions.concepts))),!((L=(E=D?.actions)===null||E===void 0?void 0:E.connections)===null||L===void 0)&&L.length&&(w.connections=JSON.parse(JSON.stringify(D.actions.connections))),D.data}catch(D){console.log("CreateTheConnectionLocal error sw: ",D),(0,k.handleServiceWorkerException)(D)}try{let D=4,W=yield n.R.getConnectionId(),U=0,P=0,M=0;U=v,P=I,M=i;let j=new N.N(0,0,0,0,0,0,0);return v!=I&&(j=new N.N(W,U,P,c,i,a,D),j.isTemp=!0,j.typeCharacter=t,k.LocalSyncData.AddConnection(j),b.G.AddConnection(j),w.connections.push(j)),j}catch(D){throw h.V.logError(R,c,"create","Unknown","Unknown",500,void 0,"CreateTheConnectionLocal",[v,I,i,a,t,c],"UnknownUserAgent",[]),D}})}function e(o,l,f){return C(this,arguments,void 0,function*(v,I,i,a={concepts:[],connections:[]}){var t,c,w,m;if(k.serviceWorker)try{const L=yield(0,k.sendMessage)("CreateConnection",{ofTheConcept:v,toTheConcept:I,connectionTypeString:i,actions:a});return!((c=(t=L?.actions)===null||t===void 0?void 0:t.concepts)===null||c===void 0)&&c.length&&(a.concepts=JSON.parse(JSON.stringify(L.actions.concepts))),!((m=(w=L?.actions)===null||w===void 0?void 0:w.connections)===null||m===void 0)&&m.length&&(a.connections=JSON.parse(JSON.stringify(L.actions.connections))),L.data}catch(L){console.log("CreateConnection error sw: ",L),(0,k.handleServiceWorkerException)(L)}let S=yield(0,k.MakeTheTypeConceptLocal)(i,999,999,999),E=v.userId;return yield r(v.id,I.id,S.id,1e3,i,E,a)})}},4818:(Y,x,y)=>{y.d(x,{m:()=>l,E:()=>f});var N=y(5205),b=y(1863),n=y(3518),h=function(v,I,i,a){return new(i||(i=Promise))(function(t,c){function w(E){try{S(a.next(E))}catch(L){c(L)}}function m(E){try{S(a.throw(E))}catch(L){c(L)}}function S(E){var L;E.done?t(E.value):(L=E.value,L instanceof i?L:new i(function(R){R(L)})).then(w,m)}S((a=a.apply(v,[])).next())})},k=y(9581),C=function(v,I,i,a){return new(i||(i=Promise))(function(t,c){function w(E){try{S(a.next(E))}catch(L){c(L)}}function m(E){try{S(a.throw(E))}catch(L){c(L)}}function S(E){var L;E.done?t(E.value):(L=E.value,L instanceof i?L:new i(function(R){R(L)})).then(w,m)}S((a=a.apply(v,[])).next())})},r=y(5239),e=y(4864),o=function(v,I,i,a){return new(i||(i=Promise))(function(t,c){function w(E){try{S(a.next(E))}catch(L){c(L)}}function m(E){try{S(a.throw(E))}catch(L){c(L)}}function S(E){var L;E.done?t(E.value):(L=E.value,L instanceof i?L:new i(function(R){R(L)})).then(w,m)}S((a=a.apply(v,[])).next())})};function l(v){var I=arguments;return o(this,void 0,void 0,function*(){const i=N.Logger.logfunction("DeleteConnectionById",I);if(N.serviceWorker)try{return(yield(0,N.sendMessage)("DeleteConnectionById",{id:v})).data}catch(t){console.error("DeleteConnectionById sw error: ",t),(0,N.handleServiceWorkerException)(t)}let a=!0;return v>0?(a=yield function(t){var c=arguments;return C(this,void 0,void 0,function*(){const w=N.Logger.logfunction("DeleteTheConnection",c);let m=!1;try{const S=new FormData;S.append("id",t.toString());let E=(0,n.BZ)();const L=yield fetch(k.B.DeleteTheConnectionUrl(),{method:"POST",headers:E,body:S,redirect:"follow"});N.Logger.logUpdate(w),L.ok?m=(yield L.json()).success:(console.log("Delete connection error status: ",L.status),(0,b.ry)(L)),m&&N.ConnectionData.AddNpConn(t)}catch(S){S instanceof Error?console.log("Delete connection error message: ",S.message):console.log("Delete connection unexpected error: ",S),(0,b.Mb)(S,k.B.DeleteTheConnectionUrl()),(0,b.ey)(w,"DeleteTheConnection",S)}return m})}(v),r.O.removeNodeFromTree(v)):e.G.RemoveConnectionById(v),N.Logger.logUpdate(i),a})}function f(v){var I=arguments;return o(this,void 0,void 0,function*(){const i=N.Logger.logfunction("DeleteConnectionByIdBulk",I);if(N.serviceWorker)try{return(yield(0,N.sendMessage)("DeleteConnectionByIdBulk",{ids:v})).data}catch(t){console.error("DeleteConnectionByIdBulk sw error: ",t),(0,N.handleServiceWorkerException)(t)}let a=yield function(t){var c=arguments;return h(this,void 0,void 0,function*(){const w=N.Logger.logfunction("DeleteTheConnectionBulkApi",c);let m=!1;try{let S=(0,n.BZ)();S.append("Content-Type","application/json");const E=yield fetch(N.BaseUrl.DeleteTheConnectionBulkUrl(),{method:"POST",headers:S,body:JSON.stringify(t)});if(N.Logger.logUpdate(w),E.ok?m=(yield E.json()).success:(console.log("Delete connection Bulk Api error status: ",E.status),(0,b.ry)(E)),m)for(let L=0;L<t.length;L++){let R=t[L];N.ConnectionData.AddNpConn(R)}}catch(S){S instanceof Error?console.log("Delete connection Bulk Api error message: ",S.message):console.log("Delete connection Bulk Api unexpected error: ",S),(0,b.Mb)(S,N.BaseUrl.DeleteTheConnectionUrl()),(0,b.ey)(w,"DeleteTheConnectionBulkApi",S)}return m})}(v);if(a)for(let t=0;t<v.length;t++){let c=v[t];c>0?r.O.removeNodeFromTree(c):e.G.RemoveConnectionById(c)}return N.Logger.logUpdate(i),a})}},4864:(Y,x,y)=>{y.d(x,{G:()=>C});var N=y(2155),b=y(8286),n=y(205),h=y(628),k=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function I(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(w){w(c)})).then(I,i)}a((l=l.apply(r,[])).next())})};class C{constructor(){this.name="Connection Array"}static CheckContains(e){for(var o=!1,l=0;l<this.connectionArray.length;l++)this.connectionArray[l].id==e.id&&(o=!0);return o}static AddConnection(e){this.CheckContains(e)&&this.RemoveConnection(e),e.id,this.connectionArray.push(e)}static AddConnectionToMemory(e){this.CheckContains(e)&&this.RemoveConnection(e),this.connectionArray.push(e)}static AddToDictionary(e){this.connectionDictionary[e.id]=e}static RemoveConnection(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e.id&&this.connectionArray.splice(o,1);e.id}static RemoveConnectionById(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e&&this.connectionArray.splice(o,1);h.H.RemoveConnectionById(e)}static AddPermanentConnection(e){e.id>0&&b.d.AddConnection(function(o){let l=new N.N(0,0,0,0,0,0,0);return l.ofTheConceptId=o.ofTheConceptId,l.toTheConceptId=o.toTheConceptId,l.typeId=o.typeId,l.orderId=o.orderId,l.id=o.id,l}(e))}static GetConnection(e){var o;o=null;for(var l=0;l<this.connectionArray.length;l++)this.connectionArray[l].id==e&&(o=this.connectionArray[l]);return o}static waitForDataToLoad(){return k(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isLocalConnectionLoaded)return e("done");setTimeout(C.checkFlag,1e3,e)}static GetConnectionsOfCompositionLocal(e){return k(this,void 0,void 0,function*(){var o=[];try{for(var l=0;l<this.connectionArray.length;l++)this.connectionArray[l].typeId==e&&o.push(this.connectionArray[l]);return o}catch{return o}})}static GetConnectionOfCompositionAndTypeLocal(e,o){return k(this,void 0,void 0,function*(){var l=[];try{for(var f=0;f<this.connectionArray.length;f++)this.connectionArray[f].typeId==e&&this.connectionArray[f].ofTheConceptId==o&&l.push(this.connectionArray[f]);return l}catch{return l}})}getName(){return this.name}}C.connectionArray=[],C.connectionDictionary=[]},5020:(Y,x,y)=>{y.d(x,{A:()=>k});var N=y(5205),b=y(3026),n=y(205),h=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,[])).next())})};function k(){return h(this,void 0,void 0,function*(){try{let C=[];if(Array.isArray(C))for(let r=0;r<C.length;r++){let e=C[r];b.I.AddConceptToMemory(e)}n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0}catch(C){throw yield(0,N.DelayFunctionExecution)(2e3,k()),{message:"Cannot create Binary Tree Concept",ok:!1,status:400,data:C}}})}},5042:Y=>{Y.exports={nanoid:(x=21)=>{let y="",N=0|x;for(;N--;)y+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return y},customAlphabet:(x,y=21)=>(N=y)=>{let b="",n=0|N;for(;n--;)b+=x[Math.random()*x.length|0];return b}}},5170:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b,n=L(y(518)),h=L(y(339)),k=L(y(4195)),C=L(y(425)),r=L(y(7071)),e=L(y(9720)),o=L(y(5799)),l=L(y(7324)),f=E(y(5588)),v=L(y(1669)),I=L(y(1704)),i=L(y(2918)),a=L(y(263)),t=E(y(2648)),c=E(y(71)),w=E(y(1581)),m=y(9606);function S($){if(typeof WeakMap!="function")return null;var ie=new WeakMap,ue=new WeakMap;return(S=function(ee){return ee?ue:ie})($)}function E($,ie){if($&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var ue=S(ie);if(ue&&ue.has($))return ue.get($);var ee={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in $)if(te!=="default"&&Object.prototype.hasOwnProperty.call($,te)){var oe=Q?Object.getOwnPropertyDescriptor($,te):null;oe&&(oe.get||oe.set)?Object.defineProperty(ee,te,oe):ee[te]=$[te]}return ee.default=$,ue&&ue.set($,ee),ee}function L($){return $&&$.__esModule?$:{default:$}}function R($,ie){for(var ue=0;ue<ie.length;ue++){var ee=ie[ue];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty($,ee.key,ee)}}var D=((N={})[c.space]=!0,N[c.cr]=!0,N[c.feed]=!0,N[c.newline]=!0,N[c.tab]=!0,N),W=Object.assign({},D,((b={})[c.comment]=!0,b));function U($){return{line:$[t.FIELDS.START_LINE],column:$[t.FIELDS.START_COL]}}function P($){return{line:$[t.FIELDS.END_LINE],column:$[t.FIELDS.END_COL]}}function M($,ie,ue,ee){return{start:{line:$,column:ie},end:{line:ue,column:ee}}}function j($){return M($[t.FIELDS.START_LINE],$[t.FIELDS.START_COL],$[t.FIELDS.END_LINE],$[t.FIELDS.END_COL])}function J($,ie){if($)return M($[t.FIELDS.START_LINE],$[t.FIELDS.START_COL],ie[t.FIELDS.END_LINE],ie[t.FIELDS.END_COL])}function Z($,ie){var ue=$[ie];if(typeof ue=="string")return ue.indexOf("\\")!==-1&&((0,m.ensureObject)($,"raws"),$[ie]=(0,m.unesc)(ue),$.raws[ie]===void 0&&($.raws[ie]=ue)),$}function K($,ie){for(var ue=-1,ee=[];(ue=$.indexOf(ie,ue+1))!==-1;)ee.push(ue);return ee}var se=function(){function $(Q,te){te===void 0&&(te={}),this.rule=Q,this.options=Object.assign({lossy:!1,safe:!1},te),this.position=0,this.css=typeof this.rule=="string"?this.rule:this.rule.selector,this.tokens=(0,t.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var oe=J(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new n.default({source:oe}),this.root.errorGenerator=this._errorGenerator();var H=new h.default({source:{start:{line:1,column:1}},sourceIndex:0});this.root.append(H),this.current=H,this.loop()}var ie,ue,ee=$.prototype;return ee._errorGenerator=function(){var Q=this;return function(te,oe){return typeof Q.rule=="string"?new Error(te):Q.rule.error(te,oe)}},ee.attribute=function(){var Q=[],te=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[t.FIELDS.TYPE]!==c.closeSquare;)Q.push(this.currToken),this.position++;if(this.currToken[t.FIELDS.TYPE]!==c.closeSquare)return this.expected("closing square bracket",this.currToken[t.FIELDS.START_POS]);var oe=Q.length,H={source:M(te[1],te[2],this.currToken[3],this.currToken[4]),sourceIndex:te[t.FIELDS.START_POS]};if(oe===1&&!~[c.word].indexOf(Q[0][t.FIELDS.TYPE]))return this.expected("attribute",Q[0][t.FIELDS.START_POS]);for(var re=0,le="",ae="",he=null,Ce=!1;re<oe;){var we=Q[re],ve=this.content(we),ke=Q[re+1];switch(we[t.FIELDS.TYPE]){case c.space:if(Ce=!0,this.options.lossy)break;if(he){(0,m.ensureObject)(H,"spaces",he);var Ee=H.spaces[he].after||"";H.spaces[he].after=Ee+ve;var ge=(0,m.getProp)(H,"raws","spaces",he,"after")||null;ge&&(H.raws.spaces[he].after=ge+ve)}else le+=ve,ae+=ve;break;case c.asterisk:ke[t.FIELDS.TYPE]===c.equals?(H.operator=ve,he="operator"):H.namespace&&(he!=="namespace"||Ce)||!ke||(le&&((0,m.ensureObject)(H,"spaces","attribute"),H.spaces.attribute.before=le,le=""),ae&&((0,m.ensureObject)(H,"raws","spaces","attribute"),H.raws.spaces.attribute.before=le,ae=""),H.namespace=(H.namespace||"")+ve,(0,m.getProp)(H,"raws","namespace")&&(H.raws.namespace+=ve),he="namespace"),Ce=!1;break;case c.dollar:if(he==="value"){var xe=(0,m.getProp)(H,"raws","value");H.value+="$",xe&&(H.raws.value=xe+"$");break}case c.caret:ke[t.FIELDS.TYPE]===c.equals&&(H.operator=ve,he="operator"),Ce=!1;break;case c.combinator:if(ve==="~"&&ke[t.FIELDS.TYPE]===c.equals&&(H.operator=ve,he="operator"),ve!=="|"){Ce=!1;break}ke[t.FIELDS.TYPE]===c.equals?(H.operator=ve,he="operator"):H.namespace||H.attribute||(H.namespace=!0),Ce=!1;break;case c.word:if(ke&&this.content(ke)==="|"&&Q[re+2]&&Q[re+2][t.FIELDS.TYPE]!==c.equals&&!H.operator&&!H.namespace)H.namespace=ve,he="namespace";else if(!H.attribute||he==="attribute"&&!Ce)le&&((0,m.ensureObject)(H,"spaces","attribute"),H.spaces.attribute.before=le,le=""),ae&&((0,m.ensureObject)(H,"raws","spaces","attribute"),H.raws.spaces.attribute.before=ae,ae=""),H.attribute=(H.attribute||"")+ve,(0,m.getProp)(H,"raws","attribute")&&(H.raws.attribute+=ve),he="attribute";else if(!H.value&&H.value!==""||he==="value"&&!Ce&&!H.quoteMark){var Ae=(0,m.unesc)(ve),ce=(0,m.getProp)(H,"raws","value")||"",Te=H.value||"";H.value=Te+Ae,H.quoteMark=null,(Ae!==ve||ce)&&((0,m.ensureObject)(H,"raws"),H.raws.value=(ce||Te)+ve),he="value"}else{var Oe=ve==="i"||ve==="I";!H.value&&H.value!==""||!H.quoteMark&&!Ce?(H.value||H.value==="")&&(he="value",H.value+=ve,H.raws.value&&(H.raws.value+=ve)):(H.insensitive=Oe,Oe&&ve!=="I"||((0,m.ensureObject)(H,"raws"),H.raws.insensitiveFlag=ve),he="insensitive",le&&((0,m.ensureObject)(H,"spaces","insensitive"),H.spaces.insensitive.before=le,le=""),ae&&((0,m.ensureObject)(H,"raws","spaces","insensitive"),H.raws.spaces.insensitive.before=ae,ae=""))}Ce=!1;break;case c.str:if(!H.attribute||!H.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:we[t.FIELDS.START_POS]});var be=(0,f.unescapeValue)(ve),pe=be.unescaped,De=be.quoteMark;H.value=pe,H.quoteMark=De,he="value",(0,m.ensureObject)(H,"raws"),H.raws.value=ve,Ce=!1;break;case c.equals:if(!H.attribute)return this.expected("attribute",we[t.FIELDS.START_POS],ve);if(H.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:we[t.FIELDS.START_POS]});H.operator=H.operator?H.operator+ve:ve,he="operator",Ce=!1;break;case c.comment:if(he)if(Ce||ke&&ke[t.FIELDS.TYPE]===c.space||he==="insensitive"){var _e=(0,m.getProp)(H,"spaces",he,"after")||"",Be=(0,m.getProp)(H,"raws","spaces",he,"after")||_e;(0,m.ensureObject)(H,"raws","spaces",he),H.raws.spaces[he].after=Be+ve}else{var Ne=H[he]||"",Ue=(0,m.getProp)(H,"raws",he)||Ne;(0,m.ensureObject)(H,"raws"),H.raws[he]=Ue+ve}else ae+=ve;break;default:return this.error('Unexpected "'+ve+'" found.',{index:we[t.FIELDS.START_POS]})}re++}Z(H,"attribute"),Z(H,"namespace"),this.newNode(new f.default(H)),this.position++},ee.parseWhitespaceEquivalentTokens=function(Q){Q<0&&(Q=this.tokens.length);var te=this.position,oe=[],H="",re=void 0;do if(D[this.currToken[t.FIELDS.TYPE]])this.options.lossy||(H+=this.content());else if(this.currToken[t.FIELDS.TYPE]===c.comment){var le={};H&&(le.before=H,H=""),re=new C.default({value:this.content(),source:j(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS],spaces:le}),oe.push(re)}while(++this.position<Q);if(H){if(re)re.spaces.after=H;else if(!this.options.lossy){var ae=this.tokens[te],he=this.tokens[this.position-1];oe.push(new o.default({value:"",source:M(ae[t.FIELDS.START_LINE],ae[t.FIELDS.START_COL],he[t.FIELDS.END_LINE],he[t.FIELDS.END_COL]),sourceIndex:ae[t.FIELDS.START_POS],spaces:{before:H,after:""}}))}}return oe},ee.convertWhitespaceNodesToSpace=function(Q,te){var oe=this;te===void 0&&(te=!1);var H="",re="";return Q.forEach(function(le){var ae=oe.lossySpace(le.spaces.before,te),he=oe.lossySpace(le.rawSpaceBefore,te);H+=ae+oe.lossySpace(le.spaces.after,te&&ae.length===0),re+=ae+le.value+oe.lossySpace(le.rawSpaceAfter,te&&he.length===0)}),re===H&&(re=void 0),{space:H,rawSpace:re}},ee.isNamedCombinator=function(Q){return Q===void 0&&(Q=this.position),this.tokens[Q+0]&&this.tokens[Q+0][t.FIELDS.TYPE]===c.slash&&this.tokens[Q+1]&&this.tokens[Q+1][t.FIELDS.TYPE]===c.word&&this.tokens[Q+2]&&this.tokens[Q+2][t.FIELDS.TYPE]===c.slash},ee.namedCombinator=function(){if(this.isNamedCombinator()){var Q=this.content(this.tokens[this.position+1]),te=(0,m.unesc)(Q).toLowerCase(),oe={};te!==Q&&(oe.value="/"+Q+"/");var H=new I.default({value:"/"+te+"/",source:M(this.currToken[t.FIELDS.START_LINE],this.currToken[t.FIELDS.START_COL],this.tokens[this.position+2][t.FIELDS.END_LINE],this.tokens[this.position+2][t.FIELDS.END_COL]),sourceIndex:this.currToken[t.FIELDS.START_POS],raws:oe});return this.position=this.position+3,H}this.unexpected()},ee.combinator=function(){var Q=this;if(this.content()==="|")return this.namespace();var te=this.locateNextMeaningfulToken(this.position);if(!(te<0||this.tokens[te][t.FIELDS.TYPE]===c.comma||this.tokens[te][t.FIELDS.TYPE]===c.closeParenthesis)){var oe,H=this.currToken,re=void 0;if(te>this.position&&(re=this.parseWhitespaceEquivalentTokens(te)),this.isNamedCombinator()?oe=this.namedCombinator():this.currToken[t.FIELDS.TYPE]===c.combinator?(oe=new I.default({value:this.content(),source:j(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS]}),this.position++):D[this.currToken[t.FIELDS.TYPE]]||re||this.unexpected(),oe){if(re){var le=this.convertWhitespaceNodesToSpace(re),ae=le.space,he=le.rawSpace;oe.spaces.before=ae,oe.rawSpaceBefore=he}}else{var Ce=this.convertWhitespaceNodesToSpace(re,!0),we=Ce.space,ve=Ce.rawSpace;ve||(ve=we);var ke={},Ee={spaces:{}};we.endsWith(" ")&&ve.endsWith(" ")?(ke.before=we.slice(0,we.length-1),Ee.spaces.before=ve.slice(0,ve.length-1)):we.startsWith(" ")&&ve.startsWith(" ")?(ke.after=we.slice(1),Ee.spaces.after=ve.slice(1)):Ee.value=ve,oe=new I.default({value:" ",source:J(H,this.tokens[this.position-1]),sourceIndex:H[t.FIELDS.START_POS],spaces:ke,raws:Ee})}return this.currToken&&this.currToken[t.FIELDS.TYPE]===c.space&&(oe.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(oe)}var ge=this.parseWhitespaceEquivalentTokens(te);if(ge.length>0){var xe=this.current.last;if(xe){var Ae=this.convertWhitespaceNodesToSpace(ge),ce=Ae.space,Te=Ae.rawSpace;Te!==void 0&&(xe.rawSpaceAfter+=Te),xe.spaces.after+=ce}else ge.forEach(function(Oe){return Q.newNode(Oe)})}},ee.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;this.current._inferEndPosition();var Q=new h.default({source:{start:U(this.tokens[this.position+1])},sourceIndex:this.tokens[this.position+1][t.FIELDS.START_POS]});this.current.parent.append(Q),this.current=Q,this.position++},ee.comment=function(){var Q=this.currToken;this.newNode(new C.default({value:this.content(),source:j(Q),sourceIndex:Q[t.FIELDS.START_POS]})),this.position++},ee.error=function(Q,te){throw this.root.error(Q,te)},ee.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[t.FIELDS.START_POS]})},ee.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[t.FIELDS.START_POS])},ee.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[t.FIELDS.START_POS])},ee.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[t.FIELDS.START_POS])},ee.unexpectedPipe=function(){return this.error("Unexpected '|'.",this.currToken[t.FIELDS.START_POS])},ee.namespace=function(){var Q=this.prevToken&&this.content(this.prevToken)||!0;return this.nextToken[t.FIELDS.TYPE]===c.word?(this.position++,this.word(Q)):this.nextToken[t.FIELDS.TYPE]===c.asterisk?(this.position++,this.universal(Q)):void this.unexpectedPipe()},ee.nesting=function(){if(this.nextToken&&this.content(this.nextToken)==="|")this.position++;else{var Q=this.currToken;this.newNode(new i.default({value:this.content(),source:j(Q),sourceIndex:Q[t.FIELDS.START_POS]})),this.position++}},ee.parentheses=function(){var Q=this.current.last,te=1;if(this.position++,Q&&Q.type===w.PSEUDO){var oe=new h.default({source:{start:U(this.tokens[this.position])},sourceIndex:this.tokens[this.position][t.FIELDS.START_POS]}),H=this.current;for(Q.append(oe),this.current=oe;this.position<this.tokens.length&&te;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&te++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&te--,te?this.parse():(this.current.source.end=P(this.currToken),this.current.parent.source.end=P(this.currToken),this.position++);this.current=H}else{for(var re,le=this.currToken,ae="(";this.position<this.tokens.length&&te;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&te++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&te--,re=this.currToken,ae+=this.parseParenthesisToken(this.currToken),this.position++;Q?Q.appendToPropertyAndEscape("value",ae,ae):this.newNode(new o.default({value:ae,source:M(le[t.FIELDS.START_LINE],le[t.FIELDS.START_COL],re[t.FIELDS.END_LINE],re[t.FIELDS.END_COL]),sourceIndex:le[t.FIELDS.START_POS]}))}if(te)return this.expected("closing parenthesis",this.currToken[t.FIELDS.START_POS])},ee.pseudo=function(){for(var Q=this,te="",oe=this.currToken;this.currToken&&this.currToken[t.FIELDS.TYPE]===c.colon;)te+=this.content(),this.position++;return this.currToken?this.currToken[t.FIELDS.TYPE]!==c.word?this.expected(["pseudo-class","pseudo-element"],this.currToken[t.FIELDS.START_POS]):void this.splitWord(!1,function(H,re){te+=H,Q.newNode(new l.default({value:te,source:J(oe,Q.currToken),sourceIndex:oe[t.FIELDS.START_POS]})),re>1&&Q.nextToken&&Q.nextToken[t.FIELDS.TYPE]===c.openParenthesis&&Q.error("Misplaced parenthesis.",{index:Q.nextToken[t.FIELDS.START_POS]})}):this.expected(["pseudo-class","pseudo-element"],this.position-1)},ee.space=function(){var Q=this.content();this.position===0||this.prevToken[t.FIELDS.TYPE]===c.comma||this.prevToken[t.FIELDS.TYPE]===c.openParenthesis||this.current.nodes.every(function(te){return te.type==="comment"})?(this.spaces=this.optionalSpace(Q),this.position++):this.position===this.tokens.length-1||this.nextToken[t.FIELDS.TYPE]===c.comma||this.nextToken[t.FIELDS.TYPE]===c.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(Q),this.position++):this.combinator()},ee.string=function(){var Q=this.currToken;this.newNode(new o.default({value:this.content(),source:j(Q),sourceIndex:Q[t.FIELDS.START_POS]})),this.position++},ee.universal=function(Q){var te=this.nextToken;if(te&&this.content(te)==="|")return this.position++,this.namespace();var oe=this.currToken;this.newNode(new v.default({value:this.content(),source:j(oe),sourceIndex:oe[t.FIELDS.START_POS]}),Q),this.position++},ee.splitWord=function(Q,te){for(var oe=this,H=this.nextToken,re=this.content();H&&~[c.dollar,c.caret,c.equals,c.word].indexOf(H[t.FIELDS.TYPE]);){this.position++;var le=this.content();if(re+=le,le.lastIndexOf("\\")===le.length-1){var ae=this.nextToken;ae&&ae[t.FIELDS.TYPE]===c.space&&(re+=this.requiredSpace(this.content(ae)),this.position++)}H=this.nextToken}var he=K(re,".").filter(function(ke){var Ee=re[ke-1]==="\\",ge=/^\d+\.\d+%$/.test(re);return!Ee&&!ge}),Ce=K(re,"#").filter(function(ke){return re[ke-1]!=="\\"}),we=K(re,"#{");we.length&&(Ce=Ce.filter(function(ke){return!~we.indexOf(ke)}));var ve=(0,a.default)(function(){var ke=Array.prototype.concat.apply([],arguments);return ke.filter(function(Ee,ge){return ge===ke.indexOf(Ee)})}([0].concat(he,Ce)));ve.forEach(function(ke,Ee){var ge,xe=ve[Ee+1]||re.length,Ae=re.slice(ke,xe);if(Ee===0&&te)return te.call(oe,Ae,ve.length);var ce=oe.currToken,Te=ce[t.FIELDS.START_POS]+ve[Ee],Oe=M(ce[1],ce[2]+ke,ce[3],ce[2]+(xe-1));if(~he.indexOf(ke)){var be={value:Ae.slice(1),source:Oe,sourceIndex:Te};ge=new k.default(Z(be,"value"))}else if(~Ce.indexOf(ke)){var pe={value:Ae.slice(1),source:Oe,sourceIndex:Te};ge=new r.default(Z(pe,"value"))}else{var De={value:Ae,source:Oe,sourceIndex:Te};Z(De,"value"),ge=new e.default(De)}oe.newNode(ge,Q),Q=null}),this.position++},ee.word=function(Q){var te=this.nextToken;return te&&this.content(te)==="|"?(this.position++,this.namespace()):this.splitWord(Q)},ee.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},ee.parse=function(Q){switch(this.currToken[t.FIELDS.TYPE]){case c.space:this.space();break;case c.comment:this.comment();break;case c.openParenthesis:this.parentheses();break;case c.closeParenthesis:Q&&this.missingParenthesis();break;case c.openSquare:this.attribute();break;case c.dollar:case c.caret:case c.equals:case c.word:this.word();break;case c.colon:this.pseudo();break;case c.comma:this.comma();break;case c.asterisk:this.universal();break;case c.ampersand:this.nesting();break;case c.slash:case c.combinator:this.combinator();break;case c.str:this.string();break;case c.closeSquare:this.missingSquareBracket();case c.semicolon:this.missingBackslash();default:this.unexpected()}},ee.expected=function(Q,te,oe){if(Array.isArray(Q)){var H=Q.pop();Q=Q.join(", ")+" or "+H}var re=/^[aeiou]/.test(Q[0])?"an":"a";return oe?this.error("Expected "+re+" "+Q+', found "'+oe+'" instead.',{index:te}):this.error("Expected "+re+" "+Q+".",{index:te})},ee.requiredSpace=function(Q){return this.options.lossy?" ":Q},ee.optionalSpace=function(Q){return this.options.lossy?"":Q},ee.lossySpace=function(Q,te){return this.options.lossy?te?" ":"":Q},ee.parseParenthesisToken=function(Q){var te=this.content(Q);return Q[t.FIELDS.TYPE]===c.space?this.requiredSpace(te):te},ee.newNode=function(Q,te){return te&&(/^ +$/.test(te)&&(this.options.lossy||(this.spaces=(this.spaces||"")+te),te=!0),Q.namespace=te,Z(Q,"namespace")),this.spaces&&(Q.spaces.before=this.spaces,this.spaces=""),this.current.append(Q)},ee.content=function(Q){return Q===void 0&&(Q=this.currToken),this.css.slice(Q[t.FIELDS.START_POS],Q[t.FIELDS.END_POS])},ee.locateNextMeaningfulToken=function(Q){Q===void 0&&(Q=this.position+1);for(var te=Q;te<this.tokens.length;){if(!W[this.tokens[te][t.FIELDS.TYPE]])return te;te++}return-1},ie=$,(ue=[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}])&&R(ie.prototype,ue),Object.defineProperty(ie,"prototype",{writable:!1}),$}();x.default=se,Y.exports=x.default},5205:(Y,x,y)=>{y.d(x,{ADMIN:()=>Ri,ALLID:()=>We.BG,AccessTracker:()=>kn.J,AddGhostConcept:()=>Ii,Anomaly:()=>Xe,BaseUrl:()=>r.B,BinaryTree:()=>no.W,BuildWidgetFromId:()=>Dt.Cp,BuilderStatefulWidget:()=>bn,Composition:()=>An,CompositionBinaryTree:()=>$t,CompositionNode:()=>ho,Concept:()=>qi.j,ConceptsData:()=>C.I,Connection:()=>ee.N,ConnectionData:()=>Pt.d,CountInfo:()=>lr.y,CreateComposition:()=>se.A,CreateConnection:()=>Rt.d,CreateConnectionBetweenEntityLocal:()=>Eo,CreateConnectionBetweenTwoConcepts:()=>ve,CreateConnectionBetweenTwoConceptsGeneral:()=>Ee,CreateConnectionBetweenTwoConceptsLocal:()=>To.h,CreateData:()=>Kn,CreateDefaultConcept:()=>te.o,CreateDefaultLConcept:()=>yo.u,CreateSession:()=>yi,CreateSessionVisit:()=>vi,CreateTheCompositionLocal:()=>$.R,CreateTheCompositionWithCache:()=>Nn,CreateTheConnection:()=>Oe.q,CreateTheConnectionGeneral:()=>le,CreateTheConnectionLocal:()=>Rt.F,DATAID:()=>We.y0,DATAIDDATE:()=>We.iw,DATAV2:()=>We.pU,DelayFunctionExecution:()=>Bi,DeleteConceptById:()=>oo,DeleteConceptLocal:()=>Ei,DeleteConnectionById:()=>ae.m,DeleteConnectionByIdBulk:()=>ae.E,DeleteConnectionByType:()=>mn.$S,DeleteConnectionByTypeBulk:()=>mn.L0,DeleteUser:()=>Ho,DependencyObserver:()=>Ht.w,Environments:()=>Ro,FilterSearch:()=>zn,FormatFromConnections:()=>tn.vw,FormatFromConnectionsAltered:()=>tn.y8,FreeschemaQuery:()=>kt,FreeschemaQueryApi:()=>Qn,GetAllConnectionsOfComposition:()=>K.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>mn.WC,GetComposition:()=>i.Nj,GetCompositionBulk:()=>ot.dF,GetCompositionBulkWithDataId:()=>ot.cw,GetCompositionFromConnectionsWithDataId:()=>ot.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>ot.km,GetCompositionFromConnectionsWithDataIdInObject:()=>ot.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>ot.Nt,GetCompositionFromConnectionsWithIndex:()=>ot.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>ot.hG,GetCompositionFromMemoryWithConnections:()=>i.JA,GetCompositionList:()=>w,GetCompositionListAll:()=>m,GetCompositionListAllWithId:()=>S,GetCompositionListListener:()=>Mi,GetCompositionListLocal:()=>J,GetCompositionListLocalWithId:()=>Z,GetCompositionListWithId:()=>E,GetCompositionListWithIdUpdated:()=>L,GetCompositionListener:()=>Ui,GetCompositionLocal:()=>U,GetCompositionLocalWithId:()=>P,GetCompositionWithAllIds:()=>i.Mb,GetCompositionWithCache:()=>hi,GetCompositionWithDataIdBulk:()=>fi,GetCompositionWithDataIdWithCache:()=>fo,GetCompositionWithId:()=>i.yz,GetCompositionWithIdAndDateFromMemory:()=>i.Ez,GetConceptBulk:()=>gn.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>be.A,GetConnectionBetweenTwoConceptsLinker:()=>Oi,GetConnectionBulk:()=>Vn.j,GetConnectionById:()=>Jo,GetConnectionDataPrefetch:()=>ot.QL,GetConnectionOfTheConcept:()=>ue,GetConnectionTypeForCount:()=>So.V,GetFreeschemaImage:()=>Gr,GetFreeschemaImageUrl:()=>Fr,GetImageApi:()=>Go,GetLink:()=>De,GetLinkListListener:()=>$i,GetLinkListener:()=>Vi.d,GetLinkRaw:()=>_e,GetLinkerConnectionFromConcepts:()=>Zt,GetLinkerConnectionToConcepts:()=>jo,GetRelation:()=>go,GetRelationLocal:()=>Ai,GetRelationRaw:()=>wi,GetTheConcept:()=>he.A,GetTheConceptLocal:()=>mo.f,GetUserGhostId:()=>ki,JUSTDATA:()=>We.ZJ,LConcept:()=>zi,LConnection:()=>Ji,LISTNORMAL:()=>We.SL,LocalConceptsData:()=>I.v,LocalSyncData:()=>nn.H,LocalTransaction:()=>No,LogEvent:()=>dr,Logger:()=>ye.V,LoginToBackend:()=>oi,MakeTheInstanceConcept:()=>Ce.A,MakeTheInstanceConceptLocal:()=>ge.k,MakeTheTimestamp:()=>Qo,MakeTheTypeConceptApi:()=>ze,MakeTheTypeConceptLocal:()=>Be.$,NORMAL:()=>We.yv,PRIVATE:()=>Di,PUBLIC:()=>Gi,PatcherStructure:()=>Qi,Prototype:()=>Br,RAW:()=>We.XZ,RecursiveSearchApi:()=>Yo,RecursiveSearchApiNewRawFullLinker:()=>Ko,RecursiveSearchApiRaw:()=>io,RecursiveSearchApiRawFullLinker:()=>Zo,RecursiveSearchApiWithInternalConnections:()=>Xo,RecursiveSearchListener:()=>ji,SchemaQuery:()=>ar,SchemaQueryListener:()=>Cn,SearchAllConcepts:()=>li,SearchLinkInternal:()=>bi,SearchLinkInternalAll:()=>_i,SearchLinkMultipleAll:()=>tn.cf,SearchLinkMultipleAllObservable:()=>Io,SearchLinkMultipleApi:()=>h.j,SearchQuery:()=>Kt,SearchStructure:()=>Xi,SearchWithLinker:()=>di,SearchWithTypeAndLinker:()=>qt.zl,SearchWithTypeAndLinkerApi:()=>ko,Selector:()=>ur,SessionData:()=>Yi,Signin:()=>si,Signup:()=>ii,SignupEntity:()=>ri,SplitStrings:()=>k.f,StatefulWidget:()=>Jn,SyncData:()=>Q.Y,TrashTheConcept:()=>qo,UpdateComposition:()=>ci,UpdateCompositionLocal:()=>Si.D,UserBinaryTree:()=>en,Validator:()=>ir,ViewInternalData:()=>wo,ViewInternalDataApi:()=>Co,WidgetTree:()=>_o,convertFromConceptToLConcept:()=>$n.F4,convertFromLConceptToConcept:()=>$n.dp,convertWidgetTreeToWidget:()=>En,convertWidgetTreeToWidgetWithWrapper:()=>Oo,createFormFieldData:()=>rr,createPrototypeLocal:()=>Do,dispatchIdEvent:()=>Mr,getFromDatabaseWithType:()=>ce,getObjectsFromIndexDb:()=>Te,getUploadFileLimit:()=>ni,getUserDetails:()=>cr.s,getWidgetBulkFromId:()=>rn,getWidgetFromId:()=>Ar,handleServiceWorkerException:()=>Qe,hasActivatedSW:()=>Po,importLatestWidget:()=>Cr,importRecentWidget:()=>wr,init:()=>Ur,orderTheConnections:()=>Hi.X,recursiveFetch:()=>i.zN,recursiveFetchNew:()=>yn,removeAllChildren:()=>xo,renderImportedWidget:()=>Tr,renderLatestWidget:()=>Xn,renderPage:()=>mr,renderWidget:()=>kr,searchLinkMultipleListener:()=>Fi,sendEmail:()=>nr,sendMessage:()=>$e,serviceWorker:()=>Ge,setHasActivatedSW:()=>Pr,storeToDatabase:()=>Ae,subscribedListeners:()=>Fo,unwrapContainers:()=>Bo,updateAccessToken:()=>Uo,uploadAttachment:()=>ei,uploadFile:()=>co,uploadImage:()=>ao,uploadImageV2:()=>ti,validDocumentFormats:()=>so,validImageFormats:()=>ro}),y.r(x);var N={};y.r(N),y.d(N,{ADMIN:()=>Ri,ALLID:()=>We.BG,AccessTracker:()=>kn.J,AddGhostConcept:()=>Ii,Anomaly:()=>Xe,BaseUrl:()=>r.B,BinaryTree:()=>no.W,BuildWidgetFromId:()=>Dt.Cp,BuilderStatefulWidget:()=>bn,Composition:()=>An,CompositionBinaryTree:()=>$t,CompositionNode:()=>ho,Concept:()=>qi.j,ConceptsData:()=>C.I,Connection:()=>ee.N,ConnectionData:()=>Pt.d,CountInfo:()=>lr.y,CreateComposition:()=>se.A,CreateConnection:()=>Rt.d,CreateConnectionBetweenEntityLocal:()=>Eo,CreateConnectionBetweenTwoConcepts:()=>ve,CreateConnectionBetweenTwoConceptsGeneral:()=>Ee,CreateConnectionBetweenTwoConceptsLocal:()=>To.h,CreateData:()=>Kn,CreateDefaultConcept:()=>te.o,CreateDefaultLConcept:()=>yo.u,CreateSession:()=>yi,CreateSessionVisit:()=>vi,CreateTheCompositionLocal:()=>$.R,CreateTheCompositionWithCache:()=>Nn,CreateTheConnection:()=>Oe.q,CreateTheConnectionGeneral:()=>le,CreateTheConnectionLocal:()=>Rt.F,DATAID:()=>We.y0,DATAIDDATE:()=>We.iw,DATAV2:()=>We.pU,DelayFunctionExecution:()=>Bi,DeleteConceptById:()=>oo,DeleteConceptLocal:()=>Ei,DeleteConnectionById:()=>ae.m,DeleteConnectionByIdBulk:()=>ae.E,DeleteConnectionByType:()=>mn.$S,DeleteConnectionByTypeBulk:()=>mn.L0,DeleteUser:()=>Ho,DependencyObserver:()=>Ht.w,Environments:()=>Ro,FilterSearch:()=>zn,FormatFromConnections:()=>tn.vw,FormatFromConnectionsAltered:()=>tn.y8,FreeschemaQuery:()=>kt,FreeschemaQueryApi:()=>Qn,GetAllConnectionsOfComposition:()=>K.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>mn.WC,GetComposition:()=>i.Nj,GetCompositionBulk:()=>ot.dF,GetCompositionBulkWithDataId:()=>ot.cw,GetCompositionFromConnectionsWithDataId:()=>ot.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>ot.km,GetCompositionFromConnectionsWithDataIdInObject:()=>ot.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>ot.Nt,GetCompositionFromConnectionsWithIndex:()=>ot.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>ot.hG,GetCompositionFromMemoryWithConnections:()=>i.JA,GetCompositionList:()=>w,GetCompositionListAll:()=>m,GetCompositionListAllWithId:()=>S,GetCompositionListListener:()=>Mi,GetCompositionListLocal:()=>J,GetCompositionListLocalWithId:()=>Z,GetCompositionListWithId:()=>E,GetCompositionListWithIdUpdated:()=>L,GetCompositionListener:()=>Ui,GetCompositionLocal:()=>U,GetCompositionLocalWithId:()=>P,GetCompositionWithAllIds:()=>i.Mb,GetCompositionWithCache:()=>hi,GetCompositionWithDataIdBulk:()=>fi,GetCompositionWithDataIdWithCache:()=>fo,GetCompositionWithId:()=>i.yz,GetCompositionWithIdAndDateFromMemory:()=>i.Ez,GetConceptBulk:()=>gn.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>be.A,GetConnectionBetweenTwoConceptsLinker:()=>Oi,GetConnectionBulk:()=>Vn.j,GetConnectionById:()=>Jo,GetConnectionDataPrefetch:()=>ot.QL,GetConnectionOfTheConcept:()=>ue,GetConnectionTypeForCount:()=>So.V,GetFreeschemaImage:()=>Gr,GetFreeschemaImageUrl:()=>Fr,GetImageApi:()=>Go,GetLink:()=>De,GetLinkListListener:()=>$i,GetLinkListener:()=>Vi.d,GetLinkRaw:()=>_e,GetLinkerConnectionFromConcepts:()=>Zt,GetLinkerConnectionToConcepts:()=>jo,GetRelation:()=>go,GetRelationLocal:()=>Ai,GetRelationRaw:()=>wi,GetTheConcept:()=>he.A,GetTheConceptLocal:()=>mo.f,GetUserGhostId:()=>ki,JUSTDATA:()=>We.ZJ,LConcept:()=>zi,LConnection:()=>Ji,LISTNORMAL:()=>We.SL,LocalConceptsData:()=>I.v,LocalSyncData:()=>nn.H,LocalTransaction:()=>No,LogEvent:()=>dr,Logger:()=>ye.V,LoginToBackend:()=>oi,MakeTheInstanceConcept:()=>Ce.A,MakeTheInstanceConceptLocal:()=>ge.k,MakeTheTimestamp:()=>Qo,MakeTheTypeConceptApi:()=>ze,MakeTheTypeConceptLocal:()=>Be.$,NORMAL:()=>We.yv,PRIVATE:()=>Di,PUBLIC:()=>Gi,PatcherStructure:()=>Qi,Prototype:()=>Br,RAW:()=>We.XZ,RecursiveSearchApi:()=>Yo,RecursiveSearchApiNewRawFullLinker:()=>Ko,RecursiveSearchApiRaw:()=>io,RecursiveSearchApiRawFullLinker:()=>Zo,RecursiveSearchApiWithInternalConnections:()=>Xo,RecursiveSearchListener:()=>ji,SchemaQuery:()=>ar,SchemaQueryListener:()=>Cn,SearchAllConcepts:()=>li,SearchLinkInternal:()=>bi,SearchLinkInternalAll:()=>_i,SearchLinkMultipleAll:()=>tn.cf,SearchLinkMultipleAllObservable:()=>Io,SearchLinkMultipleApi:()=>h.j,SearchQuery:()=>Kt,SearchStructure:()=>Xi,SearchWithLinker:()=>di,SearchWithTypeAndLinker:()=>qt.zl,SearchWithTypeAndLinkerApi:()=>ko,Selector:()=>ur,SessionData:()=>Yi,Signin:()=>si,Signup:()=>ii,SignupEntity:()=>ri,SplitStrings:()=>k.f,StatefulWidget:()=>Jn,SyncData:()=>Q.Y,TrashTheConcept:()=>qo,UpdateComposition:()=>ci,UpdateCompositionLocal:()=>Si.D,UserBinaryTree:()=>en,Validator:()=>ir,ViewInternalData:()=>wo,ViewInternalDataApi:()=>Co,WidgetTree:()=>_o,convertFromConceptToLConcept:()=>$n.F4,convertFromLConceptToConcept:()=>$n.dp,convertWidgetTreeToWidget:()=>En,convertWidgetTreeToWidgetWithWrapper:()=>Oo,createFormFieldData:()=>rr,createPrototypeLocal:()=>Do,dispatchIdEvent:()=>Mr,getFromDatabaseWithType:()=>ce,getObjectsFromIndexDb:()=>Te,getUploadFileLimit:()=>ni,getUserDetails:()=>cr.s,getWidgetBulkFromId:()=>rn,getWidgetFromId:()=>Ar,handleServiceWorkerException:()=>Qe,hasActivatedSW:()=>Po,importLatestWidget:()=>Cr,importRecentWidget:()=>wr,init:()=>Ur,orderTheConnections:()=>Hi.X,recursiveFetch:()=>i.zN,recursiveFetchNew:()=>yn,removeAllChildren:()=>xo,renderImportedWidget:()=>Tr,renderLatestWidget:()=>Xn,renderPage:()=>mr,renderWidget:()=>kr,searchLinkMultipleListener:()=>Fi,sendEmail:()=>nr,sendMessage:()=>$e,serviceWorker:()=>Ge,setHasActivatedSW:()=>Pr,storeToDatabase:()=>Ae,subscribedListeners:()=>Fo,unwrapContainers:()=>Bo,updateAccessToken:()=>Uo,uploadAttachment:()=>ei,uploadFile:()=>co,uploadImage:()=>ao,uploadImageV2:()=>ti,validDocumentFormats:()=>so,validImageFormats:()=>ro});var b=y(5020),n=y(205),h=y(2832),k=y(6467),C=y(3026),r=y(9581),e=y(3518),o=y(1863),l=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function f(B,u){var s=arguments;return l(this,void 0,void 0,function*(){const p=ye.V.logfunction("GetAllConceptsByType",s);try{var T=new URLSearchParams;T.append("type",B),T.append("user_id",u.toString());var A=(0,e.Xr)("application/x-www-form-urlencoded");const G=yield fetch(r.B.GetAllConceptsByTypeUrl(),{method:"POST",headers:A,body:T});if(G.ok){const _=yield G.json();for(var O=0;O<_.length;O++)C.I.AddConcept(_[O])}else console.log("GetAllConceptsByType error",G.status),(0,o.ry)(G)}catch(G){G instanceof Error?console.log("GetAllConceptsByType error message: ",G.message):console.log("GetAllConceptsByType unexpected error: ",G),(0,o.Mb)(G,r.B.GetAllConceptsByTypeUrl()),(0,o.ey)(p,"GetAllConceptsByType",G)}})}var v=y(8642),I=y(9736),i=y(8939),a=y(2013),t=y(8064),c=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function w(B,u){var s=arguments;return c(this,arguments,void 0,function*(p,T,A=10,O=1){const G=ye.V.logfunction("GetCompositionList",s)||{};if(Ge){G.serviceWorker=!0;try{const d=yield $e("GetCompositionList",{compositionName:p,userId:T,inpage:A,page:O});return ye.V.logUpdate(G),d.data}catch(d){console.error("GetCompositionList sw error: ",d),(0,o.ey)(G,"GetCompositionList",d),Qe(d)}}let _=yield(0,a.A)(p),g=[];if(_){yield f(p,T);let d=yield C.I.GetConceptsByTypeIdAndUser(_.id,T),F=A*(O-1),V=[];for(let z=F;z<F+A;z++)d[z]&&V.push(d[z].id);yield(0,v.Y)(V);for(let z=F;z<F+A;z++)if(d[z]){let q=yield(0,i.kx)(d[z].id);g.push(q)}}return ye.V.logUpdate(G),g})}function m(B,u){return c(this,arguments,void 0,function*(s,p,T=10,A=1){let O=J(s,p),G=w(s,p),_=[];return Promise.race([O,G]).then(g=>{console.log("Promise result",g),_.push(...g)}).catch(g=>{console.log("error in handling",g)}),G.then(g=>{console.log("This is the second promise result",g),_.push(...g)}),_})}function S(B,u){return c(this,arguments,void 0,function*(s,p,T=10,A=1){if(Ge)try{return(yield $e("GetCompositionListAllWithId",{compositionName:s,userId:p,inpage:T,page:A})).data}catch(z){console.error("GetCompositionListAllWithId sw error: ",z),Qe(z)}let O=yield(0,t.Ay)(s),G=yield(0,a.A)(s),_=[],g=[],d=[],F=[];O.id!=0&&(g=yield I.v.GetConceptsByTypeIdAndUser(O.id,p)),G.id!=0&&(yield f(s,p),F=yield C.I.GetConceptsByTypeIdAndUser(G.id,p),_=F);for(let z=0;z<g.length;z++){let q=!1;for(let ne=0;ne<F.length;ne++)g[z].ghostId==F[ne].ghostId&&(q=!0);q||d.push(g[z])}console.log("This is the all list",d);let V=[];return V=yield function(z,q){return c(this,arguments,void 0,function*(ne,de,me=10,Ie=1){let fe=[],Se=me*(Ie-1),Re=[],Ve=de.length;for(let Fe=Se;Fe<Se+me-Ve;Fe++)ne[Fe]&&Re.push(ne[Fe].id);for(let Fe=0;Fe<de.length;Fe++){let Le=yield P(de[Fe].id);fe.push(Le)}yield(0,v.Y)(Re);for(let Fe=Se;Fe<Se+me-Ve;Fe++)if(ne[Fe]){let Le=yield(0,i.RW)(ne[Fe].id);fe.push(Le)}return fe})}(_,d,T,A),V})}function E(B,u){return c(this,arguments,void 0,function*(s,p,T=10,A=1){if(Ge)try{return(yield $e("GetCompositionListWithId",{compositionName:s,userId:p,inpage:T,page:A})).data}catch(_){console.error("GetCompositionListWithId sw error: ",_),Qe(_)}let O=yield(0,a.A)(s),G=[];if(O){yield f(s,p);let _=yield C.I.GetConceptsByTypeIdAndUser(O.id,p),g=T*(A-1),d=[];for(let F=g;F<g+T;F++)_[F]&&d.push(_[F].id);yield(0,v.Y)(d);for(let F=g;F<g+T;F++)if(_[F]){let V=yield(0,i.RW)(_[F].id);G.push(V)}}return G})}function L(B,u){return c(this,arguments,void 0,function*(s,p,T=10,A=1){let O=yield(0,a.w)(s),G=[];if(O){yield f(s,p);let _=yield C.I.GetConceptsByTypeIdAndUser(O.id,p),g=T*(A-1),d=[];for(let F=g;F<g+T;F++)_[F]&&d.push(_[F].id);yield(0,v.Y)(d);for(let F=g;F<g+T;F++)if(_[F]){let V=yield(0,i.RW)(_[F].id);G.push(V)}}return G})}var R=y(4864),D=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})},W=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function U(B){return W(this,void 0,void 0,function*(){var u,s;try{if(Ge)try{return(yield $e("GetCompositionLocal",{id:B})).data}catch(_){console.error("GetCompositionLocal error sw: ",_),Qe(_)}let p=[],T={};p=yield R.G.GetConnectionsOfCompositionLocal(B);let A=[];for(let _=0;_<p.length;_++)A.includes(p[_].ofTheConceptId)||A.push(p[_].ofTheConceptId);let O=yield I.v.GetConcept(B);if(O.id==0){let _=yield function(g){var d=arguments;return D(this,void 0,void 0,function*(){const F=ye.V.logfunction("TranslateLocalToReal",d);let V=(0,te.o)();try{var z=(0,e.ab)("application/x-www-form-urlencoded");const q=yield fetch(r.B.GetRealConceptById(),{method:"POST",headers:z,body:`id=${g}`});if(q.ok)return V=yield q.json(),V.id>0&&C.I.AddConcept(V),V;console.log("Error in Getting Translating concept Error",q.status),(0,o.ry)(q),ye.V.logUpdate(F)}catch(q){q instanceof Error?console.log("Error in Getting Translating concept error message: ",q):console.log("Error in Getting Translating concept unexpected error: ",q),(0,o.Mb)(q,r.B.GetRealConceptById()),(0,o.ey)(F,"TranslateLocalToReal",q)}return V})}(B);if(_.id>0)return yield(0,i.Nj)(_.id)}let G=yield M(B,p,A);return T[(s=(u=O?.type)===null||u===void 0?void 0:u.characterValue)!==null&&s!==void 0?s:"top"]=G,T}catch(p){throw p}})}function P(B){return W(this,void 0,void 0,function*(){var u,s;try{if(Ge)try{return(yield $e("GetCompositionLocalWithId",{id:B})).data}catch(_){console.error("GetCompositionLocalWithId error sw: ",_),Qe(_)}let p=[],T={},A={};p=yield R.G.GetConnectionsOfCompositionLocal(B);let O=[];for(let _=0;_<p.length;_++)O.includes(p[_].ofTheConceptId)||O.push(p[_].ofTheConceptId);let G=yield I.v.GetConcept(B);if(G.id!=0){let _=yield M(B,p,O);T[(s=(u=G?.type)===null||u===void 0?void 0:u.characterValue)!==null&&s!==void 0?s:"top"]=_}return A.data=T,A.id=B,A}catch(p){throw p}})}function M(B,u,s){return W(this,arguments,void 0,function*(p,T,A,O=[]){var G,_,g;let d={},F=[],V=yield I.v.GetConcept(p);if(V.id!=0&&V.type==null){let z=V.typeId,q=yield I.v.GetConcept(z);V.type=q}if((G=V?.type)===null||G===void 0||G.characterValue,!A.includes(p))return V?.characterValue;if(O.includes(p))return"";O.push(p);for(let z=0;z<T.length;z++)if(T[z].ofTheConceptId==p){let q=T[z].toTheConceptId,ne=yield I.v.GetConcept(q);if(ne.id!=0&&ne?.type==null){let Ie=ne.typeId,fe=yield I.v.GetConcept(Ie);ne.type=fe}let de="the_",me=((g=(_=ne?.type)===null||_===void 0?void 0:_.characterValue)!==null&&g!==void 0?g:"top").replace(de,"");if(isNaN(Number(me))){if(me){const Ie=yield M(q,T,A);d[me]=Ie}}else{const Ie=yield M(q,T,A);F[me]=Ie,d=F}}return d})}var j=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function J(B,u){return j(this,void 0,void 0,function*(){if(Ge)try{return(yield $e("GetCompositionListLocal",{compositionName:B,userId:u})).data}catch(s){console.error("GetCompositionListLocal error sw: ",s),Qe(s)}try{let s=yield(0,t.Ay)(B),p=[];if(s.id!=0){let T=yield I.v.GetConceptsByTypeIdAndUser(s.id,u);for(let A=0;A<T.length;A++){let O=yield U(T[A].id);p.push(O)}}return p}catch(s){throw s}})}function Z(B,u){return j(this,void 0,void 0,function*(){if(Ge)try{return(yield $e("GetCompositionListLocalWithId",{compositionName:B,userId:u})).data}catch(s){console.error("GetCompositionListLocalWithId error sw: ",s),Qe(s)}try{let s=yield(0,t.Ay)(B),p=[];if(s.id!=0){let T=yield I.v.GetConceptsByTypeIdAndUser(s.id,u);for(let A=0;A<T.length;A++){let O=yield P(T[A].id);p.push(O)}}return p}catch(s){throw s}})}var K=y(2),se=y(1218),$=y(999),ie=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function ue(B,u,s){var p=arguments;return ie(this,arguments,void 0,function*(T,A,O,G=10,_=1){const g=ye.V.logfunction("GetConnectionOfTheConcept",p)||{};let d=[];try{if(Ge){g.serviceWorker=!0;try{const q=yield $e("GetConnectionOfTheConcept",{typeId:T,ofTheConceptId:A,userId:O,inpage:G,page:_});return ye.V.logUpdate(g),q.data}catch(q){console.error("GetConnectionOfTheConcept sw error: ",q),(0,o.ey)(g,"GetConnectionOfTheConcept",q),Qe(q)}}let F=new URLSearchParams;F.append("typeId",`${T}`),F.append("ofTheConceptId",`${A}`),F.append("userId",`${O}`),F.append("inpage",`${G}`),F.append("page",`${_}`);let V=(0,e.Xr)("application/x-www-form-urlencoded");const z=yield fetch(r.B.GetAllConnectionsOfConceptUrl(),{method:"POST",headers:V,body:F});return z.ok?d=yield z.json():((0,o.ey)(g,"GetConnectionOfTheConcept",z.status),(0,o.ry)(z),console.log("Get connection of concept error",z.status)),ye.V.logUpdate(g),d}catch(F){F instanceof Error?console.log("Get connection of concept  error message: ",F.message):console.log("Get connection of concept unexpected error: ",F),(0,o.Mb)(F,r.B.GetAllConnectionsOfConceptUrl()),(0,o.ey)(g,"GetConnectionOfTheConcept",F)}})}var ee=y(2155),Q=y(442),te=y(7282),oe=y(5976),H=y(7273),re=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function le(B,u,s,p){return re(this,arguments,void 0,function*(T,A,O,G,_=1,g=4){if(T>0&&O>0){var d=A,F=yield oe.p.getId(),V=new ee.N(F,T,O,d,G,_,g);return T==O?(V.ofTheConceptId=0,V.toTheConceptId=1,V):(V.toUpdate=!0,V.isTemp=!1,Q.Y.AddConnection(V),V)}throw new H.z("cannot create connection because id are negative ",!1,400,"")})}var ae=y(4818),he=y(7876),Ce=y(8407),we=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function ve(B,u,s){return we(this,arguments,void 0,function*(p,T,A,O=!1,G=!1){var _,g;if(Ge)try{return(yield $e("CreateConnectionBetweenTwoConcepts",{ofTheConcept:p,toTheConcept:T,linker:A,both:O,count:G})).data}catch(ne){console.error("CreateConnectionBetweenTwoConcepts sw error: ",ne),Qe(ne)}let d=p.userId;if(O){let ne=A+"_by",de=((_=T.type)===null||_===void 0?void 0:_.characterValue)+"_s_"+ne;G&&(yield ke(ne,T,d));let me=yield(0,Ce.A)("connection",de,!1,999,999,999),Ie=new ee.N(0,T.id,p.id,d,me.id,1e3,4);Q.Y.AddConnection(Ie)}let F=A+"_s",V=((g=p.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+F;G&&(yield ke(F,p,d));let z=yield(0,Ce.A)("connection",V,!1,999,999,999),q=new ee.N(0,p.id,T.id,d,z.id,1e3,4);return Q.Y.AddConnection(q),q})}function ke(B,u){return we(this,arguments,void 0,function*(s,p,T=null){var A;let O=p,G=T??p.userId,_=s+"_count",g=((A=p.type)===null||A===void 0?void 0:A.characterValue)+"_s_"+_,d=yield(0,Ce.A)("connection",g,!1,G,4,999),F=yield ue(d.id,p.id,G,10,1),V=[],z=(0,te.o)();for(let ne=0;ne<F.length;ne++){let de=yield(0,he.A)(F[ne].toTheConceptId);V.push(de)}if(V.length<1)z=yield(0,Ce.A)("count","1",!1,G,4,999);else{let ne=V[0],de=0;try{de=Number(ne.characterValue)}catch{de=0}de+=1,z=yield(0,Ce.A)("count",de.toString(),!1,G,4,999);for(let me=0;me<F.length;me++)(0,ae.m)(F[me].id)}let q=new ee.N(0,O.id,z.id,O.userId,d.id,1e3,4);yield Q.Y.AddConnection(q)})}function Ee(B,u,s){return we(this,arguments,void 0,function*(p,T,A,O=!1,G=!1){var _,g;let d=p.userId;if(O){let q=A+"_by",ne=((_=T.type)===null||_===void 0?void 0:_.characterValue)+"_s_"+q;G&&(yield ke(q,T,d));let de=yield(0,Ce.A)("connection",ne,!1,999,999,999),me=new ee.N(0,T.id,p.id,d,de.id,1e3,4);Q.Y.AddConnection(me)}let F=A+"_s",V=((g=p.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+F;G&&(yield ke(F,p,d));let z=yield(0,Ce.A)("connection",V,!1,999,999,999);return yield le(p.id,p.userId,T.id,z.id,1e3,4)})}var ge=y(5868),xe=(y(3655),function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})});function Ae(B,u){const s=ye.V.logfunction("storeToDatabase",[B,"noindexdb"]);ye.V.logUpdate(s)}function ce(B,u,s){return xe(this,void 0,void 0,function*(){const p=ye.V.logfunction("getFromDatabaseWithType",[B,"noindexdb"]);ye.V.logUpdate(p)})}function Te(B){return xe(this,void 0,void 0,function*(){const u=ye.V.logfunction("getObjectsFromIndexDb",[B,"noindexdb"]);ye.V.logUpdate(u)})}var Oe=y(1666),be=y(4402),pe=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function De(B,u){var s=arguments;return pe(this,arguments,void 0,function*(p,T,A=10,O=1){var G;const _=ye.V.logfunction("GetLink",s)||{};if(Ge){_.serviceWorker=!0;try{const z=yield $e("GetLink",{id:p,linker:T,inpage:A,page:O});return ye.V.logUpdate(_),z.data}catch(z){console.error("GetLink sw error: ",z),(0,o.ey)(_,"GetLink",z),Qe(z)}}let g=[],d=yield(0,he.A)(p),F=((G=d.type)===null||G===void 0?void 0:G.characterValue)+"_s_"+T,V=yield(0,be.A)(F,16);if(V.id>0){let z=yield ue(V.id,d.id,d.userId,A,O),q=[];for(let ne=0;ne<z.length;ne++)q.push(z[ne].toTheConceptId);yield(0,v.Y)(q);for(let ne=0;ne<z.length;ne++){let de=z[ne].toTheConceptId,me=yield(0,he.A)(de),Ie=yield(0,i.Ez)(me.id);g.push(Ie)}}return ye.V.logUpdate(_),g})}function _e(B,u){var s=arguments;return pe(this,arguments,void 0,function*(p,T,A=10,O=1){var G;const _=ye.V.logfunction("GetLinkRaw",s);let g=[],d=yield(0,he.A)(p),F=((G=d.type)===null||G===void 0?void 0:G.characterValue)+"_s_"+T,V=yield(0,be.A)(F,16);if(V.id>0){let z=yield ue(V.id,d.id,d.userId,A,O),q=[];for(let ne=0;ne<z.length;ne++)q.push(z[ne].toTheConceptId);for(let ne=0;ne<z.length;ne++){let de=z[ne].toTheConceptId,me=yield(0,he.A)(de);g.push(me)}}return ye.V.logUpdate(_),g})}var Be=y(8357),Ne=y(843),Ue=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};const je=new Map;function ze(B,u){var s=arguments;return Ue(this,void 0,void 0,function*(){const p=ye.V.logfunction("MakeTheTypeConceptApi",s);let T=(0,te.o)();if(je.has(B))return je.get(B)||T;const A=Ue(this,void 0,void 0,function*(){try{if(T=yield(0,Ne.Az)(B),T.id==0||T.typeId==4){let O=(0,e.Xr)("application/x-www-form-urlencoded");const G=yield fetch(r.B.MakeTheTypeConceptUrl(),{method:"POST",headers:O,body:`type=${B}`});if(!G.ok)throw(0,o.ry)(G),new Error(`Error! status: ${G.status}`);T=yield G.json(),ye.V.logUpdate(p)}}catch(O){O instanceof Error?console.log("Make The Type Concept Api error : ",O.message):console.log("Make The Type Concept Api error : ",O),(0,o.Mb)(O,r.B.MakeTheTypeConceptUrl()),(0,o.ey)(p,"MakeTheTypeConceptApi",O)}finally{je.delete(B)}return T});return je.set(B,A),A})}var Lt=y(8675),dt=y(6058),Xt=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function Zt(B){var u=arguments;return Xt(this,void 0,void 0,function*(){const s=ye.V.logfunction("GetLinkerConnectionFromConcepts",u);let p=yield(0,Lt.l)(B);for(let T=0;T<p.length;T++){let A=p[T],O=A.typeId,G=yield(0,he.A)(O);A.type=G}return ye.V.logUpdate(s),p})}function jo(B){var u=arguments;return Xt(this,void 0,void 0,function*(){const s=ye.V.logfunction("GetLinkerConnectionToConcepts",u);let p=yield(0,dt.W)(B);for(let T=0;T<p.length;T++){let A=p[T],O=A.typeId,G=yield(0,he.A)(O);A.type=G}return ye.V.logUpdate(s),p})}var $r=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})},Hr=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})},qr=y(6963),no=y(2202),zr=y(5457),Jr=y(991),$o=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function oo(B){var u=arguments;return $o(this,void 0,void 0,function*(){const s=ye.V.logfunction("DeleteConceptById",u);if(Ge)try{return(yield $e("DeleteConceptById",{id:B})).data}catch(O){console.error("DeleteConceptById sw error: ",O),Qe(O)}if(B>0){var p=yield C.I.GetConcept(B);if(p.id>0){var T=p.typeId,A=p.characterValue;yield zr.c.removeTypeConcept(T,B),yield qr.f.removeNodeByCharacter(A,B),yield function(O){var G=arguments;return Hr(this,void 0,void 0,function*(){let _=!1;const g=ye.V.logfunction("DeleteTheConcept",G);try{const d=new FormData;d.append("id",O.toString());let F=(0,e.BZ)();const V=yield fetch(r.B.DeleteConceptUrl(),{method:"POST",headers:F,body:d});V.ok?_=(yield V.json()).success:(console.log("Delete concept error",V.status),(0,o.ry)(V)),_&&C.I.AddNpc(O),ye.V.logUpdate(g)}catch(d){d instanceof Error?console.log("Delete concept error message: ",d.message):console.log("Delete concept unexpected error: ",d),(0,o.Mb)(d,r.B.DeleteConceptUrl()),(0,o.ey)(g,"DeleteTheConcept",d)}return _})}(B),yield no.W.removeNodeFromTree(B),yield Jr.H.removeNodeFromTree(B)}}else I.v.RemoveConceptById(B);ye.V.logUpdate(s)})}function Ho(B){return $o(this,void 0,void 0,function*(){if(Ge)try{return(yield $e("DeleteUser",{id:B})).data}catch(u){console.error("DeleteUser sw error: ",u),Qe(u)}B>0?function(u){var s=arguments;$r(this,void 0,void 0,function*(){const p=ye.V.logfunction("DeleteUserInBackend",s);try{var T=(0,e.ab)("application/json","");let A=r.B.DeleteUserUrl();A=A+"?conceptId="+u+"&apiKey=freeschema";const O=yield fetch(A,{method:"POST",headers:T});if(O.ok){let G=yield O.json(),_=Number(G.data);return console.log("this is the delete email concept",_),oo(_),ye.V.logUpdate(p),_}throw(0,o.ry)(O),new Error(`Delete composition Error! status: ${O.status}`)}catch(A){A instanceof Error?console.log("Delete composition error message: ",A.message):console.log("Delete composition unexpected error: ",A),(0,o.Mb)(A,r.B.DeleteConceptUrl()),(0,o.ey)(p,"DeleteUserInBackend",A)}})}(B):I.v.RemoveConceptById(B)})}var Qr=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function qo(B,u){return Qr(this,void 0,void 0,function*(){try{const s=new Headers;s.append("Authorization","Bearer "+u);const p=new FormData;p.append("id",B.toString());const T=yield fetch(r.B.DeleteConceptUrl(),{method:"POST",body:p,headers:s});if(!T.ok)throw(0,o.ry)(T),new Error(`Delete composition Error! status: ${T.status}`)}catch(s){s instanceof Error?console.log("Delete composition error message: ",s.message):console.log("Delete composition unexpected error: ",s),(0,o.Mb)(s,r.B.DeleteConceptUrl())}})}var kn=y(1735),Pt=y(8286),Yr=y(1596),Je=y(3278),zo=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})},Xr=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function Jo(B){var u=arguments;return Xr(this,void 0,void 0,function*(){const s=ye.V.logfunction("GetConnectionById",u);if(console.log("AccessTracker activation status from GetConnectionById"),kn.J.activateStatus===!0)try{kn.J.incrementConnection(B)}catch{console.error("Error adding connection in access tracker"),ye.V.log("ERROR","Error Adding Connection")}if(Ge)try{return(yield $e("GetConnectionById",{id:B})).data}catch(T){console.error("GetConnectionById sw error: ",T),Qe(T)}let p=yield Pt.d.GetConnection(B);return p!=null&&p.id!=0||B==null||B==null||(p=yield function(T){var A=arguments;return zo(this,void 0,void 0,function*(){const O=ye.V.logfunction("GetConnection",A);let G=yield Pt.d.GetConnection(T);try{if(G.id!=0)return G;{const _=new FormData;_.append("id",T.toString());const g={method:"POST",headers:{Authorization:"Bearer "+Je.b.BearerAccessToken},body:_};let d;try{d=yield fetch(r.B.GetConnectionUrl(),g)}catch{d=yield(0,Yr.g)(g,"/api/get-connection-by-id")}return yield function(F,V){return zo(this,void 0,void 0,function*(){F.ok?(V=yield F.json(),Pt.d.AddConnection(V)):((0,o.ry)(F),console.log("Get Connection Error",F.status))})}(d,G),ye.V.logUpdate(O),G}}catch(_){_ instanceof Error?console.log("Get Connection error message: ",_.message):console.log("Get Connection unexpected error: ",_),(0,o.Mb)(_,r.B.GetConnectionUrl()),(0,o.ey)(O,"GetConnection",_)}})}(B)),ye.V.logUpdate(s),p})}var Zr=y(2212),Kr=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})},es=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function Qo(B,u,s){return es(this,arguments,void 0,function*(p,T,A,O=4,G=999){const _=ye.V.logfunction("MakeTheTimestamp")||{};if(Ge){_.serviceWorker=!0;try{const q=yield $e("MakeTheTimestamp",{type:p,referent:T,userId:A,accessId:O,sessionInformationId:G});return ye.V.logUpdate(_),q.data}catch(q){console.error("MakeTheTimestamp sw error: ",q),(0,o.ey)(_,"MakeTheTimestamp",q),Qe(q)}}let g,d="",F=p.startsWith("the_"),V=(0,te.o)();return d=F?p:"the_"+p,V=yield ze(d,A),g=yield function(q,ne,de,me,Ie,fe,Se){return Kr(this,void 0,void 0,function*(){let Re=yield(0,be.A)(q,me),Ve=Re;return Ve.id==0&&(Re=yield(0,Zr.Ay)(q,ne,4,me,0,fe,Se),Ve=Re),Ve})}(T,A,0,V.id,0,O,d),ye.V.logUpdate(_),g})}class Kt{constructor(){this.composition=0,this.type="",this.linker="",this.inpage=10,this.page=1,this.listLinkers=[],this.fullLinkers=[],this.textSearch="",this.logic="or",this.reverse=!1,this.doFilter=!1,this.filterSearches=[],this.selectors=[],this.ofCompositions=[]}}var ot=y(6687),In=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function Yo(){var B=arguments;return In(this,arguments,void 0,function*(u=0,s=[],p="",T=[]){const A=ye.V.logfunction("RecursiveSearchApi",B)||{};let O=[];try{if(Ge){A.serviceWorker=!0;try{const F=yield $e("RecursiveSearchApi",{composition:u,listLinkers:s,textSearch:p,fullLinkers:T});return ye.V.logUpdate(A),F.data}catch(F){console.error("RecursiveSearchApi sw error: ",F),(0,o.ey)(A,"RecursiveSearchApi",F),Qe(F)}}let G=new Kt;G.composition=u,G.listLinkers=s,G.fullLinkers=T,G.textSearch=p;let _=JSON.stringify(G),g=(0,e.Xr)();const d=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:g,body:_});if(d.ok){const F=yield d.json();let V=F.compositionIds,z=F.internalConnections;F.externalConnections,O=yield(0,ot.p8)(V,z)}else console.log("recursive search error ",d.status),(0,o.ey)(A,"RecursiveSearchApi",d.status),(0,o.ry)(d);ye.V.logUpdate(A)}catch(G){G instanceof Error?console.log("recursive search error message: ",G.message):console.log("recursive search unexpected error: ",G),(0,o.ey)(A,"RecursiveSearchApi",G),(0,o.Mb)(G,r.B.RecursiveSearchUrl())}return O})}function Xo(){var B=arguments;return In(this,arguments,void 0,function*(u=0,s=[],p=""){const T=ye.V.logfunction("RecursiveSearchApiWithInternalConnections",B)||{};let A=[];try{if(Ge){T.serviceWorker=!0;try{const d=yield $e("RecursiveSearchApiWithInternalConnections",{composition:u,listLinkers:s,textSearch:p});return ye.V.logUpdate(T),d.data}catch(d){console.error("RecursiveSearchApiWithInternalConnections sw error: ",d),(0,o.ey)(T,"RecursiveSearchApiWithInternalConnections",d),Qe(d)}}let O=new Kt;O.composition=u,O.listLinkers=s,O.textSearch=p;let G=JSON.stringify(O),_=(0,e.Xr)();const g=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:_,body:G});if(g.ok){const d=yield g.json();let F=d.compositionIds,V=d.internalConnections;d.externalConnections,A=yield(0,ot.km)(F,V),ye.V.logUpdate(T)}else console.log("recursive search error ",g.status),(0,o.ey)(T,"GetCompositionConnectionsBetweenTwoConcepts",g.status),(0,o.ry)(g)}catch(O){O instanceof Error?console.log("recursive search error message: ",O.message):console.log("recursive search unexpected error: ",O),(0,o.ey)(T,"GetCompositionConnectionsBetweenTwoConcepts",O),(0,o.Mb)(O,r.B.RecursiveSearchUrl())}return A})}function io(){var B=arguments;return In(this,arguments,void 0,function*(u=0,s=[],p="",T=[]){const A=ye.V.logfunction("RecursiveSearchApiRaw",B)||{};try{if(Ge){A.serviceWorker=!0;try{const d=yield $e("RecursiveSearchApiRaw",{composition:u,listLinkers:s,textSearch:p,fullLinkers:T});return ye.V.logUpdate(A),d.data}catch(d){console.error("RecursiveSearchApiRaw sw error: ",d),(0,o.ey)(A,"RecursiveSearchApiRaw",d),Qe(d)}}let O=new Kt;O.composition=u,O.listLinkers=s,O.textSearch=p,O.fullLinkers=T;let G=JSON.stringify(O),_=(0,e.Xr)();const g=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:_,body:G});if(g.ok){const d=yield g.json();return d.compositionIds,d.internalConnections,d.externalConnections,ye.V.logUpdate(A),d}return console.log("recursive search error ",g.status),(0,o.ey)(A,"RecursiveSearchApiRaw",g.status),(0,o.ry)(g),ye.V.logUpdate(A),[]}catch(O){O instanceof Error?console.log("recursive search error message: ",O.message):console.log("recursive search unexpected error: ",O),(0,o.ey)(A,"RecursiveSearchApiRaw",O),(0,o.Mb)(O,r.B.RecursiveSearchUrl())}})}function Zo(){var B=arguments;return In(this,arguments,void 0,function*(u=0,s=[],p=""){const T=ye.V.logfunction("RecursiveSearchApiRawFullLinker",B)||{};try{if(Ge){T.serviceWorker=!0;try{const g=yield $e("RecursiveSearchApiRawFullLinker",{composition:u,fullLinkers:s,textSearch:p});return ye.V.logUpdate(T),g.data}catch(g){console.error("RecursiveSearchApiRawFullLinker sw error: ",g),(0,o.ey)(T,"RecursiveSearchApiRawFullLinker",g),Qe(g)}}let A=new Kt;A.composition=u,A.fullLinkers=s,A.textSearch=p;let O=JSON.stringify(A),G=(0,e.Xr)();const _=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:G,body:O});if(_.ok){const g=yield _.json();return g.compositionIds,g.internalConnections,g.externalConnections,ye.V.logUpdate(T),g}return console.log("recursive search error ",_.status),(0,o.ey)(T,"RecursiveSearchApiRawFullLinker",_.status),(0,o.ry)(_),ye.V.logUpdate(T),[]}catch(A){A instanceof Error?console.log("recursive search error message: ",A.message):console.log("recursive search unexpected error: ",A),(0,o.Mb)(A,r.B.RecursiveSearchUrl()),(0,o.ey)(T,"RecursiveSearchApiRawFullLinker",A)}})}function Ko(){var B=arguments;return In(this,arguments,void 0,function*(u=0,s=[],p=""){const T=ye.V.logfunction("RecursiveSearchApiRawFullLinker",B)||{};try{if(Ge)try{T.serviceWorker=!0;const g=yield $e("RecursiveSearchApiNewRawFullLinker",{composition:u,fullLinkers:s,textSearch:p});return ye.V.logUpdate(T),g.data}catch(g){console.error("RecursiveSearchApiNewRawFullLinker sw error: ",g),(0,o.ey)(T,"RecursiveSearchApiNewRawFullLinker",g),Qe(g)}let A=new Kt;A.composition=u,A.fullLinkers=s,A.textSearch=p;let O=JSON.stringify(A),G=(0,e.Xr)();const _=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:G,body:O});if(_.ok){const g=yield _.json();return g.compositionIds,g.internalConnections,g.externalConnections,ye.V.logUpdate(T),g}return console.log("recursive search error ",_.status),(0,o.ey)(T,"RecursiveSearchApiNewRawFullLinker",_.status),(0,o.ry)(_),ye.V.logUpdate(T),[]}catch(A){A instanceof Error?console.log("recursive search error message: ",A.message):console.log("recursive search unexpected error: ",A),(0,o.Mb)(A,r.B.RecursiveSearchUrl()),(0,o.ey)(T,"RecursiveSearchApiNewRawFullLinker",A)}})}var Sn=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};const ro=["image/jpeg","image/jpg","image/png","image/webp"],so=["application/msword","application/vnd.ms-excel","application/vnd.ms-powerpoint","text/plain","application/pdf"];function ei(B,u){return Sn(this,void 0,void 0,function*(){const s=ye.V.logfunction("uploadAttachment");try{console.log("File Type",B.type);const p=new FormData;let T;if(so.includes(B.type)||B.name.toLowerCase().endsWith(".md"))p.append("file",B,B.name),T=yield co(p,u);else{if(!ro.includes(B.type))return{message:"Invalid File Format",success:!1};p.append("image",B,B.name),T=yield ao(p,u)}return T?.data?(ye.V.logUpdate(s),{message:"Upload Success",success:!0,url:T.data}):{message:"File Upload Failed",success:!1}}catch(p){throw console.error(p),(0,o.ey)(s,"uploadAttachment",p),p}})}function ao(B){return Sn(this,arguments,void 0,function*(u,s=""){const p=ye.V.logfunction("uploadImage");try{const T=yield fetch(r.B.uploadImageUrl(),{method:"POST",body:u,headers:{Authorization:`Bearer ${s}`}});if(!T.ok){const A=T.headers.get("content-type");A&&A.includes("text/plain")&&console.info(T?.text());const O=yield T?.text();return console.error(`${T.status} ${O}`),ye.V.logUpdate(p),null}return yield T.json()}catch(T){return console.error(T),(0,o.ey)(p,"uploadImage",T),null}})}function ti(B){return Sn(this,arguments,void 0,function*(u,s=""){const p=ye.V.logfunction("uploadImageV2");try{const T=yield fetch(r.B.uploadImageUrlWithSmall(),{method:"POST",body:u,headers:{Authorization:`Bearer ${s}`}});if(!T.ok){const A=T.headers.get("content-type");A&&A.includes("text/plain")&&console.info(T?.text());const O=yield T?.text();return console.error(`${T.status} ${O}`),ye.V.logUpdate(p),null}return yield T.json()}catch(T){return console.error(T),(0,o.ey)(p,"uploadImageV2",T),null}})}function co(B){return Sn(this,arguments,void 0,function*(u,s=""){const p=ye.V.logfunction("uploadFile");try{const T=yield fetch(r.B.uploadFileUrl(),{method:"POST",body:u,headers:{Authorization:`Bearer ${s}`}});if(!T.ok){const A=T.headers.get("content-type");A&&A.includes("text/plain")&&console.info(T.text());const O=yield T.text();return console.error(`${T.status} ${O}`),null}return ye.V.logUpdate(p),yield T.json()}catch(T){return console.error(T),(0,o.ey)(p,"uploadFile",T),null}})}function ni(){return Sn(this,void 0,void 0,function*(){let B=yield(0,e.Xr)(),u={};try{const s=yield fetch(r.B.UploadFileLimitUrl(),{method:"GET",headers:B});s.ok&&(u=s.json())}catch(s){throw console.error(s),s}return u})}var gn=y(1239),Vn=y(7467),ts=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function oi(B,u){var s=arguments;return ts(this,arguments,void 0,function*(p,T,A="boomconsole.com"){const O=ye.V.logfunction("LoginToBackend",s);try{let G={email:p,password:T,application:A},_=new Headers;_.append("Content-Type","application/json");let g=JSON.stringify(G);const d=yield fetch(r.B.LoginUrl(),{method:"POST",headers:_,body:g}),F=yield d.json();if(d.ok)return Je.b.BearerAccessToken=F.data.token,ye.V.logUpdate(O),F;console.log("Login tsccs error message: ",d.status),(0,o.ER)(d,F)}catch(G){G instanceof Error?console.log("Login tsccs error message: ",G.message):console.log(" Login tsccs  unexpected error: ",G),(0,o.Mb)(G,r.B.LoginUrl()),(0,o.ey)(O,"LoginToBackend",G)}})}var lo=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function ii(B){return lo(this,void 0,void 0,function*(){return yield function(){return lo(this,arguments,void 0,function*(s="",p={}){let T={message:"success",status:!1,statusCode:200,data:"cannot signup"};try{const A=yield fetch(s,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(p)}),O=yield A.json();return A.ok?T={message:"success",status:!0,statusCode:200,data:O}:(0,o.ER)(A,O),T}catch(A){console.log("Signup Error: ",A),(0,o.Mb)(A,s)}})}(r.B.SignupUrl(),B)})}function ri(B){return lo(this,void 0,void 0,function*(){const u=r.B.NODE_URL,s=yield fetch(`${u}/api/v1/entity/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});if(s.ok)return s.json();{if(s.status===404)throw new Error("404, Not found");if(s.status===500)throw new Error("500, internal server error");let p=yield s.json();throw console.log("This is the error from package",p),new Error(p.message)}})}var ns=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function si(B){return ns(this,void 0,void 0,function*(){const u=JSON.stringify({email:B.email,password:B.password});let s={message:"success",status:!1,statusCode:200,data:""};const p=new Headers;p.append("Content-Type","application/json");const T=r.B.LoginUrl();try{const A=yield fetch(T,{method:"POST",headers:p,body:u,redirect:"follow"}),O=yield A.json();return A.ok?s={message:"success",status:!0,statusCode:200,data:O?.data}:(0,o.ER)(A,O),s}catch(A){console.log("Sign in api error",A),(0,o.Mb)(A,T)}})}var uo=y(9934),jn=y(4485);function os(B=[],u){Array.isArray(B)&&B.splice(B.findIndex(function(s){return s.id===u.id}),1)}function is(B=[],u){Array.isArray(B)&&B.splice(B.findIndex(function(s){return s.id===u.id}),1)}class ho{constructor(u,s,p,T){this.expiryTime=new Date(Date.now()+6e5),this.height=1,this.key=u,this.value=s,this.leftNode=p,this.rightNode=T}isValid(){const u=new Date(Date.now());return!(this.expiryTime<u&&($t.removeNodeFromTree(this.key),1))}saveToCache(u){this.value.cached=u}addNode(u,s,p){if(s==null)return u;const T=s.leftNode,A=s.rightNode;if(s.key>u.key)s.leftNode=this.addNode(u,T,p);else{if(!(s.key<u.key))return this.isValid(),u;s.rightNode=this.addNode(u,A,p)}s.height=1+Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode));const O=this.getBalanceFactor(s);if(O>1&&s.leftNode){if(u.key<s.leftNode.key)return this.rightRotate(s);if(u.key>s.leftNode.key)return s.leftNode=this.leftRotate(s.leftNode),this.rightRotate(s)}if(O<-1&&s.rightNode){if(u.key>s.rightNode.key)return this.leftRotate(s);if(u.key<s.rightNode.key)return s.rightNode=this.rightRotate(s.rightNode),this.leftRotate(s)}return this.isValid(),s}rightRotate(u){if(u){const s=u.leftNode;if(s){const p=s.rightNode;return u.leftNode=p,s.rightNode=u,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,s}}return u}leftRotate(u){if(u){const s=u.rightNode;if(s){const p=s.leftNode;return s.leftNode=u,u.rightNode=p,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(u.rightNode))+1,s}}return u}getHeight(u){return u?u.height:0}getBalanceFactor(u){return u==null?0:this.getHeight(u.leftNode)-this.getHeight(u.rightNode)}getFromNode(u,s){return s&&(u==s.key&&s.isValid()?s:u<s.key?this.getFromNode(u,s.leftNode):u>s.key?this.getFromNode(u,s.rightNode):s)}removeNode(u,s){if(u==null)return u;if(u.key>s)return u.leftNode=this.removeNode(u.leftNode,s),u;if(u.key<s)return u.rightNode=this.removeNode(u.rightNode,s),u;if(u.leftNode==null){const p=u.rightNode;return u=null,p}if(u.rightNode==null){const p=u.leftNode;return u=null,p}{const p=this.inOrderSuccessor(u.rightNode);return u.value=p.value,u.key=p.key,u.rightNode=this.removeNode(u.rightNode,p.key),u}}countNodeBelow(u){return u==null?0:1+this.countNodeBelow(u.leftNode)+this.countNodeBelow(u.rightNode)}inOrderSuccessor(u){for(;u.leftNode!=null;)u=u.leftNode;return u}}var ai=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};class $t{static addNodeToTree(u){if(this.root==null)return this.root=u,this.root;this.root=this.root.addNode(u,this.root,this.root.height)}static addCompositionToTree(u){const s=new ho(u.id,u,null,null);this.addNodeToTree(s)}static getNodeFromTree(u){return ai(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(u,this.root):null})}static removeNodeFromTree(u){return ai(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,u))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}$t.root=null;var rs=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function yn(B,u,s,p){return rs(this,arguments,void 0,function*(T,A,O,G,_=[]){var g,d;let F={};const V=[];if(T==0)return"";let z=po(O,T);if(z!=null&&z.id!=0||T==null||T==null||(z=yield(0,he.A)(T)),z.id!=0&&z.type==null){const q=z.typeId;let ne=po(O,q);z.type=ne,ne==null&&q!=null&&q!=null&&(ne=yield(0,he.A)(q),z.type=ne)}if(!G.includes(T))return z?.characterValue;if(_.includes(T))return"";_.push(T);for(let q=0;q<A.length;q++)if(A[q].ofTheConceptId==T){const ne=A[q].toTheConceptId;if(G.includes(T)){let de=po(O,ne);if(de!=null&&de.id!=0||ne==null||ne==null||(de=yield(0,he.A)(ne)),de.id!=0&&de?.type==null){const fe=de.typeId;let Se=yield C.I.GetConcept(fe);de.type=Se,Se==null&&fe!=null&&fe!=null&&(Se=yield(0,he.A)(fe),de.type=Se)}const me="the_",Ie=((d=(g=de?.type)===null||g===void 0?void 0:g.characterValue)!==null&&d!==void 0?d:"").replace(me,"");if(isNaN(Number(Ie))){if(Ie){const fe=yield yn(ne,A,O,G,_);F[Ie]=fe}}else{const fe=yield yn(ne,A,O,G,_);V[Ie]=fe,F=V}}}return F})}function po(B,u){let s=(0,te.o)();for(let p=0;p<B.length;p++)if(u==B[p].id)return s=B[p],s;return s}class An{constructor(){this.id=0,this.mainConcept=(0,te.o)(),this.connections=[],this.concepts=[],this.subcompositions=[],this.cached={}}updateCache(){return u=this,s=void 0,T=function*(){if(this.mainConcept.id==0)for(let A=0;A<this.concepts.length;A++)this.concepts[A].id==this.id&&(this.mainConcept=this.concepts[A]);this.cached=yield yn(this.id,this.connections,this.concepts,this.subcompositions,[])},new((p=void 0)||(p=Promise))(function(A,O){function G(d){try{g(T.next(d))}catch(F){O(F)}}function _(d){try{g(T.throw(d))}catch(F){O(F)}}function g(d){var F;d.done?A(d.value):(F=d.value,F instanceof p?F:new p(function(V){V(F)})).then(G,_)}g((T=T.apply(u,s||[])).next())});var u,s,p,T}UpdateAcrossDistributedSystem(){var u,s;try{this.id!=0&&(s=(u=this.id)===null||u===void 0?void 0:u.toString(),r.B.MQTT_CONNECTION&&r.B.MQTT_CONNECTION.publish("compositionUpdate",s))}catch(p){console.log("Error while publishing message",p)}}isUpdating(){this.UpdateAcrossDistributedSystem()}GetDataCache(){var u,s,p;const T={};T[(p=(s=(u=this.mainConcept)===null||u===void 0?void 0:u.type)===null||s===void 0?void 0:s.characterValue)!==null&&p!==void 0?p:""]=this.cached;const A={};return A.data=T,A.id=this.id,A}}var ss=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function Nn(B){return ss(this,arguments,void 0,function*(u,s=null,p=null,T=null,A=null,O=null,G=null,_=null){const g=A??999,d=O??4,F=G??999;let V=T??0,z=(0,te.o)();_==null&&(_=new An);for(const q in u)if(typeof u[q]=="object"||Array.isArray(u[q])){const ne=yield(0,Ce.A)(q,"",!0,g,d,F);if(s==null&&p==null){let de=V;z=ne,de=ne.id,V=ne.id,_.concepts.push(ne),_.id=ne.id,yield Nn(u[q],ne.id,ne.userId,de,A,O,G,_)}else{const de=s??999,me=p??999,Ie=V;z=ne,_.concepts.push(ne);const fe=yield(0,Oe.q)(de,me,ne.id,Ie);_.connections.push(fe),yield Nn(u[q],ne.id,ne.userId,Ie,A,O,G,_)}u[q]!=null&&u[q]!=null&&_.subcompositions.push(ne.id)}else{const ne=s??999,de=p??999,me=V,Ie=yield(0,Ce.A)(q,u[q],!1,g,d,F);_.concepts.push(Ie);const fe=yield(0,Oe.q)(ne,de,Ie.id,me);_.connections.push(fe)}return z})}var as=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function ci(B){return as(this,void 0,void 0,function*(){const u=ye.V.logfunction("UpdateComposition")||{};if(Ge){u.serviceWorker=!0;try{const fe=yield $e("UpdateComposition",{patcherStructure:B});return ye.V.logUpdate(u),fe.data}catch(fe){console.error("UpdateComposition sw error: ",fe),(0,o.ey)(u,"UpdateComposition",fe),Qe(fe)}}const s=B.userId,p=B.sessionId,T=B.accessId;let A=[];const O=[];let G=(0,te.o)(),_=(0,te.o)();const g=[];let d=B.compositionId;const F=B.ofTheCompositionId;let V=[];if(d<0){let fe=yield(0,he.A)(d,s);if(!(fe.id>0))return null;d=fe.id}A=yield(0,K.s)(d);const z=[],q=new An,ne=[];q.id=d,q.isUpdating();let de=[];for(let fe=0;fe<A.length;fe++)(0,uo.A)(ne,A[fe].ofTheConceptId),(0,uo.A)(z,A[fe].ofTheConceptId),(0,uo.A)(z,A[fe].toTheConceptId),de.push(A[fe].ofTheConceptId);q.subcompositions=ne,q.connections=A;for(let fe=0;fe<z.length;fe++){const Se=yield(0,he.A)(z[fe]);d==z[fe]&&(G=Se),F==z[fe]&&(_=Se),O.push(Se)}const me=B.patchObject;for(const fe in me){let Se=(0,te.o)();const Re=me[fe];let Ve=G;if(_.id>0&&(Ve=_),Array.isArray(Re)||typeof Re=="object"){Se=yield(0,Ce.A)(fe,"",!0,G.userId,4,999),q.subcompositions.push(Se.id);const Le=(0,jn.vo)(O,Se);for(let Ye=0;Ye<Le.length;Ye++)if(Le[Ye].id>0){const at=(0,jn.wS)(q.connections,Le[Ye].id);V=V.concat(at),g.push(Le[Ye])}yield Nn(me[fe],Se.id,Se.userId,G.id,G.userId,4,999,q)}else{Se=yield(0,Ce.A)(fe,Re,!1,s,T,p);const Le=(0,jn.vo)(O,Se);for(let Ye=0;Ye<Le.length;Ye++)if(Le[Ye].id>0){const at=(0,jn.wS)(q.connections,Le[Ye].id);V=V.concat(at),g.push(Le[Ye])}}const Fe=(0,Oe.q)(Ve.id,Ve.userId,Se.id,G.id);O.push(Se),q.connections.push(Fe)}for(let fe=0;fe<V.length;fe++)is(q.connections,V[fe]),(0,ae.m)(V[fe].id);for(let fe=0;fe<g.length;fe++)os(O,g[fe]);q.concepts=q.concepts.concat(O),q.mainConcept=G,q.id=G.id,yield q.updateCache(),$t.addCompositionToTree(q),Q.Y.SyncDataOnline();let Ie=q.GetDataCache();return ye.V.logUpdate(u),Ie})}var cs=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function li(B,u,s,p){return cs(this,arguments,void 0,function*(T,A,O,G,_=10,g=1){var d=(0,e.ab)("application/x-www-form-urlencoded",G),F=new URLSearchParams;F.append("type",T),F.append("search",A),F.append("composition",O),F.append("inpage",_.toString()),F.append("page",g.toString());const V=r.B.SearchCompositionsUrl()+"?"+F.toString();try{const z=yield fetch(V,{method:"GET",headers:d});return z.ok?yield z.json():((0,o.ry)(z),[])}catch(z){console.log("This is the searching error",z),(0,o.Mb)(z,V)}})}var ls=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function di(B){return ls(this,arguments,void 0,function*(u,s=""){var p=(0,e.ab)("application/json",s);const T=r.B.SearchLinkMultipleAll(),A=JSON.stringify(u);try{const O=yield fetch(T,{method:"POST",headers:p,body:A});return O.ok?yield O.json():(console.log("This is the searching error",O.status),(0,o.ry)(O),[])}catch(O){console.log("This is the searching error",O),(0,o.Mb)(O,T)}})}var ui=y(7139),Ln=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function hi(B){return Ln(this,arguments,void 0,function*(u,s=[]){var p,T;let A=[];const O=[];let G={},_={};const g=yield $t.getNodeFromTree(u),d=[];let F=yield C.I.GetConcept(u);if(F.id==0&&u!=null&&u!=null&&(F=yield(0,ui.r)(u)),g==null){let V=[];V=s.length>0?pi(u,s):yield(0,K.s)(u),A=V;for(let q=0;q<A.length;q++)d.includes(A[q].ofTheConceptId)||(d.push(A[q].ofTheConceptId),O.push(A[q].ofTheConceptId)),O.includes(A[q].toTheConceptId)||O.push(A[q].toTheConceptId);gi(F,A,O,d);let z=[];_=yield(0,i.zN)(u,A,d,z),G[(T=(p=F?.type)===null||p===void 0?void 0:p.characterValue)!==null&&T!==void 0?T:""]=_}else _=g.value.GetDataCache(),G=_;return F.id==0?"":G})}function pi(B,u){const s=[];for(let p=0;p<u.length;p++)u[p].typeId==B&&s.push(u[p]);return s}function fo(B){return Ln(this,arguments,void 0,function*(u,s=[]){var p,T;let A={},O=[];const G=[];let _;const g={},d=yield $t.getNodeFromTree(u),F=[];let V=yield C.I.GetConcept(u);if(V.id==0&&u!=null&&u!=null&&(V=yield(0,ui.r)(u)),d==null){let z=[];z=s.length>0?pi(u,s):yield(0,K.s)(u),O=z;for(let q=0;q<O.length;q++)F.includes(O[q].ofTheConceptId)||(F.push(O[q].ofTheConceptId),G.push(O[q].ofTheConceptId)),G.includes(O[q].toTheConceptId)||G.push(O[q].toTheConceptId);gi(V,O,G,F),_=yield(0,i.zN)(u,O,F),g[(T=(p=V?.type)===null||p===void 0?void 0:p.characterValue)!==null&&T!==void 0?T:""]=_,A.created_at=V.entryTimeStamp,A.data=g,A.id=u}else _=d.value.GetDataCache(),A=_;return V.id==0?"":A})}function fi(B,u){return Ln(this,void 0,void 0,function*(){let s=[];const p=[];s=yield(0,Vn.j)(u);for(let T=0;T<B.length;T++){const A=yield fo(B[T],s);A&&p.push(A)}return p})}function gi(B,u,s,p){return Ln(this,void 0,void 0,function*(){const T=new An,A=yield function(G){return Ln(this,void 0,void 0,function*(){let _=[];const g=[];for(let d=0;d<G?.length;d++){const F=yield C.I.GetConcept(G[d]);F.id==0?g.push(G[d]):_.push(F)}return g?.length==0||(_=yield(0,gn.I)(g)),_})}(s);T.connections=u,T.concepts=A,T.id=B.id,T.subcompositions=p,T.mainConcept=B;const O=yield yn(B.id,u,A,p,[]);T.cached=O,$t.addCompositionToTree(T)})}var ds=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function yi(B){return ds(this,void 0,void 0,function*(){try{var u=(0,e.Xr)();const s=JSON.stringify(B),p=yield fetch(r.B.CreateSessionId(),{method:"POST",headers:u,body:s});return p.ok?p.json():(console.log("Creating session failed",yield p.json()),(0,o.ry)(p),null)}catch(s){console.log("Creating session failed",s),(0,o.Mb)(s,r.B.CreateSessionId())}})}var us=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function vi(B,u){return us(this,void 0,void 0,function*(){try{var s=(0,e.Xr)("application/x-www-form-urlencoded");const p=new URLSearchParams;p.append("sessionId",B.toString()),p.append("url",u);const T=yield fetch(r.B.CreateSessionVisitUrl(),{method:"POST",headers:s,body:p});return T.ok?T.json():(console.log("Creating session url failed",yield T.json()),(0,o.ry)(T),null)}catch(p){console.log("Creating session url failed",p),(0,o.Mb)(p,r.B.CreateSessionVisitUrl())}})}var hs=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function mi(B,u,s){return hs(this,arguments,void 0,function*(p,T,A,O=10,G=1){let _=[];try{var g=new URLSearchParams;g.append("typeId",`${p}`),g.append("toTheConceptId",`${T}`),g.append("userId",`${A}`),g.append("inpage",`${O}`),g.append("page",`${G}`);var d=(0,e.Xr)("application/x-www-form-urlencoded");const F=yield fetch(r.B.GetAllConnectionsToConceptUrl(),{method:"POST",headers:d,body:g});return F.ok?_=yield F.json():(console.log("Get connection of concept error",F.status),(0,o.ry)(F)),_}catch(F){throw F instanceof Error?console.log("Get connection of concept  error message: ",F.message):console.log("Get connection of concept unexpected error: ",F),F}})}var Ci=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function go(B,u){var s=arguments;return Ci(this,arguments,void 0,function*(p,T,A=10,O=1,G=!1){const _=ye.V.logfunction("GetRelation",s)||{};if(Ge){_.serviceWorker=!0;try{const q=yield $e("GetRelation",{id:p,relation:T,inpage:A,page:O,reverse:G});return ye.V.logUpdate(_),q.data}catch(q){console.error("GetRelation error sw: ",q),(0,o.ey)(_,"GetRelation",q),Qe(q)}}let g=[],d=yield(0,he.A)(p),F=yield(0,Ne.Az)(T),V=[];if(F.id>0)if(G){V=yield mi(F.id,d.id,d.userId,A,O);let q=[];for(var z=0;z<V.length;z++)q.push(V[z].ofTheConceptId);yield(0,v.Y)(q);for(let ne=0;ne<V.length;ne++){let de=V[ne].ofTheConceptId,me=yield(0,he.A)(de),Ie=yield(0,i.Ez)(me.id);g.push(Ie)}}else{V=yield ue(F.id,d.id,d.userId,A,O);let q=[];for(let ne=0;ne<V.length;ne++)q.push(V[ne].toTheConceptId);yield(0,v.Y)(q);for(let ne=0;ne<V.length;ne++){let de=V[ne].toTheConceptId,me=yield(0,he.A)(de),Ie=yield(0,i.Ez)(me.id);g.push(Ie)}}return ye.V.logUpdate(_),g})}function wi(B,u){var s=arguments;return Ci(this,arguments,void 0,function*(p,T,A=10,O=1,G=!1){const _=ye.V.logfunction("GetRelationRaw",s)||{};if(Ge){_.serviceWorker=!0;try{const ne=yield $e("GetRelationRaw",{id:p,relation:T,inpage:A,page:O,reverse:G});return ye.V.logUpdate(_),ne.data}catch(ne){console.error("GetRelationRaw error sw: ",ne),(0,o.ey)(_,"GetRelationRaw",ne),Qe(ne)}}let g=[],d=yield(0,he.A)(p),F=yield(0,Ne.Az)(T),V=[],z=[];if(F.id>0){if(G){V=yield mi(F.id,d.id,d.userId,A,O);for(var q=0;q<V.length;q++)z.push(V[q].ofTheConceptId)}else{V=yield ue(F.id,d.id,d.userId,A,O);for(let ne=0;ne<V.length;ne++)z.push(V[ne].toTheConceptId)}g=yield(0,gn.r)(z)}return ye.V.logUpdate(_),g})}var yo=y(6416),Rt=y(4711);class ps{constructor(u,s,p,T){this.value=[],this.height=1,this.key=u,this.value.push(s),this.leftNode=p,this.rightNode=T}addNode(u,s,p){if(s==null)return u;var T=s.leftNode,A=s.rightNode;if(s.key>u.key)s.leftNode=this.addNode(u,T,p);else{if(!(s.key<u.key))return s.value.push(...u.value),s;s.rightNode=this.addNode(u,A,p)}s.height=1+Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode));let O=this.getBalanceFactor(s);if(O>1&&s.leftNode){if(u.key<s.leftNode.key)return this.rightRotate(s);if(u.key>s.leftNode.key)return s.leftNode=this.leftRotate(s.leftNode),this.rightRotate(s)}if(O<-1&&s.rightNode){if(u.key>s.rightNode.key)return this.leftRotate(s);if(u.key<s.rightNode.key)return s.rightNode=this.rightRotate(s.rightNode),this.leftRotate(s)}return s}rightRotate(u){if(u){let s=u.leftNode;if(s){let p=s.rightNode;return u.leftNode=p,s.rightNode=u,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,s}}return u}leftRotate(u){if(u){let s=u.rightNode;if(s){let p=s.leftNode;return s.leftNode=u,u.rightNode=p,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(u.rightNode))+1,s}}return u}getHeight(u){return u?u.height:0}getBalanceFactor(u){return u==null?0:this.getHeight(u.leftNode)-this.getHeight(u.rightNode)}getFromNode(u,s){return s&&(u==s.key?s:u<s.key?this.getFromNode(u,s.leftNode):u>s.key?this.getFromNode(u,s.rightNode):s)}removeNode(u,s){if(u==null)return u;if(u.key>s)return u.leftNode=this.removeNode(u.leftNode,s),u;if(u.key<s)return u.rightNode=this.removeNode(u.rightNode,s),u;if(u.leftNode==null){let T=u.rightNode;return u=null,T}if(u.rightNode==null){let T=u.leftNode;return u=null,T}var p=this.inOrderSuccessor(u.rightNode);return u.value=p.value,u.key=p.key,u.rightNode=this.removeNode(u.rightNode,p.key),u}countNodeBelow(u){return u==null?0:1+this.countNodeBelow(u.leftNode)+this.countNodeBelow(u.rightNode)}inOrderSuccessor(u){for(;u.leftNode!=null;)u=u.leftNode;return u}}var vo=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};class en{static compositeKey(u,s){return("0000"+u.toString(16).toUpperCase()).slice(-4)+("0000"+s.toString(16).toUpperCase()).slice(-4)}static addNodeToTree(u){if(this.root==null)return this.root=u,this.root;this.root=this.root.addNode(u,this.root,this.root.height)}static waitForDataToLoad(){return vo(this,void 0,void 0,function*(){return new Promise((u,s)=>{this.checkFlag(u),setTimeout(()=>{s("not")},25e3)})})}static checkFlag(u){if(n.B.isDataLoaded)return u("done");setTimeout(en.checkFlag,1e3,u)}static addConceptToTree(u,s,p=999){let T=this.compositeKey(s,p);var A=new ps(T,u,null,null);this.addNodeToTree(A)}static getNodeFromTree(u,s){return vo(this,void 0,void 0,function*(){let p=this.compositeKey(u,s);return this.root?this.root.getFromNode(p,this.root):null})}static removeNodeFromTree(u){return vo(this,arguments,void 0,function*(s,p=999){if(this.root){let T=this.compositeKey(s,p);this.root=this.root.removeNode(this.root,T)}})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}en.root=null;var Ti=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function ki(B,u){return Ti(this,arguments,void 0,function*(s,p,T=999){let A=yield en.getNodeFromTree(s,T),O=(0,yo.u)();if(A)for(let G=0;G<A.value.length;G++){let _=A.value[G];_.ghostId==p&&(O=_)}return O})}function Ii(B,u){return Ti(this,arguments,void 0,function*(s,p,T=999){en.addConceptToTree(s,p,T)})}var tn=y(5312),mo=y(1213),Si=y(3729),fs=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})},gs=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function Ai(B,u,s){return gs(this,void 0,void 0,function*(){try{if(Ge)try{return(yield $e("GetRelationLocal",{id:B,relation:u,userId:s})).data}catch(O){console.error("GetRelationLocal error sw: ",O),Qe(O)}let p=yield(0,t.$I)(u),T=[];p.id!=0&&(T=yield function(O,G){return fs(this,void 0,void 0,function*(){try{return yield R.G.GetConnectionOfCompositionAndTypeLocal(G,O)}catch(_){throw _}})}(B,p.id));let A=[];for(let O=0;O<T.length;O++){let G=yield U(T[O].toTheConceptId);A.push(G)}return A}catch(p){throw p}})}var ys=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function Co(B){return ys(this,void 0,void 0,function*(){let u=[];try{var s=(0,e.Xr)();const p=yield fetch(r.B.ViewInternalDataUrl(),{method:"POST",headers:s,body:JSON.stringify(B)});if(p.ok){let T=yield p.json(),A={};for(let O=0;O<T.length;O++){let G=T[O].concepts;u=T[O].connections;let _=T[O].id;(0,gn.r)(G),A[_]=u}return A}return console.log("View Internal Data error",p.status),(0,o.ry)(p),u}catch(p){throw p instanceof Error?console.log(" This is the view internal data error message: ",p.message):console.log(" This is the view internal data unexpected error: ",p),p}})}var vs=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function wo(B){return vs(this,void 0,void 0,function*(){var u;try{let s=yield Co(B),p=[];for(let T=0;T<B.length;T++){let A=B[T],O=s[A];if(A&&O){let G=[],_={};for(let d=0;d<O.length;d++)G.includes(O[d].ofTheConceptId)||G.push(O[d].ofTheConceptId);let g=yield(0,i.zN)(A,O,G);_.data=g,_.id=A,p.push(_)}else{let G={};G.id=A;let _=yield(0,he.A)(A),g={};_.type&&(g[(u=_?.type)===null||u===void 0?void 0:u.characterValue]=_.characterValue,G.data=g,p.push(G))}}return p}catch(s){throw s}})}var $n=y(176),Ni=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})},Li=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function bi(B){return Li(this,arguments,void 0,function*(u,s=""){try{let p=yield function(T){return Ni(this,arguments,void 0,function*(A,O=""){var G=(0,e.ab)("application/json",O);let _=r.B.SearchInternalWithAuthenticatedCcsUrl();_=_+"?composition="+A.composition+"&search="+A.search+"&internalComposition="+A.internalComposition+"&type="+A.type+"&inpage="+A.inpage+"&page="+A.page;try{const g=yield fetch(_,{method:"GET",headers:G});return g.ok?yield g.json():(console.log("This is the searching internal error",g.status),(0,o.ry)(g),[])}catch(g){console.log("This is the searching internal error",g),(0,o.Mb)(g,_)}})}(u,s);return yield wo(p)}catch(p){throw p}})}function _i(B){return Li(this,arguments,void 0,function*(u,s=""){try{return yield function(p){return Ni(this,void 0,void 0,function*(){var T=(0,e.ab)("application/json","");let A=r.B.SearchInternalWithCcsUrl();A=A+"?composition="+p.composition+"&search="+p.search+"&internalComposition="+p.internalComposition+"&type="+p.type+"&inpage="+p.inpage+"&page="+p.page;try{const O=yield fetch(A,{method:"GET",headers:T});return O.ok?yield O.json():(console.log("This is the searching internal error",O.status),(0,o.ry)(O),[])}catch(O){console.log("This is the searching internal error",O),(0,o.Mb)(O,A)}})}(u)}catch(p){throw p}})}var To=y(8095),ms=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function Ei(B){return ms(this,void 0,void 0,function*(){if(Ge)try{return(yield $e("DeleteConceptLocal",{id:B})).data}catch(s){console.error("DeleteConceptLocal error sw: ",s),Qe(s)}let u=yield(0,mo.f)(B);I.v.RemoveConcept(u)})}var xi=y(2803),Cs=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function Oi(B,u,s,p){return Cs(this,arguments,void 0,function*(T,A,O,G,_=!0){var g,d;const F=ye.V.logfunction("GetConnectionBetweenTwoConceptsLinker")||{};if(Ge){F.serviceWorker=!0;try{const q=yield $e("GetConnectionBetweenTwoConceptsLinker",{ofTheConcept:T,toTheConcept:A,linker:O,fullLinker:G,forward:_});return ye.V.logUpdate(F),q.data}catch(q){console.error("GetConnectionBetweenTwoConceptsLinker sw error: ",q),(0,o.ey)(F,"GetConnectionBetweenTwoConceptsLinker",q),Qe(q)}}let V=(0,te.o)();if(O!=""){let q="";q=_?((g=T.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+O+"_s":((d=A.type)===null||d===void 0?void 0:d.characterValue)+"_s_"+O+"_by",V=yield(0,Ce.A)("connection",q,!1,999)}G!=""&&(V=yield ze(G,999));let z=[];return z=_?yield(0,xi.x)(T.id,A.id,V.id):yield(0,xi.x)(A.id,T.id,V.id),ye.V.logUpdate(F),z})}function Bi(B,u){return new Promise((s,p)=>{setTimeout(()=>{s(u)},B)})}var We=y(3130);const Ri=3,Di=4,Gi=5;var ws=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function ko(B,u){return ws(this,arguments,void 0,function*(s,p,T=""){let A=r.B.SearchAllTypeWithLinker(s.auth);var O=(0,e.ab)("application/json",T);A=A+"?search="+s.search+"&type="+s.type+"&inpage="+s.inpage+"&page="+s.page;const G=JSON.stringify(p);try{const _=yield fetch(A,{method:"POST",headers:O,body:G});return _.ok?yield _.json():((0,o.ry)(_),console.log("This is the searching multiple error",_.status),[])}catch(_){console.log("This is the searching SearchWithTypeAndLinker error",_),(0,o.Mb)(_,A)}})}var Ht=y(4287);class Io extends Ht.w{constructor(u,s,p=We.y0){super(),this.searchQuery=[],this.format=We.y0,this.searchQuery=u,this.format=p}bind(){return u=this,s=void 0,T=function*(){return this.data=yield(0,tn.cf)(this.searchQuery,"",this,this.format),this.mainConcept=this.searchQuery[0].composition,this.listenToEvent(this.mainConcept),console.log("this is the data",this.data),this.data},new((p=void 0)||(p=Promise))(function(A,O){function G(d){try{g(T.next(d))}catch(F){O(F)}}function _(d){try{g(T.throw(d))}catch(F){O(F)}}function g(d){var F;d.done?A(d.value):(F=d.value,F instanceof p?F:new p(function(V){V(F)})).then(G,_)}g((T=T.apply(u,s||[])).next())});var u,s,p,T}}function Fi(B,u,s=We.y0){return new Io(B,u??"",s)}var Pi=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};class Ts extends Ht.w{constructor(u,s=We.ZJ){super(),this.id=u,this.format=s}bind(){return Pi(this,void 0,void 0,function*(){if(!this.isDataLoaded){let u=yield(0,i.hL)(this.id);this.mainConcept=this.id,this.compositionIds=u.compositionList;let s=u.connectionList;for(let p=0;p<s.length;p++)this.internalConnections.push(s[p].id);this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return Pi(this,void 0,void 0,function*(){let u=[],s=this.internalConnections;for(let p=0;p<s.length;p++)u.push(yield Pt.d.GetConnection(s[p]));return this.format==We.ZJ?this.data=yield(0,i.ay)(this.mainConcept,u,this.compositionIds):this.format==We.y0?this.data=yield(0,i.$V)(this.mainConcept,u,this.compositionIds):this.format==We.yv?this.data=yield(0,i.re)(this.mainConcept,u,this.compositionIds):this.data=yield(0,i.ay)(this.mainConcept,u,this.compositionIds),this.data})}}function Ui(B,u=We.ZJ){return new Ts(B,u)}var Wi=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};class ks extends Ht.w{constructor(u,s,p,T,A){super(),this.data=[],this.startPage=0,this.compositionName=u,this.userId=s,this.inpage=p,this.page=T,this.format=A}bind(){return Wi(this,void 0,void 0,function*(){if(!this.isDataLoaded){var u=yield(0,a.A)(this.compositionName);if(u){yield f(this.compositionName,this.userId);let T=yield C.I.GetConceptsByTypeIdAndUser(u.id,this.userId);for(var s=this.inpage*(this.page-1),p=s;p<s+this.inpage;p++)T[p]&&this.compositionIds.push(T[p].id)}yield(0,v.Y)(this.compositionIds),this.isDataLoaded=!0,this.listenToEventType(u.id);for(let T=0;T<this.compositionIds.length;T++)this.listenToEvent(this.compositionIds[T])}return yield this.build()})}build(){return Wi(this,void 0,void 0,function*(){if(this.data=[],this.format==We.ZJ){for(let u=this.startPage;u<this.startPage+this.inpage;u++)if(this.compositionIds[u]){let s=yield(0,i.kx)(this.compositionIds[u]);this.data.push(s)}}else if(this.format==We.y0){for(let u=this.startPage;u<this.startPage+this.inpage;u++)if(this.compositionIds[u]){let s=yield(0,i.RW)(this.compositionIds[u]);this.data.push(s)}}else if(this.format==We.yv){for(let u=this.startPage;u<this.startPage+this.inpage;u++)if(this.compositionIds[u]){let s=yield(0,i.XI)(this.compositionIds[u]);this.data.push(s)}}else for(let u=this.startPage;u<this.startPage+this.inpage;u++)if(this.compositionIds[u]){let s=yield(0,i.kx)(this.compositionIds[u]);this.data.push(s)}return this.data})}}function Mi(B,u,s,p,T=We.ZJ){return new ks(B,u,s,p,T)}var qt=y(1320),Vi=y(5328),Hn=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};class Is extends Ht.w{constructor(u,s,p="",T){super(),this.searchText="",this.connections=[],this.externalConnectionIds=[],this.data=[],this.mainConcept=u,this.searchLinkers=s,this.textSearch=p,T&&(this.format=T)}listenToEvent(u){if(this.eventHandlers[u])return;const s=p=>Hn(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let T=this;setTimeout(function(){return Hn(this,void 0,void 0,function*(){try{let A=yield Pt.d.GetConnectionByOfTheConceptAndType(u,u);for(let O=0;O<A.length;O++)yield Pt.d.GetConnection(A[O]).then(G=>{G.typeId==T.mainConcept?T.internalConnections.includes(G.id)||T.internalConnections.push(G.id):T.linkers.includes(G.id)||T.linkers.push(G.id),T.conceptIds.includes(G.toTheConceptId)||T.conceptIds.push(G.toTheConceptId),T.compositionIds.includes(G.ofTheConceptId)||T.compositionIds.push(G.ofTheConceptId),T.compositionIds.includes(G.toTheConceptId)||T.compositionIds.push(G.toTheConceptId)});T.isUpdating=!1,yield T.bind(),T.notify()}catch(A){throw console.error("Error in RecursiveSearchObservable event listener:",A),T.isUpdating=!1,A}})},200)}});this.eventHandlers[u]=s,window.addEventListener(`${u}`,s)}bind(){return Hn(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;const u=yield io(this.mainConcept,this.searchLinkers,this.textSearch);this.compositionIds=u.compositionIds||[],this.internalConnections=u.internalConnections||[],this.externalConnectionIds=u.externalConnections||[],this.linkers=this.externalConnectionIds,this.connections=yield(0,Vn.j)(this.externalConnectionIds);for(let s=0;s<this.compositionIds.length;s++)this.listenToEvent(this.compositionIds[s]);this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return Hn(this,void 0,void 0,function*(){return this.externalConnectionIds=this.linkers,this.format&&this.format==We.XZ?this.data={compositionIds:this.compositionIds,internalConnections:this.internalConnections,externalConnections:this.externalConnectionIds}:this.data=yield(0,ot.p8)(this.compositionIds,this.internalConnections),this.data})}}function ji(B,u,s="",p){return new Is(B,u,s,p)}var qn=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};class Ss extends Ht.w{constructor(u,s,p,T=We.y0){super(),this.searchQuery=[],this.format=We.y0,this.mainCompositionIds=[],this.searchCharacter="",this.token="",this.searchStructure=u,this.searchQuery=s,this.searchQuery[0].type=u.composition,this.searchCharacter=u.composition,this.format=T,this.token=Je.b.BearerAccessToken}listenToEventType(u){if(this.eventHandlers[u])return;const s=p=>qn(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let T=this;setTimeout(function(){return qn(this,void 0,void 0,function*(){try{let A=p;T.mainCompositionIds.includes(A?.detail)||(T.mainCompositionIds.unshift(A?.detail),T.conceptIds.push(A?.detail),T.listenToEvent(A?.detail),Pt.d.GetConnectionsOfConcept(A?.detail).then(O=>{for(let G=0;G<O.length;G++)T.linkers.push(O[G].id)})),T.isUpdating=!1,yield T.bind(),T.notify()}catch(A){throw console.error("Error in GetLinkListObservable event listener:",A),T.isUpdating=!1,A}})},200)}});this.eventHandlers[u]=s,window.addEventListener(`${u}`,s)}bind(){return qn(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;var u=yield(0,a.A)(this.searchCharacter);let s=yield ko(this.searchStructure,this.searchQuery,this.token);this.conceptIds=s.compositionIds,this.internalConnections=s.internalConnections,this.linkers=s.linkers,this.reverse=s.reverse,this.mainCompositionIds=s.mainCompositionIds,this.listenToEventType(u.id);for(let p=0;p<this.mainCompositionIds.length;p++)this.listenToEvent(this.mainCompositionIds[p])}return yield this.build()})}build(){return qn(this,void 0,void 0,function*(){return yield(0,gn.r)(this.conceptIds),this.format==We.y0?this.data=yield(0,qt.yV)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse):this.data=yield(0,qt._W)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse),this.data})}}function $i(B,u,s,p=We.y0){return new Ss(B,u,s,p)}var So=y(4698),Hi=y(6915),qi=y(2615);class zi{constructor(u,s,p,T,A,O,G,_=!1,g,d,F){this.structureType="lconcept",this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=r.B.getRandomizer(),this.id=u,this.userId=s,this.typeId=p,this.ghostId=u,this.categoryId=T,this.characterValue=O,this.accessId=A,this.type=null,this.isNew=_,this.typeCharacter=G,this.entryTimeStamp=g,this.updatedTimeStamp=d,this.isSynced=!1,this.referentId=F}getType(){console.log(this.typeId)}}class Ji{constructor(u,s,p,T,A,O){this.isTemp=!1,this.applicationId=r.B.getRandomizer(),this.type=(0,te.o)(),this.id=u,this.ofTheConceptId=s,this.toTheConceptId=p,this.typeId=T,this.ghostId=u,this.orderId=A,this.typeCharacter="",this.accessId=O,this.typeCharacter="",this.entryTimeStamp=(0,te.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date}}class Qi{constructor(){this.compositionId=0,this.userId=999,this.sessionId=999,this.accessId=4,this.ofTheCompositionId=0,this.patchObject={}}}class Yi{constructor(){this.id="0",this.remote_address="",this.server_port="",this.server_address="",this.server_name="",this.server_software="",this.http_user_agent="",this.self="",this.port="",this.userId="",this.email=""}}var nn=y(628);class zn{constructor(){this.type="",this.search="",this.logicoperator="=",this.index=0,this.composition=!0,this.name="",this.operateon=""}}class Xi{constructor(){this.type="",this.search="",this.composition="",this.internalComposition="",this.userId=999,this.inpage=10,this.page=1,this.auth=!0}}var Zi=y(7887),Ki=y(3075),As=y(7869),er=y(9635),ye=y(9700);class Ao{static initialize(){try{console.warn("Initialized Application Monitoring for tracking errors..."),this.initGlobalErrorHandlers(),this.logCatchError(),this.logErrorEvent(),this.logUnhandledError(),this.logUserInteractions(),this.logNetworkRequests(),this.logRouteChanges()}catch(u){console.error("Error during Application Monitoring initialization:",u)}}static initGlobalErrorHandlers(){try{if(console.log("this is the window",window),typeof window===void 0)return;window.onerror=(u,s,p,T,A)=>{const O=Je.b.sessionId||"unknown",G={message:u,source:s,lineno:p,colno:T,stack:A?.stack||"undefined",requestFrom:r.B.BASE_APPLICATION,sessionId:O};ye.V.logApplication("ERROR","Runtime Error",G),ye.V.log("ERROR","Runtime Error",G)},window.onunhandledrejection=u=>{const s=Je.b.sessionId||"unknown";ye.V.logApplication("ERROR","Unhandled Promise Rejection",{message:u.reason?u.reason.message:u.reason,stack:u.reason?u.reason.stack:null,requestFrom:r.B.BASE_APPLICATION,sessionId:s}),ye.V.log("ERROR","Unhandled Promise Rejection",{message:u.reason?u.reason.message:u.reason,stack:u.reason?u.reason.stack:null,requestFrom:r.B.BASE_APPLICATION,sessionId:s})}}catch(u){console.warn("Failed to initialize global error handlers:",u)}}static logCatchError(){try{const u=console.error;console.log("Inside originalConsoleError..."),console.error=function(...s){if(s?.[0]=="Intercepted Fetch Error:")return;const p="Console Error",T=Je.b.sessionId||"unknown",A={arguments:s.map(O=>tr(O)),requestFrom:r.B.BASE_APPLICATION,sessionId:T};ye.V.logApplication("ERROR",p,A),ye.V.log("ERROR",p,A),u.apply(console,s)}}catch(u){console.warn("Failed to override console.error:",u)}}static logErrorEvent(){try{window.addEventListener("error",u=>{var s;console.log("Inside error event...");const p=Je.b.sessionId||"unknown",T={error:((s=u.error)===null||s===void 0?void 0:s.message)||u.message,source:u.filename,line:u.lineno,column:u.colno,stack:u.error?tr(u.error.stack):void 0,requestFrom:r.B.BASE_APPLICATION,sessionId:p},A="Unhandled Error";ye.V.logApplication("ERROR",A,T),ye.V.log("ERROR",A,T)})}catch(u){console.warn("Failed to add error event listener:",u)}}static logUnhandledError(){try{window.addEventListener("unhandledrejection",u=>{var s,p;console.log("Inside unhandledrejection...");const T=Je.b.sessionId||"unknown",A={reason:((s=u.reason)===null||s===void 0?void 0:s.message)||String(u.reason),stack:((p=u.reason)===null||p===void 0?void 0:p.stack)||"No stack trace available",requestFrom:r.B.BASE_APPLICATION,sessionId:T};ye.V.logApplication("ERROR","Unhandled Promise Rejection",A),ye.V.log("ERROR","Unhandled Promise Rejection",A)})}catch(u){console.warn("Failed to add unhandled rejection event listener:",u)}}static logUserInteractions(){document.addEventListener("click",u=>{var s;const p=Je.b.sessionId||"unknown",T=u.target,A={element:T.tagName,id:T.id,classes:T.className,text:(s=T.innerText)===null||s===void 0?void 0:s.slice(0,50),requestFrom:r.B.BASE_APPLICATION,sessionId:p};ye.V.logApplication("INFO","User Click",A)}),document.addEventListener("input",u=>{const s=u.target;Je.b.sessionId,s.tagName,s.id,s.value,r.B.BASE_APPLICATION}),document.addEventListener("scroll",()=>{Je.b.sessionId,r.B.BASE_APPLICATION})}static logNetworkRequests(){try{if(typeof window===void 0)return;Je.b.sessionId;const u=window?.fetch;if(!u)throw new Error("Original fetch is not available.");const s=[r.B.PostLogger(),r.B.PostPrefetchConceptConnections()];window.fetch=(...p)=>{return T=this,A=void 0,G=function*(){const _=Je.b.sessionId||"unknown",[g,d]=p,F=g instanceof Request?g.url:g instanceof URL?g.toString():g;if(s.includes(F))return console.log("Ignored URLs detected : ",F),u(...p);let V={request:{type:"REQUEST",message:"Network Request",method:d?.method||"GET",url:F,body:d?.body,requestFrom:r.B.BASE_APPLICATION,sessionId:_}};try{const z=yield u(...p);return V.response={type:"RESPONSE",message:"Network Response",url:F,status:z.status,requestFrom:r.B.BASE_APPLICATION,sessionId:_},z}catch(z){throw V.response={type:"ERROR",message:"Network Request Failed",url:F,error:z instanceof Error?z.message:String(z),requestFrom:r.B.BASE_APPLICATION,sessionId:_},ye.V.logApplication("ERROR","Failed Network Request",V),new Error(`Network request failed for ${F}: ${z.message}`)}},new((O=void 0)||(O=Promise))(function(_,g){function d(z){try{V(G.next(z))}catch(q){g(q)}}function F(z){try{V(G.throw(z))}catch(q){g(q)}}function V(z){var q;z.done?_(z.value):(q=z.value,q instanceof O?q:new O(function(ne){ne(q)})).then(d,F)}V((G=G.apply(T,A||[])).next())});var T,A,O,G}}catch(u){console.warn("Failed to override network requests:",u)}}static logPerformanceMetrics(){typeof window!==void 0&&window?.addEventListener("load",()=>{const u=performance.timing;Je.b.sessionId,u.loadEventEnd,u.navigationStart,u.domContentLoadedEventEnd,u.navigationStart,r.B.BASE_APPLICATION})}static logRouteChanges(){const u=history.pushState;setTimeout(()=>{Ao.logOnWindowLoad()},3e3),history.pushState=function(...s){const p=Je.b.sessionId||"unknown",T={url:s[2]?new URL(s[2],location.origin).href:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:p};return ye.V.logApplication("ROUTE","Route Change",T),u.apply(this,s)},window?.addEventListener("beforeunload",()=>{const s=Je.b.sessionId||"unknown",p={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:s};ye.V.logApplication("ROUTE","Unload",p)}),window?.addEventListener("popstate",()=>{const s=Je.b.sessionId||"unknown",p={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:s};ye.V.logApplication("ROUTE","Route Changed (Back/Forward)",p)})}static logOnWindowLoad(){const u=Je.b.sessionId||"unknown",s={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:u};ye.V.logApplication("ROUTE","Initial Load",s)}static logSample(){const u=Je.b.sessionId||"unknown",s={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:u};ye.V.logApplication("ROUTE","Sample",s)}static logWebSocketEvents(){if(typeof window===void 0)return;const u=Je.b.sessionId||"unknown",s=WebSocket;window.WebSocket=class extends s{constructor(p,T){super(p,T);const A={url:p.toString(),requestFrom:r.B.BASE_APPLICATION,sessionId:u};ye.V.logApplication("INFO","WebSocket Open",A),this.addEventListener("message",O=>{const G=Je.b.sessionId||"unknown",_={url:p,data:O.data,requestFrom:r.B.BASE_APPLICATION,sessionId:G};ye.V.logApplication("INFO","WebSocket Message",_)}),this.addEventListener("error",O=>{const G=Je.b.sessionId||"unknown",_={url:p,error:O instanceof Error?O.message:String(O),requestFrom:r.B.BASE_APPLICATION,sessionId:G};ye.V.logApplication("ERROR","WebSocket Error",_)}),this.addEventListener("close",()=>{const O=Je.b.sessionId||"unknown",G={url:p,requestFrom:r.B.BASE_APPLICATION,sessionId:O};ye.V.logApplication("INFO","WebSocket Closed",G)})}}}}function tr(B){try{return JSON.stringify(B,(u,s)=>s&&typeof s=="object"&&s instanceof Error?{message:s.message,stack:s.stack}:s)}catch{return"Error while serializing value"}}const nr=(B,u,...s)=>{return p=void 0,T=[B,u,...s],O=function*(G,_,g=!1){try{let d=r.B.sendMail();g&&(d=r.B.sendBulkMail());const F=yield fetch(d,{method:"POST",body:G instanceof FormData?G:JSON.stringify(G),headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`}}),V=F.headers.get("content-type");if(!F.ok){const q=yield F.json();return console.info(`${F.status} ${q}`),null}const z=yield F.json();return V&&V.includes("text/plain")?yield F.text():z}catch(d){return console.error(d),null}},new((A=void 0)||(A=Promise))(function(G,_){function g(V){try{F(O.next(V))}catch(z){_(z)}}function d(V){try{F(O.throw(V))}catch(z){_(z)}}function F(V){var z;V.done?G(V.value):(z=V.value,z instanceof A?z:new A(function(q){q(z)})).then(g,d)}F((O=O.apply(p,T||[])).next())});var p,T,A,O};class Ns{constructor(){this.inDevelopment=!1,this.subscribers=[]}notify(u=null){this.subscribers.map(s=>{s(u||this.data)})}dataChange(u){this.subscribers.push(u)}}class Ls extends Ns{constructor(){super(...arguments),this.element=null,this.elementIdentifier=0,this.widgetMounted=!1}getComponent(){return this.element}getElementById(u){let s=this.getComponent(),p=document.body;if(s){let T=s.querySelector("#"+u);if(T)return p=T,p}return null}createWidgetWrapperIdentifier(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier.toString()}}class Jn extends Ls{constructor(){super(...arguments),this.html="",this.css="",this.js="",this.state={},this.previousState={},this.childWidgets=[],this.childWidgetElement=[],this.widgetState={},this.parentElement=""}querySelector(u){return this.element?this.element.querySelector(u):null}querySelectorAll(u){return this.element?this.element.querySelectorAll(u):null}getElement(){return this.element}setTitle(u){document.title=u}getHtml(){return this.html}UpdateChildData(u,s){let p=s;p.data=u,p.render(),p.update()}update(){}setState(u){this.previousState=Object.assign({},this),this.data=u,this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}setStateProperty(u){this.previousState=Object.assign({},this),Object.assign(this,u),this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}hasStateChanged(){return!this.isPropertyEqual(this.state,this.previousState)}isPropertyEqual(u,s){if(u===s)return!0;if(typeof u!="object"||typeof s!="object"||u===null||s===null)return!1;const p=Object.keys(u),T=Object.keys(s);if(p.length!==T.length)return!1;for(let A of p){if(!T.includes(A))return!1;for(let O of T)if(A==O&&A!="state"&&A!="previousState"&&u[A]!=s[A])return!1}return!0}loadChildWidgets(){this.childWidgets.map(u=>{let s=this.getElementById(u.parentElement);s&&(s.innerHTML=""),u.mount(s)})}render(){this.element&&(this.element.innerHTML=this.getHtml()),this.loadChildWidgets(),this.after_render()}getElementByClassName(u){let s=this.getComponent();return s?s?.querySelectorAll("."+u):[]}mount_child(){}mount(u){return s=this,p=void 0,A=function*(){u&&(this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier(),this.element.innerHTML=this.getHtml(),this.element.classList.add("mftsccs-marking-rendered"),u.appendChild(this.element),this.parentElement=u.id,this.before_render(),this.mount_child(),this.widgetMounted=!0)},new((T=void 0)||(T=Promise))(function(O,G){function _(F){try{d(A.next(F))}catch(V){G(V)}}function g(F){try{d(A.throw(F))}catch(V){G(V)}}function d(F){var V;F.done?O(F.value):(V=F.value,V instanceof T?V:new T(function(z){z(V)})).then(_,g)}d((A=A.apply(s,p||[])).next())});var s,p,T,A}before_render(){this.render()}after_render(){console.log("this is calling the after render",this)}renderChildWidgets(){function u(s){var p;s&&((p=s.childWidgets)===null||p===void 0||p.forEach(T=>{u(T)}),s.render())}console.log("this is the render child widget",this),this.childWidgets.forEach(s=>{u(s)})}setWidgetState(u,s){this.widgetState[u]=s,function p(T){T&&Array.isArray(T.childWidgets)&&T.childWidgets.forEach(A=>{A.widgetState=Object.assign(Object.assign({},A.widgetState),T.widgetState),p(A)})}(this),this.renderChildWidgets()}getWidgetState(u,s){return Object.keys.length&&this.widgetState[u]?this.widgetState[u]:s}}var on=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};class bn extends Jn{constructor(){super(...arguments),this.childComponents=[],this.componentMounted=!1,this.oldHtml=null,this.phonebooks=[],this.childrenData={},this.childWidgets=[],this.typeValueList=[],this.widgetType="the_element_name",this.parentConceptList=[],this.customFunctions=[],this.widgetDependenciesData=""}getUserId(){return on(this,void 0,void 0,function*(){const u=yield new Promise(s=>{let p=(localStorage==null?void 0:localStorage.getItem("profile"))||"";p?s(JSON.parse(p)):s()});return u?.userId})}getTypeValueList(){return on(this,arguments,void 0,function*(u=""){return new Promise(s=>on(this,void 0,void 0,function*(){const p=(u=this.widgetType)==null?void 0:u.match(/^[a-z0-9]+_[a-z0-9]+/i),T=p?p[0]:"",A=u?.match(/^([a-z0-9]+).*_([a-z0-9]+)$/i),O=A?`${A[1]}_${A[2]}`:"";let G=[],_=new zn;_.type=O,_.search="1",_.logicoperator=">",_.name="emailfilter",_.operateon="entityEmail",_.composition=!1,G.push(_);let g=new kt;g.typeConnection=u,g.name="entityEmail";let d=new kt;d.type=T,d.filterLogic="( emailfilter )",d.filters=G,d.name="top",d.inpage=100,d.freeschemaQueries=[g],d.outputFormat=We.y0,Cn(d,"").subscribe(F=>{if(F?.length){const V=F?.map(z=>{var q,ne,de,me,Ie,fe,Se;const Re=(me=(de=(ne=(q=z.data)===null||q===void 0?void 0:q[T])===null||ne===void 0?void 0:ne[u])===null||de===void 0?void 0:de.data)===null||me===void 0?void 0:me[O];return{id:(Se=(fe=(Ie=z.data)===null||Ie===void 0?void 0:Ie[T])===null||fe===void 0?void 0:fe[u])===null||Se===void 0?void 0:Se.id,name:Re,text:Re}});return this.typeValueList=V,s(V),V}})}))})}setTitle(u){document.title=u}getHtml(){return this.html}createRandomNumber(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier}mount_child(){return on(this,void 0,void 0,function*(){try{new Function("tsccs",`
        return (async function() {
          ${this.mountChildWidgetsFunction}
        }).call(this);
      `).bind(this)(N)}catch(u){throw console.log("This is the error in the mount child",u),u}})}setProperty(u){return on(this,void 0,void 0,function*(){return this.widgetType=u,this.getTypeValueList(this.widgetType).then(()=>{var s,p,T;(s=this.element)===null||s===void 0||s.setAttribute("data-type-value",this.widgetType),(T=(p=this.element)===null||p===void 0?void 0:p.parentElement)===null||T===void 0||T.setAttribute("data-type-value",this.widgetType),this.render()}),this})}createTypeEditor(u){(function(s,p){if(s){const T=document.querySelector("#widget-properties #widget-type"),A=T?.querySelectorAll("input");A?.forEach(d=>{d?.remove()});const O=s.target.closest(".added-widget-container"),G=s.target.closest("div");O?O?.getAttribute("data-type-value"):G&&G?.getAttribute("data-type-value");const _=document.createElement("input");_.setAttribute("type","text"),_.setAttribute("name","input-widgetTypeValue"),_.setAttribute("of",p.elementIdentifier.toString()),_.setAttribute("class","form-control"),_.setAttribute("id","widgetType"),_.setAttribute("onchange","updateWidgetTypeValue(event)"),p.widgetType?_.value=p.widgetType:_.setAttribute("placeholder","e.g. the_entity");let g=p;_.addEventListener("change",function(d){var F,V,z;const q=(F=d?.target)===null||F===void 0?void 0:F.value;g.widgetType=q,g.before_render(),g.loadChildWidgets(),(z=(V=g.element)===null||V===void 0?void 0:V.parentElement)===null||z===void 0||z.setAttribute("data-type-value",g.widgetType)}),T?.appendChild(_)}})(u,this)}mount(u){return on(this,void 0,void 0,function*(){if(u){this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier();let s=this;this.inDevelopment?(this.element.onclick=function(p){p.preventDefault(),s.createTypeEditor(p)},this.element.className="mftsccs-marking-element"):this.element.classList.add("mftsccs-marking-rendered"),this.element.innerHTML=this.getHtml(),u?.setAttribute("data-type-value",s.widgetType),u.appendChild(this.element),this.parentElement=u.id,this.componentMounted==0||this.widgetMounted==0?(this.render_custom_functions(),this.render_widgetDependencies(),this.before_render(),this.mount_child(),this.widgetMounted=!0,this.componentMounted=!0):this.render(),this.childWidgetElement=this.getElementByClassName("added-widget-container")}})}render_widgetDependencies(){try{new Function("tsccs",`
        return (async function() {
          ${this.widgetDependenciesData}
        }).call(this);
      `).bind(this)(N)}catch(u){throw console.log("This is the error in the before render",u),u}}render_custom_functions(){var u;const s=(u=this.customFunctions)===null||u===void 0?void 0:u.map(p=>p?.code).join("");try{new Function("tsccs",`
          return (async function() {
            ${s}
          }).call(this);
        `).bind(this)(N)}catch(p){throw console.error("This is the error in the render_custom_functions",p),p}}before_render(){try{new Function("tsccs",`
        return (async function() {
          ${this.componentDidMountFunction}
        }).call(this);
      `).bind(this)(N)}catch(u){throw console.log("This is the error in the before render",u),u}}after_render(){try{new Function("tsccs",`
        return (async function() {
          ${this.addEventFunction}
        }).call(this);
      `).bind(this)(N)}catch(u){throw console.log("This is the error in the after render",u),u}}CreateConnectionBetweenEntityLocal(u,s,p){return on(this,void 0,void 0,function*(){var T;const A=u.userId,O=((T=u.type)===null||T===void 0?void 0:T.characterValue)+"_"+p,G=yield(0,Be.$)(O,999,999,A);return yield(0,Rt.F)(u.id,s.id,G.id,1e3),"connection created"})}}var bs=y(3077),Tt=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};class No{constructor(){this.actions={concepts:[],connections:[]},this.success=!0,this.transactionId=Math.random().toString().substring(5)}initialize(){return Tt(this,void 0,void 0,function*(){yield nn.H.initializeTransaction(this.transactionId)})}commitTransaction(){return Tt(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield nn.H.SyncDataOnline(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}commitTransactionWithoutAuth(){return Tt(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield nn.H.SyncDataOnlineWithoutAuth(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}rollbackTransaction(){return Tt(this,void 0,void 0,function*(){this.success=!1,this.actions={concepts:[],connections:[]},yield nn.H.rollbackTransaction(this.transactionId,this.actions)})}markAction(){return Tt(this,void 0,void 0,function*(){yield nn.H.markTransactionActions(this.transactionId,this.actions)})}MakeTheInstanceConceptLocal(u,s){return Tt(this,arguments,void 0,function*(p,T,A=!1,O,G,_=999,g=0){try{if(!this.success)throw Error("Query Transaction Expired");const d=yield(0,ge.k)(p,T,A,O,G,_,g,this.actions);return yield this.markAction(),d}catch(d){throw console.log(d),this.success=!1,d}})}MakeTheTypeConceptLocal(u,s,p,T){return Tt(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const A=yield(0,Be.$)(u,s,p,T,this.actions);return yield this.markAction(),A}catch(A){throw console.log(A),this.success=!1,A}})}CreateTheConceptLocal(u,s,p,T,A,O){return Tt(this,arguments,void 0,function*(G,_,g,d,F,V,z=!1,q=0,ne={concepts:[],connections:[]}){try{if(!this.success)throw Error("Query Transaction Expired");const de=yield(0,bs.A)(G,_,g,d,F,V,z,q,this.actions);return yield this.markAction(),de}catch(de){throw console.log(de),this.success=!1,de}})}CreateConnectionBetweenTwoConceptsLocal(u,s,p){return Tt(this,arguments,void 0,function*(T,A,O,G=!1){try{if(!this.success)throw Error("Query Transaction Expired");const _=yield(0,To.h)(T,A,O,G,this.actions);return yield this.markAction(),_}catch(_){throw console.log(_),this.success=!1,_}})}CreateTheConnectionLocal(u,s,p){return Tt(this,arguments,void 0,function*(T,A,O,G=1,_="",g=999){try{if(!this.success)throw Error("Query Transaction Expired");const d=yield(0,Rt.F)(T,A,O,G,_,g,this.actions);return yield this.markAction(),d}catch(d){throw console.log(d),this.success=!1,d}})}CreateConnection(u,s,p){return Tt(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const T=yield(0,Rt.d)(u,s,p,this.actions);return yield this.markAction(),T}catch(T){throw console.log(T),this.success=!1,T}})}CreateConnectionBetweenEntityLocal(u,s,p){return Tt(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const T=yield Eo(u,s,p,this.actions);return yield this.markAction(),T}catch(T){throw console.log(T),this.success=!1,T}})}CreateTheCompositionLocal(u){return Tt(this,arguments,void 0,function*(s,p=null,T=null,A=null,O=null,G=null,_=null,g=!1){try{if(!this.success)throw Error("Query Transaction Expired");const d=yield(0,$.R)(s,p,T,A,O,G,_,g,this.actions);return yield this.markAction(),d}catch(d){throw console.log(d),this.success=!1,d}})}}const or={number:/^\d+(\.\d+)?$/,text:/^[\s\S]*$/,textOnly:/^[A-Za-z\s]+$/,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,document:/\.(pdf|docx?|pptx?|xlsx?)$/i,sound:/\.(mp3|wav|ogg|flac)$/i,image:/\.(jpg|jpeg|png|gif|bmp|svg|webp)$/i,video:/\.(mp4|avi|mov|mkv|flv|webm)$/i,url:/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^(?:[01]\d|2[0-3]):[0-5]\d$/,password:/^.{6,}$/,ipaddress:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$|^([0-9a-fA-F]{1,4}:){7}([0-9a-fA-F]{1,4})$/,uuid:/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/};var vn=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};class Xe{constructor(){Xe.cacheInitialized||Xe.initializeAnomalyParameters()}static initializeAnomalyParameters(){return vn(this,void 0,void 0,function*(){try{yield Xe.getAnomalyParameters(),Xe.refreshCache(),Xe.cacheInitialized=!0}catch(u){console.error("Error during anomaly parameter initialization:",u)}})}static getAnomalyParameters(){return vn(this,void 0,void 0,function*(){const u=Date.now();if(Xe.anomalyParamsCache&&u-Xe.lastFetchedTime<Xe.cacheExpiryThreshold)return console.log("Returning cached anomaly parameters"),Xe.anomalyParamsCache;try{return yield Xe.fetchAnomalyParameters()}catch(s){throw console.error("Error fetching anomaly parameters:",s),s}})}static fetchAnomalyParameters(){return vn(this,void 0,void 0,function*(){try{const u=yield fetch("https://devai.freeschema.com/v1/get-frontend-anomaly-parameters",{method:"GET",headers:{"Content-Type":"application/json"}});if(!u.ok)throw new Error("Failed to fetch anomaly parameters");const s=yield u.json();return Xe.anomalyParamsCache=s.data,Xe.lastFetchedTime=Date.now(),s.data}catch(u){throw console.error("API Fetch Error:",u),u}})}static refreshCache(){return vn(this,void 0,void 0,function*(){try{Date.now()-Xe.lastFetchedTime>Xe.cacheExpiryThreshold&&(yield Xe.getAnomalyParameters())}catch(u){console.error("Error refreshing anomaly parameters cache:",u)}})}detectDataType(u){for(const[s,p]of Object.entries(or))if(p.test(u))return s;return null}checkConceptAnomaly(u,s){return vn(this,void 0,void 0,function*(){const p=[];try{if(!s)return p.push("Null value"),{valid:!1,warnings:p};const T=Xe.anomalyParamsCache;u.startsWith("the_")||(u=`the_${u}`);const A=T[u];if(console.log("Concept Details : ",A),!A)return console.warn(`No concept details found for type: ${u}`),p.push(`No concept details found for type: ${u}`),{valid:!1,warnings:p};const O=s.length,{min_length:G,max_length:_,data_types:g}=A,d=O>=G&&O<=_,F=this.detectDataType(s),V=g.includes(F);return d||p.push(`Length of '${s}' is outside the allowed range (min: ${G}, max: ${_}). Current length: ${O}.`),V||p.push(`Type mismatch for '${s}'. Expected types: ${g.join(", ")}, detected type: ${F}.`),d&&V&&p.push(`Concept ${u} is valid. Length: ${O}, Type: ${F}`),{valid:d&&V,warnings:p}}catch(T){return console.error(`Error checking anomaly for ${u} with value ${s}:`,T),{valid:!1,warnings:p}}})}static checkAnomalyInBulk(u){return vn(this,void 0,void 0,function*(){Xe.cacheInitialized||(yield Xe.initializeAnomalyParameters());try{const s={};for(const[p,T]of Object.entries(u)){const A=T.value,{valid:O,warnings:G}=yield new Xe().checkConceptAnomaly(p,A);s[p]={valid:O,warnings:G}}return s}catch(s){throw console.error("Bulk Anomaly Check Error:",s),s}})}static getExportedFunction(){console.log("Main : ",N);const u=Object.keys(N);return console.log("The exported List : ",u),u}static getFunctionaAnomalyParameters(){}}Xe.anomalyParamsCache=null,Xe.cacheInitialized=!1,Xe.lastFetchedTime=0,Xe.cacheExpiryThreshold=6e5;var Lo=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};class ir{checkUniqueness(u,s){return Lo(this,void 0,void 0,function*(){const p=ye.V.logfunction("checkUniqueness");u.startsWith("the_")||(u="the_"+u);let T=(yield ze(u,999)).id,A=yield(0,be.A)(s,T);return console.log("This is the concept for validator",A),!(A.id>0||(ye.V.logUpdate(p),0))})}validateField(u){return Lo(this,void 0,void 0,function*(){var s;const p=ye.V.logfunction("validateField");try{performance.now();const T={},{name:A,value:O,type:G,dataType:_,pattern:g,conceptType:d,maxLength:F,minLength:V,minValue:z,maxValue:q,accept:ne,file:de,required:me,isUnique:Ie}=u;if(console.log(`Validation is happening on : 
`,u),!me||O!==null&&O!==""||(T.required=`The field ${A} is required.`),_&&O){let fe=or[_];fe&&O!==""&&!fe.test(O)&&(T.dataType=`Invalid value for ${_}`)}if(g&&O){const fe=typeof g=="string"?new RegExp(g):g;O===""||fe.test(O)||(T.pattern="Pattern doesn't match with value")}if(O&&F!=null&&O.length>F&&(T.maxLength=`Length exceeds the maximum length of ${F}`),O&&V!=null&&O.length<V&&(T.minLength=`Length must be at least ${V} characters long`),z!=null&&O&&!isNaN(Number(O))&&Number(O)<z&&(T.minValue=`Value must be greater than or equal to ${z}`),q!=null&&O&&!isNaN(Number(O))&&Number(O)>q&&(T.maxValue=`Value must be less than or equal to ${q}`),de&&G&&ne){const fe=ne.split(",").map(Re=>Re.trim().toLowerCase()),Se=(s=de.name.split(".").pop())===null||s===void 0?void 0:s.toLowerCase();Se&&!fe.includes(Se)&&(T.accept=`File must be a valid file type: ${fe.join(", ")}`)}return d&&Ie&&O&&((yield this.checkUniqueness(d,O))||(T.unique="Value is not unique")),ye.V.logUpdate(p),console.log("Before Validation Result : ",T),T}catch(T){throw(0,o.ey)(p,"Validator.validateField",T),T}})}validateForm(u){return Lo(this,void 0,void 0,function*(){const s=ye.V.logfunction("validateForm");try{performance.now();const p={};for(const T in u){const A=yield this.validateField(u[T]);Object.keys(A).length>0&&(p[T]=A)}return ye.V.logUpdate(s),p}catch(p){throw(0,o.ey)(s,"Validator.validateForm",p),p}})}validate(u){const s=ye.V.logfunction("validate");try{let p={};return this.validateField(u).then(T=>{Object.keys(T).length>0?(p.status=!1,p.details=T):p.status=!0}),console.error("Error on validate object"),ye.V.logUpdate(s),p}catch(p){(0,o.ey)(s,"Validator.validate",p)}}}const rr=B=>{var u;const s=document.getElementsByName(B)[0];if(!s)return console.warn(`Element with NAME "${B}" not found.`),{name:null,value:null,type:null,dataType:null,pattern:null,conceptType:null,maxLength:null,minLength:null,minValue:null,maxValue:null,accept:null,file:null,required:!1,isUnique:!0};const p=s.hasAttribute("required")||s.getAttribute("data-required")==="true",T=s.hasAttribute("isUnique")&&s.getAttribute("isUnique")==="true";return{name:s.name,value:s.value,type:s.type,dataType:s.getAttribute("data-type"),pattern:s.getAttribute("data-pattern"),conceptType:s.getAttribute("concept-type"),maxLength:s.getAttribute("maxlength")?parseInt(s.getAttribute("maxlength")):null,minLength:s.getAttribute("minlength")?parseInt(s.getAttribute("minlength")):null,minValue:s.getAttribute("min")?parseInt(s.getAttribute("min")):null,maxValue:s.getAttribute("max")?parseInt(s.getAttribute("max")):null,accept:s.getAttribute("accept")||null,file:s.type==="file"&&((u=s.files)===null||u===void 0?void 0:u[0])||null,required:p,isUnique:T}};var mn=y(2289);class kt{constructor(){this.type="",this.inpage=10,this.page=1,this.concepts=[],this.conceptIds=[],this.selectors=[],this.freeschemaQueries=[],this.filters=[],this.filterLogic="",this.typeConnection="",this.order="DESC",this.outputFormat=We.yv,this.name="",this.filterAncestor="",this.reverse=!1,this.limit=!1,this.isSecure=!1,this.includeInFilter=!1,this.isOldConnectionType=!1}}var _s=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function Qn(B){var u=arguments;return _s(this,arguments,void 0,function*(s,p=""){const T=ye.V.logfunction("FreeschemaQueryApi",u);var A=(0,e.ab)("application/json",p);const O=r.B.FreeschemaQueryUrl(),G=JSON.stringify(s);try{const _=yield fetch(O,{method:"POST",headers:A,body:G});return _.ok?yield _.json():((0,o.ry)(_),console.log("This is the freeschema query error",_.status),[])}catch(_){console.log("This is the freeschema query error others",_),(0,o.Mb)(_,O),(0,o.ey)(T,"FreeschemaQueryApi",_)}})}var bo=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};class sr extends Ht.w{constructor(u,s){super(),this.query=new kt,this.countInfoStrings=[],this.order="DESC",this.totalCount=0,this.query=u,this.format=u.outputFormat,this.order=u.order}run(){return bo(this,void 0,void 0,function*(){var u,s;try{this.query.outputFormat=We.BG,this.compositionIds=[];let p=yield Qn(this.query,"");return this.conceptIds=p.conceptIds,this.internalConnections=(u=p.internalConnections)!==null&&u!==void 0?u:[],this.linkers=(s=p.linkers)!==null&&s!==void 0?s:[],this.reverse=p.reverse,this.compositionIds=p.mainCompositionIds,this.totalCount=p.mainCount,this.countInfoStrings=p.countinfo,yield this.build()}catch(p){throw console.error("Error in SchemaQueryObservable.run():",p),p}})}bind(){return bo(this,void 0,void 0,function*(){var u,s;try{if(this.compositionIds.length>0)for(let T=0;T<this.compositionIds.length;T++)this.removeListenToEvent(this.compositionIds[T]);if(this.isDataLoaded)for(let T=0;T<this.compositionIds.length;T++)this.listenToEvent(this.compositionIds[T]);else{this.query.outputFormat=We.BG,this.compositionIds=[];let T=yield Qn(this.query,"");this.conceptIds=T.conceptIds,this.internalConnections=(u=T.internalConnections)!==null&&u!==void 0?u:[],this.linkers=(s=T.linkers)!==null&&s!==void 0?s:[],this.reverse=T.reverse,this.compositionIds=T.mainCompositionIds,this.totalCount=T.mainCount,this.countInfoStrings=T.countinfo}let p=yield this.build();if(!this.isDataLoaded){this.isDataLoaded=!0;for(let T=0;T<this.compositionIds.length;T++)this.listenToEvent(this.compositionIds[T]);if(this.query.type!=""){let T=yield ze(this.query.type,999);T.id>0&&this.listenToEventType(T.id)}}for(let T=0;T<this.newIds.length;T++)this.listenToEvent(this.newIds[T]);return this.newIds=[],p}catch(p){throw console.error("Error in SchemaQueryObservable.bind():",p),p}})}build(){return bo(this,void 0,void 0,function*(){try{ye.V.logfunction("build",["schemaquery",this.compositionIds]);let u=(0,So.w)(this.countInfoStrings);return this.format==We.y0?this.data=yield(0,qt.e$)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,u,this.order):this.format==We.ZJ?this.data=yield(0,qt.y6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,u,this.order):this.format==We.pU?this.data=yield(0,qt.rq)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,u,this.order):this.format==We.XZ?(console.log("this is the raw format"),this.data={},this.data.linkers=this.linkers,this.data.conceptIds=this.conceptIds,this.data.compositionIds=this.compositionIds,this.data.reverse=this.reverse,this.data.countInfos=u,this.data.order=this.order):this.data=yield(0,qt.b6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,u),this.data}catch(u){throw console.error("Error in SchemaQueryObservable.build():",u),u}})}}function Cn(B,u){return new sr(B,u)}function ar(B,u){return new sr(B,u).execute()}class _o{constructor(){this.id=0,this.name="",this.html="",this.css="",this.js="",this.library={css:[],js:[]},this.assistant={id:"",input:"",type:""},this.timestamp="",this.widgetId=0,this.type="",this.clean="",this.after_render="",this.before_render="",this.custom_functions=[],this.update="",this.origin=0,this.version=0,this.mount_child="",this.children=[],this.wrapper="0",this.widget=new bn,this.dependency="",this.root=0}}var Es=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function Eo(B,u,s){return Es(this,arguments,void 0,function*(p,T,A,O={concepts:[],connections:[]}){var G,_,g,d,F;const V=ye.V.logfunction("CreateConnectionBetweenEntityLocal",[p.id,T.id,A]);if(Ge)try{const de=yield $e("CreateConnectionBetweenEntityLocal",{concept1Data:p,concept2Data:T,linker:A,actions:O});return!((_=(G=de?.actions)===null||G===void 0?void 0:G.concepts)===null||_===void 0)&&_.length&&(O.concepts=JSON.parse(JSON.stringify(de.actions.concepts))),!((d=(g=de?.actions)===null||g===void 0?void 0:g.connections)===null||d===void 0)&&d.length&&(O.connections=JSON.parse(JSON.stringify(de.actions.connections))),de.data}catch(de){console.log("CreateConnectionBetweenEntityLocal error sw: ",de),Qe(de)}const z=p.userId,q=((F=p.type)===null||F===void 0?void 0:F.characterValue)+"_"+A,ne=yield(0,Be.$)(q,999,999,z,O);console.log(yield(0,Rt.F)(p.id,T.id,ne.id,1e3,void 0,void 0,O)),ye.V.logUpdate(V)})}var Dt=y(4310);function xo(B){for(;B.firstChild;)B.removeChild(B.firstChild)}var cr=y(490),lr=y(276);function dr(B,u,s){const p=Je.b.sessionId||"unknown",T={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:p,description:u};ye.V.logApplication("USER_EVENT",B,T)}class ur extends Jn{constructor(u,s,p,T="",A=10){super(),this.inpage=10,this.selector=s,this.mainType=u,this.filterType=T,this.inpage=A,this.parentDomElement=p,this.mount(this.parentDomElement)}before_render(){this.render()}addFilter(u){if(u!=""){let s=new zn;s.search=u,s.type=this.filterType,s.logicoperator="like",s.operateon="selector",s.name="selector_filter";let p="( selector_filter )";this.query.filters=[s],this.query.filterLogic=p}else this.query.filters=[],this.query.filterLogic="";console.log("this is the filters",this.query)}after_render(){let u=this.getElementById("selector"),s=this.getElementById("search-bar"),p=this;s.onchange=()=>{p.addFilter(s.value),p.mainDetails.update()};let T=new kt;T.type=this.mainType,T.inpage=this.inpage;let A=new kt;A.typeConnection=this.selector,A.name="selector",T.freeschemaQueries=[A],this.query=T,Cn(this.query,"").subscribe((O,G)=>{let _={};this.mainDetails=G;for(let g=0;g<O.length;g++){let d=O[g],F=d.id,V=d[this.mainType];if(console.log("this is the selected data myItem",V,O[g],this.mainType,d),V){let z=V[this.selector];if(z){const q=Object.values(z)[0];_[F]=q}}}xo(u);for(const[g,d]of Object.entries(_)){const F=document.createElement("option");F.value=g,F.textContent=d,u.appendChild(F)}console.log("this is the output from selector",O)})}getHtml(){const u=document.createElement("style");return u.textContent=`
.search-select-wrapper {
  width: 300px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-family: Arial, sans-serif;
}

#search-bar {
  padding: 8px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
}

#selector {
  padding: 6px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
}
`,document.head.prepend(u),this.html=`
        <div class="search-select-wrapper">
        <input type="text" placeholder="Select or type..." id='search-bar'>
        <select id='selector'>
        </div>`,this.html}}const hr=`
/* CKEditor content styles */
.ck-content {
  /* Container styles */
  max-width: 100%;
  margin: 0 auto;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  line-height: 1.5;
  padding: 0.75rem;
  background: #fff;
  color: #333;
  border: 1px solid #ccced1;
}

/* Headings */
.ck-content h1, .ck-content h2, .ck-content h3, 
.ck-content h4, .ck-content h5, .ck-content h6 {
  font-weight: 700;
  line-height: 1.2;
  margin: 1em 0 0.5em;
}

.ck-content h1 { font-size: 2.5em; }
.ck-content h2 { font-size: 2em; }
.ck-content h3 { font-size: 1.75em; }
.ck-content h4 { font-size: 1.5em; }
.ck-content h5 { font-size: 1.25em; }
.ck-content h6 { font-size: 1em; }

/* Paragraphs and spacing */
.ck-content p {
  margin: 1em 0;
  line-height: 1.6;
}

/* Links */
.ck-content a {
  color: #1a73e8;
  text-decoration: none;
}

.ck-content a:hover {
  text-decoration: underline;
}

/* Lists */
.ck-content ul,
.ck-content ol {
  padding-left: 2em;
  margin: 1em 0;
}

.ck-content ul {
  list-style: disc;
}

.ck-content ol {
  list-style: decimal;
}

.ck-content li {
  margin: 0.5em 0;
}

/* Blockquotes */
.ck-content blockquote {
  margin: 1em 0;
  padding-left: 1em;
  border-left: 5px solid #ccc;
  font-style: italic;
  color: #666;
}

/* Code blocks */
.ck-content pre {
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 1em;
  margin: 1em 0;
  overflow-x: auto;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.ck-content code {
  background: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-size: 0.9em;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

/* Tables */
.ck-content table {
  border-collapse: collapse;
  width: 100%;
  margin: 1em 0;
}

.ck-content table th,
.ck-content table td {
  border: 1px solid #ddd;
  padding: 0.75em;
  text-align: left;
}

.ck-content table th {
  background: #f5f5f5;
  font-weight: bold;
}

/* Images */
.ck-content img {
  max-width: 100%;
  height: auto;
  margin: 1em 0;
}

.ck-content figure {
  margin: 1em 0;
  text-align: center;
}

.ck-content figure img {
  margin: 0;
}

.ck-content figcaption {
  color: #666;
  font-size: 0.9em;
  margin-top: 0.5em;
}

/* Dark mode */
/*
@media (prefers-color-scheme: dark) {
  .ck-content {
    background: #1a1a1a;
    color: #e0e0e0;
  }

  .ck-content a {
    color: #64b5f6;
  }

  .ck-content blockquote {
    border-left-color: #404040;
    color: #b0b0b0;
  }

  .ck-content pre,
  .ck-content code {
    background: #2d2d2d;
    border-color: #404040;
  }

  .ck-content table th,
  .ck-content table td {
    border-color: #404040;
  }

  .ck-content table th {
    background: #2d2d2d;
  }

  .ck-content figcaption {
    color: #b0b0b0;
  }
}
*/

/* CUSTOM DOCUMENTATION CSS */

#documentation-preview {
  border: 1px solid #ccc;
  padding: 1rem;
}

#documentation-preview h3 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
}

.pre-wrapper {
  background: #f2f5f9;
  border: 1px solid #cecece;
  display: block;
  padding: 1rem;
  border-radius: 0.25rem;
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.pre-wrapper pre {
  margin: 0;
  color: #e87aa2;
}

.widget-doc-section pre {
  background-color: transparent;
}

.widget-doc-section p {
  margin: 0;
}

.widget-doc-section code {
  color: #e87aa2;
  font-size: 0.875rem;
}

.mv-3 {
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.pv-3 {
  padding-top: 1rem;
  padding-bottom: 1rem;
}

  .widget-documentation-heading {
    background-color: #6e757d;
    color: #eee;
    font-size: 1.5rem;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .widget-documentation-heading h4 {
    margin-bottom: 0;
  }

  .close-documentation-button {
    border: none;
    outline: none;
    background-color: transparent;
    line-height: 0;
    margin: 0;
    padding: 0;
    cursor: pointer;
  }

  .close-documentation-button:hover,
  .close-documentation-button:focus  {
    background-color: transparent;
  }

  .documentation-creator {
    text-align: right;
    color: #666;
    margin: 0;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .documentation-creator span {
    font-style: italic;
  }

  .documentation-attachments {
    display: flex;
    flex-wrap: wrap;
  }

  .documentation-attachments img {
    width: 25%;
    height: auto;
    border: 1px solid #ccc;
    padding: 0.25rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .documentation-attachments iframe {
    width: 50%;
    border: 1px solid #ccc;
    padding: 0.25rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .widget-documentation-footer {
    text-align: right;
    margin-top: 1rem;
  }

  .widget-documentation-footer button {
    border-radius: 0;
    border: none;
    padding: 0.5rem 1.5rem;
    text-align: center;
    background: #6e757d;
    color: #eee;
  }

  #widget-details {
    position: absolute;
    right: 0px;
    top: 0px;
    z-index: 9999;
  }

  #widget-details button {
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 0 0 0 0.25rem;
    height: auto;
    width: auto;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  #widget-details button:hover, 
  #widget-details button:focus {
    opacity: 0.75;
  }

  #widget-details button span {
    pointer-events: none;
    font-size: 1rem;
  }

  #widget-details button svg {
    pointer-events: none;
    width: 16px;
    height: 16px;
    fill: #999;
  }

  #widget-documentation-preview-modal {
    border: none;
  }

  @media (min-width: 768px) {
    #widget-documentation-preview-modal {
      flex: 0 0 auto;
      width: 66.66666667%;
    }
  }

`,zt={PAGE_COMP_NAME:"page",WIDGET_COMP_NAME:"widget",PROJECT_COMP_NAME:"project"};var pr=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};class Ze{static get(u,s){return pr(this,void 0,void 0,function*(){if(Ze.cache.has(u))return Ze.cache.get(u);if(Ze.promises.has(u))return Ze.promises.get(u);const p=s().then(T=>(Ze.cache.set(u,T),Ze.promises.delete(u),T)).catch(T=>{throw Ze.promises.delete(u),T});return Ze.promises.set(u,p),p})}static has(u){return Ze.cache.has(u)}static peek(u){return Ze.cache.get(u)}static invalidate(u){Ze.cache.delete(u),Ze.promises.delete(u)}static clear(){Ze.cache.clear(),Ze.promises.clear()}static set(u,s){return pr(this,void 0,void 0,function*(){return Ze.promises.delete(u),Ze.cache.set(u,s),s})}static stats(){return{cacheSize:Ze.cache.size,pendingRequests:Ze.promises.size,keys:Array.from(Ze.cache.keys())}}}Ze.cache=new Map,Ze.promises=new Map;var Ke=y(2895);const xs=Ke;Ke.stringify,Ke.fromJSON,Ke.plugin,Ke.parse,Ke.list,Ke.document,Ke.comment,Ke.atRule,Ke.rule,Ke.decl,Ke.root,Ke.CssSyntaxError,Ke.Declaration,Ke.Container,Ke.Processor,Ke.Document,Ke.Comment,Ke.Warning,Ke.AtRule,Ke.Result,Ke.Input,Ke.Rule,Ke.Root,Ke.Node;var Os=y(2110),Bs=y.n(Os),Rs=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function fr(B){return Rs(this,void 0,void 0,function*(){try{return(yield xs([Bs()()]).process(B,{from:void 0})).css}catch(u){return console.error("Error processing CSS:",u),null}})}var gr=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function _n(B){const u=document.getElementById("fspage-properties");if(!u)return;let s=u?.textContent;s=s?s.replace(new RegExp(B,"g"),""):"",u.textContent=s}function yr(B,u){let s=document.querySelector(`meta[name="${B}"]`);s||(s=document.createElement("meta"),s.setAttribute("name",B),document.head.appendChild(s)),s.setAttribute("content",u)}var vr=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function Yn(B){return vr(this,void 0,void 0,function*(){var u,s,p,T;!((s=(u=B?.library)===null||u===void 0?void 0:u.css)===null||s===void 0)&&s.length&&function(A){var O;const G=(O=A?.library)===null||O===void 0?void 0:O.css,_=`vde-css-${A?.origin?A?.origin:A?.widgetId}`;(function(g){const d=`link.${g}`,F=document.querySelectorAll(d);F?.length&&F?.forEach(V=>{V.remove()})})(_),G?.length&&G?.sort((g,d)=>Number(g?.order)-Number(d?.order)),G?.forEach(g=>{const d=document.createElement("link");d.classList.add(_),d.setAttribute("rel","stylesheet"),d.setAttribute("href",g.url),document.head.appendChild(d)})}(B),!((T=(p=B?.library)===null||p===void 0?void 0:p.js)===null||T===void 0)&&T.length&&(yield function(A){return vr(this,void 0,void 0,function*(){var O;const G=(O=A?.library)===null||O===void 0?void 0:O.js,_=`vde-js-${A?.origin?A?.origin:A?.widgetId}`;if(function(g){const d=`script.${g}`,F=document.querySelectorAll(d);F?.length&&F?.forEach(V=>{V.remove()})}(_),G?.length){G.sort((g,d)=>Number(g?.order)-Number(d?.order));for(const g of G)g?.url?document.querySelector(`script[src="${g.url}"]`)?console.log("Library already loaded:",g.url):yield new Promise((d,F)=>{const V=document.createElement("script");V.classList.add(_),V.setAttribute("type","text/javascript"),V.setAttribute("src",g.url),V.setAttribute("crossorigin","anonymous"),V.onload=()=>{d()},V.onerror=z=>{console.error("Failed to load script:",g.url,z),F(new Error(`Failed to load script: ${g.url}`))},document.head.appendChild(V)}):console.warn("Skipping library with invalid URL:",g);console.log("All JavaScript libraries loaded successfully")}})}(B))})}var it=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function mr(B,u,s,p){return it(this,void 0,void 0,function*(){var T;const A=yield go(B,"the_page_body"),O=new kt;O.conceptIds=[B],O.inpage=100,O.outputFormat=We.y0,O.selectors=["the_page_body","the_page_title","the_page_slug","the_page_font_family","the_page_font_size","the_page_width","the_page_type","the_page_meta_title","the_page_meta_description","the_page_meta_keywords"],Cn(O,"").subscribe(_=>it(this,void 0,void 0,function*(){var g,d;yield function(F){return gr(this,void 0,void 0,function*(){var V,z,q,ne,de,me,Ie,fe,Se,Re,Ve,Fe,Le,Ye;[{key:"meta_title",value:(z=(V=F?.[`the_${zt.PAGE_COMP_NAME}_meta_title`])===null||V===void 0?void 0:V.data)===null||z===void 0?void 0:z.the_meta_title},{key:"meta_description",value:(ne=(q=F?.[`the_${zt.PAGE_COMP_NAME}_meta_description`])===null||q===void 0?void 0:q.data)===null||ne===void 0?void 0:ne.the_meta_description},{key:"meta_keywords",value:(me=(de=F?.[`the_${zt.PAGE_COMP_NAME}_meta_keywords`])===null||de===void 0?void 0:de.data)===null||me===void 0?void 0:me.the_meta_keywords},{key:"width",value:(fe=(Ie=F?.[`the_${zt.PAGE_COMP_NAME}_width`])===null||Ie===void 0?void 0:Ie.data)===null||fe===void 0?void 0:fe.the_width},{key:"font_size",value:(Re=(Se=F?.[`the_${zt.PAGE_COMP_NAME}_font_size`])===null||Se===void 0?void 0:Se.data)===null||Re===void 0?void 0:Re.the_font_size},{key:"font_family",value:(Fe=(Ve=F?.[`the_${zt.PAGE_COMP_NAME}_font_family`])===null||Ve===void 0?void 0:Ve.data)===null||Fe===void 0?void 0:Fe.the_font_family},{key:"type",value:(Ye=(Le=F?.[`the_${zt.PAGE_COMP_NAME}_type`])===null||Le===void 0?void 0:Le.data)===null||Ye===void 0?void 0:Ye.the_type}].forEach(at=>{at.value&&function(ft,nt){gr(this,void 0,void 0,function*(){const It=document.getElementById("fspage-properties")||function(){const gt=document.createElement("style");return gt.id="fspage-properties",document.head.appendChild(gt),gt}();let st="";switch(ft){case"width":_n(".fspage { width: [^;]+ !important; }"),st=nt?`.fspage { width: ${nt} !important; }`:"";break;case"font_size":_n(".fspage { font-size: [^;]+; }"),st=nt?`.fspage { font-size: ${nt}px; }`:"";break;case"font_family":_n(".fspage { font-family: [^;]+; }"),st=nt?`.fspage { font-family: ${nt}; }`:"";break;case"type":_n(".fspage { width: 1200px; margin: 0 auto; }"),_n(".fspage { width: 100%; padding: 0; }"),st=nt==="fixed"?".fspage { width: 1200px; margin: 0 auto; }":nt==="fluid"?".fspage { width: 100%; padding: 0; }":"";break;case"meta_title":document.title=nt;break;case"meta_keywords":yr(ft.replace("meta_",""),nt);break;case"meta_description":return void yr(ft.replace("meta_",""),nt)}It.textContent+=st})}(at.key,at.value)})})}((d=(g=_?.[0])===null||g===void 0?void 0:g.data)===null||d===void 0?void 0:d[`the_${zt.PAGE_COMP_NAME}`])})),document.getElementById("app").classList.add("fspage");const G=document.head.querySelectorAll("style#mystyleid");Array.from(G).forEach(_=>_.remove()),!((T=A?.[0])===null||T===void 0)&&T.id?yield Xn(A[0].id,u,s,p):u.innerHTML="<h4>Invalid or Page doesn't exist</h4>"})}function Cr(B,u,s,p){return it(this,void 0,void 0,function*(){try{let T=yield(0,Dt.qj)(B),A=T.mainId,O=T.data;const G=yield Zn(O,A),_=yield rn(A,[],G);return Ze.cache.set(`wdgt_${A}`,_),console.log("DataCache after, widgetTree -->",Ze.cache,_),_}catch(T){console.error(`Error Caught Rendering Widget: ${T}`)}})}function wr(B,u,s,p){return it(this,void 0,void 0,function*(){try{let T=yield(0,Dt.ml)(B),A=T.mainId,O=T.data;const G=yield Zn(O,A);return yield rn(A,[],G)}catch(T){console.error(`Error Caught Rendering Widget: ${T}`)}})}function Tr(B,u,s,p){return it(this,void 0,void 0,function*(){let T=(yield(0,Dt.qj)(B)).mainId;console.log("renderImportedWidget latestWidgetId, DataCache.cache -->",T,Ze.cache);const A=Ze.cache.get(`wdgt_${T}`);if(console.log("renderImportedWidget widgetTree -->",A),!A.name)return void(u.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const O=u;yield Yn(A);const G=yield En(A,O,void 0,s),_=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");u.classList.add(`${_}`),u.style.position="relative";const g=document.createElement("style");g.id="mystyleid",g.classList.add("mftsccs-css");const d=`
        .${_} {
          ${A.css+G.css+hr} 
        }
      `,F=(yield fr(d))||"";if(g.innerHTML=F,document.head.appendChild(g),A.children.length&&A?.children.forEach(V=>{var z;const q=V?.library;(!((z=q?.css)===null||z===void 0)&&z.length||q?.js.length)&&Yn(V)}),p){const V=document.createElement("div");V.id="widget-details",V.innerHTML="",V.innerHTML=`
        <button class="widget-documentation-btn" widget-id="${A?.origin||A?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">
          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>
        </button>
      `,O.appendChild(V);const z=document.createElement("dialog");z.id="widget-documentation-preview-modal",z.className="col-md-8",z.innerHTML="",z.innerHTML=`
        <div class="widget-documentation-heading">
          <h4>Documentation</h4>
          <button class="close-documentation-button document-preview-close-button" title="Close">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
          </button>
        </div>

        <div id="documentation-view" class="ck-content"></div>

        <div class="widget-documentation-footer">
          <button class="document-preview-close-button">Close</button>
        </div>
      `,O.appendChild(z);const q=O.querySelectorAll(".widget-documentation-btn");q?.forEach(de=>{de.addEventListener("click",me=>{const Ie=me?.target;br(Ie?.getAttribute("widget-id"))})});const ne=O.querySelectorAll(".document-preview-close-button");ne?.forEach(de=>{de.addEventListener("click",()=>{_r("widget-documentation-preview-modal")})})}return O.querySelectorAll(".wb-initial-empty").forEach(V=>{V.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(V=>{V.removeAttribute("onclick")}),G})}function Xn(B,u,s,p){return it(this,void 0,void 0,function*(){try{let T=yield(0,Dt.qj)(B),A=T.mainId,O=T.data;const G=yield Zn(O,A);return yield Ir(A,G,u,s,p)}catch(T){console.error(`Error Caught Rendering Widget: ${T}`),u.textContent=`Error: ${T.message}`}})}function kr(B,u,s,p){return it(this,void 0,void 0,function*(){try{const T=yield(0,Dt.Cp)(B);return yield Ir(B,T,u,s,p)}catch(T){console.error(`Error Caught Rendering Widget: ${T}`)}})}function Ir(B,u,s,p){return it(this,arguments,void 0,function*(T,A,O,G,_=!0){const g=yield rn(T,[],A);if(!g.name)return void(O.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const d=O;yield Yn(g);const F=yield En(g,d,void 0,G),V=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");O.classList.add(`${V}`),O.style.position="relative";const z=document.createElement("style");z.id="mystyleid",z.classList.add("mftsccs-css");const q=`
        .${V} {
          ${g.css+F.css+hr} 
        }
      `,ne=(yield fr(q))||"";z.innerHTML=ne,g.children.length&&g?.children.forEach(me=>{var Ie;const fe=me?.library;(!((Ie=fe?.css)===null||Ie===void 0)&&Ie.length||fe?.js.length)&&Yn(me)}),document.head.appendChild(z);const de=document.createElement("script");if(de.innerHTML=g.js,d.appendChild(de),_){const me=document.createElement("div");me.id="widget-details",me.innerHTML="",me.innerHTML=`
        <button class="widget-documentation-btn" widget-id="${g?.origin||g?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">
          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>
        </button>
      `,d.appendChild(me);const Ie=document.createElement("dialog");Ie.id="widget-documentation-preview-modal",Ie.className="col-md-8",Ie.innerHTML="",Ie.innerHTML=`
        <div class="widget-documentation-heading">
          <h4>Documentation</h4>
          <button class="close-documentation-button document-preview-close-button" title="Close">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
          </button>
        </div>

        <!-- <div id="documentation-preview" class="ck-content"></div> -->
        <div id="documentation-view" class="ck-content"></div>

        <div class="widget-documentation-footer">
          <button class="document-preview-close-button">Close</button>
        </div>
      `,d.appendChild(Ie);const fe=d.querySelectorAll(".widget-documentation-btn");fe?.forEach(Re=>{Re.addEventListener("click",Ve=>{const Fe=Ve?.target;br(Fe?.getAttribute("widget-id"))})});const Se=d.querySelectorAll(".document-preview-close-button");Se?.forEach(Re=>{Re.addEventListener("click",()=>{_r("widget-documentation-preview-modal")})})}return d.querySelectorAll(".wb-initial-empty").forEach(me=>{me.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(me=>{me.removeAttribute("onclick")}),F})}function Sr(B,u){return it(this,void 0,void 0,function*(){var s,p,T,A,O,G,_,g,d,F,V;const z=(p=(s=B?.data)===null||s===void 0?void 0:s.the_widget)===null||p===void 0?void 0:p.the_widget_s_child;if(u.push(B),z&&z.length)for(let q=0;q<z.length;q++){const ne=z[q];let de=(_=(G=(O=(A=(T=ne?.data.the_child_widget)===null||T===void 0?void 0:T.the_child_widget_info)===null||A===void 0?void 0:A.data)===null||O===void 0?void 0:O.the_widget)===null||G===void 0?void 0:G.the_widget_root)===null||_===void 0?void 0:_.id;const me=!!(!((F=(d=(g=ne?.data)===null||g===void 0?void 0:g.the_child_widget)===null||d===void 0?void 0:d.the_child_widget_use_latest)===null||F===void 0)&&F.data);de=Number(de)||!1;let Ie=null;if(me&&de){const fe=yield(0,Dt.qj)(de);Ie=((V=fe?.data)===null||V===void 0?void 0:V[0])||[],Ie.useLatest=!0,ne.data.the_child_widget.the_child_widget_info=Ie}ne.data.the_child_widget.the_child_widget_info.sChildId=ne.id,yield Sr(ne.data.the_child_widget.the_child_widget_info,u)}})}function Zn(B,u){return it(this,void 0,void 0,function*(){const s=[],p=[...B];try{const T=p.find(A=>A.id===u);yield Sr(T,s)}catch(T){console.error("convert to real bulk error",T)}return s})}function Ar(B){return it(this,arguments,void 0,function*(u,s=[],p=""){let T=yield(0,Dt.Cp)(u);const A=yield Zn(T,u);return yield rn(u,[],A)})}function rn(B){return it(this,arguments,void 0,function*(u,s=[],p,T=""){var A,O,G,_,g,d,F,V,z,q,ne,de,me,Ie,fe,Se,Re,Ve,Fe,Le,Ye,at,ft,nt,It,st,gt,ht,bt,_t,Et,xt,Wt,Mt,Vt,ct,St,wt,yt,At,an,cn,ln,dn,un,hn,pn,fn,Me,Jt,On,Bn,Rn,Dn,Gn,Fn,Pn,Un,Wn,Qt,Mn;try{const He=new _o,Ot=(0,Dt.ix)(p,u);s.push(u);const Pe=(A=Ot?.data)===null||A===void 0?void 0:A.the_widget;He.name=(G=(O=Pe?.the_widget_name)===null||O===void 0?void 0:O.data)===null||G===void 0?void 0:G.the_name,He.html=(g=(_=Pe?.the_widget_html)===null||_===void 0?void 0:_.data)===null||g===void 0?void 0:g.the_html,He.css=(F=(d=Pe?.the_widget_css)===null||d===void 0?void 0:d.data)===null||F===void 0?void 0:F.the_css,He.js=(z=(V=Pe?.the_widget_js)===null||V===void 0?void 0:V.data)===null||z===void 0?void 0:z.the_js,He.root=Number((ne=(q=Pe?.the_widget_root)===null||q===void 0?void 0:q.id)!==null&&ne!==void 0?ne:0);let Wo=He.root!=0;He.origin=Wo?He.root:Number(((me=(de=Pe?.the_widget_origin)===null||de===void 0?void 0:de.data)===null||me===void 0?void 0:me.the_origin)||((fe=(Ie=Pe?.the_widget_origin)===null||Ie===void 0?void 0:Ie.data)===null||fe===void 0?void 0:fe.the_originid)),He.version=(Re=(Se=Pe?.the_widget_version)===null||Se===void 0?void 0:Se.data)===null||Re===void 0?void 0:Re.the_version,He.clean=(Fe=(Ve=Pe?.the_widget_clean)===null||Ve===void 0?void 0:Ve.data)===null||Fe===void 0?void 0:Fe.the_clean,He.timestamp=(Ye=(Le=Pe?.the_widget_timestamp)===null||Le===void 0?void 0:Le.data)===null||Ye===void 0?void 0:Ye.the_timestamp,He.id=Ot?.id;const Yt=(ft=(at=Pe?.the_widget_type)===null||at===void 0?void 0:at.data)===null||ft===void 0?void 0:ft.the_type;He.type=Yt=="null"||Yt==null?"the_element_name":Yt,He.after_render=(It=(nt=Pe?.the_widget_after_render)===null||nt===void 0?void 0:nt.data)===null||It===void 0?void 0:It.the_after_render,He.before_render=(gt=(st=Pe?.the_widget_before_render)===null||st===void 0?void 0:st.data)===null||gt===void 0?void 0:gt.the_before_render,He.dependency=(bt=(ht=Pe?.the_widget_dependency)===null||ht===void 0?void 0:ht.data)===null||bt===void 0?void 0:bt.the_dependency,He.update=(Et=(_t=Pe?.the_widget_update)===null||_t===void 0?void 0:_t.data)===null||Et===void 0?void 0:Et.the_update,He.widgetId=u,He.mount_child=(Wt=(xt=Pe?.the_widget_mount_child)===null||xt===void 0?void 0:xt.data)===null||Wt===void 0?void 0:Wt.the_mount_child;const Nt=Pe?.the_widget_s_child;Ot?.useLatest&&(He.useLatest=!0),Ot?.sChildId&&(He.sChildId=Ot.sChildId);const Tn=(Mt=Pe?.the_widget_s_css_library)===null||Mt===void 0?void 0:Mt.map(et=>{var tt,qe,lt,pt,vt,mt,Ct,ut;return{order:(pt=(lt=(qe=(tt=et?.data)===null||tt===void 0?void 0:tt.the_css_library)===null||qe===void 0?void 0:qe.the_css_library_order)===null||lt===void 0?void 0:lt.data)===null||pt===void 0?void 0:pt.the_order,url:(ut=(Ct=(mt=(vt=et?.data)===null||vt===void 0?void 0:vt.the_css_library)===null||mt===void 0?void 0:mt.the_css_library_url)===null||Ct===void 0?void 0:Ct.data)===null||ut===void 0?void 0:ut.the_url}}),Bt=(Vt=Pe?.the_widget_s_js_library)===null||Vt===void 0?void 0:Vt.map(et=>{var tt,qe,lt,pt,vt,mt,Ct,ut;return{order:(pt=(lt=(qe=(tt=et?.data)===null||tt===void 0?void 0:tt.the_js_library)===null||qe===void 0?void 0:qe.the_js_library_order)===null||lt===void 0?void 0:lt.data)===null||pt===void 0?void 0:pt.the_order,url:(ut=(Ct=(mt=(vt=et?.data)===null||vt===void 0?void 0:vt.the_js_library)===null||mt===void 0?void 0:mt.the_js_library_url)===null||Ct===void 0?void 0:Ct.data)===null||ut===void 0?void 0:ut.the_url}});He.library={css:Tn||[],js:Bt||[]};const jt=(St=(ct=Pe?.the_widget_assistant)===null||ct===void 0?void 0:ct.data)===null||St===void 0?void 0:St.the_assistant;He.assistant={id:(yt=(wt=jt?.the_assistant_id)===null||wt===void 0?void 0:wt.data)===null||yt===void 0?void 0:yt.the_id,input:(an=(At=jt?.the_assistant_input)===null||At===void 0?void 0:At.data)===null||an===void 0?void 0:an.the_input,type:(ln=(cn=jt?.the_assistant_type)===null||cn===void 0?void 0:cn.data)===null||ln===void 0?void 0:ln.the_type};const to=(dn=Pe?.the_widget_s_custom_function)===null||dn===void 0?void 0:dn.map(et=>{var tt,qe,lt,pt,vt,mt,Ct;const ut=(tt=et?.data)===null||tt===void 0?void 0:tt.the_custom_function;return{id:et?.id,name:(lt=(qe=ut?.the_custom_function_name)===null||qe===void 0?void 0:qe.data)===null||lt===void 0?void 0:lt.the_name,slug:(vt=(pt=ut?.the_custom_function_slug)===null||pt===void 0?void 0:pt.data)===null||vt===void 0?void 0:vt.the_slug,code:(Ct=(mt=ut?.the_custom_function_code)===null||mt===void 0?void 0:mt.data)===null||Ct===void 0?void 0:Ct.the_code}});if(He.custom_functions=to,Nt?.length)for(let et=0;et<Nt.length;et++){const tt=((pn=(hn=(un=Nt[et])===null||un===void 0?void 0:un.data.the_child_widget)===null||hn===void 0?void 0:hn.the_child_widget_info)===null||pn===void 0?void 0:pn.id)||((On=(Jt=(Me=(fn=Nt[et])===null||fn===void 0?void 0:fn.data.the_child_widget)===null||Me===void 0?void 0:Me.the_child_widget_parent)===null||Jt===void 0?void 0:Jt.data)===null||On===void 0?void 0:On.the_parent),qe=yield rn(tt,s,p,T),lt=(Fn=(Gn=(Dn=(Rn=(Bn=Nt[et])===null||Bn===void 0?void 0:Bn.data)===null||Rn===void 0?void 0:Rn.the_child_widget)===null||Dn===void 0?void 0:Dn.the_child_widget_type)===null||Gn===void 0?void 0:Gn.data)===null||Fn===void 0?void 0:Fn.the_type,pt=(Mn=(Qt=(Wn=(Un=(Pn=Nt[et])===null||Pn===void 0?void 0:Pn.data)===null||Un===void 0?void 0:Un.the_child_widget)===null||Wn===void 0?void 0:Wn.the_child_widget_wrapper)===null||Qt===void 0?void 0:Qt.data)===null||Mn===void 0?void 0:Mn.the_wrapper;qe.type=lt=="null"||lt==null?"the_element_name":lt,qe.wrapper=pt,He.children.push(qe)}return He}catch(He){throw He instanceof Error&&console.error("error converting bulkwidget to widget tree",He.message),He}})}function En(B,u){return it(this,arguments,void 0,function*(s,p,T=!0,A,O,G=null){var _,g;const d=new bn;d.html=s.html,G&&(d.parentWidget=Nr(G)),d.widgetType=s.type,d.componentDidMountFunction=s.before_render,d.addEventFunction=s.after_render,d.mountChildWidgetsFunction=s.mount_child,d.widgetState=Object.assign({},O),d.customFunctions=s.custom_functions,d.widgetDependenciesData=s.dependency,A&&(d.data=A),p.innerHTML="";const F=p;if(F&&(yield d.mount(F),s.widget=d,s.children.length>0&&((_=d.childWidgetElement)===null||_===void 0?void 0:_.length)>0))for(let V=0;V<((g=s.children)===null||g===void 0?void 0:g.length);V++){const z=s.children[V];for(let q=0;q<d.childWidgetElement.length;q++){const ne=d.childWidgetElement[q];if(z.wrapper===ne.id){const de=Lr(z);z.html=`<div id="${z.wrapper}">${z.html}</div>`;const me=yield En(de,ne,!1,d.data,d.widgetState,d);d.childWidgets.push(me),d.css=d.css+me.css+`#${ne.id} { ${z.css} }`,me.dataChange(Ie=>{var fe;const Se=(fe=Ie?.type)===null||fe===void 0?void 0:fe.characterValue;Se&&(d.childrenData[Se]=Ie)})}}}return console.log("newWidget ->",d,s),yield Bo(p,".widget_container"),d})}function Nr(B){const u={};for(const[s,p]of Object.entries(B))typeof p=="object"&&p!==null&&Array.isArray(p)||(u[s]=p);return u}function Oo(B,u){return it(this,arguments,void 0,function*(s,p,T=!0,A,O,G=null){var _,g;let d=new bn;d.html=s.html,G&&(d.parentWidget=Nr(G)),d.widgetState=Object.assign({},A),d.widgetType=s.type,d.componentDidMountFunction=s.before_render,d.addEventFunction=s.after_render,d.mountChildWidgetsFunction=s.mount_child,d.customFunctions=s.custom_functions,d.widgetDependenciesData=s.dependency,d.inDevelopment=O!==!1,p.innerHTML="";let F=p;if(F&&(yield d.mount(F),s.widget=d,s.children.length>0&&((_=d.childWidgetElement)===null||_===void 0?void 0:_.length)>0))for(let V=0;V<((g=s.children)===null||g===void 0?void 0:g.length);V++){let z=s.children[V];for(let q=0;q<d.childWidgetElement.length;q++){let ne=d.childWidgetElement[q];if(z.wrapper===ne.id){const de=Lr(z),me=yield Oo(de,ne,!1,d.widgetState,O,d);d.childWidgets.push(me),d.css=d.css+me.css+`#${ne.id} { ${z.css} }`,me.dataChange(Ie=>{var fe;console.log("This is the data change in child",Ie);let Se=(fe=Ie?.type)===null||fe===void 0?void 0:fe.characterValue;Se&&(d.childrenData[Se]=Ie),console.log("new child data",d.childrenData)})}}}return console.log("newWidget ->",d,s),d})}function Lr(B){return B.html=B.html.replace(/<[^>]*\bclass=["'][^"']*\bwidget_container\b[^"']*["'][^>]*>/g,u=>u.replace(/\bwidget_container\b/g,"").trim()),B.html=B.html.replace(/<[^>]*\bdraggable=["'][^"']*\btrue\b[^"']*["'][^>]*>/g,u=>u.replace(/\btrue\b/g,"false").trim()),B.html=B.html.replace(/<[^>]*\bclass=["'][^"']*\bhover-element\b[^"']*["'][^>]*>/g,u=>u.replace(/\bhover-element\b/g,"").trim()),B.html=B.html.replace(/<[^>]*\bclass=["'][^"']*\bwb-block\b[^"']*["'][^>]*>/g,u=>u.replace(/\bwb-block\b/g,"").trim()),B.html=B.html.replace(/<[^>]*onclick="widgetSelected\(event\)"\s*,?\s*ondragover="_dragService\.dragOverWidgetElement\(event\)"\s*,?\s*ondrop="_dragService\.dropWidgetElement\(event\)"\s*,?\s*ondragstart="_dragService\.dragStartWidgetElement\(event\)"\s*,?\s*ondragend="_dragService\.dragEndWidgetElement\(event\)"[^>]*>/g,u=>u.replace(/onclick="widgetSelected\(event\)"/g,'onclick=""').replace(/ondragover="_dragService\.dragOverWidgetElement\(event\)"/g,'ondragover=""').replace(/ondrop="_dragService\.dropWidgetElement\(event\)"/g,'ondrop=""').replace(/ondragstart="_dragService\.dragStartWidgetElement\(event\)"/g,'ondragstart=""').replace(/ondragend="_dragService\.dragEndWidgetElement\(event\)"/g,'ondragend=""').trim()),B.html=B.html.replace(/<[^>]*\bondragstart=["'][^"']*\b_dragService\.onWidgetDragStart\(event\)\b[^"']*["'][^>]*>/g,u=>u.replace(/\b_dragService\.onWidgetDragStart\(event\)\b/g,"").trim()),B}function Ds(B,u){return it(this,void 0,void 0,function*(){return B&&B.nodeType===1&&B.querySelectorAll(u).forEach(s=>{for(;s.firstChild;)s.parentNode.insertBefore(s.firstChild,s);s.remove()}),B})}function Bo(B,u){return it(this,void 0,void 0,function*(){const s=B.querySelectorAll(u);for(const p of s){const T=p.parentElement;if(T){for(;p.firstChild;){const A=yield Ds(p.firstChild,u);T.insertBefore(A,p)}T.removeChild(p)}}})}function br(B){return it(this,void 0,void 0,function*(){const u=new kt;u.typeConnection="the_widget_documentation",u.name="documentationText",u.selectors=["the_documentation_text"];const s=new kt;s.typeConnection="the_widget_s_documentation",s.name="documentationBlank",s.selectors=["the_documentation_text","the_documentation_content","the_documentation_language","the_documentation_doc_title","the_documentation_folder","the_documentation_creator_email","the_documentation_created_by","the_documentation_content","the_documentation_type","the_documentation_s_doc_url","the_documentation_s_image_url","the_documentation_s_video_link","the_documentation_auth_type","the_documentation_bearer_token","the_documentation_method","the_documentation_method_url","the_documentation_username","the_documentation_password","the_documentation_s_json_list","the_documentation_api_script","the_documentation_api_body","the_documentation_code_editor","the_documentation_return"];const p=new kt;p.typeConnection="the_documentation_s_json_list",p.name="documentationJSON",p.selectors=["the_json_list_key","the_json_list_value"],s.freeschemaQueries=[p];const T=new kt;T.conceptIds=[B],T.freeschemaQueries=[u,s],T.inpage=100,T.outputFormat=We.y0,yield Cn(T,"").subscribe(A=>it(this,void 0,void 0,function*(){var O,G,_,g,d,F,V,z,q,ne,de;let me;const Ie=((z=(V=(F=(d=(g=(_=(G=(O=A?.[0])===null||O===void 0?void 0:O.data)===null||G===void 0?void 0:G.the_widget)===null||_===void 0?void 0:_.the_widget_documentation)===null||g===void 0?void 0:g.data)===null||d===void 0?void 0:d.the_documentation)===null||F===void 0?void 0:F.the_documentation_text)===null||V===void 0?void 0:V.data)===null||z===void 0?void 0:z.the_text)||"";Ie&&(me=Ie);const fe=(de=(ne=(q=A?.[0])===null||q===void 0?void 0:q.data)===null||ne===void 0?void 0:ne.the_widget)===null||de===void 0?void 0:de.the_widget_s_documentation;fe?.length&&(me=fe?.map(Re=>{var Ve,Fe,Le,Ye,at,ft,nt,It,st,gt,ht,bt,_t,Et,xt,Wt,Mt,Vt,ct,St,wt,yt,At,an,cn,ln,dn,un,hn,pn,fn;const Me=(Ve=Re?.data)===null||Ve===void 0?void 0:Ve.the_documentation,Jt=(Le=(Fe=Me?.the_documentation_type)===null||Fe===void 0?void 0:Fe.data)===null||Le===void 0?void 0:Le.the_type,On=(at=(Ye=Me?.the_documentation_content)===null||Ye===void 0?void 0:Ye.data)===null||at===void 0?void 0:at.the_content,Bn=(nt=(ft=Me?.the_documentation_creator_email)===null||ft===void 0?void 0:ft.data)===null||nt===void 0?void 0:nt.the_creator_email,Rn=(st=(It=Me?.the_documentation_doc_title)===null||It===void 0?void 0:It.data)===null||st===void 0?void 0:st.the_doc_title,Dn=(ht=(gt=Me?.the_documentation_method)===null||gt===void 0?void 0:gt.data)===null||ht===void 0?void 0:ht.the_method,Gn=(_t=(bt=Me?.the_documentation_method_url)===null||bt===void 0?void 0:bt.data)===null||_t===void 0?void 0:_t.the_method_url,Fn=(xt=(Et=Me?.the_documentation_bearer_token)===null||Et===void 0?void 0:Et.data)===null||xt===void 0?void 0:xt.the_bearer_token,Pn=(Mt=(Wt=Me?.the_documentation_username)===null||Wt===void 0?void 0:Wt.data)===null||Mt===void 0?void 0:Mt.the_username,Un=(ct=(Vt=Me?.the_documentation_password)===null||Vt===void 0?void 0:Vt.data)===null||ct===void 0?void 0:ct.the_password,Wn=(wt=(St=Me?.the_documentation_auth_type)===null||St===void 0?void 0:St.data)===null||wt===void 0?void 0:wt.the_auth_type,Qt=Me?.the_documentation_s_json_list,Mn=(At=(yt=Me?.the_documentation_api_script)===null||yt===void 0?void 0:yt.data)===null||At===void 0?void 0:At.the_api_script,He=(cn=(an=Me?.the_documentation_api_body)===null||an===void 0?void 0:an.data)===null||cn===void 0?void 0:cn.the_api_body,Ot=(dn=(ln=Me?.the_documentation_language)===null||ln===void 0?void 0:ln.data)===null||dn===void 0?void 0:dn.the_language,Pe=(hn=(un=Me?.the_documentation_return)===null||un===void 0?void 0:un.data)===null||hn===void 0?void 0:hn.the_return,Wo=(fn=(pn=Me?.the_documentation_code_editor)===null||pn===void 0?void 0:pn.data)===null||fn===void 0?void 0:fn.the_code_editor,Yt=Me?.the_documentation_s_doc_url,Nt=Me?.the_documentation_s_image_url,Tn=Me?.the_documentation_s_video_link;let Bt={type:Jt,content:On,creatorEmail:Bn,title:Rn};if(Jt==="blank")Bt=Object.assign({},Bt);else if(Jt==="api"){const tt=[];Qt?.length&&Qt?.forEach(qe=>{var lt,pt,vt,mt,Ct,ut,Mo,Vo;tt.push({key:(mt=(vt=(pt=(lt=qe?.data)===null||lt===void 0?void 0:lt.the_json_list)===null||pt===void 0?void 0:pt.the_json_list_key)===null||vt===void 0?void 0:vt.data)===null||mt===void 0?void 0:mt.the_key,value:(Vo=(Mo=(ut=(Ct=qe?.data)===null||Ct===void 0?void 0:Ct.the_json_list)===null||ut===void 0?void 0:ut.the_json_list_value)===null||Mo===void 0?void 0:Mo.data)===null||Vo===void 0?void 0:Vo.the_value})}),Bt=Object.assign(Object.assign({},Bt),{method:Dn,methodURL:Gn,authType:Wn,username:Pn,password:Un,bearerToken:Fn,json:tt,script:Mn,body:He})}else Jt==="function"&&(Bt=Object.assign(Object.assign({},Bt),{language:Ot,return:Pe,codeEditor:Wo}));const jt=[],to=[],et=[];return Nt?.length&&Nt?.forEach(tt=>{var qe;jt.push((qe=tt?.data)===null||qe===void 0?void 0:qe.the_image_url)}),Tn?.length&&Tn?.forEach(tt=>{var qe;to.push((qe=tt?.data)===null||qe===void 0?void 0:qe.the_video_link)}),Yt?.length&&Yt?.forEach(tt=>{var qe;et.push((qe=tt.data)===null||qe===void 0?void 0:qe.the_doc_url)}),Bt=Object.assign(Object.assign({},Bt),{imageList:jt,linkList:et,videoList:to}),Bt})),yield function(){return it(this,void 0,void 0,function*(){document.getElementById("widget-documentation-preview-modal").showModal()})}(),function(Se,Re){it(this,void 0,void 0,function*(){const Ve=document.getElementById("documentation-view");if(r.B.DOCUMENTATION_WIDGET!=0)return void(yield Xn(r.B.DOCUMENTATION_WIDGET,Ve,{currentWidgetId:Re}));const Fe=document.getElementById("documentation-preview");Fe.innerHTML="",Se&&Se?.length&&typeof Se!="string"?Se?.forEach(Le=>{var Ye,at,ft,nt;const It=document.createElement("h3");let st="";switch(Le?.type){case"api":st="API";break;case"function":st="Functions and Classes";break;case"imgAndLink":st="Images and Links";break;default:st=""}It.innerHTML=`
        ${Le?.title} ${st?"("+st+")":""}
      `,Fe?.appendChild(It);const gt=document.createElement("div");gt.classList.add("widget-doc-content"),Le?.content&&(gt.innerHTML=Le.content,Fe?.appendChild(gt));const ht=document.createElement("div");if(ht.classList.add("widget-doc-section"),Le.type==="api"){let ct="";ct=Le.authType==="basicAuth"?`
            <p>username: <code>${Le?.username}</code></p>
            <p>password: <code>${Le?.password}</code></p>
          `:Le.authType==="bearerToken"?`
          <h6>Token: <code>${Le?.bearerToken}</code></h6>
          `:"None";const St=Le.json.map(At=>`${At?.key}: ${At?.value}`).join(", "),wt=document.createElement("pre");wt.textContent=St,ht.innerHTML=`
          <div class="pv-3">
            <h6>Method Type: <code>${Le?.method.toUpperCase()}</code></h6>
            <h6>Endpoint: <code>${Le?.methodURL}</code></h6>
          </div>
          <div class="pv-3">
            <h6>Auth Type: <code>${((Ye=Le?.authType)===null||Ye===void 0?void 0:Ye.toUpperCase())||""}</code></h6>
            ${ct}
          </div>
          <div class="pv-3">
            <h6>JSON</h6>
            <code class="pre-wrapper" id="json-list-pre"></code>
          </div>
          <div class="pv-3">
            <h6>Body</h6>
            ${Le.body}
          </div>
          <div class="pv-3">
            <h6>Scripts</h6>
            ${Le.script}
          </div>
        `;const yt=ht.querySelector("#json-list-pre");yt&&(yt.appendChild(wt),yt.removeAttribute("id"))}else if(Le.type==="function"){const ct=document.createElement("pre");ct.textContent=Le?.codeEditor;const St=document.createElement("pre");St.textContent=Le?.return,ht.innerHTML=`
          <div class="mv-3">
            <h6>Parameter</h6>
            <p>Language: ${Le?.language}</p>
            <code class="pre-wrapper" id="editor-pre"></pre></code>
            <h6>Returns</h6>
            <code class="pre-wrapper" id="return-pre"></code>
          </div>
        `;const wt=ht.querySelector("#editor-pre");wt&&(wt.appendChild(ct),wt.removeAttribute("id"));const yt=ht.querySelector("#return-pre");yt&&(yt.appendChild(St),yt.removeAttribute("id"))}const bt=document.createElement("div");bt.classList.add("mv-3");const _t=(at=Le?.linkList)===null||at===void 0?void 0:at.map(ct=>`
            <p>${ct}</p>
          `).join(""),Et=(ft=Le?.imageList)===null||ft===void 0?void 0:ft.map(ct=>`
          <img src="${ct}">
        `).join(""),xt=(nt=Le?.videoList)===null||nt===void 0?void 0:nt.map(ct=>`
            <iframe width="560" height="315" src="${ct}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        `).join(""),Wt=_t?.length?`
          <div class="mv-3">
          <h6>Web links</h6>
          ${_t}
          </div>
        `:"",Mt=Et?.length?`
          <h6>Attachments</h6>
          <div class="documentation-attachments">
            ${Et}
          </div>
        `:"",Vt=xt?.length?`
            <h6>Videos</h6>
            <div class="documentation-attachments">
              ${xt}
            </div>
            `:"";bt.innerHTML=`
        <div class="mv-3">
          ${Wt}
          ${Mt}
          ${Vt}
        </div>
        <p class="documentation-creator">- added by: <span>${Le?.creatorEmail}</span></p>
      `,ht?.appendChild(bt),Fe?.appendChild(ht)}):Se!==void 0&&(Fe.innerHTML=Se)})}(me,B)}))})}function _r(B){return it(this,void 0,void 0,function*(){const u=document.getElementById(B),s=u?.querySelector("form");s?.reset(),u?.close()})}var Gs=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function Kn(B){return Gs(this,arguments,void 0,function*(u,s=null,p="",T={concepts:[],connections:[]}){var A,O,G,_;if(Ge)try{const V=yield $e("CreateData",{json:u,ofConcept:s,typeConcept:p,actions:T});return!((O=(A=V?.actions)===null||A===void 0?void 0:A.concepts)===null||O===void 0)&&O.length&&(T.concepts=JSON.parse(JSON.stringify(V.actions.concepts))),!((_=(G=V?.actions)===null||G===void 0?void 0:G.connections)===null||_===void 0)&&_.length&&(T.connections=JSON.parse(JSON.stringify(V.actions.connections))),V.data}catch(V){console.error("CreateTheComposition sw error: ",V),Qe(V)}let g=999,d=999,F=(0,te.o)();for(const V in u){let z=Fs(V);if(typeof u[V]!="string"&&typeof u[V]!="number")if(s==null||s.id==0)F=yield(0,ge.k)(z,"",!0,g,4,d,void 0,T),Array.isArray(u[V])&&(z=Er(z)),yield Kn(u[V],F,z,T);else{Array.isArray(u[V])&&(z=xr(z));let q=xr(V),ne=yield(0,ge.k)(z,"",!0,g,4,d,void 0,T);F=ne;let de=Or(p,q),me=yield(0,Be.$)(de,d,g,g,T);yield(0,Rt.F)(s.id,ne.id,me.id,1e3,me.characterValue,g,T),Array.isArray(u[V])&&(z=Er(z)),yield Kn(u[V],ne,z,T)}else{let q=Or(p,V),ne=yield(0,Be.$)(q,d,g,g,T),de=yield(0,ge.k)(V,u[V].toString(),!1,g,4,d,void 0,T);console.log("this is the type concept in down",ne,de),s!=null&&(yield(0,Rt.F)(s.id,de.id,ne.id,1e3,q,g,T))}}return F})}function Fs(B){return B.startsWith("the_")?B:"the_"+B}function Er(B){return B.endsWith("_s")?B:B+"_s"}function xr(B){return B.replace(/_s$/,"")}const Ps=B=>/^[+-]?\d+(\.\d+)?$/.test(B);function Or(B,u){return Ps(u)?B+"_":B+"_"+function(s){return s.startsWith("the_")?s.slice(4):s}(u)}class Br{constructor(){this.prototype="",this.required=[],this.optional=[],this.field="string",this.childPrototypes=[],this.isCompositional=!1,this.options=[],this.isQueryType=!1,this.querySelector=null,this.concepts=[],this.connections=[],this.addedConcepts=[],this.addedConnections=[]}}class Ro{static getValue(u){return u in this.environments?this.environments[u]:null}static setValue(u,s){return this.environments[u]=s,this}}function Gt(B,u){if(Array.isArray(B)&&Array.isArray(u))for(let s=0;s<u.length;s++)B.push(u[s]);return B}Ro.environments={};var sn=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function Do(B){return sn(this,arguments,void 0,function*(u,s=null){let p=[],T=[],A=[],O=(0,te.o)();try{s==null&&(s=new No,yield s.initialize());let G=[];if(u.isCompositional){if(O=yield function(d,F,V,z){return sn(this,void 0,void 0,function*(){let q=(0,te.o)(),ne=yield z.MakeTheInstanceConceptLocal("the_composition","",!0,999,999,999),de=yield z.MakeTheTypeConceptLocal("the_composition_type",999,999,999),me=yield z.MakeTheTypeConceptLocal(d,999,999,999),Ie=yield z.CreateTheConnectionLocal(ne.id,me.id,de.id,1e3,"the_composition_type");return q=ne,F.push(de),F.push(me),V.push(Ie),q})}(u.prototype,p,T,s),u.isQueryType){let d=yield function(V,z,q){return sn(this,void 0,void 0,function*(){let ne=[],de=[],me="the_composition_filter_type",Ie="the_composition_selector",fe=yield q.MakeTheTypeConceptLocal(me,999,999,999),Se=yield q.MakeTheTypeConceptLocal(Ie,999,999,999);if(V!=null){let Re=yield q.MakeTheTypeConceptLocal(V.selector,999,999,999);ne.push(Re);let Ve=yield q.MakeTheTypeConceptLocal(V.filterType,999,999,999);ne.push(Re),ne.push(Ve);let Fe=yield q.CreateTheConnectionLocal(z.id,Re.id,Se.id,1e3,Ie,999);de.push(Fe);let Le=yield q.CreateTheConnectionLocal(z.id,Ve.id,fe.id,1e3,me,999);de.push(Le)}return{concepts:ne,connections:de}})}(u.querySelector,O,s),F=d.concepts;Gt(A,d.connections),Gt(p,F)}if(u.options.length>0){let d=yield function(V,z,q){return sn(this,void 0,void 0,function*(){let ne=[],de=[],me="the_composition_s_option",Ie=yield q.MakeTheTypeConceptLocal(me,999,999,999);for(let fe=0;fe<V.length;fe++){let Se=V[fe].type,Re=V[fe].value,Ve=yield q.MakeTheInstanceConceptLocal(Se,Re,!1,999,999,999);ne.push(Ve);let Fe=yield q.CreateTheConnectionLocal(z.id,Ve.id,Ie.id,1e3,me,999);de.push(Fe)}return{concepts:ne,connections:de}})}(u.options,O,s),F=d.concepts;Gt(A,d.connections),Gt(p,F)}}else O=yield function(d,F){return sn(this,void 0,void 0,function*(){let V=yield(0,he.A)(5124),z=yield F.MakeTheTypeConceptLocal(d,999,999,999);return yield function(ne,de,me,Ie){return sn(this,void 0,void 0,function*(){let fe=yield Ie.CreateTheConceptLocal("",de.characterValue,999,ne.id,de.id,4,!1);return fe.characterValue=de.characterValue,fe.typeCharacter=de.characterValue,fe.isComposition=!0,fe.type=de,fe})}(V,z,0,F)})}(u.prototype,s),A=yield Dr(u.required,O,p,s,!0),G=yield Dr(u.optional,O,p,s),p.push(O);let _=Rr(O,!0,!0),g=yield s.MakeTheTypeConceptLocal(_,999,999,999);if(p.push(g),u.childPrototypes.length>0)for(let d=0;d<u.childPrototypes.length;d++){let F=yield Do(u.childPrototypes[d]),V=F.mainConcept,z=F.connections,q=F.concepts,ne=yield s.CreateTheConnectionLocal(O.id,V.id,g.id,1e3,_,999);A.push(ne),Gt(A,z),Gt(p,q),p.push(V)}Gt(A,G),Gt(A,T),Gt(p,u.addedConcepts),Gt(A,u.addedConnections),u.concepts=p,u.connections=A,console.log("this is the connections",A)}catch{s?.rollbackTransaction()}return{concepts:p,connections:A,mainConcept:O}})}function Rr(B,u=!0,s=!1){var p;let T="the_prototype_of_"+((p=B.type)===null||p===void 0?void 0:p.characterValue);return T+=u?"_requires":"_optional",s&&(T+="_the_composition"),T}function Dr(B,u,s,p){return sn(this,arguments,void 0,function*(T,A,O,G,_=!1,g=!1){let d=[],F=[],V=Rr(A,_,g),z=yield G.MakeTheTypeConceptLocal(V,999,999,999);O.push(z);for(let q=0;q<T.length;q++){let ne=yield G.MakeTheTypeConceptLocal(T[q],999,999,999);d.push(ne)}for(let q=0;q<d.length;q++){let ne=yield G.CreateTheConnectionLocal(A.id,d[q].id,z.id,1e3,V,999);F.push(ne)}for(let q=0;q<d.length;q++)O.push(d[q]);return F})}var Us=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,[])).next())})};function Go(B){return Us(this,void 0,void 0,function*(){let u;try{const s=yield fetch(r.B.GetCachedImage(B),{method:"GET"});return s.ok?u=s.body:(console.log("Error in Getting Image",s.status),(0,o.ry)(s)),u}catch(s){throw s instanceof Error?console.log("Error in Getting Local concept by character value error message: ",s):console.log("Error in Getting Local concept by character value unexpected error: ",s),u}})}var Ws=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};function Gr(B){return Ws(this,arguments,void 0,function*(u,s="normal"){let p,T=u.split("/").pop();if(s=="small"){let A=T?.split(".");A&&(T=A[0]+"_small."+A[1])}return T&&(p=yield Go(T)),p})}function Fr(B,u="normal"){let s=B;try{if(B){let p=B.split("/").pop();if(u=="small"){let T=p?.split(".");T&&(p=T[0]+"_small."+T[1])}p&&(s=r.B.GetCachedImage(p))}}catch{console.log("This url has error",B)}return s}var Ge,rt=function(B,u,s,p){return new(s||(s=Promise))(function(T,A){function O(g){try{_(p.next(g))}catch(d){A(d)}}function G(g){try{_(p.throw(g))}catch(d){A(d)}}function _(g){var d;g.done?T(g.value):(d=g.value,d instanceof s?d:new s(function(F){F(d)})).then(O,G)}_((p=p.apply(B,u||[])).next())})};const Ms=Date.now().toString(36)+Math.random().toString(36).substring(2);let Fo=[],Ut=[],Po=!1;function Pr(B){Po=B}function Uo(B="",u){Je.b.BearerAccessToken=B,Ge&&$e("updateAccessToken",{accessToken:B,session:Je.b.sessionId})}function Ur(){return rt(this,arguments,void 0,function*(B="",u="",s="",p="",T=!0,A="",O=void 0,G={},_={}){var g;try{r.B.BASE_URL=B,r.B.AI_URL=u,r.B.NODE_URL=p,r.B.BASE_APPLICATION=A,r.B.LOG_SERVER=(g=_.logserver)!==null&&g!==void 0?g:"https://logdev.freeschema.com",console.log("setting the logserver",r.B.LOG_SERVER,_.logserver),Uo(s);let d=Math.floor(1e8*Math.random());r.B.setRandomizer(d);const F={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1};if(r.B.FLAGS=F,r.B.FLAGS=Object.assign(Object.assign({},F),G),function(V){const z=ye.V.logfunction("initializeFlags",arguments);try{return V.logApplication&&(Ao.initialize(),ye.V.logApplicationActivationStatus=!0,console.warn("Application log started.")),V.logPackage&&(ye.V.logPackageActivationStatus=!0,console.warn("Package log started.")),V.accessTracker&&(kn.J.activateStatus=!0,console.warn("Access Tracker Activated.")),V.isTest&&(n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0,n.B.isLocalDataLoaded=!0,n.B.isLocalTypeLoaded=!0,n.B.isLocalCharacterLoaded=!0,n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0,n.B.isLocalConnectionLoaded=!0),ye.V.logUpdate(z),V}catch(q){throw(0,o.ey)(z,"initializeFlags",q),q}}(r.B.FLAGS),!("serviceWorker"in navigator))return yield xn(),void console.warn("Service Worker not supported in this browser.");if(yield function(){return rt(this,void 0,void 0,function*(){var V;let z=r.B.BASE_APPLICATION+"_cacheServers",q=r.B.BASE_APPLICATION+"_config",ne=r.B.BASE_APPLICATION+"_session",de=sessionStorage.getItem(z),me=sessionStorage.getItem(q),Ie=(V=sessionStorage.getItem(ne))!==null&&V!==void 0?V:"999",fe=parseInt(Ie);de!==void 0&&de!=="undefined"||(r.B.NODE_CACHE_URL=r.B.BASE_URL),de=JSON.parse(de);const Se=JSON.parse(me);de&&Se&&Se.documentationWidget&&fe!=999?(Array.isArray(de)&&de.length?r.B.NODE_CACHE_URL=de[0]:r.B.NODE_CACHE_URL=r.B.BASE_URL,Je.b.setSession(fe),r.B.DOCUMENTATION_WIDGET=Se.documentationWidget):yield function(){return rt(this,void 0,void 0,function*(){var Re;let Ve;try{let Fe=(Re=r.B.BASE_APPLICATION)!==null&&Re!==void 0?Re:"boomconsole";if(Ve=yield fetch(r.B.getAppConfig()+"?application="+Fe,{method:"POST"}),!Ve.ok)throw new Error("Failed to sync data to the server.");const Le=yield Ve.json();Le.success&&(sessionStorage.setItem(z,JSON.stringify(Le.servers)),sessionStorage.setItem(q,JSON.stringify(Le.config)),sessionStorage.setItem(ne,Le.session),Je.b.setSession(Le.session),Le.servers?r.B.NODE_CACHE_URL=Le.servers[0]:r.B.NODE_CACHE_URL=r.B.BASE_URL,Le.config&&(r.B.DOCUMENTATION_WIDGET=Le.config.documentationWidget))}catch(Fe){console.error("error getting app config from server",Fe.message)}})}(),console.log("before the payload in app",Je.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&$e("SESSION_DATA",{type:"SESSION_DATA",data:r.B.NODE_CACHE_URL,session:Je.b.sessionId})})}(),function(){navigator.serviceWorker.addEventListener("message",V=>rt(this,void 0,void 0,function*(){var z,q,ne,de;try{if(V.data&&V.data.type==="API_401"){const{requestDetails:me}=V.data,Ie={method:me.method,headers:new Headers(me.headers),body:me.body},fe=yield fetch(me.url,Ie),Se=yield fe?.json();(q=(z=navigator?.serviceWorker)===null||z===void 0?void 0:z.controller)===null||q===void 0||q.postMessage({type:"API_RESPONSE",messageId:V.data.messageId,response:new Response(Se,{status:fe.status,statusText:fe.statusText,headers:fe.headers})})}}catch(me){console.error("Error during listenPostMessage",me),(de=(ne=navigator?.serviceWorker)===null||ne===void 0?void 0:ne.controller)===null||de===void 0||de.postMessage({type:"API_RESPONSE",messageId:V.data.messageId})}}))}(),function(){er.x.addEventListener("message",V=>rt(this,void 0,void 0,function*(){const{type:z,payload:q}=V.data;if(!z)return;let ne={success:!1,data:void 0};Wr[z]?yield Wr[z](q):console.warn(`Unable to handle "${z}" case in BC service worker`)}))}(),O&&O.activate&&O.manual)yield new Promise((V,z)=>{navigator.serviceWorker.ready.then(q=>rt(this,void 0,void 0,function*(){console.log("registraions ready",q),Ge=q.active,yield wn(),V("done")})).catch(q=>{console.error("Error: Ready service worker",q),z(q)}).finally(()=>console.log("Finally service worker ready done")),setTimeout(()=>z("Timeout ready"),3e4)});else if(O&&O?.activate)try{console.log("service worker initialiing"),yield function(V){var z=arguments;return rt(this,void 0,void 0,function*(){const q=ye.V.logfunction("handleRegisterServiceWorker",z);yield new Promise((ne,de)=>{var me,Ie;let fe=!1;navigator.serviceWorker.register((me=V.pathToSW)!==null&&me!==void 0?me:"./serviceWorker.bundle.js",{scope:(Ie=V.scope)!==null&&Ie!==void 0?Ie:"/"}).then(Se=>rt(this,void 0,void 0,function*(){console.log("Service Worker registered:",Se),setInterval(()=>{Ut.length&&eo()},2e3),console.log("update listen start"),Se.onupdatefound=()=>{const Re=Se.installing;console.log("new worker",Re),Re&&(Re.onstatechange=()=>rt(this,void 0,void 0,function*(){console.warn("on state change triggered",Re.state,navigator.serviceWorker.controller),Re.state==="installing"&&(console.log("Service Worker installing"),Ge=void 0),Re.state!=="activated"&&Re.state!=="redundant"||!navigator.serviceWorker.controller||(Ge=Re,console.log("New Service Worker is active",Se),setTimeout(()=>{console.log("Message Processed after some time"),eo()},5e3),yield wn(),fe=!0,eo(),ne())}))},Se.addEventListener("controllerchange",()=>rt(this,void 0,void 0,function*(){console.warn("controller change triggered",navigator.serviceWorker.controller),navigator.serviceWorker.controller&&(Ge=navigator.serviceWorker.controller,console.warn("Service worker has been activated; controller change"),yield wn())})),(Se.installing||Se.waiting||Se.active)&&Se.addEventListener("statechange",Re=>rt(this,void 0,void 0,function*(){var Ve;((Ve=Re?.target)===null||Ve===void 0?void 0:Ve.state)==="activating"&&(Ge=navigator.serviceWorker.controller,console.warn("Service Worker is activating statechange"),yield wn())})),Se.active?(console.log("active sw"),Ge=Se.active,yield wn(),eo(),ne()):setTimeout(()=>{fe||de("Not Completed Initialization")},1e4)})).catch(Se=>rt(this,void 0,void 0,function*(){yield xn(),de(Se),console.error("Service Worker registration failed:",Se),(0,o.ey)(q,"handleRegisterServiceWorker",Se)}))})})}(O)}catch(V){yield xn(),console.error("Unable to start service worker",V)}else yield xn(),console.warn("Service Worker not activated");return!0}catch(d){yield xn(),console.warn("Cannot initialize the system",d)}})}function $e(B,u){return rt(this,arguments,void 0,function*(s,p,T=0){let A=!1;const O=Math.random().toString(36).substring(2);p.messageId=O,p.TABID=Ms;const G=JSON.parse(JSON.stringify(p));let _;return s!="checkProcess"&&T==0&&(_=setInterval(()=>rt(this,void 0,void 0,function*(){if(!A&&!(yield function(g,d){return rt(this,void 0,void 0,function*(){var F;try{const V=yield $e("checkProcess",{checkMessageId:g});if(console.log("check interval data res for type ",d,g,V.data),(F=V?.data)===null||F===void 0?void 0:F.processing)return!0}catch(V){return console.error("error on checing executing process",d,g,V),!1}})}(O,s))&&(clearInterval(_),!A)){if(console.log("Failed to handle type "+s+" message not found "+O,"retrying: ",T==0,s),T==0&&s!="checkProcess")return console.log("retrying ",s,O),yield $e(s,p,T+1);console.log("Failed to handle type "+s+" "+O)}}),2e3)),new Promise((g,d)=>{if(navigator.serviceWorker.controller||Ge||console.log("",navigator.serviceWorker.controller,Ge,s),navigator.serviceWorker.controller||Ge){const F=V=>{var z,q,ne,de,me,Ie;((z=V?.data)===null||z===void 0?void 0:z.messageId)==O&&(A=!0,clearInterval(_),V.data.success||(((q=V?.data)===null||q===void 0?void 0:q.status)==401?d((0,o.ry)(new Response("Unauthorized",{status:401,statusText:(ne=V?.data)===null||ne===void 0?void 0:ne.statusText}))):((de=V?.data)===null||de===void 0?void 0:de.status)==500?d((0,o.Mb)(new Response("Internal Server Error",{status:500,statusText:(me=V?.data)===null||me===void 0?void 0:me.statusText}))):(console.error("Error in the response from worker:",V),d(`Failed to handle action ${s} ${JSON.stringify(p)}, Response: ${JSON.stringify(V.data)}`))),!((Ie=V.data)===null||Ie===void 0)&&Ie.actions&&(p.actions=JSON.parse(JSON.stringify(V.data.actions))),g(V.data),navigator.serviceWorker.removeEventListener("message",F))};if(navigator.serviceWorker.addEventListener("message",F),navigator.serviceWorker.controller)s!="checkProcess"&&console.log("sent to sw",s,O),navigator.serviceWorker.controller.postMessage({type:s,payload:G});else if(Ge){console.warn(`controller not found but serviceWorker is available. messageId: ${O}, type: ${s}`);try{Ge.postMessage({type:s,payload:G})}catch(V){console.log("Retrying again on catch service worker",V),Ge.postMessage({type:s,payload:G})}}else console.warn(`Service Worker hasn't loaded yet. messageId: ${O}, type: ${s}`),console.info("ready",navigator.serviceWorker.ready),setTimeout(()=>{console.warn(`Re-Trying after certain time. messageId: ${O}, type: ${s}`),Ge?(console.info("This is triggered "),Ge?.postMessage({type:s,payload:p})):(console.log("not ready",s),clearInterval(_),d("Service worker not ready"))},3e4);setTimeout(()=>{clearInterval(_),d(`No response from service worker after timeout: ${s}`),navigator.serviceWorker.removeEventListener("message",F)},21e4)}else Ut.push({message:{type:s,payload:G}}),s=="init"&&(clearInterval(_),g(null))})})}const Wr={GetLinkListener:B=>rt(void 0,void 0,void 0,function*(){const u=Fo.find(s=>s.listenerId==B.listenerId);return u?.callback(B.data),{success:!0}}),dispatchEvent:B=>rt(void 0,void 0,void 0,function*(){if(Ge){let u=new CustomEvent(B.id||"",B.data);dispatchEvent(u)}return{success:!0}}),checkInit:B=>rt(void 0,void 0,void 0,function*(){return console.log("service worker init 0"),navigator.serviceWorker.controller&&(console.log("service worker init 1"),Ge=navigator.serviceWorker.controller),yield wn(),{success:!0}})};function xn(){return rt(this,void 0,void 0,function*(){yield(0,As.A)();const B=new Date().getTime();yield(0,b.A)().then(()=>{let u=new Date().getTime()-B;console.log("The time taken to prepare concept  data is  ",u)}).catch(u=>{throw u}),yield(0,Ki.Ay)().then(()=>{let u=new Date().getTime()-B;console.log("The time taken to prepare local concept  ",u)}).catch(u=>{throw u}),yield(0,Zi.p)().then(()=>{n.B.isLocalConnectionLoaded=!0}).catch(u=>{throw u}),yield(0,Ki.xd)().catch(u=>{throw console.log("This is the error in populating binary tree"),u}),yield(0,Zi.a)().then(()=>{n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0;let u=new Date().getTime()-B;console.log("The time taken to prepare connections  ",u)}).catch(u=>{throw u})})}function Mr(B,u={}){if(Ge||typeof window<"u"){let s=new CustomEvent(`${B}`,u);dispatchEvent(s)}else er.x.postMessage({type:"dispatchEvent",payload:{id:B,data:u}})}function eo(){return rt(this,void 0,void 0,function*(){console.log("message queue",Ut);const B=Ut.find(u=>{var s;return((s=u?.message)===null||s===void 0?void 0:s.type)=="init"});if(B){console.log("Processing Init Queue poped",B?.type,B);const u=Ut.indexOf(B);u>-1&&Ut.splice(u,1),yield $e(B?.type,B?.payload)}for(console.log("message queue while",Ut);Ut.length>0;){const{message:u,resolve:s,reject:p}=Ut.shift();console.log("Queue poped",u.type,u),yield $e(u.type,u.payload)}})}const Qe=B=>{if(B instanceof H.z)throw console.error("FreeSchemaResponse Error",B),B;console.error("Service Worker Error",B)};function wn(){return rt(this,void 0,void 0,function*(){yield $e("init",{url:r.B.BASE_URL,aiurl:r.B.AI_URL,accessToken:Je.b.BearerAccessToken,nodeUrl:r.B.NODE_URL,enableAi:!1,applicationName:r.B.BASE_APPLICATION,flags:r.B.FLAGS})})}},5238:(Y,x,y)=>{let N=y(3152);class b extends N{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(h){h&&h.value!==void 0&&typeof h.value!="string"&&(h={...h,value:String(h.value)}),super(h),this.type="decl"}}Y.exports=b,b.default=b},5239:(Y,x,y)=>{y.d(x,{O:()=>k});var N=y(205),b=y(5205);class n{constructor(r,e,o,l){this.leftNode=null,this.rightNode=null,this.variants=[],this.height=1,this.key=r,this.value=e,this.leftNode=o,this.rightNode=l,this.currentNode=null}addCurrentNode(r,e){return e==null?e=r:(r.value.typeId!=e.value.typeId&&(e.currentNode=this.addCurrentNode(r,e.currentNode)),e)}addCurrentNodeType(r,e){if(e==null)return r;let o=!1;r.value.id==e.value.id&&(o=!0);for(let l=0;l<e.variants.length;l++)e.variants[l].value.id==r.value.id&&(o=!0);return o||e.variants.push(r),e}getMax(r,e){return r>e?r:e}addNode(r,e,o){if(e==null)return(0,b.dispatchIdEvent)(r.value.ofTheConceptId),r;let l=e.leftNode,f=e.rightNode;if(r.key<e.key)e.leftNode=this.addNode(r,l,o);else{if(!(r.key>e.key))return e;e.rightNode=this.addNode(r,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}addTypeNode(r,e,o){if(r.value.typeId!=0){if(e==null)return r;let l=e.leftNode,f=e.rightNode;if(e.key>r.key)e.leftNode=this.addTypeNode(r,l,o);else{if(!(e.key<r.key))return e.key==r.key&&e.key!=0&&e.addCurrentNodeType(r,e),e;e.rightNode=this.addTypeNode(r,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(r.key<e.leftNode.key)return this.rightRotate(e);if(r.key>e.leftNode.key)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(r.key>e.rightNode.key)return this.leftRotate(e);if(r.key<e.rightNode.key)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}}return e}rightRotate(r){if(r){let e=r.leftNode;if(e){let o=e.rightNode;return r.leftNode=o,e.rightNode=r,r.height=this.getMax(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,e}throw console.log("this is the error in right rotation",r,e),new Error("Cannot perform right rotation: left node is null.")}return r}leftRotate(r){if(r){let e=r.rightNode;if(e){let o=e.leftNode;return e.leftNode=r,r.rightNode=o,r.height=this.getMax(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(r.rightNode))+1,e}throw console.log("this is the error in left rotation",r,e),new Error("Cannot perform left rotation: right node is null.")}return r}getHeight(r){return r?r.height:0}getBalanceFactor(r){return r==null?0:this.getHeight(r.leftNode)-this.getHeight(r.rightNode)}getFromNode(r,e){try{if(e)return r==e.key?(e.value.count?e.value.count++:e.value.count=1,e):r<e.key?this.getFromNode(r,e.leftNode):r>e.key?this.getFromNode(r,e.rightNode):e}catch{console.log("this is the exception",r,e,e?.leftNode,e?.rightNode)}return e}getCharacterFromNode(r,e){return e&&(r==e.key?e:r<e.key?this.getCharacterFromNode(r,e.leftNode):r>e.key?this.getCharacterFromNode(r,e.rightNode):e)}checkIfIdsInNode(r,e,o,l){if(r){if(e.includes(r.key)){o.push(r.value);let f=e.indexOf(r.key);e.splice(f,1)}r.leftNode&&this.checkIfIdsInNode(r.leftNode,e,o,l),r.rightNode&&this.checkIfIdsInNode(r.rightNode,e,o,l)}}traverse(r){let e=0;return r&&(e+=1,r?.leftNode&&(e+=this.traverse(r.leftNode)),r.rightNode&&(e+=this.traverse(r.rightNode))),e}removeNode(r,e){if(r==null)return r;if(r.key>e)return r.leftNode=this.removeNode(r.leftNode,e),r;if(r.key<e)return r.rightNode=this.removeNode(r.rightNode,e),r;if(new Event(`${r.value.ofTheConceptId}`),(0,b.dispatchIdEvent)(r.value.ofTheConceptId),r.leftNode==null){let o=r.rightNode;return r=null,o}if(r.rightNode==null){let o=r.leftNode;return r=null,o}{let o=this.inOrderSuccessor(r.rightNode);return r.value=o.value,r.key=o.key,r.variants=o.variants,r.currentNode=o.currentNode,r.rightNode=this.removeNode(r.rightNode,o.key),r}}removeNodeWithVariants(r,e,o){if(r==null)return r;if(r.key>e)return r.leftNode=this.removeNodeWithVariants(r.leftNode,e,o),r;if(r.key<e)return r.rightNode=this.removeNodeWithVariants(r.rightNode,e,o),r;if(r.variants.length>0){if(r.value.id==o){let l=r.variants[0];if(l)return r.value=l.value,r.key=l.key,r.currentNode=l.currentNode,r.variants.splice(0,1),r}else for(let l=0;l<r.variants.length;l++)if(o==r.variants[l].value.id)return r.variants.splice(l,1),r}if(r.leftNode==null){let l=r.rightNode;return r=null,l}if(r.rightNode==null){let l=r.leftNode;return r=null,l}{let l=this.inOrderSuccessor(r.rightNode);return r.value=l.value,r.key=l.key,r.variants=l.variants,r.currentNode=l.currentNode,r.rightNode=this.removeNodeWithVariants(r.rightNode,l.key,o),r}}inOrderSuccessor(r){for(;r.leftNode!=null;)r=r.leftNode;return r}}var h=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,[])).next())})};class k{static addNodeToTree(r){try{if(this.connectionroot==null)return this.connectionroot=r,this.connectionroot;this.connectionroot=this.connectionroot.addNode(r,this.connectionroot,this.connectionroot.height)}catch(e){throw console.log("This is the error in making the tree",e),e}}static addConnectionToTree(r){let e=new n(r.id,r,null,null);this.addNodeToTree(e)}static traverse(){var r;return(r=this.connectionroot)===null||r===void 0?void 0:r.traverse(this.connectionroot)}static waitForDataToLoad(){return h(this,void 0,void 0,function*(){return new Promise((r,e)=>{this.checkFlag(r),setTimeout(()=>{e("not")},25e3)})})}static checkFlag(r){if(N.B.isConnectionLoaded)return r("done");setTimeout(k.checkFlag,1e3,r)}static removeNodeFromTree(r){return h(this,void 0,void 0,function*(){this.connectionroot&&(this.connectionroot=this.connectionroot.removeNode(this.connectionroot,r))})}static getNodeFromTree(r){return h(this,void 0,void 0,function*(){try{return this.connectionroot?this.connectionroot.getFromNode(r,this.connectionroot):this.connectionroot}catch{console.log("this is the getNodeFromTree",r,this.connectionroot)}})}static getConnectionListFromIds(r,e,o){return h(this,void 0,void 0,function*(){this.connectionroot&&this.connectionroot.checkIfIdsInNode(this.connectionroot,r,e,o)})}}k.connectionroot=null},5257:(Y,x,y)=>{y.d(x,{R:()=>h});var N=y(9003),b=y(3075),n=function(k,C,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{I(e.next(i))}catch(a){l(a)}}function v(i){try{I(e.throw(i))}catch(a){l(a)}}function I(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}I((e=e.apply(k,[])).next())})};class h{static AddConceptId(C){this.localId=C.value,(0,N.kH)("localid",C)}static getConceptId(){return n(this,void 0,void 0,function*(){try{if(this.localId){if(this.ReservedLocalId.length<5){yield(0,b.EO)().then(()=>{let r=this.localId;for(let e=1;e<10;e++){let o=this.localId-e;this.ReservedLocalId.push(o),r=o}this.AddConceptId({id:0,value:r})}).catch(r=>(console.log(" getid: cannot get the id from indexdb"),-Math.floor(1e8*Math.random())));let C=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),C}{let C=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),C}}return yield(0,b.EO)().then(()=>{let C=this.localId;for(let r=1;r<10;r++){let e=this.localId-r;this.ReservedLocalId.push(e),C=e}this.AddConceptId({id:0,value:C})}),this.getConceptId()}catch(C){return console.log(" getid: this is the eror in concept",C),-Math.floor(1e8*Math.random())}})}static AddConnectionId(C){this.localConnectionId=C.value}static getConnectionId(){return n(this,void 0,void 0,function*(){try{if(this.localConnectionId){if(this.ReservedConnectionId.length<5){yield(0,b.xd)().then(()=>{let r=this.localConnectionId;for(let e=1;e<10;e++){let o=this.localConnectionId-e;this.ReservedConnectionId.push(o),r=o}}).catch(r=>(console.log("this is the new event",r),-Math.floor(1e8*Math.random())));let C=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),C}{let C=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),C}}return yield(0,b.xd)().then(()=>{let C=this.localConnectionId;for(let r=1;r<10;r++){let e=this.localConnectionId-r;this.ReservedConnectionId.push(e),C=e}this.AddConnectionId({id:1,value:C})}),this.getConnectionId()}catch{return-Math.floor(1e8*Math.random())}})}}h.ReservedLocalId=[],h.ReservedConnectionId=[]},5284:(Y,x,y)=>{y.d(x,{B:()=>k});var N=y(5205),b=y(8286),n=y(1863),h=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,r||[])).next())})};function k(){return h(this,arguments,void 0,function*(C=[]){const r=N.Logger.logfunction("FindConnectionsOfCompositionsBulkInMemory",[C.length])||{};let e=[];try{if(N.serviceWorker){r.serviceWorker=!0;try{const o=yield(0,N.sendMessage)("FindConnectionsOfCompositionsBulkInMemory",{composition_ids:C});return N.Logger.logUpdate(r),o.data}catch(o){console.error("FindConnectionsOfCompositionsBulkInMemory sw error: ",o),(0,n.ey)(r,"FindConnectionsOfCompositionsBulkInMemory",o),(0,N.handleServiceWorkerException)(o)}}for(let o=0;o<C.length;o++){let l=yield b.d.GetConnectionsOfConcept(C[o]);e.push(...l)}return N.Logger.logUpdate(r),e}catch(o){return console.error("FindConnectionsOfCompositionsBulkInMemory error: ",o),(0,n.ey)(r,"FindConnectionsOfCompositionsBulkInMemory",o),e}})}},5286:(Y,x)=>{function y(b){for(var n=b.toLowerCase(),h="",k=!1,C=0;C<6&&n[C]!==void 0;C++){var r=n.charCodeAt(C);if(k=r===32,!(r>=97&&r<=102||r>=48&&r<=57))break;h+=n[C]}if(h.length!==0){var e=parseInt(h,16);return e>=55296&&e<=57343||e===0||e>1114111?["ï¿½",h.length+(k?1:0)]:[String.fromCodePoint(e),h.length+(k?1:0)]}}x.__esModule=!0,x.default=function(b){if(!N.test(b))return b;for(var n="",h=0;h<b.length;h++)if(b[h]!=="\\")n+=b[h];else{var k=y(b.slice(h+1,h+7));if(k!==void 0){n+=k[0],h+=k[1];continue}if(b[h+1]==="\\"){n+="\\",h++;continue}b.length===h+1&&(n+=b[h])}return n};var N=/\\/;Y.exports=x.default},5312:(Y,x,y)=>{y.d(x,{NK:()=>l,Ve:()=>f,cf:()=>e,vw:()=>v,y8:()=>o});var N=y(2832),b=y(3130),n=y(5205),h=y(1863),k=y(6687),C=y(1320),r=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,i||[])).next())})};function e(I){var i=arguments;return r(this,arguments,void 0,function*(a,t="",c=null,w=b.y0){var m,S,E,L,R,D,W,U;const P=n.Logger.logfunction("SearchLinkMultipleAll",i)||{};try{try{if(n.serviceWorker){P.serviceWorker=!0;const ue=yield(0,n.sendMessage)("SearchLinkMultipleAll",{searchQuery:a,token:t,caller:c,format:w});return n.Logger.logUpdate(P),ue.data}}catch(ue){console.error("SearchLinkMultipleAll error sw: ",ue),(0,h.ey)(P,"SearchLinkMultipleAll",ue),(0,n.handleServiceWorkerException)(ue)}let M=[],j=[],J=[],Z=[],K=a[0].composition,se={},$={};c?.isDataLoaded?(se.compositionIds=(m=c.conceptIds)===null||m===void 0?void 0:m.slice(),se.internalConnections=(S=c.internalConnections)===null||S===void 0?void 0:S.slice(),se.linkers=(E=c.linkers)===null||E===void 0?void 0:E.slice(),se.reverse=(L=c.reverse)===null||L===void 0?void 0:L.slice(),$=se,M=$.compositionIds,J=$.internalConnections,j=$.linkers,Z=$.reverse):(se=yield(0,N.j)(a,t),c&&(c.conceptIds=(R=se.compositionIds)===null||R===void 0?void 0:R.slice(),c.internalConnections=(D=se.internalConnections)===null||D===void 0?void 0:D.slice(),c.linkers=(W=se.linkers)===null||W===void 0?void 0:W.slice(),c.reverse=(U=se.reverse)===null||U===void 0?void 0:U.slice(),c.isDataLoaded=!0),$=se,M=$.compositionIds,J=$.internalConnections,j=$.linkers,Z=$.reverse);let ie=yield function(ue,ee,Q,te,oe,H){return r(this,arguments,void 0,function*(re,le,ae,he,Ce,we,ve=b.y0){try{let ke,Ee,ge=yield(0,k.QL)(re);return ve==b.ZJ?(ke=yield(0,k.MT)(le,ae),Ee=yield v(re,ke,Ce,he)):ve==b.yv?(ke=yield(0,k.D)(le,ae),Ee=yield v(re,ke,Ce,he)):ve==100?(ke=yield(0,k.nr)(le,ae),Ee=yield o(ge,ke,Ce,he)):ve==b.SL?Ee=yield(0,C._W)(re,le,ae,we.ofCompositions,he):(ke=yield(0,k.rv)(le,ae),Ee=yield o(ge,ke,Ce,he)),Ee}catch(ke){return void console.log("Error Occured in build layer",ke)}})}(j,M,J,Z,K,a[0],w);return n.Logger.logUpdate(P),ie}catch(M){throw console.log("this is the error in the search link multiple",M),(0,h.ey)(P,"SearchLinkMultipleAll",M),M}})}function o(I,i,a){return r(this,arguments,void 0,function*(t,c,w,m=[]){new Date().getTime();let S={},E=[];for(let L=0;L<t.length;L++)E.push(t[L].toTheConceptId),E.push(t[L].ofTheConceptId),E.push(t[L].typeId);t.sort(function(L,R){return R.id-L.id});for(let L=0;L<t.length;L++){let R=!1;if(m.includes(t[L].id)&&(R=!0),R==1){if(c[t[L].ofTheConceptId]&&c[t[L].toTheConceptId]){let D=c[t[L].toTheConceptId],W=yield(0,n.GetTheConcept)(t[L].typeId),U=D?.data,P=Object.keys(U)[0];try{let M=W.characterValue+"_reverse";typeof U=="string"&&(U={}),Array.isArray(U[P][M])||(typeof U[P]=="string"&&(U[P]={}),U[P][M]=[]),U[P][M].push(c[t[L].ofTheConceptId])}catch(M){console.log("this is error",M)}}}else if(c[t[L].ofTheConceptId]&&c[t[L].toTheConceptId]){let D=c[t[L].ofTheConceptId],W=yield(0,n.GetTheConcept)(t[L].typeId),U=D?.data,P=Object.keys(U)[0];try{typeof U=="string"&&(U={}),Array.isArray(U[P][W.characterValue])||(typeof U[P]=="string"&&(U[P]={}),U[P][W.characterValue]=[]),U[P][W.characterValue].push(c[t[L].toTheConceptId])}catch(M){console.log("this is error",M)}}}return S=c[w],S})}function l(I,i,a){return r(this,arguments,void 0,function*(t,c,w,m=[]){let S=[],E=[];for(let L=0;L<t.length;L++)E.push(t[L].toTheConceptId),E.push(t[L].ofTheConceptId),E.push(t[L].typeId);t.sort(function(L,R){return R.id-L.id});for(let L=0;L<t.length;L++){let R=!1;if(m.includes(t[L].id)&&(R=!0),R==1){if(c[t[L].ofTheConceptId]&&c[t[L].toTheConceptId]){let D=c[t[L].toTheConceptId],W=yield(0,n.GetTheConcept)(t[L].typeId),U=Object.keys(D)[0];try{let P=W.characterValue+"_reverse";typeof D=="string"&&(D={}),Array.isArray(D[U][P])||(typeof D[U]=="string"&&(D[U]={}),D[U][P]=[]),D[U][P].push(c[t[L].ofTheConceptId])}catch(P){console.log("this is error",P)}}}else if(c[t[L].ofTheConceptId]&&c[t[L].toTheConceptId]){let D=c[t[L].ofTheConceptId],W=yield(0,n.GetTheConcept)(t[L].typeId),U=Object.keys(D)[0];try{typeof D=="string"&&(D={}),Array.isArray(D[U][W.characterValue])||(typeof D[U]=="string"&&(D[U]={}),D[U][W.characterValue]=[]),D[U][W.characterValue].push(c[t[L].toTheConceptId])}catch(P){console.log("this is error",P)}}}for(let L=0;L<w.length;L++){let R=c[w[L]];R&&S.push(R)}return S})}function f(I,i,a,t){return r(this,arguments,void 0,function*(c,w,m,S,E=[]){new Date().getTime();let L=[],R=[];for(let D=0;D<c.length;D++)R.push(c[D].toTheConceptId),R.push(c[D].ofTheConceptId),R.push(c[D].typeId);c.sort(function(D,W){return W.id-D.id});for(let D=0;D<c.length;D++){let W=!1;if(E.includes(c[D].id)&&(W=!0),W==1){if(w[c[D].ofTheConceptId]&&w[c[D].toTheConceptId]){let U=w[c[D].toTheConceptId],P=yield(0,n.GetTheConcept)(c[D].typeId),M=U?.data,j=Object.keys(M)[0];try{let J=P.characterValue+"_reverse";typeof M=="string"&&(M={}),Array.isArray(M[j][J])||(typeof M[j]=="string"&&(M[j]={}),M[j][J]=[]),M[j][J].push(w[c[D].ofTheConceptId])}catch(J){console.log("this is error",J)}}}else if(w[c[D].ofTheConceptId]&&w[c[D].toTheConceptId]){let U=w[c[D].ofTheConceptId],P=yield(0,n.GetTheConcept)(c[D].typeId),M=U?.data,j=Object.keys(M)[0];try{typeof M=="string"&&(M={}),Array.isArray(M[j][P.characterValue])||(typeof M[j]=="string"&&(M[j]={}),M[j][P.characterValue]=[]),M[j][P.characterValue].push(w[c[D].toTheConceptId])}catch(J){console.log("this is error",J)}}}for(let D=0;D<S.length;D++){let W=w[S[D]];W&&L.push(W)}return L})}function v(I,i,a){return r(this,arguments,void 0,function*(t,c,w,m=[]){let S={},E=yield(0,n.GetConnectionBulk)(t),L=[];for(let R=0;R<E.length;R++)L.push(E[R].toTheConceptId),L.push(E[R].ofTheConceptId),L.push(E[R].typeId);yield(0,n.GetConceptBulk)(L),E.sort(function(R,D){return D.id-R.id});for(let R=0;R<E.length;R++){let D=!1;if(m.includes(E[R].id)&&(D=!0),D==1){if(c[E[R].ofTheConceptId]&&c[E[R].toTheConceptId]){let W=c[E[R].toTheConceptId],U=yield(0,n.GetTheConcept)(E[R].typeId),P=W,M=Object.keys(P)[0];try{let j=U.characterValue+"_reverse";typeof P=="string"&&(P={}),Array.isArray(P[M][j])||(typeof P[M]=="string"&&(P[M]={}),P[M][j]=[]),P[M][j].push(c[E[R].ofTheConceptId])}catch(j){console.log("this is error",j)}}}else if(c[E[R].ofTheConceptId]&&c[E[R].toTheConceptId]){let W=c[E[R].ofTheConceptId],U=yield(0,n.GetTheConcept)(E[R].typeId),P=W,M=Object.keys(P)[0];try{typeof P=="string"&&(P={}),Array.isArray(P[M][U.characterValue])||(typeof P[M]=="string"&&(P[M]={}),P[M][U.characterValue]=[]),P[M][U.characterValue].push(c[E[R].toTheConceptId])}catch(j){console.log("this is error",j)}}}return S=c[w],S})}},5328:(Y,x,y)=>{y.d(x,{d:()=>r});var N=y(5205),b=y(3130),n=y(8939),h=y(4287),k=function(e,o,l,f){return new(l||(l=Promise))(function(v,I){function i(c){try{t(f.next(c))}catch(w){I(w)}}function a(c){try{t(f.throw(c))}catch(w){I(w)}}function t(c){var w;c.done?v(c.value):(w=c.value,w instanceof l?w:new l(function(m){m(w)})).then(i,a)}t((f=f.apply(e,[])).next())})};class C extends h.w{constructor(o,l,f,v,I){super(),this.connections=[],this.data=[],this.mainConcept=o,this.linker=l,this.inpage=f,this.page=v,this.format=I}bind(){return k(this,void 0,void 0,function*(){var o;if(!this.isDataLoaded){let v=yield(0,N.GetTheConcept)(this.mainConcept),I=((o=v.type)===null||o===void 0?void 0:o.characterValue)+"_s_"+this.linker,i=yield(0,N.GetConceptByCharacterAndType)(I,16);if(i.id>0){let a=yield(0,N.GetConnectionOfTheConcept)(i.id,v.id,v.userId,this.inpage,this.page);this.connections=a;for(var l=[],f=0;f<this.connections.length;f++)l.push(this.connections[f].toTheConceptId),this.linkers.push(this.connections[f].id),this.listenToEvent(this.connections[f].toTheConceptId);yield(0,N.GetAllConnectionsOfCompositionBulk)(l)}this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return k(this,void 0,void 0,function*(){this.data=[],this.connections=yield(0,N.GetConnectionBulk)(this.linkers);for(var o=0;o<this.connections.length;o++){let l=this.connections[o].toTheConceptId,f=yield(0,N.GetTheConcept)(l);if(console.log("this is the format",this.format),this.format==b.yv){let v=yield(0,n.RW)(f.id);this.data.push(v)}else if(this.format==b.ZJ){let v=yield(0,n.kx)(f.id);this.data.push(v)}else if(this.format==b.iw){let v=yield(0,N.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}else{let v=yield(0,N.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}}return this.data})}}function r(e,o,l,f,v=b.yv){return new C(e,o,l,f,v)}},5457:(Y,x,y)=>{y.d(x,{c:()=>C});var N=y(5205),b=y(7282),n=y(205);class h{constructor(e,o){this.value=[],this.height=1,this.key=e,this.value.push(o),this.leftNode=null,this.rightNode=null,this.currentNode=null}addType(e,o,l){var f,v,I,i;if(e==null)return(0,N.dispatchIdEvent)(o,{detail:l}),new h(o,l);if(o<e.key)e.leftNode=this.addType(e.leftNode,o,l);else{if(!(o>e.key))return e.value.includes(l)||((0,N.dispatchIdEvent)(o,{detail:l}),e.value.push(l)),e;e.rightNode=this.addType(e.rightNode,o,l)}e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1;const a=this.getBalanceFactor(e);return a>1&&o<((f=e.leftNode)===null||f===void 0?void 0:f.key)?this.rightRotate(e):a<-1&&o>((v=e.rightNode)===null||v===void 0?void 0:v.key)?this.leftRotate(e):a>1&&o>((I=e.leftNode)===null||I===void 0?void 0:I.key)?(e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)):a<-1&&o<((i=e.rightNode)===null||i===void 0?void 0:i.key)?(e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)):e}rightRotate(e){if(e){let o=e.leftNode;if(o){let l=o.rightNode;return e.leftNode=l,o.rightNode=e,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(o.rightNode))+1,o}}return e}leftRotate(e){if(e){let o=e.rightNode;if(o){let l=o.leftNode;return o.leftNode=e,e.rightNode=l,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(e.rightNode))+1,o}}return e}getHeight(e){return e?e.height:0}getBalanceFactor(e){return e==null?0:this.getHeight(e.leftNode)-this.getHeight(e.rightNode)}getFromNode(e,o){return o&&(e==o.key?o:e<o.key?this.getFromNode(e,o.leftNode):e>o.key?this.getFromNode(e,o.rightNode):o)}removeNodeWithVariants(e,o,l){if(e==null)return e;if(e.key>o)return e.leftNode=this.removeNodeWithVariants(e.leftNode,o,l),e;if(e.key<o)return e.rightNode=this.removeNodeWithVariants(e.rightNode,o,l),e;if(e.value.length>0){for(let f=0;f<e.value.length;f++)if(l==e.value[f])return e.value.splice(f,1),e}if(e.leftNode==null){let f=e.rightNode;return e=null,f}if(e.rightNode==null){let f=e.leftNode;return e=null,f}{let f=this.inOrderSuccessor(e.rightNode);return e.value=f.value,e.key=f.key,e.currentNode=f.currentNode,e.rightNode=this.removeNodeWithVariants(e.rightNode,f.key,l),e}}countNodeBelow(e){return e==null?0:1+this.countNodeBelow(e.leftNode)+this.countNodeBelow(e.rightNode)}inOrderSuccessor(e){for(;e.leftNode!=null;)e=e.leftNode;return e}}var k=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function I(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(w){w(c)})).then(I,i)}a((l=l.apply(r,[])).next())})};class C{static addType(e){return k(this,void 0,void 0,function*(){return this.root==null?(this.root=e,new CustomEvent(`${e.key}`,{detail:e.value[0]}),(0,N.dispatchIdEvent)(e.key,{detail:e.value[0]}),this.root):(this.root=this.root.addType(this.root,e.key,e.value[0]),this.root)})}static addConceptToTree(e){if(e.typeId!=0){let o=new h(e.typeId,e.id);this.addType(o)}}static removeTypeConcept(e,o){this.root&&(this.root=this.root.removeNodeWithVariants(this.root,e,o))}static getNodeFromTreeNew(e){return this.root?this.root.getFromNode(e,this.root):this.root}static getTypeVariantsFromTreeNew(e){return k(this,void 0,void 0,function*(){let o=this.getNodeFromTreeNew(e),l=[],f=[];if(o){l=o.value;for(let v=0;v<l.length;v++){let I=!1;for(let i=0;i<f.length;i++)f[i].id==l[v]&&(I=!0);I||f.push(yield(0,N.GetTheConcept)(l[v]))}}return f})}static waitForDataToLoad(){return k(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isTypeLoaded)return e("done");setTimeout(C.checkFlag,1e3,e)}static getTypeVariantsFromTreeWithUserIdNew(e,o){return k(this,void 0,void 0,function*(){let l=[],f=yield this.getTypeVariantsFromTreeNew(e);console.log("these are all the concepts",f);for(let v=0;v<f.length;v++)f[v].userId==o&&l.push(f[v]);return l})}static getTypeVariantsWithCharacterValueNew(e,o){return k(this,void 0,void 0,function*(){let l=yield this.getTypeVariantsFromTreeNew(o);console.log("this is all the concepts for character",l);let f=(0,b.o)();for(let v=0;v<l.length;v++)l[v].characterValue==e&&(f=l[v]);return f})}static countNumberOfNodes(){return this.typeRoot?this.typeRoot.countNodeBelow(this.typeRoot):0}}C.typeRoot=null,C.root=null},5588:(Y,x,y)=>{x.__esModule=!0,x.default=void 0,x.unescapeValue=i;var N,b=C(y(8937)),n=C(y(5286)),h=C(y(3295)),k=y(1581);function C(w){return w&&w.__esModule?w:{default:w}}function r(w,m){for(var S=0;S<m.length;S++){var E=m[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}function e(w,m){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,E){return S.__proto__=E,S},e(w,m)}var o=y(4643),l=/^('|")([^]*)\1$/,f=o(function(){},"Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead."),v=o(function(){},"Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead."),I=o(function(){},"Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.");function i(w){var m=!1,S=null,E=w,L=E.match(l);return L&&(S=L[1],E=L[2]),(E=(0,n.default)(E))!==w&&(m=!0),{deprecatedUsage:m,unescaped:E,quoteMark:S}}var a=function(w){var m,S;function E(W){var U;return W===void 0&&(W={}),U=w.call(this,function(P){if(P.quoteMark!==void 0||P.value===void 0)return P;I();var M=i(P.value),j=M.quoteMark,J=M.unescaped;return P.raws||(P.raws={}),P.raws.value===void 0&&(P.raws.value=P.value),P.value=J,P.quoteMark=j,P}(W))||this,U.type=k.ATTRIBUTE,U.raws=U.raws||{},Object.defineProperty(U.raws,"unquoted",{get:o(function(){return U.value},"attr.raws.unquoted is deprecated. Call attr.value instead."),set:o(function(){return U.value},"Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.")}),U._constructed=!0,U}S=w,(m=E).prototype=Object.create(S.prototype),m.prototype.constructor=m,e(m,S);var L,R,D=E.prototype;return D.getQuotedValue=function(W){W===void 0&&(W={});var U=this._determineQuoteMark(W),P=t[U];return(0,b.default)(this._value,P)},D._determineQuoteMark=function(W){return W.smart?this.smartQuoteMark(W):this.preferredQuoteMark(W)},D.setValue=function(W,U){U===void 0&&(U={}),this._value=W,this._quoteMark=this._determineQuoteMark(U),this._syncRawValue()},D.smartQuoteMark=function(W){var U=this.value,P=U.replace(/[^']/g,"").length,M=U.replace(/[^"]/g,"").length;if(P+M===0){var j=(0,b.default)(U,{isIdentifier:!0});if(j===U)return E.NO_QUOTE;var J=this.preferredQuoteMark(W);if(J===E.NO_QUOTE){var Z=this.quoteMark||W.quoteMark||E.DOUBLE_QUOTE,K=t[Z];if((0,b.default)(U,K).length<j.length)return Z}return J}return M===P?this.preferredQuoteMark(W):M<P?E.DOUBLE_QUOTE:E.SINGLE_QUOTE},D.preferredQuoteMark=function(W){var U=W.preferCurrentQuoteMark?this.quoteMark:W.quoteMark;return U===void 0&&(U=W.preferCurrentQuoteMark?W.quoteMark:this.quoteMark),U===void 0&&(U=E.DOUBLE_QUOTE),U},D._syncRawValue=function(){var W=(0,b.default)(this._value,t[this.quoteMark]);W===this._value?this.raws&&delete this.raws.value:this.raws.value=W},D._handleEscapes=function(W,U){if(this._constructed){var P=(0,b.default)(U,{isIdentifier:!0});P!==U?this.raws[W]=P:delete this.raws[W]}},D._spacesFor=function(W){var U=this.spaces[W]||{},P=this.raws.spaces&&this.raws.spaces[W]||{};return Object.assign({before:"",after:""},U,P)},D._stringFor=function(W,U,P){U===void 0&&(U=W),P===void 0&&(P=c);var M=this._spacesFor(U);return P(this.stringifyProperty(W),M)},D.offsetOf=function(W){var U=1,P=this._spacesFor("attribute");if(U+=P.before.length,W==="namespace"||W==="ns")return this.namespace?U:-1;if(W==="attributeNS"||(U+=this.namespaceString.length,this.namespace&&(U+=1),W==="attribute"))return U;U+=this.stringifyProperty("attribute").length,U+=P.after.length;var M=this._spacesFor("operator");U+=M.before.length;var j=this.stringifyProperty("operator");if(W==="operator")return j?U:-1;U+=j.length,U+=M.after.length;var J=this._spacesFor("value");U+=J.before.length;var Z=this.stringifyProperty("value");return W==="value"?Z?U:-1:(U+=Z.length,U+=J.after.length,U+=this._spacesFor("insensitive").before.length,W==="insensitive"&&this.insensitive?U:-1)},D.toString=function(){var W=this,U=[this.rawSpaceBefore,"["];return U.push(this._stringFor("qualifiedAttribute","attribute")),this.operator&&(this.value||this.value==="")&&(U.push(this._stringFor("operator")),U.push(this._stringFor("value")),U.push(this._stringFor("insensitiveFlag","insensitive",function(P,M){return!(P.length>0)||W.quoted||M.before.length!==0||W.spaces.value&&W.spaces.value.after||(M.before=" "),c(P,M)}))),U.push("]"),U.push(this.rawSpaceAfter),U.join("")},L=E,(R=[{key:"quoted",get:function(){var W=this.quoteMark;return W==="'"||W==='"'},set:function(W){v()}},{key:"quoteMark",get:function(){return this._quoteMark},set:function(W){this._constructed?this._quoteMark!==W&&(this._quoteMark=W,this._syncRawValue()):this._quoteMark=W}},{key:"qualifiedAttribute",get:function(){return this.qualifiedName(this.raws.attribute||this.attribute)}},{key:"insensitiveFlag",get:function(){return this.insensitive?"i":""}},{key:"value",get:function(){return this._value},set:function(W){if(this._constructed){var U=i(W),P=U.deprecatedUsage,M=U.unescaped,j=U.quoteMark;if(P&&f(),M===this._value&&j===this._quoteMark)return;this._value=M,this._quoteMark=j,this._syncRawValue()}else this._value=W}},{key:"insensitive",get:function(){return this._insensitive},set:function(W){W||(this._insensitive=!1,!this.raws||this.raws.insensitiveFlag!=="I"&&this.raws.insensitiveFlag!=="i"||(this.raws.insensitiveFlag=void 0)),this._insensitive=W}},{key:"attribute",get:function(){return this._attribute},set:function(W){this._handleEscapes("attribute",W),this._attribute=W}}])&&r(L.prototype,R),Object.defineProperty(L,"prototype",{writable:!1}),E}(h.default);x.default=a,a.NO_QUOTE=null,a.SINGLE_QUOTE="'",a.DOUBLE_QUOTE='"';var t=((N={"'":{quotes:"single",wrap:!0},'"':{quotes:"double",wrap:!0}}).null={isIdentifier:!0},N);function c(w,m){return""+m.before+w+m.after}},5644:(Y,x,y)=>{let N,b,n=y(7793);class h extends n{constructor(C){super(C),this.type="root",this.nodes||(this.nodes=[])}normalize(C,r,e){let o=super.normalize(C);if(r){if(e==="prepend")this.nodes.length>1?r.raws.before=this.nodes[1].raws.before:delete r.raws.before;else if(this.first!==r)for(let l of o)l.raws.before=r.raws.before}return o}removeChild(C,r){let e=this.index(C);return!r&&e===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[e].raws.before),super.removeChild(C)}toResult(C={}){return new N(new b,this,C).stringify()}}h.registerLazyResult=k=>{N=k},h.registerProcessor=k=>{b=k},Y.exports=h,h.default=h,n.registerRoot(h)},5781:Y=>{const w=/[\t\n\f\r "#'()/;[\\\]{}]/g,m=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,S=/.[\r\n"'(/\\]/,E=/[\da-f]/i;Y.exports=function(L,R={}){let D,W,U,P,M,j,J,Z,K,se,$=L.css.valueOf(),ie=R.ignoreErrors,ue=$.length,ee=0,Q=[],te=[];function oe(H){throw L.error("Unclosed "+H,ee)}return{back:function(H){te.push(H)},endOfFile:function(){return te.length===0&&ee>=ue},nextToken:function(H){if(te.length)return te.pop();if(ee>=ue)return;let re=!!H&&H.ignoreUnclosed;switch(D=$.charCodeAt(ee),D){case 10:case 32:case 9:case 13:case 12:P=ee;do P+=1,D=$.charCodeAt(P);while(D===32||D===10||D===9||D===13||D===12);j=["space",$.slice(ee,P)],ee=P-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let le=String.fromCharCode(D);j=[le,le,ee];break}case 40:if(se=Q.length?Q.pop()[1]:"",K=$.charCodeAt(ee+1),se==="url"&&K!==39&&K!==34&&K!==32&&K!==10&&K!==9&&K!==12&&K!==13){P=ee;do{if(J=!1,P=$.indexOf(")",P+1),P===-1){if(ie||re){P=ee;break}oe("bracket")}for(Z=P;$.charCodeAt(Z-1)===92;)Z-=1,J=!J}while(J);j=["brackets",$.slice(ee,P+1),ee,P],ee=P}else P=$.indexOf(")",ee+1),W=$.slice(ee,P+1),P===-1||S.test(W)?j=["(","(",ee]:(j=["brackets",W,ee,P],ee=P);break;case 39:case 34:M=D===39?"'":'"',P=ee;do{if(J=!1,P=$.indexOf(M,P+1),P===-1){if(ie||re){P=ee+1;break}oe("string")}for(Z=P;$.charCodeAt(Z-1)===92;)Z-=1,J=!J}while(J);j=["string",$.slice(ee,P+1),ee,P],ee=P;break;case 64:w.lastIndex=ee+1,w.test($),P=w.lastIndex===0?$.length-1:w.lastIndex-2,j=["at-word",$.slice(ee,P+1),ee,P],ee=P;break;case 92:for(P=ee,U=!0;$.charCodeAt(P+1)===92;)P+=1,U=!U;if(D=$.charCodeAt(P+1),U&&D!==47&&D!==32&&D!==10&&D!==9&&D!==13&&D!==12&&(P+=1,E.test($.charAt(P)))){for(;E.test($.charAt(P+1));)P+=1;$.charCodeAt(P+1)===32&&(P+=1)}j=["word",$.slice(ee,P+1),ee,P],ee=P;break;default:D===47&&$.charCodeAt(ee+1)===42?(P=$.indexOf("*/",ee+2)+1,P===0&&(ie||re?P=$.length:oe("comment")),j=["comment",$.slice(ee,P+1),ee,P],ee=P):(m.lastIndex=ee+1,m.test($),P=m.lastIndex===0?$.length-1:m.lastIndex-2,j=["word",$.slice(ee,P+1),ee,P],Q.push(j),ee=P)}return ee++,j},position:function(){return ee}}}},5799:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function h(C,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(C,r)}var k=function(C){var r,e;function o(l){var f;return(f=C.call(this,l)||this).type=n.STRING,f}return e=C,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(b.default);x.default=k,Y.exports=x.default},5868:(Y,x,y)=>{y.d(x,{k:()=>r});var N=y(3077),b=y(8357),n=y(9736),h=y(5205),k=y(1863),C=function(e,o,l,f){return new(l||(l=Promise))(function(v,I){function i(c){try{t(f.next(c))}catch(w){I(w)}}function a(c){try{t(f.throw(c))}catch(w){I(w)}}function t(c){var w;c.done?v(c.value):(w=c.value,w instanceof l?w:new l(function(m){m(w)})).then(i,a)}t((f=f.apply(e,o||[])).next())})};function r(e,o){var l=arguments;return C(this,arguments,void 0,function*(f,v,I=!1,i,a,t=999,c=0,w={concepts:[],connections:[]}){var m,S,E,L;const R=h.Logger.logfunction("MakeTheInstanceConceptLocal",l)||{};if(h.serviceWorker){R.serviceWorker=!0;try{const D=yield(0,h.sendMessage)("MakeTheInstanceConceptLocal",{type:f,referent:v,composition:I,userId:i,accessId:a,sessionInformationId:t,referentId:c,actions:w});return!((S=(m=D?.actions)===null||m===void 0?void 0:m.concepts)===null||S===void 0)&&S.length&&(w.concepts=JSON.parse(JSON.stringify(D.actions.concepts))),!((L=(E=D?.actions)===null||E===void 0?void 0:E.connections)===null||L===void 0)&&L.length&&(w.connections=JSON.parse(JSON.stringify(D.actions.connections))),h.Logger.logUpdate(R),D.data}catch(D){console.error("MakeTheInstanceConceptLocal error sw: ",D),(0,k.ey)(R,"MakeTheInstanceConceptLocal",D),(0,h.handleServiceWorkerException)(D)}}try{let D,W,U=999,P=4,M=i,j=4,J="",Z=v.length;if(J=f.startsWith("the_")?f:"the_"+f,I)D=yield(0,b.$)(f,U,i,i,w),W=yield(0,N.A)(v,f,i,P,D.id,j,!0,c,w);else if(Z>255)D=yield(0,b.$)(J,U,M,i,w),W=yield(0,N.A)(v,J,i,P,D.id,j,void 0,void 0,w);else{D=yield(0,b.$)(J,U,M,i,w);let K=yield n.v.GetConceptByCharacterAndTypeLocal(v,D.id);W=K,K.id==0&&K.userId==0&&(W=yield(0,N.A)(v,J,i,P,D.id,j,void 0,void 0,w))}return W.type=D,h.LocalSyncData.AddConcept(W),w.concepts.push(W),h.Logger.logUpdate(R),W}catch(D){throw(0,k.ey)(R,"MakeTheInstanceConceptLocal",D),D}})}},5976:(Y,x,y)=>{y.d(x,{p:()=>r,B:()=>C});var N=y(9581),b=y(3518),n=y(1863),h=y(5205),k=function(e,o,l,f){return new(l||(l=Promise))(function(v,I){function i(c){try{t(f.next(c))}catch(w){I(w)}}function a(c){try{t(f.throw(c))}catch(w){I(w)}}function t(c){var w;c.done?v(c.value):(w=c.value,w instanceof l?w:new l(function(m){m(w)})).then(i,a)}t((f=f.apply(e,[])).next())})};class C{static getId(){return k(this,void 0,void 0,function*(){this.ids.length<5&&(yield function(){var l,f,v,I,i=arguments;return l=this,f=void 0,I=function*(){const a=h.Logger.logfunction("GetReservedIds",i);try{let t=(0,b.Xr)("application/x-www-form-urlencoded");const c=yield fetch(N.B.GetReservedIdUrl(),{method:"GET",headers:t});if(!c.ok)throw(0,n.ry)(c),new Error(`Error! status: ${c.status}`);const w=yield c.json();for(let m=0;m<w.length;m++)C.AddId(w[m]);h.Logger.logUpdate(a)}catch(t){t instanceof Error?console.log("get reserved ids error message: ",t.message):console.log("get reserved ids  unexpected error: ",t),(0,n.Mb)(t,N.B.GetReservedIdUrl()),(0,n.ey)(a,"GetReservedIds",t)}},new((v=void 0)||(v=Promise))(function(a,t){function c(S){try{m(I.next(S))}catch(E){t(E)}}function w(S){try{m(I.throw(S))}catch(E){t(E)}}function m(S){var E;S.done?a(S.value):(E=S.value,E instanceof v?E:new v(function(L){L(E)})).then(c,w)}m((I=I.apply(l,f||[])).next())})}());var o=this.ids[0];return this.ids.shift(),o})}static AddId(o){this.ids.includes(o)||this.ids.push(o)}}C.ids=[];class r{static getId(){return k(this,void 0,void 0,function*(){this.connectionIds.length<5&&(yield function(){var l,f,v,I,i=arguments;return l=this,f=void 0,I=function*(){const a=h.Logger.logfunction("GetReservedConnectionIds",i);try{let t=(0,b.Xr)("application/x-www-form-urlencoded");const c=yield fetch(N.B.GetReservedConnectionIdUrl(),{method:"GET",headers:t});if(!c.ok)throw(0,n.ry)(c),new Error(`Error! status: ${c.status}`);const w=yield c.json();for(let m=0;m<w.length;m++)r.AddId(w[m]);h.Logger.logUpdate(a)}catch(t){t instanceof Error?console.log("get reserved connection ids error message: ",t.message):console.log("get reserved connection ids  unexpected error: ",t),(0,n.Mb)(t,N.B.GetReservedConnectionIdUrl()),(0,n.ey)(a,"GetReservedConnectionIds",t)}},new((v=void 0)||(v=Promise))(function(a,t){function c(S){try{m(I.next(S))}catch(E){t(E)}}function w(S){try{m(I.throw(S))}catch(E){t(E)}}function m(S){var E;S.done?a(S.value):(E=S.value,E instanceof v?E:new v(function(L){L(E)})).then(c,w)}m((I=I.apply(l,f||[])).next())})}());var o=this.connectionIds[0];return this.connectionIds.shift(),o})}static AddId(o){this.connectionIds.includes(o)||this.connectionIds.push(o)}}r.connectionIds=[]},6058:(Y,x,y)=>{y.d(x,{W:()=>k});var N=y(1863),b=y(3518),n=y(5205),h=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,[])).next())})};function k(C){var r=arguments;return h(this,void 0,void 0,function*(){const e=n.Logger.logfunction("GetAllLinkerConnectionsToTheConcept",r);var o=[];try{new Date().getTime();var l=(0,b.Xr)("application/x-www-form-urlencoded");const I=yield fetch(n.BaseUrl.GetAllLinkerConnectionToConceptUrl()+`?conceptId=${C}`,{method:"GET",headers:l});if(I.ok){const i=yield I.json();for(var f=0;f<i.length;f++){var v=i[f];o.push(v)}n.Logger.logUpdate(e)}else console.log("Get all linker connection To the concepts error","cannot get respone"),(0,N.ry)(I)}catch(I){I instanceof Error?console.log("Get all linker connection To the concepts error: ",I.message):console.log("Get all linker connection To the concepts error(Unexpected): ",I),(0,N.Mb)(I,n.BaseUrl.GetAllLinkerConnectionToConceptUrl()),(0,N.ey)(e,"GetAllLinkerConnectionsToTheConcept",I)}return o})}},6156:Y=>{let x={};Y.exports=function(y){x[y]||(x[y]=!0,typeof console<"u"&&console.warn&&console.warn(y))}},6291:(Y,x)=>{x.__esModule=!0,x.default=function(y){for(var N=arguments.length,b=new Array(N>1?N-1:0),n=1;n<N;n++)b[n-1]=arguments[n];for(;b.length>0;){var h=b.shift();if(!y[h])return;y=y[h]}return y},Y.exports=x.default},6416:(Y,x,y)=>{y.d(x,{u:()=>b});var N=y(2615);function b(){let n=new Date,h=new Date;return new N.j(0,0,0,0,0,"0",0,!1,n,h,"0")}},6467:(Y,x,y)=>{function N(b){const n=b.lastIndexOf("_");let h=[];return h=n>0?[b.substring(0,n),b.substring(n+1,b.length)]:[b],h}y.d(x,{f:()=>N})},6687:(Y,x,y)=>{y.d(x,{D:()=>m,MT:()=>w,Nt:()=>v,QL:()=>a,as:()=>I,cw:()=>o,dF:()=>e,hG:()=>i,km:()=>f,nr:()=>c,p8:()=>l,rv:()=>t});var N=y(8642),b=y(7467),n=y(5205),h=y(1863),k=y(5284),C=y(8939),r=function(S,E,L,R){return new(L||(L=Promise))(function(D,W){function U(j){try{M(R.next(j))}catch(J){W(J)}}function P(j){try{M(R.throw(j))}catch(J){W(J)}}function M(j){var J;j.done?D(j.value):(J=j.value,J instanceof L?J:new L(function(Z){Z(J)})).then(U,P)}M((R=R.apply(S,E||[])).next())})};function e(){return r(this,arguments,void 0,function*(S=[]){yield(0,N.Y)(S);let E=[];for(let L=0;L<S.length;L++){let R=yield(0,C.kx)(S[L]);E.push(R)}return E})}function o(){return r(this,arguments,void 0,function*(S=[]){yield(0,N.Y)(S);let E=[];for(let L=0;L<S.length;L++){let R=yield(0,C.RW)(S[L]);E.push(R)}return E})}function l(){return r(this,arguments,void 0,function*(S=[],E=[]){const L=n.Logger.logfunction("GetCompositionFromConnectionsWithDataId",[S])||{};if(n.serviceWorker){L.serviceWorker=!0;try{const D=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataId",{conceptIds:S,connectionIds:E});return n.Logger.logUpdate(L),D.data}catch(D){console.error("GetCompositionFromConnectionsWithDataId error sw: ",D),(0,h.ey)(L,"GetCompositionFromConnectionsWithDataId",D),(0,n.handleServiceWorkerException)(D)}}let R=[];for(let D=0;D<S.length;D++){let W=yield(0,C.RW)(S[D]);R.push(W)}return n.Logger.logUpdate(L),R})}function f(){var S=arguments;return r(this,arguments,void 0,function*(E=[],L=[]){const R=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdFromConnections",S)||{};if(n.serviceWorker){R.serviceWorker=!0;try{const U=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdFromConnections",{conceptIds:E,connectionIds:L});return n.Logger.logUpdate(R),U.data}catch(U){console.error("GetCompositionFromConnectionsWithDataIdFromConnections error sw: ",U),(0,h.ey)(R,"GetCompositionFromConnectionsWithDataIdFromConnections",U),(0,n.handleServiceWorkerException)(U)}}let D=yield(0,b.j)(L),W=[];for(let U=0;U<E.length;U++){let P=yield(0,C.PT)(E[U],D);W.push(P)}return n.Logger.logUpdate(R),W})}function v(){var S=arguments;return r(this,arguments,void 0,function*(E=[],L=[]){const R=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdIndex",S)||{};if(n.serviceWorker){R.serviceWorker=!0;try{const W=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdIndex",{conceptIds:E,connectionIds:L});return n.Logger.logUpdate(R),W.data}catch(W){console.error("GetCompositionFromConnectionsWithDataIdIndex error sw: ",W),(0,h.ey)(R,"GetCompositionFromConnectionsWithDataIdIndex",W),(0,n.handleServiceWorkerException)(W)}}yield(0,b.j)(L),yield(0,k.B)(E);let D={};for(let W=0;W<E.length;W++){let U=yield(0,C.RW)(E[W]);D[E[W]]=U}return n.Logger.logUpdate(R),D})}function I(){return r(this,arguments,void 0,function*(S=[],E=[]){yield(0,b.j)(E),yield(0,k.B)(S);let L={};for(let R=0;R<S.length;R++){let D=yield(0,C.kx)(S[R]);L[S[R]]=D}return L})}function i(){return r(this,arguments,void 0,function*(S=[],E=[]){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetCompositionFromConnectionsWithIndexFromConnections",{conceptIds:S,connectionIds:E})).data}catch(D){console.error("GetCompositionFromConnectionsWithIndexFromConnections error sw: ",D),(0,n.handleServiceWorkerException)(D)}let L=yield(0,b.j)(E),R=[];for(let D=0;D<S.length;D++){let W=yield(0,C.JA)(S[D],L);R[S[D]]=W}return R})}function a(S){var E=arguments;return r(this,void 0,void 0,function*(){const L=n.Logger.logfunction("GetConnectionDataPrefetch",E)||{};if(n.serviceWorker){L.serviceWorker=!0;try{const M=yield(0,n.sendMessage)("GetConnectionDataPrefetch",{connectionIds:S});return n.Logger.logUpdate(L),M.data}catch(M){console.error("GetConnectionDataPrefetch error sw: ",M),(0,h.ey)(L,"GetConnectionDataPrefetch",M),(0,n.handleServiceWorkerException)(M)}}let R=[],D=[],W={};for(let M=0;M<S.length;M++){let j=yield n.ConnectionData.GetConnection(S[M]);j.id==0?R.push(S[M]):D.push(j)}for(let M=0;M<R.length;M++)W[S[M]]=!1;let U=[],P=yield(0,b.j)(R);D=[...D,...P];for(let M=0;M<D.length;M++)U.push(D[M].ofTheConceptId),U.push(D[M].toTheConceptId),U.push(D[M].typeId);return yield(0,n.GetConceptBulk)(U),n.Logger.logUpdate(L),D})}function t(){var S=arguments;return r(this,arguments,void 0,function*(E=[],L=[]){const R=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdInObject",S);yield(0,b.j)(L);let D={};for(let W=0;W<E.length;W++){let U=yield(0,C.RW)(E[W]);D[E[W]]=U}return n.Logger.logUpdate(R),D})}function c(){return r(this,arguments,void 0,function*(S=[],E=[]){yield(0,b.j)(E);let L={};for(let R=0;R<S.length;R++){let D=yield(0,C.$N)(S[R]);L[S[R]]=D}return L})}function w(){return r(this,arguments,void 0,function*(S=[],E=[]){yield(0,b.j)(E);let L={};for(let R=0;R<S.length;R++){let D=yield(0,C.kx)(S[R]);L[S[R]]=D}return L})}function m(){return r(this,arguments,void 0,function*(S=[],E=[]){yield(0,b.j)(E);let L={};for(let R=0;R<S.length;R++){let D=yield(0,C.XI)(S[R]);L[S[R]]=D,console.log("this is the normal data",S[R],D)}return L})}},6731:(Y,x,y)=>{y.d(x,{b:()=>N});class N{constructor(n,h,k,C){this.variants=[],this.height=1,this.key=n,this.value=h,this.leftNode=k,this.rightNode=C,this.currentNode=null}addCurrentNode(n,h){return h==null?h=n:(n.value.typeId!=h.value.typeId&&(h.currentNode=this.addCurrentNode(n,h.currentNode)),h)}addCurrentNodeType(n,h){if(h==null)return n;let k=!1;for(let C=0;C<h.variants.length;C++)h.variants[C].value.id==n.value.id&&(k=!0);return k||h.variants.push(n),h}addNode(n,h,k){if(h==null)return n;let C=h.leftNode,r=h.rightNode;if(h.key>n.key)h.leftNode=this.addNode(n,C,k);else{if(!(h.key<n.key))return h;h.rightNode=this.addNode(n,r,k)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}return h}checkIfIdsInNode(n,h,k,C){if(n){if(h.includes(n.key)){k.push(n.value);let r=h.indexOf(n.key);h.splice(r,1)}n.leftNode&&this.checkIfIdsInNode(n.leftNode,h,k,C),n.rightNode&&this.checkIfIdsInNode(n.rightNode,h,k,C)}}addCharacterNode(n,h,k){if(n.value.characterValue!=""){if(h==null)return n;let C=h.leftNode,r=h.rightNode;if(h.key>n.key)h.leftNode=this.addCharacterNode(n,C,k);else{if(!(h.key<n.key))return h.key==n.key&&h.key!=""&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),h;h.rightNode=this.addCharacterNode(n,r,k)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}addTypeNode(n,h,k){if(n.value.typeId!=0){if(h==null)return console.log("adding the type node to the tree",n),n;let C=h.leftNode,r=h.rightNode;if(h.key>n.key)h.leftNode=this.addTypeNode(n,C,k);else{if(!(h.key<n.key))return console.log("adding the type node to the tree down",n),h.key==n.key&&h.key!=0&&h.value.id!=n.value.id&&h.addCurrentNodeType(n,h),console.log("adding the type node to the tree last",h),h;h.rightNode=this.addTypeNode(n,r,k)}h.height=1+Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode));let e=this.getBalanceFactor(h);if(e>1&&h.leftNode){if(n.key<h.leftNode.key)return this.rightRotate(h);if(n.key>h.leftNode.key)return h.leftNode=this.leftRotate(h.leftNode),this.rightRotate(h)}if(e<-1&&h.rightNode){if(n.key>h.rightNode.key)return this.leftRotate(h);if(n.key<h.rightNode.key)return h.rightNode=this.rightRotate(h.rightNode),this.leftRotate(h)}}return h}rightRotate(n){if(n){let h=n.leftNode;if(h){let k=h.rightNode;return n.leftNode=k,h.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(h.rightNode))+1,h}}return n}leftRotate(n){if(n){let h=n.rightNode;if(h){let k=h.leftNode;return h.leftNode=n,n.rightNode=k,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,h.height=Math.max(this.getHeight(h.leftNode),this.getHeight(n.rightNode))+1,h}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return n==null?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getFromNode(n,h.leftNode):n>h.key?this.getFromNode(n,h.rightNode):h)}getCharacterFromNode(n,h){return h&&(n==h.key?h:n<h.key?this.getCharacterFromNode(n,h.leftNode):n>h.key?this.getCharacterFromNode(n,h.rightNode):h)}getCharacterFromNodeUpdated(n,h){var k;return h&&(n==h.key||((k=h.value)===null||k===void 0?void 0:k.typeId)==51?h:n<h.key?this.getCharacterFromNode(n,h.leftNode):n>h.key?this.getCharacterFromNode(n,h.rightNode):h)}getFromNodeWithCharacterAndType(n,h,k){if(n=`${n}`,k){if(n==k.key){if(n==k.value.characterValue&&h==k.value.typeId)return k;for(let C=0;C<k.variants.length;C++)if(k.variants[C].value.typeId==h)return k.variants[C]}else{if(n<k.key)return this.getFromNodeWithCharacterAndType(n,h,k.leftNode);if(n>k.key)return this.getFromNodeWithCharacterAndType(n,h,k.rightNode)}return null}return k}getFromNodeWithCharacterAndCategory(n,h,k){if(n=`${n}`,k){if(n==k.key){if(n==k.value.characterValue&&h==k.value.categoryId)return k;for(let C=0;C<k.variants.length;C++)if(k.variants[C].value.categoryId==h)return k.variants[C]}else{if(n<k.key)return this.getFromNodeWithCharacterAndCategory(n,h,k.leftNode);if(n>k.key)return this.getFromNodeWithCharacterAndCategory(n,h,k.rightNode)}return null}return k}removeNode(n,h){if(n==null)return n;if(n.key>h)return n.leftNode=this.removeNode(n.leftNode,h),n;if(n.key<h)return n.rightNode=this.removeNode(n.rightNode,h),n;if(n.leftNode==null){let k=n.rightNode;return n=null,k}if(n.rightNode==null){let k=n.leftNode;return n=null,k}{let k=this.inOrderSuccessor(n.rightNode);return n.value=k.value,n.key=k.key,n.variants=k.variants,n.currentNode=k.currentNode,n.rightNode=this.removeNode(n.rightNode,k.key),n}}removeNodeWithVariants(n,h,k){if(n==null)return n;if(n.key>h)return n.leftNode=this.removeNodeWithVariants(n.leftNode,h,k),n;if(n.key<h)return n.rightNode=this.removeNodeWithVariants(n.rightNode,h,k),n;if(n.variants.length>0){if(n.value.id==k){let C=n.variants[0];if(C)return n.value=C.value,n.key=C.key,n.currentNode=C.currentNode,n.variants.splice(0,1),n}else for(let C=0;C<n.variants.length;C++)if(k==n.variants[C].value.id)return n.variants.splice(C,1),n}if(n.leftNode==null){let C=n.rightNode;return n=null,C}if(n.rightNode==null){let C=n.leftNode;return n=null,C}{let C=this.inOrderSuccessor(n.rightNode);return n.value=C.value,n.key=C.key,n.variants=C.variants,n.currentNode=C.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,C.key,k),n}}countNodeBelow(n){return n==null?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;n.leftNode!=null;)n=n.leftNode;return n}}},6846:(Y,x,y)=>{let N=y(145),b=y(6966),n=y(4211),h=y(5644);class k{constructor(r=[]){this.version="8.5.6",this.plugins=this.normalize(r)}normalize(r){let e=[];for(let o of r)if(o.postcss===!0?o=o():o.postcss&&(o=o.postcss),typeof o=="object"&&Array.isArray(o.plugins))e=e.concat(o.plugins);else if(typeof o=="object"&&o.postcssPlugin)e.push(o);else if(typeof o=="function")e.push(o);else if(typeof o!="object"||!o.parse&&!o.stringify)throw new Error(o+" is not a PostCSS plugin");return e}process(r,e={}){return this.plugins.length||e.parser||e.stringifier||e.syntax?new b(this,r,e):new n(this,r,e)}use(r){return this.plugins=this.plugins.concat(this.normalize([r])),this}}Y.exports=k,k.default=k,h.registerProcessor(k),N.registerProcessor(k)},6915:(Y,x,y)=>{function N(b,n="DESC"){return n=="ASC"?b.sort(function(h,k){return h.id-k.id}):b.sort(function(h,k){return k.id-h.id}),b}y.d(x,{X:()=>N})},6963:(Y,x,y)=>{y.d(x,{f:()=>h});var N=y(205),b=y(6731),n=function(k,C,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{I(e.next(i))}catch(a){l(a)}}function v(i){try{I(e.throw(i))}catch(a){l(a)}}function I(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}I((e=e.apply(k,[])).next())})};class h{static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((C,r)=>{this.checkFlag(C),setTimeout(()=>{r("not")},25e3)})})}static checkFlag(C){if(N.B.isCharacterLoaded)return C("done");setTimeout(h.checkFlag,1e3,C)}static addNodeToTree(C){return n(this,void 0,void 0,function*(){return this.characterRoot==null?(this.characterRoot=C,this.characterRoot):(this.characterRoot=this.characterRoot.addCharacterNode(C,this.characterRoot,this.characterRoot.height),this.characterRoot)})}static removeNodeByCharacter(C,r){return n(this,void 0,void 0,function*(){this.characterRoot&&this.characterRoot.removeNodeWithVariants(this.characterRoot,C,r)})}static countNumberOfNodes(){return this.characterRoot?this.characterRoot.countNodeBelow(this.characterRoot):0}static addConceptToTree(C){if(C.characterValue!=""){var r=new b.b(C.characterValue,C,null,null);this.addNodeToTree(r)}}static getNodeFromTree(C){return this.characterRoot?this.characterRoot.getCharacterFromNode(C,this.characterRoot):this.characterRoot}static getNodeFromTreeUpdated(C){return this.characterRoot?this.characterRoot.getCharacterFromNode(C,this.characterRoot):this.characterRoot}static getCharacterAndTypeFromTree(C,r){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndType(C,r,this.characterRoot):this.characterRoot})}static getCharacterAndCategoryFromTree(C,r){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndCategory(C,r,this.characterRoot):this.characterRoot})}static removeConceptCharacter(C){this.characterRoot&&(this.characterRoot=this.characterRoot.removeNode(this.characterRoot,C))}}h.characterRoot=null},6966:(Y,x,y)=>{let N=y(7793),b=y(145),n=y(3604),h=y(9577),k=y(3717),C=y(5644),r=y(3303),{isClean:e,my:o}=y(4151);y(6156);const l={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},f={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},v={Once:!0,postcssPlugin:!0,prepare:!0};function I(m){return typeof m=="object"&&typeof m.then=="function"}function i(m){let S=!1,E=l[m.type];return m.type==="decl"?S=m.prop.toLowerCase():m.type==="atrule"&&(S=m.name.toLowerCase()),S&&m.append?[E,E+"-"+S,0,E+"Exit",E+"Exit-"+S]:S?[E,E+"-"+S,E+"Exit",E+"Exit-"+S]:m.append?[E,0,E+"Exit"]:[E,E+"Exit"]}function a(m){let S;return S=m.type==="document"?["Document",0,"DocumentExit"]:m.type==="root"?["Root",0,"RootExit"]:i(m),{eventIndex:0,events:S,iterator:0,node:m,visitorIndex:0,visitors:[]}}function t(m){return m[e]=!1,m.nodes&&m.nodes.forEach(S=>t(S)),m}let c={};class w{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(S,E,L){let R;if(this.stringified=!1,this.processed=!1,typeof E!="object"||E===null||E.type!=="root"&&E.type!=="document")if(E instanceof w||E instanceof k)R=t(E.root),E.map&&(L.map===void 0&&(L.map={}),L.map.inline||(L.map.inline=!1),L.map.prev=E.map);else{let D=h;L.syntax&&(D=L.syntax.parse),L.parser&&(D=L.parser),D.parse&&(D=D.parse);try{R=D(E,L)}catch(W){this.processed=!0,this.error=W}R&&!R[o]&&N.rebuild(R)}else R=t(E);this.result=new k(S,R,L),this.helpers={...c,postcss:c,result:this.result},this.plugins=this.processor.plugins.map(D=>typeof D=="object"&&D.prepare?{...D,...D.prepare(this.result)}:D)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(S){return this.async().catch(S)}finally(S){return this.async().then(S,S)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(S,E){let L=this.result.lastPlugin;try{E&&E.addToError(S),this.error=S,S.name!=="CssSyntaxError"||S.plugin?L.postcssVersion:(S.plugin=L.postcssPlugin,S.setMessage())}catch(R){console&&console.error&&console.error(R)}return S}prepareVisitors(){this.listeners={};let S=(E,L,R)=>{this.listeners[L]||(this.listeners[L]=[]),this.listeners[L].push([E,R])};for(let E of this.plugins)if(typeof E=="object")for(let L in E){if(!f[L]&&/^[A-Z]/.test(L))throw new Error(`Unknown event ${L} in ${E.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!v[L])if(typeof E[L]=="object")for(let R in E[L])S(E,R==="*"?L:L+"-"+R.toLowerCase(),E[L][R]);else typeof E[L]=="function"&&S(E,L,E[L])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let S=0;S<this.plugins.length;S++){let E=this.plugins[S],L=this.runOnRoot(E);if(I(L))try{await L}catch(R){throw this.handleError(R)}}if(this.prepareVisitors(),this.hasListener){let S=this.result.root;for(;!S[e];){S[e]=!0;let E=[a(S)];for(;E.length>0;){let L=this.visitTick(E);if(I(L))try{await L}catch(R){let D=E[E.length-1].node;throw this.handleError(R,D)}}}if(this.listeners.OnceExit)for(let[E,L]of this.listeners.OnceExit){this.result.lastPlugin=E;try{if(S.type==="document"){let R=S.nodes.map(D=>L(D,this.helpers));await Promise.all(R)}else await L(S,this.helpers)}catch(R){throw this.handleError(R)}}}return this.processed=!0,this.stringify()}runOnRoot(S){this.result.lastPlugin=S;try{if(typeof S=="object"&&S.Once){if(this.result.root.type==="document"){let E=this.result.root.nodes.map(L=>S.Once(L,this.helpers));return I(E[0])?Promise.all(E):E}return S.Once(this.result.root,this.helpers)}if(typeof S=="function")return S(this.result.root,this.result)}catch(E){throw this.handleError(E)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let S=this.result.opts,E=r;S.syntax&&(E=S.syntax.stringify),S.stringifier&&(E=S.stringifier),E.stringify&&(E=E.stringify);let L=new n(E,this.result.root,this.result.opts).generate();return this.result.css=L[0],this.result.map=L[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let S of this.plugins)if(I(this.runOnRoot(S)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let S=this.result.root;for(;!S[e];)S[e]=!0,this.walkSync(S);if(this.listeners.OnceExit)if(S.type==="document")for(let E of S.nodes)this.visitSync(this.listeners.OnceExit,E);else this.visitSync(this.listeners.OnceExit,S)}return this.result}then(S,E){return this.async().then(S,E)}toString(){return this.css}visitSync(S,E){for(let[L,R]of S){let D;this.result.lastPlugin=L;try{D=R(E,this.helpers)}catch(W){throw this.handleError(W,E.proxyOf)}if(E.type!=="root"&&E.type!=="document"&&!E.parent)return!0;if(I(D))throw this.getAsyncError()}}visitTick(S){let E=S[S.length-1],{node:L,visitors:R}=E;if(L.type!=="root"&&L.type!=="document"&&!L.parent)return void S.pop();if(R.length>0&&E.visitorIndex<R.length){let[W,U]=R[E.visitorIndex];E.visitorIndex+=1,E.visitorIndex===R.length&&(E.visitors=[],E.visitorIndex=0),this.result.lastPlugin=W;try{return U(L.toProxy(),this.helpers)}catch(P){throw this.handleError(P,L)}}if(E.iterator!==0){let W,U=E.iterator;for(;W=L.nodes[L.indexes[U]];)if(L.indexes[U]+=1,!W[e])return W[e]=!0,void S.push(a(W));E.iterator=0,delete L.indexes[U]}let D=E.events;for(;E.eventIndex<D.length;){let W=D[E.eventIndex];if(E.eventIndex+=1,W===0)return void(L.nodes&&L.nodes.length&&(L[e]=!0,E.iterator=L.getIterator()));if(this.listeners[W])return void(E.visitors=this.listeners[W])}S.pop()}walkSync(S){S[e]=!0;let E=i(S);for(let L of E)if(L===0)S.nodes&&S.each(R=>{R[e]||this.walkSync(R)});else{let R=this.listeners[L];if(R&&this.visitSync(R,S.toProxy()))return}}warnings(){return this.sync().warnings()}}w.registerPostcss=m=>{c=m},Y.exports=w,w.default=w,C.registerLazyResult(w),b.registerLazyResult(w)},7071:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function h(C,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(C,r)}var k=function(C){var r,e;function o(l){var f;return(f=C.call(this,l)||this).type=n.ID,f}return e=C,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o.prototype.valueToString=function(){return"#"+C.prototype.valueToString.call(this)},o}(b.default);x.default=k,Y.exports=x.default},7139:(Y,x,y)=>{y.d(x,{r:()=>e});var N=y(3026),b=y(9581),n=y(5205),h=y(1863),k=y(1596),C=y(3278),r=function(o,l,f,v){return new(f||(f=Promise))(function(I,i){function a(w){try{c(v.next(w))}catch(m){i(m)}}function t(w){try{c(v.throw(w))}catch(m){i(m)}}function c(w){var m;w.done?I(w.value):(m=w.value,m instanceof f?m:new f(function(S){S(m)})).then(a,t)}c((v=v.apply(o,[])).next())})};function e(o){var l=arguments;return r(this,void 0,void 0,function*(){const f=n.Logger.logfunction("GetConcept",l)||{};let v=(0,n.CreateDefaultConcept)();const I=new FormData;I.append("id",o.toString());try{if(n.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,n.sendMessage)("GetConcept",{id:o});return n.Logger.logUpdate(f),t.data}catch(t){console.error("GetConcept sw error: ",t),(0,h.ey)(f,"GetConcept",t),(0,n.handleServiceWorkerException)(t)}}if(o==0||o==null||o==null)return v;var i=yield N.I.GetConcept(o);let a=N.I.GetNpc(o);if(i.id!=0||a)return n.Logger.logUpdate(f),i;{let t;const c={method:"POST",body:I,headers:{Authorization:"Bearer "+C.b.BearerAccessToken}};try{console.log("this is the url",b.B.GetConceptUrl()),t=yield fetch(b.B.GetConceptUrl(),c)}catch{t=yield(0,k.g)(c,"/api/getConcept")}return yield function(w,m,S,E){return r(this,void 0,void 0,function*(){return w.ok?(m=yield w.json()).id>0?N.I.AddConcept(m):N.I.AddNpc(E):(console.log("Get the concept error",w.status),(0,h.ry)(w)),n.Logger.logUpdate(S),m})}(t,v,f,o)}}catch(a){a instanceof Error?console.log("Get the concept error message: ",a.message):console.log("Get the concept unexpected error: ",a),(0,h.Mb)(a,b.B.GetConceptUrl()),(0,h.ey)(f,"GetConcept",a)}})}},7149:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(8349))&&N.__esModule?N:{default:N},n=function(r,e){if(r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var o=h(e);if(o&&o.has(r))return o.get(r);var l={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in r)if(v!=="default"&&Object.prototype.hasOwnProperty.call(r,v)){var I=f?Object.getOwnPropertyDescriptor(r,v):null;I&&(I.get||I.set)?Object.defineProperty(l,v,I):l[v]=r[v]}return l.default=r,o&&o.set(r,l),l}(y(680));function h(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,o=new WeakMap;return(h=function(l){return l?o:e})(r)}var k=function(r){return new b.default(r)};Object.assign(k,n),delete k.__esModule;var C=k;x.default=C,Y.exports=x.default},7273:(Y,x,y)=>{y.d(x,{z:()=>b});var N=y(9581);class b{constructor(h,k,C,r){this.url=N.B.BASE_URL,this.message=h,this.ok=k,this.status=C,this.data=r}getMessage(){return this.message}setMessage(h){return this.message=h,this}getStatus(){return this.status}setStatus(h){return this.status=h,this}getData(){return this.data}setData(h){return this.data=h,this}getOk(){return this.ok}setOk(h){return this.ok=h,this}getUrl(){return this.url}setUrl(h){return this.url=h,this}}},7282:(Y,x,y)=>{y.d(x,{Y:()=>n,o:()=>b});var N=y(2615);function b(){let h=n(new Date),k=n(new Date);return new N.j(0,0,0,0,0,"0",0,!1,h,k,"0")}function n(h){const k=h.getMonth()+1,C=h.getDate(),r=h.getFullYear();let e=h.getHours();const o=h.getMinutes(),l=h.getSeconds(),f=e>=12?"PM":"AM";e%=12,e=e||12;const v=I=>I.toString().padStart(2,"0");return`${k}/${C}/${r} ${e}:${v(o)}:${v(l)} ${f}`}},7324:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(3631))&&N.__esModule?N:{default:N},n=y(1581);function h(C,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(C,r)}var k=function(C){var r,e;function o(l){var f;return(f=C.call(this,l)||this).type=n.PSEUDO,f}return e=C,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o.prototype.toString=function(){var l=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),l,this.rawSpaceAfter].join("")},o}(b.default);x.default=k,Y.exports=x.default},7467:(Y,x,y)=>{y.d(x,{j:()=>o});var N=y(8286),b=y(9581),n=y(4364),h=y(3518),k=y(1863),C=y(5205),r=y(1596),e=function(l,f,v,I){return new(v||(v=Promise))(function(i,a){function t(m){try{w(I.next(m))}catch(S){a(S)}}function c(m){try{w(I.throw(m))}catch(S){a(S)}}function w(m){var S;m.done?i(m.value):(S=m.value,S instanceof v?S:new v(function(E){E(S)})).then(t,c)}w((I=I.apply(l,f||[])).next())})};function o(){return e(this,arguments,void 0,function*(l=[]){const f=C.Logger.logfunction("GetConnectionBulk",l.length)||{};let v=[];try{if(C.serviceWorker){f.serviceWorker=!0;try{const I=yield(0,C.sendMessage)("GetConnectionBulk",{connectionIds:l});return C.Logger.logUpdate(f),I.data}catch(I){console.error("GetConnectionBulk sw error: ",I),(0,k.ey)(f,"GetConnectionBulk",I),(0,C.handleServiceWorkerException)(I)}}if(l.length>0){let I=[];for(let i=0;i<l.length;i++)if(!N.d.GetNpConn(l[i])){let a=yield N.d.GetConnection(l[i]);a.id==0?I.push(l[i]):v.push(a)}if(I.length==0)return C.Logger.logUpdate(f),v;{let i;const a={method:"POST",headers:(0,h.Xr)(),body:JSON.stringify(I)};try{i=yield fetch(b.B.GetConnectionBulkUrl(),a)}catch{i=yield(0,r.g)(a,"/api/get_connection_bulk")}yield function(t,c,w){return e(this,void 0,void 0,function*(){if(t.ok){const m=yield t.json();if(m.length>0)for(let S=0;S<m.length;S++){let E=m[S];c.push(E),N.d.AddConnection(E)}}else(0,k.ey)(w,"GetConnectionBulk",t.status),(0,k.ry)(t),console.log("Get Connection Bulk error",t.status)})}(i,v,f),C.Logger.logUpdate(f)}}}catch(I){I instanceof Error?console.log("Get Connection Bulk error message: ",I):console.log("Get Connection Bulk unexpected error: ",I),(0,k.ey)(f,"GetConnectionBulk",I),(0,k.Mb)(I,b.B.GetConnectionBulkUrl())}return yield(0,n.s)(v),v})}},7668:Y=>{const x={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class y{constructor(b){this.builder=b}atrule(b,n){let h="@"+b.name,k=b.params?this.rawValue(b,"params"):"";if(b.raws.afterName!==void 0?h+=b.raws.afterName:k&&(h+=" "),b.nodes)this.block(b,h+k);else{let C=(b.raws.between||"")+(n?";":"");this.builder(h+k+C,b)}}beforeAfter(b,n){let h;h=b.type==="decl"?this.raw(b,null,"beforeDecl"):b.type==="comment"?this.raw(b,null,"beforeComment"):n==="before"?this.raw(b,null,"beforeRule"):this.raw(b,null,"beforeClose");let k=b.parent,C=0;for(;k&&k.type!=="root";)C+=1,k=k.parent;if(h.includes(`
`)){let r=this.raw(b,null,"indent");if(r.length)for(let e=0;e<C;e++)h+=r}return h}block(b,n){let h,k=this.raw(b,"between","beforeOpen");this.builder(n+k+"{",b,"start"),b.nodes&&b.nodes.length?(this.body(b),h=this.raw(b,"after")):h=this.raw(b,"after","emptyBody"),h&&this.builder(h),this.builder("}",b,"end")}body(b){let n=b.nodes.length-1;for(;n>0&&b.nodes[n].type==="comment";)n-=1;let h=this.raw(b,"semicolon");for(let k=0;k<b.nodes.length;k++){let C=b.nodes[k],r=this.raw(C,"before");r&&this.builder(r),this.stringify(C,n!==k||h)}}comment(b){let n=this.raw(b,"left","commentLeft"),h=this.raw(b,"right","commentRight");this.builder("/*"+n+b.text+h+"*/",b)}decl(b,n){let h=this.raw(b,"between","colon"),k=b.prop+h+this.rawValue(b,"value");b.important&&(k+=b.raws.important||" !important"),n&&(k+=";"),this.builder(k,b)}document(b){this.body(b)}raw(b,n,h){let k;if(h||(h=n),n&&(k=b.raws[n],k!==void 0))return k;let C=b.parent;if(h==="before"&&(!C||C.type==="root"&&C.first===b||C&&C.type==="document"))return"";if(!C)return x[h];let r=b.root();if(r.rawCache||(r.rawCache={}),r.rawCache[h]!==void 0)return r.rawCache[h];if(h==="before"||h==="after")return this.beforeAfter(b,h);{let o="raw"+((e=h)[0].toUpperCase()+e.slice(1));this[o]?k=this[o](r,b):r.walk(l=>{if(k=l.raws[n],k!==void 0)return!1})}var e;return k===void 0&&(k=x[h]),r.rawCache[h]=k,k}rawBeforeClose(b){let n;return b.walk(h=>{if(h.nodes&&h.nodes.length>0&&h.raws.after!==void 0)return n=h.raws.after,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeComment(b,n){let h;return b.walkComments(k=>{if(k.raws.before!==void 0)return h=k.raws.before,h.includes(`
`)&&(h=h.replace(/[^\n]+$/,"")),!1}),h===void 0?h=this.raw(n,null,"beforeDecl"):h&&(h=h.replace(/\S/g,"")),h}rawBeforeDecl(b,n){let h;return b.walkDecls(k=>{if(k.raws.before!==void 0)return h=k.raws.before,h.includes(`
`)&&(h=h.replace(/[^\n]+$/,"")),!1}),h===void 0?h=this.raw(n,null,"beforeRule"):h&&(h=h.replace(/\S/g,"")),h}rawBeforeOpen(b){let n;return b.walk(h=>{if(h.type!=="decl"&&(n=h.raws.between,n!==void 0))return!1}),n}rawBeforeRule(b){let n;return b.walk(h=>{if(h.nodes&&(h.parent!==b||b.first!==h)&&h.raws.before!==void 0)return n=h.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawColon(b){let n;return b.walkDecls(h=>{if(h.raws.between!==void 0)return n=h.raws.between.replace(/[^\s:]/g,""),!1}),n}rawEmptyBody(b){let n;return b.walk(h=>{if(h.nodes&&h.nodes.length===0&&(n=h.raws.after,n!==void 0))return!1}),n}rawIndent(b){if(b.raws.indent)return b.raws.indent;let n;return b.walk(h=>{let k=h.parent;if(k&&k!==b&&k.parent&&k.parent===b&&h.raws.before!==void 0){let C=h.raws.before.split(`
`);return n=C[C.length-1],n=n.replace(/\S/g,""),!1}}),n}rawSemicolon(b){let n;return b.walk(h=>{if(h.nodes&&h.nodes.length&&h.last.type==="decl"&&(n=h.raws.semicolon,n!==void 0))return!1}),n}rawValue(b,n){let h=b[n],k=b.raws[n];return k&&k.value===h?k.raw:h}root(b){this.body(b),b.raws.after&&this.builder(b.raws.after)}rule(b){this.block(b,this.rawValue(b,"selector")),b.raws.ownSemicolon&&this.builder(b.raws.ownSemicolon,b,"end")}stringify(b,n){if(!this[b.type])throw new Error("Unknown AST node type "+b.type+". Maybe you need to change PostCSS stringifier.");this[b.type](b,n)}}Y.exports=y,y.default=y},7793:(Y,x,y)=>{let N,b,n,h,k=y(9371),C=y(5238),r=y(3152),{isClean:e,my:o}=y(4151);function l(I){return I.map(i=>(i.nodes&&(i.nodes=l(i.nodes)),delete i.source,i))}function f(I){if(I[e]=!1,I.proxyOf.nodes)for(let i of I.proxyOf.nodes)f(i)}class v extends r{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...i){for(let a of i){let t=this.normalize(a,this.last);for(let c of t)this.proxyOf.nodes.push(c)}return this.markDirty(),this}cleanRaws(i){if(super.cleanRaws(i),this.nodes)for(let a of this.nodes)a.cleanRaws(i)}each(i){if(!this.proxyOf.nodes)return;let a,t,c=this.getIterator();for(;this.indexes[c]<this.proxyOf.nodes.length&&(a=this.indexes[c],t=i(this.proxyOf.nodes[a],a),t!==!1);)this.indexes[c]+=1;return delete this.indexes[c],t}every(i){return this.nodes.every(i)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let i=this.lastEach;return this.indexes[i]=0,i}getProxyProcessor(){return{get:(i,a)=>a==="proxyOf"?i:i[a]?a==="each"||typeof a=="string"&&a.startsWith("walk")?(...t)=>i[a](...t.map(c=>typeof c=="function"?(w,m)=>c(w.toProxy(),m):c)):a==="every"||a==="some"?t=>i[a]((c,...w)=>t(c.toProxy(),...w)):a==="root"?()=>i.root().toProxy():a==="nodes"?i.nodes.map(t=>t.toProxy()):a==="first"||a==="last"?i[a].toProxy():i[a]:i[a],set:(i,a,t)=>(i[a]===t||(i[a]=t,a!=="name"&&a!=="params"&&a!=="selector"||i.markDirty()),!0)}}index(i){return typeof i=="number"?i:(i.proxyOf&&(i=i.proxyOf),this.proxyOf.nodes.indexOf(i))}insertAfter(i,a){let t,c=this.index(i),w=this.normalize(a,this.proxyOf.nodes[c]).reverse();c=this.index(i);for(let m of w)this.proxyOf.nodes.splice(c+1,0,m);for(let m in this.indexes)t=this.indexes[m],c<t&&(this.indexes[m]=t+w.length);return this.markDirty(),this}insertBefore(i,a){let t,c=this.index(i),w=c===0&&"prepend",m=this.normalize(a,this.proxyOf.nodes[c],w).reverse();c=this.index(i);for(let S of m)this.proxyOf.nodes.splice(c,0,S);for(let S in this.indexes)t=this.indexes[S],c<=t&&(this.indexes[S]=t+m.length);return this.markDirty(),this}normalize(i,a){if(typeof i=="string")i=l(b(i).nodes);else if(i===void 0)i=[];else if(Array.isArray(i)){i=i.slice(0);for(let t of i)t.parent&&t.parent.removeChild(t,"ignore")}else if(i.type==="root"&&this.type!=="document"){i=i.nodes.slice(0);for(let t of i)t.parent&&t.parent.removeChild(t,"ignore")}else if(i.type)i=[i];else if(i.prop){if(i.value===void 0)throw new Error("Value field is missed in node creation");typeof i.value!="string"&&(i.value=String(i.value)),i=[new C(i)]}else if(i.selector||i.selectors)i=[new h(i)];else if(i.name)i=[new N(i)];else{if(!i.text)throw new Error("Unknown node type in node creation");i=[new k(i)]}return i.map(t=>(t[o]||v.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[e]&&f(t),t.raws||(t.raws={}),t.raws.before===void 0&&a&&a.raws.before!==void 0&&(t.raws.before=a.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...i){i=i.reverse();for(let a of i){let t=this.normalize(a,this.first,"prepend").reverse();for(let c of t)this.proxyOf.nodes.unshift(c);for(let c in this.indexes)this.indexes[c]=this.indexes[c]+t.length}return this.markDirty(),this}push(i){return i.parent=this,this.proxyOf.nodes.push(i),this}removeAll(){for(let i of this.proxyOf.nodes)i.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(i){let a;i=this.index(i),this.proxyOf.nodes[i].parent=void 0,this.proxyOf.nodes.splice(i,1);for(let t in this.indexes)a=this.indexes[t],a>=i&&(this.indexes[t]=a-1);return this.markDirty(),this}replaceValues(i,a,t){return t||(t=a,a={}),this.walkDecls(c=>{a.props&&!a.props.includes(c.prop)||a.fast&&!c.value.includes(a.fast)||(c.value=c.value.replace(i,t))}),this.markDirty(),this}some(i){return this.nodes.some(i)}walk(i){return this.each((a,t)=>{let c;try{c=i(a,t)}catch(w){throw a.addToError(w)}return c!==!1&&a.walk&&(c=a.walk(i)),c})}walkAtRules(i,a){return a?i instanceof RegExp?this.walk((t,c)=>{if(t.type==="atrule"&&i.test(t.name))return a(t,c)}):this.walk((t,c)=>{if(t.type==="atrule"&&t.name===i)return a(t,c)}):(a=i,this.walk((t,c)=>{if(t.type==="atrule")return a(t,c)}))}walkComments(i){return this.walk((a,t)=>{if(a.type==="comment")return i(a,t)})}walkDecls(i,a){return a?i instanceof RegExp?this.walk((t,c)=>{if(t.type==="decl"&&i.test(t.prop))return a(t,c)}):this.walk((t,c)=>{if(t.type==="decl"&&t.prop===i)return a(t,c)}):(a=i,this.walk((t,c)=>{if(t.type==="decl")return a(t,c)}))}walkRules(i,a){return a?i instanceof RegExp?this.walk((t,c)=>{if(t.type==="rule"&&i.test(t.selector))return a(t,c)}):this.walk((t,c)=>{if(t.type==="rule"&&t.selector===i)return a(t,c)}):(a=i,this.walk((t,c)=>{if(t.type==="rule")return a(t,c)}))}}v.registerParse=I=>{b=I},v.registerRule=I=>{h=I},v.registerAtRule=I=>{N=I},v.registerRoot=I=>{n=I},Y.exports=v,v.default=v,v.rebuild=I=>{I.type==="atrule"?Object.setPrototypeOf(I,N.prototype):I.type==="rule"?Object.setPrototypeOf(I,h.prototype):I.type==="decl"?Object.setPrototypeOf(I,C.prototype):I.type==="comment"?Object.setPrototypeOf(I,k.prototype):I.type==="root"&&Object.setPrototypeOf(I,n.prototype),I[o]=!0,I.nodes&&I.nodes.forEach(i=>{v.rebuild(i)})}},7820:(Y,x,y)=>{y.d(x,{G:()=>h});var N=y(205),b=y(2515),n=function(k,C,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{I(e.next(i))}catch(a){l(a)}}function v(i){try{I(e.throw(i))}catch(a){l(a)}}function I(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}I((e=e.apply(k,[])).next())})};class h{static addNodeToTree(C){if(this.root==null)return this.root=C,this.root;this.root=this.root.addNode(C,this.root,this.root.height)}static addConceptToTree(C){var r=new b.x(C.ghostId,C,null,null);this.addNodeToTree(r)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((C,r)=>{this.checkFlag(C),setTimeout(()=>{r("not")},25e3)})})}static checkFlag(C){if(N.B.isLocalDataLoaded)return C("done");setTimeout(h.checkFlag,1e3,C)}static getNodeFromTree(C){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(C,this.root):null})}static removeNodeFromTree(C){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,C))})}}h.root=null},7869:(Y,x,y)=>{y.d(x,{_:()=>I,A:()=>v});var N=y(9581),b=y(3026),n=y(1863),h=y(3518),k=y(5205),C=function(i,a,t,c){return new(t||(t=Promise))(function(w,m){function S(R){try{L(c.next(R))}catch(D){m(D)}}function E(R){try{L(c.throw(R))}catch(D){m(D)}}function L(R){var D;R.done?w(R.value):(D=R.value,D instanceof t?D:new t(function(W){W(D)})).then(S,E)}L((c=c.apply(i,[])).next())})},r=y(2299);class e{}e.isUpdated=!1,e.isOnlineSync=!1;var o=y(3655),l=y(9003),f=function(i,a,t,c){return new(t||(t=Promise))(function(w,m){function S(R){try{L(c.next(R))}catch(D){m(D)}}function E(R){try{L(c.throw(R))}catch(D){m(D)}}function L(R){var D;R.done?w(R.value):(D=R.value,D instanceof t?D:new t(function(W){W(D)})).then(S,E)}L((c=c.apply(i,a||[])).next())})};function v(){return f(this,arguments,void 0,function*(i=!0){try{if(yield(0,o.qI)("concepts"),yield(0,l.qI)("concepts"),i){if((yield(0,o.b8)()).isOnlineSync)return!0;yield function(){return C(this,void 0,void 0,function*(){const a=k.Logger.logfunction("GetAiData");try{const w=new Date().getTime();var t=(0,h.ab)("application/x-www-form-urlencoded");const m=yield fetch(N.B.GetAllAiData(),{method:"GET",headers:t});m.ok||(console.log("Ai Error Message: ","Cannot get response"),(0,n.ry)(m));const S=yield m.json();for(var c=0;c<S.length;c++)b.I.AddConcept(S[c]);I();let E=new Date().getTime()-w;console.log("The time taken is ",E),k.Logger.logUpdate(a)}catch(w){w instanceof Error?console.log("Ai Error Message: ",w.message):console.log("Ai Error Message: ",w),(0,n.Mb)(w,N.B.GetAllAiData())}})}()}return!0}catch(a){return console.log({message:"cannot initlize the AI system",ok:!1,status:400,data:a}),!0}})}function I(){return f(this,void 0,void 0,function*(){e.isOnlineSync=!0;var i=new r.B(e.isOnlineSync);(0,o.El)(i)})}},7876:(Y,x,y)=>{y.d(x,{A:()=>e,K:()=>o});var N=y(1735),b=y(7139),n=y(5205),h=y(3026),k=y(7282),C=function(l,f,v,I){return new(v||(v=Promise))(function(i,a){function t(m){try{w(I.next(m))}catch(S){a(S)}}function c(m){try{w(I.throw(m))}catch(S){a(S)}}function w(m){var S;m.done?i(m.value):(S=m.value,S instanceof v?S:new v(function(E){E(S)})).then(t,c)}w((I=I.apply(l,f||[])).next())})};const r=new Map;function e(l){return C(this,arguments,void 0,function*(f,v=999){let I=performance.now();if(N.J.activateStatus)try{N.J.incrementConcept(f)}catch{console.error("Error adding connection in access tracker"),n.Logger.log("ERROR","Error Adding Connection")}if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConcept",{id:f,userId:v})).data}catch(t){console.error("GetTheConcept sw error: ",t),(0,n.handleServiceWorkerException)(t)}let i=(0,k.o)();if(r.has(f))return r.get(f)||i;const a=C(this,void 0,void 0,function*(){try{if(f<0)return yield n.LocalConceptsData.GetConceptByGhostId(f);if(i=yield h.I.GetConcept(f),(i==null||i.id==0)&&f!=null&&f!=null&&(i=yield(0,b.r)(f)),i.id!=0&&i.type==null&&(yield h.I.GetConcept(i.typeId))==null&&i.typeId!=null&&i.typeId!=null){let t=yield(0,b.r)(i.typeId);i.type=t}return i}catch(t){throw console.error("this is the error in the getting concept",t),n.Logger.logError(I,v,"read","unknown",void 0,500,t,"GetTheConcept",[f,v],"unknown",void 0),t}finally{r.delete(f)}});return r.set(f,a),a})}function o(l){return C(this,void 0,void 0,function*(){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("AddTypeConcept",{concept:l})).data}catch(f){console.error("AddTypeConcept sw error: ",f),(0,n.handleServiceWorkerException)(f)}if(l.type==null){let f=yield h.I.GetConcept(l.typeId);if(f.id==0&&l.typeId!=0&&l.typeId!=999){let v=yield(0,b.r)(l.typeId);l.type=v}else l.type=f}})}},7887:(Y,x,y)=>{y.d(x,{a:()=>h,p:()=>k});var N=y(8286),b=y(4864),n=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,[])).next())})};function h(){return n(this,void 0,void 0,function*(){try{let C=[];if(Array.isArray(C))for(let r=0;r<C.length;r++)N.d.AddConnectionToMemory(C[r])}catch(C){throw{message:"Cannot create Connection Binary Tree Concept",ok:!1,status:400,data:C}}})}function k(){return n(this,void 0,void 0,function*(){try{let C=[];if(Array.isArray(C))for(let r=0;r<C.length;r++)b.G.AddConnectionToMemory(C[r])}catch(C){throw{message:"Cannot create Local Connection Binary Tree Concept",ok:!1,status:400,data:C}}})}},8064:(Y,x,y)=>{y.d(x,{$I:()=>k,Ay:()=>h});var N=y(9736),b=(y(9581),y(3518),y(5205));y(1863);var n=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,[])).next())})};function h(C){return n(this,void 0,void 0,function*(){return yield N.v.GetConceptByCharacterAndTypeLocal(C,51)})}function k(C){return n(this,void 0,void 0,function*(){if(b.serviceWorker)try{return(yield(0,b.sendMessage)("GetConceptByCharacterAndCategoryLocal",{character:C})).data}catch(o){console.error("GetConceptByCharacterAndCategoryLocal error sw: ",o),(0,b.handleServiceWorkerException)(o)}let r=(0,b.CreateDefaultLConcept)();if(C=="the")return r.id=1,r.typeId=5,r.characterValue="the",r;let e=(0,b.SplitStrings)(C);if(e.length>1){let o=1,l=yield k(e[0]);l.id!=0&&(o=l.id),r=yield function(f,v){return n(this,void 0,void 0,function*(){return N.v.GetConceptByCharacterAndCategoryLocal(f,v)})}(C,o)}else e[0]==C&&(r=yield h(C));return r})}},8095:(Y,x,y)=>{y.d(x,{h:()=>k});var N=y(5205),b=y(9700),n=y(1863),h=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,r||[])).next())})};function k(C,r,e){var o=arguments;return h(this,arguments,void 0,function*(l,f,v,I=!1,i={concepts:[],connections:[]}){var a,t,c,w,m,S;const E=b.V.logfunction("CreateConnectionBetweenTwoConceptsLocal",o)||{};let L=performance.now();try{if(N.serviceWorker){E.serviceWorker=!0;try{const P=yield(0,N.sendMessage)("CreateConnectionBetweenTwoConceptsLocal",{ofTheConcept:l,toTheConcept:f,linker:v,both:I,actions:i});return!((t=(a=P?.actions)===null||a===void 0?void 0:a.concepts)===null||t===void 0)&&t.length&&(i.concepts=JSON.parse(JSON.stringify(P.actions.concepts))),!((w=(c=P?.actions)===null||c===void 0?void 0:c.connections)===null||w===void 0)&&w.length&&(i.connections=JSON.parse(JSON.stringify(P.actions.connections))),b.V.logUpdate(E),P.data}catch(P){console.error("CreateConnectionBetweenTwoConceptsLocal sw error: ",P),(0,n.ey)(E,"CreateConnectionBetweenTwoConceptsLocal",P),(0,N.handleServiceWorkerException)(P)}}if(l.userId,I){let P=((m=f.type)===null||m===void 0?void 0:m.characterValue)+"_s_"+v+"_by";var R=yield(0,N.MakeTheInstanceConceptLocal)("connection",P,!1,999,999,999,0,i);yield(0,N.CreateTheConnectionLocal)(f.id,l.id,R.id,1e3,void 0,void 0,i)}let W=((S=l.type)===null||S===void 0?void 0:S.characterValue)+"_s_"+v+"_s";var D=yield(0,N.MakeTheInstanceConceptLocal)("connection",W,!1,999,999,999,void 0,i);let U=yield(0,N.CreateTheConnectionLocal)(l.id,f.id,D.id,1e3,void 0,void 0,i);return b.V.logUpdate(E),U}catch(W){throw b.V.logError(L,l.userId,"create",void 0,void 0,500,W,"CreateConnectionBetweenTwoConceptsLocal",[l,f,v,I],void 0,void 0),(0,n.ey)(E,"CreateConnectionBetweenTwoConceptsLocal",W),W}})}},8146:(Y,x,y)=>{y.d(x,{Y:()=>r});var N=y(3026),b=y(9581),n=y(5205),h=y(1863),k=y(7876),C=function(e,o,l,f){return new(l||(l=Promise))(function(v,I){function i(c){try{t(f.next(c))}catch(w){I(w)}}function a(c){try{t(f.throw(c))}catch(w){I(w)}}function t(c){var w;c.done?v(c.value):(w=c.value,w instanceof l?w:new l(function(m){m(w)})).then(i,a)}t((f=f.apply(e,[])).next())})};function r(e){var o=arguments;return C(this,void 0,void 0,function*(){const l=n.Logger.logfunction("GetConceptByCharacterValue",o);let f=(0,n.CreateDefaultConcept)();try{const v=new FormData;v.append("character_value",e);const I=yield fetch(b.B.GetConceptByCharacterValueUrl(),{method:"POST",body:v});I.ok?(f=yield I.json(),f.id>0&&(0,k.K)(f).then(i=>{N.I.AddConcept(f)}),n.Logger.logUpdate(l)):((0,h.ry)(I),console.log("Error in Getting concept by character value Error",I.status))}catch(v){v instanceof Error?console.log("Error in Getting concept by character value error message: ",v):console.log("Error in Getting concept by character value unexpected error: ",v),(0,h.Mb)(v,b.B.GetConceptByCharacterValueUrl()),(0,h.ey)(l,"GetConceptByCharacterValue",v)}return f})}},8286:(Y,x,y)=>{y.d(x,{d:()=>v});var N=y(1735),b=y(5205),n=y(3655),h=y(1863),k=y(2155),C=y(5239),r=y(991),e=y(3996);class o extends e.i{constructor(i,a,t,c){super(i,a,t,c),this.key="",this.value=[],this.height=1,this.key=i,this.value=a,this.leftNode=t,this.rightNode=c}addNode(i,a,t){if(a==null)return i;let c=a.leftNode,w=a.rightNode;if(a.key>i.key)a.leftNode=this.addNode(i,c,t);else{if(!(a.key<i.key))return a;a.rightNode=this.addNode(i,w,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let m=this.getBalanceFactor(a);if(m>1&&a.leftNode){if(i.key<a.leftNode.key)return this.rightRotate(a);if(i.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(m<-1&&a.rightNode){if(i.key>a.rightNode.key)return this.leftRotate(a);if(i.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}}class l{static CreateCompositionKey(i){return i}static addNodeToTree(i){return a=this,t=void 0,w=function*(){return this.connectionTypeRoot==null?(this.connectionTypeRoot=i,this.connectionTypeRoot):(this.connectionTypeRoot=this.connectionTypeRoot.addNode(i,this.connectionTypeRoot,this.connectionTypeRoot.height),this.connectionTypeRoot)},new((c=void 0)||(c=Promise))(function(m,S){function E(D){try{R(w.next(D))}catch(W){S(W)}}function L(D){try{R(w.throw(D))}catch(W){S(W)}}function R(D){var W;D.done?m(D.value):(W=D.value,W instanceof c?W:new c(function(U){U(W)})).then(E,L)}R((w=w.apply(a,t||[])).next())});var a,t,c,w}static addConnectionToTree(i){if(i.id>0){let a=this.CreateCompositionKey(i.typeId);if(this.connectionTypeRoot){let t=this.connectionTypeRoot.getFromNode(a,this.connectionTypeRoot);if(t){let c=t?.value;c.length==0&&(t.value=[]),c.includes(i.id)||c.push(i.id)}else{let c=[];c.push(i.id);let w=new o(a,c,null,null);this.addNodeToTree(w)}}else{let t=[];t.push(i.id);let c=new o(a,t,null,null);this.addNodeToTree(c)}}else console.log("cannot insert key id with  n 0 to the connection tree",i)}static GetConnectionByOfTheConceptAndTypeId(i,a){let t=this.CreateCompositionKey(a);if(this.connectionTypeRoot){let c=this.connectionTypeRoot.getFromNode(t,this.connectionTypeRoot);if(c)return c.value}return null}}l.connectionTypeRoot=null;var f=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,[])).next())})};class v{constructor(){this.name="Connection Array"}static CheckContains(i){let a=!1;for(let t=0;t<this.connectionArray.length;t++)this.connectionArray[t].id==i.id&&(a=!0);return a}static AddConnectionToStorage(i){(0,n.kH)("connection",i)}static AddNpConn(i){this.deletedConnections.includes(i)||this.deletedConnections.push(i)}static GetNpConn(i){return!!this.deletedConnections.includes(i)}static AddConnection(i){try{C.O.addConnectionToTree(i),l.addConnectionToTree(i),r.H.addConnection(i)}catch(a){throw console.log("this is the error in making the connection"),a}}static AddConnectionToMemory(i){i.isTemp||(C.O.addConnectionToTree(i),l.addConnectionToTree(i),r.H.addConnection(i))}static AddToDictionary(i){this.connectionDictionary[i.id]=i}static RemoveConnection(i){i.id!=0&&((0,n.wh)("connection",i.id),C.O.removeNodeFromTree(i.id),r.H.removeNodeFromTree(i.id))}static GetConnectionTypeOfTree(){r.H.node}static GetConnectionByOfTheConceptAndType(i,a){return f(this,void 0,void 0,function*(){try{if(b.serviceWorker)try{return(yield(0,b.sendMessage)("ConnectionData__GetConnectionByOfTheConceptAndType",{ofTheConceptId:i,typeId:a})).data}catch(t){console.error("GetConnectionByOfTheConceptAndType sw error: ",t),(0,b.handleServiceWorkerException)(t)}return r.H.GetConnectionByOfTheConceptAndTypeId(i,a)||[]}catch(t){return console.log("this is the error in GetConnectionByOfTheConceptAndType",t),[]}})}static GetConnectionByOfType(i,a){const t=b.Logger.logfunction("ConnectionData.GetConnectionByOfType",arguments);let c=l.GetConnectionByOfTheConceptAndTypeId(i,a);return c?(b.Logger.logUpdate(t),c):(b.Logger.logUpdate(t),[])}static GetConnectionTree(){return C.O.connectionroot}static GetConnectionTypeTree(){return l.connectionTypeRoot}static GetConnectionBulkData(i,a,t){return f(this,void 0,void 0,function*(){yield C.O.getConnectionListFromIds(i,a,t)})}static GetConnection(i){return f(this,void 0,void 0,function*(){N.J.incrementConnection(i);let a=new k.N(0,0,0,0,0,0,0);try{if(b.serviceWorker)try{return(yield(0,b.sendMessage)("ConnectionData__GetConnection",{id:i})).data}catch(c){console.error("GetConnection sw error: ",c),(0,b.handleServiceWorkerException)(c)}let t=yield C.O.getNodeFromTree(i);if(t?.value){let c=t.value;c&&(a=c)}return a}catch(t){return console.log("this is the error in GetConnection",t),a}})}static GetConnectionsOfCompositionLocal(i){var a=arguments;return f(this,void 0,void 0,function*(){const t=b.Logger.logfunction("ConnectionData.GetConnectionsOfCompositionLocal",a)||{};let c=[];try{if(b.serviceWorker){t.serviceWorker=!0;try{const m=yield(0,b.sendMessage)("ConnectionData__GetConnectionsOfCompositionLocal",{id:i});return b.Logger.logUpdate(t),m.data}catch(m){console.error("GetConnectionsOfCompositionLocal sw error: ",m),(0,h.ey)(t,"GetConnectionsOfCompositionLocal",m),(0,b.handleServiceWorkerException)(m)}}let w=[];w=v.GetConnectionByOfType(i,i);for(let m=0;m<w.length;m++){let S=yield C.O.getNodeFromTree(w[m]);S&&c.push(S.value),b.Logger.logUpdate(t)}}catch(w){console.log("this is the error GetConnectionsOfCompositionLocal",i,c),(0,h.ey)(t,"ConnectionData.GetConnectionsOfCompositionLocal",w)}return c})}static GetConnectionsOfConcept(i){return f(this,void 0,void 0,function*(){let a=[],t=[];try{if(b.serviceWorker)try{return(yield(0,b.sendMessage)("ConnectionData__GetConnectionsOfConcept",{id:i})).data}catch(c){console.error("GetConnectionsOfConcept sw error: ",c),(0,b.handleServiceWorkerException)(c)}a=yield v.GetConnectionByOfTheConceptAndType(i,i);for(let c=0;c<a.length;c++){let w=yield C.O.getNodeFromTree(a[c]);w&&t.push(w.value)}return t}catch(c){return console.log("this is the error in GetConnectionsOfConcept",c),t}})}getName(){return this.name}}v.deletedConnections=[],v.connectionArray=[],v.connectionDictionary=[]},8339:(Y,x,y)=>{let N=y(396),b=y(9371),n=y(5238),h=y(5644),k=y(1534),C=y(5781);const r={empty:!0,space:!0};Y.exports=class{constructor(e){this.input=e,this.root=new h,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let o,l,f,v=new N;v.name=e[1].slice(1),v.name===""&&this.unnamedAtrule(v,e),this.init(v,e[2]);let I=!1,i=!1,a=[],t=[];for(;!this.tokenizer.endOfFile();){if(o=(e=this.tokenizer.nextToken())[0],o==="("||o==="["?t.push(o==="("?")":"]"):o==="{"&&t.length>0?t.push("}"):o===t[t.length-1]&&t.pop(),t.length===0){if(o===";"){v.source.end=this.getPosition(e[2]),v.source.end.offset++,this.semicolon=!0;break}if(o==="{"){i=!0;break}if(o==="}"){if(a.length>0){for(f=a.length-1,l=a[f];l&&l[0]==="space";)l=a[--f];l&&(v.source.end=this.getPosition(l[3]||l[2]),v.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){I=!0;break}}v.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(v.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(v,"params",a),I&&(e=a[a.length-1],v.source.end=this.getPosition(e[3]||e[2]),v.source.end.offset++,this.spaces=v.raws.between,v.raws.between="")):(v.raws.afterName="",v.params=""),i&&(v.nodes=[],this.current=v)}checkMissedSemicolon(e){let o=this.colon(e);if(o===!1)return;let l,f=0;for(let v=o-1;v>=0&&(l=e[v],l[0]==="space"||(f+=1,f!==2));v--);throw this.input.error("Missed semicolon",l[0]==="word"?l[3]+1:l[2])}colon(e){let o,l,f,v=0;for(let[I,i]of e.entries()){if(l=i,f=l[0],f==="("&&(v+=1),f===")"&&(v-=1),v===0&&f===":"){if(o){if(o[0]==="word"&&o[1]==="progid")continue;return I}this.doubleColon(l)}o=l}return!1}comment(e){let o=new b;this.init(o,e[2]),o.source.end=this.getPosition(e[3]||e[2]),o.source.end.offset++;let l=e[1].slice(2,-2);if(/^\s*$/.test(l))o.text="",o.raws.left=l,o.raws.right="";else{let f=l.match(/^(\s*)([^]*\S)(\s*)$/);o.text=f[2],o.raws.left=f[1],o.raws.right=f[3]}}createTokenizer(){this.tokenizer=C(this.input)}decl(e,o){let l=new n;this.init(l,e[0][2]);let f,v=e[e.length-1];for(v[0]===";"&&(this.semicolon=!0,e.pop()),l.source.end=this.getPosition(v[3]||v[2]||function(a){for(let t=a.length-1;t>=0;t--){let c=a[t],w=c[3]||c[2];if(w)return w}}(e)),l.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),l.raws.before+=e.shift()[1];for(l.source.start=this.getPosition(e[0][2]),l.prop="";e.length;){let a=e[0][0];if(a===":"||a==="space"||a==="comment")break;l.prop+=e.shift()[1]}for(l.raws.between="";e.length;){if(f=e.shift(),f[0]===":"){l.raws.between+=f[1];break}f[0]==="word"&&/\w/.test(f[1])&&this.unknownWord([f]),l.raws.between+=f[1]}l.prop[0]!=="_"&&l.prop[0]!=="*"||(l.raws.before+=l.prop[0],l.prop=l.prop.slice(1));let I,i=[];for(;e.length&&(I=e[0][0],I==="space"||I==="comment");)i.push(e.shift());this.precheckMissedSemicolon(e);for(let a=e.length-1;a>=0;a--){if(f=e[a],f[1].toLowerCase()==="!important"){l.important=!0;let t=this.stringFrom(e,a);t=this.spacesFromEnd(e)+t,t!==" !important"&&(l.raws.important=t);break}if(f[1].toLowerCase()==="important"){let t=e.slice(0),c="";for(let w=a;w>0;w--){let m=t[w][0];if(c.trim().startsWith("!")&&m!=="space")break;c=t.pop()[1]+c}c.trim().startsWith("!")&&(l.important=!0,l.raws.important=c,e=t)}if(f[0]!=="space"&&f[0]!=="comment")break}e.some(a=>a[0]!=="space"&&a[0]!=="comment")&&(l.raws.between+=i.map(a=>a[1]).join(""),i=[]),this.raw(l,"value",i.concat(e),o),l.value.includes(":")&&!o&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let o=new k;this.init(o,e[2]),o.selector="",o.raws.between="",this.current=o}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let o=this.current.nodes[this.current.nodes.length-1];o&&o.type==="rule"&&!o.raws.ownSemicolon&&(o.raws.ownSemicolon=this.spaces,this.spaces="",o.source.end=this.getPosition(e[2]),o.source.end.offset+=o.raws.ownSemicolon.length)}}getPosition(e){let o=this.input.fromOffset(e);return{column:o.col,line:o.line,offset:e}}init(e,o){this.current.push(e),e.source={input:this.input,start:this.getPosition(o)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let o=!1,l=null,f=!1,v=null,I=[],i=e[1].startsWith("--"),a=[],t=e;for(;t;){if(l=t[0],a.push(t),l==="("||l==="[")v||(v=t),I.push(l==="("?")":"]");else if(i&&f&&l==="{")v||(v=t),I.push("}");else if(I.length===0){if(l===";"){if(f)return void this.decl(a,i);break}if(l==="{")return void this.rule(a);if(l==="}"){this.tokenizer.back(a.pop()),o=!0;break}l===":"&&(f=!0)}else l===I[I.length-1]&&(I.pop(),I.length===0&&(v=null));t=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(o=!0),I.length>0&&this.unclosedBracket(v),o&&f){if(!i)for(;a.length&&(t=a[a.length-1][0],t==="space"||t==="comment");)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,o,l,f){let v,I,i,a,t=l.length,c="",w=!0;for(let m=0;m<t;m+=1)v=l[m],I=v[0],I!=="space"||m!==t-1||f?I==="comment"?(a=l[m-1]?l[m-1][0]:"empty",i=l[m+1]?l[m+1][0]:"empty",r[a]||r[i]||c.slice(-1)===","?w=!1:c+=v[1]):c+=v[1]:w=!1;if(!w){let m=l.reduce((S,E)=>S+E[1],"");e.raws[o]={raw:m,value:c}}e[o]=c}rule(e){e.pop();let o=new k;this.init(o,e[0][2]),o.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(o,"selector",e),this.current=o}spacesAndCommentsFromEnd(e){let o,l="";for(;e.length&&(o=e[e.length-1][0],o==="space"||o==="comment");)l=e.pop()[1]+l;return l}spacesAndCommentsFromStart(e){let o,l="";for(;e.length&&(o=e[0][0],o==="space"||o==="comment");)l+=e.shift()[1];return l}spacesFromEnd(e){let o,l="";for(;e.length&&(o=e[e.length-1][0],o==="space");)l=e.pop()[1]+l;return l}stringFrom(e,o){let l="";for(let f=o;f<e.length;f++)l+=e[f][1];return e.splice(o,e.length-o),l}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,o){throw this.input.error("At-rule without name",{offset:o[2]},{offset:o[2]+o[1].length})}}},8349:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(5170))&&N.__esModule?N:{default:N},n=function(){function h(C,r){this.func=C||function(){},this.funcRes=null,this.options=r}var k=h.prototype;return k._shouldUpdateSelector=function(C,r){return r===void 0&&(r={}),Object.assign({},this.options,r).updateSelector!==!1&&typeof C!="string"},k._isLossy=function(C){return C===void 0&&(C={}),Object.assign({},this.options,C).lossless===!1},k._root=function(C,r){return r===void 0&&(r={}),new b.default(C,this._parseOptions(r)).root},k._parseOptions=function(C){return{lossy:this._isLossy(C)}},k._run=function(C,r){var e=this;return r===void 0&&(r={}),new Promise(function(o,l){try{var f=e._root(C,r);Promise.resolve(e.func(f)).then(function(v){var I=void 0;return e._shouldUpdateSelector(C,r)&&(I=f.toString(),C.selector=I),{transform:v,root:f,string:I}}).then(o,l)}catch(v){return void l(v)}})},k._runSync=function(C,r){r===void 0&&(r={});var e=this._root(C,r),o=this.func(e);if(o&&typeof o.then=="function")throw new Error("Selector processor returned a promise to a synchronous call.");var l=void 0;return r.updateSelector&&typeof C!="string"&&(l=e.toString(),C.selector=l),{transform:o,root:e,string:l}},k.ast=function(C,r){return this._run(C,r).then(function(e){return e.root})},k.astSync=function(C,r){return this._runSync(C,r).root},k.transform=function(C,r){return this._run(C,r).then(function(e){return e.transform})},k.transformSync=function(C,r){return this._runSync(C,r).transform},k.process=function(C,r){return this._run(C,r).then(function(e){return e.string||e.root.toString()})},k.processSync=function(C,r){var e=this._runSync(C,r);return e.string||e.root.toString()},h}();x.default=n,Y.exports=x.default},8354:(Y,x)=>{x.__esModule=!0,x.default=function(y){for(var N="",b=y.indexOf("/*"),n=0;b>=0;){N+=y.slice(n,b);var h=y.indexOf("*/",b+2);if(h<0)return N;n=h+2,b=y.indexOf("/*",n)}return N+y.slice(n)},Y.exports=x.default},8357:(Y,x,y)=>{y.d(x,{$:()=>e});var N=y(3077),b=y(8064),n=y(6467),h=y(9975),k=y(5205),C=y(1863),r=function(o,l,f,v){return new(f||(f=Promise))(function(I,i){function a(w){try{c(v.next(w))}catch(m){i(m)}}function t(w){try{c(v.throw(w))}catch(m){i(m)}}function c(w){var m;w.done?I(w.value):(m=w.value,m instanceof f?m:new f(function(S){S(m)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function e(o,l,f,v){var I=arguments;return r(this,arguments,void 0,function*(i,a,t,c,w={concepts:[],connections:[]}){var m,S,E,L;const R=k.Logger.logfunction("MakeTheTypeConceptLocal",I)||{};if(k.serviceWorker){R.serviceWorker=!0;try{const W=yield(0,k.sendMessage)("MakeTheTypeConceptLocal",{typeString:i,sessionId:a,sessionUserId:t,userId:c,actions:w});return!((S=(m=W?.actions)===null||m===void 0?void 0:m.concepts)===null||S===void 0)&&S.length&&(w.concepts=JSON.parse(JSON.stringify(W.actions.concepts))),!((L=(E=W?.actions)===null||E===void 0?void 0:E.connections)===null||L===void 0)&&L.length&&(w.connections=JSON.parse(JSON.stringify(W.actions.connections))),k.Logger.logUpdate(R),W.data}catch(W){console.error("MakeTheTypeConceptLocal error sw: ",W),(0,C.ey)(R,"MakeTheTypeConceptLocal",W),(0,k.handleServiceWorkerException)(W)}}let D=yield(0,b.$I)(i);if(D&&(D.id==0||D.userId==0)){let W=(0,n.f)(i);if(W[0]==i)D=yield(0,h.A)(i,"the",c,1,51,w);else{let U=yield e(W[0],a,t,c,w),P=yield e(W[1],a,t,c,w);D=yield(0,N.A)(i,W[1],c,U.id,P.id,4,void 0,null,w)}}return k.Logger.logUpdate(R),D})}},8407:(Y,x,y)=>{y.d(x,{A:()=>v});var N=y(9581),b=y(3518),n=y(1863),h=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,[])).next())})},k=y(4402),C=y(5205),r=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,[])).next())})};class e{constructor(i,a,t,c,w,m,S,E,L,R){this.id=0,this.userId=i,this.data=a,this.securityId=t,this.securityUserId=c,this.accessId=w,this.accessUserId=m,this.sessionId=S,this.sessionUserId=E,this.entryTimestamp=L,this.isNew=R}}var o=y(7282),l=y(2212),f=function(I,i,a,t){return new(a||(a=Promise))(function(c,w){function m(L){try{E(t.next(L))}catch(R){w(R)}}function S(L){try{E(t.throw(L))}catch(R){w(R)}}function E(L){var R;L.done?c(L.value):(R=L.value,R instanceof a?R:new a(function(D){D(R)})).then(m,S)}E((t=t.apply(I,i||[])).next())})};function v(I,i){var a=arguments;return f(this,arguments,void 0,function*(t,c,w=!1,m,S=4,E=999,L=0){const R=C.Logger.logfunction("MakeTheInstanceConcept",a)||{};if(C.serviceWorker){R.serviceWorker=!0;try{const se=yield(0,C.sendMessage)("MakeTheInstanceConcept",{type:t,referent:c,composition:w,userId:m,passedAccessId:S,passedSessionId:E,referentId:L});return C.Logger.logUpdate(R),se.data}catch(se){console.error("MakeTheInstanceConcept sw error: ",se),(0,n.ey)(R,"MakeTheInstanceConcept",se),(0,C.handleServiceWorkerException)(se)}}let D,W=E,U=m,P=m,M=S,j=m,J="",Z=c.length,K=(0,o.o)();if(J=t.startsWith("the_")?t:"the_"+t,w)K=yield(0,C.MakeTheTypeConceptApi)(t,m),D=yield(0,l.Ay)(c,m,4,K.id,L,M,t);else if(Z>255)K=yield(0,C.MakeTheTypeConceptApi)(J,m),D=yield(0,l.Ay)(c,m,4,K.id,L,M,J),function(se){h(this,void 0,void 0,function*(){try{var $=(0,b.Xr)();const ie=yield fetch(N.B.CreateTheTextDataUrl(),{method:"POST",headers:$,body:JSON.stringify(se)});if(!ie.ok)throw(0,n.ry)(ie),new Error(`Error! status: ${ie.status}`);return yield ie.json()}catch(ie){throw ie instanceof Error?console.log("Create the text error message: ",ie.message):console.log("Create the text unexpected error: ",ie),ie}})}(new e(m,c,999,U,M,j,W,P,Date.now().toString(),!0));else{K=yield(0,C.MakeTheTypeConceptApi)(J,m);let se=yield(0,k.A)(c,K.id);D=se,se.id==0&&se.userId==0&&(D=yield(0,l.N)(c,m,4,K.id,12,M,J),function($,ie,ue,ee){var Q=arguments;r(this,void 0,void 0,function*(){const te=C.Logger.logfunction("MakeTheNameInBackend",Q);try{let oe={newConceptId:$,referent:ie,typeId:ue,typeUserId:ee},H=(0,b.Xr)(),re=JSON.stringify(oe);const le=yield fetch(N.B.MakeTheNameInBackendUrl(),{method:"POST",headers:H,body:re});C.Logger.logUpdate(te),le.ok||(0,n.ry)(le)}catch(oe){oe instanceof Error?console.log("make the name in backend error message: ",oe.message):console.log("make the name in backend unexpected error: ",oe),(0,n.Mb)(oe,N.B.MakeTheNameInBackendUrl()),(0,n.ey)(te,"MakeTheNameInBackend",oe)}})}(D.id,`${c}`,K.id,m))}return D.type=K,C.Logger.logUpdate(R),D})}},8500:(Y,x,y)=>{x.__esModule=!0,x.isComment=x.isCombinator=x.isClassName=x.isAttribute=void 0,x.isContainer=function(m){return!(!h(m)||!m.walk)},x.isIdentifier=void 0,x.isNamespace=function(m){return C(m)||t(m)},x.isNesting=void 0,x.isNode=h,x.isPseudo=void 0,x.isPseudoClass=function(m){return v(m)&&!w(m)},x.isPseudoElement=w,x.isUniversal=x.isTag=x.isString=x.isSelector=x.isRoot=void 0;var N,b=y(1581),n=((N={})[b.ATTRIBUTE]=!0,N[b.CLASS]=!0,N[b.COMBINATOR]=!0,N[b.COMMENT]=!0,N[b.ID]=!0,N[b.NESTING]=!0,N[b.PSEUDO]=!0,N[b.ROOT]=!0,N[b.SELECTOR]=!0,N[b.STRING]=!0,N[b.TAG]=!0,N[b.UNIVERSAL]=!0,N);function h(m){return typeof m=="object"&&n[m.type]}function k(m,S){return h(S)&&S.type===m}var C=k.bind(null,b.ATTRIBUTE);x.isAttribute=C;var r=k.bind(null,b.CLASS);x.isClassName=r;var e=k.bind(null,b.COMBINATOR);x.isCombinator=e;var o=k.bind(null,b.COMMENT);x.isComment=o;var l=k.bind(null,b.ID);x.isIdentifier=l;var f=k.bind(null,b.NESTING);x.isNesting=f;var v=k.bind(null,b.PSEUDO);x.isPseudo=v;var I=k.bind(null,b.ROOT);x.isRoot=I;var i=k.bind(null,b.SELECTOR);x.isSelector=i;var a=k.bind(null,b.STRING);x.isString=a;var t=k.bind(null,b.TAG);x.isTag=t;var c=k.bind(null,b.UNIVERSAL);function w(m){return v(m)&&m.value&&(m.value.startsWith("::")||m.value.toLowerCase()===":before"||m.value.toLowerCase()===":after"||m.value.toLowerCase()===":first-letter"||m.value.toLowerCase()===":first-line")}x.isUniversal=c},8633:Y=>{var x=String,y=function(){return{isColorSupported:!1,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x,blackBright:x,redBright:x,greenBright:x,yellowBright:x,blueBright:x,magentaBright:x,cyanBright:x,whiteBright:x,bgBlackBright:x,bgRedBright:x,bgGreenBright:x,bgYellowBright:x,bgBlueBright:x,bgMagentaBright:x,bgCyanBright:x,bgWhiteBright:x}};Y.exports=y(),Y.exports.createColors=y},8642:(Y,x,y)=>{y.d(x,{Y:()=>l});var N=y(8286),b=y(9581),n=y(4364),h=y(5284),k=y(1412),C=y(3518),r=y(1863),e=y(5205),o=function(f,v,I,i){return new(I||(I=Promise))(function(a,t){function c(S){try{m(i.next(S))}catch(E){t(E)}}function w(S){try{m(i.throw(S))}catch(E){t(E)}}function m(S){var E;S.done?a(S.value):(E=S.value,E instanceof I?E:new I(function(L){L(E)})).then(c,w)}m((i=i.apply(f,v||[])).next())})};function l(){var f=arguments;return o(this,arguments,void 0,function*(v=[]){const I=e.Logger.logfunction("GetAllConnectionsOfCompositionBulk",f)||{};if(e.serviceWorker){I.serviceWorker=!0;try{const c=yield(0,e.sendMessage)("GetAllConnectionsOfCompositionBulk",{composition_ids:v});return e.Logger.logUpdate(I),c.data}catch(c){console.error("GetAllConnectionsOfCompositionBulk sw error: ",c),(0,r.ey)(I,"GetAllConnectionsOfCompositionBulk",c),(0,e.handleServiceWorkerException)(c)}}var i=[];if(v.length<=0)return i;var a=yield(0,h.B)(v),t=yield function(){var c=arguments;return o(this,arguments,void 0,function*(w=[]){const m=e.Logger.logfunction("GetAllConnectionsOfCompositionOnline",c);var S=[];try{var E=(0,C.Xr)();const R=yield fetch(b.B.GetAllConnectionsOfCompositionBulkUrl(),{method:"POST",headers:E,body:JSON.stringify(w)});if(R.ok){const D=yield R.json();for(var L=0;L<D.length;L++)N.d.AddConnection(D[L]),S.push(D[L])}else console.log("Get all connections of composition bulk error message: ","Cannot get response"),(0,r.ry)(R);return e.Logger.logUpdate(m),S}catch(R){R instanceof Error?console.log("Get all connections of composition bulk error message: ",R.message):console.log("Get all connections of composition bulk unexpected error: ",R),(0,r.Mb)(R,b.B.GetAllConnectionsOfCompositionBulkUrl()),(0,r.ey)(m,"GetAllConnectionsOfCompositionOnline",R)}})}(v);return i=t,(0,k.e)(i,a),yield(0,n.s)(i),e.Logger.logUpdate(I),i})}},8675:(Y,x,y)=>{y.d(x,{l:()=>k});var N=y(1863),b=y(3518),n=y(5205),h=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,[])).next())})};function k(C){var r=arguments;return h(this,void 0,void 0,function*(){n.Logger.logfunction("GetAllLinkerConnectionsFromTheConcept",r);var e=[];try{new Date().getTime();var o=(0,b.Xr)("application/x-www-form-urlencoded");const v=yield fetch(n.BaseUrl.GetAllLinkerConnectionOfConceptUrl()+`?conceptId=${C}`,{method:"GET",headers:o});if(v.ok){const I=yield v.json();for(var l=0;l<I.length;l++){var f=I[l];e.push(f)}}else console.log("Get all linker connection from the concepts error","cannot get respone"),(0,N.ry)(v)}catch(v){v instanceof Error?console.log("Get all linker connection from the concepts error: ",v.message):console.log("Get all linker connection from the concepts error(Unexpected): ",v),(0,N.Mb)(v,n.BaseUrl.GetAllLinkerConnectionOfConceptUrl())}return e})}},8937:Y=>{var x={}.hasOwnProperty,y=/[ -,\.\/:-@\[-\^`\{-~]/,N=/[ -,\.\/:-@\[\]\^`\{-~]/,b=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,n=function h(k,C){(C=function(c,w){if(!c)return w;var m={};for(var S in w)m[S]=x.call(c,S)?c[S]:w[S];return m}(C,h.options)).quotes!="single"&&C.quotes!="double"&&(C.quotes="single");for(var r=C.quotes=="double"?'"':"'",e=C.isIdentifier,o=k.charAt(0),l="",f=0,v=k.length;f<v;){var I=k.charAt(f++),i=I.charCodeAt(),a=void 0;if(i<32||i>126){if(i>=55296&&i<=56319&&f<v){var t=k.charCodeAt(f++);(64512&t)==56320?i=((1023&i)<<10)+(1023&t)+65536:f--}a="\\"+i.toString(16).toUpperCase()+" "}else a=C.escapeEverything?y.test(I)?"\\"+I:"\\"+i.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(I)?"\\"+i.toString(16).toUpperCase()+" ":I=="\\"||!e&&(I=='"'&&r==I||I=="'"&&r==I)||e&&N.test(I)?"\\"+I:I;l+=a}return e&&(/^-[-\d]/.test(l)?l="\\-"+l.slice(1):/\d/.test(o)&&(l="\\3"+o+" "+l.slice(1))),l=l.replace(b,function(c,w,m){return w&&w.length%2?c:(w||"")+m}),!e&&C.wrap?r+l+r:l};n.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},n.version="3.0.0",Y.exports=n},8939:(Y,x,y)=>{y.d(x,{$N:()=>m,$V:()=>l,Ez:()=>S,JA:()=>c,Mb:()=>I,Nj:()=>v,PT:()=>w,RW:()=>t,XI:()=>a,ay:()=>o,hL:()=>e,kx:()=>i,re:()=>f,yz:()=>E,zN:()=>D});var N=y(7139),b=y(2),n=y(3026),h=y(8286),k=y(5205),C=y(1863),r=function(U,P,M,j){return new(M||(M=Promise))(function(J,Z){function K(ie){try{$(j.next(ie))}catch(ue){Z(ue)}}function se(ie){try{$(j.throw(ie))}catch(ue){Z(ue)}}function $(ie){var ue;ie.done?J(ie.value):(ue=ie.value,ue instanceof M?ue:new M(function(ee){ee(ue)})).then(K,se)}$((j=j.apply(U,P||[])).next())})};function e(U){return r(this,void 0,void 0,function*(){let P={connectionList:[],compositionList:[]};try{if(k.serviceWorker)try{return(yield(0,k.sendMessage)("GetCompositionById",{id:U})).data}catch(j){console.error("GetCompositionById error sw: ",j),(0,k.handleServiceWorkerException)(j)}let M=yield(0,b.s)(U);P.connectionList=M;for(let j=0;j<P.connectionList.length;j++)P.compositionList.includes(P.connectionList[j].ofTheConceptId)||P.compositionList.push(P.connectionList[j].ofTheConceptId);return P}catch(M){return console.error("GetCompositionById error: ",M),P}})}function o(U,P,M){return r(this,void 0,void 0,function*(){var j,J;let Z={},K=yield n.I.GetConcept(U);K.id==0&&U!=null&&U!=null&&(K=yield(0,N.r)(U));let se=yield D(U,P,M);return Z[(J=(j=K?.type)===null||j===void 0?void 0:j.characterValue)!==null&&J!==void 0?J:""]=se,Z})}function l(U,P,M){return r(this,void 0,void 0,function*(){var j,J;let Z={},K=yield n.I.GetConcept(U);K.id==0&&U!=null&&U!=null&&(K=yield(0,N.r)(U));let se=yield D(U,P,M);Z[(J=(j=K?.type)===null||j===void 0?void 0:j.characterValue)!==null&&J!==void 0?J:""]=se;let $={};return $.created_at=K.entryTimeStamp,$.data=Z,$.id=U,$})}function f(U,P,M){return r(this,void 0,void 0,function*(){var j,J;let Z={},K=yield n.I.GetConcept(U);K.id==0&&U!=null&&U!=null&&(K=yield(0,N.r)(U));let se=yield R(K,P,M);return Z[(J=(j=K?.type)===null||j===void 0?void 0:j.characterValue)!==null&&J!==void 0?J:""]=se,Z})}function v(U){return r(this,void 0,void 0,function*(){var P,M;if(k.serviceWorker)try{return(yield(0,k.sendMessage)("GetComposition",{id:U})).data}catch($){console.error("GetComposition error sw: ",$),(0,k.handleServiceWorkerException)($)}let j=[],J={};j=yield(0,b.s)(U);let Z=[];for(let $=0;$<j.length;$++)Z.includes(j[$].ofTheConceptId)||Z.push(j[$].ofTheConceptId);let K=yield n.I.GetConcept(U);K.id==0&&U!=null&&U!=null&&(K=yield(0,N.r)(U));let se=yield D(U,j,Z);return J[(M=(P=K?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,J})}function I(U){return r(this,void 0,void 0,function*(){var P,M;let j=[],J={};j=yield(0,b.s)(U);let Z=[];for(let $=0;$<j.length;$++)Z.includes(j[$].ofTheConceptId)||Z.push(j[$].ofTheConceptId);let K=yield n.I.GetConcept(U);K.id==0&&U!=null&&U!=null&&(K=yield(0,N.r)(U));let se=yield W(U,j,Z);return J[(M=(P=K?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,J})}function i(U){return r(this,void 0,void 0,function*(){var P,M;if(k.serviceWorker)try{return(yield(0,k.sendMessage)("GetCompositionFromMemory",{id:U})).data}catch($){console.error("GetCompositionFromMemory error sw: ",$),(0,k.handleServiceWorkerException)($)}let j=[],J={};j=yield h.d.GetConnectionsOfCompositionLocal(U);let Z=[];for(let $=0;$<j.length;$++)Z.includes(j[$].ofTheConceptId)||Z.push(j[$].ofTheConceptId);let K=yield n.I.GetConcept(U);K.id==0&&U!=null&&U!=null&&(K=yield(0,N.r)(U));let se=yield L(K,j,Z);return J[(M=(P=K?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,J})}function a(U){return r(this,void 0,void 0,function*(){var P,M;if(k.serviceWorker)try{return(yield(0,k.sendMessage)("GetCompositionFromMemoryNormal",{id:U})).data}catch($){console.error("GetCompositionFromMemoryNormal error sw: ",$),(0,k.handleServiceWorkerException)($)}let j=[],J={};j=yield h.d.GetConnectionsOfCompositionLocal(U);let Z=[];for(let $=0;$<j.length;$++)Z.includes(j[$].ofTheConceptId)||Z.push(j[$].ofTheConceptId);let K=yield n.I.GetConcept(U);K.id==0&&U!=null&&U!=null&&(K=yield(0,N.r)(U));let se=yield R(K,j,Z);return J[(M=(P=K?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,J})}function t(U){var P=arguments;return r(this,void 0,void 0,function*(){var M,j;const J=k.Logger.logfunction("GetCompositionWithIdFromMemory",P)||{};if(k.serviceWorker){J.serviceWorker=!0;try{const $=yield(0,k.sendMessage)("GetCompositionWithIdFromMemory",{id:U});return k.Logger.logUpdate(J),$.data}catch($){console.error("GetCompositionWithIdFromMemory error sw: ",$),(0,C.ey)(J,"GetCompositionWithIdFromMemory",$),(0,k.handleServiceWorkerException)($)}}let Z={},K=[],se={};try{K=yield h.d.GetConnectionsOfCompositionLocal(U);let $=[];for(let ee=0;ee<K.length;ee++)$.includes(K[ee].ofTheConceptId)||$.push(K[ee].ofTheConceptId);let ie=yield n.I.GetConcept(U);ie.id==0&&U!=null&&U!=null&&(ie=yield(0,N.r)(U));let ue=yield L(ie,K,$);se[(j=(M=ie?.type)===null||M===void 0?void 0:M.characterValue)!==null&&j!==void 0?j:""]=ue,Z.created_at=ie.entryTimeStamp,Z.data=se,Z.id=U}catch($){console.log("this is the exception in GetCompositionWithIdFromMemory",U),(0,C.ey)(J,"GetCompositionWithIdFromMemory",$)}return k.Logger.logUpdate(J),Z})}function c(U,P){var M=arguments;return r(this,void 0,void 0,function*(){var j,J;const Z=k.Logger.logfunction("GetCompositionFromMemoryWithConnections",M)||{};if(k.serviceWorker){Z.serviceWorker=!0;try{const ee=yield(0,k.sendMessage)("GetCompositionFromMemoryWithConnections",{id:U,connectionList:P});return k.Logger.logUpdate(Z),ee.data}catch(ee){console.error("GetCompositionFromMemoryWithConnections error sw: ",ee),(0,C.ey)(Z,"GetCompositionFromMemoryWithConnections",ee),(0,k.handleServiceWorkerException)(ee)}}let K={},se=[];for(let ee=0;ee<P.length;ee++)se.includes(P[ee].ofTheConceptId)||se.push(P[ee].ofTheConceptId);let $=yield n.I.GetConcept(U);$.id==0&&U!=null&&U!=null&&($=yield(0,N.r)(U));let ie=yield L($,P,se);K[(J=(j=$?.type)===null||j===void 0?void 0:j.characterValue)!==null&&J!==void 0?J:""]=ie;let ue={};return ue.created_at=$.entryTimeStamp,ue.data=K,ue.id=U,k.Logger.logUpdate(Z),ue})}function w(U,P){return r(this,void 0,void 0,function*(){var M,j;const J=k.Logger.logfunction("GetCompositionWithIdFromMemoryFromConnection",[U])||{};if(k.serviceWorker){J.serviceWorker=!0;try{const ue=yield(0,k.sendMessage)("GetCompositionWithIdFromMemory",{id:U});return k.Logger.logUpdate(J),ue.data}catch(ue){console.error("GetCompositionWithIdFromMemory error sw: ",ue),(0,C.ey)(J,"GetCompositionWithIdFromMemoryFromConnection",ue),(0,k.handleServiceWorkerException)(ue)}}let Z={},K=[];for(let ue=0;ue<P.length;ue++)K.includes(P[ue].ofTheConceptId)||K.push(P[ue].ofTheConceptId);let se=yield n.I.GetConcept(U);se.id==0&&U!=null&&U!=null&&(se=yield(0,N.r)(U));let $=yield L(se,P,K);Z[(j=(M=se?.type)===null||M===void 0?void 0:M.characterValue)!==null&&j!==void 0?j:""]=$;let ie={};return ie.created_at=se.entryTimeStamp,ie.data=Z,ie.id=U,k.Logger.logUpdate(J),ie})}function m(U){return r(this,void 0,void 0,function*(){var P;if(k.serviceWorker)try{return(yield(0,k.sendMessage)("GetCompositionWithIdFromMemoryNew",{id:U})).data}catch($){console.error("GetCompositionWithIdFromMemoryNew error sw: ",$),(0,k.handleServiceWorkerException)($)}let M=[],j={};M=yield h.d.GetConnectionsOfCompositionLocal(U);let J=[];for(let $=0;$<M.length;$++)J.includes(M[$].ofTheConceptId)||J.push(M[$].ofTheConceptId);let Z=yield n.I.GetConcept(U);Z.id==0&&U!=null&&U!=null&&(console.log("this concept you cannot find ",U),Z=yield(0,N.r)(U)),new Date().getTime();let K=yield function($,ie,ue){return r(this,arguments,void 0,function*(ee,Q,te,oe=[]){var H,re,le,ae,he,Ce,we,ve;let ke={},Ee=ee.id,ge=(new Date().getTime(),(re=(H=ee?.type)===null||H===void 0?void 0:H.characterValue)!==null&&re!==void 0?re:"");if(!te.includes(Ee))return{[ge]:ee?.characterValue};if(oe.includes(Ee))return"";oe.push(Ee);for(let Ae=0;Ae<Q.length;Ae++){let ce=yield(0,k.GetTheConcept)(Q[Ae].ofTheConceptId),Te=yield(0,k.GetTheConcept)(Q[Ae].toTheConceptId);Q[Ae].ofConcept=ce,Q[Ae].toConcept=Te;let Oe=ce.id,be="the_",pe=((ae=(le=Te?.type)===null||le===void 0?void 0:le.characterValue)!==null&&ae!==void 0?ae:"").replace(be,"");ke[Oe]!=null&&ke[Oe]!=null||(ke[Oe]={}),ke[Oe][pe]=Te.characterValue}let xe={};for(let Ae=0;Ae<Q.length;Ae++){let ce=Q[Ae].ofConcept,Te=Q[Ae].toConcept,Oe=(Ce=(he=ce?.type)===null||he===void 0?void 0:he.characterValue)!==null&&Ce!==void 0?Ce:"",be="the_",pe=((ve=(we=Te?.type)===null||we===void 0?void 0:we.characterValue)!==null&&ve!==void 0?ve:"").replace(be,"");xe[ce.id]!=null&&xe[ce.id]!=null||(xe[ce.id]={});let De=xe[ce.id];De[Oe]!=null&&De[Oe]!=null||(De[Oe]={}),ke[Q[Ae].ofTheConceptId]!=null&&ke[Q[Ae].toTheConceptId]!=null?De[Oe][pe]=ke[Te.id]:De[Oe][pe]=Te.characterValue}return xe[ee.id]})}(Z,M,J);(P=Z?.type)===null||P===void 0||P.characterValue,j=K;let se={};return se.created_at=Z.entryTimeStamp,se.data=j,se.id=U,se})}function S(U){return r(this,void 0,void 0,function*(){var P,M;if(k.serviceWorker)try{return(yield(0,k.sendMessage)("GetCompositionWithIdAndDateFromMemory",{id:U})).data}catch(ie){console.error("GetCompositionWithIdAndDateFromMemory error sw: ",ie),(0,k.handleServiceWorkerException)(ie)}let j=[],J={};j=yield h.d.GetConnectionsOfCompositionLocal(U);let Z=[];for(let ie=0;ie<j.length;ie++)Z.includes(j[ie].ofTheConceptId)||Z.push(j[ie].ofTheConceptId);let K=yield n.I.GetConcept(U);K.id==0&&U!=null&&U!=null&&(K=yield(0,N.r)(U));let se=yield D(U,j,Z);J[(M=(P=K?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se;let $={};return $.data=J,$.id=U,$.created_at=K.entryTimeStamp,$})}function E(U){var P=arguments;return r(this,void 0,void 0,function*(){var M,j;const J=k.Logger.logfunction("GetCompositionWithId",P)||{};if(k.serviceWorker){J.serviceWorker=!0;try{const ee=yield(0,k.sendMessage)("GetCompositionWithId",{id:U});return k.Logger.logUpdate(J),ee.data}catch(ee){console.error("GetCompositionWithId error sw: ",ee),(0,C.ey)(J,"GetCompositionWithId",ee),(0,k.handleServiceWorkerException)(ee)}}let Z=[],K={};Z=yield(0,b.s)(U);let se=[];for(let ee=0;ee<Z.length;ee++)se.includes(Z[ee].ofTheConceptId)||se.push(Z[ee].ofTheConceptId);let $=yield n.I.GetConcept(U);$.id==0&&U!=null&&U!=null&&($=yield(0,N.r)(U));let ie=yield D(U,Z,se);K[(j=(M=$?.type)===null||M===void 0?void 0:M.characterValue)!==null&&j!==void 0?j:""]=ie;let ue={};return ue.data=K,ue.id=U,k.Logger.logUpdate(J),ue})}function L(U,P,M){return r(this,arguments,void 0,function*(j,J,Z,K=[]){var se,$,ie;let ue={},ee=[],Q=j.id;if((se=j?.type)===null||se===void 0||se.characterValue,!Z.includes(Q))return j?.characterValue;if(K.includes(Q))return"";K.push(Q);for(let te=0;te<J.length;te++)if(J[te].ofTheConceptId==Q)if(Q!=J[te].toTheConceptId){let oe=J[te].toTheConceptId,H=yield n.I.GetConcept(oe);if(H!=null&&H.id!=0||oe==null||oe==null||(H=yield(0,N.r)(oe)),H.id!=0&&H?.type==null){let ae=H.typeId,he=yield n.I.GetConcept(ae);H.type=he,he==null&&ae!=null&&ae!=null&&(he=yield(0,N.r)(ae),H.type=he)}let re="the_",le=((ie=($=H?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(re,"");if(isNaN(Number(le))){if(le){const ae=yield L(H,J,Z,K);ue[le]=ae}}else{const ae=yield L(H,J,Z,K);ee[le]=ae,ue=ee}}else console.log("this is the faulty connection ",J[te]);return ue})}function R(U,P,M){return r(this,arguments,void 0,function*(j,J,Z,K=[]){var se,$,ie;const ue=k.Logger.logfunction("recursiveFetchConceptNormal",[j]);new Date().getTime();let ee={},Q=[],te=j.id;if(ee.id=te,(se=j?.type)===null||se===void 0||se.characterValue,!Z.includes(te))return j?.characterValue;if(K.includes(te))return"";K.push(te);for(let oe=0;oe<J.length;oe++)if(J[oe].ofTheConceptId==te)if(te!=J[oe].toTheConceptId){let H=J[oe].toTheConceptId,re=yield n.I.GetConcept(H);if(re!=null&&re.id!=0||H==null||H==null||(re=yield(0,N.r)(H)),re.id!=0&&re?.type==null){let he=re.typeId,Ce=yield n.I.GetConcept(he);re.type=Ce,Ce==null&&he!=null&&he!=null&&(Ce=yield(0,N.r)(he),re.type=Ce)}let le="the_",ae=((ie=($=re?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(le,"");if(isNaN(Number(ae))){if(ae){const he=yield L(re,J,Z,K);ee[ae]=he}}else{const he=yield L(re,J,Z,K);Q[ae]=he,ee=Q}}else console.log("this is the faulty connection ",J[oe]);return k.Logger.logUpdate(ue),ee})}function D(U,P,M){return r(this,arguments,void 0,function*(j,J,Z,K=[]){var se,$,ie;let ue={},ee=[];if(j==0)return null;let Q=yield n.I.GetConcept(j);if(Q!=null&&Q.id!=0||j==null||j==null||(Q=yield(0,N.r)(j)),Q.id!=0&&Q.type==null){let te=Q.typeId,oe=yield n.I.GetConcept(te);Q.type=oe,oe==null&&te!=null&&te!=null&&(oe=yield(0,N.r)(te),Q.type=oe)}if((se=Q?.type)===null||se===void 0||se.characterValue,!Z.includes(j))return Q?.characterValue;if(K.includes(j))return"";K.push(j);for(let te=0;te<J.length;te++)if(new Date().getTime(),J[te].ofTheConceptId==j)if(j!=J[te].toTheConceptId){let oe=J[te].toTheConceptId,H=yield n.I.GetConcept(oe);if(H!=null&&H.id!=0||oe==null||oe==null||(H=yield(0,N.r)(oe)),H.id!=0&&H?.type==null){let ae=H.typeId,he=yield n.I.GetConcept(ae);H.type=he,he==null&&ae!=null&&ae!=null&&(he=yield(0,N.r)(ae),H.type=he)}let re="the_",le=((ie=($=H?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(re,"");if(isNaN(Number(le))){if(le){const ae=yield D(oe,J,Z,K);ue[le]=ae}}else{const ae=yield D(oe,J,Z,K);ee[le]=ae,ue=ee}}else console.log("this is the faulty connection ",J[te]);return ue})}function W(U,P,M){return r(this,arguments,void 0,function*(j,J,Z,K=[]){var se,$,ie;let ue={},ee=[];if(j==0)return null;let Q=yield n.I.GetConcept(j);if(Q!=null&&Q.id!=0||j==null||j==null||(Q=yield(0,N.r)(j)),Q.id!=0&&Q.type==null){let te=Q.typeId,oe=yield n.I.GetConcept(te);Q.type=oe,oe==null&&te!=null&&te!=null&&(oe=yield(0,N.r)(te),Q.type=oe)}if((se=Q?.type)===null||se===void 0||se.characterValue,!Z.includes(j))return Q?.characterValue;if(K.includes(j))return"";K.push(j),ue.id=j;for(let te=0;te<J.length;te++)if(J[te].ofTheConceptId==j){let oe=J[te].toTheConceptId,H=yield n.I.GetConcept(oe);if(H!=null&&H.id!=0||oe==null||oe==null||(H=yield(0,N.r)(oe)),H&&H?.type==null){let ae=H.typeId,he=yield n.I.GetConcept(ae);H.type=he,he==null&&ae!=null&&ae!=null&&(he=yield(0,N.r)(ae),H.type=he)}let re="the_",le=((ie=($=H?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(re,"");if(isNaN(Number(le))){if(le){const ae=yield W(oe,J,Z);ue[le]=ae}}else{const ae=yield W(oe,J,Z);ee[le]=ae,ue=ee}}return ue})}},9003:(Y,x,y)=>{y.d(x,{S5:()=>r,kH:()=>o,qI:()=>C});var N=y(1863),b=y(5205),n=function(l,f,v,I){return new(v||(v=Promise))(function(i,a){function t(m){try{w(I.next(m))}catch(S){a(S)}}function c(m){try{w(I.throw(m))}catch(S){a(S)}}function w(m){var S;m.done?i(m.value):(S=m.value,S instanceof v?S:new v(function(E){E(S)})).then(t,c)}w((I=I.apply(l,[])).next())})};let h=10;class k{}function C(l){const f=b.Logger.logfunction("openDatabase",arguments);return new Promise(function(v,I){k.db&&(b.Logger.logUpdate(f),v(k.db));let i=b.BaseUrl.BASE_URL+"_FreeSchemaLocal"+b.BaseUrl.BASE_APPLICATION;const a=indexedDB.open(i,h);a.onupgradeneeded=t=>{var c=t.target.result,w="localconcept",m="localconnection",S="localid";console.log("this is the version upgrade",h),c.objectStoreNames.contains(w)&&c.deleteObjectStore(w),c.objectStoreNames.contains(m)&&c.deleteObjectStore(m),c.objectStoreNames.contains(S)&&c.deleteObjectStore(S),c.objectStoreNames.contains(w)||(c.createObjectStore(w,{keyPath:"id"}).transaction.oncomplete=E=>{}),c.objectStoreNames.contains(m)||(c.createObjectStore(m,{keyPath:"id"}).transaction.oncomplete=E=>{}),c.objectStoreNames.contains(S)||(c.createObjectStore(S,{keyPath:"id"}).transaction.oncomplete=E=>{e(S,{id:0,value:-100}),e(S,{id:1,value:-200}),e(S,{id:3,value:b.BaseUrl.getRandomizer()})}),v(c)},a.onerror=t=>{console.error("Why didn't you allow my web app to use IndexedDB?!",t),indexedDB.deleteDatabase(i),C(l),(0,N.ey)(f,"openDatabase",t),I(t)},a.onsuccess=function(t){var c=t.target;k.db=c.result,b.Logger.logUpdate(f),v(k.db)}})}function r(l){var f=arguments;return n(this,void 0,void 0,function*(){const v=b.Logger.logfunction("getObjectsFromLocalIndexDb",f);return new Promise(function(I,i){C(l).then(a=>{var t=[],c=a.transaction(l,"readwrite").objectStore(l).getAll();c.onsuccess=()=>{const w=c.result;for(var m=0;m<w.length;m++)t.push(w[m]);b.Logger.logUpdate(v),I(t)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot get objects from database because you cannot open the Local database",data:a};(0,N.ey)(v,"getObjectsFromLocalIndexDb",t),i(t)})})})}function e(l,f){const v=b.Logger.logfunction("storeToDatabase",[l,"localindexdb"]);return new Promise(function(I,i){C(l).then(a=>{const t=a.transaction(l,"readwrite").objectStore(l).add(f);t.onsuccess=c=>{b.Logger.logUpdate(v),I(f)},t.onerror=c=>{let w={status:400,ok:!1,message:"Cannot store to the Local database "+l,data:c,body:f};(0,N.ey)(v,"storeToDatabase",w),i(w)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot store to database because you cannot open the Local database",data:a};(0,N.ey)(v,"storeToDatabase",t),i(t)})})}function o(l,f){const v=b.Logger.logfunction("UpdateToDatabase",arguments);return new Promise(function(I,i){C(l).then(a=>{const t=a.transaction(l,"readwrite").objectStore(l).put(f);t.onsuccess=c=>{b.Logger.logUpdate(v),I(f)},t.onerror=c=>{let w={status:400,ok:!1,message:"Cannot Update to the Local database"+l,data:c,body:f};(0,N.ey)(v,"UpdateToDatabase",w),i(w)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot update to database because you cannot open the Local database",data:a};(0,N.ey)(v,"UpdateToDatabase",t),i(t)})})}},9371:(Y,x,y)=>{let N=y(3152);class b extends N{constructor(h){super(h),this.type="comment"}}Y.exports=b,b.default=b},9577:(Y,x,y)=>{let N=y(7793),b=y(1106),n=y(8339);function h(k,C){let r=new b(k,C),e=new n(r);try{e.parse()}catch(o){throw o}return e.root}Y.exports=h,h.default=h,N.registerParse(h)},9581:(Y,x,y)=>{y.d(x,{B:()=>N});class N{static setRandomizer(n){console.log("set randomizer",n),this.BASE_RANDOMIZER=n}static getRandomizer(){return this.BASE_RANDOMIZER}static GetConceptUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/getConcept":this.NODE_CACHE_URL+"/api/getConcept"}static GetConnectionUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get-connection-by-id":this.NODE_CACHE_URL+"/api/get-connection-by-id"}static GetConceptBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get_concept_bulk":this.NODE_CACHE_URL+"/api/get_concept_bulk"}static GetConnectionBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get_connection_bulk":this.NODE_CACHE_URL+"/api/get_connection_bulk"}static GetAllConceptsOfUserUrl(){return this.BASE_URL+"/api/get_all_concepts_of_user"}static GetAllConnectionsOfUserUrl(){return this.BASE_URL+"/api/get_all_connections_of_user"}static GetAllConnectionsOfCompositionUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition"}static GetAllConnectionsOfCompositionBulkUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition_bulk"}static GetConceptByCharacterValueUrl(){return this.BASE_URL+"/api/get_concept_by_character_value"}static GetConceptByCharacterAndTypeUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_type"}static GetConceptByCharacterAndCategoryUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category"}static GetConceptByCharacterAndCategoryDirectUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category_direct"}static GetCharacterByCharacterUrl(){return this.BASE_URL+"/api/get_character_by_character"}static GetAllConceptsByTypeUrl(){return this.BASE_URL+"/api/get_all_concepts_by_type"}static GetAllConnectionsOfConceptUrl(){return this.BASE_URL+"/api/get-link-connections"}static GetAllConnectionsToConceptUrl(){return this.BASE_URL+"/api/get-link-reverse-connections"}static GetAllAiData(){return this.BASE_URL+"/api/get-preloaded-concepts"}static getAppConfig(){return this.NODE_URL+"/api/v1/config"}static PostPrefetchConceptConnections(){return this.NODE_URL+"/api/v1/access-tracker/sync-access-tracker"}static GetSuggestedConcepts(){return this.NODE_URL+"/api/v1/access-tracker/list-concepts-file"}static GetSuggestedConnections(){return this.NODE_URL+"/api/v1/access-tracker/list-connections-file"}static PostLogger(){return this.LOG_SERVER+"/api/logger"}static LogHealth(){return this.LOG_SERVER+"/api/check"}static GetAllPrefetchConnectionsUrl(){return this.BASE_URL+"/api/get_all_connections_of_user?inpage=500"}static GetAllLinkerConnectionOfConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-from-concept"}static GetAllLinkerConnectionToConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-to-concept"}static DeleteConceptUrl(){return this.BASE_URL+"/api/delete_concept"}static DeleteUserUrl(){return this.BASE_URL+"/api/deleteuser"}static RecursiveSearchUrl(){return this.BASE_URL+"/api/recursivesearch-concept-connection"}static SearchLinkMultipleAllApiUrl(){return this.BASE_URL+"/api/Connection/search-link-multiple-all-ccs"}static MakeTheNameInBackendUrl(){return this.BASE_URL+"/api/make-name-from-frontend"}static SearchAllTypeWithLinker(n=!0){return n?this.BASE_URL+"/api/search-all-with-linker-ccs":this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static LoginUrl(){return this.BASE_URL+"/api/auth/login"}static SignupUrl(){return this.BASE_URL+"/api/auth/signup"}static GetCompositionConnectionBetweenTwoConceptsUrl(){return this.BASE_URL+"/api/get-composition-connection-between-two-concepts"}static SearchCompositionsUrl(){return this.BASE_URL+"/api/search-compositions"}static SearchLinkMultipleAll(){return this.BASE_URL+"/api/Connection/search-link-multiple-all"}static CreateSessionId(){return this.BASE_URL+"/api/create-session-id-remote"}static CreateSessionVisitUrl(){return this.BASE_URL+"/api/create-remote-session-visit"}static ViewInternalDataUrl(){return this.BASE_URL+"/api/view-api-internal-data-ccs-id-bulk"}static SearchInternalWithAuthenticatedCcsUrl(){return this.BASE_URL+"/api/search-composition-internal-authenticated-ccs"}static SearchInternalWithCcsUrl(){return this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static CreateGhostConceptApiUrl(n=!0){return n?N.NODE_URL+"/api/v1/local-concepts":N.NODE_URL+"/api/v1/local-concepts-without-auth"}static CreateGhostConnectionApiUrl(){return N.NODE_URL+"/api/v1/local-connections"}static GetRealConceptById(){return N.NODE_URL+"/api/v1/local-concepts-translate"}static GetReservedIdUrl(){return this.BASE_URL+"/api/get_reserved_ids"}static GetReservedConnectionIdUrl(){return this.BASE_URL+"/api/get_reserved_connection_ids"}static CreateTheTextDataUrl(){return this.BASE_URL+"/api/create_text_data"}static CreateTheCharacterDataUrl(){return this.BASE_URL+"/api/create_character_data"}static CreateTheConceptUrl(){return this.BASE_URL+"/api/create_the_concept"}static CreateTheConnectionUrl(){return this.BASE_URL+"/api/create_the_connection"}static CreateTheConnectionNewUrl(){return this.BASE_URL+"/api/create_the_connection_new"}static MakeTheTypeConceptUrl(){return this.BASE_URL+"/api/make_the_type_concept"}static DeleteTheConnectionUrl(){return this.BASE_URL+"/api/delete_connection"}static DeleteTheConnectionBulkUrl(){return this.BASE_URL+"/api/delete_connection_bulk"}static GetTypeConceptBulk(){return this.BASE_URL+"/api/get_type_concept_by_character_bulk"}static UploadFileLimitUrl(){return this.BASE_URL+"/api/upload/limit"}static FreeschemaQueryUrl(){return this.BASE_URL+"/api/freeschema-query"}static uploadImageUrl(){return this.BASE_URL+"/api/Image/UploadImage"}static uploadImageUrlWithSmall(){return this.BASE_URL+"/api/Image/UploadImageV2"}static uploadFileUrl(){return this.BASE_URL+"/api/Image/UploadFile"}static sendMail(){return this.BASE_URL+"/api/sendmail"}static sendBulkMail(){return this.BASE_URL+"/api/sendmail/bulk"}static getWidgetData(){return this.BASE_URL+"/api/get-widget"}static getLatestWidgetData(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get-latest-widget":this.NODE_CACHE_URL+"/api/get-latest-widget"}static getRecentWidgetData(){return this.BASE_URL+"/api/get-recent-widget"}static getConnectionsByTypes(){return this.BASE_URL+"/api/get-connection-by-types"}static CreatePrototypeUrl(){return this.BASE_URL+"/api/create-prototype"}static GetCachedImage(n){return"https://cdn.boomconcole.com/freeschema/"+n}}N.BASE_URL="https://localhost:7053/",N.NODE_CACHE_URL="",N.AI_URL="https://ai.freeschema.com",N.MQTT_URL="192.168.1.249",N.NODE_URL="http://localhost:5001",N.LOG_SERVER="https://logdev.freeschema.com",N.BASE_APPLICATION="",N.DOCUMENTATION_WIDGET=0,N.isNearestCache=!0,N.FLAGS={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1},N.BASE_RANDOMIZER=999},9606:(Y,x,y)=>{x.__esModule=!0,x.unesc=x.stripComments=x.getProp=x.ensureObject=void 0;var N=k(y(5286));x.unesc=N.default;var b=k(y(6291));x.getProp=b.default;var n=k(y(1557));x.ensureObject=n.default;var h=k(y(8354));function k(C){return C&&C.__esModule?C:{default:C}}x.stripComments=h.default},9635:(Y,x,y)=>{y.d(x,{x:()=>N});const N=new BroadcastChannel("Freeschema_mftsccs_browser_channel")},9700:(Y,x,y)=>{y.d(x,{V:()=>r});var N,b=y(5205),n=y(3278),h=y(1863),k=y(3518),C=function(e,o,l,f){return new(l||(l=Promise))(function(v,I){function i(c){try{t(f.next(c))}catch(w){I(w)}}function a(c){try{t(f.throw(c))}catch(w){I(w)}}function t(c){var w;c.done?v(c.value):(w=c.value,w instanceof l?w:new l(function(m){m(w)})).then(i,a)}t((f=f.apply(e,[])).next())})};class r{static startAutoSync(){this.autoSyncInterval?console.warn("Auto-sync is already running."):(this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS,setInterval(()=>{const o=Date.now();this.nextSyncTime&&o>=this.nextSyncTime&&(this.nextSyncTime=o+this.SYNC_INTERVAL_MS,this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())},3e4))}static stopAutoSync(){this.autoSyncInterval!==null&&(clearInterval(this.autoSyncInterval),this.autoSyncInterval=null,this.nextSyncTime=null)}static setLogLevel(o){this.logLevel=o}static shouldLog(o){return this.LOG_LEVELS.indexOf(o)>=this.LOG_LEVELS.indexOf(this.logLevel)}static formatLogData(o,l,f){const v=Object.assign({timestamp:new Date().toISOString(),level:o,message:l},f);return this.packageLogsData.push(v),o=="ERROR"&&(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer()),v}static log(o,l,f){if(this.logPackageActivationStatus)try{this.formatLogData(o,l,f||null)}catch(v){console.error("Error on Logger Log : ",v)}}static logUpdate(o){var l;try{if(!this.logPackageActivationStatus)return{};if(!o)return{};const f=Date.now();o.startTime=(l=o.startTime)!==null&&l!==void 0?l:f;const v=f-o.startTime;o.responseTime=`${v} ms`,!o.serviceWorker==1&&(o.serviceWorker=!1)}catch(f){(0,h.ey)(o,"Logger.logUpdate",f)}}static logfunction(o,...l){if(!this.logPackageActivationStatus)return{};const f=Date.now();let v=l;const I=b.BaseUrl.getRandomizer(),i=n.b.sessionId;let a={startTime:f,functionName:o,functionParameters:v,requestFrom:b.BaseUrl.BASE_APPLICATION,sessionId:i,applicationId:I};return this.formatLogData("INFO","function called",a)}static logError(o,l,f,v,I,i,a,t,c,w,m){try{const S=n.b.sessionId,E={startTime:o,userId:l,operationType:f,requestFrom:v,requestIP:I,responseStatus:i,responseTime:`${(performance.now()-o).toFixed(3)}ms`,responseSize:a?`${JSON.stringify(a).length}`:"0",sessionId:S?.toString(),functionName:t,functionParameters:c,userAgent:w,conceptsUsed:m};this.formatLogData("ERROR",`Information logged for ${t}`,E)}catch{console.error("Error on logError")}}static logApplication(o,l,f){if(this.logApplicationActivationStatus)try{const v={timestamp:new Date().toISOString(),level:o,message:l,data:f||null};this.applicationLogsData.push(v),o!="ROUTE"&&o!="USER_EVENT"||(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())}catch(v){console.error("Failed to log application activity:",v)}}static checkLoggerServerStatus(){return C(this,void 0,void 0,function*(){let o=1e4+N.checkInterval;const l=new Date;if(N.lastCheck&&l.getTime()-N.lastCheck.getTime()<o)console.log("still cooling down");else{try{let f=b.BaseUrl.LogHealth();N.lastCheck=new Date,(yield fetch(f,{method:"GET"})).ok&&(N.isLoggerActive=!0,N.checkInterval=0)}catch{console.warn("This is error in the logger check")}N.checkInterval=N.checkInterval+500}})}static sendApplicationLogsToServer(){return C(this,void 0,void 0,function*(){const o=this.applicationLogsData;try{if(!N.isLoggerActive)return void N.checkLoggerServerStatus();if(o.length===0)return;this.applicationLogsData=[],n.b.BearerAccessToken;const l=50;let f=(0,k.Xr)(),v=0;for(;o.length!=0;){const I=o.slice(0,l),i=yield fetch(b.BaseUrl.PostLogger(),{method:"POST",headers:f,body:JSON.stringify({logType:this.appLogs,logData:I})});i.ok||i.status===404&&(N.isLoggerActive=!1),o.splice(0,l),v+=l,v++}}catch{N.isLoggerActive=!1}})}static sendPackageLogsToServer(){return C(this,void 0,void 0,function*(){const o=this.packageLogsData;try{if(!N.isLoggerActive)return void N.checkLoggerServerStatus();if(o.length===0)return;this.packageLogsData=[];const l=300;let f=0;for(;o.length!=0;){const v=o.slice(0,l);let I=(0,k.Xr)();const i=yield fetch(b.BaseUrl.PostLogger(),{method:"POST",headers:I,body:JSON.stringify({logType:this.mftsccsBrowser,logData:v})});if(!i.ok)return void(i.status===404&&(N.isLoggerActive=!1));o.splice(0,l),f++}}catch{N.isLoggerActive=!1}})}static saveLogToLocalStorage(o,l){try{if(typeof localStorage===void 0)return void console.warn("Local Storage type undefined");{const f=JSON.parse((localStorage==null?void 0:localStorage.getItem(o))||"[]");f.push(l),localStorage?.setItem(o,JSON.stringify(f))}}catch{console.error("Error on saving log in localstorage"),this.log("ERROR","Error while saving log in local storage")}}static clearLogsFromLocalStorage(o){typeof localStorage!==void 0?localStorage?.removeItem(o):console.warn("localStorage is not available")}}N=r,r.isLoggerActive=!0,r.lastCheck=new Date,r.checkInterval=0,r.logLevel="INFO",r.packageLogsData=[],r.applicationLogsData=[],r.LOG_LEVELS=["DEBUG","INFO","WARNING","ERROR","ROUTE"],r.SYNC_INTERVAL_MS=6e4,r.nextSyncTime=null,r.appLogs="app",r.mftsccsBrowser="mftsccs",r.logApplicationActivationStatus=!1,r.logPackageActivationStatus=!1,r.autoSyncInterval=null,N.startAutoSync()},9720:(Y,x,y)=>{x.__esModule=!0,x.default=void 0;var N,b=(N=y(3295))&&N.__esModule?N:{default:N},n=y(1581);function h(C,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(C,r)}var k=function(C){var r,e;function o(l){var f;return(f=C.call(this,l)||this).type=n.TAG,f}return e=C,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,h(r,e),o}(b.default);x.default=k,Y.exports=x.default},9736:(Y,x,y)=>{y.d(x,{v:()=>c});var N=y(205),b=y(2515),n=function(w,m,S,E){return new(S||(S=Promise))(function(L,R){function D(P){try{U(E.next(P))}catch(M){R(M)}}function W(P){try{U(E.throw(P))}catch(M){R(M)}}function U(P){var M;P.done?L(P.value):(M=P.value,M instanceof S?M:new S(function(j){j(M)})).then(D,W)}U((E=E.apply(w,[])).next())})};class h{static addNodeToTree(m){if(this.root==null)return this.root=m,this.root;this.root=this.root.addNode(m,this.root,this.root.height)}static addConceptToTree(m){var S=new b.x(m.id,m,null,null);new b.x(m.characterValue,m,null,null),this.addNodeToTree(S)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((m,S)=>{this.checkFlag(m),setTimeout(()=>{S("not")},25e3)})})}static checkFlag(m){if(N.B.isLocalDataLoaded)return m("done");setTimeout(h.checkFlag,1e3,m)}static getNodeFromTree(m){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(m,this.root):null})}static getCharacterAndTypeFromTree(m,S){return this.root?this.root.getFromNodeWithCharacterAndType(m,S,this.root):this.root}static updateSyncStatus(m){return this.root?this.root.updateNodeSyncStatus(m,!0,this.root):this.root}static removeNodeFromTree(m){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,m))})}}h.root=null;var k=function(w,m,S,E){return new(S||(S=Promise))(function(L,R){function D(P){try{U(E.next(P))}catch(M){R(M)}}function W(P){try{U(E.throw(P))}catch(M){R(M)}}function U(P){var M;P.done?L(P.value):(M=P.value,M instanceof S?M:new S(function(j){j(M)})).then(D,W)}U((E=E.apply(w,[])).next())})};class C{static waitForDataToLoad(){return k(this,void 0,void 0,function*(){return new Promise((m,S)=>{this.checkFlag(m),setTimeout(()=>{S("not")},25e3)})})}static checkFlag(m){if(N.B.isLocalCharacterLoaded)return m("done");setTimeout(C.checkFlag,1e3,m)}static addNodeToTree(m){return k(this,void 0,void 0,function*(){return this.LocalCharacterRoot==null?(this.LocalCharacterRoot=m,this.LocalCharacterRoot):(this.LocalCharacterRoot=this.LocalCharacterRoot.addCharacterNode(m,this.LocalCharacterRoot,this.LocalCharacterRoot.height),this.LocalCharacterRoot)})}static addConceptToTree(m){if(m.characterValue!=""){var S=new b.x(m.characterValue,m,null,null);this.addNodeToTree(S)}}static getNodeFromTree(m){return this.LocalCharacterRoot?this.LocalCharacterRoot.getCharacterFromNode(m,this.LocalCharacterRoot):this.LocalCharacterRoot}static getCharacterAndTypeFromTree(m,S){return k(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndType(m,S,this.LocalCharacterRoot):this.LocalCharacterRoot})}static getCharacterAndCategoryFromTree(m,S){return k(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndCategory(m,S,this.LocalCharacterRoot):this.LocalCharacterRoot})}static removeConceptType(m,S){this.LocalCharacterRoot&&(this.LocalCharacterRoot=this.LocalCharacterRoot.removeNodeWithVariants(this.LocalCharacterRoot,m,S))}}C.LocalCharacterRoot=null;var r=function(w,m,S,E){return new(S||(S=Promise))(function(L,R){function D(P){try{U(E.next(P))}catch(M){R(M)}}function W(P){try{U(E.throw(P))}catch(M){R(M)}}function U(P){var M;P.done?L(P.value):(M=P.value,M instanceof S?M:new S(function(j){j(M)})).then(D,W)}U((E=E.apply(w,[])).next())})};class e{static addNodeToTree(m){return r(this,void 0,void 0,function*(){return this.LocalTypeRoot==null?(this.LocalTypeRoot=m,this.LocalTypeRoot):(this.LocalTypeRoot=this.LocalTypeRoot.addTypeNode(m,this.LocalTypeRoot,this.LocalTypeRoot.height),this.LocalTypeRoot)})}static addConceptToTree(m){if(m.typeId!=0){var S=new b.x(m.typeId,m,null,null);this.addNodeToTree(S)}}static removeConceptType(m,S){this.LocalTypeRoot&&(this.LocalTypeRoot=this.LocalTypeRoot.removeNodeWithVariants(this.LocalTypeRoot,m,S))}static getNodeFromTree(m){return this.LocalTypeRoot?this.LocalTypeRoot.getFromNode(m,this.LocalTypeRoot):this.LocalTypeRoot}static getTypeVariantsFromTree(m){var S=this.getNodeFromTree(m),E=[];if(S){E.push(S?.value);for(let L=0;L<S.variants.length;L++)E.push(S.variants[L].value);return E}}static waitForDataToLoad(){return r(this,void 0,void 0,function*(){return new Promise((m,S)=>{this.checkFlag(m),setTimeout(()=>{S("not")},25e3)})})}static checkFlag(m){if(N.B.isLocalTypeLoaded)return m("done");setTimeout(e.checkFlag,1e3,m)}static getTypeVariantsFromTreeWithUserId(m,S){return r(this,void 0,void 0,function*(){var E=[],L=this.getNodeFromTree(m);if(L){console.log("this is the node to type",L),L.value.userId!=S&&L.value.userId!=999||E.push(L?.value);for(let R=0;R<L.variants.length;R++)L.variants[R].value.userId!=S&&L.value.userId!=999||E.push(L.variants[R].value)}return E})}}e.LocalTypeRoot=null;var o=y(6416),l=y(3026),f=y(7820),v=y(4864),I=y(628),i=y(5205),a=y(3278),t=function(w,m,S,E){return new(S||(S=Promise))(function(L,R){function D(P){try{U(E.next(P))}catch(M){R(M)}}function W(P){try{U(E.throw(P))}catch(M){R(M)}}function U(P){var M;P.done?L(P.value):(M=P.value,M instanceof S?M:new S(function(j){j(M)})).then(D,W)}U((E=E.apply(w,[])).next())})};class c{constructor(){this.name="conceptsArray"}static AddConcept(m){m.id!=0&&(h.addConceptToTree(m),C.addConceptToTree(m),e.addConceptToTree(m),this.localconceptsArray.push(m))}static AddPermanentConcept(m){m.id!=0&&(h.removeNodeFromTree(m.ghostId),C.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId),f.G.addConceptToTree(m),l.I.AddConcept(m),(0,i.AddGhostConcept)(m,m.userId,a.b.sessionId))}static RemoveConcept(m){return t(this,void 0,void 0,function*(){try{m.id!=0&&(h.removeNodeFromTree(m.ghostId),C.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId))}catch(S){throw S}})}static RemoveConceptById(m){return t(this,void 0,void 0,function*(){try{let S=yield c.GetConcept(m);S.id!=0&&(h.removeNodeFromTree(m),C.removeConceptType(S.characterValue,S.ghostId),e.removeConceptType(S.typeId,S.ghostId),I.H.RemoveConcept(S))}catch(S){throw S}})}static AddConceptToMemory(m){m.id!=0&&(h.addConceptToTree(m),C.addConceptToTree(m),e.addConceptToTree(m))}static GetConcept(m){return t(this,void 0,void 0,function*(){var S=(0,o.u)(),E=yield h.getNodeFromTree(m);if(E?.value){var L=E.value;L&&(S=L)}return S})}static UpdateConceptSyncStatus(m){return t(this,void 0,void 0,function*(){h.updateSyncStatus(m)})}static GetConceptByGhostId(m){return t(this,void 0,void 0,function*(){var S=(0,o.u)(),E=yield f.G.getNodeFromTree(m);if(E?.value){var L=E.value;L&&(S=L)}return S})}static GetConceptByCharacter(m){return t(this,void 0,void 0,function*(){var S=(0,o.u)(),E=C.getNodeFromTree(m);return E&&(S=E.value),S})}static GetConceptByCharacterAndTypeLocal(m,S){return t(this,void 0,void 0,function*(){var E=(0,o.u)(),L=yield C.getCharacterAndTypeFromTree(m,S);return L&&(E=L.value),E})}static GetConceptByCharacterAndCategoryLocal(m,S){return t(this,void 0,void 0,function*(){var E=(0,o.u)(),L=yield C.getCharacterAndCategoryFromTree(m,S);return L&&(E=L.value),E})}static GetConceptsByTypeId(m){let S=[];for(var E=0;E<this.localconceptsArray.length;E++)this.localconceptsArray[E].typeId==m&&S.push(this.localconceptsArray[E]);return S}static GetConceptsByTypeIdAndUser(m,S){return t(this,void 0,void 0,function*(){let E=[];return E=yield e.getTypeVariantsFromTreeWithUserId(m,S),E})}static ClearData(){return t(this,void 0,void 0,function*(){this.localconceptsArray=[],v.G.connectionArray=[]})}getName(){return this.name}}c.localconceptsArray=[]},9746:()=>{},9934:(Y,x,y)=>{function N(b,n){return b.indexOf(n)===-1&&b.push(n),b}y.d(x,{A:()=>N})},9975:(Y,x,y)=>{y.d(x,{A:()=>k});var N=y(5205),b=y(9736),n=y(3077),h=function(C,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function I(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,I)}i((o=o.apply(C,r||[])).next())})};function k(C,r,e,o,l){return h(this,arguments,void 0,function*(f,v,I,i,a,t={concepts:[],connections:[]}){var c,w,m,S;if(N.serviceWorker)try{const R=yield(0,N.sendMessage)("MakeTheConceptLocal",{referent:f,typeCharacter:v,userId:I,categoryId:i,typeId:a,actions:t});return!((w=(c=R?.actions)===null||c===void 0?void 0:c.concepts)===null||w===void 0)&&w.length&&(t.concepts=JSON.parse(JSON.stringify(R.actions.concepts))),!((S=(m=R?.actions)===null||m===void 0?void 0:m.connections)===null||S===void 0)&&S.length&&(t.connections=JSON.parse(JSON.stringify(R.actions.connections))),R.data}catch(R){console.error("MakeTheConceptLocal error sw: ",R),(0,N.handleServiceWorkerException)(R)}let E=yield b.v.GetConceptByCharacterAndTypeLocal(f,a),L=E;return v=="the"&&(i=1),L.id==0&&(E=yield(0,n.A)(f,v,I,i,a,4,void 0,null,t),L=E),L})}},9977:()=>{}},jr={};function Ft(Y){var x=jr[Y];if(x!==void 0)return x.exports;var y=jr[Y]={exports:{}};return Vs[Y](y,y.exports,Ft),y.exports}Ft.n=Y=>{var x=Y&&Y.__esModule?()=>Y.default:()=>Y;return Ft.d(x,{a:x}),x},Ft.d=(Y,x)=>{for(var y in x)Ft.o(x,y)&&!Ft.o(Y,y)&&Object.defineProperty(Y,y,{enumerable:!0,get:x[y]})},Ft.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ft.o=(Y,x)=>Object.prototype.hasOwnProperty.call(Y,x),Ft.r=Y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Y,"__esModule",{value:!0})};var X=Ft(5205);const js=X.ADMIN,$s=X.ALLID,Hs=X.AccessTracker,qs=X.AddGhostConcept,zs=X.Anomaly,Js=X.BaseUrl,Qs=X.BinaryTree,Ys=X.BuildWidgetFromId,Xs=X.BuilderStatefulWidget,Zs=X.Composition,Ks=X.CompositionBinaryTree,ea=X.CompositionNode,ta=X.Concept,na=X.ConceptsData,oa=X.Connection,ia=X.ConnectionData,ra=X.CountInfo,sa=X.CreateComposition,aa=X.CreateConnection,ca=X.CreateConnectionBetweenEntityLocal,la=X.CreateConnectionBetweenTwoConcepts,da=X.CreateConnectionBetweenTwoConceptsGeneral,ua=X.CreateConnectionBetweenTwoConceptsLocal,ha=X.CreateData,pa=X.CreateDefaultConcept,fa=X.CreateDefaultLConcept,ga=X.CreateSession,ya=X.CreateSessionVisit,va=X.CreateTheCompositionLocal,ma=X.CreateTheCompositionWithCache,Ca=X.CreateTheConnection,wa=X.CreateTheConnectionGeneral,Ta=X.CreateTheConnectionLocal,ka=X.DATAID,Ia=X.DATAIDDATE,Sa=X.DATAV2,Aa=X.DelayFunctionExecution,Na=X.DeleteConceptById,La=X.DeleteConceptLocal,ba=X.DeleteConnectionById,_a=X.DeleteConnectionByIdBulk,Ea=X.DeleteConnectionByType,xa=X.DeleteConnectionByTypeBulk,Oa=X.DeleteUser,Ba=X.DependencyObserver,Ra=X.Environments,Da=X.FilterSearch,Ga=X.FormatFromConnections,Fa=X.FormatFromConnectionsAltered,Pa=X.FreeschemaQuery,Ua=X.FreeschemaQueryApi,Wa=X.GetAllConnectionsOfComposition,Ma=X.GetAllConnectionsOfCompositionBulk,Va=X.GetAllTheConnectionsByTypeAndOfTheConcept,ja=X.GetComposition,$a=X.GetCompositionBulk,Ha=X.GetCompositionBulkWithDataId,qa=X.GetCompositionFromConnectionsWithDataId,za=X.GetCompositionFromConnectionsWithDataIdFromConnections,Ja=X.GetCompositionFromConnectionsWithDataIdInObject,Qa=X.GetCompositionFromConnectionsWithDataIdIndex,Ya=X.GetCompositionFromConnectionsWithIndex,Xa=X.GetCompositionFromConnectionsWithIndexFromConnections,Za=X.GetCompositionFromMemoryWithConnections,Ka=X.GetCompositionList,ec=X.GetCompositionListAll,tc=X.GetCompositionListAllWithId,nc=X.GetCompositionListListener,oc=X.GetCompositionListLocal,ic=X.GetCompositionListLocalWithId,rc=X.GetCompositionListWithId,sc=X.GetCompositionListWithIdUpdated,ac=X.GetCompositionListener,cc=X.GetCompositionLocal,lc=X.GetCompositionLocalWithId,dc=X.GetCompositionWithAllIds,uc=X.GetCompositionWithCache,hc=X.GetCompositionWithDataIdBulk,pc=X.GetCompositionWithDataIdWithCache,fc=X.GetCompositionWithId,gc=X.GetCompositionWithIdAndDateFromMemory,yc=X.GetConceptBulk,vc=X.GetConceptByCharacter,mc=X.GetConceptByCharacterAndCategoryLocal,Cc=X.GetConceptByCharacterAndType,wc=X.GetConnectionBetweenTwoConceptsLinker,Tc=X.GetConnectionBulk,kc=X.GetConnectionById,Ic=X.GetConnectionDataPrefetch,Sc=X.GetConnectionOfTheConcept,Ac=X.GetConnectionTypeForCount,Nc=X.GetFreeschemaImage,Lc=X.GetFreeschemaImageUrl,bc=X.GetImageApi,_c=X.GetLink,Ec=X.GetLinkListListener,xc=X.GetLinkListener,Oc=X.GetLinkRaw,Bc=X.GetLinkerConnectionFromConcepts,Rc=X.GetLinkerConnectionToConcepts,Dc=X.GetRelation,Gc=X.GetRelationLocal,Fc=X.GetRelationRaw,Pc=X.GetTheConcept,Uc=X.GetTheConceptLocal,Wc=X.GetUserGhostId,Mc=X.JUSTDATA,Vc=X.LConcept,jc=X.LConnection,$c=X.LISTNORMAL,Hc=X.LocalConceptsData,qc=X.LocalSyncData,zc=X.LocalTransaction,Jc=X.LogEvent,Qc=X.Logger,Yc=X.LoginToBackend,Xc=X.MakeTheInstanceConcept,Zc=X.MakeTheInstanceConceptLocal,Kc=X.MakeTheTimestamp,el=X.MakeTheTypeConceptApi,tl=X.MakeTheTypeConceptLocal,nl=X.NORMAL,ol=X.PRIVATE,il=X.PUBLIC,rl=X.PatcherStructure,sl=X.Prototype,al=X.RAW,cl=X.RecursiveSearchApi,ll=X.RecursiveSearchApiNewRawFullLinker,dl=X.RecursiveSearchApiRaw,ul=X.RecursiveSearchApiRawFullLinker,hl=X.RecursiveSearchApiWithInternalConnections,pl=X.RecursiveSearchListener,fl=X.SchemaQuery,gl=X.SchemaQueryListener,yl=X.SearchAllConcepts,vl=X.SearchLinkInternal,ml=X.SearchLinkInternalAll,Cl=X.SearchLinkMultipleAll,wl=X.SearchLinkMultipleAllObservable,Tl=X.SearchLinkMultipleApi,kl=X.SearchQuery,Il=X.SearchStructure,Sl=X.SearchWithLinker,Al=X.SearchWithTypeAndLinker,Nl=X.SearchWithTypeAndLinkerApi,Ll=X.Selector,bl=X.SessionData,_l=X.Signin,El=X.Signup,xl=X.SignupEntity,Ol=X.SplitStrings,Bl=X.StatefulWidget,Rl=X.SyncData,Dl=X.TrashTheConcept,Gl=X.UpdateComposition,Fl=X.UpdateCompositionLocal,Pl=X.UserBinaryTree,Ul=X.Validator,Wl=X.ViewInternalData,Ml=X.ViewInternalDataApi,Vl=X.WidgetTree,jl=X.convertFromConceptToLConcept,$l=X.convertFromLConceptToConcept,Hl=X.convertWidgetTreeToWidget,ql=X.convertWidgetTreeToWidgetWithWrapper,zl=X.createFormFieldData,Jl=X.createPrototypeLocal,Ql=X.dispatchIdEvent,Yl=X.getFromDatabaseWithType,Xl=X.getObjectsFromIndexDb,Zl=X.getUploadFileLimit,Kl=X.getUserDetails,ed=X.getWidgetBulkFromId,td=X.getWidgetFromId,nd=X.handleServiceWorkerException,od=X.hasActivatedSW,id=X.importLatestWidget,rd=X.importRecentWidget,sd=X.init,ad=X.orderTheConnections,cd=X.recursiveFetch,ld=X.recursiveFetchNew,dd=X.removeAllChildren,ud=X.renderImportedWidget,hd=X.renderLatestWidget,pd=X.renderPage,fd=X.renderWidget,gd=X.searchLinkMultipleListener,yd=X.sendEmail,vd=X.sendMessage,md=X.serviceWorker,Cd=X.setHasActivatedSW,wd=X.storeToDatabase,Td=X.subscribedListeners,kd=X.unwrapContainers,Id=X.updateAccessToken,Sd=X.uploadAttachment,Ad=X.uploadFile,Nd=X.uploadImage,Ld=X.uploadImageV2,bd=X.validDocumentFormats,_d=X.validImageFormats,Ed=Object.freeze(Object.defineProperty({__proto__:null,ADMIN:js,ALLID:$s,AccessTracker:Hs,AddGhostConcept:qs,Anomaly:zs,BaseUrl:Js,BinaryTree:Qs,BuildWidgetFromId:Ys,BuilderStatefulWidget:Xs,Composition:Zs,CompositionBinaryTree:Ks,CompositionNode:ea,Concept:ta,ConceptsData:na,Connection:oa,ConnectionData:ia,CountInfo:ra,CreateComposition:sa,CreateConnection:aa,CreateConnectionBetweenEntityLocal:ca,CreateConnectionBetweenTwoConcepts:la,CreateConnectionBetweenTwoConceptsGeneral:da,CreateConnectionBetweenTwoConceptsLocal:ua,CreateData:ha,CreateDefaultConcept:pa,CreateDefaultLConcept:fa,CreateSession:ga,CreateSessionVisit:ya,CreateTheCompositionLocal:va,CreateTheCompositionWithCache:ma,CreateTheConnection:Ca,CreateTheConnectionGeneral:wa,CreateTheConnectionLocal:Ta,DATAID:ka,DATAIDDATE:Ia,DATAV2:Sa,DelayFunctionExecution:Aa,DeleteConceptById:Na,DeleteConceptLocal:La,DeleteConnectionById:ba,DeleteConnectionByIdBulk:_a,DeleteConnectionByType:Ea,DeleteConnectionByTypeBulk:xa,DeleteUser:Oa,DependencyObserver:Ba,Environments:Ra,FilterSearch:Da,FormatFromConnections:Ga,FormatFromConnectionsAltered:Fa,FreeschemaQuery:Pa,FreeschemaQueryApi:Ua,GetAllConnectionsOfComposition:Wa,GetAllConnectionsOfCompositionBulk:Ma,GetAllTheConnectionsByTypeAndOfTheConcept:Va,GetComposition:ja,GetCompositionBulk:$a,GetCompositionBulkWithDataId:Ha,GetCompositionFromConnectionsWithDataId:qa,GetCompositionFromConnectionsWithDataIdFromConnections:za,GetCompositionFromConnectionsWithDataIdInObject:Ja,GetCompositionFromConnectionsWithDataIdIndex:Qa,GetCompositionFromConnectionsWithIndex:Ya,GetCompositionFromConnectionsWithIndexFromConnections:Xa,GetCompositionFromMemoryWithConnections:Za,GetCompositionList:Ka,GetCompositionListAll:ec,GetCompositionListAllWithId:tc,GetCompositionListListener:nc,GetCompositionListLocal:oc,GetCompositionListLocalWithId:ic,GetCompositionListWithId:rc,GetCompositionListWithIdUpdated:sc,GetCompositionListener:ac,GetCompositionLocal:cc,GetCompositionLocalWithId:lc,GetCompositionWithAllIds:dc,GetCompositionWithCache:uc,GetCompositionWithDataIdBulk:hc,GetCompositionWithDataIdWithCache:pc,GetCompositionWithId:fc,GetCompositionWithIdAndDateFromMemory:gc,GetConceptBulk:yc,GetConceptByCharacter:vc,GetConceptByCharacterAndCategoryLocal:mc,GetConceptByCharacterAndType:Cc,GetConnectionBetweenTwoConceptsLinker:wc,GetConnectionBulk:Tc,GetConnectionById:kc,GetConnectionDataPrefetch:Ic,GetConnectionOfTheConcept:Sc,GetConnectionTypeForCount:Ac,GetFreeschemaImage:Nc,GetFreeschemaImageUrl:Lc,GetImageApi:bc,GetLink:_c,GetLinkListListener:Ec,GetLinkListener:xc,GetLinkRaw:Oc,GetLinkerConnectionFromConcepts:Bc,GetLinkerConnectionToConcepts:Rc,GetRelation:Dc,GetRelationLocal:Gc,GetRelationRaw:Fc,GetTheConcept:Pc,GetTheConceptLocal:Uc,GetUserGhostId:Wc,JUSTDATA:Mc,LConcept:Vc,LConnection:jc,LISTNORMAL:$c,LocalConceptsData:Hc,LocalSyncData:qc,LocalTransaction:zc,LogEvent:Jc,Logger:Qc,LoginToBackend:Yc,MakeTheInstanceConcept:Xc,MakeTheInstanceConceptLocal:Zc,MakeTheTimestamp:Kc,MakeTheTypeConceptApi:el,MakeTheTypeConceptLocal:tl,NORMAL:nl,PRIVATE:ol,PUBLIC:il,PatcherStructure:rl,Prototype:sl,RAW:al,RecursiveSearchApi:cl,RecursiveSearchApiNewRawFullLinker:ll,RecursiveSearchApiRaw:dl,RecursiveSearchApiRawFullLinker:ul,RecursiveSearchApiWithInternalConnections:hl,RecursiveSearchListener:pl,SchemaQuery:fl,SchemaQueryListener:gl,SearchAllConcepts:yl,SearchLinkInternal:vl,SearchLinkInternalAll:ml,SearchLinkMultipleAll:Cl,SearchLinkMultipleAllObservable:wl,SearchLinkMultipleApi:Tl,SearchQuery:kl,SearchStructure:Il,SearchWithLinker:Sl,SearchWithTypeAndLinker:Al,SearchWithTypeAndLinkerApi:Nl,Selector:Ll,SessionData:bl,Signin:_l,Signup:El,SignupEntity:xl,SplitStrings:Ol,StatefulWidget:Bl,SyncData:Rl,TrashTheConcept:Dl,UpdateComposition:Gl,UpdateCompositionLocal:Fl,UserBinaryTree:Pl,Validator:Ul,ViewInternalData:Wl,ViewInternalDataApi:Ml,WidgetTree:Vl,convertFromConceptToLConcept:jl,convertFromLConceptToConcept:$l,convertWidgetTreeToWidget:Hl,convertWidgetTreeToWidgetWithWrapper:ql,createFormFieldData:zl,createPrototypeLocal:Jl,dispatchIdEvent:Ql,getFromDatabaseWithType:Yl,getObjectsFromIndexDb:Xl,getUploadFileLimit:Zl,getUserDetails:Kl,getWidgetBulkFromId:ed,getWidgetFromId:td,handleServiceWorkerException:nd,hasActivatedSW:od,importLatestWidget:id,importRecentWidget:rd,init:sd,orderTheConnections:ad,recursiveFetch:cd,recursiveFetchNew:ld,removeAllChildren:dd,renderImportedWidget:ud,renderLatestWidget:hd,renderPage:pd,renderWidget:fd,searchLinkMultipleListener:gd,sendEmail:yd,sendMessage:vd,serviceWorker:md,setHasActivatedSW:Cd,storeToDatabase:wd,subscribedListeners:Td,unwrapContainers:kd,updateAccessToken:Id,uploadAttachment:Sd,uploadFile:Ad,uploadImage:Nd,uploadImageV2:Ld,validDocumentFormats:bd,validImageFormats:_d},Symbol.toStringTag,{value:"Module"}));export{Mc as A,sd as B,ja as C,wc as D,gl as E,kl as F,Ta as G,Ea as H,aa as I,Bl as J,Pa as K,Hl as L,Na as M,ul as N,va as O,xl as P,Ra as Q,Cl as R,cd as S,Id as U,La as V,Dc as Y,fl as _,Pc as a,zc as b,Tc as c,tc as d,qc as e,Uc as f,nl as g,ka as h,Xs as i,hd as j,td as k,Js as l,ql as m,Sa as n,Vl as o,Zc as p,ba as q,Va as r,ca as s,Ed as t,xa as u,tl as v,Xc as w,gd as x,Da as y,Ul as z};
