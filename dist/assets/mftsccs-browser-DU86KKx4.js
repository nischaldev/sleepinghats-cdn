var Uc={1735:(he,q,m)=>{m.d(q,{J:()=>S});var E,F=m(4059),c=m(3278),f=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,[])).next())})};class S{static incrementConcept(s){try{s&&(this.conceptsData[s]=(this.conceptsData[s]||0)+1)}catch{console.error("Failed on increment concept")}}static incrementConnection(s){try{s&&(this.connectionsData[s]=(this.connectionsData[s]||0)+1)}catch{console.error("Failed on increment connection")}}static getTopConcepts(s){return Object.entries(this.conceptsData).map(([i,u])=>[parseInt(i),u]).sort((i,u)=>u[1]-i[1]).slice(0,s)}static getTopConnections(s){return Object.entries(this.connectionsData).map(([i,u])=>[parseInt(i),u]).sort((i,u)=>u[1]-i[1]).slice(0,s)}static saveDataToLocalStorage(){const s={concepts:this.conceptsData,connections:this.connectionsData};localStorage?.setItem(this.accessData,JSON.stringify(s))}static loadDataFromLocalStorage(){const s=localStorage==null?void 0:localStorage.getItem(this.accessData);if(s){const i=JSON.parse(s);this.conceptsData=i.concepts||{},this.connectionsData=i.connections||{}}}static sendToServer(){return f(this,void 0,void 0,function*(){try{yield this.syncToServer()}catch{console.error("Failed to process Access Tracker Sync with Server")}})}static syncToServer(){return f(this,void 0,void 0,function*(){try{if(!Object.keys(this.conceptsData).length&&!Object.keys(this.connectionsData).length)return;const s=c.b.BearerAccessToken;if(!s)return;const i=this.conceptsData&&Object.keys(this.conceptsData).length>0?this.conceptsData:{},u=this.connectionsData&&Object.keys(this.connectionsData).length>0?this.connectionsData:{},v=yield fetch(F.BaseUrl.PostPrefetchConceptConnections(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({concepts:i,connections:u})});if(!v.ok)throw new Error("Failed to sync data to the server.");yield v.json(),this.conceptsData={},this.connectionsData={},this.setNextSyncTime()}catch(s){console.error("Sync error:",s)}})}static setNextSyncTime(){this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS}static startAutoSync(){setInterval(()=>{const s=Date.now();this.nextSyncTime&&s>=this.nextSyncTime&&this.syncNow().catch(console.error)},6e4)}static syncNow(){return f(this,void 0,void 0,function*(){try{this.activateStatus?yield this.syncToServer():console.warn("Access Tracker inactive.")}catch{console.error("Error on sync access tracker")}})}static GetSuggestedConcepts(s){return f(this,void 0,void 0,function*(){try{const i=c.b.BearerAccessToken,u=new URL(F.BaseUrl.GetSuggestedConcepts());s!==void 0&&u.searchParams.append("top",s.toString());const v=yield fetch(u.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}});if(!v.ok){const w=yield v.text();throw new Error(`Failed to load concepts: ${v.status} ${v.statusText}. Details: ${w}`)}const I=(yield v.json())||[];return yield this.addConceptToBinaryTree(I.data),I}catch(i){throw i instanceof Error?(console.error("Error fetching suggested concepts:",i.message),new Error("Unable to fetch suggested concepts. Please try again later.")):(console.error("An unexpected error occurred:",i),new Error("An unexpected error occurred while fetching suggested concepts."))}})}static GetSuggestedConnections(s){return f(this,void 0,void 0,function*(){try{const i=c.b.BearerAccessToken,u=new URL(F.BaseUrl.GetSuggestedConnections());s!==void 0&&u.searchParams.append("top",s.toString());const v=yield fetch(u.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}});if(!v.ok){const w=yield v.text();throw new Error(`Failed to load connections: ${v.status} ${v.statusText}. Details: ${w}`)}const I=(yield v.json())||[];return yield this.addConnectionToBinaryTree(I.data),I}catch(i){throw i instanceof Error?(console.error("Error fetching suggested Connections:",i.message),new Error("Unable to fetch suggested connections. Please try again later.")):(console.error("An unexpected error occurred:",i),new Error("An unexpected error occurred while fetching suggested Connections."))}})}static addConceptToBinaryTree(s){return f(this,void 0,void 0,function*(){try{s.forEach(i=>{F.ConceptsData.AddConcept(i)})}catch{console.error("Error on adding Concepts Data into tree")}})}static addConnectionToBinaryTree(s){return f(this,void 0,void 0,function*(){try{s.forEach(i=>{F.ConnectionData.AddConnection(i)})}catch{console.error("Error on adding Connections Data into tree")}})}}E=S,S.conceptsData={},S.connectionsData={},S.SYNC_INTERVAL_MS=12e4,S.nextSyncTime=Date.now(),S.activateStatus=!1,S.accessData="Access Data",E.startAutoSync()},1167:(he,q,m)=>{m.d(q,{Y:()=>A});var E=m(9581),F=m(3518),c=m(4059),f=m(1863),S=function(s,i,u,v){return new(u||(u=Promise))(function(I,w){function L(a){try{l(v.next(a))}catch(h){w(h)}}function d(a){try{l(v.throw(a))}catch(h){w(h)}}function l(a){var h;a.done?I(a.value):(h=a.value,h instanceof u?h:new u(function(N){N(h)})).then(L,d)}l((v=v.apply(s,[])).next())})};function A(s){return S(this,void 0,void 0,function*(){const i=c.Logger.logfunction("CreateTheConceptApi",s);let u=(0,c.CreateDefaultConcept)();try{var v=(0,F.Xr)();const I=yield fetch(E.B.CreateTheConceptUrl(),{method:"POST",headers:v,body:JSON.stringify(s)});if(!I.ok)throw(0,f.ry)(I),new Error(`Error! status: ${I.status}`);return u=yield I.json(),c.Logger.logUpdate(i),u}catch(I){I instanceof Error?console.log("Create the concept api error message: ",I.message):console.log("Create the concept api unexpected error: ",I),(0,f.Mb)(I,E.B.CreateTheConceptUrl()),(0,f.ey)(i,"CreateTheConceptApi",I)}})}},2:(he,q,m)=>{m.d(q,{s:()=>i});var E=m(8286),F=m(9581),c=m(1412),f=m(3518),S=m(1863),A=m(4059),s=function(v,I,w,L){return new(w||(w=Promise))(function(d,l){function a(k){try{N(L.next(k))}catch(T){l(T)}}function h(k){try{N(L.throw(k))}catch(T){l(T)}}function N(k){var T;k.done?d(k.value):(T=k.value,T instanceof w?T:new w(function(_){_(T)})).then(a,h)}N((L=L.apply(v,[])).next())})};function i(v){var I=arguments;return s(this,void 0,void 0,function*(){const w=A.Logger.logfunction("GetAllConnectionsOfComposition",I);var L=[];if((L=yield E.d.GetConnectionsOfConcept(v)).length==0)L=yield u(v);else{var d=yield u(v);(0,c.e)(d,L),L=d}return A.Logger.logUpdate(w),L})}function u(v){var I=arguments;return s(this,void 0,void 0,function*(){const w=A.Logger.logfunction("GetAllConnectionsOfCompositionOnline",I);var L=[];try{(0,f.Xr)("application/json");const l=new Headers,a=new FormData;a.append("composition_id",v.toString());const h=yield fetch(F.B.GetAllConnectionsOfCompositionUrl(),{method:"POST",headers:l,body:a});if(console.log("this is getting connection from online",F.B.GetAllConnectionsOfCompositionUrl(),v),!h.ok)throw(0,S.ry)(h),new Error(`Error! status: ${h.status}`);const N=yield h.json();for(var d=0;d<N.length;d++)E.d.AddConnection(N[d]),L.push(N[d]);return A.Logger.logUpdate(w),L}catch(l){l instanceof Error?console.log("Get all connection of composition error : ",l.message):console.log("Get all connection of composition error : ",l),(0,S.Mb)(l,F.B.GetAllConnectionsOfCompositionUrl()),(0,S.ey)(w,"GetAllConnectionsOfCompositionOnline",l)}})}},8642:(he,q,m)=>{m.d(q,{Y:()=>v});var E=m(8286),F=m(9581),c=m(4364),f=m(5284),S=m(1412),A=m(3518),s=m(1863),i=m(4059),u=function(I,w,L,d){return new(L||(L=Promise))(function(l,a){function h(T){try{k(d.next(T))}catch(_){a(_)}}function N(T){try{k(d.throw(T))}catch(_){a(_)}}function k(T){var _;T.done?l(T.value):(_=T.value,_ instanceof L?_:new L(function(B){B(_)})).then(h,N)}k((d=d.apply(I,w||[])).next())})};function v(){var I=arguments;return u(this,arguments,void 0,function*(w=[]){const L=i.Logger.logfunction("GetAllConnectionsOfCompositionBulk",I)||{};if(i.serviceWorker){L.serviceWorker=!0;try{const h=yield(0,i.sendMessage)("GetAllConnectionsOfCompositionBulk",{composition_ids:w});return i.Logger.logUpdate(L),h.data}catch(h){console.error("GetAllConnectionsOfCompositionBulk sw error: ",h),(0,s.ey)(L,"GetAllConnectionsOfCompositionBulk",h),(0,i.handleServiceWorkerException)(h)}}var d=[];if(w.length<=0)return d;var l=yield(0,f.B)(w),a=yield function(){var h=arguments;return u(this,arguments,void 0,function*(N=[]){const k=i.Logger.logfunction("GetAllConnectionsOfCompositionOnline",h);var T=[];try{var _=(0,A.Xr)();const R=yield fetch(F.B.GetAllConnectionsOfCompositionBulkUrl(),{method:"POST",headers:_,body:JSON.stringify(N)});if(R.ok){const D=yield R.json();for(var B=0;B<D.length;B++)E.d.AddConnection(D[B]),T.push(D[B])}else console.log("Get all connections of composition bulk error message: ","Cannot get response"),(0,s.ry)(R);return i.Logger.logUpdate(k),T}catch(R){R instanceof Error?console.log("Get all connections of composition bulk error message: ",R.message):console.log("Get all connections of composition bulk unexpected error: ",R),(0,s.Mb)(R,F.B.GetAllConnectionsOfCompositionBulkUrl()),(0,s.ey)(k,"GetAllConnectionsOfCompositionOnline",R)}})}(w);return d=a,(0,S.e)(d,l),yield(0,c.s)(d),i.Logger.logUpdate(L),d})}},8675:(he,q,m)=>{m.d(q,{l:()=>S});var E=m(1863),F=m(3518),c=m(4059),f=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,[])).next())})};function S(A){var s=arguments;return f(this,void 0,void 0,function*(){c.Logger.logfunction("GetAllLinkerConnectionsFromTheConcept",s);var i=[];try{new Date().getTime();var u=(0,F.Xr)("application/x-www-form-urlencoded");const w=yield fetch(c.BaseUrl.GetAllLinkerConnectionOfConceptUrl()+`?conceptId=${A}`,{method:"GET",headers:u});if(w.ok){const L=yield w.json();for(var v=0;v<L.length;v++){var I=L[v];i.push(I)}}else console.log("Get all linker connection from the concepts error","cannot get respone"),(0,E.ry)(w)}catch(w){w instanceof Error?console.log("Get all linker connection from the concepts error: ",w.message):console.log("Get all linker connection from the concepts error(Unexpected): ",w),(0,E.Mb)(w,c.BaseUrl.GetAllLinkerConnectionOfConceptUrl())}return i})}},6058:(he,q,m)=>{m.d(q,{W:()=>S});var E=m(1863),F=m(3518),c=m(4059),f=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,[])).next())})};function S(A){var s=arguments;return f(this,void 0,void 0,function*(){const i=c.Logger.logfunction("GetAllLinkerConnectionsToTheConcept",s);var u=[];try{new Date().getTime();var v=(0,F.Xr)("application/x-www-form-urlencoded");const L=yield fetch(c.BaseUrl.GetAllLinkerConnectionToConceptUrl()+`?conceptId=${A}`,{method:"GET",headers:v});if(L.ok){const d=yield L.json();for(var I=0;I<d.length;I++){var w=d[I];u.push(w)}c.Logger.logUpdate(i)}else console.log("Get all linker connection To the concepts error","cannot get respone"),(0,E.ry)(L)}catch(L){L instanceof Error?console.log("Get all linker connection To the concepts error: ",L.message):console.log("Get all linker connection To the concepts error(Unexpected): ",L),(0,E.Mb)(L,c.BaseUrl.GetAllLinkerConnectionToConceptUrl()),(0,E.ey)(i,"GetAllLinkerConnectionsToTheConcept",L)}return u})}},2803:(he,q,m)=>{m.d(q,{x:()=>A});var E=m(8286),F=m(9581),c=m(1863),f=m(4059),S=function(s,i,u,v){return new(u||(u=Promise))(function(I,w){function L(a){try{l(v.next(a))}catch(h){w(h)}}function d(a){try{l(v.throw(a))}catch(h){w(h)}}function l(a){var h;a.done?I(a.value):(h=a.value,h instanceof u?h:new u(function(N){N(h)})).then(L,d)}l((v=v.apply(s,[])).next())})};function A(s,i,u){var v=arguments;return S(this,void 0,void 0,function*(){const I=f.Logger.logfunction("GetCompositionConnectionsBetweenTwoConcepts",v)||{};var w=[];try{if(f.serviceWorker){I.serviceWorker=!0;try{const a=yield(0,f.sendMessage)("GetCompositionConnectionsBetweenTwoConcepts",{ofConceptId:s,toConcept:i,mainKey:u});return f.Logger.logUpdate(I),a.data}catch(a){console.error("GetCompositionConnectionsBetweenTwoConcepts sw error: ",a),(0,c.ey)(I,"GetCompositionConnectionsBetweenTwoConcepts",a),(0,f.handleServiceWorkerException)(a)}}var L=new FormData;L.append("ofConceptId",s.toString()),L.append("mainKey",u.toString()),L.append("toConceptId",i.toString());const l=yield fetch(F.B.GetCompositionConnectionBetweenTwoConceptsUrl(),{method:"POST",body:L,redirect:"follow"});if(l.ok){const a=yield l.json();for(var d=0;d<a.length;d++)E.d.AddConnection(a[d]),w.push(a[d]);f.Logger.logUpdate(I)}else console.log("Get composition connection between two concepts",l.status),(0,c.ry)(l)}catch(l){l instanceof Error?console.log("Get composition connection between two concepts error message: ",l.message):console.log("Get composition connection between two concepts unexpected error: ",l),(0,c.Mb)(l,F.B.GetCompositionConnectionBetweenTwoConceptsUrl()),(0,c.ey)(I,"GetCompositionConnectionsBetweenTwoConcepts",l)}return w})}},7139:(he,q,m)=>{m.d(q,{r:()=>i});var E=m(3026),F=m(9581),c=m(4059),f=m(1863),S=m(1596),A=m(3278),s=function(u,v,I,w){return new(I||(I=Promise))(function(L,d){function l(N){try{h(w.next(N))}catch(k){d(k)}}function a(N){try{h(w.throw(N))}catch(k){d(k)}}function h(N){var k;N.done?L(N.value):(k=N.value,k instanceof I?k:new I(function(T){T(k)})).then(l,a)}h((w=w.apply(u,[])).next())})};function i(u){var v=arguments;return s(this,void 0,void 0,function*(){const I=c.Logger.logfunction("GetConcept",v)||{};let w=(0,c.CreateDefaultConcept)();const L=new FormData;L.append("id",u.toString());try{if(c.serviceWorker){I.serviceWorker=!0;try{const a=yield(0,c.sendMessage)("GetConcept",{id:u});return c.Logger.logUpdate(I),a.data}catch(a){console.error("GetConcept sw error: ",a),(0,f.ey)(I,"GetConcept",a),(0,c.handleServiceWorkerException)(a)}}if(u==0||u==null||u==null)return w;var d=yield E.I.GetConcept(u);let l=E.I.GetNpc(u);if(d.id!=0||l)return c.Logger.logUpdate(I),d;{let a;const h={method:"POST",body:L,headers:{Authorization:"Bearer "+A.b.BearerAccessToken}};try{console.log("this is the url",F.B.GetConceptUrl()),a=yield fetch(F.B.GetConceptUrl(),h)}catch{a=yield(0,S.g)(h,"/api/getConcept")}return yield function(N,k,T,_){return s(this,void 0,void 0,function*(){return N.ok?(k=yield N.json()).id>0?E.I.AddConcept(k):E.I.AddNpc(_):(console.log("Get the concept error",N.status),(0,f.ry)(N)),c.Logger.logUpdate(T),k})}(a,w,I,u)}}catch(l){l instanceof Error?console.log("Get the concept error message: ",l.message):console.log("Get the concept unexpected error: ",l),(0,f.Mb)(l,F.B.GetConceptUrl()),(0,f.ey)(I,"GetConcept",l)}})}},1239:(he,q,m)=>{m.d(q,{I:()=>u,r:()=>i});var E=m(3026),F=m(9581),c=m(3518),f=m(1863),S=m(4059),A=m(1596),s=function(v,I,w,L){return new(w||(w=Promise))(function(d,l){function a(k){try{N(L.next(k))}catch(T){l(T)}}function h(k){try{N(L.throw(k))}catch(T){l(T)}}function N(k){var T;k.done?d(k.value):(T=k.value,T instanceof w?T:new w(function(_){_(T)})).then(a,h)}N((L=L.apply(v,[])).next())})};function i(v){return s(this,void 0,void 0,function*(){const I=S.Logger.logfunction("GetConceptBulk",[v.length])||{};let w=[],L=(new Date().getTime(),performance.now()),d=Array.from(new Set(v));try{if(S.serviceWorker){I.serviceWorker=!0;try{const l=yield(0,S.sendMessage)("GetConceptBulk",{passedConcepts:v});return S.Logger.logUpdate(I),l.data}catch(l){console.error("GetConceptBulk sw error: ",l),(0,f.ey)(I,"GetConceptBulk",l),(0,S.handleServiceWorkerException)(l)}}if(d.length>0){let l=[];for(let a=0;a<d.length;a++)if(!E.I.GetNpc(d[a])){let h=yield E.I.GetConcept(d[a]);h.id==0?l.push(d[a]):w.push(h)}if(l.length==0)return S.Logger.logfunction(I),w;{let a;const h={method:"POST",headers:(0,c.Xr)(),body:JSON.stringify(l)};try{a=yield fetch(F.B.GetConceptBulkUrl(),h)}catch{a=yield(0,A.g)(h,"/api/get_concept_bulk")}yield function(N,k,T,_,B){return s(this,void 0,void 0,function*(){if(N.ok){let R=yield N.json();if(R.length>0)for(let D=0;D<R.length;D++){let H=R[D];E.I.AddConcept(H),T.push(H)}console.log("added the concepts"),S.Logger.logUpdate(_)}else console.log("Get Concept Bulk error",N.status),S.Logger.logError(B,"unknown","read","unknown",void 0,N.status,N,"GetConceptBulk",[k],"unknown",void 0),(0,f.ry)(N)})}(a,v,w,I,L)}}}catch(l){l instanceof Error?console.log("Get Concept Bulk  error message: ",l.message):console.log("Get Concept Bulk  unexpected error: ",l),S.Logger.logError(L,"unknown","read","unknown",void 0,500,l,"GetConceptBulk",[v],"unknown",void 0),(0,f.Mb)(l,F.B.GetConceptBulkUrl()),(0,f.ey)(I,"GetConceptBulk",l)}return w})}function u(v){return s(this,void 0,void 0,function*(){const I=[];if(v.length>0){const w={"Content-Type":"application/json"};try{const L=yield fetch(F.B.GetConceptBulkUrl(),{method:"POST",headers:w,body:JSON.stringify(v)});if(L.ok){const d=yield L.json();if(d.length>0)for(let l=0;l<d.length;l++){const a=d[l];I.push(a),E.I.AddConcept(a)}}else console.log("bulk concept getter api error: ",L.status),(0,f.ry)(L)}catch(L){L instanceof Error?console.log("bulk concept getter api error: ",L.message):console.log("bulk concept getter api error: ",L),(0,f.Mb)(L,F.B.GetConceptBulkUrl())}}return I})}},4402:(he,q,m)=>{m.d(q,{A:()=>i});var E=m(3026),F=m(9581),c=m(3518),f=m(1863),S=m(4059),A=m(7876),s=function(u,v,I,w){return new(I||(I=Promise))(function(L,d){function l(N){try{h(w.next(N))}catch(k){d(k)}}function a(N){try{h(w.throw(N))}catch(k){d(k)}}function h(N){var k;N.done?L(N.value):(k=N.value,k instanceof I?k:new I(function(T){T(k)})).then(l,a)}h((w=w.apply(u,[])).next())})};function i(u,v){var I=arguments;return s(this,void 0,void 0,function*(){const w=S.Logger.logfunction("GetConceptByCharacterAndType",I);try{if(S.serviceWorker)try{return(yield(0,S.sendMessage)("GetConceptByCharacterAndType",{characterValue:u,typeId:v})).data}catch(h){console.error("GetConceptByCharacterAndType sw error: ",h),(0,S.handleServiceWorkerException)(h)}let a=yield E.I.GetConceptByCharacterAndTypeLocal(u,v);if(a==null||a.id==0){var L={character_value:`${u}`,type_id:v},d=JSON.stringify(L),l=(0,c.Xr)();const h=yield fetch(F.B.GetConceptByCharacterAndTypeUrl(),{method:"POST",headers:l,body:d});h.ok?(a=yield h.json(),(0,A.K)(a).then(k=>{E.I.AddConcept(a)})):((0,f.ry)(h),console.log("This is the concept by type and character error",h.status))}return S.Logger.logUpdate(w),a}catch(a){a instanceof Error?console.log(" This is the concept by type and character error message: ",a.message):console.log(" This is the concept by type and character unexpected error: ",a),(0,f.Mb)(a,F.B.GetConceptByCharacterAndTypeUrl()),(0,f.ey)(w,"GetConceptByCharacterAndType",a)}})}},8146:(he,q,m)=>{m.d(q,{Y:()=>s});var E=m(3026),F=m(9581),c=m(4059),f=m(1863),S=m(7876),A=function(i,u,v,I){return new(v||(v=Promise))(function(w,L){function d(h){try{a(I.next(h))}catch(N){L(N)}}function l(h){try{a(I.throw(h))}catch(N){L(N)}}function a(h){var N;h.done?w(h.value):(N=h.value,N instanceof v?N:new v(function(k){k(N)})).then(d,l)}a((I=I.apply(i,[])).next())})};function s(i){var u=arguments;return A(this,void 0,void 0,function*(){const v=c.Logger.logfunction("GetConceptByCharacterValue",u);let I=(0,c.CreateDefaultConcept)();try{const w=new FormData;w.append("character_value",i);const L=yield fetch(F.B.GetConceptByCharacterValueUrl(),{method:"POST",body:w});L.ok?(I=yield L.json(),I.id>0&&(0,S.K)(I).then(d=>{E.I.AddConcept(I)}),c.Logger.logUpdate(v)):((0,f.ry)(L),console.log("Error in Getting concept by character value Error",L.status))}catch(w){w instanceof Error?console.log("Error in Getting concept by character value error message: ",w):console.log("Error in Getting concept by character value unexpected error: ",w),(0,f.Mb)(w,F.B.GetConceptByCharacterValueUrl()),(0,f.ey)(v,"GetConceptByCharacterValue",w)}return I})}},7467:(he,q,m)=>{m.d(q,{j:()=>u});var E=m(8286),F=m(9581),c=m(4364),f=m(3518),S=m(1863),A=m(4059),s=m(1596),i=function(v,I,w,L){return new(w||(w=Promise))(function(d,l){function a(k){try{N(L.next(k))}catch(T){l(T)}}function h(k){try{N(L.throw(k))}catch(T){l(T)}}function N(k){var T;k.done?d(k.value):(T=k.value,T instanceof w?T:new w(function(_){_(T)})).then(a,h)}N((L=L.apply(v,I||[])).next())})};function u(){return i(this,arguments,void 0,function*(v=[]){const I=A.Logger.logfunction("GetConnectionBulk",v.length)||{};let w=[];try{if(A.serviceWorker){I.serviceWorker=!0;try{const L=yield(0,A.sendMessage)("GetConnectionBulk",{connectionIds:v});return A.Logger.logUpdate(I),L.data}catch(L){console.error("GetConnectionBulk sw error: ",L),(0,S.ey)(I,"GetConnectionBulk",L),(0,A.handleServiceWorkerException)(L)}}if(v.length>0){let L=[];for(let d=0;d<v.length;d++)if(!E.d.GetNpConn(v[d])){let l=yield E.d.GetConnection(v[d]);l.id==0?L.push(v[d]):w.push(l)}if(L.length==0)return A.Logger.logUpdate(I),w;{let d;const l={method:"POST",headers:(0,f.Xr)(),body:JSON.stringify(L)};try{d=yield fetch(F.B.GetConnectionBulkUrl(),l)}catch{d=yield(0,s.g)(l,"/api/get_connection_bulk")}yield function(a,h,N){return i(this,void 0,void 0,function*(){if(a.ok){const k=yield a.json();if(k.length>0)for(let T=0;T<k.length;T++){let _=k[T];h.push(_),E.d.AddConnection(_)}}else(0,S.ey)(N,"GetConnectionBulk",a.status),(0,S.ry)(a),console.log("Get Connection Bulk error",a.status)})}(d,w,I),A.Logger.logUpdate(I)}}}catch(L){L instanceof Error?console.log("Get Connection Bulk error message: ",L):console.log("Get Connection Bulk unexpected error: ",L),(0,S.ey)(I,"GetConnectionBulk",L),(0,S.Mb)(L,F.B.GetConnectionBulkUrl())}return yield(0,c.s)(w),w})}},2832:(he,q,m)=>{m.d(q,{j:()=>A});var E=m(4059),F=m(9581),c=m(1863),f=m(3518),S=function(s,i,u,v){return new(u||(u=Promise))(function(I,w){function L(a){try{l(v.next(a))}catch(h){w(h)}}function d(a){try{l(v.throw(a))}catch(h){w(h)}}function l(a){var h;a.done?I(a.value):(h=a.value,h instanceof u?h:new u(function(N){N(h)})).then(L,d)}l((v=v.apply(s,i||[])).next())})};function A(s){var i=arguments;return S(this,arguments,void 0,function*(u,v=""){const I=E.Logger.logfunction("SearchLinkMultipleApi",i);let w=performance.now();var L=(0,f.ab)("application/json",v);const d=F.B.SearchLinkMultipleAllApiUrl(),l=JSON.stringify(u);try{const a=yield fetch(d,{method:"POST",headers:L,body:l});if(a.ok){let h=yield a.json();return E.Logger.logUpdate(I),h}return(0,c.ry)(a),console.log("This is the searching multiple error",a.status),E.Logger.logError(w,"unknown","search","unknown",void 0,a.status,a,"SearchLinkMultipleApi",[u,v],"unknown",void 0),[]}catch(a){console.log("This is the searching multiple error",a),E.Logger.logError(w,"unknown","search","unknown",void 0,500,a,"SearchLinkMultipleApi",[u,v],"unknown",void 0),(0,c.Mb)(a,d),(0,c.ey)(I,"SearchLinkMultipleApi",a)}})}},3130:(he,q,m)=>{m.d(q,{BG:()=>A,SL:()=>s,XZ:()=>S,ZJ:()=>c,iw:()=>f,y0:()=>F,yv:()=>E});const E=1,F=2,c=3,f=4,S=5,A=6,s=7},9635:(he,q,m)=>{m.d(q,{x:()=>E});const E=new BroadcastChannel("Freeschema_mftsccs_browser_channel")},9581:(he,q,m)=>{m.d(q,{B:()=>E});class E{static setRandomizer(c){console.log("set randomizer",c),this.BASE_RANDOMIZER=c}static getRandomizer(){return this.BASE_RANDOMIZER}static GetConceptUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/getConcept":this.NODE_CACHE_URL+"/api/getConcept"}static GetConnectionUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get-connection-by-id":this.NODE_CACHE_URL+"/api/get-connection-by-id"}static GetConceptBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get_concept_bulk":this.NODE_CACHE_URL+"/api/get_concept_bulk"}static GetConnectionBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get_connection_bulk":this.NODE_CACHE_URL+"/api/get_connection_bulk"}static GetAllConceptsOfUserUrl(){return this.BASE_URL+"/api/get_all_concepts_of_user"}static GetAllConnectionsOfUserUrl(){return this.BASE_URL+"/api/get_all_connections_of_user"}static GetAllConnectionsOfCompositionUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition"}static GetAllConnectionsOfCompositionBulkUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition_bulk"}static GetConceptByCharacterValueUrl(){return this.BASE_URL+"/api/get_concept_by_character_value"}static GetConceptByCharacterAndTypeUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_type"}static GetConceptByCharacterAndCategoryUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category"}static GetConceptByCharacterAndCategoryDirectUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category_direct"}static GetCharacterByCharacterUrl(){return this.BASE_URL+"/api/get_character_by_character"}static GetAllConceptsByTypeUrl(){return this.BASE_URL+"/api/get_all_concepts_by_type"}static GetAllConnectionsOfConceptUrl(){return this.BASE_URL+"/api/get-link-connections"}static GetAllConnectionsToConceptUrl(){return this.BASE_URL+"/api/get-link-reverse-connections"}static GetAllAiData(){return this.BASE_URL+"/api/get-preloaded-concepts"}static getAppConfig(){return this.NODE_URL+"/api/v1/config"}static PostPrefetchConceptConnections(){return this.NODE_URL+"/api/v1/access-tracker/sync-access-tracker"}static GetSuggestedConcepts(){return this.NODE_URL+"/api/v1/access-tracker/list-concepts-file"}static GetSuggestedConnections(){return this.NODE_URL+"/api/v1/access-tracker/list-connections-file"}static PostLogger(){return this.LOG_SERVER+"/api/logger"}static GetAllPrefetchConnectionsUrl(){return this.BASE_URL+"/api/get_all_connections_of_user?inpage=500"}static GetAllLinkerConnectionOfConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-from-concept"}static GetAllLinkerConnectionToConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-to-concept"}static DeleteConceptUrl(){return this.BASE_URL+"/api/delete_concept"}static DeleteUserUrl(){return this.BASE_URL+"/api/deleteuser"}static RecursiveSearchUrl(){return this.BASE_URL+"/api/recursivesearch-concept-connection"}static SearchLinkMultipleAllApiUrl(){return this.BASE_URL+"/api/Connection/search-link-multiple-all-ccs"}static MakeTheNameInBackendUrl(){return this.BASE_URL+"/api/make-name-from-frontend"}static SearchAllTypeWithLinker(c=!0){return c?this.BASE_URL+"/api/search-all-with-linker-ccs":this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static LoginUrl(){return this.BASE_URL+"/api/auth/login"}static SignupUrl(){return this.BASE_URL+"/api/auth/signup"}static GetCompositionConnectionBetweenTwoConceptsUrl(){return this.BASE_URL+"/api/get-composition-connection-between-two-concepts"}static SearchCompositionsUrl(){return this.BASE_URL+"/api/search-compositions"}static SearchLinkMultipleAll(){return this.BASE_URL+"/api/Connection/search-link-multiple-all"}static CreateSessionId(){return this.BASE_URL+"/api/create-session-id-remote"}static CreateSessionVisitUrl(){return this.BASE_URL+"/api/create-remote-session-visit"}static ViewInternalDataUrl(){return this.BASE_URL+"/api/view-api-internal-data-ccs-id-bulk"}static SearchInternalWithAuthenticatedCcsUrl(){return this.BASE_URL+"/api/search-composition-internal-authenticated-ccs"}static SearchInternalWithCcsUrl(){return this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static CreateGhostConceptApiUrl(c=!0){return c?E.NODE_URL+"/api/v1/local-concepts":E.NODE_URL+"/api/v1/local-concepts-without-auth"}static CreateGhostConnectionApiUrl(){return E.NODE_URL+"/api/v1/local-connections"}static GetRealConceptById(){return E.NODE_URL+"/api/v1/local-concepts-translate"}static GetReservedIdUrl(){return this.BASE_URL+"/api/get_reserved_ids"}static GetReservedConnectionIdUrl(){return this.BASE_URL+"/api/get_reserved_connection_ids"}static CreateTheTextDataUrl(){return this.BASE_URL+"/api/create_text_data"}static CreateTheCharacterDataUrl(){return this.BASE_URL+"/api/create_character_data"}static CreateTheConceptUrl(){return this.BASE_URL+"/api/create_the_concept"}static CreateTheConnectionUrl(){return this.BASE_URL+"/api/create_the_connection"}static CreateTheConnectionNewUrl(){return this.BASE_URL+"/api/create_the_connection_new"}static MakeTheTypeConceptUrl(){return this.BASE_URL+"/api/make_the_type_concept"}static DeleteTheConnectionUrl(){return this.BASE_URL+"/api/delete_connection"}static DeleteTheConnectionBulkUrl(){return this.BASE_URL+"/api/delete_connection_bulk"}static FreeschemaQueryUrl(){return this.BASE_URL+"/api/freeschema-query"}static uploadImageUrl(){return this.BASE_URL+"/api/Image/UploadImage"}static uploadFileUrl(){return this.BASE_URL+"/api/Image/UploadFile"}static sendMail(){return this.BASE_URL+"/api/sendmail"}static sendBulkMail(){return this.BASE_URL+"/api/sendmail/bulk"}static getWidgetData(){return this.BASE_URL+"/api/get-widget"}static getLatestWidgetData(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get-latest-widget":this.NODE_CACHE_URL+"/api/get-latest-widget"}static getConnectionsByTypes(){return this.BASE_URL+"/api/get-connection-by-types"}static CreatePrototypeUrl(){return this.BASE_URL+"/api/create-prototype"}}E.BASE_URL="https://localhost:7053/",E.NODE_CACHE_URL="",E.AI_URL="https://ai.freeschema.com",E.MQTT_URL="192.168.1.249",E.NODE_URL="http://localhost:5001",E.LOG_SERVER="https://logdev.freeschema.com",E.BASE_APPLICATION="",E.DOCUMENTATION_WIDGET=0,E.FLAGS={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1},E.BASE_RANDOMIZER=999},6963:(he,q,m)=>{m.d(q,{f:()=>f});var E=m(205),F=m(6731),c=function(S,A,s,i){return new(s||(s=Promise))(function(u,v){function I(d){try{L(i.next(d))}catch(l){v(l)}}function w(d){try{L(i.throw(d))}catch(l){v(l)}}function L(d){var l;d.done?u(d.value):(l=d.value,l instanceof s?l:new s(function(a){a(l)})).then(I,w)}L((i=i.apply(S,[])).next())})};class f{static waitForDataToLoad(){return c(this,void 0,void 0,function*(){return new Promise((A,s)=>{this.checkFlag(A),setTimeout(()=>{s("not")},25e3)})})}static checkFlag(A){if(E.B.isCharacterLoaded)return A("done");setTimeout(f.checkFlag,1e3,A)}static addNodeToTree(A){return c(this,void 0,void 0,function*(){return this.characterRoot==null?(this.characterRoot=A,this.characterRoot):(this.characterRoot=this.characterRoot.addCharacterNode(A,this.characterRoot,this.characterRoot.height),this.characterRoot)})}static removeNodeByCharacter(A,s){return c(this,void 0,void 0,function*(){this.characterRoot&&this.characterRoot.removeNodeWithVariants(this.characterRoot,A,s)})}static countNumberOfNodes(){return this.characterRoot?this.characterRoot.countNodeBelow(this.characterRoot):0}static addConceptToTree(A){if(A.characterValue!=""){var s=new F.b(A.characterValue,A,null,null);this.addNodeToTree(s)}}static getNodeFromTree(A){return this.characterRoot?this.characterRoot.getCharacterFromNode(A,this.characterRoot):this.characterRoot}static getNodeFromTreeUpdated(A){return this.characterRoot?this.characterRoot.getCharacterFromNode(A,this.characterRoot):this.characterRoot}static getCharacterAndTypeFromTree(A,s){return c(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndType(A,s,this.characterRoot):this.characterRoot})}static getCharacterAndCategoryFromTree(A,s){return c(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndCategory(A,s,this.characterRoot):this.characterRoot})}static removeConceptCharacter(A){this.characterRoot&&(this.characterRoot=this.characterRoot.removeNode(this.characterRoot,A))}}f.characterRoot=null},2202:(he,q,m)=>{m.d(q,{W:()=>A});var E=m(6963),F=m(6731),c=m(205),f=m(4059),S=function(s,i,u,v){return new(u||(u=Promise))(function(I,w){function L(a){try{l(v.next(a))}catch(h){w(h)}}function d(a){try{l(v.throw(a))}catch(h){w(h)}}function l(a){var h;a.done?I(a.value):(h=a.value,h instanceof u?h:new u(function(N){N(h)})).then(L,d)}l((v=v.apply(s,[])).next())})};class A{static addNodeToTree(i){if(this.root==null)return this.root=i,this.root;this.root=this.root.addNode(i,this.root,this.root.height)}static waitForDataToLoad(){return S(this,void 0,void 0,function*(){return new Promise((i,u)=>{this.checkFlag(i),setTimeout(()=>{u("not")},25e3)})})}static checkFlag(i){if(c.B.isDataLoaded)return i("done");setTimeout(A.checkFlag,1e3,i)}static addConceptToTree(i){let u=new F.b(i.id,i,null,null),v=new F.b(i.characterValue,i,null,null);E.f.addNodeToTree(v),this.addNodeToTree(u)}static getNodeFromTree(i){return S(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(i,this.root):null})}static removeNodeFromTree(i){return S(this,void 0,void 0,function*(){if(this.root){let u=new Event(`${i}`);console.log("this is the fired event after delete",u),(0,f.dispatchIdEvent)(i),this.root=this.root.removeNode(this.root,i)}})}static getConceptListFromIds(i,u,v){return S(this,void 0,void 0,function*(){this.root&&this.root.checkIfIdsInNode(this.root,i,u,v)})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}A.root=null},5457:(he,q,m)=>{m.d(q,{c:()=>A});var E=m(4059),F=m(7282),c=m(205);class f{constructor(i,u){this.value=[],this.height=1,this.key=i,this.value.push(u),this.leftNode=null,this.rightNode=null,this.currentNode=null}addType(i,u,v){var I,w,L,d;if(i==null)return(0,E.dispatchIdEvent)(u,{detail:v}),new f(u,v);if(u<i.key)i.leftNode=this.addType(i.leftNode,u,v);else{if(!(u>i.key))return i.value.includes(v)||((0,E.dispatchIdEvent)(u,{detail:v}),i.value.push(v)),i;i.rightNode=this.addType(i.rightNode,u,v)}i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1;const l=this.getBalanceFactor(i);return l>1&&u<((I=i.leftNode)===null||I===void 0?void 0:I.key)?this.rightRotate(i):l<-1&&u>((w=i.rightNode)===null||w===void 0?void 0:w.key)?this.leftRotate(i):l>1&&u>((L=i.leftNode)===null||L===void 0?void 0:L.key)?(i.leftNode=this.leftRotate(i.leftNode),this.rightRotate(i)):l<-1&&u<((d=i.rightNode)===null||d===void 0?void 0:d.key)?(i.rightNode=this.rightRotate(i.rightNode),this.leftRotate(i)):i}rightRotate(i){if(i){let u=i.leftNode;if(u){let v=u.rightNode;return i.leftNode=v,u.rightNode=i,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,u}}return i}leftRotate(i){if(i){let u=i.rightNode;if(u){let v=u.leftNode;return u.leftNode=i,i.rightNode=v,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(i.rightNode))+1,u}}return i}getHeight(i){return i?i.height:0}getBalanceFactor(i){return i==null?0:this.getHeight(i.leftNode)-this.getHeight(i.rightNode)}getFromNode(i,u){return u&&(i==u.key?u:i<u.key?this.getFromNode(i,u.leftNode):i>u.key?this.getFromNode(i,u.rightNode):u)}removeNodeWithVariants(i,u,v){if(i==null)return i;if(i.key>u)return i.leftNode=this.removeNodeWithVariants(i.leftNode,u,v),i;if(i.key<u)return i.rightNode=this.removeNodeWithVariants(i.rightNode,u,v),i;if(i.value.length>0){for(let I=0;I<i.value.length;I++)if(v==i.value[I])return i.value.splice(I,1),i}if(i.leftNode==null){let I=i.rightNode;return i=null,I}if(i.rightNode==null){let I=i.leftNode;return i=null,I}{let I=this.inOrderSuccessor(i.rightNode);return i.value=I.value,i.key=I.key,i.currentNode=I.currentNode,i.rightNode=this.removeNodeWithVariants(i.rightNode,I.key,v),i}}countNodeBelow(i){return i==null?0:1+this.countNodeBelow(i.leftNode)+this.countNodeBelow(i.rightNode)}inOrderSuccessor(i){for(;i.leftNode!=null;)i=i.leftNode;return i}}var S=function(s,i,u,v){return new(u||(u=Promise))(function(I,w){function L(a){try{l(v.next(a))}catch(h){w(h)}}function d(a){try{l(v.throw(a))}catch(h){w(h)}}function l(a){var h;a.done?I(a.value):(h=a.value,h instanceof u?h:new u(function(N){N(h)})).then(L,d)}l((v=v.apply(s,[])).next())})};class A{static addType(i){return S(this,void 0,void 0,function*(){return this.root==null?(this.root=i,new CustomEvent(`${i.key}`,{detail:i.value[0]}),(0,E.dispatchIdEvent)(i.key,{detail:i.value[0]}),this.root):(this.root=this.root.addType(this.root,i.key,i.value[0]),this.root)})}static addConceptToTree(i){if(i.typeId!=0){let u=new f(i.typeId,i.id);this.addType(u)}}static removeTypeConcept(i,u){this.root&&(this.root=this.root.removeNodeWithVariants(this.root,i,u))}static getNodeFromTreeNew(i){return this.root?this.root.getFromNode(i,this.root):this.root}static getTypeVariantsFromTreeNew(i){return S(this,void 0,void 0,function*(){let u=this.getNodeFromTreeNew(i),v=[],I=[];if(u){v=u.value;for(let w=0;w<v.length;w++){let L=!1;for(let d=0;d<I.length;d++)I[d].id==v[w]&&(L=!0);L||I.push(yield(0,E.GetTheConcept)(v[w]))}}return I})}static waitForDataToLoad(){return S(this,void 0,void 0,function*(){return new Promise((i,u)=>{this.checkFlag(i),setTimeout(()=>{u("not")},25e3)})})}static checkFlag(i){if(c.B.isTypeLoaded)return i("done");setTimeout(A.checkFlag,1e3,i)}static getTypeVariantsFromTreeWithUserIdNew(i,u){return S(this,void 0,void 0,function*(){let v=[],I=yield this.getTypeVariantsFromTreeNew(i);console.log("these are all the concepts",I);for(let w=0;w<I.length;w++)I[w].userId==u&&v.push(I[w]);return v})}static getTypeVariantsWithCharacterValueNew(i,u){return S(this,void 0,void 0,function*(){let v=yield this.getTypeVariantsFromTreeNew(u);console.log("this is all the concepts for character",v);let I=(0,F.o)();for(let w=0;w<v.length;w++)v[w].characterValue==i&&(I=v[w]);return I})}static countNumberOfNodes(){return this.typeRoot?this.typeRoot.countNodeBelow(this.typeRoot):0}}A.typeRoot=null,A.root=null},2615:(he,q,m)=>{m.d(q,{j:()=>F});var E=m(4059);class F{constructor(f,S,A,s,i,u,v,I=!1,w,L,d){this.count=0,this.typeCharacter="",this.referent=null,this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=E.BaseUrl.getRandomizer(),this.x=0,this.y=0,this.id=f,this.userId=S,this.typeId=A,this.ghostId=f,this.categoryId=s,this.referentId=i,this.characterValue=`${u}`,this.accessId=v,this.typeCharacter=d,this.type=null,this.isNew=I,this.entryTimeStamp=w,this.updatedTimeStamp=L}getType(){console.log(this.typeId)}}},3026:(he,q,m)=>{m.d(q,{I:()=>w});var E=m(3655),F=m(2202),c=m(6963),f=m(5457),S=m(7282),A=m(4059);class s{constructor(d,l,a,h){this.height=1,this.key=d,this.value=l,this.leftNode=a,this.rightNode=h}addNode(d,l,a){if(l==null)return d;let h=l.leftNode,N=l.rightNode;if(l.key>d.key)l.leftNode=this.addNode(d,h,a);else{if(!(l.key<d.key))return l;l.rightNode=this.addNode(d,N,a)}l.height=1+Math.max(this.getHeight(l.leftNode),this.getHeight(l.rightNode));let k=this.getBalanceFactor(l);if(k>1&&l.leftNode){if(d.key<l.leftNode.key)return this.rightRotate(l);if(d.key>l.leftNode.key)return l.leftNode=this.leftRotate(l.leftNode),this.rightRotate(l)}if(k<-1&&l.rightNode){if(d.key>l.rightNode.key)return this.leftRotate(l);if(d.key<l.rightNode.key)return l.rightNode=this.rightRotate(l.rightNode),this.leftRotate(l)}return l}rightRotate(d){if(d){let l=d.leftNode;if(l){let a=l.rightNode;return d.leftNode=a,l.rightNode=d,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,l.height=Math.max(this.getHeight(l.leftNode),this.getHeight(l.rightNode))+1,l}}return d}leftRotate(d){if(d){let l=d.rightNode;if(l){let a=l.leftNode;return l.leftNode=d,d.rightNode=a,d.height=Math.max(this.getHeight(d.leftNode),this.getHeight(d.rightNode))+1,l.height=Math.max(this.getHeight(l.leftNode),this.getHeight(d.rightNode))+1,l}}return d}getHeight(d){return d?d.height:0}getBalanceFactor(d){return d==null?0:this.getHeight(d.leftNode)-this.getHeight(d.rightNode)}getFromNode(d,l){return l&&(d==l.key?l:d<l.key?this.getFromNode(d,l.leftNode):d>l.key?this.getFromNode(d,l.rightNode):l)}removeNode(d,l){if(d==null)return d;if(d.key>l)return d.leftNode=this.removeNode(d.leftNode,l),d;if(d.key<l)return d.rightNode=this.removeNode(d.rightNode,l),d;if(d.leftNode==null){let a=d.rightNode;return d=null,a}if(d.rightNode==null){let a=d.leftNode;return d=null,a}{let a=this.inOrderSuccessor(d.rightNode);return d.value=a.value,d.key=a.key,d.rightNode=this.removeNode(d.rightNode,a.key),d}}countNodeBelow(d){return d==null?0:1+this.countNodeBelow(d.leftNode)+this.countNodeBelow(d.rightNode)}inOrderSuccessor(d){for(;d.leftNode!=null;)d=d.leftNode;return d}}var i=function(L,d,l,a){return new(l||(l=Promise))(function(h,N){function k(B){try{_(a.next(B))}catch(R){N(R)}}function T(B){try{_(a.throw(B))}catch(R){N(R)}}function _(B){var R;B.done?h(B.value):(R=B.value,R instanceof l?R:new l(function(D){D(R)})).then(k,T)}_((a=a.apply(L,[])).next())})};class u{static addNodeToTree(d){if(this.root==null)return this.root=d,this.root;this.root=this.root.addNode(d,this.root,this.root.height)}static addWidgetToTree(d){let l=new s(d.widgetId,d,null,null);this.addNodeToTree(l)}static getNodeFromTree(d){return i(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(d,this.root):null})}static removeNodeFromTree(d){return i(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,d))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}u.root=null;class v{constructor(){this.widgetId=0,this.mainId=0,this.conceptIds=[],this.linkers=[],this.reverse=[],this.mainCompositionIds=[],this.countinfo=[]}}var I=function(L,d,l,a){return new(l||(l=Promise))(function(h,N){function k(B){try{_(a.next(B))}catch(R){N(R)}}function T(B){try{_(a.throw(B))}catch(R){N(R)}}function _(B){var R;B.done?h(B.value):(R=B.value,R instanceof l?R:new l(function(D){D(R)})).then(k,T)}_((a=a.apply(L,[])).next())})};class w{constructor(){this.name="conceptsArray"}static CheckContains(d){for(var l=!1,a=0;a<this.conceptsArray.length;a++)this.conceptsArray[a].id==d.id&&(l=!0);return l}static AddNpc(d){this.NPC.includes(d)||(this.NPC.length>10&&(this.NPC=[]),this.NPC.push(d))}static GetNpc(d){return!!this.NPC.includes(d)}static AddConceptToStorage(d){d.id>0&&(0,E.kH)("concept",d)}static GetConceptBulkData(d,l,a){return I(this,void 0,void 0,function*(){yield F.W.getConceptListFromIds(d,l,a)})}static AddWidget(d){if(A.serviceWorker)try{(0,A.sendMessage)("ConceptsData__AddWidget",{widgetDetails:d})}catch(l){console.error("Concept Data, Add Widget sw error: ",l),(0,A.handleServiceWorkerException)(l)}d.widgetId>0&&u.addWidgetToTree(d)}static AddConcept(d){if(A.serviceWorker)try{(0,A.sendMessage)("ConceptsData__AddConcept",{concept:d})}catch(l){console.error("Concept Data, Add Concpet sw error: ",l),(0,A.handleServiceWorkerException)(l)}d.id>0&&(F.W.addConceptToTree(d),f.c.addConceptToTree(d))}static AddConceptToMemory(d){d.id>0&&(F.W.addConceptToTree(d),f.c.addConceptToTree(d))}static AddConceptTemporary(d){var l=this.CheckContains(d);this.conceptDictionary[d.id]=d,l&&this.RemoveConcept(d),this.conceptsArray.push(d)}static RemoveConcept(d){for(var l=0;l<this.conceptsArray.length;l++)this.conceptsArray[l].id==d.id&&this.conceptsArray.splice(l,1);(0,E.wh)("concept",d.id)}static GetWidget(d){return I(this,void 0,void 0,function*(){let l=new v;if(A.serviceWorker)try{return(yield(0,A.sendMessage)("ConceptsData__GetWidget",{id:d})).data}catch(h){console.error("Concept Data, Get Widget sw error: ",h),(0,A.handleServiceWorkerException)(h)}let a=yield u.getNodeFromTree(d);return a!=null&&(l=a.value),l})}static RemoveWidget(d){return I(this,void 0,void 0,function*(){if(A.serviceWorker)try{return(yield(0,A.sendMessage)("ConceptsData__RemoveWidget",{id:d})).data}catch(l){console.error("Concept Data, Remove Widget sw error: ",l),(0,A.handleServiceWorkerException)(l)}yield u.removeNodeFromTree(d)})}static GetConcept(d){return I(this,void 0,void 0,function*(){if(A.serviceWorker)try{return(yield(0,A.sendMessage)("ConceptsData__GetConcept",{id:d})).data}catch(N){console.error("Concept Data, Get Concpet sw error: ",N),(0,A.handleServiceWorkerException)(N)}if(d==0||d==null||d==null)return(0,S.o)();var l=(0,S.o)(),a=yield F.W.getNodeFromTree(d);if(a?.value){var h=a.value;h&&(l=h)}return l})}static GetConceptByCharacter(d){return I(this,void 0,void 0,function*(){var l=(0,S.o)(),a=c.f.getNodeFromTree(d);return a&&(l=a.value),l})}static GetConceptByCharacterUpdated(d){return I(this,void 0,void 0,function*(){var l=(0,S.o)(),a=c.f.getNodeFromTree(d);return a&&(l=a.value),l})}static GetConceptByCharacterAndTypeLocal(d,l){return I(this,void 0,void 0,function*(){return(0,S.o)(),yield f.c.getTypeVariantsWithCharacterValueNew(d,l)})}static GetConceptByCharacterAndCategoryLocal(d,l){return I(this,void 0,void 0,function*(){var a=(0,S.o)(),h=yield c.f.getCharacterAndCategoryFromTree(d,l);return h&&(a=h.value),a})}static GetConceptsByTypeId(d){let l=[];for(var a=0;a<this.conceptsArray.length;a++)this.conceptsArray[a].typeId==d&&l.push(this.conceptsArray[a]);return l}static GetConceptsByTypeIdAndUser(d,l){var a=arguments;return I(this,void 0,void 0,function*(){if(A.Logger.logfunction("ConceptsData.GetConceptsByTypeIdAndUser",a),A.serviceWorker)try{return(yield(0,A.sendMessage)("ConceptsData__GetConceptsByTypeIdAndUser",{typeId:d,userId:l})).data}catch(N){console.error("Concept Data, Get Concpet sw error:",N),(0,A.handleServiceWorkerException)(N)}let h=[];return h=yield f.c.getTypeVariantsFromTreeWithUserIdNew(d,l),h})}static GetBinaryCharacterTree(){return c.f.characterRoot}getName(){return this.name}}w.conceptsArray=[],w.NPC=[],w.conceptDictionary=[]},2155:(he,q,m)=>{m.d(q,{N:()=>c});var E=m(7282),F=m(9581);class c{constructor(S=0,A,s,i,u,v,I){this.count=0,this.isTemp=!1,this.toUpdate=!1,this.applicationId=F.B.getRandomizer(),this.type=(0,E.o)(),this.ofConcept=(0,E.o)(),this.toConcept=(0,E.o)(),this.id=S,this.ofTheConceptId=A,this.toTheConceptId=s,this.userId=i,this.typeId=u,this.ghostId=S,this.orderId=v,this.accessId=I,this.entryTimeStamp=(0,E.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date,this.typeCharacter=""}}},5239:(he,q,m)=>{m.d(q,{O:()=>S});var E=m(205),F=m(4059);class c{constructor(s,i,u,v){this.leftNode=null,this.rightNode=null,this.variants=[],this.height=1,this.key=s,this.value=i,this.leftNode=u,this.rightNode=v,this.currentNode=null}addCurrentNode(s,i){return i==null?i=s:(s.value.typeId!=i.value.typeId&&(i.currentNode=this.addCurrentNode(s,i.currentNode)),i)}addCurrentNodeType(s,i){if(i==null)return s;let u=!1;s.value.id==i.value.id&&(u=!0);for(let v=0;v<i.variants.length;v++)i.variants[v].value.id==s.value.id&&(u=!0);return u||i.variants.push(s),i}getMax(s,i){return s>i?s:i}addNode(s,i,u){if(i==null)return(0,F.dispatchIdEvent)(s.value.ofTheConceptId),s;let v=i.leftNode,I=i.rightNode;if(s.key<i.key)i.leftNode=this.addNode(s,v,u);else{if(!(s.key>i.key))return i;i.rightNode=this.addNode(s,I,u)}i.height=1+this.getMax(this.getHeight(i.leftNode),this.getHeight(i.rightNode));let w=this.getBalanceFactor(i);if(w>1&&i.leftNode){if(this.getBalanceFactor(i.leftNode)>=0)return this.rightRotate(i);if(this.getBalanceFactor(i.leftNode)<0)return i.leftNode=this.leftRotate(i.leftNode),this.rightRotate(i)}if(w<-1&&i.rightNode){if(this.getBalanceFactor(i.rightNode)<=0)return this.leftRotate(i);if(this.getBalanceFactor(i.rightNode)>0)return i.rightNode=this.rightRotate(i.rightNode),this.leftRotate(i)}return i}addTypeNode(s,i,u){if(s.value.typeId!=0){if(i==null)return s;let v=i.leftNode,I=i.rightNode;if(i.key>s.key)i.leftNode=this.addTypeNode(s,v,u);else{if(!(i.key<s.key))return i.key==s.key&&i.key!=0&&i.addCurrentNodeType(s,i),i;i.rightNode=this.addTypeNode(s,I,u)}i.height=1+this.getMax(this.getHeight(i.leftNode),this.getHeight(i.rightNode));let w=this.getBalanceFactor(i);if(w>1&&i.leftNode){if(s.key<i.leftNode.key)return this.rightRotate(i);if(s.key>i.leftNode.key)return i.leftNode=this.leftRotate(i.leftNode),this.rightRotate(i)}if(w<-1&&i.rightNode){if(s.key>i.rightNode.key)return this.leftRotate(i);if(s.key<i.rightNode.key)return i.rightNode=this.rightRotate(i.rightNode),this.leftRotate(i)}}return i}rightRotate(s){if(s){let i=s.leftNode;if(i){let u=i.rightNode;return s.leftNode=u,i.rightNode=s,s.height=this.getMax(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,i.height=this.getMax(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,i}throw console.log("this is the error in right rotation",s,i),new Error("Cannot perform right rotation: left node is null.")}return s}leftRotate(s){if(s){let i=s.rightNode;if(i){let u=i.leftNode;return i.leftNode=s,s.rightNode=u,s.height=this.getMax(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,i.height=this.getMax(this.getHeight(i.leftNode),this.getHeight(s.rightNode))+1,i}throw console.log("this is the error in left rotation",s,i),new Error("Cannot perform left rotation: right node is null.")}return s}getHeight(s){return s?s.height:0}getBalanceFactor(s){return s==null?0:this.getHeight(s.leftNode)-this.getHeight(s.rightNode)}getFromNode(s,i){try{if(i)return s==i.key?(i.value.count?i.value.count++:i.value.count=1,i):s<i.key?this.getFromNode(s,i.leftNode):s>i.key?this.getFromNode(s,i.rightNode):i}catch{console.log("this is the exception",s,i,i?.leftNode,i?.rightNode)}return i}getCharacterFromNode(s,i){return i&&(s==i.key?i:s<i.key?this.getCharacterFromNode(s,i.leftNode):s>i.key?this.getCharacterFromNode(s,i.rightNode):i)}checkIfIdsInNode(s,i,u,v){if(s){if(i.includes(s.key)){u.push(s.value);let I=i.indexOf(s.key);i.splice(I,1)}s.leftNode&&this.checkIfIdsInNode(s.leftNode,i,u,v),s.rightNode&&this.checkIfIdsInNode(s.rightNode,i,u,v)}}traverse(s){let i=0;return s&&(i+=1,s?.leftNode&&(i+=this.traverse(s.leftNode)),s.rightNode&&(i+=this.traverse(s.rightNode))),i}removeNode(s,i){if(s==null)return s;if(s.key>i)return s.leftNode=this.removeNode(s.leftNode,i),s;if(s.key<i)return s.rightNode=this.removeNode(s.rightNode,i),s;if(new Event(`${s.value.ofTheConceptId}`),(0,F.dispatchIdEvent)(s.value.ofTheConceptId),s.leftNode==null){let u=s.rightNode;return s=null,u}if(s.rightNode==null){let u=s.leftNode;return s=null,u}{let u=this.inOrderSuccessor(s.rightNode);return s.value=u.value,s.key=u.key,s.variants=u.variants,s.currentNode=u.currentNode,s.rightNode=this.removeNode(s.rightNode,u.key),s}}removeNodeWithVariants(s,i,u){if(s==null)return s;if(s.key>i)return s.leftNode=this.removeNodeWithVariants(s.leftNode,i,u),s;if(s.key<i)return s.rightNode=this.removeNodeWithVariants(s.rightNode,i,u),s;if(s.variants.length>0){if(s.value.id==u){let v=s.variants[0];if(v)return s.value=v.value,s.key=v.key,s.currentNode=v.currentNode,s.variants.splice(0,1),s}else for(let v=0;v<s.variants.length;v++)if(u==s.variants[v].value.id)return s.variants.splice(v,1),s}if(s.leftNode==null){let v=s.rightNode;return s=null,v}if(s.rightNode==null){let v=s.leftNode;return s=null,v}{let v=this.inOrderSuccessor(s.rightNode);return s.value=v.value,s.key=v.key,s.variants=v.variants,s.currentNode=v.currentNode,s.rightNode=this.removeNodeWithVariants(s.rightNode,v.key,u),s}}inOrderSuccessor(s){for(;s.leftNode!=null;)s=s.leftNode;return s}}var f=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,[])).next())})};class S{static addNodeToTree(s){try{if(this.connectionroot==null)return this.connectionroot=s,this.connectionroot;this.connectionroot=this.connectionroot.addNode(s,this.connectionroot,this.connectionroot.height)}catch(i){throw console.log("This is the error in making the tree",i),i}}static addConnectionToTree(s){let i=new c(s.id,s,null,null);this.addNodeToTree(i)}static traverse(){var s;return(s=this.connectionroot)===null||s===void 0?void 0:s.traverse(this.connectionroot)}static waitForDataToLoad(){return f(this,void 0,void 0,function*(){return new Promise((s,i)=>{this.checkFlag(s),setTimeout(()=>{i("not")},25e3)})})}static checkFlag(s){if(E.B.isConnectionLoaded)return s("done");setTimeout(S.checkFlag,1e3,s)}static removeNodeFromTree(s){return f(this,void 0,void 0,function*(){this.connectionroot&&(this.connectionroot=this.connectionroot.removeNode(this.connectionroot,s))})}static getNodeFromTree(s){return f(this,void 0,void 0,function*(){try{return this.connectionroot?this.connectionroot.getFromNode(s,this.connectionroot):this.connectionroot}catch{console.log("this is the getNodeFromTree",s,this.connectionroot)}})}static getConnectionListFromIds(s,i,u){return f(this,void 0,void 0,function*(){this.connectionroot&&this.connectionroot.checkIfIdsInNode(this.connectionroot,s,i,u)})}}S.connectionroot=null},991:(he,q,m)=>{m.d(q,{H:()=>S});var E=m(4059),F=m(3996);class c extends F.i{constructor(s,i,u,v){super(s,i,u,v),this.key="",this.value=[],this.height=1,this.key=s,this.value=i,this.leftNode=u,this.rightNode=v}addNode(s,i,u){if(i==null)return s;let v=i.leftNode,I=i.rightNode;if(i.key>s.key)i.leftNode=this.addNode(s,v,u);else{if(!(i.key<s.key))return i;i.rightNode=this.addNode(s,I,u)}i.height=1+Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode));let w=this.getBalanceFactor(i);if(w>1&&i.leftNode){if(this.getBalanceFactor(i.leftNode)>=0)return this.rightRotate(i);if(this.getBalanceFactor(i.leftNode)<0)return i.leftNode=this.leftRotate(i.leftNode),this.rightRotate(i)}if(w<-1&&i.rightNode){if(this.getBalanceFactor(i.rightNode)<=0)return this.leftRotate(i);if(this.getBalanceFactor(i.rightNode)>0)return i.rightNode=this.rightRotate(i.rightNode),this.leftRotate(i)}return i}}var f=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,[])).next())})};class S{static CreateCompositionKey(s,i){return s}static GetConnectionByOfTheConceptAndTypeId(s,i){let u=this.CreateCompositionKey(s,i);if(this.node){let v=this.node.getFromNode(u,this.node);if(v)return v.value}return null}static addConnection(s){if(s.id>0){let i=this.CreateCompositionKey(s.ofTheConceptId,s.typeId);if(this.node){let u=this.node.getFromNode(i,this.node);if(u){let v=u?.value;v.length==0&&(u.value=[]),v.includes(s.id)||v.push(s.id)}else{let v=[];v.push(s.id);let I=new c(i,v,null,null);this.addNodeToTree(I)}}else{let u=[];u.push(s.id);let v=new c(i,u,null,null);this.addNodeToTree(v)}new Event(`${i}`)}else console.log("cannot insert key id with  n 0 to the connection tree",s)}static addNodeToTree(s){return f(this,void 0,void 0,function*(){return this.node==null?(this.node=s,console.log("this is type dispatch in connection",s),(0,E.dispatchIdEvent)(s.key),this.node):(this.node=this.node.addNode(s,this.node,this.node.height),this.node)})}static removeNodeFromTree(s){return f(this,void 0,void 0,function*(){this.node&&(this.node=this.node.removeNode(this.node,s))})}}S.node=null},3996:(he,q,m)=>{m.d(q,{i:()=>E});class E{constructor(c,f,S,A){this.key="",this.value=[],this.height=1,this.key=c,this.value=f,this.leftNode=S,this.rightNode=A}getFromNode(c,f){return f&&(c==f.key?f:c<f.key?this.getFromNode(c,f.leftNode):c>f.key?this.getFromNode(c,f.rightNode):f)}rightRotate(c){if(c){let f=c.leftNode;if(f){let S=f.rightNode;return c.leftNode=S,f.rightNode=c,c.height=Math.max(this.getHeight(c.leftNode),this.getHeight(c.rightNode))+1,f.height=Math.max(this.getHeight(f.leftNode),this.getHeight(f.rightNode))+1,f}}return c}leftRotate(c){if(c){let f=c.rightNode;if(f){let S=f.leftNode;return f.leftNode=c,c.rightNode=S,c.height=Math.max(this.getHeight(c.leftNode),this.getHeight(c.rightNode))+1,f.height=Math.max(this.getHeight(f.leftNode),this.getHeight(c.rightNode))+1,f}}return c}getHeight(c){return c?c.height:0}getBalanceFactor(c){return c==null?0:this.getHeight(c.leftNode)-this.getHeight(c.rightNode)}removeNode(c,f){if(c==null)return c;if(c.key>f)return c.leftNode=this.removeNode(c.leftNode,f),c;if(c.key<f)return c.rightNode=this.removeNode(c.rightNode,f),c;if(c.leftNode==null){let S=c.rightNode;return c=null,S}if(c.rightNode==null){let S=c.leftNode;return c=null,S}{let S=this.inOrderSuccessor(c.rightNode);return c.value=S.value,c.key=S.key,c.variants=S.variants,c.currentNode=S.currentNode,c.rightNode=this.removeNode(c.rightNode,S.key),c}}inOrderSuccessor(c){for(;c.leftNode!=null;)c=c.leftNode;return c}}},8286:(he,q,m)=>{m.d(q,{d:()=>w});var E=m(1735),F=m(4059),c=m(3655),f=m(1863),S=m(2155),A=m(5239),s=m(991),i=m(3996);class u extends i.i{constructor(d,l,a,h){super(d,l,a,h),this.key="",this.value=[],this.height=1,this.key=d,this.value=l,this.leftNode=a,this.rightNode=h}addNode(d,l,a){if(l==null)return d;let h=l.leftNode,N=l.rightNode;if(l.key>d.key)l.leftNode=this.addNode(d,h,a);else{if(!(l.key<d.key))return l;l.rightNode=this.addNode(d,N,a)}l.height=1+Math.max(this.getHeight(l.leftNode),this.getHeight(l.rightNode));let k=this.getBalanceFactor(l);if(k>1&&l.leftNode){if(d.key<l.leftNode.key)return this.rightRotate(l);if(d.key>l.leftNode.key)return l.leftNode=this.leftRotate(l.leftNode),this.rightRotate(l)}if(k<-1&&l.rightNode){if(d.key>l.rightNode.key)return this.leftRotate(l);if(d.key<l.rightNode.key)return l.rightNode=this.rightRotate(l.rightNode),this.leftRotate(l)}return l}}class v{static CreateCompositionKey(d){return d}static addNodeToTree(d){return l=this,a=void 0,N=function*(){return this.connectionTypeRoot==null?(this.connectionTypeRoot=d,this.connectionTypeRoot):(this.connectionTypeRoot=this.connectionTypeRoot.addNode(d,this.connectionTypeRoot,this.connectionTypeRoot.height),this.connectionTypeRoot)},new((h=void 0)||(h=Promise))(function(k,T){function _(D){try{R(N.next(D))}catch(H){T(H)}}function B(D){try{R(N.throw(D))}catch(H){T(H)}}function R(D){var H;D.done?k(D.value):(H=D.value,H instanceof h?H:new h(function(O){O(H)})).then(_,B)}R((N=N.apply(l,a||[])).next())});var l,a,h,N}static addConnectionToTree(d){if(d.id>0){let l=this.CreateCompositionKey(d.typeId);if(this.connectionTypeRoot){let a=this.connectionTypeRoot.getFromNode(l,this.connectionTypeRoot);if(a){let h=a?.value;h.length==0&&(a.value=[]),h.includes(d.id)||h.push(d.id)}else{let h=[];h.push(d.id);let N=new u(l,h,null,null);this.addNodeToTree(N)}}else{let a=[];a.push(d.id);let h=new u(l,a,null,null);this.addNodeToTree(h)}}else console.log("cannot insert key id with  n 0 to the connection tree",d)}static GetConnectionByOfTheConceptAndTypeId(d,l){let a=this.CreateCompositionKey(l);if(this.connectionTypeRoot){let h=this.connectionTypeRoot.getFromNode(a,this.connectionTypeRoot);if(h)return h.value}return null}}v.connectionTypeRoot=null;var I=function(L,d,l,a){return new(l||(l=Promise))(function(h,N){function k(B){try{_(a.next(B))}catch(R){N(R)}}function T(B){try{_(a.throw(B))}catch(R){N(R)}}function _(B){var R;B.done?h(B.value):(R=B.value,R instanceof l?R:new l(function(D){D(R)})).then(k,T)}_((a=a.apply(L,[])).next())})};class w{constructor(){this.name="Connection Array"}static CheckContains(d){let l=!1;for(let a=0;a<this.connectionArray.length;a++)this.connectionArray[a].id==d.id&&(l=!0);return l}static AddConnectionToStorage(d){(0,c.kH)("connection",d)}static AddNpConn(d){this.deletedConnections.includes(d)||this.deletedConnections.push(d)}static GetNpConn(d){return!!this.deletedConnections.includes(d)}static AddConnection(d){try{A.O.addConnectionToTree(d),v.addConnectionToTree(d),s.H.addConnection(d)}catch(l){throw console.log("this is the error in making the connection"),l}}static AddConnectionToMemory(d){d.isTemp||(A.O.addConnectionToTree(d),v.addConnectionToTree(d),s.H.addConnection(d))}static AddToDictionary(d){this.connectionDictionary[d.id]=d}static RemoveConnection(d){d.id!=0&&((0,c.wh)("connection",d.id),A.O.removeNodeFromTree(d.id),s.H.removeNodeFromTree(d.id))}static GetConnectionTypeOfTree(){s.H.node}static GetConnectionByOfTheConceptAndType(d,l){return I(this,void 0,void 0,function*(){try{if(F.serviceWorker)try{return(yield(0,F.sendMessage)("ConnectionData__GetConnectionByOfTheConceptAndType",{ofTheConceptId:d,typeId:l})).data}catch(a){console.error("GetConnectionByOfTheConceptAndType sw error: ",a),(0,F.handleServiceWorkerException)(a)}return s.H.GetConnectionByOfTheConceptAndTypeId(d,l)||[]}catch(a){return console.log("this is the error in GetConnectionByOfTheConceptAndType",a),[]}})}static GetConnectionByOfType(d,l){const a=F.Logger.logfunction("ConnectionData.GetConnectionByOfType",arguments);let h=v.GetConnectionByOfTheConceptAndTypeId(d,l);return h?(F.Logger.logUpdate(a),h):(F.Logger.logUpdate(a),[])}static GetConnectionTree(){return A.O.connectionroot}static GetConnectionTypeTree(){return v.connectionTypeRoot}static GetConnectionBulkData(d,l,a){return I(this,void 0,void 0,function*(){yield A.O.getConnectionListFromIds(d,l,a)})}static GetConnection(d){return I(this,void 0,void 0,function*(){E.J.incrementConnection(d);let l=new S.N(0,0,0,0,0,0,0);try{if(F.serviceWorker)try{return(yield(0,F.sendMessage)("ConnectionData__GetConnection",{id:d})).data}catch(h){console.error("GetConnection sw error: ",h),(0,F.handleServiceWorkerException)(h)}let a=yield A.O.getNodeFromTree(d);if(a?.value){let h=a.value;h&&(l=h)}return l}catch(a){return console.log("this is the error in GetConnection",a),l}})}static GetConnectionsOfCompositionLocal(d){var l=arguments;return I(this,void 0,void 0,function*(){const a=F.Logger.logfunction("ConnectionData.GetConnectionsOfCompositionLocal",l)||{};let h=[];try{if(F.serviceWorker){a.serviceWorker=!0;try{const k=yield(0,F.sendMessage)("ConnectionData__GetConnectionsOfCompositionLocal",{id:d});return F.Logger.logUpdate(a),k.data}catch(k){console.error("GetConnectionsOfCompositionLocal sw error: ",k),(0,f.ey)(a,"GetConnectionsOfCompositionLocal",k),(0,F.handleServiceWorkerException)(k)}}let N=[];N=w.GetConnectionByOfType(d,d);for(let k=0;k<N.length;k++){let T=yield A.O.getNodeFromTree(N[k]);T&&h.push(T.value),F.Logger.logUpdate(a)}}catch(N){console.log("this is the error GetConnectionsOfCompositionLocal",d,h),(0,f.ey)(a,"ConnectionData.GetConnectionsOfCompositionLocal",N)}return h})}static GetConnectionsOfConcept(d){return I(this,void 0,void 0,function*(){let l=[],a=[];try{if(F.serviceWorker)try{return(yield(0,F.sendMessage)("ConnectionData__GetConnectionsOfConcept",{id:d})).data}catch(h){console.error("GetConnectionsOfConcept sw error: ",h),(0,F.handleServiceWorkerException)(h)}l=yield w.GetConnectionByOfTheConceptAndType(d,d);for(let h=0;h<l.length;h++){let N=yield A.O.getNodeFromTree(l[h]);N&&a.push(N.value)}return a}catch(h){return console.log("this is the error in GetConnectionsOfConcept",h),a}})}getName(){return this.name}}w.deletedConnections=[],w.connectionArray=[],w.connectionDictionary=[]},205:(he,q,m)=>{m.d(q,{B:()=>E});class E{}E.isTypeLoaded=!1,E.isCharacterLoaded=!1,E.isDataLoaded=!1,E.isLocalDataLoaded=!1,E.isLocalCharacterLoaded=!1,E.isLocalTypeLoaded=!1,E.isConnectionLoaded=!1,E.isConnectionTypeLoaded=!1,E.isLocalConnectionLoaded=!1},2515:(he,q,m)=>{m.d(q,{x:()=>E});class E{constructor(c,f,S,A){this.variants=[],this.height=1,this.key=c,this.value=f,this.leftNode=S,this.rightNode=A,this.currentNode=null}addCurrentNode(c,f){return f==null?f=c:(c.value.typeId!=f.value.typeId&&(f.currentNode=this.addCurrentNode(c,f.currentNode)),f)}addCurrentNodeType(c,f){if(f==null)return c;var S=!1;for(let A=0;A<f.variants.length;A++)f.variants[A].value.id==c.value.id&&(S=!0);return S||f.variants.push(c),f}addNode(c,f,S){if(f==null)return c;var A=f.leftNode,s=f.rightNode;if(f.key>c.key)f.leftNode=this.addNode(c,A,S);else{if(!(f.key<c.key))return f;f.rightNode=this.addNode(c,s,S)}f.height=1+Math.max(this.getHeight(f.leftNode),this.getHeight(f.rightNode));let i=this.getBalanceFactor(f);if(i>1&&f.leftNode){if(c.key<f.leftNode.key)return this.rightRotate(f);if(c.key>f.leftNode.key)return f.leftNode=this.leftRotate(f.leftNode),this.rightRotate(f)}if(i<-1&&f.rightNode){if(c.key>f.rightNode.key)return this.leftRotate(f);if(c.key<f.rightNode.key)return f.rightNode=this.rightRotate(f.rightNode),this.leftRotate(f)}return f}addCharacterNode(c,f,S){if(c.value.characterValue!=""){if(f==null)return c;var A=f.leftNode,s=f.rightNode;if(f.key>c.key)f.leftNode=this.addCharacterNode(c,A,S);else{if(!(f.key<c.key))return f.key==c.key&&f.key!=""&&f.value.id!=c.value.id&&f.addCurrentNodeType(c,f),f;f.rightNode=this.addCharacterNode(c,s,S)}f.height=1+Math.max(this.getHeight(f.leftNode),this.getHeight(f.rightNode));let i=this.getBalanceFactor(f);if(i>1&&f.leftNode){if(c.key<f.leftNode.key)return this.rightRotate(f);if(c.key>f.leftNode.key)return f.leftNode=this.leftRotate(f.leftNode),this.rightRotate(f)}if(i<-1&&f.rightNode){if(c.key>f.rightNode.key)return this.leftRotate(f);if(c.key<f.rightNode.key)return f.rightNode=this.rightRotate(f.rightNode),this.leftRotate(f)}}return f}addTypeNode(c,f,S){if(c.value.typeId!=0){if(f==null)return c;var A=f.leftNode,s=f.rightNode;if(f.key>c.key)f.leftNode=this.addTypeNode(c,A,S);else{if(!(f.key<c.key))return f.key==c.key&&f.key!=0&&f.value.id!=c.value.id&&f.addCurrentNodeType(c,f),f;f.rightNode=this.addTypeNode(c,s,S)}f.height=1+Math.max(this.getHeight(f.leftNode),this.getHeight(f.rightNode));let i=this.getBalanceFactor(f);if(i>1&&f.leftNode){if(c.key<f.leftNode.key)return this.rightRotate(f);if(c.key>f.leftNode.key)return f.leftNode=this.leftRotate(f.leftNode),this.rightRotate(f)}if(i<-1&&f.rightNode){if(c.key>f.rightNode.key)return this.leftRotate(f);if(c.key<f.rightNode.key)return f.rightNode=this.rightRotate(f.rightNode),this.leftRotate(f)}}return f}rightRotate(c){if(c){let f=c.leftNode;if(f){let S=f.rightNode;return c.leftNode=S,f.rightNode=c,c.height=Math.max(this.getHeight(c.leftNode),this.getHeight(c.rightNode))+1,f.height=Math.max(this.getHeight(f.leftNode),this.getHeight(f.rightNode))+1,f}}return c}leftRotate(c){if(c){let f=c.rightNode;if(f){let S=f.leftNode;return f.leftNode=c,c.rightNode=S,c.height=Math.max(this.getHeight(c.leftNode),this.getHeight(c.rightNode))+1,f.height=Math.max(this.getHeight(f.leftNode),this.getHeight(c.rightNode))+1,f}}return c}getHeight(c){return c?c.height:0}getBalanceFactor(c){return c==null?0:this.getHeight(c.leftNode)-this.getHeight(c.rightNode)}getFromNode(c,f){return f&&(c==f.key?f:c<f.key?this.getFromNode(c,f.leftNode):c>f.key?this.getFromNode(c,f.rightNode):f)}updateNodeSyncStatus(c,f,S){if(S){if(c==S.key){let A=S.value;return A.isSynced=f,S.value=A,S}return c<S.key?this.updateNodeSyncStatus(c,f,S.leftNode):c>S.key?this.updateNodeSyncStatus(c,f,S.rightNode):S}return S}getCharacterFromNode(c,f){return f&&(c==f.key?f:c<f.key?this.getCharacterFromNode(c,f.leftNode):c>f.key?this.getCharacterFromNode(c,f.rightNode):f)}getFromNodeWithCharacterAndType(c,f,S){if(c=`${c}`,S){if(c==S.key){if(c==S.value.characterValue&&f==S.value.typeId)return S;for(let A=0;A<S.variants.length;A++)if(S.variants[A].value.typeId==f)return S.variants[A]}else{if(c<S.key)return this.getFromNodeWithCharacterAndType(c,f,S.leftNode);if(c>S.key)return this.getFromNodeWithCharacterAndType(c,f,S.rightNode)}return null}return S}getFromNodeWithCharacterAndCategory(c,f,S){if(c=`${c}`,S){if(c==S.key){if(c==S.value.characterValue&&f==S.value.categoryId)return S;for(let A=0;A<S.variants.length;A++)if(S.variants[A].value.categoryId==f)return S.variants[A]}else{if(c<S.key)return this.getFromNodeWithCharacterAndCategory(c,f,S.leftNode);if(c>S.key)return this.getFromNodeWithCharacterAndCategory(c,f,S.rightNode)}return null}return S}removeNode(c,f){if(c==null)return c;if(c.key>f)return c.leftNode=this.removeNode(c.leftNode,f),c;if(c.key<f)return c.rightNode=this.removeNode(c.rightNode,f),c;if(c.leftNode==null){let A=c.rightNode;return c=null,A}if(c.rightNode==null){let A=c.leftNode;return c=null,A}var S=this.inOrderSuccessor(c.rightNode);return c.value=S.value,c.key=S.key,c.variants=S.variants,c.currentNode=S.currentNode,c.rightNode=this.removeNode(c.rightNode,S.key),c}removeNodeWithVariants(c,f,S){if(c==null)return c;if(c.key>f)return c.leftNode=this.removeNodeWithVariants(c.leftNode,f,S),c;if(c.key<f)return c.rightNode=this.removeNodeWithVariants(c.rightNode,f,S),c;if(c.variants.length>0){if(c.value.id==S){var A=c.variants[0];if(A)return c.value=A.value,c.key=A.key,c.currentNode=A.currentNode,c.variants.splice(0,1),c}else for(let i=0;i<c.variants.length;i++)if(S==c.variants[i].value.id)return c.variants.splice(i,1),c}if(c.leftNode==null){let i=c.rightNode;return c=null,i}if(c.rightNode==null){let i=c.leftNode;return c=null,i}var s=this.inOrderSuccessor(c.rightNode);return c.value=s.value,c.key=s.key,c.variants=s.variants,c.currentNode=s.currentNode,c.rightNode=this.removeNodeWithVariants(c.rightNode,s.key,S),c}countNodeBelow(c){return c==null?0:1+this.countNodeBelow(c.leftNode)+this.countNodeBelow(c.rightNode)}inOrderSuccessor(c){for(;c.leftNode!=null;)c=c.leftNode;return c}}},9736:(he,q,m)=>{m.d(q,{v:()=>h});var E=m(205),F=m(2515),c=function(N,k,T,_){return new(T||(T=Promise))(function(B,R){function D(M){try{O(_.next(M))}catch(U){R(U)}}function H(M){try{O(_.throw(M))}catch(U){R(U)}}function O(M){var U;M.done?B(M.value):(U=M.value,U instanceof T?U:new T(function(P){P(U)})).then(D,H)}O((_=_.apply(N,[])).next())})};class f{static addNodeToTree(k){if(this.root==null)return this.root=k,this.root;this.root=this.root.addNode(k,this.root,this.root.height)}static addConceptToTree(k){var T=new F.x(k.id,k,null,null);new F.x(k.characterValue,k,null,null),this.addNodeToTree(T)}static waitForDataToLoad(){return c(this,void 0,void 0,function*(){return new Promise((k,T)=>{this.checkFlag(k),setTimeout(()=>{T("not")},25e3)})})}static checkFlag(k){if(E.B.isLocalDataLoaded)return k("done");setTimeout(f.checkFlag,1e3,k)}static getNodeFromTree(k){return c(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(k,this.root):null})}static getCharacterAndTypeFromTree(k,T){return this.root?this.root.getFromNodeWithCharacterAndType(k,T,this.root):this.root}static updateSyncStatus(k){return this.root?this.root.updateNodeSyncStatus(k,!0,this.root):this.root}static removeNodeFromTree(k){return c(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,k))})}}f.root=null;var S=function(N,k,T,_){return new(T||(T=Promise))(function(B,R){function D(M){try{O(_.next(M))}catch(U){R(U)}}function H(M){try{O(_.throw(M))}catch(U){R(U)}}function O(M){var U;M.done?B(M.value):(U=M.value,U instanceof T?U:new T(function(P){P(U)})).then(D,H)}O((_=_.apply(N,[])).next())})};class A{static waitForDataToLoad(){return S(this,void 0,void 0,function*(){return new Promise((k,T)=>{this.checkFlag(k),setTimeout(()=>{T("not")},25e3)})})}static checkFlag(k){if(E.B.isLocalCharacterLoaded)return k("done");setTimeout(A.checkFlag,1e3,k)}static addNodeToTree(k){return S(this,void 0,void 0,function*(){return this.LocalCharacterRoot==null?(this.LocalCharacterRoot=k,this.LocalCharacterRoot):(this.LocalCharacterRoot=this.LocalCharacterRoot.addCharacterNode(k,this.LocalCharacterRoot,this.LocalCharacterRoot.height),this.LocalCharacterRoot)})}static addConceptToTree(k){if(k.characterValue!=""){var T=new F.x(k.characterValue,k,null,null);this.addNodeToTree(T)}}static getNodeFromTree(k){return this.LocalCharacterRoot?this.LocalCharacterRoot.getCharacterFromNode(k,this.LocalCharacterRoot):this.LocalCharacterRoot}static getCharacterAndTypeFromTree(k,T){return S(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndType(k,T,this.LocalCharacterRoot):this.LocalCharacterRoot})}static getCharacterAndCategoryFromTree(k,T){return S(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndCategory(k,T,this.LocalCharacterRoot):this.LocalCharacterRoot})}static removeConceptType(k,T){this.LocalCharacterRoot&&(this.LocalCharacterRoot=this.LocalCharacterRoot.removeNodeWithVariants(this.LocalCharacterRoot,k,T))}}A.LocalCharacterRoot=null;var s=function(N,k,T,_){return new(T||(T=Promise))(function(B,R){function D(M){try{O(_.next(M))}catch(U){R(U)}}function H(M){try{O(_.throw(M))}catch(U){R(U)}}function O(M){var U;M.done?B(M.value):(U=M.value,U instanceof T?U:new T(function(P){P(U)})).then(D,H)}O((_=_.apply(N,[])).next())})};class i{static addNodeToTree(k){return s(this,void 0,void 0,function*(){return this.LocalTypeRoot==null?(this.LocalTypeRoot=k,this.LocalTypeRoot):(this.LocalTypeRoot=this.LocalTypeRoot.addTypeNode(k,this.LocalTypeRoot,this.LocalTypeRoot.height),this.LocalTypeRoot)})}static addConceptToTree(k){if(k.typeId!=0){var T=new F.x(k.typeId,k,null,null);this.addNodeToTree(T)}}static removeConceptType(k,T){this.LocalTypeRoot&&(this.LocalTypeRoot=this.LocalTypeRoot.removeNodeWithVariants(this.LocalTypeRoot,k,T))}static getNodeFromTree(k){return this.LocalTypeRoot?this.LocalTypeRoot.getFromNode(k,this.LocalTypeRoot):this.LocalTypeRoot}static getTypeVariantsFromTree(k){var T=this.getNodeFromTree(k),_=[];if(T){_.push(T?.value);for(let B=0;B<T.variants.length;B++)_.push(T.variants[B].value);return _}}static waitForDataToLoad(){return s(this,void 0,void 0,function*(){return new Promise((k,T)=>{this.checkFlag(k),setTimeout(()=>{T("not")},25e3)})})}static checkFlag(k){if(E.B.isLocalTypeLoaded)return k("done");setTimeout(i.checkFlag,1e3,k)}static getTypeVariantsFromTreeWithUserId(k,T){return s(this,void 0,void 0,function*(){var _=[],B=this.getNodeFromTree(k);if(B){console.log("this is the node to type",B),B.value.userId!=T&&B.value.userId!=999||_.push(B?.value);for(let R=0;R<B.variants.length;R++)B.variants[R].value.userId!=T&&B.value.userId!=999||_.push(B.variants[R].value)}return _})}}i.LocalTypeRoot=null;var u=m(6416),v=m(3026),I=m(7820),w=m(4864),L=m(628),d=m(4059),l=m(3278),a=function(N,k,T,_){return new(T||(T=Promise))(function(B,R){function D(M){try{O(_.next(M))}catch(U){R(U)}}function H(M){try{O(_.throw(M))}catch(U){R(U)}}function O(M){var U;M.done?B(M.value):(U=M.value,U instanceof T?U:new T(function(P){P(U)})).then(D,H)}O((_=_.apply(N,[])).next())})};class h{constructor(){this.name="conceptsArray"}static AddConcept(k){k.id!=0&&(f.addConceptToTree(k),A.addConceptToTree(k),i.addConceptToTree(k),this.localconceptsArray.push(k))}static AddPermanentConcept(k){k.id!=0&&(f.removeNodeFromTree(k.ghostId),A.removeConceptType(k.characterValue,k.ghostId),i.removeConceptType(k.typeId,k.ghostId),I.G.addConceptToTree(k),v.I.AddConcept(k),(0,d.AddGhostConcept)(k,k.userId,l.b.sessionId))}static RemoveConcept(k){return a(this,void 0,void 0,function*(){try{k.id!=0&&(f.removeNodeFromTree(k.ghostId),A.removeConceptType(k.characterValue,k.ghostId),i.removeConceptType(k.typeId,k.ghostId))}catch(T){throw T}})}static RemoveConceptById(k){return a(this,void 0,void 0,function*(){try{let T=yield h.GetConcept(k);T.id!=0&&(f.removeNodeFromTree(k),A.removeConceptType(T.characterValue,T.ghostId),i.removeConceptType(T.typeId,T.ghostId),L.H.RemoveConcept(T))}catch(T){throw T}})}static AddConceptToMemory(k){k.id!=0&&(f.addConceptToTree(k),A.addConceptToTree(k),i.addConceptToTree(k))}static GetConcept(k){return a(this,void 0,void 0,function*(){var T=(0,u.u)(),_=yield f.getNodeFromTree(k);if(_?.value){var B=_.value;B&&(T=B)}return T})}static UpdateConceptSyncStatus(k){return a(this,void 0,void 0,function*(){f.updateSyncStatus(k)})}static GetConceptByGhostId(k){return a(this,void 0,void 0,function*(){var T=(0,u.u)(),_=yield I.G.getNodeFromTree(k);if(_?.value){var B=_.value;B&&(T=B)}return T})}static GetConceptByCharacter(k){return a(this,void 0,void 0,function*(){var T=(0,u.u)(),_=A.getNodeFromTree(k);return _&&(T=_.value),T})}static GetConceptByCharacterAndTypeLocal(k,T){return a(this,void 0,void 0,function*(){var _=(0,u.u)(),B=yield A.getCharacterAndTypeFromTree(k,T);return B&&(_=B.value),_})}static GetConceptByCharacterAndCategoryLocal(k,T){return a(this,void 0,void 0,function*(){var _=(0,u.u)(),B=yield A.getCharacterAndCategoryFromTree(k,T);return B&&(_=B.value),_})}static GetConceptsByTypeId(k){let T=[];for(var _=0;_<this.localconceptsArray.length;_++)this.localconceptsArray[_].typeId==k&&T.push(this.localconceptsArray[_]);return T}static GetConceptsByTypeIdAndUser(k,T){return a(this,void 0,void 0,function*(){let _=[];return _=yield i.getTypeVariantsFromTreeWithUserId(k,T),_})}static ClearData(){return a(this,void 0,void 0,function*(){this.localconceptsArray=[],w.G.connectionArray=[]})}getName(){return this.name}}h.localconceptsArray=[]},4864:(he,q,m)=>{m.d(q,{G:()=>A});var E=m(2155),F=m(8286),c=m(205),f=m(628),S=function(s,i,u,v){return new(u||(u=Promise))(function(I,w){function L(a){try{l(v.next(a))}catch(h){w(h)}}function d(a){try{l(v.throw(a))}catch(h){w(h)}}function l(a){var h;a.done?I(a.value):(h=a.value,h instanceof u?h:new u(function(N){N(h)})).then(L,d)}l((v=v.apply(s,[])).next())})};class A{constructor(){this.name="Connection Array"}static CheckContains(i){for(var u=!1,v=0;v<this.connectionArray.length;v++)this.connectionArray[v].id==i.id&&(u=!0);return u}static AddConnection(i){this.CheckContains(i)&&this.RemoveConnection(i),i.id,this.connectionArray.push(i)}static AddConnectionToMemory(i){this.CheckContains(i)&&this.RemoveConnection(i),this.connectionArray.push(i)}static AddToDictionary(i){this.connectionDictionary[i.id]=i}static RemoveConnection(i){for(var u=0;u<this.connectionArray.length;u++)this.connectionArray[u].id==i.id&&this.connectionArray.splice(u,1);i.id}static RemoveConnectionById(i){for(var u=0;u<this.connectionArray.length;u++)this.connectionArray[u].id==i&&this.connectionArray.splice(u,1);f.H.RemoveConnectionById(i)}static AddPermanentConnection(i){i.id>0&&F.d.AddConnection(function(u){let v=new E.N(0,0,0,0,0,0,0);return v.ofTheConceptId=u.ofTheConceptId,v.toTheConceptId=u.toTheConceptId,v.typeId=u.typeId,v.orderId=u.orderId,v.id=u.id,v}(i))}static GetConnection(i){var u;u=null;for(var v=0;v<this.connectionArray.length;v++)this.connectionArray[v].id==i&&(u=this.connectionArray[v]);return u}static waitForDataToLoad(){return S(this,void 0,void 0,function*(){return new Promise((i,u)=>{this.checkFlag(i),setTimeout(()=>{u("not")},25e3)})})}static checkFlag(i){if(c.B.isLocalConnectionLoaded)return i("done");setTimeout(A.checkFlag,1e3,i)}static GetConnectionsOfCompositionLocal(i){return S(this,void 0,void 0,function*(){var u=[];try{for(var v=0;v<this.connectionArray.length;v++)this.connectionArray[v].typeId==i&&u.push(this.connectionArray[v]);return u}catch{return u}})}static GetConnectionOfCompositionAndTypeLocal(i,u){return S(this,void 0,void 0,function*(){var v=[];try{for(var I=0;I<this.connectionArray.length;I++)this.connectionArray[I].typeId==i&&this.connectionArray[I].ofTheConceptId==u&&v.push(this.connectionArray[I]);return v}catch{return v}})}getName(){return this.name}}A.connectionArray=[],A.connectionDictionary=[]},7820:(he,q,m)=>{m.d(q,{G:()=>f});var E=m(205),F=m(2515),c=function(S,A,s,i){return new(s||(s=Promise))(function(u,v){function I(d){try{L(i.next(d))}catch(l){v(l)}}function w(d){try{L(i.throw(d))}catch(l){v(l)}}function L(d){var l;d.done?u(d.value):(l=d.value,l instanceof s?l:new s(function(a){a(l)})).then(I,w)}L((i=i.apply(S,[])).next())})};class f{static addNodeToTree(A){if(this.root==null)return this.root=A,this.root;this.root=this.root.addNode(A,this.root,this.root.height)}static addConceptToTree(A){var s=new F.x(A.ghostId,A,null,null);this.addNodeToTree(s)}static waitForDataToLoad(){return c(this,void 0,void 0,function*(){return new Promise((A,s)=>{this.checkFlag(A),setTimeout(()=>{s("not")},25e3)})})}static checkFlag(A){if(E.B.isLocalDataLoaded)return A("done");setTimeout(f.checkFlag,1e3,A)}static getNodeFromTree(A){return c(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(A,this.root):null})}static removeNodeFromTree(A){return c(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,A))})}}f.root=null},5257:(he,q,m)=>{m.d(q,{R:()=>f});var E=m(9003),F=m(3075),c=function(S,A,s,i){return new(s||(s=Promise))(function(u,v){function I(d){try{L(i.next(d))}catch(l){v(l)}}function w(d){try{L(i.throw(d))}catch(l){v(l)}}function L(d){var l;d.done?u(d.value):(l=d.value,l instanceof s?l:new s(function(a){a(l)})).then(I,w)}L((i=i.apply(S,[])).next())})};class f{static AddConceptId(A){this.localId=A.value,(0,E.kH)("localid",A)}static getConceptId(){return c(this,void 0,void 0,function*(){try{if(this.localId){if(this.ReservedLocalId.length<5){yield(0,F.EO)().then(()=>{let s=this.localId;for(let i=1;i<10;i++){let u=this.localId-i;this.ReservedLocalId.push(u),s=u}this.AddConceptId({id:0,value:s})}).catch(s=>(console.log(" getid: cannot get the id from indexdb"),-Math.floor(1e8*Math.random())));let A=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),A}{let A=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),A}}return yield(0,F.EO)().then(()=>{let A=this.localId;for(let s=1;s<10;s++){let i=this.localId-s;this.ReservedLocalId.push(i),A=i}this.AddConceptId({id:0,value:A})}),this.getConceptId()}catch(A){return console.log(" getid: this is the eror in concept",A),-Math.floor(1e8*Math.random())}})}static AddConnectionId(A){this.localConnectionId=A.value}static getConnectionId(){return c(this,void 0,void 0,function*(){try{if(this.localConnectionId){if(this.ReservedConnectionId.length<5){yield(0,F.xd)().then(()=>{let s=this.localConnectionId;for(let i=1;i<10;i++){let u=this.localConnectionId-i;this.ReservedConnectionId.push(u),s=u}}).catch(s=>(console.log("this is the new event",s),-Math.floor(1e8*Math.random())));let A=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),A}{let A=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),A}}return yield(0,F.xd)().then(()=>{let A=this.localConnectionId;for(let s=1;s<10;s++){let i=this.localConnectionId-s;this.ReservedConnectionId.push(i),A=i}this.AddConnectionId({id:1,value:A})}),this.getConnectionId()}catch{return-Math.floor(1e8*Math.random())}})}}f.ReservedLocalId=[],f.ReservedConnectionId=[]},628:(he,q,m)=>{m.d(q,{H:()=>L});var E=m(9581),F=m(3278),c=m(4059),f=m(1863),S=function(d,l,a,h){return new(a||(a=Promise))(function(N,k){function T(R){try{B(h.next(R))}catch(D){k(D)}}function _(R){try{B(h.throw(R))}catch(D){k(D)}}function B(R){var D;R.done?N(R.value):(D=R.value,D instanceof a?D:new a(function(H){H(D)})).then(T,_)}B((h=h.apply(d,l||[])).next())})};const A=(d,l,...a)=>S(void 0,[d,l,...a],void 0,function*(h,N,k=!0){let T={concepts:[],connections:[]};try{const _=new Headers;let B={concepts:h,connections:N};_.set("Content-Type","application/json"),_.set("Authorization","Bearer "+F.b.BearerAccessToken),_.set("Accept","application/json"),_.set("X-Session-Id",F.b.sessionId.toString()),_.set("Randomizer",E.B.getRandomizer().toString());const R=yield fetch(E.B.CreateGhostConceptApiUrl(k),{method:"POST",headers:_,body:JSON.stringify(B)});if(!R.ok)throw(0,f.ry)(R),new Error(`Error! status: ${R.status}`);const D=yield R.json();return T.concepts=D.concepts,T.connections=D.connections,T}catch(_){throw _ instanceof Error?console.log("Create the concept api error message: ",_.message):console.log("Create the concept api unexpected error: ",_),_}});function s(d,l){const a=[];for(let h=0;h<d.length;h+=l){const N=d.slice(h,h+l);a.push(N)}return a}const i=(...d)=>S(void 0,[...d],void 0,function*(l=[]){return yield Promise.all(l.map(a=>{let h=JSON.parse(JSON.stringify(a));return delete h.type,delete h.ofConcept,delete h.toConcept,h}))});var u=m(9003),v=m(9736),I=m(4864),w=function(d,l,a,h){return new(a||(a=Promise))(function(N,k){function T(R){try{B(h.next(R))}catch(D){k(D)}}function _(R){try{B(h.throw(R))}catch(D){k(D)}}function B(R){var D;R.done?N(R.value):(D=R.value,D instanceof a?D:new a(function(H){H(D)})).then(T,_)}B((h=h.apply(d,l||[])).next())})};class L{static CheckContains(l){for(var a=!1,h=0;h<this.conceptsSyncArray.length;h++)this.conceptsSyncArray[h].id==l.id&&(a=!0);return a}static SyncDataDelete(l){for(var a=0;a<this.conceptsSyncArray.length;a++)l==this.conceptsSyncArray[a].id&&this.conceptsSyncArray.splice(a,1);for(a=0;a<this.connectionSyncArray.length;a++)this.connectionSyncArray[a].ofTheConceptId!=l&&this.connectionSyncArray[a].toTheConceptId!=l&&this.connectionSyncArray[a].typeId!=l||this.connectionSyncArray.splice(a,1)}static CheckContainsConnection(l){for(var a=!1,h=0;h<this.connectionSyncArray.length;h++)this.connectionSyncArray[h].id==l.id&&(a=!0);return a}static AddConcept(l){try{let a=!1;L.CheckIfTheConceptIdExists(l.id,this.conceptsSyncArray).id!=0&&(a=!0),a||this.conceptsSyncArray.push(l)}catch(a){throw a}}static RemoveConcept(l){for(var a=0;a<this.conceptsSyncArray.length;a++)this.conceptsSyncArray[a].id==l.id&&this.conceptsSyncArray.splice(a,1)}static SyncDataOnlineWithoutAuth(l,a){return w(this,arguments,void 0,function*(h,N,k=!1){return L.SyncDataOnline(h,N,k)})}static SyncDataOnline(l,a){return w(this,arguments,void 0,function*(h,N,k=!0){let T=performance.now();console.log("syncing...",h,N,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!c.serviceWorker,k),setTimeout(()=>{console.log("syncing...",h,N,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!c.serviceWorker,k)},5e3);try{if(c.serviceWorker)try{return console.log("syncing in the service worker",h,k),(yield(0,c.sendMessage)("LocalSyncData__SyncDataOnline",{transactionId:h,withAuth:k})).data}catch(M){console.error("LocalSyncData__SyncDataOnline sw error: ",M),(0,c.handleServiceWorkerException)(M)}console.log("syncing in the without service worker syncing",h,k);let _=[],B=[];if(h&&this.transactionCollections.some(M=>M.id==h)){const M=this.transactionCollections.find(U=>U.id==h);if(this.transactionCollections=this.transactionCollections.filter(U=>U.id!=h),this.transactionCollections=this.transactionCollections.filter(U=>new Date(U.createdDate).getTime()>new Date().getTime()-6048e5),!M)return;_=M.data.concepts.slice(),B=M.data.connections.slice()}else Array.isArray(N?.concepts)&&Array.isArray(N?.connections)?(console.log("this is the concepts and connections array",N?.concepts,N?.connections),_=N.concepts.slice(),B=N.connections.slice(),console.log("this is the concepts and connections array",_,B),this.conceptsSyncArray=this.conceptsSyncArray.filter(M=>{const U=N.concepts.some(P=>M.id==P.id||M.ghostId==P.ghostId);return U||console.warn(`Concept not found in sync array: ${M.id||M.ghostId}`),U}),this.connectionSyncArray=this.connectionSyncArray.filter(M=>{const U=N.connections.some(P=>M.id==P.id||M.ghostId==P.ghostId);return U||console.warn(`Connection not found in sync array: ${M.id||M.ghostId}`),U})):(console.warn("Syncing this way has been Depreceted in service worker."),console.info("Only if serive worker is not running"),_=this.conceptsSyncArray.slice()||[],B=this.connectionSyncArray.slice()||[],this.connectionSyncArray=[],this.conceptsSyncArray=[]);console.log("syncing... inside the syncer",k);let R=[];for(let M=0;M<_.length;M++)R.push(_[M]),yield v.v.UpdateConceptSyncStatus(_[M].id);console.log("syncing... inside the syncer 2",k,_),yield this.UpdateConceptListToIncludeRelatedConcepts(B,R);let D=yield function(M,U){return S(this,arguments,void 0,function*(P,$,K=!0){const Q=c.Logger.logfunction("CreateTheGhostConceptApi",[P.length,$.length]);try{let X={concepts:[],connections:[]};const te=yield i(P),ue=yield i($);if(P.length+$.length<=2*1e3){const ge=yield A(te,ue,K);return Array.isArray(ge?.concepts)&&(X.concepts=[...X.concepts,...ge.concepts]),Array.isArray(ge?.connections)&&(X.connections=[...X.connections,...ge.connections]),c.Logger.logUpdate(Q),X}const de=s(te,1e3),Y=s(ue,1e3),ne=[],oe=[];console.log("This is the with auth in syncing",K);for(let ge=0;ge<de.length;ge++){const se=de[ge];ne.push(A(se,[],K))}const pe=yield Promise.all(ne);for(let ge=0;ge<pe.length;ge++){const se=pe[ge];Array.isArray(se?.concepts)&&(X.concepts=[...X.concepts,...se.concepts]),Array.isArray(se?.connections)&&(X.connections=[...X.connections,...se.connections])}for(let ge=0;ge<Y.length;ge++){const se=Y[ge];oe.push(A([],se,K))}const Ae=yield Promise.all(oe);for(let ge=0;ge<Ae.length;ge++){const se=Ae[ge];Array.isArray(se?.concepts)&&(X.concepts=[...X.concepts,...se.concepts]),Array.isArray(se?.connections)&&(X.connections=[...X.connections,...se.connections])}return c.Logger.logUpdate(Q),X}catch(ee){throw console.log(ee),(0,f.ey)(Q,"CreateTheGhostConceptApi",ee),ee}})}(R,B,k);console.log("syncing... inside the syncer 3",k);let H=D.concepts,O=D.connections;for(let M=0;M<H.length;M++)v.v.AddPermanentConcept(H[M]);for(let M=0;M<O.length;M++)I.G.AddPermanentConnection(O[M]);return _}catch(_){throw c.Logger.logError(T,"unknown",void 0,"unknown",void 0,500,_,"SyncDataOnline",[],"unknown",void 0),_}})}static ConvertGhostIdsInConnections(l){var a,h,N;for(let k=0;k<l.length;k++){let T=l[k].ofTheConceptId,_=l[k].toTheConceptId,B=l[k].typeId,R=(a=L.ghostIdMap.get(T))!==null&&a!==void 0?a:T,D=(h=L.ghostIdMap.get(_))!==null&&h!==void 0?h:_,H=(N=L.ghostIdMap.get(B))!==null&&N!==void 0?N:B;l[k].ofTheConceptId=R,l[k].toTheConceptId=D,l[k].typeId=H}}static UpdateConceptListToIncludeRelatedConcepts(l,a){return w(this,void 0,void 0,function*(){for(let h=0;h<l.length;h++){let N=l[h].ofTheConceptId,k=l[h].toTheConceptId,T=l[h].typeId;if(N<0){let _=this.CheckIfTheConceptIdExists(N,a);_.id==0&&(_=yield v.v.GetConceptByGhostId(N),_.id!=0?_.id!=_.ghostId&&(l[h].ofTheConceptId=_.id):(_=yield v.v.GetConcept(N),this.AddConceptIfDoesNotExist(_,a)))}if(k<0){let _=this.CheckIfTheConceptIdExists(k,a);_.id==0&&(_=yield v.v.GetConceptByGhostId(k),_.id!=0?_.id!=_.ghostId&&(l[h].toTheConceptId=_.id):(_=yield v.v.GetConcept(k),this.AddConceptIfDoesNotExist(_,a)))}if(T<0){let _=this.CheckIfTheConceptIdExists(T,a);_.id==0&&(_=yield v.v.GetConceptByGhostId(T),_.id!=0?_.id!=_.ghostId&&(l[h].typeId=_.id):(_=yield v.v.GetConcept(T),this.AddConceptIfDoesNotExist(_,a)))}}})}static AddConceptIfDoesNotExist(l,a=[]){let h=!1;for(let N=0;N<a.length;N++)l.ghostId==a[N].ghostId&&(h=!0);h||a.push(l)}static CheckIfTheConceptIdExists(l,a=[]){let h=(0,c.CreateDefaultLConcept)();for(let N=0;N<a.length;N++)l!=a[N].ghostId&&l!=a[N].id||(h=a[N]);return h}static AddConnection(l){this.connectionSyncArray.push(l)}static RemoveConnection(l){for(var a=0;a<this.connectionSyncArray.length;a++)this.connectionSyncArray[a].id==l.id&&this.connectionSyncArray.splice(a,1)}static RemoveConnectionById(l){for(var a=0;a<this.connectionSyncArray.length;a++)this.connectionSyncArray[a].id==l&&this.connectionSyncArray.splice(a,1)}static syncDataLocalDb(){return w(this,void 0,void 0,function*(){if(this.conceptsSyncArray.length>0){for(let l=0;l<this.conceptsSyncArray.length;l++)(0,u.kH)("localconcept",this.conceptsSyncArray[l]);this.conceptsSyncArray=[]}if(this.connectionSyncArray.length>0){for(let l=0;l<this.connectionSyncArray.length;l++)(0,u.kH)("localconnection",this.connectionSyncArray[l]);this.connectionSyncArray=[]}return"done"})}static initializeTransaction(l){return w(this,void 0,void 0,function*(){try{if(c.serviceWorker)try{return(yield(0,c.sendMessage)("LocalSyncData__initializeTransaction",{transactionId:l})).data}catch(a){console.error("LocalSyncData__initializeTransaction sw error: ",a),(0,c.handleServiceWorkerException)(a)}if(this.transactionCollections.some(a=>a.id==l))return;this.transactionCollections.push({id:l,data:{concepts:[],connections:[]},createdDate:new Date().toISOString()})}catch(a){console.log("error in initializeTransaction",a)}})}static markTransactionActions(l,a){return w(this,void 0,void 0,function*(){try{if(c.serviceWorker)try{return(yield(0,c.sendMessage)("LocalSyncData__markTransactionActions",{transactionId:l,actions:a})).data}catch(h){console.error("LocalSyncData__markTransactionActions sw error: ",h),(0,c.handleServiceWorkerException)(h)}this.transactionCollections=this.transactionCollections.map(h=>h.id==l?Object.assign(Object.assign({},h),{data:JSON.parse(JSON.stringify(a))}):h),this.conceptsSyncArray=this.conceptsSyncArray.filter(h=>!a.concepts.some(N=>N.id==h.id||N.ghostId==h.id)),this.connectionSyncArray=this.connectionSyncArray.filter(h=>!a.connections.some(N=>N.id==h.id||N.ghostId==h.id))}catch(h){console.log("error in markTransactionActions",h)}})}static rollbackTransaction(l,a){return w(this,void 0,void 0,function*(){try{if(c.serviceWorker)try{return(yield(0,c.sendMessage)("LocalSyncData__rollbackTransaction",{transactionId:l,actions:a})).data}catch(h){console.error("LocalSyncData__rollbackTransaction sw error: ",h),(0,c.handleServiceWorkerException)(h)}if(this.transactionCollections.some(h=>h.id==l))return;this.transactionCollections=this.transactionCollections.filter(h=>h.id!=l)}catch(h){console.log("LocalSyncData, roll",h)}})}}L.conceptsSyncArray=[],L.connectionSyncArray=[],L.ghostIdMap=new Map,L.transactionCollections=[]},6731:(he,q,m)=>{m.d(q,{b:()=>E});class E{constructor(c,f,S,A){this.variants=[],this.height=1,this.key=c,this.value=f,this.leftNode=S,this.rightNode=A,this.currentNode=null}addCurrentNode(c,f){return f==null?f=c:(c.value.typeId!=f.value.typeId&&(f.currentNode=this.addCurrentNode(c,f.currentNode)),f)}addCurrentNodeType(c,f){if(f==null)return c;let S=!1;for(let A=0;A<f.variants.length;A++)f.variants[A].value.id==c.value.id&&(S=!0);return S||f.variants.push(c),f}addNode(c,f,S){if(f==null)return c;let A=f.leftNode,s=f.rightNode;if(f.key>c.key)f.leftNode=this.addNode(c,A,S);else{if(!(f.key<c.key))return f;f.rightNode=this.addNode(c,s,S)}f.height=1+Math.max(this.getHeight(f.leftNode),this.getHeight(f.rightNode));let i=this.getBalanceFactor(f);if(i>1&&f.leftNode){if(c.key<f.leftNode.key)return this.rightRotate(f);if(c.key>f.leftNode.key)return f.leftNode=this.leftRotate(f.leftNode),this.rightRotate(f)}if(i<-1&&f.rightNode){if(c.key>f.rightNode.key)return this.leftRotate(f);if(c.key<f.rightNode.key)return f.rightNode=this.rightRotate(f.rightNode),this.leftRotate(f)}return f}checkIfIdsInNode(c,f,S,A){if(c){if(f.includes(c.key)){S.push(c.value);let s=f.indexOf(c.key);f.splice(s,1)}c.leftNode&&this.checkIfIdsInNode(c.leftNode,f,S,A),c.rightNode&&this.checkIfIdsInNode(c.rightNode,f,S,A)}}addCharacterNode(c,f,S){if(c.value.characterValue!=""){if(f==null)return c;let A=f.leftNode,s=f.rightNode;if(f.key>c.key)f.leftNode=this.addCharacterNode(c,A,S);else{if(!(f.key<c.key))return f.key==c.key&&f.key!=""&&f.value.id!=c.value.id&&f.addCurrentNodeType(c,f),f;f.rightNode=this.addCharacterNode(c,s,S)}f.height=1+Math.max(this.getHeight(f.leftNode),this.getHeight(f.rightNode));let i=this.getBalanceFactor(f);if(i>1&&f.leftNode){if(c.key<f.leftNode.key)return this.rightRotate(f);if(c.key>f.leftNode.key)return f.leftNode=this.leftRotate(f.leftNode),this.rightRotate(f)}if(i<-1&&f.rightNode){if(c.key>f.rightNode.key)return this.leftRotate(f);if(c.key<f.rightNode.key)return f.rightNode=this.rightRotate(f.rightNode),this.leftRotate(f)}}return f}addTypeNode(c,f,S){if(c.value.typeId!=0){if(f==null)return console.log("adding the type node to the tree",c),c;let A=f.leftNode,s=f.rightNode;if(f.key>c.key)f.leftNode=this.addTypeNode(c,A,S);else{if(!(f.key<c.key))return console.log("adding the type node to the tree down",c),f.key==c.key&&f.key!=0&&f.value.id!=c.value.id&&f.addCurrentNodeType(c,f),console.log("adding the type node to the tree last",f),f;f.rightNode=this.addTypeNode(c,s,S)}f.height=1+Math.max(this.getHeight(f.leftNode),this.getHeight(f.rightNode));let i=this.getBalanceFactor(f);if(i>1&&f.leftNode){if(c.key<f.leftNode.key)return this.rightRotate(f);if(c.key>f.leftNode.key)return f.leftNode=this.leftRotate(f.leftNode),this.rightRotate(f)}if(i<-1&&f.rightNode){if(c.key>f.rightNode.key)return this.leftRotate(f);if(c.key<f.rightNode.key)return f.rightNode=this.rightRotate(f.rightNode),this.leftRotate(f)}}return f}rightRotate(c){if(c){let f=c.leftNode;if(f){let S=f.rightNode;return c.leftNode=S,f.rightNode=c,c.height=Math.max(this.getHeight(c.leftNode),this.getHeight(c.rightNode))+1,f.height=Math.max(this.getHeight(f.leftNode),this.getHeight(f.rightNode))+1,f}}return c}leftRotate(c){if(c){let f=c.rightNode;if(f){let S=f.leftNode;return f.leftNode=c,c.rightNode=S,c.height=Math.max(this.getHeight(c.leftNode),this.getHeight(c.rightNode))+1,f.height=Math.max(this.getHeight(f.leftNode),this.getHeight(c.rightNode))+1,f}}return c}getHeight(c){return c?c.height:0}getBalanceFactor(c){return c==null?0:this.getHeight(c.leftNode)-this.getHeight(c.rightNode)}getFromNode(c,f){return f&&(c==f.key?f:c<f.key?this.getFromNode(c,f.leftNode):c>f.key?this.getFromNode(c,f.rightNode):f)}getCharacterFromNode(c,f){return f&&(c==f.key?f:c<f.key?this.getCharacterFromNode(c,f.leftNode):c>f.key?this.getCharacterFromNode(c,f.rightNode):f)}getCharacterFromNodeUpdated(c,f){var S;return f&&(c==f.key||((S=f.value)===null||S===void 0?void 0:S.typeId)==51?f:c<f.key?this.getCharacterFromNode(c,f.leftNode):c>f.key?this.getCharacterFromNode(c,f.rightNode):f)}getFromNodeWithCharacterAndType(c,f,S){if(c=`${c}`,S){if(c==S.key){if(c==S.value.characterValue&&f==S.value.typeId)return S;for(let A=0;A<S.variants.length;A++)if(S.variants[A].value.typeId==f)return S.variants[A]}else{if(c<S.key)return this.getFromNodeWithCharacterAndType(c,f,S.leftNode);if(c>S.key)return this.getFromNodeWithCharacterAndType(c,f,S.rightNode)}return null}return S}getFromNodeWithCharacterAndCategory(c,f,S){if(c=`${c}`,S){if(c==S.key){if(c==S.value.characterValue&&f==S.value.categoryId)return S;for(let A=0;A<S.variants.length;A++)if(S.variants[A].value.categoryId==f)return S.variants[A]}else{if(c<S.key)return this.getFromNodeWithCharacterAndCategory(c,f,S.leftNode);if(c>S.key)return this.getFromNodeWithCharacterAndCategory(c,f,S.rightNode)}return null}return S}removeNode(c,f){if(c==null)return c;if(c.key>f)return c.leftNode=this.removeNode(c.leftNode,f),c;if(c.key<f)return c.rightNode=this.removeNode(c.rightNode,f),c;if(c.leftNode==null){let S=c.rightNode;return c=null,S}if(c.rightNode==null){let S=c.leftNode;return c=null,S}{let S=this.inOrderSuccessor(c.rightNode);return c.value=S.value,c.key=S.key,c.variants=S.variants,c.currentNode=S.currentNode,c.rightNode=this.removeNode(c.rightNode,S.key),c}}removeNodeWithVariants(c,f,S){if(c==null)return c;if(c.key>f)return c.leftNode=this.removeNodeWithVariants(c.leftNode,f,S),c;if(c.key<f)return c.rightNode=this.removeNodeWithVariants(c.rightNode,f,S),c;if(c.variants.length>0){if(c.value.id==S){let A=c.variants[0];if(A)return c.value=A.value,c.key=A.key,c.currentNode=A.currentNode,c.variants.splice(0,1),c}else for(let A=0;A<c.variants.length;A++)if(S==c.variants[A].value.id)return c.variants.splice(A,1),c}if(c.leftNode==null){let A=c.rightNode;return c=null,A}if(c.rightNode==null){let A=c.leftNode;return c=null,A}{let A=this.inOrderSuccessor(c.rightNode);return c.value=A.value,c.key=A.key,c.variants=A.variants,c.currentNode=A.currentNode,c.rightNode=this.removeNodeWithVariants(c.rightNode,A.key,S),c}}countNodeBelow(c){return c==null?0:1+this.countNodeBelow(c.leftNode)+this.countNodeBelow(c.rightNode)}inOrderSuccessor(c){for(;c.leftNode!=null;)c=c.leftNode;return c}}},5976:(he,q,m)=>{m.d(q,{p:()=>s,B:()=>A});var E=m(9581),F=m(3518),c=m(1863),f=m(4059),S=function(i,u,v,I){return new(v||(v=Promise))(function(w,L){function d(h){try{a(I.next(h))}catch(N){L(N)}}function l(h){try{a(I.throw(h))}catch(N){L(N)}}function a(h){var N;h.done?w(h.value):(N=h.value,N instanceof v?N:new v(function(k){k(N)})).then(d,l)}a((I=I.apply(i,[])).next())})};class A{static getId(){return S(this,void 0,void 0,function*(){this.ids.length<5&&(yield function(){var v,I,w,L,d=arguments;return v=this,I=void 0,L=function*(){const l=f.Logger.logfunction("GetReservedIds",d);try{let a=(0,F.Xr)("application/x-www-form-urlencoded");const h=yield fetch(E.B.GetReservedIdUrl(),{method:"GET",headers:a});if(!h.ok)throw(0,c.ry)(h),new Error(`Error! status: ${h.status}`);const N=yield h.json();for(let k=0;k<N.length;k++)A.AddId(N[k]);f.Logger.logUpdate(l)}catch(a){a instanceof Error?console.log("get reserved ids error message: ",a.message):console.log("get reserved ids  unexpected error: ",a),(0,c.Mb)(a,E.B.GetReservedIdUrl()),(0,c.ey)(l,"GetReservedIds",a)}},new((w=void 0)||(w=Promise))(function(l,a){function h(T){try{k(L.next(T))}catch(_){a(_)}}function N(T){try{k(L.throw(T))}catch(_){a(_)}}function k(T){var _;T.done?l(T.value):(_=T.value,_ instanceof w?_:new w(function(B){B(_)})).then(h,N)}k((L=L.apply(v,I||[])).next())})}());var u=this.ids[0];return this.ids.shift(),u})}static AddId(u){this.ids.includes(u)||this.ids.push(u)}}A.ids=[];class s{static getId(){return S(this,void 0,void 0,function*(){this.connectionIds.length<5&&(yield function(){var v,I,w,L,d=arguments;return v=this,I=void 0,L=function*(){const l=f.Logger.logfunction("GetReservedConnectionIds",d);try{let a=(0,F.Xr)("application/x-www-form-urlencoded");const h=yield fetch(E.B.GetReservedConnectionIdUrl(),{method:"GET",headers:a});if(!h.ok)throw(0,c.ry)(h),new Error(`Error! status: ${h.status}`);const N=yield h.json();for(let k=0;k<N.length;k++)s.AddId(N[k]);f.Logger.logUpdate(l)}catch(a){a instanceof Error?console.log("get reserved connection ids error message: ",a.message):console.log("get reserved connection ids  unexpected error: ",a),(0,c.Mb)(a,E.B.GetReservedConnectionIdUrl()),(0,c.ey)(l,"GetReservedConnectionIds",a)}},new((w=void 0)||(w=Promise))(function(l,a){function h(T){try{k(L.next(T))}catch(_){a(_)}}function N(T){try{k(L.throw(T))}catch(_){a(_)}}function k(T){var _;T.done?l(T.value):(_=T.value,_ instanceof w?_:new w(function(B){B(_)})).then(h,N)}k((L=L.apply(v,I||[])).next())})}());var u=this.connectionIds[0];return this.connectionIds.shift(),u})}static AddId(u){this.connectionIds.includes(u)||this.connectionIds.push(u)}}s.connectionIds=[]},7273:(he,q,m)=>{m.d(q,{z:()=>F});var E=m(9581);class F{constructor(f,S,A,s){this.url=E.B.BASE_URL,this.message=f,this.ok=S,this.status=A,this.data=s}getMessage(){return this.message}setMessage(f){return this.message=f,this}getStatus(){return this.status}setStatus(f){return this.status=f,this}getData(){return this.data}setData(f){return this.data=f,this}getOk(){return this.ok}setOk(f){return this.ok=f,this}getUrl(){return this.url}setUrl(f){return this.url=f,this}}},3278:(he,q,m)=>{m.d(q,{b:()=>E});class E{}E.BearerAccessToken="",E.sessionId=998},2299:(he,q,m)=>{m.d(q,{B:()=>E});class E{constructor(c){this.id=1,this.isOnlineSync=!1,this.isOnlineSync=c}}},442:(he,q,m)=>{m.d(q,{Y:()=>u});var E=m(1167),F=m(2155),c=m(9581),f=m(3518),S=m(1863),A=m(3026),s=m(8286),i=m(4059);class u{static CheckContains(I){for(var w=!1,L=0;L<this.conceptsSyncArray.length;L++)this.conceptsSyncArray[L].id==I.id&&(w=!0);return w}static SyncDataDelete(I){for(var w=0;w<this.conceptsSyncArray.length;w++)I==this.conceptsSyncArray[w].id&&this.conceptsSyncArray.splice(w,1);for(w=0;w<this.connectionSyncArray.length;w++)this.connectionSyncArray[w].ofTheConceptId!=I&&this.connectionSyncArray[w].toTheConceptId!=I&&this.connectionSyncArray[w].typeId!=I||this.connectionSyncArray.splice(w,1)}static CheckContainsConnection(I){for(var w=!1,L=0;L<this.connectionSyncArray.length;L++)this.connectionSyncArray[L].id==I.id&&(w=!0);return w}static AddConcept(I){this.conceptsSyncArray.push(I)}static RemoveConcept(I){for(var w=0;w<this.conceptsSyncArray.length;w++)this.conceptsSyncArray[w].id==I.id&&this.conceptsSyncArray.splice(w,1)}static AddConnection(I){this.connectionSyncArray.push(I)}static RemoveConnection(I){for(var w=0;w<this.connectionSyncArray.length;w++)this.connectionSyncArray[w].id==I.id&&this.connectionSyncArray.splice(w,1)}static SyncDataOnline(){return I=this,w=void 0,d=function*(){if(i.serviceWorker)try{return(yield(0,i.sendMessage)("SyncData__SyncDataOnline",{})).data}catch(l){console.error("SyncData__SyncDataOnline sw error: ",l),(0,i.handleServiceWorkerException)(l)}for(let l=0;l<this.conceptsSyncArray.length;l++)A.I.AddConcept(this.conceptsSyncArray[l]);for(let l=0;l<this.connectionSyncArray.length;l++)s.d.AddConnection(this.connectionSyncArray[l]);if(this.conceptsSyncArray.length>0){let l=this.conceptsSyncArray.slice();this.conceptsSyncArray=[],(0,E.Y)(l)}if(this.connectionSyncArray.length>0){let l=this.connectionSyncArray.slice();this.connectionSyncArray=[],yield function(a){return h=this,N=void 0,T=function*(){let _=new F.N(0,0,0,0,0,0,0);try{var B=(0,f.Xr)(),R=JSON.stringify(a);const D=yield fetch(c.B.CreateTheConnectionUrl(),{method:"POST",headers:B,body:R});return D.ok?yield D.json():(console.log("Create the connection error message: ",D.status),(0,S.ry)(D)),_}catch(D){throw D instanceof Error?console.log("Create the connection error message: ",D.message):console.log(" Create the connection unexpected error: ",D),D}},new((k=void 0)||(k=Promise))(function(_,B){function R(O){try{H(T.next(O))}catch(M){B(M)}}function D(O){try{H(T.throw(O))}catch(M){B(M)}}function H(O){var M;O.done?_(O.value):(M=O.value,M instanceof k?M:new k(function(U){U(M)})).then(R,D)}H((T=T.apply(h,N||[])).next())});var h,N,k,T}(l)}return"done"},new((L=void 0)||(L=Promise))(function(l,a){function h(T){try{k(d.next(T))}catch(_){a(_)}}function N(T){try{k(d.throw(T))}catch(_){a(_)}}function k(T){var _;T.done?l(T.value):(_=T.value,_ instanceof L?_:new L(function(B){B(_)})).then(h,N)}k((d=d.apply(I,w||[])).next())});var I,w,L,d}}u.conceptsSyncArray=[],u.connectionSyncArray=[]},9003:(he,q,m)=>{m.d(q,{S5:()=>s,kH:()=>u,qI:()=>A});var E=m(1863),F=m(4059),c=function(v,I,w,L){return new(w||(w=Promise))(function(d,l){function a(k){try{N(L.next(k))}catch(T){l(T)}}function h(k){try{N(L.throw(k))}catch(T){l(T)}}function N(k){var T;k.done?d(k.value):(T=k.value,T instanceof w?T:new w(function(_){_(T)})).then(a,h)}N((L=L.apply(v,[])).next())})};let f=10;class S{}function A(v){const I=F.Logger.logfunction("openDatabase",arguments);return new Promise(function(w,L){S.db&&(F.Logger.logUpdate(I),w(S.db));let d=F.BaseUrl.BASE_URL+"_FreeSchemaLocal"+F.BaseUrl.BASE_APPLICATION;const l=indexedDB.open(d,f);l.onupgradeneeded=a=>{var h=a.target.result,N="localconcept",k="localconnection",T="localid";console.log("this is the version upgrade",f),h.objectStoreNames.contains(N)&&h.deleteObjectStore(N),h.objectStoreNames.contains(k)&&h.deleteObjectStore(k),h.objectStoreNames.contains(T)&&h.deleteObjectStore(T),h.objectStoreNames.contains(N)||(h.createObjectStore(N,{keyPath:"id"}).transaction.oncomplete=_=>{}),h.objectStoreNames.contains(k)||(h.createObjectStore(k,{keyPath:"id"}).transaction.oncomplete=_=>{}),h.objectStoreNames.contains(T)||(h.createObjectStore(T,{keyPath:"id"}).transaction.oncomplete=_=>{i(T,{id:0,value:-100}),i(T,{id:1,value:-200}),i(T,{id:3,value:F.BaseUrl.getRandomizer()})}),w(h)},l.onerror=a=>{console.error("Why didn't you allow my web app to use IndexedDB?!",a),indexedDB.deleteDatabase(d),A(v),(0,E.ey)(I,"openDatabase",a),L(a)},l.onsuccess=function(a){var h=a.target;S.db=h.result,F.Logger.logUpdate(I),w(S.db)}})}function s(v){var I=arguments;return c(this,void 0,void 0,function*(){const w=F.Logger.logfunction("getObjectsFromLocalIndexDb",I);return new Promise(function(L,d){A(v).then(l=>{var a=[],h=l.transaction(v,"readwrite").objectStore(v).getAll();h.onsuccess=()=>{const N=h.result;for(var k=0;k<N.length;k++)a.push(N[k]);F.Logger.logUpdate(w),L(a)}}).catch(l=>{let a={status:400,ok:!1,message:"Cannot get objects from database because you cannot open the Local database",data:l};(0,E.ey)(w,"getObjectsFromLocalIndexDb",a),d(a)})})})}function i(v,I){const w=F.Logger.logfunction("storeToDatabase",[v,"localindexdb"]);return new Promise(function(L,d){A(v).then(l=>{const a=l.transaction(v,"readwrite").objectStore(v).add(I);a.onsuccess=h=>{F.Logger.logUpdate(w),L(I)},a.onerror=h=>{let N={status:400,ok:!1,message:"Cannot store to the Local database "+v,data:h,body:I};(0,E.ey)(w,"storeToDatabase",N),d(N)}}).catch(l=>{let a={status:400,ok:!1,message:"Cannot store to database because you cannot open the Local database",data:l};(0,E.ey)(w,"storeToDatabase",a),d(a)})})}function u(v,I){const w=F.Logger.logfunction("UpdateToDatabase",arguments);return new Promise(function(L,d){A(v).then(l=>{const a=l.transaction(v,"readwrite").objectStore(v).put(I);a.onsuccess=h=>{F.Logger.logUpdate(w),L(I)},a.onerror=h=>{let N={status:400,ok:!1,message:"Cannot Update to the Local database"+v,data:h,body:I};(0,E.ey)(w,"UpdateToDatabase",N),d(N)}}).catch(l=>{let a={status:400,ok:!1,message:"Cannot update to database because you cannot open the Local database",data:l};(0,E.ey)(w,"UpdateToDatabase",a),d(a)})})}},3655:(he,q,m)=>{m.d(q,{El:()=>v,b8:()=>u,kH:()=>i,qI:()=>s,wh:()=>I});var E=m(2299),F=m(9581),c=m(4059),f=m(1863);let S=10;class A{}function s(w){const L=c.Logger.logfunction("openDatabase",[w,"indexdb"]);return new Promise(function(d,l){A.db&&(c.Logger.logUpdate(L),d(A.db));let a=F.B.BASE_URL+"_FreeSchema"+F.B.BASE_APPLICATION;const h=indexedDB.open(a,S);console.log("this is the update version",S,h),h.onupgradeneeded=N=>{let k=N.target.result,T="concept",_="connection",B="settings";console.log("this is the version update for index",S),k.objectStoreNames.contains(T)&&k.deleteObjectStore(T),k.objectStoreNames.contains(_)&&k.deleteObjectStore(_),k.objectStoreNames.contains(B)&&k.deleteObjectStore(B),k.objectStoreNames.contains(T)||(k.createObjectStore(T,{keyPath:"id"}).transaction.oncomplete=R=>{}),k.objectStoreNames.contains(_)||(k.createObjectStore(_,{keyPath:"id"}).transaction.oncomplete=R=>{}),k.objectStoreNames.contains(B)||(k.createObjectStore(B,{keyPath:"id"}).transaction.oncomplete=R=>{}),c.Logger.logUpdate(L),d(k)},h.onerror=N=>{console.error("Why didn't you allow my web app to use IndexedDB?!",N),indexedDB.deleteDatabase(a),s(w),(0,f.ey)(L,"openDatabase",N),l(N)},h.onsuccess=function(N){let k=N.target;A.db=k.result,c.Logger.logUpdate(L),d(A.db)}})}function i(w,L){const d=c.Logger.logfunction("UpdateToDatabase",[w,"indexdb"]);return new Promise(function(l,a){s(w).then(h=>{const N=h.transaction(w,"readwrite").objectStore(w).put(L);N.onsuccess=k=>{c.Logger.logUpdate(d),l(L)},N.onerror=k=>{let T={status:400,ok:!1,message:"Cannot Update to the database"+w,data:k,body:L};(0,f.ey)(d,"UpdateToDatabase",T),a(T)}}).catch(h=>{let N={status:400,ok:!1,message:"Cannot update to database because you cannot open the database",data:h};(0,f.ey)(d,"UpdateToDatabase",N),a(N)})})}function u(){const w=c.Logger.logfunction("GetLastSettingsFromDatabase",["indexdb"]);return new Promise(function(L,d){let l="settings";s(l).then(a=>{let h=a.transaction(l,"readwrite").objectStore(l).getAll();h.onsuccess=()=>{let N=new E.B(!1),k=h.result;for(let T=0;T<k.length;T++)N=k[T];c.Logger.logUpdate(w),L(N)},h.onerror=N=>{(0,f.ey)(w,"GetLastSettingsFromDatabase",N),d(N)}}).catch(a=>{let h={status:400,ok:!1,message:"Cannot get last object from database because you cannot open the database",data:a};(0,f.ey)(w,"GetLastSettingsFromDatabase",h),d(h)})})}function v(w){const L=c.Logger.logfunction("AiUpdateFlag",["indexdb"]);return new Promise(function(d,l){let a="settings";s(a).then(h=>{const N=h.transaction(a,"readwrite").objectStore(a).put(w);N.onsuccess=k=>{c.Logger.logUpdate(L),d(w)},N.onerror=k=>{let T={status:400,ok:!1,message:"Cannot update AI flag",data:k,body:w};(0,f.ey)(L,"AiUpdateFlag",T),l(T)}}).catch(h=>{let N={status:400,ok:!1,message:"Cannot update AI flag because you cannot open the database",data:h};(0,f.ey)(L,"AiUpdateFlag",N),l(N)})})}function I(w,L){const d=c.Logger.logfunction("removeFromDatabase",[w,"indexdb"]);return new Promise(function(l,a){s(w).then(h=>{const N=h.transaction(w,"readwrite").objectStore(w).delete(Number(L));N.onsuccess=function(k){c.Logger.logUpdate(d),l(L)},N.onerror=k=>{let T={status:400,ok:!1,message:"Cannot remove from the database"+w,data:k};(0,f.ey)(d,"removeFromDatabase",T),a(T)}}).catch(h=>{let N={status:400,ok:!1,message:"Cannot remove from the database because you cannot open the database",data:h,body:L};(0,f.ey)(d,"removeFromDatabase",N),a(N)})})}},4485:(he,q,m)=>{function E(S=[],A){var s,i;let u=[],v=(s=A.type)===null||s===void 0?void 0:s.characterValue;if(v?.startsWith("the_")||(v="the_"+v),Array.isArray(S))for(let I=0;I<S.length;I++){let w=(i=S[I].type)===null||i===void 0?void 0:i.characterValue;w?.startsWith("the_")||(w="the_"+w),A.typeId!=S[I].typeId&&v!=w||u.push(S[I])}return u}function F(S=[],A){let s=[],i=A.typeCharacter;if(i?.startsWith("the_")||(i="the_"+i),Array.isArray(S))for(let u=0;u<S.length;u++){let v=S[u].typeCharacter;v?.startsWith("the_")||(v="the_"+v),A.typeId!=S[u].typeId&&i!=v||s.push(S[u])}return s}function c(S=[],A){let s=[];if(Array.isArray(S)){const i=S.find(v=>v.toTheConceptId==A);i&&s.push(i);const u=S.find(v=>v.ofTheConceptId==A);u&&s.push(u)}return s}function f(S=[],A){let s=[];if(Array.isArray(S)){const i=S.find(v=>v.toTheConceptId==A);i&&s.push(i);const u=S.find(v=>v.ofTheConceptId==A);u&&s.push(u)}return s}m.d(q,{gt:()=>f,nm:()=>F,vo:()=>E,wS:()=>c}),m(2155),m(7282)},9934:(he,q,m)=>{function E(F,c){return F.indexOf(c)===-1&&F.push(c),F}m.d(q,{A:()=>E})},9700:(he,q,m)=>{m.d(q,{V:()=>s});var E,F=m(4059),c=m(3278),f=m(1863),S=m(3518),A=function(i,u,v,I){return new(v||(v=Promise))(function(w,L){function d(h){try{a(I.next(h))}catch(N){L(N)}}function l(h){try{a(I.throw(h))}catch(N){L(N)}}function a(h){var N;h.done?w(h.value):(N=h.value,N instanceof v?N:new v(function(k){k(N)})).then(d,l)}a((I=I.apply(i,[])).next())})};class s{static startAutoSync(){this.autoSyncInterval?console.warn("Auto-sync is already running."):(this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS,setInterval(()=>{const u=Date.now();this.nextSyncTime&&u>=this.nextSyncTime&&(this.nextSyncTime=u+this.SYNC_INTERVAL_MS,this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())},3e4))}static stopAutoSync(){this.autoSyncInterval!==null&&(clearInterval(this.autoSyncInterval),this.autoSyncInterval=null,this.nextSyncTime=null)}static setLogLevel(u){this.logLevel=u}static shouldLog(u){return this.LOG_LEVELS.indexOf(u)>=this.LOG_LEVELS.indexOf(this.logLevel)}static formatLogData(u,v,I){const w=Object.assign({timestamp:new Date().toISOString(),level:u,message:v},I);return this.packageLogsData.push(w),u=="ERROR"&&(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer()),w}static log(u,v,I){if(this.logPackageActivationStatus)try{this.formatLogData(u,v,I||null)}catch(w){console.error("Error on Logger Log : ",w)}}static logUpdate(u){var v;try{if(!this.logPackageActivationStatus)return{};if(!u)return{};const I=Date.now();u.startTime=(v=u.startTime)!==null&&v!==void 0?v:I;const w=I-u.startTime;u.responseTime=`${w} ms`,!u.serviceWorker==1&&(u.serviceWorker=!1)}catch(I){(0,f.ey)(u,"Logger.logUpdate",I)}}static logfunction(u,...v){if(!this.logPackageActivationStatus)return{};const I=Date.now();let w=v;const L=F.BaseUrl.getRandomizer(),d=c.b.sessionId;let l={startTime:I,functionName:u,functionParameters:w,requestFrom:F.BaseUrl.BASE_APPLICATION,sessionId:d,applicationId:L};return this.formatLogData("INFO","function called",l)}static logError(u,v,I,w,L,d,l,a,h,N,k){try{const T=c.b.sessionId,_={startTime:u,userId:v,operationType:I,requestFrom:w,requestIP:L,responseStatus:d,responseTime:`${(performance.now()-u).toFixed(3)}ms`,responseSize:l?`${JSON.stringify(l).length}`:"0",sessionId:T?.toString(),functionName:a,functionParameters:h,userAgent:N,conceptsUsed:k};this.formatLogData("ERROR",`Information logged for ${a}`,_)}catch{console.error("Error on logError")}}static logApplication(u,v,I){if(this.logApplicationActivationStatus)try{const w={timestamp:new Date().toISOString(),level:u,message:v,data:I||null};this.applicationLogsData.push(w)}catch(w){console.error("Failed to log application activity:",w)}}static sendApplicationLogsToServer(){return A(this,void 0,void 0,function*(){const u=this.applicationLogsData;try{if(u.length===0)return;this.applicationLogsData=[],c.b.BearerAccessToken;const v=50;let I=(0,S.Xr)(),w=0;for(;u.length!=0;){const L=u.slice(0,v),d=yield fetch(F.BaseUrl.PostLogger(),{method:"POST",headers:I,body:JSON.stringify({logType:this.appLogs,logData:L})});d.ok||(yield d.text()),u.splice(0,v),w+=v,w++}}catch{}})}static sendPackageLogsToServer(){return A(this,void 0,void 0,function*(){const u=this.packageLogsData;try{if(u.length===0)return;this.packageLogsData=[];const v=300;let I=0;for(;u.length!=0;){const w=u.slice(0,v);let L=(0,S.Xr)();const d=yield fetch(F.BaseUrl.PostLogger(),{method:"POST",headers:L,body:JSON.stringify({logType:this.mftsccsBrowser,logData:w})});if(!d.ok)return void(yield d.text());u.splice(0,v),I++}}catch{}})}static saveLogToLocalStorage(u,v){try{if(typeof localStorage===void 0)return void console.warn("Local Storage type undefined");{const I=JSON.parse((localStorage==null?void 0:localStorage.getItem(u))||"[]");I.push(v),localStorage?.setItem(u,JSON.stringify(I))}}catch{console.error("Error on saving log in localstorage"),this.log("ERROR","Error while saving log in local storage")}}static clearLogsFromLocalStorage(u){typeof localStorage!==void 0?localStorage?.removeItem(u):console.warn("localStorage is not available")}}E=s,s.logLevel="INFO",s.packageLogsData=[],s.applicationLogsData=[],s.LOG_LEVELS=["DEBUG","INFO","WARNING","ERROR"],s.SYNC_INTERVAL_MS=6e4,s.nextSyncTime=null,s.appLogs="app",s.mftsccsBrowser="mftsccs",s.logApplicationActivationStatus=!1,s.logPackageActivationStatus=!1,s.autoSyncInterval=null,E.startAutoSync()},1412:(he,q,m)=>{function E(F=[],c=[]){}m.d(q,{e:()=>E})},5898:(he,q,m)=>{m.d(q,{w:()=>S,V:()=>A});var E=m(7139),F=m(4059);class c{constructor(){this.conceptId=0,this.connectionTypeId=0,this.connectionType="",this.count=0}}var f=function(i,u,v,I){return new(v||(v=Promise))(function(w,L){function d(h){try{a(I.next(h))}catch(N){L(N)}}function l(h){try{a(I.throw(h))}catch(N){L(N)}}function a(h){var N;h.done?w(h.value):(N=h.value,N instanceof v?N:new v(function(k){k(N)})).then(d,l)}a((I=I.apply(i,[])).next())})};function S(i=[]){let u=[];if(i.length>0)for(let v=0;v<i.length;v++){let I=s(i[v]);u.push(I)}return u}function A(i){var u=arguments;return f(this,void 0,void 0,function*(){const v=F.Logger.logfunction("GetConnectionTypeForCount",u);let I={};for(let w=0;w<i.length;w++){let L=yield(0,E.r)(i[w].connectionTypeId);i[w].connectionType=L.characterValue,I[i[w].conceptId]=i[w]}return F.Logger.logUpdate(v),I})}function s(i){const u=i.split("_");if(u.length===3){let v=new c;return v.conceptId=Number(u[0]),v.connectionTypeId=Number(u[1]),v.count=Number(u[2]),v}throw new Error("Input string must contain exactly three parts separated by underscores.")}},1863:(he,q,m)=>{m.d(q,{ER:()=>f,Mb:()=>S,ey:()=>A,ry:()=>c});var E=m(4059),F=m(7273);function c(s){if(E.Logger.log("ERROR",s.statusText,{code:s.status,data:s.statusText}),s.status==401||s.status==406){let i=new F.z(s.statusText,!1,s.status,"");throw i.setUrl(s.url),i}if(s.status==500){let i=new F.z(s.statusText,!1,s.status,"");throw i.setUrl(s.url),i}}function f(s,i={}){if(E.Logger.log("ERROR",i.statusText,{code:s.status,data:s.status}),s.status==401||s.status==406){let u=new F.z(i.statusText,!1,s.status,"");throw u.setUrl(s.url),u}if(s.status==500){let u=new F.z(i.statusText,!1,s.status,"");throw u.setUrl(s.url),u}}function S(s,i=""){if(E.Logger.log("ERROR",s.message,{code:s.status,data:s.stack}),s.status){let u=new F.z(s.message,!1,s.status,s.stack);throw u.setUrl(i),u}{let u=new F.z(s.message,!1,500,s.stack);throw u.setUrl(i),u}}function A(s,i,u){var v;try{if(!s)return void console.error(`Error in ${i}: logData is undefined`);const I=Date.now();s.startTime=(v=s.startTime)!==null&&v!==void 0?v:I,s.responseTime=I-s.startTime+" ms",s.level="ERROR",s.errorMessage=u?.message||"Unknown error occurred",console.error(`Error in function ${i}:`,u)}catch(I){console.error("Failed to handle package function error:",I)}}},1708:(he,q,m)=>{m.d(q,{Az:()=>v});var E=m(8146),F=m(3026),c=m(9581),f=m(3518),S=m(4059),A=m(1863),s=m(7876),i=function(I,w,L,d){return new(L||(L=Promise))(function(l,a){function h(T){try{k(d.next(T))}catch(_){a(_)}}function N(T){try{k(d.throw(T))}catch(_){a(_)}}function k(T){var _;T.done?l(T.value):(_=T.value,_ instanceof L?_:new L(function(B){B(_)})).then(h,N)}k((d=d.apply(I,[])).next())})},u=function(I,w,L,d){return new(L||(L=Promise))(function(l,a){function h(T){try{k(d.next(T))}catch(_){a(_)}}function N(T){try{k(d.throw(T))}catch(_){a(_)}}function k(T){var _;T.done?l(T.value):(_=T.value,_ instanceof L?_:new L(function(B){B(_)})).then(h,N)}k((d=d.apply(I,[])).next())})};function v(I){return u(this,void 0,void 0,function*(){const w=S.Logger.logfunction("GetConceptByCharacterAndCategory",I);let L=(0,S.CreateDefaultConcept)();if(I=="the")return L.id=1,L.typeId=5,L.characterValue="the",L;let d=(0,S.SplitStrings)(I);if(d.length>1){let l=1,a=yield v(d[0]);a.id!=0&&(l=a.id),L=yield function(h,N){var k=arguments;return u(this,void 0,void 0,function*(){const T=S.Logger.logfunction("GetConceptByCharacterAndCategoryFromMemory",k);let _=yield S.ConceptsData.GetConceptByCharacterAndCategoryLocal(h,N);return _.id==0&&(_=yield function(B,R){var D=arguments;return i(this,void 0,void 0,function*(){const H=S.Logger.logfunction("GetConceptByCharacterAndCategoryDirectApi",D);let O=(0,S.CreateDefaultConcept)();try{var M=(0,f.Xr)("application/x-www-form-urlencoded");const U=yield fetch(c.B.GetConceptByCharacterAndCategoryDirectUrl(),{method:"POST",headers:M,body:`character_value=${B}&category_id=${R}`});U.ok?(O=yield U.json(),(0,s.K)(O).then(()=>{F.I.AddConcept(O)})):(console.log("This is the concept by category and character error",U.status),(0,A.ry)(U)),S.Logger.logUpdate(H)}catch(U){U instanceof Error?console.log(" This is the concept by category and character error message: ",U.message):console.log(" This is the concept by category and character unexpected error: ",U),(0,A.Mb)(U,c.B.GetConceptByCharacterAndCategoryDirectUrl()),(0,A.ey)(H,"GetConceptByCharacterAndCategoryDirectApi",U)}return O})}(h,N)),S.Logger.logUpdate(T),_})}(I,l)}else d[0]==I&&(L=yield function(l){var a=arguments;return u(this,void 0,void 0,function*(){const h=S.Logger.logfunction("GetConceptByCharacter",a);let N=yield S.ConceptsData.GetConceptByCharacterAndTypeLocal(l,51);return N.id==0&&(N=yield(0,E.Y)(l)),S.Logger.logUpdate(h),N})}(I));return S.Logger.logUpdate(w),L})}},176:(he,q,m)=>{m.d(q,{F4:()=>f,P6:()=>A,dp:()=>S});var E=m(2155),F=m(7282),c=m(6416);function f(s){var i,u;const v=(0,c.u)();return v.id=s.id,v.ghostId=s.ghostId,v.userId=s.userId,v.accessId=s.accessId,v.categoryId=s.categoryId,v.characterValue=s.characterValue,v.entryTimeStamp=s.entryTimeStamp,v.typeId=s.typeId,v.type=s.type,v.isTemp=!1,v.typeCharacter=(u=(i=s?.type)===null||i===void 0?void 0:i.characterValue)!==null&&u!==void 0?u:"",v}function S(s){const i=(0,F.o)();return i.id=s.id,i.ghostId=s.ghostId,i.userId=s.userId,i.accessId=s.accessId,i.entryTimeStamp=s.entryTimeStamp,i.typeId=s.typeId,i.categoryId=s.categoryId,i}function A(s){const i=new E.N(0,0,0,0,0,0,0);return i.id=s.id,i.ghostId=s.ghostId,i.accessId=s.accessId,i.ofTheConceptId=s.ofTheConceptId,i.toTheConceptId=s.toTheConceptId,i.entryTimeStamp=s.entryTimeStamp,i.typeId=s.typeId,i.isTemp=!1,i}},5020:(he,q,m)=>{m.d(q,{A:()=>S});var E=m(4059),F=m(3026),c=m(205),f=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,[])).next())})};function S(){return f(this,void 0,void 0,function*(){try{let A=[];if(Array.isArray(A))for(let s=0;s<A.length;s++){let i=A[s];F.I.AddConceptToMemory(i)}c.B.isDataLoaded=!0,c.B.isCharacterLoaded=!0,c.B.isTypeLoaded=!0}catch(A){throw yield(0,E.DelayFunctionExecution)(2e3,S()),{message:"Cannot create Binary Tree Concept",ok:!1,status:400,data:A}}})}},7282:(he,q,m)=>{m.d(q,{Y:()=>c,o:()=>F});var E=m(2615);function F(){let f=c(new Date),S=c(new Date);return new E.j(0,0,0,0,0,"0",0,!1,f,S,"0")}function c(f){const S=f.getMonth()+1,A=f.getDate(),s=f.getFullYear();let i=f.getHours();const u=f.getMinutes(),v=f.getSeconds(),I=i>=12?"PM":"AM";i%=12,i=i||12;const w=L=>L.toString().padStart(2,"0");return`${S}/${A}/${s} ${i}:${w(u)}:${w(v)} ${I}`}},1218:(he,q,m)=>{m.d(q,{A:()=>A});var E=m(4059),F=m(7282),c=m(1666),f=m(8407),S=function(s,i,u,v){return new(u||(u=Promise))(function(I,w){function L(a){try{l(v.next(a))}catch(h){w(h)}}function d(a){try{l(v.throw(a))}catch(h){w(h)}}function l(a){var h;a.done?I(a.value):(h=a.value,h instanceof u?h:new u(function(N){N(h)})).then(L,d)}l((v=v.apply(s,i||[])).next())})};function A(s){return S(this,arguments,void 0,function*(i,u=null,v=null,I=null,w=null,L=null,d=null){if(E.serviceWorker)try{return(yield(0,E.sendMessage)("CreateTheComposition",{json:i,ofTheConceptId:u,ofTheConceptUserId:v,mainKey:I,userId:w,accessId:L,sessionInformationId:d})).data}catch(T){console.error("CreateTheComposition sw error: ",T),(0,E.handleServiceWorkerException)(T)}let l=w??999,a=L??4,h=d??999,N=I??0,k=(0,F.o)();for(const T in i)if(typeof i[T]!="string"&&typeof i[T]!="number")if(u==null&&v==null){let _=N,B=yield(0,f.A)(T,"",!0,l,a,h);k=B,_=B.id,N=B.id,yield A(i[T],B.id,B.userId,_,w,L,d)}else{let _=u??999,B=v??999,R=N,D=yield(0,f.A)(T,"",!0,l,a,h);k=D,yield(0,c.q)(_,B,D.id,R),yield A(i[T],D.id,D.userId,R,w,L,d)}else{let _=u??999,B=v??10267,R=N,D=yield(0,f.A)(T,i[T].toString(),!1,l,a,h);yield(0,c.q)(_,B,D.id,R)}return k})}},2212:(he,q,m)=>{m.d(q,{Ay:()=>s,N:()=>i});var E=m(1167),F=m(2615),c=m(5976),f=m(442),S=m(4059),A=function(u,v,I,w){return new(I||(I=Promise))(function(L,d){function l(N){try{h(w.next(N))}catch(k){d(k)}}function a(N){try{h(w.throw(N))}catch(k){d(k)}}function h(N){var k;N.done?L(N.value):(k=N.value,k instanceof I?k:new I(function(T){T(k)})).then(l,a)}h((w=w.apply(u,[])).next())})};function s(u,v,I,w,L,d,l){return A(this,void 0,void 0,function*(){let a=yield c.B.getId(),h=new Date,N=new Date,k=new F.j(a,v,w,I,L,u,d,!0,h,N,l);return k.isTemp=!1,f.Y.AddConcept(k),k})}function i(u,v,I,w,L,d,l){return A(this,void 0,void 0,function*(){let a=yield c.B.getId(),h=new Date,N=new Date,k=new F.j(a,v,w,I,L,u,d,!1,h,N,l);return S.ConceptsData.AddConcept(k),(0,E.Y)([k]),k})}},1666:(he,q,m)=>{m.d(q,{q:()=>f});var E=m(2155),F=m(442),c=m(1863);function f(S,A,s,i){var u=A,v=new E.N(0,S,s,u,i,1,4);if(S==s)return v.ofTheConceptId=0,v.toTheConceptId=1,v;try{v.isTemp=!0,v.id=Math.floor(1e8*Math.random()),F.Y.AddConnection(v)}catch(I){(0,c.Mb)(I)}return v}},4818:(he,q,m)=>{m.d(q,{m:()=>v,E:()=>I});var E=m(4059),F=m(1863),c=m(3518),f=function(w,L,d,l){return new(d||(d=Promise))(function(a,h){function N(_){try{T(l.next(_))}catch(B){h(B)}}function k(_){try{T(l.throw(_))}catch(B){h(B)}}function T(_){var B;_.done?a(_.value):(B=_.value,B instanceof d?B:new d(function(R){R(B)})).then(N,k)}T((l=l.apply(w,[])).next())})},S=m(9581),A=function(w,L,d,l){return new(d||(d=Promise))(function(a,h){function N(_){try{T(l.next(_))}catch(B){h(B)}}function k(_){try{T(l.throw(_))}catch(B){h(B)}}function T(_){var B;_.done?a(_.value):(B=_.value,B instanceof d?B:new d(function(R){R(B)})).then(N,k)}T((l=l.apply(w,[])).next())})},s=m(5239),i=m(4864),u=function(w,L,d,l){return new(d||(d=Promise))(function(a,h){function N(_){try{T(l.next(_))}catch(B){h(B)}}function k(_){try{T(l.throw(_))}catch(B){h(B)}}function T(_){var B;_.done?a(_.value):(B=_.value,B instanceof d?B:new d(function(R){R(B)})).then(N,k)}T((l=l.apply(w,[])).next())})};function v(w){var L=arguments;return u(this,void 0,void 0,function*(){const d=E.Logger.logfunction("DeleteConnectionById",L);if(E.serviceWorker)try{return(yield(0,E.sendMessage)("DeleteConnectionById",{id:w})).data}catch(a){console.error("DeleteConnectionById sw error: ",a),(0,E.handleServiceWorkerException)(a)}let l=!0;return w>0?(l=yield function(a){var h=arguments;return A(this,void 0,void 0,function*(){const N=E.Logger.logfunction("DeleteTheConnection",h);let k=!1;try{const T=new FormData;T.append("id",a.toString());let _=(0,c.BZ)();const B=yield fetch(S.B.DeleteTheConnectionUrl(),{method:"POST",headers:_,body:T,redirect:"follow"});E.Logger.logUpdate(N),B.ok?k=(yield B.json()).success:(console.log("Delete connection error status: ",B.status),(0,F.ry)(B)),k&&E.ConnectionData.AddNpConn(a)}catch(T){T instanceof Error?console.log("Delete connection error message: ",T.message):console.log("Delete connection unexpected error: ",T),(0,F.Mb)(T,S.B.DeleteTheConnectionUrl()),(0,F.ey)(N,"DeleteTheConnection",T)}return k})}(w),s.O.removeNodeFromTree(w)):i.G.RemoveConnectionById(w),E.Logger.logUpdate(d),l})}function I(w){var L=arguments;return u(this,void 0,void 0,function*(){const d=E.Logger.logfunction("DeleteConnectionByIdBulk",L);if(E.serviceWorker)try{return(yield(0,E.sendMessage)("DeleteConnectionByIdBulk",{ids:w})).data}catch(a){console.error("DeleteConnectionByIdBulk sw error: ",a),(0,E.handleServiceWorkerException)(a)}let l=yield function(a){var h=arguments;return f(this,void 0,void 0,function*(){const N=E.Logger.logfunction("DeleteTheConnectionBulkApi",h);let k=!1;try{let T=(0,c.BZ)();T.append("Content-Type","application/json");const _=yield fetch(E.BaseUrl.DeleteTheConnectionBulkUrl(),{method:"POST",headers:T,body:JSON.stringify(a)});if(E.Logger.logUpdate(N),_.ok?k=(yield _.json()).success:(console.log("Delete connection Bulk Api error status: ",_.status),(0,F.ry)(_)),k)for(let B=0;B<a.length;B++){let R=a[B];E.ConnectionData.AddNpConn(R)}}catch(T){T instanceof Error?console.log("Delete connection Bulk Api error message: ",T.message):console.log("Delete connection Bulk Api unexpected error: ",T),(0,F.Mb)(T,E.BaseUrl.DeleteTheConnectionUrl()),(0,F.ey)(N,"DeleteTheConnectionBulkApi",T)}return k})}(w);if(l)for(let a=0;a<w.length;a++){let h=w[a];h>0?s.O.removeNodeFromTree(h):i.G.RemoveConnectionById(h)}return E.Logger.logUpdate(d),l})}},2289:(he,q,m)=>{m.d(q,{$S:()=>i,L0:()=>u,WC:()=>v});var E=m(8675),F=m(6058),c=m(4059),f=m(1863);m(3518);var S=m(1708),A=m(4818),s=function(I,w,L,d){return new(L||(L=Promise))(function(l,a){function h(T){try{k(d.next(T))}catch(_){a(_)}}function N(T){try{k(d.throw(T))}catch(_){a(_)}}function k(T){var _;T.done?l(T.value):(_=T.value,_ instanceof L?_:new L(function(B){B(_)})).then(h,N)}k((d=d.apply(I,w||[])).next())})};function i(I,w){var L=arguments;return s(this,void 0,void 0,function*(){const d=c.Logger.logfunction("DeleteConnectionByType",L)||{};if(c.serviceWorker){d.serviceWorker=!0;try{const T=yield(0,c.sendMessage)("DeleteConnectionByType",{id:I,linker:w});return c.Logger.logUpdate(d),T.data}catch(T){console.error("DeleteConnectionByType sw error: ",T),(0,f.ey)(d,"DeleteConnectionByType",T),(0,c.handleServiceWorkerException)(T)}}let l=yield(0,E.l)(I);for(let T=0;T<l.length;T++)c.ConnectionData.AddConnection(l[T]);let a=yield c.ConnectionData.GetConnectionsOfConcept(I),h=yield(0,c.GetConceptByCharacter)(w),N=[];for(let T=0;T<a.length;T++)a[T].typeId==h.id&&N.push(a[T]);let k=!1;for(let T=0;T<N.length;T++)k=yield(0,c.DeleteConnectionById)(N[T].id);return c.Logger.logUpdate(d),k})}function u(I,w){var L=arguments;return s(this,void 0,void 0,function*(){const d=c.Logger.logfunction("DeleteConnectionByTypeBulk",L)||{};if(c.serviceWorker){d.serviceWorker=!0;try{const k=yield(0,c.sendMessage)("DeleteConnectionByTypeBulk",{id:I,linkers:w});return c.Logger.logUpdate(d),k.data}catch(k){console.error("DeleteConnectionByTypeBulk sw error: ",k),(0,f.ey)(d,"DeleteConnectionByTypeBulk",k),(0,c.handleServiceWorkerException)(k)}}let l=yield(0,E.l)(I);for(let k=0;k<l.length;k++)c.ConnectionData.AddConnection(l[k]);let a=yield c.ConnectionData.GetConnectionsOfConcept(I),h=[];for(let k=0;k<w.length;k++){let T=w[k],_=yield(0,S.Az)(T);h.push(_)}let N=[];console.log("this is all the connections for deleting taken",a,h,w);for(let k=0;k<a.length;k++)for(let T=0;T<h.length;T++)a[k].typeId==h[T].id&&N.push(a[k].id);return console.log("these are the to delete",N),c.Logger.logUpdate(d),yield(0,A.E)(N)})}function v(I,w){return s(this,arguments,void 0,function*(L,d,l=!1){if(c.serviceWorker)try{return(yield(0,c.sendMessage)("GetAllTheConnectionsByTypeAndOfTheConcept",{id:L,linker:d,reverse:l})).data}catch(h){console.error("GetAllTheConnectionsByTypeAndOfTheConcept sw error: ",h),(0,c.handleServiceWorkerException)(h)}let a=[];if(l){let h=yield(0,F.W)(L),N=yield(0,c.MakeTheTypeConceptApi)(d,999);for(let k=0;k<h.length;k++)h[k].typeId==N.id&&a.push(h[k])}else{let h=yield(0,E.l)(L);for(let T=0;T<h.length;T++)c.ConnectionData.AddConnection(h[T]);let N=yield c.ConnectionData.GetConnectionsOfConcept(L),k=yield(0,c.GetConceptByCharacter)(d);for(let T=0;T<N.length;T++)N[T].typeId==k.id&&a.push(N[T])}return a})}},4364:(he,q,m)=>{m.d(q,{s:()=>f});var E=m(1239),F=m(4059),c=function(S,A,s,i){return new(s||(s=Promise))(function(u,v){function I(d){try{L(i.next(d))}catch(l){v(l)}}function w(d){try{L(i.throw(d))}catch(l){v(l)}}function L(d){var l;d.done?u(d.value):(l=d.value,l instanceof s?l:new s(function(a){a(l)})).then(I,w)}L((i=i.apply(S,A||[])).next())})};function f(){return c(this,arguments,void 0,function*(S=[]){const A=F.Logger.logfunction("FindConceptsFromConnections",[S.length]);let s=[];if(S.length>0){for(let i=0;i<S.length;i++)s.includes(S[i].ofTheConceptId)||s.push(S[i].ofTheConceptId),s.includes(S[i].toTheConceptId)||s.push(S[i].toTheConceptId),s.includes(S[i].typeId)||s.push(S[i].typeId);yield(0,E.r)(s)}F.Logger.logUpdate(A)})}},5284:(he,q,m)=>{m.d(q,{B:()=>S});var E=m(4059),F=m(8286),c=m(1863),f=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,s||[])).next())})};function S(){return f(this,arguments,void 0,function*(A=[]){const s=E.Logger.logfunction("FindConnectionsOfCompositionsBulkInMemory",[A.length])||{};let i=[];try{if(E.serviceWorker){s.serviceWorker=!0;try{const u=yield(0,E.sendMessage)("FindConnectionsOfCompositionsBulkInMemory",{composition_ids:A});return E.Logger.logUpdate(s),u.data}catch(u){console.error("FindConnectionsOfCompositionsBulkInMemory sw error: ",u),(0,c.ey)(s,"FindConnectionsOfCompositionsBulkInMemory",u),(0,E.handleServiceWorkerException)(u)}}for(let u=0;u<A.length;u++){let v=yield F.d.GetConnectionsOfConcept(A[u]);i.push(...v)}return E.Logger.logUpdate(s),i}catch(u){return console.error("FindConnectionsOfCompositionsBulkInMemory error: ",u),(0,c.ey)(s,"FindConnectionsOfCompositionsBulkInMemory",u),i}})}},8939:(he,q,m)=>{m.d(q,{$N:()=>k,$V:()=>v,Ez:()=>T,JA:()=>h,Mb:()=>L,Nj:()=>w,PT:()=>N,RW:()=>a,XI:()=>l,ay:()=>u,hL:()=>i,kx:()=>d,re:()=>I,yz:()=>_,zN:()=>D});var E=m(7139),F=m(2),c=m(3026),f=m(8286),S=m(4059),A=m(1863),s=function(O,M,U,P){return new(U||(U=Promise))(function($,K){function Q(te){try{X(P.next(te))}catch(ue){K(ue)}}function ee(te){try{X(P.throw(te))}catch(ue){K(ue)}}function X(te){var ue;te.done?$(te.value):(ue=te.value,ue instanceof U?ue:new U(function(de){de(ue)})).then(Q,ee)}X((P=P.apply(O,M||[])).next())})};function i(O){return s(this,void 0,void 0,function*(){let M={connectionList:[],compositionList:[]};try{if(S.serviceWorker)try{return(yield(0,S.sendMessage)("GetCompositionById",{id:O})).data}catch(P){console.error("GetCompositionById error sw: ",P),(0,S.handleServiceWorkerException)(P)}let U=yield(0,F.s)(O);M.connectionList=U;for(let P=0;P<M.connectionList.length;P++)M.compositionList.includes(M.connectionList[P].ofTheConceptId)||M.compositionList.push(M.connectionList[P].ofTheConceptId);return M}catch(U){return console.error("GetCompositionById error: ",U),M}})}function u(O,M,U){return s(this,void 0,void 0,function*(){var P,$;let K={},Q=yield c.I.GetConcept(O);Q.id==0&&O!=null&&O!=null&&(Q=yield(0,E.r)(O));let ee=yield D(O,M,U);return K[($=(P=Q?.type)===null||P===void 0?void 0:P.characterValue)!==null&&$!==void 0?$:""]=ee,K})}function v(O,M,U){return s(this,void 0,void 0,function*(){var P,$;let K={},Q=yield c.I.GetConcept(O);Q.id==0&&O!=null&&O!=null&&(Q=yield(0,E.r)(O));let ee=yield D(O,M,U);K[($=(P=Q?.type)===null||P===void 0?void 0:P.characterValue)!==null&&$!==void 0?$:""]=ee;let X={};return X.created_at=Q.entryTimeStamp,X.data=K,X.id=O,X})}function I(O,M,U){return s(this,void 0,void 0,function*(){var P,$;let K={},Q=yield c.I.GetConcept(O);Q.id==0&&O!=null&&O!=null&&(Q=yield(0,E.r)(O));let ee=yield R(Q,M,U);return K[($=(P=Q?.type)===null||P===void 0?void 0:P.characterValue)!==null&&$!==void 0?$:""]=ee,K})}function w(O){return s(this,void 0,void 0,function*(){var M,U;if(S.serviceWorker)try{return(yield(0,S.sendMessage)("GetComposition",{id:O})).data}catch(X){console.error("GetComposition error sw: ",X),(0,S.handleServiceWorkerException)(X)}let P=[],$={};P=yield(0,F.s)(O);let K=[];for(let X=0;X<P.length;X++)K.includes(P[X].ofTheConceptId)||K.push(P[X].ofTheConceptId);let Q=yield c.I.GetConcept(O);Q.id==0&&O!=null&&O!=null&&(Q=yield(0,E.r)(O));let ee=yield D(O,P,K);return $[(U=(M=Q?.type)===null||M===void 0?void 0:M.characterValue)!==null&&U!==void 0?U:""]=ee,$})}function L(O){return s(this,void 0,void 0,function*(){var M,U;let P=[],$={};P=yield(0,F.s)(O);let K=[];for(let X=0;X<P.length;X++)K.includes(P[X].ofTheConceptId)||K.push(P[X].ofTheConceptId);let Q=yield c.I.GetConcept(O);Q.id==0&&O!=null&&O!=null&&(Q=yield(0,E.r)(O));let ee=yield H(O,P,K);return $[(U=(M=Q?.type)===null||M===void 0?void 0:M.characterValue)!==null&&U!==void 0?U:""]=ee,$})}function d(O){return s(this,void 0,void 0,function*(){var M,U;if(S.serviceWorker)try{return(yield(0,S.sendMessage)("GetCompositionFromMemory",{id:O})).data}catch(X){console.error("GetCompositionFromMemory error sw: ",X),(0,S.handleServiceWorkerException)(X)}let P=[],$={};P=yield f.d.GetConnectionsOfCompositionLocal(O);let K=[];for(let X=0;X<P.length;X++)K.includes(P[X].ofTheConceptId)||K.push(P[X].ofTheConceptId);let Q=yield c.I.GetConcept(O);Q.id==0&&O!=null&&O!=null&&(Q=yield(0,E.r)(O));let ee=yield B(Q,P,K);return $[(U=(M=Q?.type)===null||M===void 0?void 0:M.characterValue)!==null&&U!==void 0?U:""]=ee,$})}function l(O){return s(this,void 0,void 0,function*(){var M,U;if(S.serviceWorker)try{return(yield(0,S.sendMessage)("GetCompositionFromMemoryNormal",{id:O})).data}catch(X){console.error("GetCompositionFromMemoryNormal error sw: ",X),(0,S.handleServiceWorkerException)(X)}let P=[],$={};P=yield f.d.GetConnectionsOfCompositionLocal(O);let K=[];for(let X=0;X<P.length;X++)K.includes(P[X].ofTheConceptId)||K.push(P[X].ofTheConceptId);let Q=yield c.I.GetConcept(O);Q.id==0&&O!=null&&O!=null&&(Q=yield(0,E.r)(O));let ee=yield R(Q,P,K);return $[(U=(M=Q?.type)===null||M===void 0?void 0:M.characterValue)!==null&&U!==void 0?U:""]=ee,$})}function a(O){var M=arguments;return s(this,void 0,void 0,function*(){var U,P;const $=S.Logger.logfunction("GetCompositionWithIdFromMemory",M)||{};if(S.serviceWorker){$.serviceWorker=!0;try{const X=yield(0,S.sendMessage)("GetCompositionWithIdFromMemory",{id:O});return S.Logger.logUpdate($),X.data}catch(X){console.error("GetCompositionWithIdFromMemory error sw: ",X),(0,A.ey)($,"GetCompositionWithIdFromMemory",X),(0,S.handleServiceWorkerException)(X)}}let K={},Q=[],ee={};try{Q=yield f.d.GetConnectionsOfCompositionLocal(O);let X=[];for(let de=0;de<Q.length;de++)X.includes(Q[de].ofTheConceptId)||X.push(Q[de].ofTheConceptId);let te=yield c.I.GetConcept(O);te.id==0&&O!=null&&O!=null&&(te=yield(0,E.r)(O));let ue=yield B(te,Q,X);ee[(P=(U=te?.type)===null||U===void 0?void 0:U.characterValue)!==null&&P!==void 0?P:""]=ue,K.created_at=te.entryTimeStamp,K.data=ee,K.id=O}catch(X){console.log("this is the exception in GetCompositionWithIdFromMemory",O),(0,A.ey)($,"GetCompositionWithIdFromMemory",X)}return S.Logger.logUpdate($),K})}function h(O,M){var U=arguments;return s(this,void 0,void 0,function*(){var P,$;const K=S.Logger.logfunction("GetCompositionFromMemoryWithConnections",U)||{};if(S.serviceWorker){K.serviceWorker=!0;try{const de=yield(0,S.sendMessage)("GetCompositionFromMemoryWithConnections",{id:O,connectionList:M});return S.Logger.logUpdate(K),de.data}catch(de){console.error("GetCompositionFromMemoryWithConnections error sw: ",de),(0,A.ey)(K,"GetCompositionFromMemoryWithConnections",de),(0,S.handleServiceWorkerException)(de)}}let Q={},ee=[];for(let de=0;de<M.length;de++)ee.includes(M[de].ofTheConceptId)||ee.push(M[de].ofTheConceptId);let X=yield c.I.GetConcept(O);X.id==0&&O!=null&&O!=null&&(X=yield(0,E.r)(O));let te=yield B(X,M,ee);Q[($=(P=X?.type)===null||P===void 0?void 0:P.characterValue)!==null&&$!==void 0?$:""]=te;let ue={};return ue.created_at=X.entryTimeStamp,ue.data=Q,ue.id=O,S.Logger.logUpdate(K),ue})}function N(O,M){return s(this,void 0,void 0,function*(){var U,P;const $=S.Logger.logfunction("GetCompositionWithIdFromMemoryFromConnection",[O])||{};if(S.serviceWorker){$.serviceWorker=!0;try{const ue=yield(0,S.sendMessage)("GetCompositionWithIdFromMemory",{id:O});return S.Logger.logUpdate($),ue.data}catch(ue){console.error("GetCompositionWithIdFromMemory error sw: ",ue),(0,A.ey)($,"GetCompositionWithIdFromMemoryFromConnection",ue),(0,S.handleServiceWorkerException)(ue)}}let K={},Q=[];for(let ue=0;ue<M.length;ue++)Q.includes(M[ue].ofTheConceptId)||Q.push(M[ue].ofTheConceptId);let ee=yield c.I.GetConcept(O);ee.id==0&&O!=null&&O!=null&&(ee=yield(0,E.r)(O));let X=yield B(ee,M,Q);K[(P=(U=ee?.type)===null||U===void 0?void 0:U.characterValue)!==null&&P!==void 0?P:""]=X;let te={};return te.created_at=ee.entryTimeStamp,te.data=K,te.id=O,S.Logger.logUpdate($),te})}function k(O){return s(this,void 0,void 0,function*(){var M;if(S.serviceWorker)try{return(yield(0,S.sendMessage)("GetCompositionWithIdFromMemoryNew",{id:O})).data}catch(X){console.error("GetCompositionWithIdFromMemoryNew error sw: ",X),(0,S.handleServiceWorkerException)(X)}let U=[],P={};U=yield f.d.GetConnectionsOfCompositionLocal(O);let $=[];for(let X=0;X<U.length;X++)$.includes(U[X].ofTheConceptId)||$.push(U[X].ofTheConceptId);let K=yield c.I.GetConcept(O);K.id==0&&O!=null&&O!=null&&(console.log("this concept you cannot find ",O),K=yield(0,E.r)(O)),new Date().getTime();let Q=yield function(X,te,ue){return s(this,arguments,void 0,function*(de,Y,ne,oe=[]){var pe,Ae,ge,se,re,ke,We,De;let fe={},Le=de.id,me=(new Date().getTime(),(Ae=(pe=de?.type)===null||pe===void 0?void 0:pe.characterValue)!==null&&Ae!==void 0?Ae:"");if(!ne.includes(Le))return{[me]:de?.characterValue};if(oe.includes(Le))return"";oe.push(Le);for(let ye=0;ye<Y.length;ye++){let Ee=yield(0,S.GetTheConcept)(Y[ye].ofTheConceptId),ae=yield(0,S.GetTheConcept)(Y[ye].toTheConceptId);Y[ye].ofConcept=Ee,Y[ye].toConcept=ae;let Te=Ee.id,Ge="the_",we=((se=(ge=ae?.type)===null||ge===void 0?void 0:ge.characterValue)!==null&&se!==void 0?se:"").replace(Ge,"");fe[Te]!=null&&fe[Te]!=null||(fe[Te]={}),fe[Te][we]=ae.characterValue}let ve={};for(let ye=0;ye<Y.length;ye++){let Ee=Y[ye].ofConcept,ae=Y[ye].toConcept,Te=(ke=(re=Ee?.type)===null||re===void 0?void 0:re.characterValue)!==null&&ke!==void 0?ke:"",Ge="the_",we=((De=(We=ae?.type)===null||We===void 0?void 0:We.characterValue)!==null&&De!==void 0?De:"").replace(Ge,"");ve[Ee.id]!=null&&ve[Ee.id]!=null||(ve[Ee.id]={});let Ne=ve[Ee.id];Ne[Te]!=null&&Ne[Te]!=null||(Ne[Te]={}),fe[Y[ye].ofTheConceptId]!=null&&fe[Y[ye].toTheConceptId]!=null?Ne[Te][we]=fe[ae.id]:Ne[Te][we]=ae.characterValue}return ve[de.id]})}(K,U,$);(M=K?.type)===null||M===void 0||M.characterValue,P=Q;let ee={};return ee.created_at=K.entryTimeStamp,ee.data=P,ee.id=O,ee})}function T(O){return s(this,void 0,void 0,function*(){var M,U;if(S.serviceWorker)try{return(yield(0,S.sendMessage)("GetCompositionWithIdAndDateFromMemory",{id:O})).data}catch(te){console.error("GetCompositionWithIdAndDateFromMemory error sw: ",te),(0,S.handleServiceWorkerException)(te)}let P=[],$={};P=yield f.d.GetConnectionsOfCompositionLocal(O);let K=[];for(let te=0;te<P.length;te++)K.includes(P[te].ofTheConceptId)||K.push(P[te].ofTheConceptId);let Q=yield c.I.GetConcept(O);Q.id==0&&O!=null&&O!=null&&(Q=yield(0,E.r)(O));let ee=yield D(O,P,K);$[(U=(M=Q?.type)===null||M===void 0?void 0:M.characterValue)!==null&&U!==void 0?U:""]=ee;let X={};return X.data=$,X.id=O,X.created_at=Q.entryTimeStamp,X})}function _(O){var M=arguments;return s(this,void 0,void 0,function*(){var U,P;const $=S.Logger.logfunction("GetCompositionWithId",M)||{};if(S.serviceWorker){$.serviceWorker=!0;try{const de=yield(0,S.sendMessage)("GetCompositionWithId",{id:O});return S.Logger.logUpdate($),de.data}catch(de){console.error("GetCompositionWithId error sw: ",de),(0,A.ey)($,"GetCompositionWithId",de),(0,S.handleServiceWorkerException)(de)}}let K=[],Q={};K=yield(0,F.s)(O);let ee=[];for(let de=0;de<K.length;de++)ee.includes(K[de].ofTheConceptId)||ee.push(K[de].ofTheConceptId);let X=yield c.I.GetConcept(O);X.id==0&&O!=null&&O!=null&&(X=yield(0,E.r)(O));let te=yield D(O,K,ee);Q[(P=(U=X?.type)===null||U===void 0?void 0:U.characterValue)!==null&&P!==void 0?P:""]=te;let ue={};return ue.data=Q,ue.id=O,S.Logger.logUpdate($),ue})}function B(O,M,U){return s(this,arguments,void 0,function*(P,$,K,Q=[]){var ee,X,te;let ue={},de=[],Y=P.id;if((ee=P?.type)===null||ee===void 0||ee.characterValue,!K.includes(Y))return P?.characterValue;if(Q.includes(Y))return"";Q.push(Y);for(let ne=0;ne<$.length;ne++)if($[ne].ofTheConceptId==Y)if(Y!=$[ne].toTheConceptId){let oe=$[ne].toTheConceptId,pe=yield c.I.GetConcept(oe);if(pe!=null&&pe.id!=0||oe==null||oe==null||(pe=yield(0,E.r)(oe)),pe.id!=0&&pe?.type==null){let se=pe.typeId,re=yield c.I.GetConcept(se);pe.type=re,re==null&&se!=null&&se!=null&&(re=yield(0,E.r)(se),pe.type=re)}let Ae="the_",ge=((te=(X=pe?.type)===null||X===void 0?void 0:X.characterValue)!==null&&te!==void 0?te:"").replace(Ae,"");if(isNaN(Number(ge))){if(ge){const se=yield B(pe,$,K,Q);ue[ge]=se}}else{const se=yield B(pe,$,K,Q);de[ge]=se,ue=de}}else console.log("this is the faulty connection ",$[ne]);return ue})}function R(O,M,U){return s(this,arguments,void 0,function*(P,$,K,Q=[]){var ee,X,te;const ue=S.Logger.logfunction("recursiveFetchConceptNormal",[P]);new Date().getTime();let de={},Y=[],ne=P.id;if(de.id=ne,(ee=P?.type)===null||ee===void 0||ee.characterValue,!K.includes(ne))return P?.characterValue;if(Q.includes(ne))return"";Q.push(ne);for(let oe=0;oe<$.length;oe++)if($[oe].ofTheConceptId==ne)if(ne!=$[oe].toTheConceptId){let pe=$[oe].toTheConceptId,Ae=yield c.I.GetConcept(pe);if(Ae!=null&&Ae.id!=0||pe==null||pe==null||(Ae=yield(0,E.r)(pe)),Ae.id!=0&&Ae?.type==null){let re=Ae.typeId,ke=yield c.I.GetConcept(re);Ae.type=ke,ke==null&&re!=null&&re!=null&&(ke=yield(0,E.r)(re),Ae.type=ke)}let ge="the_",se=((te=(X=Ae?.type)===null||X===void 0?void 0:X.characterValue)!==null&&te!==void 0?te:"").replace(ge,"");if(isNaN(Number(se))){if(se){const re=yield B(Ae,$,K,Q);de[se]=re}}else{const re=yield B(Ae,$,K,Q);Y[se]=re,de=Y}}else console.log("this is the faulty connection ",$[oe]);return S.Logger.logUpdate(ue),de})}function D(O,M,U){return s(this,arguments,void 0,function*(P,$,K,Q=[]){var ee,X,te;let ue={},de=[];if(P==0)return null;let Y=yield c.I.GetConcept(P);if(Y!=null&&Y.id!=0||P==null||P==null||(Y=yield(0,E.r)(P)),Y.id!=0&&Y.type==null){let ne=Y.typeId,oe=yield c.I.GetConcept(ne);Y.type=oe,oe==null&&ne!=null&&ne!=null&&(oe=yield(0,E.r)(ne),Y.type=oe)}if((ee=Y?.type)===null||ee===void 0||ee.characterValue,!K.includes(P))return Y?.characterValue;if(Q.includes(P))return"";Q.push(P);for(let ne=0;ne<$.length;ne++)if(new Date().getTime(),$[ne].ofTheConceptId==P)if(P!=$[ne].toTheConceptId){let oe=$[ne].toTheConceptId,pe=yield c.I.GetConcept(oe);if(pe!=null&&pe.id!=0||oe==null||oe==null||(pe=yield(0,E.r)(oe)),pe.id!=0&&pe?.type==null){let se=pe.typeId,re=yield c.I.GetConcept(se);pe.type=re,re==null&&se!=null&&se!=null&&(re=yield(0,E.r)(se),pe.type=re)}let Ae="the_",ge=((te=(X=pe?.type)===null||X===void 0?void 0:X.characterValue)!==null&&te!==void 0?te:"").replace(Ae,"");if(isNaN(Number(ge))){if(ge){const se=yield D(oe,$,K,Q);ue[ge]=se}}else{const se=yield D(oe,$,K,Q);de[ge]=se,ue=de}}else console.log("this is the faulty connection ",$[ne]);return ue})}function H(O,M,U){return s(this,arguments,void 0,function*(P,$,K,Q=[]){var ee,X,te;let ue={},de=[];if(P==0)return null;let Y=yield c.I.GetConcept(P);if(Y!=null&&Y.id!=0||P==null||P==null||(Y=yield(0,E.r)(P)),Y.id!=0&&Y.type==null){let ne=Y.typeId,oe=yield c.I.GetConcept(ne);Y.type=oe,oe==null&&ne!=null&&ne!=null&&(oe=yield(0,E.r)(ne),Y.type=oe)}if((ee=Y?.type)===null||ee===void 0||ee.characterValue,!K.includes(P))return Y?.characterValue;if(Q.includes(P))return"";Q.push(P),ue.id=P;for(let ne=0;ne<$.length;ne++)if($[ne].ofTheConceptId==P){let oe=$[ne].toTheConceptId,pe=yield c.I.GetConcept(oe);if(pe!=null&&pe.id!=0||oe==null||oe==null||(pe=yield(0,E.r)(oe)),pe&&pe?.type==null){let se=pe.typeId,re=yield c.I.GetConcept(se);pe.type=re,re==null&&se!=null&&se!=null&&(re=yield(0,E.r)(se),pe.type=re)}let Ae="the_",ge=((te=(X=pe?.type)===null||X===void 0?void 0:X.characterValue)!==null&&te!==void 0?te:"").replace(Ae,"");if(isNaN(Number(ge))){if(ge){const se=yield H(oe,$,K);ue[ge]=se}}else{const se=yield H(oe,$,K);de[ge]=se,ue=de}}return ue})}},6687:(he,q,m)=>{m.d(q,{D:()=>k,MT:()=>N,Nt:()=>w,QL:()=>l,as:()=>L,cw:()=>u,dF:()=>i,hG:()=>d,km:()=>I,nr:()=>h,p8:()=>v,rv:()=>a});var E=m(8642),F=m(7467),c=m(4059),f=m(1863),S=m(5284),A=m(8939),s=function(T,_,B,R){return new(B||(B=Promise))(function(D,H){function O(P){try{U(R.next(P))}catch($){H($)}}function M(P){try{U(R.throw(P))}catch($){H($)}}function U(P){var $;P.done?D(P.value):($=P.value,$ instanceof B?$:new B(function(K){K($)})).then(O,M)}U((R=R.apply(T,_||[])).next())})};function i(){return s(this,arguments,void 0,function*(T=[]){yield(0,E.Y)(T);let _=[];for(let B=0;B<T.length;B++){let R=yield(0,A.kx)(T[B]);_.push(R)}return _})}function u(){return s(this,arguments,void 0,function*(T=[]){yield(0,E.Y)(T);let _=[];for(let B=0;B<T.length;B++){let R=yield(0,A.RW)(T[B]);_.push(R)}return _})}function v(){return s(this,arguments,void 0,function*(T=[],_=[]){const B=c.Logger.logfunction("GetCompositionFromConnectionsWithDataId",[T])||{};if(c.serviceWorker){B.serviceWorker=!0;try{const D=yield(0,c.sendMessage)("GetCompositionFromConnectionsWithDataId",{conceptIds:T,connectionIds:_});return c.Logger.logUpdate(B),D.data}catch(D){console.error("GetCompositionFromConnectionsWithDataId error sw: ",D),(0,f.ey)(B,"GetCompositionFromConnectionsWithDataId",D),(0,c.handleServiceWorkerException)(D)}}let R=[];for(let D=0;D<T.length;D++){let H=yield(0,A.RW)(T[D]);R.push(H)}return c.Logger.logUpdate(B),R})}function I(){var T=arguments;return s(this,arguments,void 0,function*(_=[],B=[]){const R=c.Logger.logfunction("GetCompositionFromConnectionsWithDataIdFromConnections",T)||{};if(c.serviceWorker){R.serviceWorker=!0;try{const O=yield(0,c.sendMessage)("GetCompositionFromConnectionsWithDataIdFromConnections",{conceptIds:_,connectionIds:B});return c.Logger.logUpdate(R),O.data}catch(O){console.error("GetCompositionFromConnectionsWithDataIdFromConnections error sw: ",O),(0,f.ey)(R,"GetCompositionFromConnectionsWithDataIdFromConnections",O),(0,c.handleServiceWorkerException)(O)}}let D=yield(0,F.j)(B),H=[];for(let O=0;O<_.length;O++){let M=yield(0,A.PT)(_[O],D);H.push(M)}return c.Logger.logUpdate(R),H})}function w(){var T=arguments;return s(this,arguments,void 0,function*(_=[],B=[]){const R=c.Logger.logfunction("GetCompositionFromConnectionsWithDataIdIndex",T)||{};if(c.serviceWorker){R.serviceWorker=!0;try{const H=yield(0,c.sendMessage)("GetCompositionFromConnectionsWithDataIdIndex",{conceptIds:_,connectionIds:B});return c.Logger.logUpdate(R),H.data}catch(H){console.error("GetCompositionFromConnectionsWithDataIdIndex error sw: ",H),(0,f.ey)(R,"GetCompositionFromConnectionsWithDataIdIndex",H),(0,c.handleServiceWorkerException)(H)}}yield(0,F.j)(B),yield(0,S.B)(_);let D={};for(let H=0;H<_.length;H++){let O=yield(0,A.RW)(_[H]);D[_[H]]=O}return c.Logger.logUpdate(R),D})}function L(){return s(this,arguments,void 0,function*(T=[],_=[]){yield(0,F.j)(_),yield(0,S.B)(T);let B={};for(let R=0;R<T.length;R++){let D=yield(0,A.kx)(T[R]);B[T[R]]=D}return B})}function d(){return s(this,arguments,void 0,function*(T=[],_=[]){if(c.serviceWorker)try{return(yield(0,c.sendMessage)("GetCompositionFromConnectionsWithIndexFromConnections",{conceptIds:T,connectionIds:_})).data}catch(D){console.error("GetCompositionFromConnectionsWithIndexFromConnections error sw: ",D),(0,c.handleServiceWorkerException)(D)}let B=yield(0,F.j)(_),R=[];for(let D=0;D<T.length;D++){let H=yield(0,A.JA)(T[D],B);R[T[D]]=H}return R})}function l(T){var _=arguments;return s(this,void 0,void 0,function*(){const B=c.Logger.logfunction("GetConnectionDataPrefetch",_)||{};if(c.serviceWorker){B.serviceWorker=!0;try{const U=yield(0,c.sendMessage)("GetConnectionDataPrefetch",{connectionIds:T});return c.Logger.logUpdate(B),U.data}catch(U){console.error("GetConnectionDataPrefetch error sw: ",U),(0,f.ey)(B,"GetConnectionDataPrefetch",U),(0,c.handleServiceWorkerException)(U)}}let R=[],D=[],H={};for(let U=0;U<T.length;U++){let P=yield c.ConnectionData.GetConnection(T[U]);P.id==0?R.push(T[U]):D.push(P)}for(let U=0;U<R.length;U++)H[T[U]]=!1;let O=[],M=yield(0,F.j)(R);D=[...D,...M];for(let U=0;U<D.length;U++)O.push(D[U].ofTheConceptId),O.push(D[U].toTheConceptId),O.push(D[U].typeId);return yield(0,c.GetConceptBulk)(O),c.Logger.logUpdate(B),D})}function a(){var T=arguments;return s(this,arguments,void 0,function*(_=[],B=[]){const R=c.Logger.logfunction("GetCompositionFromConnectionsWithDataIdInObject",T);yield(0,F.j)(B);let D={};for(let H=0;H<_.length;H++){let O=yield(0,A.RW)(_[H]);D[_[H]]=O}return c.Logger.logUpdate(R),D})}function h(){return s(this,arguments,void 0,function*(T=[],_=[]){yield(0,F.j)(_);let B={};for(let R=0;R<T.length;R++){let D=yield(0,A.$N)(T[R]);B[T[R]]=D}return B})}function N(){return s(this,arguments,void 0,function*(T=[],_=[]){yield(0,F.j)(_);let B={};for(let R=0;R<T.length;R++){let D=yield(0,A.kx)(T[R]);B[T[R]]=D}return B})}function k(){return s(this,arguments,void 0,function*(T=[],_=[]){yield(0,F.j)(_);let B={};for(let R=0;R<T.length;R++){let D=yield(0,A.XI)(T[R]);B[T[R]]=D,console.log("this is the normal data",T[R],D)}return B})}},2013:(he,q,m)=>{m.d(q,{A:()=>A,w:()=>s});var E=m(8146),F=m(4059),c=m(3026),f=m(1863),S=function(i,u,v,I){return new(v||(v=Promise))(function(w,L){function d(h){try{a(I.next(h))}catch(N){L(N)}}function l(h){try{a(I.throw(h))}catch(N){L(N)}}function a(h){var N;h.done?w(h.value):(N=h.value,N instanceof v?N:new v(function(k){k(N)})).then(d,l)}a((I=I.apply(i,[])).next())})};function A(i){var u=arguments;return S(this,void 0,void 0,function*(){const v=F.Logger.logfunction("GetConceptByCharacter",u)||{};if(F.serviceWorker){v.serviceWorker=!0;try{const L=yield(0,F.sendMessage)("GetConceptByCharacter",{characterValue:i});return F.Logger.logUpdate(v),L.data}catch(L){console.error("GetConceptByCharacter sw error: ",L),(0,f.ey)(v,"GetConceptByCharacter",L),(0,F.handleServiceWorkerException)(L)}}let I=yield c.I.GetConceptByCharacter(i),w=`${i}`;return I!=null&&I?.id!=0||!w||(yield(0,E.Y)(i),I=yield c.I.GetConceptByCharacterAndTypeLocal(i,51),I.id==0&&(I=yield c.I.GetConceptByCharacter(i))),F.Logger.logUpdate(v),I})}function s(i){var u=arguments;return S(this,void 0,void 0,function*(){const v=F.Logger.logfunction("GetConceptByCharacterUpdated",u)||{};if(F.serviceWorker){v.serviceWorker=!0;try{const L=yield(0,F.sendMessage)("GetConceptByCharacterUpdated",{characterValue:i});return F.Logger.logUpdate(v),L.data}catch(L){console.error("GetConceptByCharacterUpdated error sw: ",L),(0,f.ey)(v,"GetConceptByCharacterUpdated",L),(0,F.handleServiceWorkerException)(L)}}let I=yield c.I.GetConceptByCharacter(i),w=`${i}`;return I!=null&&I?.id!=0||!w||(yield(0,E.Y)(i),I=yield c.I.GetConceptByCharacter(i)),F.Logger.logUpdate(v),I})}},7887:(he,q,m)=>{m.d(q,{a:()=>f,p:()=>S});var E=m(8286),F=m(4864),c=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,[])).next())})};function f(){return c(this,void 0,void 0,function*(){try{let A=[];if(Array.isArray(A))for(let s=0;s<A.length;s++)E.d.AddConnectionToMemory(A[s])}catch(A){throw{message:"Cannot create Connection Binary Tree Concept",ok:!1,status:400,data:A}}})}function S(){return c(this,void 0,void 0,function*(){try{let A=[];if(Array.isArray(A))for(let s=0;s<A.length;s++)F.G.AddConnectionToMemory(A[s])}catch(A){throw{message:"Cannot create Local Connection Binary Tree Concept",ok:!1,status:400,data:A}}})}},7876:(he,q,m)=>{m.d(q,{A:()=>i,K:()=>u});var E=m(1735),F=m(7139),c=m(4059),f=m(3026),S=m(7282),A=function(v,I,w,L){return new(w||(w=Promise))(function(d,l){function a(k){try{N(L.next(k))}catch(T){l(T)}}function h(k){try{N(L.throw(k))}catch(T){l(T)}}function N(k){var T;k.done?d(k.value):(T=k.value,T instanceof w?T:new w(function(_){_(T)})).then(a,h)}N((L=L.apply(v,I||[])).next())})};const s=new Map;function i(v){return A(this,arguments,void 0,function*(I,w=999){let L=performance.now();if(E.J.activateStatus)try{E.J.incrementConcept(I)}catch{console.error("Error adding connection in access tracker"),c.Logger.log("ERROR","Error Adding Connection")}if(c.serviceWorker)try{return(yield(0,c.sendMessage)("GetTheConcept",{id:I,userId:w})).data}catch(a){console.error("GetTheConcept sw error: ",a),(0,c.handleServiceWorkerException)(a)}let d=(0,S.o)();if(s.has(I))return s.get(I)||d;const l=A(this,void 0,void 0,function*(){try{if(I<0)return yield c.LocalConceptsData.GetConceptByGhostId(I);if(d=yield f.I.GetConcept(I),(d==null||d.id==0)&&I!=null&&I!=null&&(d=yield(0,F.r)(I)),d.id!=0&&d.type==null&&(yield f.I.GetConcept(d.typeId))==null&&d.typeId!=null&&d.typeId!=null){let a=yield(0,F.r)(d.typeId);d.type=a}return d}catch(a){throw console.error("this is the error in the getting concept",a),c.Logger.logError(L,w,"read","unknown",void 0,500,a,"GetTheConcept",[I,w],"unknown",void 0),a}finally{s.delete(I)}});return s.set(I,l),l})}function u(v){return A(this,void 0,void 0,function*(){if(c.serviceWorker)try{return(yield(0,c.sendMessage)("AddTypeConcept",{concept:v})).data}catch(I){console.error("AddTypeConcept sw error: ",I),(0,c.handleServiceWorkerException)(I)}if(v.type==null){let I=yield f.I.GetConcept(v.typeId);if(I.id==0&&v.typeId!=0&&v.typeId!=999){let w=yield(0,F.r)(v.typeId);v.type=w}else v.type=I}})}},7869:(he,q,m)=>{m.d(q,{_:()=>L,A:()=>w});var E=m(9581),F=m(3026),c=m(1863),f=m(3518),S=m(4059),A=function(d,l,a,h){return new(a||(a=Promise))(function(N,k){function T(R){try{B(h.next(R))}catch(D){k(D)}}function _(R){try{B(h.throw(R))}catch(D){k(D)}}function B(R){var D;R.done?N(R.value):(D=R.value,D instanceof a?D:new a(function(H){H(D)})).then(T,_)}B((h=h.apply(d,[])).next())})},s=m(2299);class i{}i.isUpdated=!1,i.isOnlineSync=!1;var u=m(3655),v=m(9003),I=function(d,l,a,h){return new(a||(a=Promise))(function(N,k){function T(R){try{B(h.next(R))}catch(D){k(D)}}function _(R){try{B(h.throw(R))}catch(D){k(D)}}function B(R){var D;R.done?N(R.value):(D=R.value,D instanceof a?D:new a(function(H){H(D)})).then(T,_)}B((h=h.apply(d,l||[])).next())})};function w(){return I(this,arguments,void 0,function*(d=!0){try{if(yield(0,u.qI)("concepts"),yield(0,v.qI)("concepts"),d){if((yield(0,u.b8)()).isOnlineSync)return!0;yield function(){return A(this,void 0,void 0,function*(){const l=S.Logger.logfunction("GetAiData");try{const N=new Date().getTime();var a=(0,f.ab)("application/x-www-form-urlencoded");const k=yield fetch(E.B.GetAllAiData(),{method:"GET",headers:a});k.ok||(console.log("Ai Error Message: ","Cannot get response"),(0,c.ry)(k));const T=yield k.json();for(var h=0;h<T.length;h++)F.I.AddConcept(T[h]);L();let _=new Date().getTime()-N;console.log("The time taken is ",_),S.Logger.logUpdate(l)}catch(N){N instanceof Error?console.log("Ai Error Message: ",N.message):console.log("Ai Error Message: ",N),(0,c.Mb)(N,E.B.GetAllAiData())}})}()}return!0}catch(l){return console.log({message:"cannot initlize the AI system",ok:!1,status:400,data:l}),!0}})}function L(){return I(this,void 0,void 0,function*(){i.isOnlineSync=!0;var d=new s.B(i.isOnlineSync);(0,u.El)(d)})}},8095:(he,q,m)=>{m.d(q,{h:()=>S});var E=m(4059),F=m(9700),c=m(1863),f=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,s||[])).next())})};function S(A,s,i){var u=arguments;return f(this,arguments,void 0,function*(v,I,w,L=!1,d={concepts:[],connections:[]}){var l,a,h,N,k,T;const _=F.V.logfunction("CreateConnectionBetweenTwoConceptsLocal",u)||{};let B=performance.now();try{if(E.serviceWorker){_.serviceWorker=!0;try{const M=yield(0,E.sendMessage)("CreateConnectionBetweenTwoConceptsLocal",{ofTheConcept:v,toTheConcept:I,linker:w,both:L,actions:d});return!((a=(l=M?.actions)===null||l===void 0?void 0:l.concepts)===null||a===void 0)&&a.length&&(d.concepts=JSON.parse(JSON.stringify(M.actions.concepts))),!((N=(h=M?.actions)===null||h===void 0?void 0:h.connections)===null||N===void 0)&&N.length&&(d.connections=JSON.parse(JSON.stringify(M.actions.connections))),F.V.logUpdate(_),M.data}catch(M){console.error("CreateConnectionBetweenTwoConceptsLocal sw error: ",M),(0,c.ey)(_,"CreateConnectionBetweenTwoConceptsLocal",M),(0,E.handleServiceWorkerException)(M)}}if(v.userId,L){let M=((k=I.type)===null||k===void 0?void 0:k.characterValue)+"_s_"+w+"_by";var R=yield(0,E.MakeTheInstanceConceptLocal)("connection",M,!1,999,999,999,0,d);yield(0,E.CreateTheConnectionLocal)(I.id,v.id,R.id,1e3,void 0,void 0,d)}let H=((T=v.type)===null||T===void 0?void 0:T.characterValue)+"_s_"+w+"_s";var D=yield(0,E.MakeTheInstanceConceptLocal)("connection",H,!1,999,999,999,void 0,d);let O=yield(0,E.CreateTheConnectionLocal)(v.id,I.id,D.id,1e3,void 0,void 0,d);return F.V.logUpdate(_),O}catch(H){throw F.V.logError(B,v.userId,"create",void 0,void 0,500,H,"CreateConnectionBetweenTwoConceptsLocal",[v,I,w,L],void 0,void 0),(0,c.ey)(_,"CreateConnectionBetweenTwoConceptsLocal",H),H}})}},6416:(he,q,m)=>{m.d(q,{u:()=>F});var E=m(2615);function F(){let c=new Date,f=new Date;return new E.j(0,0,0,0,0,"0",0,!1,c,f,"0")}},3075:(he,q,m)=>{m.d(q,{Ay:()=>i,EO:()=>u,xd:()=>v});var E=m(205),F=m(9736),c=m(5257),f=m(9003),S=m(4059),A=m(1863),s=function(I,w,L,d){return new(L||(L=Promise))(function(l,a){function h(T){try{k(d.next(T))}catch(_){a(_)}}function N(T){try{k(d.throw(T))}catch(_){a(_)}}function k(T){var _;T.done?l(T.value):(_=T.value,_ instanceof L?_:new L(function(B){B(_)})).then(h,N)}k((d=d.apply(I,[])).next())})};function i(){return s(this,void 0,void 0,function*(){const I=S.Logger.logfunction("CreateLocalBinaryTreeFromIndexDb");try{let w=[];if(Array.isArray(w))for(let L=0;L<w.length;L++){let d=w[L];F.v.AddConceptToMemory(d)}E.B.isLocalDataLoaded=!0,E.B.isLocalTypeLoaded=!0,E.B.isLocalCharacterLoaded=!0,S.Logger.logUpdate(I)}catch(w){yield(0,S.DelayFunctionExecution)(2e3,i());let L={message:"Cannot create local binary tree from index db",data:w,ok:!1,status:400};throw(0,A.ey)(I,"CreateLocalBinaryTreeFromIndexDb",w),L}})}function u(){return s(this,void 0,void 0,function*(){var I;const w=S.Logger.logfunction("PopulateTheLocalConceptsToMemory");try{yield(I=navigator.locks)===null||I===void 0?void 0:I.request("dblock",L=>s(this,void 0,void 0,function*(){let d=yield(0,f.S5)("localid");if(Array.isArray(d)){if(d[0]){let l=d[0].value;if(l)c.R.AddConceptId(d[0]),yield(0,f.kH)("localid",{id:0,value:l-10});else{l=-Math.floor(1e8*Math.random());let a={id:0,value:l},h={id:0,value:l-10};c.R.AddConceptId(a),yield(0,f.kH)("localid",h)}}d[2]}})),S.Logger.logUpdate(w)}catch(L){let d={message:"Cannot populate Local Ids from the Index Db",data:L,ok:!1,status:400};throw(0,A.ey)(w,"PopulateTheLocalConceptsToMemory",L),d}})}function v(){return s(this,void 0,void 0,function*(){var I;const w=S.Logger.logfunction("PopulateTheLocalConnectionToMemory");try{yield(I=navigator.locks)===null||I===void 0?void 0:I.request("dblock",L=>s(this,void 0,void 0,function*(){let d=yield(0,f.S5)("localid");if(Array.isArray(d)){if(d[1]){let l=d[1].value;if(l)c.R.AddConnectionId(d[1]),yield(0,f.kH)("localid",{id:1,value:l-10});else{l=-Math.floor(1e8*Math.random());let a={id:0,value:l},h={id:0,value:l-10};c.R.AddConnectionId(a),yield(0,f.kH)("localid",h)}}d[2]}})),S.Logger.logUpdate(w)}catch(L){let d={message:"Cannot populate Local Ids from the Index Db",data:L,ok:!1,status:400};throw(0,A.ey)(w,"PopulateTheLocalConnectionToMemory",L),d}})}},999:(he,q,m)=>{m.d(q,{R:()=>s});var E=m(4059),F=m(1863),c=m(6416),f=m(4711),S=m(5868),A=function(i,u,v,I){return new(v||(v=Promise))(function(w,L){function d(h){try{a(I.next(h))}catch(N){L(N)}}function l(h){try{a(I.throw(h))}catch(N){L(N)}}function a(h){var N;h.done?w(h.value):(N=h.value,N instanceof v?N:new v(function(k){k(N)})).then(d,l)}a((I=I.apply(i,u||[])).next())})};function s(i){return A(this,arguments,void 0,function*(u,v=null,I=null,w=null,L=null,d=null,l=null,a=!1,h={concepts:[],connections:[]}){var N,k,T,_;const B=E.Logger.logfunction("CreateTheCompositionLocal")||{};if(E.serviceWorker){B.serviceWorker=!0;try{const U=yield(0,E.sendMessage)("CreateTheCompositionLocal",{json:u,ofTheConceptId:v,ofTheConceptUserId:I,mainKey:w,userId:L,accessId:d,sessionInformationId:l,actions:h});return!((k=(N=U?.actions)===null||N===void 0?void 0:N.concepts)===null||k===void 0)&&k.length&&(h.concepts=JSON.parse(JSON.stringify(U.actions.concepts))),!((_=(T=U?.actions)===null||T===void 0?void 0:T.connections)===null||_===void 0)&&_.length&&(h.connections=JSON.parse(JSON.stringify(U.actions.connections))),E.Logger.logUpdate(B),U.data}catch(U){console.error("CreateTheCompositionLocal error sw: ",U),(0,F.ey)(B,"CreateTheCompositionLocal",U),(0,E.handleServiceWorkerException)(U)}}let R=L??999,D=d??999,H=l??999,O=w??0,M=(0,c.u)();for(const U in u)if(typeof u[U]!="string"&&typeof u[U]!="number")if(v==null&&I==null){let P=O,$=yield(0,S.k)(U,"",!0,R,D,H,void 0,h);M=$,P=$.id,O=$.id,yield s(u[U],$.id,$.userId,P,L,d,l,void 0,h)}else{let P=v??999,$=O,K=yield(0,S.k)(U,"",!0,R,D,H,void 0,h);yield(0,f.F)(P,K.id,$,void 0,void 0,void 0,h),yield s(u[U],K.id,K.userId,$,L,d,l,void 0,h)}else{let P=v??999,$=O,K=yield(0,S.k)(U,u[U].toString(),!1,R,D,H,void 0,h);yield(0,f.F)(P,K.id,$,void 0,void 0,void 0,h)}return E.Logger.logUpdate(B),M})}},3077:(he,q,m)=>{m.d(q,{A:()=>s});var E=m(4059),F=m(2615),c=m(9736),f=m(5257),S=m(9700),A=function(i,u,v,I){return new(v||(v=Promise))(function(w,L){function d(h){try{a(I.next(h))}catch(N){L(N)}}function l(h){try{a(I.throw(h))}catch(N){L(N)}}function a(h){var N;h.done?w(h.value):(N=h.value,N instanceof v?N:new v(function(k){k(N)})).then(d,l)}a((I=I.apply(i,u||[])).next())})};function s(i,u,v,I,w,L){return A(this,arguments,void 0,function*(d,l,a,h,N,k,T=!1,_=0,B={concepts:[],connections:[]}){var R,D,H,O;let M=performance.now();try{if(E.serviceWorker)try{const ee=yield(0,E.sendMessage)("CreateTheConceptLocal",{referent:d,typecharacter:l,userId:a,categoryId:h,typeId:N,accessId:k,isComposition:T,referentId:_});return!((D=(R=ee?.actions)===null||R===void 0?void 0:R.concepts)===null||D===void 0)&&D.length&&(B.concepts=JSON.parse(JSON.stringify(ee.actions.concepts))),!((O=(H=ee?.actions)===null||H===void 0?void 0:H.connections)===null||O===void 0)&&O.length&&(B.connections=JSON.parse(JSON.stringify(ee.actions.connections))),ee.data}catch(ee){console.error("CreateTheConceptLocal error sw: ",ee),(0,E.handleServiceWorkerException)(ee)}let U=yield f.R.getConceptId(),P=!0,$=new Date,K=new Date;if(d=="the")return new F.j(1,999,5,5,_,d,k,P,$,K,l);let Q=new F.j(U,a,N,h,_,d,k,P,$,K,l);return Q.isTemp=!0,Q.isComposition=T,c.v.AddConcept(Q),B.concepts.push(Q),Q}catch(U){throw S.V.logError(M,a,"create","unknown","unknown",500,void 0,"createTheConceptLocal",[d,l,a,h,N,k,T],void 0),U}})}},4711:(he,q,m)=>{m.d(q,{F:()=>s,d:()=>i});var E=m(2155),F=m(4864),c=m(5257),f=m(9700),S=m(4059),A=function(u,v,I,w){return new(I||(I=Promise))(function(L,d){function l(N){try{h(w.next(N))}catch(k){d(k)}}function a(N){try{h(w.throw(N))}catch(k){d(k)}}function h(N){var k;N.done?L(N.value):(k=N.value,k instanceof I?k:new I(function(T){T(k)})).then(l,a)}h((w=w.apply(u,v||[])).next())})};function s(u,v,I){return A(this,arguments,void 0,function*(w,L,d,l=1,a="",h=999,N={concepts:[],connections:[]}){var k,T,_,B;let R=performance.now();if(S.serviceWorker)try{const D=yield(0,S.sendMessage)("CreateTheConnectionLocal",{ofTheConceptId:w,toTheConceptId:L,typeId:d,orderId:l,typeString:a,userId:h,actions:N});return!((T=(k=D?.actions)===null||k===void 0?void 0:k.concepts)===null||T===void 0)&&T.length&&(N.concepts=JSON.parse(JSON.stringify(D.actions.concepts))),!((B=(_=D?.actions)===null||_===void 0?void 0:_.connections)===null||B===void 0)&&B.length&&(N.connections=JSON.parse(JSON.stringify(D.actions.connections))),D.data}catch(D){console.log("CreateTheConnectionLocal error sw: ",D),(0,S.handleServiceWorkerException)(D)}try{let D=4,H=yield c.R.getConnectionId(),O=0,M=0,U=0;O=w,M=L,U=d;let P=new E.N(0,0,0,0,0,0,0);return w!=L&&(P=new E.N(H,O,M,h,d,l,D),P.isTemp=!0,P.typeCharacter=a,S.LocalSyncData.AddConnection(P),F.G.AddConnection(P),N.connections.push(P)),P}catch(D){throw f.V.logError(R,h,"create","Unknown","Unknown",500,void 0,"CreateTheConnectionLocal",[w,L,d,l,a,h],"UnknownUserAgent",[]),D}})}function i(u,v,I){return A(this,arguments,void 0,function*(w,L,d,l={concepts:[],connections:[]}){var a,h,N,k;if(S.serviceWorker)try{const B=yield(0,S.sendMessage)("CreateConnection",{ofTheConcept:w,toTheConcept:L,connectionTypeString:d,actions:l});return!((h=(a=B?.actions)===null||a===void 0?void 0:a.concepts)===null||h===void 0)&&h.length&&(l.concepts=JSON.parse(JSON.stringify(B.actions.concepts))),!((k=(N=B?.actions)===null||N===void 0?void 0:N.connections)===null||k===void 0)&&k.length&&(l.connections=JSON.parse(JSON.stringify(B.actions.connections))),B.data}catch(B){console.log("CreateConnection error sw: ",B),(0,S.handleServiceWorkerException)(B)}let T=yield(0,S.MakeTheTypeConceptLocal)(d,999,999,999),_=w.userId;return yield s(w.id,L.id,T.id,1e3,d,_,l)})}},8064:(he,q,m)=>{m.d(q,{$I:()=>S,Ay:()=>f});var E=m(9736),F=(m(9581),m(3518),m(4059));m(1863);var c=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,[])).next())})};function f(A){return c(this,void 0,void 0,function*(){return yield E.v.GetConceptByCharacterAndTypeLocal(A,51)})}function S(A){return c(this,void 0,void 0,function*(){if(F.serviceWorker)try{return(yield(0,F.sendMessage)("GetConceptByCharacterAndCategoryLocal",{character:A})).data}catch(u){console.error("GetConceptByCharacterAndCategoryLocal error sw: ",u),(0,F.handleServiceWorkerException)(u)}let s=(0,F.CreateDefaultLConcept)();if(A=="the")return s.id=1,s.typeId=5,s.characterValue="the",s;let i=(0,F.SplitStrings)(A);if(i.length>1){let u=1,v=yield S(i[0]);v.id!=0&&(u=v.id),s=yield function(I,w){return c(this,void 0,void 0,function*(){return E.v.GetConceptByCharacterAndCategoryLocal(I,w)})}(A,u)}else i[0]==A&&(s=yield f(A));return s})}},1213:(he,q,m)=>{m.d(q,{f:()=>A});var E=m(9736),F=m(7820),c=m(4059),f=m(176),S=function(s,i,u,v){return new(u||(u=Promise))(function(I,w){function L(a){try{l(v.next(a))}catch(h){w(h)}}function d(a){try{l(v.throw(a))}catch(h){w(h)}}function l(a){var h;a.done?I(a.value):(h=a.value,h instanceof u?h:new u(function(N){N(h)})).then(L,d)}l((v=v.apply(s,[])).next())})};function A(s){return S(this,void 0,void 0,function*(){let i=performance.now();try{if(c.serviceWorker)try{return(yield(0,c.sendMessage)("GetTheConceptLocal",{id:s})).data}catch(v){console.error("GetTheConceptLocal error sw: ",v),(0,c.handleServiceWorkerException)(v)}let u=(0,c.CreateDefaultLConcept)();if(s<0){if(u=yield E.v.GetConcept(s),u.id==0){let v=yield F.G.getNodeFromTree(s);if(v?.value){let I=v.value;I&&(u=I)}}}else{let v=yield(0,c.GetTheConcept)(s);u=(0,f.F4)(v)}return u}catch(u){throw c.Logger.logError(i,"unknown","read","unknown",void 0,200,void 0,"GetTheConceptLocal",[s],"unknown",void 0),u}})}},9975:(he,q,m)=>{m.d(q,{A:()=>S});var E=m(4059),F=m(9736),c=m(3077),f=function(A,s,i,u){return new(i||(i=Promise))(function(v,I){function w(l){try{d(u.next(l))}catch(a){I(a)}}function L(l){try{d(u.throw(l))}catch(a){I(a)}}function d(l){var a;l.done?v(l.value):(a=l.value,a instanceof i?a:new i(function(h){h(a)})).then(w,L)}d((u=u.apply(A,s||[])).next())})};function S(A,s,i,u,v){return f(this,arguments,void 0,function*(I,w,L,d,l,a={concepts:[],connections:[]}){var h,N,k,T;if(E.serviceWorker)try{const R=yield(0,E.sendMessage)("MakeTheConceptLocal",{referent:I,typeCharacter:w,userId:L,categoryId:d,typeId:l,actions:a});return!((N=(h=R?.actions)===null||h===void 0?void 0:h.concepts)===null||N===void 0)&&N.length&&(a.concepts=JSON.parse(JSON.stringify(R.actions.concepts))),!((T=(k=R?.actions)===null||k===void 0?void 0:k.connections)===null||T===void 0)&&T.length&&(a.connections=JSON.parse(JSON.stringify(R.actions.connections))),R.data}catch(R){console.error("MakeTheConceptLocal error sw: ",R),(0,E.handleServiceWorkerException)(R)}let _=yield F.v.GetConceptByCharacterAndTypeLocal(I,l),B=_;return w=="the"&&(d=1),B.id==0&&(_=yield(0,c.A)(I,w,L,d,l,4,void 0,null,a),B=_),B})}},5868:(he,q,m)=>{m.d(q,{k:()=>s});var E=m(3077),F=m(8357),c=m(9736),f=m(4059),S=m(1863),A=function(i,u,v,I){return new(v||(v=Promise))(function(w,L){function d(h){try{a(I.next(h))}catch(N){L(N)}}function l(h){try{a(I.throw(h))}catch(N){L(N)}}function a(h){var N;h.done?w(h.value):(N=h.value,N instanceof v?N:new v(function(k){k(N)})).then(d,l)}a((I=I.apply(i,u||[])).next())})};function s(i,u){var v=arguments;return A(this,arguments,void 0,function*(I,w,L=!1,d,l,a=999,h=0,N={concepts:[],connections:[]}){var k,T,_,B;const R=f.Logger.logfunction("MakeTheInstanceConceptLocal",v)||{};if(f.serviceWorker){R.serviceWorker=!0;try{const D=yield(0,f.sendMessage)("MakeTheInstanceConceptLocal",{type:I,referent:w,composition:L,userId:d,accessId:l,sessionInformationId:a,referentId:h,actions:N});return!((T=(k=D?.actions)===null||k===void 0?void 0:k.concepts)===null||T===void 0)&&T.length&&(N.concepts=JSON.parse(JSON.stringify(D.actions.concepts))),!((B=(_=D?.actions)===null||_===void 0?void 0:_.connections)===null||B===void 0)&&B.length&&(N.connections=JSON.parse(JSON.stringify(D.actions.connections))),f.Logger.logUpdate(R),D.data}catch(D){console.error("MakeTheInstanceConceptLocal error sw: ",D),(0,S.ey)(R,"MakeTheInstanceConceptLocal",D),(0,f.handleServiceWorkerException)(D)}}try{let D,H,O=999,M=4,U=d,P=4,$="",K=w.length;if($=I.startsWith("the_")?I:"the_"+I,L)D=yield(0,F.$)(I,O,d,d,N),H=yield(0,E.A)(w,I,d,M,D.id,P,!0,h,N);else if(K>255)D=yield(0,F.$)($,O,U,d,N),H=yield(0,E.A)(w,$,d,M,D.id,P,void 0,void 0,N);else{D=yield(0,F.$)($,O,U,d,N);let Q=yield c.v.GetConceptByCharacterAndTypeLocal(w,D.id);H=Q,Q.id==0&&Q.userId==0&&(H=yield(0,E.A)(w,$,d,M,D.id,P,void 0,void 0,N))}return H.type=D,f.LocalSyncData.AddConcept(H),N.concepts.push(H),f.Logger.logUpdate(R),H}catch(D){throw(0,S.ey)(R,"MakeTheInstanceConceptLocal",D),D}})}},8357:(he,q,m)=>{m.d(q,{$:()=>i});var E=m(3077),F=m(8064),c=m(6467),f=m(9975),S=m(4059),A=m(1863),s=function(u,v,I,w){return new(I||(I=Promise))(function(L,d){function l(N){try{h(w.next(N))}catch(k){d(k)}}function a(N){try{h(w.throw(N))}catch(k){d(k)}}function h(N){var k;N.done?L(N.value):(k=N.value,k instanceof I?k:new I(function(T){T(k)})).then(l,a)}h((w=w.apply(u,v||[])).next())})};function i(u,v,I,w){var L=arguments;return s(this,arguments,void 0,function*(d,l,a,h,N={concepts:[],connections:[]}){var k,T,_,B;const R=S.Logger.logfunction("MakeTheTypeConceptLocal",L)||{};if(S.serviceWorker){R.serviceWorker=!0;try{const H=yield(0,S.sendMessage)("MakeTheTypeConceptLocal",{typeString:d,sessionId:l,sessionUserId:a,userId:h,actions:N});return!((T=(k=H?.actions)===null||k===void 0?void 0:k.concepts)===null||T===void 0)&&T.length&&(N.concepts=JSON.parse(JSON.stringify(H.actions.concepts))),!((B=(_=H?.actions)===null||_===void 0?void 0:_.connections)===null||B===void 0)&&B.length&&(N.connections=JSON.parse(JSON.stringify(H.actions.connections))),S.Logger.logUpdate(R),H.data}catch(H){console.error("MakeTheTypeConceptLocal error sw: ",H),(0,A.ey)(R,"MakeTheTypeConceptLocal",H),(0,S.handleServiceWorkerException)(H)}}let D=yield(0,F.$I)(d);if(D&&(D.id==0||D.userId==0)){let H=(0,c.f)(d);if(H[0]==d)D=yield(0,f.A)(d,"the",h,1,51,N);else{let O=yield i(H[0],l,a,h,N),M=yield i(H[1],l,a,h,N);D=yield(0,E.A)(d,H[1],h,O.id,M.id,4,void 0,null,N)}}return S.Logger.logUpdate(R),D})}},3729:(he,q,m)=>{m.d(q,{D:()=>I});var E=m(9934),F=m(4485),c=m(2),f=m(7876),S=m(4818),A=m(999),s=m(5868),i=m(4059),u=m(176),v=function(w,L,d,l){return new(d||(d=Promise))(function(a,h){function N(_){try{T(l.next(_))}catch(B){h(B)}}function k(_){try{T(l.throw(_))}catch(B){h(B)}}function T(_){var B;_.done?a(_.value):(B=_.value,B instanceof d?B:new d(function(R){R(B)})).then(N,k)}T((l=l.apply(w,L||[])).next())})};function I(w){return v(this,arguments,void 0,function*(L,d={concepts:[],connections:[]}){var l,a,h,N;if(performance.now(),i.serviceWorker)try{const te=yield(0,i.sendMessage)("UpdateCompositionLocal",{patcherStructure:L,actions:d});return!((a=(l=te?.actions)===null||l===void 0?void 0:l.concepts)===null||a===void 0)&&a.length&&(d.concepts=JSON.parse(JSON.stringify(te.actions.concepts))),!((N=(h=te?.actions)===null||h===void 0?void 0:h.connections)===null||N===void 0)&&N.length&&(d.connections=JSON.parse(JSON.stringify(te.actions.connections))),te.data}catch(te){console.error("UpdateCompositionLocal error sw: ",te),(0,i.handleServiceWorkerException)(te)}const k=L.userId,T=L.sessionId,_=L.accessId;let B=[];const R=[];let D=(0,i.CreateDefaultLConcept)(),H=(0,i.CreateDefaultLConcept)();const O=[],M=L.compositionId,U=L.ofTheCompositionId;let P=[],$=yield(0,c.s)(M);for(let te=0;te<$.length;te++)B.push((0,u.P6)($[te]));const K=[],Q=[];let ee=[];for(let te=0;te<B.length;te++)(0,E.A)(Q,B[te].ofTheConceptId),(0,E.A)(K,B[te].ofTheConceptId),(0,E.A)(K,B[te].toTheConceptId),ee.push(B[te].ofTheConceptId);for(let te=0;te<K.length;te++){const ue=yield(0,f.A)(K[te]);M==K[te]&&(D=(0,u.F4)(ue)),U==K[te]&&(H=(0,u.F4)(ue)),R.push((0,u.F4)(ue))}const X=L.patchObject;for(const te in X){let ue=(0,i.CreateDefaultLConcept)();const de=X[te];let Y=D;H.id>0&&(Y=H),Array.isArray(de)||typeof de=="object"?(ue=yield(0,s.k)(te,"",!0,D.userId,4,999,void 0,d),yield(0,A.R)(X[te],ue.id,ue.userId,D.id,D.userId,4,999,void 0,d)):ue=yield(0,s.k)(te,de,!1,k,_,T,void 0,d);const ne=(0,F.nm)(R,ue);for(let oe=0;oe<ne.length;oe++)if(ne[oe].id>0){const pe=(0,F.gt)(B,ne[oe].id);P=P.concat(pe),O.push(ne[oe])}yield(0,i.CreateTheConnectionLocal)(Y.id,ue.id,D.id,2,void 0,void 0,d),R.push(ue)}for(let te=0;te<P.length;te++)yield(0,S.m)(P[te].id);yield i.LocalSyncData.SyncDataOnline(void 0,d)})}},8407:(he,q,m)=>{m.d(q,{A:()=>w});var E=m(9581),F=m(3518),c=m(1863),f=function(L,d,l,a){return new(l||(l=Promise))(function(h,N){function k(B){try{_(a.next(B))}catch(R){N(R)}}function T(B){try{_(a.throw(B))}catch(R){N(R)}}function _(B){var R;B.done?h(B.value):(R=B.value,R instanceof l?R:new l(function(D){D(R)})).then(k,T)}_((a=a.apply(L,[])).next())})},S=m(4402),A=m(4059),s=function(L,d,l,a){return new(l||(l=Promise))(function(h,N){function k(B){try{_(a.next(B))}catch(R){N(R)}}function T(B){try{_(a.throw(B))}catch(R){N(R)}}function _(B){var R;B.done?h(B.value):(R=B.value,R instanceof l?R:new l(function(D){D(R)})).then(k,T)}_((a=a.apply(L,[])).next())})};class i{constructor(d,l,a,h,N,k,T,_,B,R){this.id=0,this.userId=d,this.data=l,this.securityId=a,this.securityUserId=h,this.accessId=N,this.accessUserId=k,this.sessionId=T,this.sessionUserId=_,this.entryTimestamp=B,this.isNew=R}}var u=m(7282),v=m(2212),I=function(L,d,l,a){return new(l||(l=Promise))(function(h,N){function k(B){try{_(a.next(B))}catch(R){N(R)}}function T(B){try{_(a.throw(B))}catch(R){N(R)}}function _(B){var R;B.done?h(B.value):(R=B.value,R instanceof l?R:new l(function(D){D(R)})).then(k,T)}_((a=a.apply(L,d||[])).next())})};function w(L,d){var l=arguments;return I(this,arguments,void 0,function*(a,h,N=!1,k,T=4,_=999,B=0){const R=A.Logger.logfunction("MakeTheInstanceConcept",l)||{};if(A.serviceWorker){R.serviceWorker=!0;try{const ee=yield(0,A.sendMessage)("MakeTheInstanceConcept",{type:a,referent:h,composition:N,userId:k,passedAccessId:T,passedSessionId:_,referentId:B});return A.Logger.logUpdate(R),ee.data}catch(ee){console.error("MakeTheInstanceConcept sw error: ",ee),(0,c.ey)(R,"MakeTheInstanceConcept",ee),(0,A.handleServiceWorkerException)(ee)}}let D,H=_,O=k,M=k,U=T,P=k,$="",K=h.length,Q=(0,u.o)();if($=a.startsWith("the_")?a:"the_"+a,N)Q=yield(0,A.MakeTheTypeConceptApi)(a,k),D=yield(0,v.Ay)(h,k,4,Q.id,B,U,a);else if(K>255)Q=yield(0,A.MakeTheTypeConceptApi)($,k),D=yield(0,v.Ay)(h,k,4,Q.id,B,U,$),function(ee){f(this,void 0,void 0,function*(){try{var X=(0,F.Xr)();const te=yield fetch(E.B.CreateTheTextDataUrl(),{method:"POST",headers:X,body:JSON.stringify(ee)});if(!te.ok)throw(0,c.ry)(te),new Error(`Error! status: ${te.status}`);return yield te.json()}catch(te){throw te instanceof Error?console.log("Create the text error message: ",te.message):console.log("Create the text unexpected error: ",te),te}})}(new i(k,h,999,O,U,P,H,M,Date.now().toString(),!0));else{Q=yield(0,A.MakeTheTypeConceptApi)($,k);let ee=yield(0,S.A)(h,Q.id);D=ee,ee.id==0&&ee.userId==0&&(D=yield(0,v.N)(h,k,4,Q.id,12,U,$),function(X,te,ue,de){var Y=arguments;s(this,void 0,void 0,function*(){const ne=A.Logger.logfunction("MakeTheNameInBackend",Y);try{let oe={newConceptId:X,referent:te,typeId:ue,typeUserId:de},pe=(0,F.Xr)(),Ae=JSON.stringify(oe);const ge=yield fetch(E.B.MakeTheNameInBackendUrl(),{method:"POST",headers:pe,body:Ae});A.Logger.logUpdate(ne),ge.ok||(0,c.ry)(ge)}catch(oe){oe instanceof Error?console.log("make the name in backend error message: ",oe.message):console.log("make the name in backend unexpected error: ",oe),(0,c.Mb)(oe,E.B.MakeTheNameInBackendUrl()),(0,c.ey)(ne,"MakeTheNameInBackend",oe)}})}(D.id,`${h}`,Q.id,k))}return D.type=Q,A.Logger.logUpdate(R),D})}},5312:(he,q,m)=>{m.d(q,{NK:()=>v,Ve:()=>I,cf:()=>i,vw:()=>w,y8:()=>u});var E=m(2832),F=m(3130),c=m(4059),f=m(1863),S=m(6687),A=m(7106),s=function(L,d,l,a){return new(l||(l=Promise))(function(h,N){function k(B){try{_(a.next(B))}catch(R){N(R)}}function T(B){try{_(a.throw(B))}catch(R){N(R)}}function _(B){var R;B.done?h(B.value):(R=B.value,R instanceof l?R:new l(function(D){D(R)})).then(k,T)}_((a=a.apply(L,d||[])).next())})};function i(L){var d=arguments;return s(this,arguments,void 0,function*(l,a="",h=null,N=F.y0){var k,T,_,B,R,D,H,O;const M=c.Logger.logfunction("SearchLinkMultipleAll",d)||{};try{try{if(c.serviceWorker){M.serviceWorker=!0;const ue=yield(0,c.sendMessage)("SearchLinkMultipleAll",{searchQuery:l,token:a,caller:h,format:N});return c.Logger.logUpdate(M),ue.data}}catch(ue){console.error("SearchLinkMultipleAll error sw: ",ue),(0,f.ey)(M,"SearchLinkMultipleAll",ue),(0,c.handleServiceWorkerException)(ue)}let U=[],P=[],$=[],K=[],Q=l[0].composition,ee={},X={};h?.isDataLoaded?(ee.compositionIds=(k=h.conceptIds)===null||k===void 0?void 0:k.slice(),ee.internalConnections=(T=h.internalConnections)===null||T===void 0?void 0:T.slice(),ee.linkers=(_=h.linkers)===null||_===void 0?void 0:_.slice(),ee.reverse=(B=h.reverse)===null||B===void 0?void 0:B.slice(),X=ee,U=X.compositionIds,$=X.internalConnections,P=X.linkers,K=X.reverse):(ee=yield(0,E.j)(l,a),h&&(h.conceptIds=(R=ee.compositionIds)===null||R===void 0?void 0:R.slice(),h.internalConnections=(D=ee.internalConnections)===null||D===void 0?void 0:D.slice(),h.linkers=(H=ee.linkers)===null||H===void 0?void 0:H.slice(),h.reverse=(O=ee.reverse)===null||O===void 0?void 0:O.slice(),h.isDataLoaded=!0),X=ee,U=X.compositionIds,$=X.internalConnections,P=X.linkers,K=X.reverse);let te=yield function(ue,de,Y,ne,oe,pe){return s(this,arguments,void 0,function*(Ae,ge,se,re,ke,We,De=F.y0){try{let fe,Le,me=yield(0,S.QL)(Ae);return De==F.ZJ?(fe=yield(0,S.MT)(ge,se),Le=yield w(Ae,fe,ke,re)):De==F.yv?(fe=yield(0,S.D)(ge,se),Le=yield w(Ae,fe,ke,re)):De==100?(fe=yield(0,S.nr)(ge,se),Le=yield u(me,fe,ke,re)):De==F.SL?Le=yield(0,A._W)(Ae,ge,se,We.ofCompositions,re):(fe=yield(0,S.rv)(ge,se),Le=yield u(me,fe,ke,re)),Le}catch(fe){return void console.log("Error Occured in build layer",fe)}})}(P,U,$,K,Q,l[0],N);return c.Logger.logUpdate(M),te}catch(U){throw console.log("this is the error in the search link multiple",U),(0,f.ey)(M,"SearchLinkMultipleAll",U),U}})}function u(L,d,l){return s(this,arguments,void 0,function*(a,h,N,k=[]){new Date().getTime();let T={},_=[];for(let B=0;B<a.length;B++)_.push(a[B].toTheConceptId),_.push(a[B].ofTheConceptId),_.push(a[B].typeId);a.sort(function(B,R){return R.id-B.id});for(let B=0;B<a.length;B++){let R=!1;if(k.includes(a[B].id)&&(R=!0),R==1){if(h[a[B].ofTheConceptId]&&h[a[B].toTheConceptId]){let D=h[a[B].toTheConceptId],H=yield(0,c.GetTheConcept)(a[B].typeId),O=D?.data,M=Object.keys(O)[0];try{let U=H.characterValue+"_reverse";typeof O=="string"&&(O={}),Array.isArray(O[M][U])||(typeof O[M]=="string"&&(O[M]={}),O[M][U]=[]),O[M][U].push(h[a[B].ofTheConceptId])}catch(U){console.log("this is error",U)}}}else if(h[a[B].ofTheConceptId]&&h[a[B].toTheConceptId]){let D=h[a[B].ofTheConceptId],H=yield(0,c.GetTheConcept)(a[B].typeId),O=D?.data,M=Object.keys(O)[0];try{typeof O=="string"&&(O={}),Array.isArray(O[M][H.characterValue])||(typeof O[M]=="string"&&(O[M]={}),O[M][H.characterValue]=[]),O[M][H.characterValue].push(h[a[B].toTheConceptId])}catch(U){console.log("this is error",U)}}}return T=h[N],T})}function v(L,d,l){return s(this,arguments,void 0,function*(a,h,N,k=[]){let T=[],_=[];for(let B=0;B<a.length;B++)_.push(a[B].toTheConceptId),_.push(a[B].ofTheConceptId),_.push(a[B].typeId);a.sort(function(B,R){return R.id-B.id});for(let B=0;B<a.length;B++){let R=!1;if(k.includes(a[B].id)&&(R=!0),R==1){if(h[a[B].ofTheConceptId]&&h[a[B].toTheConceptId]){let D=h[a[B].toTheConceptId],H=yield(0,c.GetTheConcept)(a[B].typeId),O=Object.keys(D)[0];try{let M=H.characterValue+"_reverse";typeof D=="string"&&(D={}),Array.isArray(D[O][M])||(typeof D[O]=="string"&&(D[O]={}),D[O][M]=[]),D[O][M].push(h[a[B].ofTheConceptId])}catch(M){console.log("this is error",M)}}}else if(h[a[B].ofTheConceptId]&&h[a[B].toTheConceptId]){let D=h[a[B].ofTheConceptId],H=yield(0,c.GetTheConcept)(a[B].typeId),O=Object.keys(D)[0];try{typeof D=="string"&&(D={}),Array.isArray(D[O][H.characterValue])||(typeof D[O]=="string"&&(D[O]={}),D[O][H.characterValue]=[]),D[O][H.characterValue].push(h[a[B].toTheConceptId])}catch(M){console.log("this is error",M)}}}for(let B=0;B<N.length;B++){let R=h[N[B]];R&&T.push(R)}return T})}function I(L,d,l,a){return s(this,arguments,void 0,function*(h,N,k,T,_=[]){new Date().getTime();let B=[],R=[];for(let D=0;D<h.length;D++)R.push(h[D].toTheConceptId),R.push(h[D].ofTheConceptId),R.push(h[D].typeId);h.sort(function(D,H){return H.id-D.id});for(let D=0;D<h.length;D++){let H=!1;if(_.includes(h[D].id)&&(H=!0),H==1){if(N[h[D].ofTheConceptId]&&N[h[D].toTheConceptId]){let O=N[h[D].toTheConceptId],M=yield(0,c.GetTheConcept)(h[D].typeId),U=O?.data,P=Object.keys(U)[0];try{let $=M.characterValue+"_reverse";typeof U=="string"&&(U={}),Array.isArray(U[P][$])||(typeof U[P]=="string"&&(U[P]={}),U[P][$]=[]),U[P][$].push(N[h[D].ofTheConceptId])}catch($){console.log("this is error",$)}}}else if(N[h[D].ofTheConceptId]&&N[h[D].toTheConceptId]){let O=N[h[D].ofTheConceptId],M=yield(0,c.GetTheConcept)(h[D].typeId),U=O?.data,P=Object.keys(U)[0];try{typeof U=="string"&&(U={}),Array.isArray(U[P][M.characterValue])||(typeof U[P]=="string"&&(U[P]={}),U[P][M.characterValue]=[]),U[P][M.characterValue].push(N[h[D].toTheConceptId])}catch($){console.log("this is error",$)}}}for(let D=0;D<T.length;D++){let H=N[T[D]];H&&B.push(H)}return B})}function w(L,d,l){return s(this,arguments,void 0,function*(a,h,N,k=[]){let T={},_=yield(0,c.GetConnectionBulk)(a),B=[];for(let R=0;R<_.length;R++)B.push(_[R].toTheConceptId),B.push(_[R].ofTheConceptId),B.push(_[R].typeId);yield(0,c.GetConceptBulk)(B),_.sort(function(R,D){return D.id-R.id});for(let R=0;R<_.length;R++){let D=!1;if(k.includes(_[R].id)&&(D=!0),D==1){if(h[_[R].ofTheConceptId]&&h[_[R].toTheConceptId]){let H=h[_[R].toTheConceptId],O=yield(0,c.GetTheConcept)(_[R].typeId),M=H,U=Object.keys(M)[0];try{let P=O.characterValue+"_reverse";typeof M=="string"&&(M={}),Array.isArray(M[U][P])||(typeof M[U]=="string"&&(M[U]={}),M[U][P]=[]),M[U][P].push(h[_[R].ofTheConceptId])}catch(P){console.log("this is error",P)}}}else if(h[_[R].ofTheConceptId]&&h[_[R].toTheConceptId]){let H=h[_[R].ofTheConceptId],O=yield(0,c.GetTheConcept)(_[R].typeId),M=H,U=Object.keys(M)[0];try{typeof M=="string"&&(M={}),Array.isArray(M[U][O.characterValue])||(typeof M[U]=="string"&&(M[U]={}),M[U][O.characterValue]=[]),M[U][O.characterValue].push(h[_[R].toTheConceptId])}catch(P){console.log("this is error",P)}}}return T=h[N],T})}},7106:(he,q,m)=>{m.d(q,{zl:()=>d,b6:()=>h,e$:()=>k,y6:()=>N,yV:()=>l,_W:()=>a});var E=m(4059),F=m(6687);function c(T){return T.startsWith("the_")?T.slice(4):T}var f=function(T,_,B,R){return new(B||(B=Promise))(function(D,H){function O(P){try{U(R.next(P))}catch($){H($)}}function M(P){try{U(R.throw(P))}catch($){H($)}}function U(P){var $;P.done?D(P.value):($=P.value,$ instanceof B?$:new B(function(K){K($)})).then(O,M)}U((R=R.apply(T,_||[])).next())})};function S(T,_,B){return f(this,void 0,void 0,function*(){var R,D,H,O,M,U,P,$;let K=[];for(let Q=0;Q<T.length;Q++)K.push(T[Q].toTheConceptId),K.push(T[Q].ofTheConceptId),K.push(T[Q].typeId);for(let Q=0;Q<T.length;Q++){let ee=!1;B.includes(T[Q].id)&&(ee=!0);let X=yield(0,E.GetTheConcept)(T[Q].ofTheConceptId),te=yield(0,E.GetTheConcept)(T[Q].toTheConceptId);if(ee==1&&X.id!=0&&te.id!=0){let ue,de=(D=(R=te.type)===null||R===void 0?void 0:R.characterValue)!==null&&D!==void 0?D:"self";T[Q].toTheConceptId in _?ue=_[T[Q].toTheConceptId]:(ue={},ue[de]={},_[T[Q].toTheConceptId]=ue);let Y=yield(0,E.GetTheConcept)(T[Q].typeId);try{let ne=(O=(H=X?.type)===null||H===void 0?void 0:H.characterValue)!==null&&O!==void 0?O:"none",oe=X.characterValue;Y.characterValue,Y.characterValue.includes("_s_")&&(X.id in _||(_[X.id]={}),_[X.id][ne]=oe),_[te.id]={}}catch(ne){console.log("this is error",ne)}}if(X.id!=0&&te.id!=0){let ue,de=(U=(M=X.type)===null||M===void 0?void 0:M.characterValue)!==null&&U!==void 0?U:"self";T[Q].ofTheConceptId in _?ue=_[T[Q].ofTheConceptId]:(ue={},ue[de]={},_[T[Q].ofTheConceptId]=ue);let Y=yield(0,E.GetTheConcept)(T[Q].typeId);try{let ne=($=(P=te?.type)===null||P===void 0?void 0:P.characterValue)!==null&&$!==void 0?$:"none",oe=te.characterValue;Y.characterValue.includes("_s_")&&(te.id in _||(_[te.id]={}),_[te.id][ne]=oe),_[X.id]={}}catch(ne){console.log("this is error",ne)}}}return _})}var A=m(5312),s=m(7876),i=function(T,_,B,R){return new(B||(B=Promise))(function(D,H){function O(P){try{U(R.next(P))}catch($){H($)}}function M(P){try{U(R.throw(P))}catch($){H($)}}function U(P){var $;P.done?D(P.value):($=P.value,$ instanceof B?$:new B(function(K){K($)})).then(O,M)}U((R=R.apply(T,_||[])).next())})};function u(T,_,B){if(T in _){let R=_[T];R&&(B[R.connectionType+"_count"]=R.count)}}var v=function(T,_,B,R){return new(B||(B=Promise))(function(D,H){function O(P){try{U(R.next(P))}catch($){H($)}}function M(P){try{U(R.throw(P))}catch($){H($)}}function U(P){var $;P.done?D(P.value):($=P.value,$ instanceof B?$:new B(function(K){K($)})).then(O,M)}U((R=R.apply(T,_||[])).next())})},I=m(5898);function w(T,_="DESC"){return _=="ASC"?T.sort(function(B,R){return B.id-R.id}):T.sort(function(B,R){return R.id-B.id}),T}var L=function(T,_,B,R){return new(B||(B=Promise))(function(D,H){function O(P){try{U(R.next(P))}catch($){H($)}}function M(P){try{U(R.throw(P))}catch($){H($)}}function U(P){var $;P.done?D(P.value):($=P.value,$ instanceof B?$:new B(function(K){K($)})).then(O,M)}U((R=R.apply(T,_||[])).next())})};function d(T,_){return L(this,arguments,void 0,function*(B,R,D=""){let H=yield(0,E.SearchWithTypeAndLinkerApi)(B,R,D),O=H.compositionIds,M=H.internalConnections,U=H.linkers,P=H.reverse,$=H.mainCompositionIds,K=yield(0,F.QL)(U),Q=yield(0,F.MT)(O,M);return yield(0,A.NK)(K,Q,$,P)})}function l(T,_,B,R,D){return L(this,void 0,void 0,function*(){let H=yield(0,F.QL)(T),O=yield(0,F.rv)(_,B);return yield(0,A.Ve)(H,O,_,R,D)})}function a(T,_,B,R,D){return L(this,void 0,void 0,function*(){let H=yield(0,F.QL)(T),O=yield(0,F.D)(_,B);return yield(0,A.NK)(H,O,R,D)})}function h(T,_,B,R,D){return L(this,void 0,void 0,function*(){if(E.serviceWorker)try{return(yield(0,E.sendMessage)("formatConnections",{linkers:T,conceptIds:_,mainCompositionIds:B,reverse:R,countInfos:D})).data}catch(U){console.error("formatConnections error sw: ",U),(0,E.handleServiceWorkerException)(U)}let H=yield(0,F.QL)(T);H=w(H);let O=[];return O=yield S(H,O,R),O=yield function(U,P,$){return f(this,void 0,void 0,function*(){var K,Q,ee,X,te,ue,de,Y;let ne=[];for(let oe=0;oe<U.length;oe++)ne.push(U[oe].toTheConceptId),ne.push(U[oe].ofTheConceptId),ne.push(U[oe].typeId);U.sort(function(oe,pe){return pe.id-oe.id});for(let oe=0;oe<U.length;oe++){let pe=!1;$.includes(U[oe].id)&&(pe=!0);let Ae=yield(0,E.GetTheConcept)(U[oe].ofTheConceptId),ge=yield(0,E.GetTheConcept)(U[oe].toTheConceptId);if(pe==1&&Ae.id!=0&&ge.id!=0){let se,re=(Q=(K=ge.type)===null||K===void 0?void 0:K.characterValue)!==null&&Q!==void 0?Q:"self";U[oe].toTheConceptId in P?(se=P[U[oe].toTheConceptId],re in se||(se[re]={})):(se={},se[re]={},P[U[oe].toTheConceptId]=se);let ke=yield(0,E.GetTheConcept)(U[oe].typeId);try{let We=(X=(ee=Ae?.type)===null||ee===void 0?void 0:ee.characterValue)!==null&&X!==void 0?X:"none",De=Ae.characterValue,fe=ke.characterValue;fe==""&&(fe=We,fe=c(fe));let Le={[We]:De},me=fe+"_reverse";ke.characterValue.includes("_s_")||(typeof se[re]=="string"&&(se[re]={}),se[re][me]=Le)}catch(We){console.log("this is error",We)}}if(Ae.id!=0&&ge.id!=0){let se,re=(ue=(te=Ae.type)===null||te===void 0?void 0:te.characterValue)!==null&&ue!==void 0?ue:"self";U[oe].ofTheConceptId in P?(se=P[U[oe].ofTheConceptId],re in se||(se[re]={})):(se={},se[re]={},P[U[oe].ofTheConceptId]=se);let ke=yield(0,E.GetTheConcept)(U[oe].typeId);try{let We=(Y=(de=ge?.type)===null||de===void 0?void 0:de.characterValue)!==null&&Y!==void 0?Y:"none",De=ge.characterValue,fe=ke.characterValue,Le=(ke.characterValue,!1);fe==""&&(fe=We,fe=c(fe),Le=!0);let me={[We]:De};isNaN(Number(fe))?ke.characterValue.includes("_s_")||(typeof se[re]=="string"&&(se[re]={}),se[re][fe]=Le?De:me):(Array.isArray(se[re])||(se[re]=[]),se[re].push(De))}catch(We){console.log("this is error",We)}}}return P})}(H,O,R),yield function(U,P,$,K){return f(this,arguments,void 0,function*(Q,ee,X,te,ue=[]){var de,Y,ne,oe,pe,Ae;let ge=[],se=[];for(let re=0;re<Q.length;re++)se.push(Q[re].toTheConceptId),se.push(Q[re].ofTheConceptId),se.push(Q[re].typeId);Q.sort(function(re,ke){return ke.id-re.id});for(let re=0;re<Q.length;re++){let ke=!1;ue.includes(Q[re].id)&&(ke=!0);let We=yield(0,E.GetTheConcept)(Q[re].ofTheConceptId),De=yield(0,E.GetTheConcept)(Q[re].toTheConceptId);if(ke==1&&We.id!=0&&De.id!=0&&De.id in ee){let fe,Le=(Y=(de=De.type)===null||de===void 0?void 0:de.characterValue)!==null&&Y!==void 0?Y:"self";Q[re].toTheConceptId in ee?fe=ee[Q[re].toTheConceptId]:(fe={},fe[Le]={},ee[Q[re].toTheConceptId]=fe);let me=yield(0,E.GetTheConcept)(Q[re].typeId);try{let ve=me.characterValue+"_reverse",ye=ee[Q[re].ofTheConceptId];ye&&(Array.isArray(fe[Le][ve])?fe[Le][ve].push(ye):me.characterValue.includes("_s_")?(fe[Le][ve]=[],fe[Le][ve].push(ye)):fe[Le][ve]=ye)}catch(ve){console.log("this is error",ve)}}if(We.id!=0&&De.id!=0&&We.id in ee){let fe,Le=(oe=(ne=We.type)===null||ne===void 0?void 0:ne.characterValue)!==null&&oe!==void 0?oe:"self";Q[re].ofTheConceptId in ee?(fe=ee[Q[re].ofTheConceptId],typeof fe[Le]=="string"&&(fe[Le]={})):(fe={},fe[Le]={},ee[Q[re].ofTheConceptId]=fe);let me=!1,ve=(yield(0,E.GetTheConcept)(Q[re].typeId)).characterValue;ve==""&&(ve=De.characterValue,me=!0),ve==""&&(ve=(Ae=(pe=De?.type)===null||pe===void 0?void 0:pe.characterValue)!==null&&Ae!==void 0?Ae:"");try{let ye=ee[Q[re].toTheConceptId];ye&&(Array.isArray(fe[Le])?me?fe[Le].push(ye[ve]):fe[Le].push(ye):Array.isArray(fe[Le][ve])?fe[Le][ve].push(ye):ve.includes("_s_")?(fe[Le][ve]=[],me?fe[Le][ve].push(ye[ve]):fe[Le][ve].push(ye)):fe[Le][ve]=me?ye[ve]:ye)}catch(ye){console.log("this is error",ye)}}}for(let re=0;re<X.length;re++){let ke=ee[X[re]];ke?(ke.id=X[re],ge.push(ke)):(yield E.ConceptsData.GetConcept(X[re])).id!=0&&(ke={},ke.id=X[re],ge.push(ke))}return ge})}(H,O,B,[],R)})}function N(T,_,B,R,D){return L(this,arguments,void 0,function*(H,O,M,U,P,$="DESC"){if(E.serviceWorker)try{return(yield(0,E.sendMessage)("formatConnectionsJustId",{linkers:H,conceptIds:O,mainCompositionIds:M,reverse:U,countInfos:P,order:$})).data}catch(te){console.error("formatConnectionsJustId error sw: ",te),(0,E.handleServiceWorkerException)(te)}let K=yield(0,F.QL)(H),Q=yield(0,I.V)(P);K=w(K,$);let ee=[];return ee=yield S(K,ee,U),ee=yield function(te,ue){return i(this,arguments,void 0,function*(de,Y,ne=[]){var oe,pe,Ae,ge,se,re,ke,We;let De=[];for(let fe=0;fe<de.length;fe++)De.push(de[fe].toTheConceptId),De.push(de[fe].ofTheConceptId),De.push(de[fe].typeId);for(let fe=0;fe<de.length;fe++){let Le=!1,me=yield(0,s.A)(de[fe].ofTheConceptId),ve=yield(0,s.A)(de[fe].toTheConceptId);if(ne.includes(de[fe].id)&&(Le=!0),Le==1&&me.id!=0&&ve.id!=0){let ye,Ee=yield(0,s.A)(de[fe].typeId),ae=(pe=(oe=ve.type)===null||oe===void 0?void 0:oe.characterValue)!==null&&pe!==void 0?pe:"self";de[fe].toTheConceptId in Y?(ye=Y[de[fe].toTheConceptId],ae in ye||(ye[ae]={})):(ye={},ye[ae]={},Y[de[fe].toTheConceptId]=ye);try{let Te=(ge=(Ae=me?.type)===null||Ae===void 0?void 0:Ae.characterValue)!==null&&ge!==void 0?ge:"none",Ge=me.characterValue,we=Ee.characterValue;we==""&&(we=Te,we=c(we));let Ne={id:me.id,[Te]:Ge,created_on:de[fe].entryTimeStamp},_e=we+"_reverse";_e.includes("_s_")||(typeof ye[ae]=="string"&&(ye[ae]={}),ye[ae][_e]=Ne)}catch(Te){console.log("this is error",Te)}}if(me.id!=0&&ve.id!=0){let ye,Ee=yield(0,s.A)(de[fe].typeId),ae=(re=(se=me.type)===null||se===void 0?void 0:se.characterValue)!==null&&re!==void 0?re:"self";de[fe].ofTheConceptId in Y?(ye=Y[de[fe].ofTheConceptId],ae in ye||(ye[ae]={})):(ye={},ye[ae]={},Y[de[fe].ofTheConceptId]=ye);try{let Te=(We=(ke=ve?.type)===null||ke===void 0?void 0:ke.characterValue)!==null&&We!==void 0?We:"none",Ge=ve.characterValue,we=Ee.characterValue,Ne=!1;we==""&&(we=Te,we=c(we),Ne=!0);let _e={};_e[Te]={id:ve.id,data:Ge,created_on:de[fe].entryTimeStamp},isNaN(Number(we))?we.includes("_s_")||(typeof ye[ae]=="string"&&(ye[ae]={}),ye[ae][we]=Ne?_e[Te]:_e):(Array.isArray(ye[ae])||(ye[ae]=[]),ye[ae].push(_e[Te]))}catch(Te){console.log("this is error",Te)}}}return Y})}(K,ee,U),yield function(te,ue,de){return i(this,arguments,void 0,function*(Y,ne,oe,pe=[],Ae){var ge,se,re,ke,We,De,fe;new Date().getTime();let Le=[],me=[];for(let ve=0;ve<Y.length;ve++)me.push(Y[ve].toTheConceptId),me.push(Y[ve].ofTheConceptId),me.push(Y[ve].typeId);for(let ve=0;ve<Y.length;ve++){let ye=!1,Ee=yield(0,s.A)(Y[ve].ofTheConceptId),ae=yield(0,s.A)(Y[ve].toTheConceptId);if(pe.includes(Y[ve].id)&&(ye=!0),ye==1&&Ee.id!=0&&ae.id!=0&&ae.id in ne){let Te,Ge=yield(0,s.A)(Y[ve].typeId),we=(se=(ge=ae.type)===null||ge===void 0?void 0:ge.characterValue)!==null&&se!==void 0?se:"self";Y[ve].toTheConceptId in ne,Y[ve].toTheConceptId in ne?(Te=ne[Y[ve].toTheConceptId],typeof Te[we]=="string"&&(Te[we]={})):(Te={},Te[we]={},ne[Y[ve].toTheConceptId]=Te);try{if(ne[Y[ve].ofTheConceptId]){let Ne=ne[Y[ve].ofTheConceptId];Ne&&(Ne.id=Ee.id,Ne.created_on=Ee.entryTimeStamp);let _e=Ge.characterValue+"_reverse";Array.isArray(Te[we][_e])?Te[we][_e].push(Ne):_e.includes("_s_")?(Te[we][_e]=[],Te[we][_e].push(Ne)):Te[we][_e]=Ne}}catch(Ne){console.log("this is error",Ne)}}if(Ee.id!=0&&ae.id!=0&&Ee.id in ne){let Te,Ge=yield(0,s.A)(Y[ve].typeId),we=(ke=(re=Ee.type)===null||re===void 0?void 0:re.characterValue)!==null&&ke!==void 0?ke:"self";Y[ve].toTheConceptId in ne,Y[ve].ofTheConceptId in ne?(Te=ne[Y[ve].ofTheConceptId],typeof Te[we]=="string"&&(Te[we]={})):(Te={},Te[we]={},ne[Y[ve].ofTheConceptId]=Te),u(Ee.id,Ae,Te);let Ne=!1,_e=Ge.characterValue;_e==""&&(_e=ae.characterValue,Ne=!0),_e==""&&(_e=((We=ae?.type)===null||We===void 0?void 0:We.characterValue)||"");try{let Oe=(fe=(De=ae?.type)===null||De===void 0?void 0:De.characterValue)!==null&&fe!==void 0?fe:"none",je=ne[Y[ve].toTheConceptId];if(je){let Qe={};Qe[Oe]={data:je[Oe],id:ae.id,created_on:Y[ve].entryTimeStamp},Array.isArray(Te[we])?Ne?Te[we].push(je[_e]):Te[we].push(je):Array.isArray(Te[we][_e])?Te[we][_e].push(Qe):_e.includes("_s_")?(Te[we][_e]=[],Ne?Te[we][_e].push(Qe[Oe]):Te[we][_e].push(Qe)):Te[we][_e]=Ne?Qe[Oe]:Qe,u(ae.id,Ae,Qe)}}catch(Oe){console.log("this is error",Oe)}}}for(let ve=0;ve<oe.length;ve++){let ye={};ye=ne[oe[ve]],ye?ye.id=oe[ve]:(yield E.ConceptsData.GetConcept(oe[ve])).id!=0&&(ye={},ye.id=oe[ve]),Le.push(ye)}return Le})}(K,ee,M,U,Q)})}function k(T,_,B,R,D){return L(this,arguments,void 0,function*(H,O,M,U,P,$="DESC"){if(E.serviceWorker)try{return(yield(0,E.sendMessage)("formatConnectionsDataId",{linkers:H,conceptIds:O,mainCompositionIds:M,reverse:U,countInfos:P,order:$})).data}catch(te){console.error("GetConnectionDataPrefetch error sw: ",te),(0,E.handleServiceWorkerException)(te)}let K=yield(0,F.QL)(H),Q=yield(0,I.V)(P);K=w(K,$);let ee=[];return ee=yield function(te,ue){var de=arguments;return v(this,arguments,void 0,function*(Y,ne,oe=[]){var pe,Ae,ge,se,re,ke,We,De;const fe=E.Logger.logfunction("FormatFunctionData",de);let Le=[];for(let me=0;me<Y.length;me++)Le.push(Y[me].toTheConceptId),Le.push(Y[me].ofTheConceptId),Le.push(Y[me].typeId);for(let me=0;me<Y.length;me++){let ve=!1,ye=yield(0,E.GetTheConcept)(Y[me].ofTheConceptId),Ee=yield(0,E.GetTheConcept)(Y[me].toTheConceptId);if(oe.includes(Y[me].id)&&(ve=!0),ve==1&&ye.id!=0&&Ee.id!=0){let ae,Te=yield(0,E.GetTheConcept)(Y[me].typeId),Ge=(Ae=(pe=Ee.type)===null||pe===void 0?void 0:pe.characterValue)!==null&&Ae!==void 0?Ae:"self";Y[me].toTheConceptId in ne?ae=ne[Y[me].toTheConceptId]:(ae={},ae[Ge]={},ne[Y[me].toTheConceptId]=ae);try{let we=(se=(ge=ye?.type)===null||ge===void 0?void 0:ge.characterValue)!==null&&se!==void 0?se:"none",Ne=ye.characterValue;(Te.characterValue+"_reverse").includes("_s_")&&(ye.id in ne||(ne[ye.id]={}),ne[ye.id][we]=Ne),ne[Ee.id]={}}catch(we){console.log("this is error",we)}}if(ye.id!=0&&Ee.id!=0){let ae,Te=yield(0,E.GetTheConcept)(Y[me].typeId),Ge=(ke=(re=ye.type)===null||re===void 0?void 0:re.characterValue)!==null&&ke!==void 0?ke:"self";Y[me].ofTheConceptId in ne?ae=ne[Y[me].ofTheConceptId]:(ae={},ae[Ge]={},ne[Y[me].ofTheConceptId]=ae);try{let we=(De=(We=Ee?.type)===null||We===void 0?void 0:We.characterValue)!==null&&De!==void 0?De:"none",Ne=Ee.characterValue;Te.characterValue.includes("_s_")&&(Ee.id in ne||(ne[Ee.id]={}),ne[Ee.id][we]=Ne),ne[ye.id]={}}catch(we){console.log("this is error",we)}}}return E.Logger.logUpdate(fe),ne})}(K,ee,U),ee=yield function(te,ue){var de=arguments;return v(this,arguments,void 0,function*(Y,ne,oe=[]){var pe,Ae,ge,se,re,ke,We,De;const fe=E.Logger.logfunction("FormatFunctionDataForData",de);let Le=[];for(let me=0;me<Y.length;me++)Le.push(Y[me].toTheConceptId),Le.push(Y[me].ofTheConceptId),Le.push(Y[me].typeId);for(let me=0;me<Y.length;me++){let ve=!1,ye=yield(0,E.GetTheConcept)(Y[me].ofTheConceptId),Ee=yield(0,E.GetTheConcept)(Y[me].toTheConceptId);if(oe.includes(Y[me].id)&&(ve=!0),ve==1&&ye.id!=0&&Ee.id!=0){let ae,Te=yield(0,E.GetTheConcept)(Y[me].typeId),Ge=(Ae=(pe=Ee.type)===null||pe===void 0?void 0:pe.characterValue)!==null&&Ae!==void 0?Ae:"self";Y[me].toTheConceptId in ne?(ae=ne[Y[me].toTheConceptId],Ge in ae||(ae[Ge]={})):(ae={},ae[Ge]={},ne[Y[me].toTheConceptId]=ae);try{let we=(se=(ge=ye?.type)===null||ge===void 0?void 0:ge.characterValue)!==null&&se!==void 0?se:"none",Ne=ye.characterValue,_e=Te.characterValue;_e==""&&(_e=we,_e=c(_e));let Oe={id:ye.id,data:{[we]:Ne}},je=_e+"_reverse";je.includes("_s_")||(typeof ae[Ge]=="string"&&(ae[Ge]={}),ae[Ge][je]=Oe)}catch(we){console.log("this is error",we)}}if(ye.id!=0&&Ee.id!=0){let ae,Te=yield(0,E.GetTheConcept)(Y[me].typeId),Ge=(ke=(re=ye.type)===null||re===void 0?void 0:re.characterValue)!==null&&ke!==void 0?ke:"self";Y[me].ofTheConceptId in ne?(ae=ne[Y[me].ofTheConceptId],Ge in ae||(ae[Ge]={})):(ae={},ae[Ge]={},ne[Y[me].ofTheConceptId]=ae);try{let we=(De=(We=Ee?.type)===null||We===void 0?void 0:We.characterValue)!==null&&De!==void 0?De:"none",Ne=Ee.characterValue,_e=Te.characterValue,Oe=!1;_e==""&&(_e=we,_e=c(_e),Oe=!0);let je={id:Ee.id,data:{[we]:Ne}};isNaN(Number(_e))?_e.includes("_s_")||(typeof ae[Ge]=="string"&&(ae[Ge]={}),ae[Ge][_e]=je):(Array.isArray(ae[Ge])||(ae[Ge]=[]),ae[Ge].push(je))}catch(we){console.log("this is error",we)}}}return E.Logger.logUpdate(fe),ne})}(K,ee,U),yield function(te,ue,de,Y){var ne=arguments;return v(this,arguments,void 0,function*(oe,pe,Ae,ge,se=[],re){var ke,We,De,fe,Le,me;const ve=E.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",ne);let ye=[],Ee=[];for(let ae=0;ae<oe.length;ae++)Ee.push(oe[ae].toTheConceptId),Ee.push(oe[ae].ofTheConceptId),Ee.push(oe[ae].typeId);for(let ae=0;ae<oe.length;ae++){let Te=!1,Ge=yield(0,E.GetTheConcept)(oe[ae].ofTheConceptId),we=yield(0,E.GetTheConcept)(oe[ae].toTheConceptId);if(se.includes(oe[ae].id)&&(Te=!0),Te==1&&Ge.id!=0&&we.id!=0&&we.id in pe){let Ne,_e=yield(0,E.GetTheConcept)(oe[ae].typeId),Oe=(We=(ke=we.type)===null||ke===void 0?void 0:ke.characterValue)!==null&&We!==void 0?We:"self";oe[ae].toTheConceptId in pe,oe[ae].toTheConceptId in pe?(Ne=pe[oe[ae].toTheConceptId],typeof Ne[Oe]=="string"&&(Ne[Oe]={})):(Ne={},Ne[Oe]={},pe[oe[ae].toTheConceptId]=Ne),u(we.id,re,Ne);try{if(pe[oe[ae].ofTheConceptId]){let je={id:Ge.id,data:pe[oe[ae].ofTheConceptId],created_on:oe[ae].entryTimeStamp},Qe=_e.characterValue+"_reverse";Array.isArray(Ne[Oe][Qe])?Ne[Oe][Qe].push(je):Qe.includes("_s_")?(Ne[Oe][Qe]=[],Ne[Oe][Qe].push(je)):Ne[Oe][Qe]=je}}catch(je){console.log("this is error",je)}}if(Ge.id!=0&&we.id!=0&&Ge.id in pe){let Ne,_e=yield(0,E.GetTheConcept)(oe[ae].typeId),Oe=(fe=(De=Ge.type)===null||De===void 0?void 0:De.characterValue)!==null&&fe!==void 0?fe:"self";oe[ae].toTheConceptId in pe,oe[ae].ofTheConceptId in pe?(Ne=pe[oe[ae].ofTheConceptId],typeof Ne[Oe]=="string"&&(Ne[Oe]={})):(Ne={},Ne[Oe]={},pe[oe[ae].ofTheConceptId]=Ne),u(Ge.id,re,Ne);let je=_e.characterValue;je==""&&(je=we.characterValue),je==""&&(je=((Le=we?.type)===null||Le===void 0?void 0:Le.characterValue)||"");try{(me=we?.type)===null||me===void 0||me.characterValue;let Qe=pe[oe[ae].toTheConceptId];if(Qe){let Wt={id:we.id,data:pe[oe[ae].toTheConceptId],created_on:oe[ae].entryTimeStamp};Array.isArray(Ne[Oe])?Ne[Oe].push(Qe):Array.isArray(Ne[Oe][je])?Ne[Oe][_e.characterValue].push(Wt):je.includes("_s_")?(Ne[Oe][je]=[],Ne[Oe][je].push(Wt)):Ne[Oe][je]=Wt,u(we.id,re,Wt)}}catch(Qe){console.log("this is error",Qe)}}}for(let ae=0;ae<ge.length;ae++){let Te={};Te.id=ge[ae];let Ge=yield(0,E.GetTheConcept)(Te.id);Te.data=pe[ge[ae]],Te.created_on=Ge.entryTimeStamp,ye.push(Te)}return E.Logger.logUpdate(ve),ye})}(K,ee,[],M,U,Q)})}},3518:(he,q,m)=>{m.d(q,{BZ:()=>S,Xr:()=>c,ab:()=>f});var E=m(3278),F=m(490);function c(A="application/json",s="application/json"){let i={};return i=E.b.BearerAccessToken!=""?{"Content-Type":A,Authorization:"Bearer "+E.b.BearerAccessToken,Accept:s,"X-Session-id":E.b.sessionId.toString()}:{"Content-Type":A,Accept:s},i}function f(A="application/json",s="",i="application/json"){s==""&&(s=E.b.BearerAccessToken);let u={};return u=s!=""?{"Content-Type":A,Authorization:"Bearer "+s,Accept:i,"X-Session-id":E.b.sessionId.toString()}:{"Content-Type":A,Accept:i},u}function S(){let A=E.b.BearerAccessToken;if(A==""){let i=(0,F.s)();i.token!=""&&(E.b.BearerAccessToken=i.token,A=i.token)}let s=new Headers;return s.append("Authorization","Bearer "+A),s.append("X-Session-Id",E.b.sessionId.toString()),s}},6467:(he,q,m)=>{function E(F){const c=F.lastIndexOf("_");let f=[];return f=c>0?[F.substring(0,c),F.substring(c+1,F.length)]:[F],f}m.d(q,{f:()=>E})},490:(he,q,m)=>{function E(){var F,c,f,S;let A={entity:0,userConcept:0,userId:0,token:""};try{let s=(localStorage==null?void 0:localStorage.getItem("profile"))||"";if(s){const i=JSON.parse(s);A.entity=(F=i?.entityId)!==null&&F!==void 0?F:0,A.userConcept=(c=i?.userConcept)!==null&&c!==void 0?c:0,A.userId=(f=i?.userId)!==null&&f!==void 0?f:0,A.token=(S=i?.token)!==null&&S!==void 0?S:""}}catch{console.log("This is the exception in getting user details from local storage")}return A}m.d(q,{s:()=>E})},1596:(he,q,m)=>{m.d(q,{g:()=>f});var E=m(4059),F=m(3278),c=function(S,A,s,i){return new(s||(s=Promise))(function(u,v){function I(d){try{L(i.next(d))}catch(l){v(l)}}function w(d){try{L(i.throw(d))}catch(l){v(l)}}function L(d){var l;d.done?u(d.value):(l=d.value,l instanceof s?l:new s(function(a){a(l)})).then(I,w)}L((i=i.apply(S,[])).next())})};function f(S,A){return c(this,void 0,void 0,function*(){if(typeof self<"u"&&typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)throw new Error("Cannot switch server from service worker");try{(function(){const s=E.BaseUrl.NODE_CACHE_URL;if(s===E.BaseUrl.BASE_URL)throw new Error("Base Server Down");let i=sessionStorage.getItem("cacheServers");i=JSON.parse(i);const u=i.indexOf(s);if(i.includes(s)&&u!==-1&&i.splice(u,1),sessionStorage.setItem("cacheServers",JSON.stringify(i)),i.length){const v=i[0];E.BaseUrl.NODE_CACHE_URL=v}else E.BaseUrl.NODE_CACHE_URL=E.BaseUrl.BASE_URL;console.log("before the payload",F.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&(0,E.sendMessage)("SESSION_DATA",{type:"SESSION_DATA",data:E.BaseUrl.NODE_CACHE_URL,session:F.b.sessionId})})();try{return yield fetch(`${E.BaseUrl.NODE_CACHE_URL}${A}`,S)}catch{return yield f(S,A)}}catch(s){throw s}})}},4310:(he,q,m)=>{m.d(q,{Cp:()=>v,ix:()=>w,qj:()=>I});var E=m(4059),F=m(1596),c=m(5898),f=m(1863),S=m(7106),A=m(3518),s=function(L,d,l,a){return new(l||(l=Promise))(function(h,N){function k(B){try{_(a.next(B))}catch(R){N(R)}}function T(B){try{_(a.throw(B))}catch(R){N(R)}}function _(B){var R;B.done?h(B.value):(R=B.value,R instanceof l?R:new l(function(D){D(R)})).then(k,T)}_((a=a.apply(L,[])).next())})};const i=new Map,u=new Map;function v(L){var d=arguments;return s(this,void 0,void 0,function*(){E.Logger.logfunction("BuildWidgetFromId",d);try{if(E.serviceWorker)return(yield(0,E.sendMessage)("BuildWidgetFromId",{id:L})).data}catch(h){console.error("BuildWidgetFromId error sw: ",h),(0,E.handleServiceWorkerException)(h)}let l={};if(i.has(L))return i.get(L)||l;const a=s(this,void 0,void 0,function*(){try{let h=[],N=[],k=[],T=[],_="DESC",B=[],R={},D=(0,A.Xr)("application/json"),H=E.BaseUrl.getWidgetData()+"?id="+L;const O=yield fetch(H,{method:"GET",headers:D});if(!O.ok)return(0,f.ry)(O),console.log("This is the BuildWidgetFromId error",O.status),[];R=yield O.json(),h=R.conceptIds,N=R.linkers,k=R.reverse,T=R.mainCompositionIds,B=R.countinfo;let M=(0,c.w)(B);return l=yield(0,S.e$)(N,h,T,k,M,_),l}catch(h){throw console.log("this is the error in the build widget",h),h}finally{i.delete(L)}});return i.set(L,a),a})}function I(L){var d=arguments;return s(this,void 0,void 0,function*(){E.Logger.logfunction("BuildWidgetFromIdForLatest",d);try{if(E.serviceWorker)return(yield(0,E.sendMessage)("BuildWidgetFromIdForLatest",{id:L})).data}catch(h){console.error("BuildWidgetFromIdForLatest error sw: ",h),(0,E.handleServiceWorkerException)(h)}let l={};if(u.has(L))return u.get(L)||l;const a=s(this,void 0,void 0,function*(){try{let h,N=[],k=[],T=[],_=[],B="DESC",R=[],D={},H=(0,A.Xr)("application/json");try{let M=E.BaseUrl.getLatestWidgetData()+"?id="+L;h=yield fetch(M,{method:"GET",headers:H})}catch{h=yield(0,F.g)({method:"GET",headers:H},"?id="+L)}if(!h.ok)return(0,f.ry)(h),console.log("This is the BuildWidgetFromId error",h.status),[];D=yield h.json(),N=D.conceptIds,k=D.linkers,T=D.reverse,_=D.mainCompositionIds,R=D.countinfo;let O=(0,c.w)(R);return l=yield(0,S.e$)(k,N,_,T,O,B),{data:l,mainId:D.mainId}}catch(h){throw console.log("this is the error in the build widget",h),h}finally{u.delete(L)}});return u.set(L,a),a})}function w(L,d){for(let l=0;l<L.length;l++)if(L[l].id==d)return L[l]}},4287:(he,q,m)=>{m.d(q,{w:()=>f});var E=m(4059),F=m(3130),c=function(S,A,s,i){return new(s||(s=Promise))(function(u,v){function I(d){try{L(i.next(d))}catch(l){v(l)}}function w(d){try{L(i.throw(d))}catch(l){v(l)}}function L(d){var l;d.done?u(d.value):(l=d.value,l instanceof s?l:new s(function(a){a(l)})).then(I,w)}L((i=i.apply(S,[])).next())})};class f{constructor(){this.subscribers=[],this.mainConcept=0,this.compositionIds=[],this.conceptIds=[],this.internalConnections=[],this.reverse=[],this.linkers=[],this.newIds=[],this.dependency=[],this.isDataLoaded=!1,this.isUpdating=!1,this.fetched=!1,this.format=F.yv,this.eventHandlers={}}listenToEventType(A){if(this.eventHandlers[A])return;const s=i=>c(this,void 0,void 0,function*(){if(this.isUpdating)console.log("rejected this",A);else{this.isUpdating=!0;let u=this;setTimeout(function(){return c(this,void 0,void 0,function*(){let v=i;if(!u.compositionIds.includes(v?.detail)){u.compositionIds.unshift(v?.detail),u.listenToEvent(v?.detail);let I=v?.detail,w=yield E.ConnectionData.GetConnectionByOfTheConceptAndType(I,I);for(let L=0;L<w.length;L++)yield E.ConnectionData.GetConnection(w[L]).then(d=>{d.typeId==u.mainConcept?u.internalConnections.includes(d.id)||u.internalConnections.push(d.id):u.linkers.includes(d.id)||u.linkers.push(d.id),u.conceptIds.includes(d.toTheConceptId)||u.conceptIds.push(d.toTheConceptId),u.compositionIds.includes(d.ofTheConceptId)||u.compositionIds.push(d.ofTheConceptId)})}u.isUpdating=!1,yield u.bind(),u.notify()})},200)}});this.eventHandlers[A]=s,console.log("added listener",A),window.addEventListener(`${A}`,s)}listenToEvent(A){if(this.eventHandlers[A])return;const s=i=>c(this,void 0,void 0,function*(){if(this.isUpdating)console.log("rejected this",A);else{this.isUpdating=!0;let u=this;setTimeout(function(){return c(this,void 0,void 0,function*(){let v=yield E.ConnectionData.GetConnectionByOfTheConceptAndType(A,A);for(let I=0;I<v.length;I++)yield E.ConnectionData.GetConnection(v[I]).then(w=>{w.typeId==u.mainConcept?u.internalConnections.includes(w.id)||u.internalConnections.push(w.id):u.linkers.includes(w.id)||u.linkers.push(w.id),u.conceptIds.includes(w.toTheConceptId)||u.conceptIds.push(w.toTheConceptId),u.compositionIds.includes(w.ofTheConceptId)||(u.compositionIds.push(w.ofTheConceptId),u.newIds.includes(w.ofTheConceptId)||u.newIds.push(w.ofTheConceptId))});u.isUpdating=!1,yield u.bind(),u.notify()})},200)}});this.eventHandlers[A]=s,window.addEventListener(`${A}`,s)}removeListenToEvent(A){const s=this.eventHandlers[A];s&&(window.removeEventListener(`${A}`,s),delete this.eventHandlers[A])}listenToEventConnectionType(A,s){window.addEventListener(`${A}`,i=>{if(this.isUpdating)console.log("rejected this");else{this.isUpdating=!0;let u=this;setTimeout(function(){return c(this,void 0,void 0,function*(){let v=yield E.ConnectionData.GetConnectionByOfTheConceptAndType(A,A);for(let I=0;I<v.length;I++)v.typeId==s&&(yield E.ConnectionData.GetConnection(v[I]).then(w=>{w.typeId==u.mainConcept?u.internalConnections.includes(w.id)||u.internalConnections.push(w.id):u.linkers.includes(w.id)||u.linkers.push(w.id),u.conceptIds.includes(w.toTheConceptId)||u.conceptIds.push(w.toTheConceptId),u.compositionIds.includes(w.ofTheConceptId)||u.compositionIds.push(w.ofTheConceptId)}));u.isUpdating=!1,yield u.bind(),u.notify()})},200)}})}bind(){return c(this,void 0,void 0,function*(){console.log("this is the old execute data")})}run(){return c(this,void 0,void 0,function*(){console.log("this is non subscriber data")})}update(){return c(this,void 0,void 0,function*(){this.isDataLoaded=!1,yield this.bind(),this.notify()})}subscribe(A){return c(this,void 0,void 0,function*(){return this.subscribers.push(A),console.log("again executing data"),yield this.bind(),A(this.data,this)})}execute(){return c(this,void 0,void 0,function*(){return yield this.run()})}unsubscribe(A){return this.subscribers.filter(s=>s!=A),this.subscribers.length}notify(){console.log("notifiers",this.subscribers),this.subscribers.map(A=>{console.log("notify"),A(this.data,this)})}}},5328:(he,q,m)=>{m.d(q,{d:()=>s});var E=m(4059),F=m(3130),c=m(8939),f=m(4287),S=function(i,u,v,I){return new(v||(v=Promise))(function(w,L){function d(h){try{a(I.next(h))}catch(N){L(N)}}function l(h){try{a(I.throw(h))}catch(N){L(N)}}function a(h){var N;h.done?w(h.value):(N=h.value,N instanceof v?N:new v(function(k){k(N)})).then(d,l)}a((I=I.apply(i,[])).next())})};class A extends f.w{constructor(u,v,I,w,L){super(),this.connections=[],this.data=[],this.mainConcept=u,this.linker=v,this.inpage=I,this.page=w,this.format=L}bind(){return S(this,void 0,void 0,function*(){var u;if(!this.isDataLoaded){let w=yield(0,E.GetTheConcept)(this.mainConcept),L=((u=w.type)===null||u===void 0?void 0:u.characterValue)+"_s_"+this.linker,d=yield(0,E.GetConceptByCharacterAndType)(L,16);if(d.id>0){let l=yield(0,E.GetConnectionOfTheConcept)(d.id,w.id,w.userId,this.inpage,this.page);this.connections=l;for(var v=[],I=0;I<this.connections.length;I++)v.push(this.connections[I].toTheConceptId),this.linkers.push(this.connections[I].id),this.listenToEvent(this.connections[I].toTheConceptId);yield(0,E.GetAllConnectionsOfCompositionBulk)(v)}this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return S(this,void 0,void 0,function*(){this.data=[],this.connections=yield(0,E.GetConnectionBulk)(this.linkers);for(var u=0;u<this.connections.length;u++){let v=this.connections[u].toTheConceptId,I=yield(0,E.GetTheConcept)(v);if(console.log("this is the format",this.format),this.format==F.yv){let w=yield(0,c.RW)(I.id);this.data.push(w)}else if(this.format==F.ZJ){let w=yield(0,c.kx)(I.id);this.data.push(w)}else if(this.format==F.iw){let w=yield(0,E.GetCompositionWithIdAndDateFromMemory)(I.id);this.data.push(w)}else{let w=yield(0,E.GetCompositionWithIdAndDateFromMemory)(I.id);this.data.push(w)}}return this.data})}}function s(i,u,v,I,w=F.yv){return new A(i,u,v,I,w)}},4059:(he,q,m)=>{m.r(q),m.d(q,{ADMIN:()=>Bi,ALLID:()=>Ue.BG,AccessTracker:()=>kn.J,AddGhostConcept:()=>Ci,Anomaly:()=>Je,BaseUrl:()=>s.B,BinaryTree:()=>qn.W,BuildWidgetFromId:()=>nn.Cp,BuilderStatefulWidget:()=>_n,Composition:()=>An,CompositionBinaryTree:()=>$t,CompositionNode:()=>io,Concept:()=>Pi.j,ConceptsData:()=>A.I,Connection:()=>de.N,ConnectionData:()=>Ft.d,CreateComposition:()=>ee.A,CreateConnection:()=>Gt.d,CreateConnectionBetweenEntityLocal:()=>ko,CreateConnectionBetweenTwoConcepts:()=>De,CreateConnectionBetweenTwoConceptsGeneral:()=>Le,CreateConnectionBetweenTwoConceptsLocal:()=>fo.h,CreateData:()=>Vn,CreateDefaultConcept:()=>ne.o,CreateDefaultLConcept:()=>ao.u,CreateSession:()=>hi,CreateSessionVisit:()=>pi,CreateTheCompositionLocal:()=>X.R,CreateTheCompositionWithCache:()=>Ln,CreateTheConnection:()=>Te.q,CreateTheConnectionGeneral:()=>ge,CreateTheConnectionLocal:()=>Gt.F,DATAID:()=>Ue.y0,DATAIDDATE:()=>Ue.iw,DelayFunctionExecution:()=>bi,DeleteConceptById:()=>Qn,DeleteConceptLocal:()=>Li,DeleteConnectionById:()=>se.m,DeleteConnectionByIdBulk:()=>se.E,DeleteConnectionByType:()=>mn.$S,DeleteConnectionByTypeBulk:()=>mn.L0,DeleteUser:()=>jo,DependencyObserver:()=>Jt.w,FilterSearch:()=>Fn,FormatFromConnections:()=>Zt.vw,FormatFromConnectionsAltered:()=>Zt.y8,FreeschemaQuery:()=>Tt,FreeschemaQueryApi:()=>On,GetAllConnectionsOfComposition:()=>Q.s,GetAllConnectionsOfCompositionBulk:()=>w.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>mn.WC,GetComposition:()=>d.Nj,GetCompositionBulk:()=>Ye.dF,GetCompositionBulkWithDataId:()=>Ye.cw,GetCompositionFromConnectionsWithDataId:()=>Ye.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>Ye.km,GetCompositionFromConnectionsWithDataIdInObject:()=>Ye.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>Ye.Nt,GetCompositionFromConnectionsWithIndex:()=>Ye.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>Ye.hG,GetCompositionFromMemoryWithConnections:()=>d.JA,GetCompositionList:()=>N,GetCompositionListAll:()=>k,GetCompositionListAllWithId:()=>T,GetCompositionListListener:()=>Fi,GetCompositionListLocal:()=>$,GetCompositionListLocalWithId:()=>K,GetCompositionListWithId:()=>_,GetCompositionListWithIdUpdated:()=>B,GetCompositionListener:()=>Di,GetCompositionLocal:()=>O,GetCompositionLocalWithId:()=>M,GetCompositionWithAllIds:()=>d.Mb,GetCompositionWithCache:()=>ai,GetCompositionWithDataIdBulk:()=>di,GetCompositionWithDataIdWithCache:()=>co,GetCompositionWithId:()=>d.yz,GetCompositionWithIdAndDateFromMemory:()=>d.Ez,GetConceptBulk:()=>yn.r,GetConceptByCharacter:()=>l.A,GetConceptByCharacterAndCategoryLocal:()=>a.$I,GetConceptByCharacterAndType:()=>Ge.A,GetConnectionBetweenTwoConceptsLinker:()=>_i,GetConnectionBulk:()=>Rn.j,GetConnectionById:()=>Jo,GetConnectionDataPrefetch:()=>Ye.QL,GetConnectionOfTheConcept:()=>ue,GetLink:()=>Ne,GetLinkListListener:()=>Mi,GetLinkListener:()=>Ui.d,GetLinkRaw:()=>_e,GetLinkerConnectionFromConcepts:()=>Mo,GetLinkerConnectionToConcepts:()=>Po,GetRelation:()=>so,GetRelationLocal:()=>wi,GetRelationRaw:()=>gi,GetTheConcept:()=>re.A,GetTheConceptLocal:()=>uo.f,GetUserGhostId:()=>mi,JUSTDATA:()=>Ue.ZJ,LConcept:()=>Vi,LConnection:()=>ji,LISTNORMAL:()=>Ue.SL,LocalConceptsData:()=>L.v,LocalSyncData:()=>en.H,LocalTransaction:()=>Co,Logger:()=>ce.V,LoginToBackend:()=>Ko,MakeTheInstanceConcept:()=>ke.A,MakeTheInstanceConceptLocal:()=>me.k,MakeTheTimestamp:()=>zo,MakeTheTypeConceptApi:()=>fn,MakeTheTypeConceptLocal:()=>Oe.$,NORMAL:()=>Ue.yv,PRIVATE:()=>Gi,PUBLIC:()=>xi,PatcherStructure:()=>Hi,Prototype:()=>Cr,RAW:()=>Ue.XZ,RecursiveSearchApi:()=>qo,RecursiveSearchApiNewRawFullLinker:()=>Yo,RecursiveSearchApiRaw:()=>Xn,RecursiveSearchApiRawFullLinker:()=>Xo,RecursiveSearchApiWithInternalConnections:()=>Qo,RecursiveSearchListener:()=>Oi,SchemaQuery:()=>nr,SchemaQueryListener:()=>Cn,SearchAllConcepts:()=>ri,SearchLinkInternal:()=>Ni,SearchLinkInternalAll:()=>Ai,SearchLinkMultipleAll:()=>Zt.cf,SearchLinkMultipleAllObservable:()=>go,SearchLinkMultipleApi:()=>f.j,SearchQuery:()=>Xt,SearchStructure:()=>Ji,SearchWithLinker:()=>ci,SearchWithTypeAndLinker:()=>Kt.zl,SearchWithTypeAndLinkerApi:()=>yo,Selector:()=>ir,SessionData:()=>$i,Signin:()=>ni,Signup:()=>ei,SignupEntity:()=>ti,SplitStrings:()=>S.f,StatefulWidget:()=>Un,SyncData:()=>Y.Y,TrashTheConcept:()=>Ho,UpdateComposition:()=>ii,UpdateCompositionLocal:()=>Ti.D,UserBinaryTree:()=>Yt,Validator:()=>Ki,ViewInternalData:()=>po,ViewInternalDataApi:()=>ho,WidgetTree:()=>Io,convertFromConceptToLConcept:()=>Wn.F4,convertFromLConceptToConcept:()=>Wn.dp,convertWidgetTreeToWidget:()=>Pn,convertWidgetTreeToWidgetWithWrapper:()=>Ao,createFormFieldData:()=>er,createPrototypeLocal:()=>So,dispatchIdEvent:()=>Ar,getFromDatabaseWithType:()=>Ee,getObjectsFromIndexDb:()=>ae,getUserDetails:()=>or.s,getWidgetBulkFromId:()=>Bn,getWidgetFromId:()=>fr,handleServiceWorkerException:()=>He,hasActivatedSW:()=>bo,init:()=>kr,recursiveFetch:()=>d.zN,recursiveFetchNew:()=>gn,removeAllChildren:()=>No,renderLatestWidget:()=>Mn,renderPage:()=>lr,renderWidget:()=>dr,searchLinkMultipleListener:()=>Ei,sendEmail:()=>Yi,sendMessage:()=>Me,serviceWorker:()=>be,setHasActivatedSW:()=>Ir,storeToDatabase:()=>ye,subscribedListeners:()=>_o,unwrapContainers:()=>Lo,updateAccessToken:()=>Bo,uploadAttachment:()=>Zo,uploadFile:()=>to,uploadImage:()=>eo,validDocumentFormats:()=>Kn,validImageFormats:()=>Zn});var E={};m.r(E),m.d(E,{ADMIN:()=>Bi,ALLID:()=>Ue.BG,AccessTracker:()=>kn.J,AddGhostConcept:()=>Ci,Anomaly:()=>Je,BaseUrl:()=>s.B,BinaryTree:()=>qn.W,BuildWidgetFromId:()=>nn.Cp,BuilderStatefulWidget:()=>_n,Composition:()=>An,CompositionBinaryTree:()=>$t,CompositionNode:()=>io,Concept:()=>Pi.j,ConceptsData:()=>A.I,Connection:()=>de.N,ConnectionData:()=>Ft.d,CreateComposition:()=>ee.A,CreateConnection:()=>Gt.d,CreateConnectionBetweenEntityLocal:()=>ko,CreateConnectionBetweenTwoConcepts:()=>De,CreateConnectionBetweenTwoConceptsGeneral:()=>Le,CreateConnectionBetweenTwoConceptsLocal:()=>fo.h,CreateData:()=>Vn,CreateDefaultConcept:()=>ne.o,CreateDefaultLConcept:()=>ao.u,CreateSession:()=>hi,CreateSessionVisit:()=>pi,CreateTheCompositionLocal:()=>X.R,CreateTheCompositionWithCache:()=>Ln,CreateTheConnection:()=>Te.q,CreateTheConnectionGeneral:()=>ge,CreateTheConnectionLocal:()=>Gt.F,DATAID:()=>Ue.y0,DATAIDDATE:()=>Ue.iw,DelayFunctionExecution:()=>bi,DeleteConceptById:()=>Qn,DeleteConceptLocal:()=>Li,DeleteConnectionById:()=>se.m,DeleteConnectionByIdBulk:()=>se.E,DeleteConnectionByType:()=>mn.$S,DeleteConnectionByTypeBulk:()=>mn.L0,DeleteUser:()=>jo,DependencyObserver:()=>Jt.w,FilterSearch:()=>Fn,FormatFromConnections:()=>Zt.vw,FormatFromConnectionsAltered:()=>Zt.y8,FreeschemaQuery:()=>Tt,FreeschemaQueryApi:()=>On,GetAllConnectionsOfComposition:()=>Q.s,GetAllConnectionsOfCompositionBulk:()=>w.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>mn.WC,GetComposition:()=>d.Nj,GetCompositionBulk:()=>Ye.dF,GetCompositionBulkWithDataId:()=>Ye.cw,GetCompositionFromConnectionsWithDataId:()=>Ye.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>Ye.km,GetCompositionFromConnectionsWithDataIdInObject:()=>Ye.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>Ye.Nt,GetCompositionFromConnectionsWithIndex:()=>Ye.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>Ye.hG,GetCompositionFromMemoryWithConnections:()=>d.JA,GetCompositionList:()=>N,GetCompositionListAll:()=>k,GetCompositionListAllWithId:()=>T,GetCompositionListListener:()=>Fi,GetCompositionListLocal:()=>$,GetCompositionListLocalWithId:()=>K,GetCompositionListWithId:()=>_,GetCompositionListWithIdUpdated:()=>B,GetCompositionListener:()=>Di,GetCompositionLocal:()=>O,GetCompositionLocalWithId:()=>M,GetCompositionWithAllIds:()=>d.Mb,GetCompositionWithCache:()=>ai,GetCompositionWithDataIdBulk:()=>di,GetCompositionWithDataIdWithCache:()=>co,GetCompositionWithId:()=>d.yz,GetCompositionWithIdAndDateFromMemory:()=>d.Ez,GetConceptBulk:()=>yn.r,GetConceptByCharacter:()=>l.A,GetConceptByCharacterAndCategoryLocal:()=>a.$I,GetConceptByCharacterAndType:()=>Ge.A,GetConnectionBetweenTwoConceptsLinker:()=>_i,GetConnectionBulk:()=>Rn.j,GetConnectionById:()=>Jo,GetConnectionDataPrefetch:()=>Ye.QL,GetConnectionOfTheConcept:()=>ue,GetLink:()=>Ne,GetLinkListListener:()=>Mi,GetLinkListener:()=>Ui.d,GetLinkRaw:()=>_e,GetLinkerConnectionFromConcepts:()=>Mo,GetLinkerConnectionToConcepts:()=>Po,GetRelation:()=>so,GetRelationLocal:()=>wi,GetRelationRaw:()=>gi,GetTheConcept:()=>re.A,GetTheConceptLocal:()=>uo.f,GetUserGhostId:()=>mi,JUSTDATA:()=>Ue.ZJ,LConcept:()=>Vi,LConnection:()=>ji,LISTNORMAL:()=>Ue.SL,LocalConceptsData:()=>L.v,LocalSyncData:()=>en.H,LocalTransaction:()=>Co,Logger:()=>ce.V,LoginToBackend:()=>Ko,MakeTheInstanceConcept:()=>ke.A,MakeTheInstanceConceptLocal:()=>me.k,MakeTheTimestamp:()=>zo,MakeTheTypeConceptApi:()=>fn,MakeTheTypeConceptLocal:()=>Oe.$,NORMAL:()=>Ue.yv,PRIVATE:()=>Gi,PUBLIC:()=>xi,PatcherStructure:()=>Hi,Prototype:()=>Cr,RAW:()=>Ue.XZ,RecursiveSearchApi:()=>qo,RecursiveSearchApiNewRawFullLinker:()=>Yo,RecursiveSearchApiRaw:()=>Xn,RecursiveSearchApiRawFullLinker:()=>Xo,RecursiveSearchApiWithInternalConnections:()=>Qo,RecursiveSearchListener:()=>Oi,SchemaQuery:()=>nr,SchemaQueryListener:()=>Cn,SearchAllConcepts:()=>ri,SearchLinkInternal:()=>Ni,SearchLinkInternalAll:()=>Ai,SearchLinkMultipleAll:()=>Zt.cf,SearchLinkMultipleAllObservable:()=>go,SearchLinkMultipleApi:()=>f.j,SearchQuery:()=>Xt,SearchStructure:()=>Ji,SearchWithLinker:()=>ci,SearchWithTypeAndLinker:()=>Kt.zl,SearchWithTypeAndLinkerApi:()=>yo,Selector:()=>ir,SessionData:()=>$i,Signin:()=>ni,Signup:()=>ei,SignupEntity:()=>ti,SplitStrings:()=>S.f,StatefulWidget:()=>Un,SyncData:()=>Y.Y,TrashTheConcept:()=>Ho,UpdateComposition:()=>ii,UpdateCompositionLocal:()=>Ti.D,UserBinaryTree:()=>Yt,Validator:()=>Ki,ViewInternalData:()=>po,ViewInternalDataApi:()=>ho,WidgetTree:()=>Io,convertFromConceptToLConcept:()=>Wn.F4,convertFromLConceptToConcept:()=>Wn.dp,convertWidgetTreeToWidget:()=>Pn,convertWidgetTreeToWidgetWithWrapper:()=>Ao,createFormFieldData:()=>er,createPrototypeLocal:()=>So,dispatchIdEvent:()=>Ar,getFromDatabaseWithType:()=>Ee,getObjectsFromIndexDb:()=>ae,getUserDetails:()=>or.s,getWidgetBulkFromId:()=>Bn,getWidgetFromId:()=>fr,handleServiceWorkerException:()=>He,hasActivatedSW:()=>bo,init:()=>kr,recursiveFetch:()=>d.zN,recursiveFetchNew:()=>gn,removeAllChildren:()=>No,renderLatestWidget:()=>Mn,renderPage:()=>lr,renderWidget:()=>dr,searchLinkMultipleListener:()=>Ei,sendEmail:()=>Yi,sendMessage:()=>Me,serviceWorker:()=>be,setHasActivatedSW:()=>Ir,storeToDatabase:()=>ye,subscribedListeners:()=>_o,unwrapContainers:()=>Lo,updateAccessToken:()=>Bo,uploadAttachment:()=>Zo,uploadFile:()=>to,uploadImage:()=>eo,validDocumentFormats:()=>Kn,validImageFormats:()=>Zn});var F=m(5020),c=m(205),f=m(2832),S=m(6467),A=m(3026),s=m(9581),i=m(3518),u=m(1863),v=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function I(b,o){var e=arguments;return v(this,void 0,void 0,function*(){const n=ce.V.logfunction("GetAllConceptsByType",e);try{var p=new URLSearchParams;p.append("type",b),p.append("user_id",o.toString());var y=(0,i.Xr)("application/x-www-form-urlencoded");const x=yield fetch(s.B.GetAllConceptsByTypeUrl(),{method:"POST",headers:y,body:p});if(x.ok){const g=yield x.json();for(var C=0;C<g.length;C++)A.I.AddConcept(g[C])}else console.log("GetAllConceptsByType error",x.status),(0,u.ry)(x)}catch(x){x instanceof Error?console.log("GetAllConceptsByType error message: ",x.message):console.log("GetAllConceptsByType unexpected error: ",x),(0,u.Mb)(x,s.B.GetAllConceptsByTypeUrl()),(0,u.ey)(n,"GetAllConceptsByType",x)}})}var w=m(8642),L=m(9736),d=m(8939),l=m(2013),a=m(8064),h=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function N(b,o){var e=arguments;return h(this,arguments,void 0,function*(n,p,y=10,C=1){const x=ce.V.logfunction("GetCompositionList",e)||{};if(be){x.serviceWorker=!0;try{const t=yield Me("GetCompositionList",{compositionName:n,userId:p,inpage:y,page:C});return ce.V.logUpdate(x),t.data}catch(t){console.error("GetCompositionList sw error: ",t),(0,u.ey)(x,"GetCompositionList",t),He(t)}}let g=yield(0,l.A)(n),r=[];if(g){yield I(n,p);let t=yield A.I.GetConceptsByTypeIdAndUser(g.id,p),G=y*(C-1),W=[];for(let j=G;j<G+y;j++)t[j]&&W.push(t[j].id);yield(0,w.Y)(W);for(let j=G;j<G+y;j++)if(t[j]){let V=yield(0,d.kx)(t[j].id);r.push(V)}}return ce.V.logUpdate(x),r})}function k(b,o){return h(this,arguments,void 0,function*(e,n,p=10,y=1){let C=$(e,n),x=N(e,n),g=[];return Promise.race([C,x]).then(r=>{console.log("Promise result",r),g.push(...r)}).catch(r=>{console.log("error in handling",r)}),x.then(r=>{console.log("This is the second promise result",r),g.push(...r)}),g})}function T(b,o){return h(this,arguments,void 0,function*(e,n,p=10,y=1){if(be)try{return(yield Me("GetCompositionListAllWithId",{compositionName:e,userId:n,inpage:p,page:y})).data}catch(j){console.error("GetCompositionListAllWithId sw error: ",j),He(j)}let C=yield(0,a.Ay)(e),x=yield(0,l.A)(e),g=[],r=[],t=[],G=[];C.id!=0&&(r=yield L.v.GetConceptsByTypeIdAndUser(C.id,n)),x.id!=0&&(yield I(e,n),G=yield A.I.GetConceptsByTypeIdAndUser(x.id,n),g=G);for(let j=0;j<r.length;j++){let V=!1;for(let J=0;J<G.length;J++)r[j].ghostId==G[J].ghostId&&(V=!0);V||t.push(r[j])}console.log("This is the all list",t);let W=[];return W=yield function(j,V){return h(this,arguments,void 0,function*(J,Z,le=10,Ce=1){let ie=[],Ie=le*(Ce-1),Re=[],Pe=Z.length;for(let Ve=Ie;Ve<Ie+le-Pe;Ve++)J[Ve]&&Re.push(J[Ve].id);for(let Ve=0;Ve<Z.length;Ve++){let $e=yield M(Z[Ve].id);ie.push($e)}yield(0,w.Y)(Re);for(let Ve=Ie;Ve<Ie+le-Pe;Ve++)if(J[Ve]){let $e=yield(0,d.RW)(J[Ve].id);ie.push($e)}return ie})}(g,t,p,y),W})}function _(b,o){return h(this,arguments,void 0,function*(e,n,p=10,y=1){if(be)try{return(yield Me("GetCompositionListWithId",{compositionName:e,userId:n,inpage:p,page:y})).data}catch(g){console.error("GetCompositionListWithId sw error: ",g),He(g)}let C=yield(0,l.A)(e),x=[];if(C){yield I(e,n);let g=yield A.I.GetConceptsByTypeIdAndUser(C.id,n),r=p*(y-1),t=[];for(let G=r;G<r+p;G++)g[G]&&t.push(g[G].id);yield(0,w.Y)(t);for(let G=r;G<r+p;G++)if(g[G]){let W=yield(0,d.RW)(g[G].id);x.push(W)}}return x})}function B(b,o){return h(this,arguments,void 0,function*(e,n,p=10,y=1){let C=yield(0,l.w)(e),x=[];if(C){yield I(e,n);let g=yield A.I.GetConceptsByTypeIdAndUser(C.id,n),r=p*(y-1),t=[];for(let G=r;G<r+p;G++)g[G]&&t.push(g[G].id);yield(0,w.Y)(t);for(let G=r;G<r+p;G++)if(g[G]){let W=yield(0,d.RW)(g[G].id);x.push(W)}}return x})}var R=m(4864),D=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})},H=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function O(b){return H(this,void 0,void 0,function*(){var o,e;try{if(be)try{return(yield Me("GetCompositionLocal",{id:b})).data}catch(g){console.error("GetCompositionLocal error sw: ",g),He(g)}let n=[],p={};n=yield R.G.GetConnectionsOfCompositionLocal(b);let y=[];for(let g=0;g<n.length;g++)y.includes(n[g].ofTheConceptId)||y.push(n[g].ofTheConceptId);let C=yield L.v.GetConcept(b);if(C.id==0){let g=yield function(r){var t=arguments;return D(this,void 0,void 0,function*(){const G=ce.V.logfunction("TranslateLocalToReal",t);let W=(0,ne.o)();try{var j=(0,i.ab)("application/x-www-form-urlencoded");const V=yield fetch(s.B.GetRealConceptById(),{method:"POST",headers:j,body:`id=${r}`});if(V.ok)return W=yield V.json(),W.id>0&&A.I.AddConcept(W),W;console.log("Error in Getting Translating concept Error",V.status),(0,u.ry)(V),ce.V.logUpdate(G)}catch(V){V instanceof Error?console.log("Error in Getting Translating concept error message: ",V):console.log("Error in Getting Translating concept unexpected error: ",V),(0,u.Mb)(V,s.B.GetRealConceptById()),(0,u.ey)(G,"TranslateLocalToReal",V)}return W})}(b);if(g.id>0)return yield(0,d.Nj)(g.id)}let x=yield U(b,n,y);return p[(e=(o=C?.type)===null||o===void 0?void 0:o.characterValue)!==null&&e!==void 0?e:"top"]=x,p}catch(n){throw n}})}function M(b){return H(this,void 0,void 0,function*(){var o,e;try{if(be)try{return(yield Me("GetCompositionLocalWithId",{id:b})).data}catch(g){console.error("GetCompositionLocalWithId error sw: ",g),He(g)}let n=[],p={},y={};n=yield R.G.GetConnectionsOfCompositionLocal(b);let C=[];for(let g=0;g<n.length;g++)C.includes(n[g].ofTheConceptId)||C.push(n[g].ofTheConceptId);let x=yield L.v.GetConcept(b);if(x.id!=0){let g=yield U(b,n,C);p[(e=(o=x?.type)===null||o===void 0?void 0:o.characterValue)!==null&&e!==void 0?e:"top"]=g}return y.data=p,y.id=b,y}catch(n){throw n}})}function U(b,o,e){return H(this,arguments,void 0,function*(n,p,y,C=[]){var x,g,r;let t={},G=[],W=yield L.v.GetConcept(n);if(W.id!=0&&W.type==null){let j=W.typeId,V=yield L.v.GetConcept(j);W.type=V}if((x=W?.type)===null||x===void 0||x.characterValue,!y.includes(n))return W?.characterValue;if(C.includes(n))return"";C.push(n);for(let j=0;j<p.length;j++)if(p[j].ofTheConceptId==n){let V=p[j].toTheConceptId,J=yield L.v.GetConcept(V);if(J.id!=0&&J?.type==null){let Ce=J.typeId,ie=yield L.v.GetConcept(Ce);J.type=ie}let Z="the_",le=((r=(g=J?.type)===null||g===void 0?void 0:g.characterValue)!==null&&r!==void 0?r:"top").replace(Z,"");if(isNaN(Number(le))){if(le){const Ce=yield U(V,p,y);t[le]=Ce}}else{const Ce=yield U(V,p,y);G[le]=Ce,t=G}}return t})}var P=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function $(b,o){return P(this,void 0,void 0,function*(){if(be)try{return(yield Me("GetCompositionListLocal",{compositionName:b,userId:o})).data}catch(e){console.error("GetCompositionListLocal error sw: ",e),He(e)}try{let e=yield(0,a.Ay)(b),n=[];if(e.id!=0){let p=yield L.v.GetConceptsByTypeIdAndUser(e.id,o);for(let y=0;y<p.length;y++){let C=yield O(p[y].id);n.push(C)}}return n}catch(e){throw e}})}function K(b,o){return P(this,void 0,void 0,function*(){if(be)try{return(yield Me("GetCompositionListLocalWithId",{compositionName:b,userId:o})).data}catch(e){console.error("GetCompositionListLocalWithId error sw: ",e),He(e)}try{let e=yield(0,a.Ay)(b),n=[];if(e.id!=0){let p=yield L.v.GetConceptsByTypeIdAndUser(e.id,o);for(let y=0;y<p.length;y++){let C=yield M(p[y].id);n.push(C)}}return n}catch(e){throw e}})}var Q=m(2),ee=m(1218),X=m(999),te=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function ue(b,o,e){var n=arguments;return te(this,arguments,void 0,function*(p,y,C,x=10,g=1){const r=ce.V.logfunction("GetConnectionOfTheConcept",n)||{};let t=[];try{if(be){r.serviceWorker=!0;try{const V=yield Me("GetConnectionOfTheConcept",{typeId:p,ofTheConceptId:y,userId:C,inpage:x,page:g});return ce.V.logUpdate(r),V.data}catch(V){console.error("GetConnectionOfTheConcept sw error: ",V),(0,u.ey)(r,"GetConnectionOfTheConcept",V),He(V)}}let G=new URLSearchParams;G.append("typeId",`${p}`),G.append("ofTheConceptId",`${y}`),G.append("userId",`${C}`),G.append("inpage",`${x}`),G.append("page",`${g}`);let W=(0,i.Xr)("application/x-www-form-urlencoded");const j=yield fetch(s.B.GetAllConnectionsOfConceptUrl(),{method:"POST",headers:W,body:G});return j.ok?t=yield j.json():((0,u.ey)(r,"GetConnectionOfTheConcept",j.status),(0,u.ry)(j),console.log("Get connection of concept error",j.status)),ce.V.logUpdate(r),t}catch(G){G instanceof Error?console.log("Get connection of concept  error message: ",G.message):console.log("Get connection of concept unexpected error: ",G),(0,u.Mb)(G,s.B.GetAllConnectionsOfConceptUrl()),(0,u.ey)(r,"GetConnectionOfTheConcept",G)}})}var de=m(2155),Y=m(442),ne=m(7282),oe=m(5976),pe=m(7273),Ae=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function ge(b,o,e,n){return Ae(this,arguments,void 0,function*(p,y,C,x,g=1,r=4){if(p>0&&C>0){var t=y,G=yield oe.p.getId(),W=new de.N(G,p,C,t,x,g,r);return p==C?(W.ofTheConceptId=0,W.toTheConceptId=1,W):(W.toUpdate=!0,W.isTemp=!1,Y.Y.AddConnection(W),W)}throw new pe.z("cannot create connection because id are negative ",!1,400,"")})}var se=m(4818),re=m(7876),ke=m(8407),We=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function De(b,o,e){return We(this,arguments,void 0,function*(n,p,y,C=!1,x=!1){var g,r;if(be)try{return(yield Me("CreateConnectionBetweenTwoConcepts",{ofTheConcept:n,toTheConcept:p,linker:y,both:C,count:x})).data}catch(J){console.error("CreateConnectionBetweenTwoConcepts sw error: ",J),He(J)}let t=n.userId;if(C){let J=y+"_by",Z=((g=p.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+J;x&&(yield fe(J,p,t));let le=yield(0,ke.A)("connection",Z,!1,999,999,999),Ce=new de.N(0,p.id,n.id,t,le.id,1e3,4);Y.Y.AddConnection(Ce)}let G=y+"_s",W=((r=n.type)===null||r===void 0?void 0:r.characterValue)+"_s_"+G;x&&(yield fe(G,n,t));let j=yield(0,ke.A)("connection",W,!1,999,999,999),V=new de.N(0,n.id,p.id,t,j.id,1e3,4);return Y.Y.AddConnection(V),V})}function fe(b,o){return We(this,arguments,void 0,function*(e,n,p=null){var y;let C=n,x=p??n.userId,g=e+"_count",r=((y=n.type)===null||y===void 0?void 0:y.characterValue)+"_s_"+g,t=yield(0,ke.A)("connection",r,!1,x,4,999),G=yield ue(t.id,n.id,x,10,1),W=[],j=(0,ne.o)();for(let J=0;J<G.length;J++){let Z=yield(0,re.A)(G[J].toTheConceptId);W.push(Z)}if(W.length<1)j=yield(0,ke.A)("count","1",!1,x,4,999);else{let J=W[0],Z=0;try{Z=Number(J.characterValue)}catch{Z=0}Z+=1,j=yield(0,ke.A)("count",Z.toString(),!1,x,4,999);for(let le=0;le<G.length;le++)(0,se.m)(G[le].id)}let V=new de.N(0,C.id,j.id,C.userId,t.id,1e3,4);yield Y.Y.AddConnection(V)})}function Le(b,o,e){return We(this,arguments,void 0,function*(n,p,y,C=!1,x=!1){var g,r;let t=n.userId;if(C){let V=y+"_by",J=((g=p.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+V;x&&(yield fe(V,p,t));let Z=yield(0,ke.A)("connection",J,!1,999,999,999),le=new de.N(0,p.id,n.id,t,Z.id,1e3,4);Y.Y.AddConnection(le)}let G=y+"_s",W=((r=n.type)===null||r===void 0?void 0:r.characterValue)+"_s_"+G;x&&(yield fe(G,n,t));let j=yield(0,ke.A)("connection",W,!1,999,999,999);return yield ge(n.id,n.userId,p.id,j.id,1e3,4)})}var me=m(5868),ve=(m(3655),function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})});function ye(b,o){const e=ce.V.logfunction("storeToDatabase",[b,"noindexdb"]);ce.V.logUpdate(e)}function Ee(b,o,e){return ve(this,void 0,void 0,function*(){const n=ce.V.logfunction("getFromDatabaseWithType",[b,"noindexdb"]);ce.V.logUpdate(n)})}function ae(b){return ve(this,void 0,void 0,function*(){const o=ce.V.logfunction("getObjectsFromIndexDb",[b,"noindexdb"]);ce.V.logUpdate(o)})}var Te=m(1666),Ge=m(4402),we=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function Ne(b,o){var e=arguments;return we(this,arguments,void 0,function*(n,p,y=10,C=1){var x;const g=ce.V.logfunction("GetLink",e)||{};if(be){g.serviceWorker=!0;try{const j=yield Me("GetLink",{id:n,linker:p,inpage:y,page:C});return ce.V.logUpdate(g),j.data}catch(j){console.error("GetLink sw error: ",j),(0,u.ey)(g,"GetLink",j),He(j)}}let r=[],t=yield(0,re.A)(n),G=((x=t.type)===null||x===void 0?void 0:x.characterValue)+"_s_"+p,W=yield(0,Ge.A)(G,16);if(W.id>0){let j=yield ue(W.id,t.id,t.userId,y,C),V=[];for(let J=0;J<j.length;J++)V.push(j[J].toTheConceptId);yield(0,w.Y)(V);for(let J=0;J<j.length;J++){let Z=j[J].toTheConceptId,le=yield(0,re.A)(Z),Ce=yield(0,d.Ez)(le.id);r.push(Ce)}}return ce.V.logUpdate(g),r})}function _e(b,o){var e=arguments;return we(this,arguments,void 0,function*(n,p,y=10,C=1){var x;const g=ce.V.logfunction("GetLinkRaw",e);let r=[],t=yield(0,re.A)(n),G=((x=t.type)===null||x===void 0?void 0:x.characterValue)+"_s_"+p,W=yield(0,Ge.A)(G,16);if(W.id>0){let j=yield ue(W.id,t.id,t.userId,y,C),V=[];for(let J=0;J<j.length;J++)V.push(j[J].toTheConceptId);for(let J=0;J<j.length;J++){let Z=j[J].toTheConceptId,le=yield(0,re.A)(Z);r.push(le)}}return ce.V.logUpdate(g),r})}var Oe=m(8357),je=m(1708),Qe=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};const Wt=new Map;function fn(b,o){var e=arguments;return Qe(this,void 0,void 0,function*(){const n=ce.V.logfunction("MakeTheTypeConceptApi",e);let p=(0,ne.o)();if(Wt.has(b))return Wt.get(b)||p;const y=Qe(this,void 0,void 0,function*(){try{if(p=yield(0,je.Az)(b),p.id==0||p.typeId==4){let C=(0,i.Xr)("application/x-www-form-urlencoded");const x=yield fetch(s.B.MakeTheTypeConceptUrl(),{method:"POST",headers:C,body:`type=${b}`});if(!x.ok)throw(0,u.ry)(x),new Error(`Error! status: ${x.status}`);p=yield x.json(),ce.V.logUpdate(n)}}catch(C){C instanceof Error?console.log("Make The Type Concept Api error : ",C.message):console.log("Make The Type Concept Api error : ",C),(0,u.Mb)(C,s.B.MakeTheTypeConceptUrl()),(0,u.ey)(n,"MakeTheTypeConceptApi",C)}finally{Wt.delete(b)}return p});return Wt.set(b,y),y})}var Br=m(8675),Gr=m(6058),Oo=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function Mo(b){var o=arguments;return Oo(this,void 0,void 0,function*(){const e=ce.V.logfunction("GetLinkerConnectionFromConcepts",o);let n=yield(0,Br.l)(b);for(let p=0;p<n.length;p++){let y=n[p],C=y.typeId,x=yield(0,re.A)(C);y.type=x}return ce.V.logUpdate(e),n})}function Po(b){var o=arguments;return Oo(this,void 0,void 0,function*(){const e=ce.V.logfunction("GetLinkerConnectionToConcepts",o);let n=yield(0,Gr.W)(b);for(let p=0;p<n.length;p++){let y=n[p],C=y.typeId,x=yield(0,re.A)(C);y.type=x}return ce.V.logUpdate(e),n})}var xr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})},Er=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})},Rr=m(6963),qn=m(2202),Dr=m(5457),Wr=m(991),Vo=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function Qn(b){var o=arguments;return Vo(this,void 0,void 0,function*(){const e=ce.V.logfunction("DeleteConceptById",o);if(be)try{return(yield Me("DeleteConceptById",{id:b})).data}catch(C){console.error("DeleteConceptById sw error: ",C),He(C)}if(b>0){var n=yield A.I.GetConcept(b);if(n.id>0){var p=n.typeId,y=n.characterValue;yield Dr.c.removeTypeConcept(p,b),yield Rr.f.removeNodeByCharacter(y,b),yield function(C){var x=arguments;return Er(this,void 0,void 0,function*(){let g=!1;const r=ce.V.logfunction("DeleteTheConcept",x);try{const t=new FormData;t.append("id",C.toString());let G=(0,i.BZ)();const W=yield fetch(s.B.DeleteConceptUrl(),{method:"POST",headers:G,body:t});W.ok?g=(yield W.json()).success:(console.log("Delete concept error",W.status),(0,u.ry)(W)),g&&A.I.AddNpc(C),ce.V.logUpdate(r)}catch(t){t instanceof Error?console.log("Delete concept error message: ",t.message):console.log("Delete concept unexpected error: ",t),(0,u.Mb)(t,s.B.DeleteConceptUrl()),(0,u.ey)(r,"DeleteTheConcept",t)}return g})}(b),yield qn.W.removeNodeFromTree(b),yield Wr.H.removeNodeFromTree(b)}}else L.v.RemoveConceptById(b);ce.V.logUpdate(e)})}function jo(b){return Vo(this,void 0,void 0,function*(){if(be)try{return(yield Me("DeleteUser",{id:b})).data}catch(o){console.error("DeleteUser sw error: ",o),He(o)}b>0?function(o){var e=arguments;xr(this,void 0,void 0,function*(){const n=ce.V.logfunction("DeleteUserInBackend",e);try{var p=(0,i.ab)("application/json","");let y=s.B.DeleteUserUrl();y=y+"?conceptId="+o+"&apiKey=freeschema";const C=yield fetch(y,{method:"POST",headers:p});if(C.ok){let x=yield C.json(),g=Number(x.data);return console.log("this is the delete email concept",g),Qn(g),ce.V.logUpdate(n),g}throw(0,u.ry)(C),new Error(`Delete composition Error! status: ${C.status}`)}catch(y){y instanceof Error?console.log("Delete composition error message: ",y.message):console.log("Delete composition unexpected error: ",y),(0,u.Mb)(y,s.B.DeleteConceptUrl()),(0,u.ey)(n,"DeleteUserInBackend",y)}})}(b):L.v.RemoveConceptById(b)})}var Fr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function Ho(b,o){return Fr(this,void 0,void 0,function*(){try{const e=new Headers;e.append("Authorization","Bearer "+o);const n=new FormData;n.append("id",b.toString());const p=yield fetch(s.B.DeleteConceptUrl(),{method:"POST",body:n,headers:e});if(!p.ok)throw(0,u.ry)(p),new Error(`Delete composition Error! status: ${p.status}`)}catch(e){e instanceof Error?console.log("Delete composition error message: ",e.message):console.log("Delete composition unexpected error: ",e),(0,u.Mb)(e,s.B.DeleteConceptUrl())}})}var kn=m(1735),Ft=m(8286),Ur=m(1596),Xe=m(3278),$o=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})},Or=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function Jo(b){var o=arguments;return Or(this,void 0,void 0,function*(){const e=ce.V.logfunction("GetConnectionById",o);if(console.log("AccessTracker activation status from GetConnectionById"),kn.J.activateStatus===!0)try{kn.J.incrementConnection(b)}catch{console.error("Error adding connection in access tracker"),ce.V.log("ERROR","Error Adding Connection")}if(be)try{return(yield Me("GetConnectionById",{id:b})).data}catch(p){console.error("GetConnectionById sw error: ",p),He(p)}let n=yield Ft.d.GetConnection(b);return n!=null&&n.id!=0||b==null||b==null||(n=yield function(p){var y=arguments;return $o(this,void 0,void 0,function*(){const C=ce.V.logfunction("GetConnection",y);let x=yield Ft.d.GetConnection(p);try{if(x.id!=0)return x;{const g=new FormData;g.append("id",p.toString());const r={method:"POST",headers:{Authorization:"Bearer "+Xe.b.BearerAccessToken},body:g};let t;try{t=yield fetch(s.B.GetConnectionUrl(),r)}catch{t=yield(0,Ur.g)(r,"/api/get-connection-by-id")}return yield function(G,W){return $o(this,void 0,void 0,function*(){G.ok?(W=yield G.json(),Ft.d.AddConnection(W)):((0,u.ry)(G),console.log("Get Connection Error",G.status))})}(t,x),ce.V.logUpdate(C),x}}catch(g){g instanceof Error?console.log("Get Connection error message: ",g.message):console.log("Get Connection unexpected error: ",g),(0,u.Mb)(g,s.B.GetConnectionUrl()),(0,u.ey)(C,"GetConnection",g)}})}(b)),ce.V.logUpdate(e),n})}var Mr=m(2212),Pr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})},Vr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function zo(b,o,e){return Vr(this,arguments,void 0,function*(n,p,y,C=4,x=999){const g=ce.V.logfunction("MakeTheTimestamp")||{};if(be){g.serviceWorker=!0;try{const V=yield Me("MakeTheTimestamp",{type:n,referent:p,userId:y,accessId:C,sessionInformationId:x});return ce.V.logUpdate(g),V.data}catch(V){console.error("MakeTheTimestamp sw error: ",V),(0,u.ey)(g,"MakeTheTimestamp",V),He(V)}}let r,t="",G=n.startsWith("the_"),W=(0,ne.o)();return t=G?n:"the_"+n,W=yield fn(t,y),r=yield function(V,J,Z,le,Ce,ie,Ie){return Pr(this,void 0,void 0,function*(){let Re=yield(0,Ge.A)(V,le),Pe=Re;return Pe.id==0&&(Re=yield(0,Mr.Ay)(V,J,4,le,0,ie,Ie),Pe=Re),Pe})}(p,y,0,W.id,0,C,t),ce.V.logUpdate(g),r})}class Xt{constructor(){this.composition=0,this.type="",this.linker="",this.inpage=10,this.page=1,this.listLinkers=[],this.fullLinkers=[],this.textSearch="",this.logic="or",this.reverse=!1,this.doFilter=!1,this.filterSearches=[],this.selectors=[],this.ofCompositions=[]}}var Ye=m(6687),Nn=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function qo(){var b=arguments;return Nn(this,arguments,void 0,function*(o=0,e=[],n="",p=[]){const y=ce.V.logfunction("RecursiveSearchApi",b)||{};let C=[];try{if(be){y.serviceWorker=!0;try{const G=yield Me("RecursiveSearchApi",{composition:o,listLinkers:e,textSearch:n,fullLinkers:p});return ce.V.logUpdate(y),G.data}catch(G){console.error("RecursiveSearchApi sw error: ",G),(0,u.ey)(y,"RecursiveSearchApi",G),He(G)}}let x=new Xt;x.composition=o,x.listLinkers=e,x.fullLinkers=p,x.textSearch=n;let g=JSON.stringify(x),r=(0,i.Xr)();const t=yield fetch(s.B.RecursiveSearchUrl(),{method:"POST",headers:r,body:g});if(t.ok){const G=yield t.json();let W=G.compositionIds,j=G.internalConnections;G.externalConnections,C=yield(0,Ye.p8)(W,j)}else console.log("recursive search error ",t.status),(0,u.ey)(y,"RecursiveSearchApi",t.status),(0,u.ry)(t);ce.V.logUpdate(y)}catch(x){x instanceof Error?console.log("recursive search error message: ",x.message):console.log("recursive search unexpected error: ",x),(0,u.ey)(y,"RecursiveSearchApi",x),(0,u.Mb)(x,s.B.RecursiveSearchUrl())}return C})}function Qo(){var b=arguments;return Nn(this,arguments,void 0,function*(o=0,e=[],n=""){const p=ce.V.logfunction("RecursiveSearchApiWithInternalConnections",b)||{};let y=[];try{if(be){p.serviceWorker=!0;try{const t=yield Me("RecursiveSearchApiWithInternalConnections",{composition:o,listLinkers:e,textSearch:n});return ce.V.logUpdate(p),t.data}catch(t){console.error("RecursiveSearchApiWithInternalConnections sw error: ",t),(0,u.ey)(p,"RecursiveSearchApiWithInternalConnections",t),He(t)}}let C=new Xt;C.composition=o,C.listLinkers=e,C.textSearch=n;let x=JSON.stringify(C),g=(0,i.Xr)();const r=yield fetch(s.B.RecursiveSearchUrl(),{method:"POST",headers:g,body:x});if(r.ok){const t=yield r.json();let G=t.compositionIds,W=t.internalConnections;t.externalConnections,y=yield(0,Ye.km)(G,W),ce.V.logUpdate(p)}else console.log("recursive search error ",r.status),(0,u.ey)(p,"GetCompositionConnectionsBetweenTwoConcepts",r.status),(0,u.ry)(r)}catch(C){C instanceof Error?console.log("recursive search error message: ",C.message):console.log("recursive search unexpected error: ",C),(0,u.ey)(p,"GetCompositionConnectionsBetweenTwoConcepts",C),(0,u.Mb)(C,s.B.RecursiveSearchUrl())}return y})}function Xn(){var b=arguments;return Nn(this,arguments,void 0,function*(o=0,e=[],n="",p=[]){const y=ce.V.logfunction("RecursiveSearchApiRaw",b)||{};try{if(be){y.serviceWorker=!0;try{const t=yield Me("RecursiveSearchApiRaw",{composition:o,listLinkers:e,textSearch:n,fullLinkers:p});return ce.V.logUpdate(y),t.data}catch(t){console.error("RecursiveSearchApiRaw sw error: ",t),(0,u.ey)(y,"RecursiveSearchApiRaw",t),He(t)}}let C=new Xt;C.composition=o,C.listLinkers=e,C.textSearch=n,C.fullLinkers=p;let x=JSON.stringify(C),g=(0,i.Xr)();const r=yield fetch(s.B.RecursiveSearchUrl(),{method:"POST",headers:g,body:x});if(r.ok){const t=yield r.json();return t.compositionIds,t.internalConnections,t.externalConnections,ce.V.logUpdate(y),t}return console.log("recursive search error ",r.status),(0,u.ey)(y,"RecursiveSearchApiRaw",r.status),(0,u.ry)(r),ce.V.logUpdate(y),[]}catch(C){C instanceof Error?console.log("recursive search error message: ",C.message):console.log("recursive search unexpected error: ",C),(0,u.ey)(y,"RecursiveSearchApiRaw",C),(0,u.Mb)(C,s.B.RecursiveSearchUrl())}})}function Xo(){var b=arguments;return Nn(this,arguments,void 0,function*(o=0,e=[],n=""){const p=ce.V.logfunction("RecursiveSearchApiRawFullLinker",b)||{};try{if(be){p.serviceWorker=!0;try{const r=yield Me("RecursiveSearchApiRawFullLinker",{composition:o,fullLinkers:e,textSearch:n});return ce.V.logUpdate(p),r.data}catch(r){console.error("RecursiveSearchApiRawFullLinker sw error: ",r),(0,u.ey)(p,"RecursiveSearchApiRawFullLinker",r),He(r)}}let y=new Xt;y.composition=o,y.fullLinkers=e,y.textSearch=n;let C=JSON.stringify(y),x=(0,i.Xr)();const g=yield fetch(s.B.RecursiveSearchUrl(),{method:"POST",headers:x,body:C});if(g.ok){const r=yield g.json();return r.compositionIds,r.internalConnections,r.externalConnections,ce.V.logUpdate(p),r}return console.log("recursive search error ",g.status),(0,u.ey)(p,"RecursiveSearchApiRawFullLinker",g.status),(0,u.ry)(g),ce.V.logUpdate(p),[]}catch(y){y instanceof Error?console.log("recursive search error message: ",y.message):console.log("recursive search unexpected error: ",y),(0,u.Mb)(y,s.B.RecursiveSearchUrl()),(0,u.ey)(p,"RecursiveSearchApiRawFullLinker",y)}})}function Yo(){var b=arguments;return Nn(this,arguments,void 0,function*(o=0,e=[],n=""){const p=ce.V.logfunction("RecursiveSearchApiRawFullLinker",b)||{};try{if(be)try{p.serviceWorker=!0;const r=yield Me("RecursiveSearchApiNewRawFullLinker",{composition:o,fullLinkers:e,textSearch:n});return ce.V.logUpdate(p),r.data}catch(r){console.error("RecursiveSearchApiNewRawFullLinker sw error: ",r),(0,u.ey)(p,"RecursiveSearchApiNewRawFullLinker",r),He(r)}let y=new Xt;y.composition=o,y.fullLinkers=e,y.textSearch=n;let C=JSON.stringify(y),x=(0,i.Xr)();const g=yield fetch(s.B.RecursiveSearchUrl(),{method:"POST",headers:x,body:C});if(g.ok){const r=yield g.json();return r.compositionIds,r.internalConnections,r.externalConnections,ce.V.logUpdate(p),r}return console.log("recursive search error ",g.status),(0,u.ey)(p,"RecursiveSearchApiNewRawFullLinker",g.status),(0,u.ry)(g),ce.V.logUpdate(p),[]}catch(y){y instanceof Error?console.log("recursive search error message: ",y.message):console.log("recursive search unexpected error: ",y),(0,u.Mb)(y,s.B.RecursiveSearchUrl()),(0,u.ey)(p,"RecursiveSearchApiNewRawFullLinker",y)}})}var Yn=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};const Zn=["image/jpeg","image/jpg","image/png","image/webp"],Kn=["application/msword","application/vnd.ms-excel","application/vnd.ms-powerpoint","text/plain","application/pdf"];function Zo(b,o){return Yn(this,void 0,void 0,function*(){const e=ce.V.logfunction("uploadAttachment");try{console.log("File Type",b.type);const n=new FormData;let p;if(Kn.includes(b.type))n.append("file",b,b.name),p=yield to(n,o);else{if(!Zn.includes(b.type))return{message:"Invalid File Format",success:!1};n.append("image",b,b.name),p=yield eo(n,o)}return p?.data?(ce.V.logUpdate(e),{message:"Upload Success",success:!0,url:p.data}):{message:"File Upload Failed",success:!1}}catch(n){throw console.error(n),(0,u.ey)(e,"uploadAttachment",n),n}})}function eo(b){return Yn(this,arguments,void 0,function*(o,e=""){const n=ce.V.logfunction("uploadImage");try{const p=yield fetch(s.B.uploadImageUrl(),{method:"POST",body:o,headers:{Authorization:`Bearer ${e}`}});if(!p.ok){const y=p.headers.get("content-type");y&&y.includes("text/plain")&&console.info(p?.text());const C=yield p?.text();return console.error(`${p.status} ${C}`),ce.V.logUpdate(n),null}return yield p.json()}catch(p){return console.error(p),(0,u.ey)(n,"uploadImage",p),null}})}function to(b){return Yn(this,arguments,void 0,function*(o,e=""){const n=ce.V.logfunction("uploadFile");try{const p=yield fetch(s.B.uploadFileUrl(),{method:"POST",body:o,headers:{Authorization:`Bearer ${e}`}});if(!p.ok){const y=p.headers.get("content-type");y&&y.includes("text/plain")&&console.info(p.text());const C=yield p.text();return console.error(`${p.status} ${C}`),null}return ce.V.logUpdate(n),yield p.json()}catch(p){return console.error(p),(0,u.ey)(n,"uploadFile",p),null}})}var yn=m(1239),Rn=m(7467),jr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function Ko(b,o){var e=arguments;return jr(this,void 0,void 0,function*(){const n=ce.V.logfunction("LoginToBackend",e);try{let p={email:b,password:o},y=new Headers;y.append("Content-Type","application/json");let C=JSON.stringify(p);const x=yield fetch(s.B.LoginUrl(),{method:"POST",headers:y,body:C}),g=yield x.json();if(x.ok)return Xe.b.BearerAccessToken=g.data.token,ce.V.logUpdate(n),g;console.log("Login tsccs error message: ",x.status),(0,u.ER)(x,g)}catch(p){p instanceof Error?console.log("Login tsccs error message: ",p.message):console.log(" Login tsccs  unexpected error: ",p),(0,u.Mb)(p,s.B.LoginUrl()),(0,u.ey)(n,"LoginToBackend",p)}})}var no=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function ei(b){return no(this,void 0,void 0,function*(){return yield function(){return no(this,arguments,void 0,function*(e="",n={}){let p={message:"success",status:!1,statusCode:200,data:"cannot signup"};try{const y=yield fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)}),C=yield y.json();return y.ok?p={message:"success",status:!0,statusCode:200,data:C}:(0,u.ER)(y,C),p}catch(y){console.log("Signup Error: ",y),(0,u.Mb)(y,e)}})}(s.B.SignupUrl(),b)})}function ti(b){return no(this,void 0,void 0,function*(){const o=s.B.NODE_URL,e=yield fetch(`${o}/api/v1/entity/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(e.ok)return e.json();throw e.status===404?new Error("404, Not found"):e.status===500?new Error("500, internal server error"):new Error(e.status)})}var Hr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function ni(b){return Hr(this,void 0,void 0,function*(){const o=JSON.stringify({email:b.email,password:b.password});let e={message:"success",status:!1,statusCode:200,data:""};const n=new Headers;n.append("Content-Type","application/json");const p=s.B.LoginUrl();try{const y=yield fetch(p,{method:"POST",headers:n,body:o,redirect:"follow"}),C=yield y.json();return y.ok?e={message:"success",status:!0,statusCode:200,data:C?.data}:(0,u.ER)(y,C),e}catch(y){console.log("Sign in api error",y),(0,u.Mb)(y,p)}})}var oo=m(9934),Dn=m(4485);function $r(b=[],o){Array.isArray(b)&&b.splice(b.findIndex(function(e){return e.id===o.id}),1)}function Jr(b=[],o){Array.isArray(b)&&b.splice(b.findIndex(function(e){return e.id===o.id}),1)}class io{constructor(o,e,n,p){this.expiryTime=new Date(Date.now()+6e5),this.height=1,this.key=o,this.value=e,this.leftNode=n,this.rightNode=p}isValid(){const o=new Date(Date.now());return!(this.expiryTime<o&&($t.removeNodeFromTree(this.key),1))}saveToCache(o){this.value.cached=o}addNode(o,e,n){if(e==null)return o;const p=e.leftNode,y=e.rightNode;if(e.key>o.key)e.leftNode=this.addNode(o,p,n);else{if(!(e.key<o.key))return this.isValid(),o;e.rightNode=this.addNode(o,y,n)}e.height=1+Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode));const C=this.getBalanceFactor(e);if(C>1&&e.leftNode){if(o.key<e.leftNode.key)return this.rightRotate(e);if(o.key>e.leftNode.key)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(C<-1&&e.rightNode){if(o.key>e.rightNode.key)return this.leftRotate(e);if(o.key<e.rightNode.key)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return this.isValid(),e}rightRotate(o){if(o){const e=o.leftNode;if(e){const n=e.rightNode;return o.leftNode=n,e.rightNode=o,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(o.rightNode))+1,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,e}}return o}leftRotate(o){if(o){const e=o.rightNode;if(e){const n=e.leftNode;return e.leftNode=o,o.rightNode=n,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(o.rightNode))+1,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(o.rightNode))+1,e}}return o}getHeight(o){return o?o.height:0}getBalanceFactor(o){return o==null?0:this.getHeight(o.leftNode)-this.getHeight(o.rightNode)}getFromNode(o,e){return e&&(o==e.key&&e.isValid()?e:o<e.key?this.getFromNode(o,e.leftNode):o>e.key?this.getFromNode(o,e.rightNode):e)}removeNode(o,e){if(o==null)return o;if(o.key>e)return o.leftNode=this.removeNode(o.leftNode,e),o;if(o.key<e)return o.rightNode=this.removeNode(o.rightNode,e),o;if(o.leftNode==null){const n=o.rightNode;return o=null,n}if(o.rightNode==null){const n=o.leftNode;return o=null,n}{const n=this.inOrderSuccessor(o.rightNode);return o.value=n.value,o.key=n.key,o.rightNode=this.removeNode(o.rightNode,n.key),o}}countNodeBelow(o){return o==null?0:1+this.countNodeBelow(o.leftNode)+this.countNodeBelow(o.rightNode)}inOrderSuccessor(o){for(;o.leftNode!=null;)o=o.leftNode;return o}}var oi=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};class $t{static addNodeToTree(o){if(this.root==null)return this.root=o,this.root;this.root=this.root.addNode(o,this.root,this.root.height)}static addCompositionToTree(o){const e=new io(o.id,o,null,null);this.addNodeToTree(e)}static getNodeFromTree(o){return oi(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(o,this.root):null})}static removeNodeFromTree(o){return oi(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,o))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}$t.root=null;var zr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function gn(b,o,e,n){return zr(this,arguments,void 0,function*(p,y,C,x,g=[]){var r,t;let G={};const W=[];if(p==0)return"";let j=ro(C,p);if(j!=null&&j.id!=0||p==null||p==null||(j=yield(0,re.A)(p)),j.id!=0&&j.type==null){const V=j.typeId;let J=ro(C,V);j.type=J,J==null&&V!=null&&V!=null&&(J=yield(0,re.A)(V),j.type=J)}if(!x.includes(p))return j?.characterValue;if(g.includes(p))return"";g.push(p);for(let V=0;V<y.length;V++)if(y[V].ofTheConceptId==p){const J=y[V].toTheConceptId;if(x.includes(p)){let Z=ro(C,J);if(Z!=null&&Z.id!=0||J==null||J==null||(Z=yield(0,re.A)(J)),Z.id!=0&&Z?.type==null){const ie=Z.typeId;let Ie=yield A.I.GetConcept(ie);Z.type=Ie,Ie==null&&ie!=null&&ie!=null&&(Ie=yield(0,re.A)(ie),Z.type=Ie)}const le="the_",Ce=((t=(r=Z?.type)===null||r===void 0?void 0:r.characterValue)!==null&&t!==void 0?t:"").replace(le,"");if(isNaN(Number(Ce))){if(Ce){const ie=yield gn(J,y,C,x,g);G[Ce]=ie}}else{const ie=yield gn(J,y,C,x,g);W[Ce]=ie,G=W}}}return G})}function ro(b,o){let e=(0,ne.o)();for(let n=0;n<b.length;n++)if(o==b[n].id)return e=b[n],e;return e}class An{constructor(){this.id=0,this.mainConcept=(0,ne.o)(),this.connections=[],this.concepts=[],this.subcompositions=[],this.cached={}}updateCache(){return o=this,e=void 0,p=function*(){if(this.mainConcept.id==0)for(let y=0;y<this.concepts.length;y++)this.concepts[y].id==this.id&&(this.mainConcept=this.concepts[y]);this.cached=yield gn(this.id,this.connections,this.concepts,this.subcompositions,[])},new((n=void 0)||(n=Promise))(function(y,C){function x(t){try{r(p.next(t))}catch(G){C(G)}}function g(t){try{r(p.throw(t))}catch(G){C(G)}}function r(t){var G;t.done?y(t.value):(G=t.value,G instanceof n?G:new n(function(W){W(G)})).then(x,g)}r((p=p.apply(o,e||[])).next())});var o,e,n,p}UpdateAcrossDistributedSystem(){var o,e;try{this.id!=0&&(e=(o=this.id)===null||o===void 0?void 0:o.toString(),s.B.MQTT_CONNECTION&&s.B.MQTT_CONNECTION.publish("compositionUpdate",e))}catch(n){console.log("Error while publishing message",n)}}isUpdating(){this.UpdateAcrossDistributedSystem()}GetDataCache(){var o,e,n;const p={};p[(n=(e=(o=this.mainConcept)===null||o===void 0?void 0:o.type)===null||e===void 0?void 0:e.characterValue)!==null&&n!==void 0?n:""]=this.cached;const y={};return y.data=p,y.id=this.id,y}}var qr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function Ln(b){return qr(this,arguments,void 0,function*(o,e=null,n=null,p=null,y=null,C=null,x=null,g=null){const r=y??999,t=C??4,G=x??999;let W=p??0,j=(0,ne.o)();g==null&&(g=new An);for(const V in o)if(typeof o[V]=="object"||Array.isArray(o[V])){const J=yield(0,ke.A)(V,"",!0,r,t,G);if(e==null&&n==null){let Z=W;j=J,Z=J.id,W=J.id,g.concepts.push(J),g.id=J.id,yield Ln(o[V],J.id,J.userId,Z,y,C,x,g)}else{const Z=e??999,le=n??999,Ce=W;j=J,g.concepts.push(J);const ie=yield(0,Te.q)(Z,le,J.id,Ce);g.connections.push(ie),yield Ln(o[V],J.id,J.userId,Ce,y,C,x,g)}o[V]!=null&&o[V]!=null&&g.subcompositions.push(J.id)}else{const J=e??999,Z=n??999,le=W,Ce=yield(0,ke.A)(V,o[V],!1,r,t,G);g.concepts.push(Ce);const ie=yield(0,Te.q)(J,Z,Ce.id,le);g.connections.push(ie)}return j})}var Qr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function ii(b){return Qr(this,void 0,void 0,function*(){const o=ce.V.logfunction("UpdateComposition")||{};if(be){o.serviceWorker=!0;try{const ie=yield Me("UpdateComposition",{patcherStructure:b});return ce.V.logUpdate(o),ie.data}catch(ie){console.error("UpdateComposition sw error: ",ie),(0,u.ey)(o,"UpdateComposition",ie),He(ie)}}const e=b.userId,n=b.sessionId,p=b.accessId;let y=[];const C=[];let x=(0,ne.o)(),g=(0,ne.o)();const r=[];let t=b.compositionId;const G=b.ofTheCompositionId;let W=[];if(t<0){let ie=yield(0,re.A)(t,e);if(!(ie.id>0))return null;t=ie.id}y=yield(0,Q.s)(t);const j=[],V=new An,J=[];V.id=t,V.isUpdating();let Z=[];for(let ie=0;ie<y.length;ie++)(0,oo.A)(J,y[ie].ofTheConceptId),(0,oo.A)(j,y[ie].ofTheConceptId),(0,oo.A)(j,y[ie].toTheConceptId),Z.push(y[ie].ofTheConceptId);V.subcompositions=J,V.connections=y;for(let ie=0;ie<j.length;ie++){const Ie=yield(0,re.A)(j[ie]);t==j[ie]&&(x=Ie),G==j[ie]&&(g=Ie),C.push(Ie)}const le=b.patchObject;for(const ie in le){let Ie=(0,ne.o)();const Re=le[ie];let Pe=x;if(g.id>0&&(Pe=g),Array.isArray(Re)||typeof Re=="object"){Ie=yield(0,ke.A)(ie,"",!0,x.userId,4,999),V.subcompositions.push(Ie.id);const $e=(0,Dn.vo)(C,Ie);for(let qe=0;qe<$e.length;qe++)if($e[qe].id>0){const ot=(0,Dn.wS)(V.connections,$e[qe].id);W=W.concat(ot),r.push($e[qe])}yield Ln(le[ie],Ie.id,Ie.userId,x.id,x.userId,4,999,V)}else{Ie=yield(0,ke.A)(ie,Re,!1,e,p,n);const $e=(0,Dn.vo)(C,Ie);for(let qe=0;qe<$e.length;qe++)if($e[qe].id>0){const ot=(0,Dn.wS)(V.connections,$e[qe].id);W=W.concat(ot),r.push($e[qe])}}const Ve=(0,Te.q)(Pe.id,Pe.userId,Ie.id,x.id);C.push(Ie),V.connections.push(Ve)}for(let ie=0;ie<W.length;ie++)Jr(V.connections,W[ie]),(0,se.m)(W[ie].id);for(let ie=0;ie<r.length;ie++)$r(C,r[ie]);V.concepts=V.concepts.concat(C),V.mainConcept=x,V.id=x.id,yield V.updateCache(),$t.addCompositionToTree(V),Y.Y.SyncDataOnline();let Ce=V.GetDataCache();return ce.V.logUpdate(o),Ce})}var Xr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function ri(b,o,e,n){return Xr(this,arguments,void 0,function*(p,y,C,x,g=10,r=1){var t=(0,i.ab)("application/x-www-form-urlencoded",x),G=new URLSearchParams;G.append("type",p),G.append("search",y),G.append("composition",C),G.append("inpage",g.toString()),G.append("page",r.toString());const W=s.B.SearchCompositionsUrl()+"?"+G.toString();try{const j=yield fetch(W,{method:"GET",headers:t});return j.ok?yield j.json():((0,u.ry)(j),[])}catch(j){console.log("This is the searching error",j),(0,u.Mb)(j,W)}})}var Yr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function ci(b){return Yr(this,arguments,void 0,function*(o,e=""){var n=(0,i.ab)("application/json",e);const p=s.B.SearchLinkMultipleAll(),y=JSON.stringify(o);try{const C=yield fetch(p,{method:"POST",headers:n,body:y});return C.ok?yield C.json():(console.log("This is the searching error",C.status),(0,u.ry)(C),[])}catch(C){console.log("This is the searching error",C),(0,u.Mb)(C,p)}})}var si=m(7139),Sn=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function ai(b){return Sn(this,arguments,void 0,function*(o,e=[]){var n,p;let y=[];const C=[];let x={},g={};const r=yield $t.getNodeFromTree(o),t=[];let G=yield A.I.GetConcept(o);if(G.id==0&&o!=null&&o!=null&&(G=yield(0,si.r)(o)),r==null){let W=[];W=e.length>0?li(o,e):yield(0,Q.s)(o),y=W;for(let V=0;V<y.length;V++)t.includes(y[V].ofTheConceptId)||(t.push(y[V].ofTheConceptId),C.push(y[V].ofTheConceptId)),C.includes(y[V].toTheConceptId)||C.push(y[V].toTheConceptId);ui(G,y,C,t);let j=[];g=yield(0,d.zN)(o,y,t,j),x[(p=(n=G?.type)===null||n===void 0?void 0:n.characterValue)!==null&&p!==void 0?p:""]=g}else g=r.value.GetDataCache(),x=g;return G.id==0?"":x})}function li(b,o){const e=[];for(let n=0;n<o.length;n++)o[n].typeId==b&&e.push(o[n]);return e}function co(b){return Sn(this,arguments,void 0,function*(o,e=[]){var n,p;let y={},C=[];const x=[];let g;const r={},t=yield $t.getNodeFromTree(o),G=[];let W=yield A.I.GetConcept(o);if(W.id==0&&o!=null&&o!=null&&(W=yield(0,si.r)(o)),t==null){let j=[];j=e.length>0?li(o,e):yield(0,Q.s)(o),C=j;for(let V=0;V<C.length;V++)G.includes(C[V].ofTheConceptId)||(G.push(C[V].ofTheConceptId),x.push(C[V].ofTheConceptId)),x.includes(C[V].toTheConceptId)||x.push(C[V].toTheConceptId);ui(W,C,x,G),g=yield(0,d.zN)(o,C,G),r[(p=(n=W?.type)===null||n===void 0?void 0:n.characterValue)!==null&&p!==void 0?p:""]=g,y.created_at=W.entryTimeStamp,y.data=r,y.id=o}else g=t.value.GetDataCache(),y=g;return W.id==0?"":y})}function di(b,o){return Sn(this,void 0,void 0,function*(){let e=[];const n=[];e=yield(0,Rn.j)(o);for(let p=0;p<b.length;p++){const y=yield co(b[p],e);y&&n.push(y)}return n})}function ui(b,o,e,n){return Sn(this,void 0,void 0,function*(){const p=new An,y=yield function(x){return Sn(this,void 0,void 0,function*(){let g=[];const r=[];for(let t=0;t<x?.length;t++){const G=yield A.I.GetConcept(x[t]);G.id==0?r.push(x[t]):g.push(G)}return r?.length==0||(g=yield(0,yn.I)(r)),g})}(e);p.connections=o,p.concepts=y,p.id=b.id,p.subcompositions=n,p.mainConcept=b;const C=yield gn(b.id,o,y,n,[]);p.cached=C,$t.addCompositionToTree(p)})}var Zr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function hi(b){return Zr(this,void 0,void 0,function*(){try{var o=(0,i.Xr)();const e=JSON.stringify(b),n=yield fetch(s.B.CreateSessionId(),{method:"POST",headers:o,body:e});return n.ok?n.json():(console.log("Creating session failed",yield n.json()),(0,u.ry)(n),null)}catch(e){console.log("Creating session failed",e),(0,u.Mb)(e,s.B.CreateSessionId())}})}var Kr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function pi(b,o){return Kr(this,void 0,void 0,function*(){try{var e=(0,i.Xr)("application/x-www-form-urlencoded");const n=new URLSearchParams;n.append("sessionId",b.toString()),n.append("url",o);const p=yield fetch(s.B.CreateSessionVisitUrl(),{method:"POST",headers:e,body:n});return p.ok?p.json():(console.log("Creating session url failed",yield p.json()),(0,u.ry)(p),null)}catch(n){console.log("Creating session url failed",n),(0,u.Mb)(n,s.B.CreateSessionVisitUrl())}})}var ec=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function fi(b,o,e){return ec(this,arguments,void 0,function*(n,p,y,C=10,x=1){let g=[];try{var r=new URLSearchParams;r.append("typeId",`${n}`),r.append("toTheConceptId",`${p}`),r.append("userId",`${y}`),r.append("inpage",`${C}`),r.append("page",`${x}`);var t=(0,i.Xr)("application/x-www-form-urlencoded");const G=yield fetch(s.B.GetAllConnectionsToConceptUrl(),{method:"POST",headers:t,body:r});return G.ok?g=yield G.json():(console.log("Get connection of concept error",G.status),(0,u.ry)(G)),g}catch(G){throw G instanceof Error?console.log("Get connection of concept  error message: ",G.message):console.log("Get connection of concept unexpected error: ",G),G}})}var yi=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function so(b,o){var e=arguments;return yi(this,arguments,void 0,function*(n,p,y=10,C=1,x=!1){const g=ce.V.logfunction("GetRelation",e)||{};if(be){g.serviceWorker=!0;try{const V=yield Me("GetRelation",{id:n,relation:p,inpage:y,page:C,reverse:x});return ce.V.logUpdate(g),V.data}catch(V){console.error("GetRelation error sw: ",V),(0,u.ey)(g,"GetRelation",V),He(V)}}let r=[],t=yield(0,re.A)(n),G=yield(0,je.Az)(p),W=[];if(G.id>0)if(x){W=yield fi(G.id,t.id,t.userId,y,C);let V=[];for(var j=0;j<W.length;j++)V.push(W[j].ofTheConceptId);yield(0,w.Y)(V);for(let J=0;J<W.length;J++){let Z=W[J].ofTheConceptId,le=yield(0,re.A)(Z),Ce=yield(0,d.Ez)(le.id);r.push(Ce)}}else{W=yield ue(G.id,t.id,t.userId,y,C);let V=[];for(let J=0;J<W.length;J++)V.push(W[J].toTheConceptId);yield(0,w.Y)(V);for(let J=0;J<W.length;J++){let Z=W[J].toTheConceptId,le=yield(0,re.A)(Z),Ce=yield(0,d.Ez)(le.id);r.push(Ce)}}return ce.V.logUpdate(g),r})}function gi(b,o){var e=arguments;return yi(this,arguments,void 0,function*(n,p,y=10,C=1,x=!1){const g=ce.V.logfunction("GetRelationRaw",e)||{};if(be){g.serviceWorker=!0;try{const J=yield Me("GetRelationRaw",{id:n,relation:p,inpage:y,page:C,reverse:x});return ce.V.logUpdate(g),J.data}catch(J){console.error("GetRelationRaw error sw: ",J),(0,u.ey)(g,"GetRelationRaw",J),He(J)}}let r=[],t=yield(0,re.A)(n),G=yield(0,je.Az)(p),W=[],j=[];if(G.id>0){if(x){W=yield fi(G.id,t.id,t.userId,y,C);for(var V=0;V<W.length;V++)j.push(W[V].ofTheConceptId)}else{W=yield ue(G.id,t.id,t.userId,y,C);for(let J=0;J<W.length;J++)j.push(W[J].toTheConceptId)}r=yield(0,yn.r)(j)}return ce.V.logUpdate(g),r})}var ao=m(6416),Gt=m(4711);class tc{constructor(o,e,n,p){this.value=[],this.height=1,this.key=o,this.value.push(e),this.leftNode=n,this.rightNode=p}addNode(o,e,n){if(e==null)return o;var p=e.leftNode,y=e.rightNode;if(e.key>o.key)e.leftNode=this.addNode(o,p,n);else{if(!(e.key<o.key))return e.value.push(...o.value),e;e.rightNode=this.addNode(o,y,n)}e.height=1+Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let C=this.getBalanceFactor(e);if(C>1&&e.leftNode){if(o.key<e.leftNode.key)return this.rightRotate(e);if(o.key>e.leftNode.key)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(C<-1&&e.rightNode){if(o.key>e.rightNode.key)return this.leftRotate(e);if(o.key<e.rightNode.key)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}rightRotate(o){if(o){let e=o.leftNode;if(e){let n=e.rightNode;return o.leftNode=n,e.rightNode=o,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(o.rightNode))+1,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,e}}return o}leftRotate(o){if(o){let e=o.rightNode;if(e){let n=e.leftNode;return e.leftNode=o,o.rightNode=n,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(o.rightNode))+1,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(o.rightNode))+1,e}}return o}getHeight(o){return o?o.height:0}getBalanceFactor(o){return o==null?0:this.getHeight(o.leftNode)-this.getHeight(o.rightNode)}getFromNode(o,e){return e&&(o==e.key?e:o<e.key?this.getFromNode(o,e.leftNode):o>e.key?this.getFromNode(o,e.rightNode):e)}removeNode(o,e){if(o==null)return o;if(o.key>e)return o.leftNode=this.removeNode(o.leftNode,e),o;if(o.key<e)return o.rightNode=this.removeNode(o.rightNode,e),o;if(o.leftNode==null){let p=o.rightNode;return o=null,p}if(o.rightNode==null){let p=o.leftNode;return o=null,p}var n=this.inOrderSuccessor(o.rightNode);return o.value=n.value,o.key=n.key,o.rightNode=this.removeNode(o.rightNode,n.key),o}countNodeBelow(o){return o==null?0:1+this.countNodeBelow(o.leftNode)+this.countNodeBelow(o.rightNode)}inOrderSuccessor(o){for(;o.leftNode!=null;)o=o.leftNode;return o}}var lo=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};class Yt{static compositeKey(o,e){return("0000"+o.toString(16).toUpperCase()).slice(-4)+("0000"+e.toString(16).toUpperCase()).slice(-4)}static addNodeToTree(o){if(this.root==null)return this.root=o,this.root;this.root=this.root.addNode(o,this.root,this.root.height)}static waitForDataToLoad(){return lo(this,void 0,void 0,function*(){return new Promise((o,e)=>{this.checkFlag(o),setTimeout(()=>{e("not")},25e3)})})}static checkFlag(o){if(c.B.isDataLoaded)return o("done");setTimeout(Yt.checkFlag,1e3,o)}static addConceptToTree(o,e,n=999){let p=this.compositeKey(e,n);var y=new tc(p,o,null,null);this.addNodeToTree(y)}static getNodeFromTree(o,e){return lo(this,void 0,void 0,function*(){let n=this.compositeKey(o,e);return this.root?this.root.getFromNode(n,this.root):null})}static removeNodeFromTree(o){return lo(this,arguments,void 0,function*(e,n=999){if(this.root){let p=this.compositeKey(e,n);this.root=this.root.removeNode(this.root,p)}})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}Yt.root=null;var vi=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function mi(b,o){return vi(this,arguments,void 0,function*(e,n,p=999){let y=yield Yt.getNodeFromTree(e,p),C=(0,ao.u)();if(y)for(let x=0;x<y.value.length;x++){let g=y.value[x];g.ghostId==n&&(C=g)}return C})}function Ci(b,o){return vi(this,arguments,void 0,function*(e,n,p=999){Yt.addConceptToTree(e,n,p)})}var Zt=m(5312),uo=m(1213),Ti=m(3729),nc=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})},oc=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function wi(b,o,e){return oc(this,void 0,void 0,function*(){try{if(be)try{return(yield Me("GetRelationLocal",{id:b,relation:o,userId:e})).data}catch(C){console.error("GetRelationLocal error sw: ",C),He(C)}let n=yield(0,a.$I)(o),p=[];n.id!=0&&(p=yield function(C,x){return nc(this,void 0,void 0,function*(){try{return yield R.G.GetConnectionOfCompositionAndTypeLocal(x,C)}catch(g){throw g}})}(b,n.id));let y=[];for(let C=0;C<p.length;C++){let x=yield O(p[C].toTheConceptId);y.push(x)}return y}catch(n){throw n}})}var ic=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function ho(b){return ic(this,void 0,void 0,function*(){let o=[];try{var e=(0,i.Xr)();const n=yield fetch(s.B.ViewInternalDataUrl(),{method:"POST",headers:e,body:JSON.stringify(b)});if(n.ok){let p=yield n.json(),y={};for(let C=0;C<p.length;C++){let x=p[C].concepts;o=p[C].connections;let g=p[C].id;(0,yn.r)(x),y[g]=o}return y}return console.log("View Internal Data error",n.status),(0,u.ry)(n),o}catch(n){throw n instanceof Error?console.log(" This is the view internal data error message: ",n.message):console.log(" This is the view internal data unexpected error: ",n),n}})}var rc=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function po(b){return rc(this,void 0,void 0,function*(){var o;try{let e=yield ho(b),n=[];for(let p=0;p<b.length;p++){let y=b[p],C=e[y];if(y&&C){let x=[],g={};for(let t=0;t<C.length;t++)x.includes(C[t].ofTheConceptId)||x.push(C[t].ofTheConceptId);let r=yield(0,d.zN)(y,C,x);g.data=r,g.id=y,n.push(g)}else{let x={};x.id=y;let g=yield(0,re.A)(y),r={};g.type&&(r[(o=g?.type)===null||o===void 0?void 0:o.characterValue]=g.characterValue,x.data=r,n.push(x))}}return n}catch(e){throw e}})}var Wn=m(176),Ii=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})},ki=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function Ni(b){return ki(this,arguments,void 0,function*(o,e=""){try{let n=yield function(p){return Ii(this,arguments,void 0,function*(y,C=""){var x=(0,i.ab)("application/json",C);let g=s.B.SearchInternalWithAuthenticatedCcsUrl();g=g+"?composition="+y.composition+"&search="+y.search+"&internalComposition="+y.internalComposition+"&type="+y.type+"&inpage="+y.inpage+"&page="+y.page;try{const r=yield fetch(g,{method:"GET",headers:x});return r.ok?yield r.json():(console.log("This is the searching internal error",r.status),(0,u.ry)(r),[])}catch(r){console.log("This is the searching internal error",r),(0,u.Mb)(r,g)}})}(o,e);return yield po(n)}catch(n){throw n}})}function Ai(b){return ki(this,arguments,void 0,function*(o,e=""){try{return yield function(n){return Ii(this,void 0,void 0,function*(){var p=(0,i.ab)("application/json","");let y=s.B.SearchInternalWithCcsUrl();y=y+"?composition="+n.composition+"&search="+n.search+"&internalComposition="+n.internalComposition+"&type="+n.type+"&inpage="+n.inpage+"&page="+n.page;try{const C=yield fetch(y,{method:"GET",headers:p});return C.ok?yield C.json():(console.log("This is the searching internal error",C.status),(0,u.ry)(C),[])}catch(C){console.log("This is the searching internal error",C),(0,u.Mb)(C,y)}})}(o)}catch(n){throw n}})}var fo=m(8095),cc=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function Li(b){return cc(this,void 0,void 0,function*(){if(be)try{return(yield Me("DeleteConceptLocal",{id:b})).data}catch(e){console.error("DeleteConceptLocal error sw: ",e),He(e)}let o=yield(0,uo.f)(b);L.v.RemoveConcept(o)})}var Si=m(2803),sc=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function _i(b,o,e,n){return sc(this,arguments,void 0,function*(p,y,C,x,g=!0){var r,t;const G=ce.V.logfunction("GetConnectionBetweenTwoConceptsLinker")||{};if(be){G.serviceWorker=!0;try{const V=yield Me("GetConnectionBetweenTwoConceptsLinker",{ofTheConcept:p,toTheConcept:y,linker:C,fullLinker:x,forward:g});return ce.V.logUpdate(G),V.data}catch(V){console.error("GetConnectionBetweenTwoConceptsLinker sw error: ",V),(0,u.ey)(G,"GetConnectionBetweenTwoConceptsLinker",V),He(V)}}let W=(0,ne.o)();if(C!=""){let V="";V=g?((r=p.type)===null||r===void 0?void 0:r.characterValue)+"_s_"+C+"_s":((t=y.type)===null||t===void 0?void 0:t.characterValue)+"_s_"+C+"_by",W=yield(0,ke.A)("connection",V,!1,999)}x!=""&&(W=yield fn(x,999));let j=[];return j=g?yield(0,Si.x)(p.id,y.id,W.id):yield(0,Si.x)(y.id,p.id,W.id),ce.V.logUpdate(G),j})}function bi(b,o){return new Promise((e,n)=>{setTimeout(()=>{e(o)},b)})}var Ue=m(3130);const Bi=3,Gi=4,xi=5;var ac=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function yo(b,o){return ac(this,arguments,void 0,function*(e,n,p=""){let y=s.B.SearchAllTypeWithLinker(e.auth);var C=(0,i.ab)("application/json",p);y=y+"?search="+e.search+"&type="+e.type+"&inpage="+e.inpage+"&page="+e.page;const x=JSON.stringify(n);try{const g=yield fetch(y,{method:"POST",headers:C,body:x});return g.ok?yield g.json():((0,u.ry)(g),console.log("This is the searching multiple error",g.status),[])}catch(g){console.log("This is the searching SearchWithTypeAndLinker error",g),(0,u.Mb)(g,y)}})}var Jt=m(4287);class go extends Jt.w{constructor(o,e,n=Ue.y0){super(),this.searchQuery=[],this.format=Ue.y0,this.searchQuery=o,this.format=n}bind(){return o=this,e=void 0,p=function*(){return this.data=yield(0,Zt.cf)(this.searchQuery,"",this,this.format),this.mainConcept=this.searchQuery[0].composition,this.listenToEvent(this.mainConcept),console.log("this is the data",this.data),this.data},new((n=void 0)||(n=Promise))(function(y,C){function x(t){try{r(p.next(t))}catch(G){C(G)}}function g(t){try{r(p.throw(t))}catch(G){C(G)}}function r(t){var G;t.done?y(t.value):(G=t.value,G instanceof n?G:new n(function(W){W(G)})).then(x,g)}r((p=p.apply(o,e||[])).next())});var o,e,n,p}}function Ei(b,o,e=Ue.y0){return new go(b,o??"",e)}var Ri=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};class lc extends Jt.w{constructor(o,e=Ue.ZJ){super(),this.id=o,this.format=e}bind(){return Ri(this,void 0,void 0,function*(){if(!this.isDataLoaded){let o=yield(0,d.hL)(this.id);this.mainConcept=this.id,this.compositionIds=o.compositionList;let e=o.connectionList;for(let n=0;n<e.length;n++)this.internalConnections.push(e[n].id);this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return Ri(this,void 0,void 0,function*(){let o=[],e=this.internalConnections;for(let n=0;n<e.length;n++)o.push(yield Ft.d.GetConnection(e[n]));return this.format==Ue.ZJ?this.data=yield(0,d.ay)(this.mainConcept,o,this.compositionIds):this.format==Ue.y0?this.data=yield(0,d.$V)(this.mainConcept,o,this.compositionIds):this.format==Ue.yv?this.data=yield(0,d.re)(this.mainConcept,o,this.compositionIds):this.data=yield(0,d.ay)(this.mainConcept,o,this.compositionIds),this.data})}}function Di(b,o=Ue.ZJ){return new lc(b,o)}var Wi=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};class dc extends Jt.w{constructor(o,e,n,p,y){super(),this.data=[],this.startPage=0,this.compositionName=o,this.userId=e,this.inpage=n,this.page=p,this.format=y}bind(){return Wi(this,void 0,void 0,function*(){if(!this.isDataLoaded){var o=yield(0,l.A)(this.compositionName);if(o){yield I(this.compositionName,this.userId);let p=yield A.I.GetConceptsByTypeIdAndUser(o.id,this.userId);for(var e=this.inpage*(this.page-1),n=e;n<e+this.inpage;n++)p[n]&&this.compositionIds.push(p[n].id)}yield(0,w.Y)(this.compositionIds),this.isDataLoaded=!0,this.listenToEventType(o.id);for(let p=0;p<this.compositionIds.length;p++)this.listenToEvent(this.compositionIds[p])}return yield this.build()})}build(){return Wi(this,void 0,void 0,function*(){if(this.data=[],this.format==Ue.ZJ){for(let o=this.startPage;o<this.startPage+this.inpage;o++)if(this.compositionIds[o]){let e=yield(0,d.kx)(this.compositionIds[o]);this.data.push(e)}}else if(this.format==Ue.y0){for(let o=this.startPage;o<this.startPage+this.inpage;o++)if(this.compositionIds[o]){let e=yield(0,d.RW)(this.compositionIds[o]);this.data.push(e)}}else if(this.format==Ue.yv){for(let o=this.startPage;o<this.startPage+this.inpage;o++)if(this.compositionIds[o]){let e=yield(0,d.XI)(this.compositionIds[o]);this.data.push(e)}}else for(let o=this.startPage;o<this.startPage+this.inpage;o++)if(this.compositionIds[o]){let e=yield(0,d.kx)(this.compositionIds[o]);this.data.push(e)}return this.data})}}function Fi(b,o,e,n,p=Ue.ZJ){return new dc(b,o,e,n,p)}var Kt=m(7106),Ui=m(5328),vo=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};class uc extends Jt.w{constructor(o,e,n="",p){super(),this.searchText="",this.connections=[],this.externalConnectionIds=[],this.data=[],this.mainConcept=o,this.searchLinkers=e,this.textSearch=n,p&&(this.format=p)}listenToEvent(o){window.addEventListener(`${o}`,e=>{if(this.isUpdating)console.log("rejected this");else{this.isUpdating=!0;let n=this;setTimeout(function(){return vo(this,void 0,void 0,function*(){let p=yield Ft.d.GetConnectionByOfTheConceptAndType(o,o);for(let y=0;y<p.length;y++)yield Ft.d.GetConnection(p[y]).then(C=>{C.typeId==n.mainConcept?n.internalConnections.includes(C.id)||n.internalConnections.push(C.id):n.linkers.includes(C.id)||n.linkers.push(C.id),n.conceptIds.includes(C.toTheConceptId)||n.conceptIds.push(C.toTheConceptId),n.compositionIds.includes(C.ofTheConceptId)||n.compositionIds.push(C.ofTheConceptId),n.compositionIds.includes(C.toTheConceptId)||n.compositionIds.push(C.toTheConceptId)});n.isUpdating=!1,yield n.bind(),n.notify()})},200)}})}bind(){return vo(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;const o=yield Xn(this.mainConcept,this.searchLinkers,this.textSearch);this.compositionIds=o.compositionIds||[],this.internalConnections=o.internalConnections||[],this.externalConnectionIds=o.externalConnections||[],this.linkers=this.externalConnectionIds,this.connections=yield(0,Rn.j)(this.externalConnectionIds);for(let e=0;e<this.compositionIds.length;e++)this.listenToEvent(this.compositionIds[e]);this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return vo(this,void 0,void 0,function*(){return this.externalConnectionIds=this.linkers,this.format&&this.format==Ue.XZ?this.data={compositionIds:this.compositionIds,internalConnections:this.internalConnections,externalConnections:this.externalConnectionIds}:this.data=yield(0,Ye.p8)(this.compositionIds,this.internalConnections),this.data})}}function Oi(b,o,e="",n){return new uc(b,o,e,n)}var mo=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};class hc extends Jt.w{constructor(o,e,n,p=Ue.y0){super(),this.searchQuery=[],this.format=Ue.y0,this.mainCompositionIds=[],this.searchCharacter="",this.token="",this.searchStructure=o,this.searchQuery=e,this.searchQuery[0].type=o.composition,this.searchCharacter=o.composition,this.format=p,this.token=Xe.b.BearerAccessToken}listenToEventType(o){window.addEventListener(`${o}`,e=>{if(this.isUpdating)console.log("rejected this");else{this.isUpdating=!0;let n=this;setTimeout(function(){return mo(this,void 0,void 0,function*(){let p=e;n.mainCompositionIds.includes(p?.detail)||(n.mainCompositionIds.unshift(p?.detail),n.conceptIds.push(p?.detail),n.listenToEvent(p?.detail),Ft.d.GetConnectionsOfConcept(p?.detail).then(y=>{for(let C=0;C<y.length;C++)n.linkers.push(y[C].id)})),n.isUpdating=!1,yield n.bind(),n.notify()})},200)}})}bind(){return mo(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;var o=yield(0,l.A)(this.searchCharacter);let e=yield yo(this.searchStructure,this.searchQuery,this.token);this.conceptIds=e.compositionIds,this.internalConnections=e.internalConnections,this.linkers=e.linkers,this.reverse=e.reverse,this.mainCompositionIds=e.mainCompositionIds,this.listenToEventType(o.id);for(let n=0;n<this.mainCompositionIds.length;n++)this.listenToEvent(this.mainCompositionIds[n])}return yield this.build()})}build(){return mo(this,void 0,void 0,function*(){return yield(0,yn.r)(this.conceptIds),this.format==Ue.y0?this.data=yield(0,Kt.yV)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse):this.data=yield(0,Kt._W)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse),this.data})}}function Mi(b,o,e,n=Ue.y0){return new hc(b,o,e,n)}var Pi=m(2615);class Vi{constructor(o,e,n,p,y,C,x,g=!1,r,t,G){this.structureType="lconcept",this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=s.B.getRandomizer(),this.id=o,this.userId=e,this.typeId=n,this.ghostId=o,this.categoryId=p,this.characterValue=C,this.accessId=y,this.type=null,this.isNew=g,this.typeCharacter=x,this.entryTimeStamp=r,this.updatedTimeStamp=t,this.isSynced=!1,this.referentId=G}getType(){console.log(this.typeId)}}class ji{constructor(o,e,n,p,y,C){this.isTemp=!1,this.applicationId=s.B.getRandomizer(),this.type=(0,ne.o)(),this.id=o,this.ofTheConceptId=e,this.toTheConceptId=n,this.typeId=p,this.ghostId=o,this.orderId=y,this.typeCharacter="",this.accessId=C,this.typeCharacter="",this.entryTimeStamp=(0,ne.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date}}class Hi{constructor(){this.compositionId=0,this.userId=999,this.sessionId=999,this.accessId=4,this.ofTheCompositionId=0,this.patchObject={}}}class $i{constructor(){this.id="0",this.remote_address="",this.server_port="",this.server_address="",this.server_name="",this.server_software="",this.http_user_agent="",this.self="",this.port="",this.userId="",this.email=""}}var en=m(628);class Fn{constructor(){this.type="",this.search="",this.logicoperator="=",this.index=0,this.composition=!0,this.name="",this.operateon=""}}class Ji{constructor(){this.type="",this.search="",this.composition="",this.internalComposition="",this.userId=999,this.inpage=10,this.page=1,this.auth=!0}}var zi=m(7887),qi=m(3075),pc=m(7869),Qi=m(9635),ce=m(9700);class fc{static initialize(){try{console.warn("Initialized Application Monitoring for tracking errors..."),this.initGlobalErrorHandlers(),this.logCatchError(),this.logErrorEvent(),this.logUnhandledError(),this.logUserInteractions(),this.logNetworkRequests(),this.logRouteChanges(),this.logPerformanceMetrics(),this.logWebSocketEvents()}catch(o){console.error("Error during Application Monitoring initialization:",o)}}static initGlobalErrorHandlers(){try{if(console.log("this is the window",window),typeof window===void 0)return;const o=Xe.b.sessionId||"unknown";window.onerror=(e,n,p,y,C)=>{const x={message:e,source:n,lineno:p,colno:y,stack:C?.stack||"undefined",requestFrom:s.B.BASE_APPLICATION,sessionId:o};ce.V.logApplication("ERROR","Runtime Error",x),ce.V.log("ERROR","Runtime Error",x)},window.onunhandledrejection=e=>{ce.V.logApplication("ERROR","Unhandled Promise Rejection",{message:e.reason?e.reason.message:e.reason,stack:e.reason?e.reason.stack:null,requestFrom:s.B.BASE_APPLICATION,sessionId:o}),ce.V.log("ERROR","Unhandled Promise Rejection",{message:e.reason?e.reason.message:e.reason,stack:e.reason?e.reason.stack:null,requestFrom:s.B.BASE_APPLICATION,sessionId:o})}}catch(o){console.warn("Failed to initialize global error handlers:",o)}}static logCatchError(){try{const o=console.error;console.log("Inside originalConsoleError...");const e=Xe.b.sessionId||"unknown";console.error=function(...n){const p="Console Error",y={arguments:n.map(C=>Xi(C)),requestFrom:s.B.BASE_APPLICATION,sessionId:e};ce.V.logApplication("ERROR",p,y),ce.V.log("ERROR",p,y),o.apply(console,n)}}catch(o){console.warn("Failed to override console.error:",o)}}static logErrorEvent(){try{window.addEventListener("error",o=>{var e;console.log("Inside error event...");const n=Xe.b.sessionId||"unknown",p={error:((e=o.error)===null||e===void 0?void 0:e.message)||o.message,source:o.filename,line:o.lineno,column:o.colno,stack:o.error?Xi(o.error.stack):void 0,requestFrom:s.B.BASE_APPLICATION,sessionId:n},y="Unhandled Error";ce.V.logApplication("ERROR",y,p),ce.V.log("ERROR",y,p)})}catch(o){console.warn("Failed to add error event listener:",o)}}static logUnhandledError(){try{window.addEventListener("unhandledrejection",o=>{var e,n;console.log("Inside unhandledrejection...");const p=Xe.b.sessionId||"unknown",y={reason:((e=o.reason)===null||e===void 0?void 0:e.message)||String(o.reason),stack:((n=o.reason)===null||n===void 0?void 0:n.stack)||"No stack trace available",requestFrom:s.B.BASE_APPLICATION,sessionId:p};ce.V.logApplication("ERROR","Unhandled Promise Rejection",y),ce.V.log("ERROR","Unhandled Promise Rejection",y)})}catch(o){console.warn("Failed to add unhandled rejection event listener:",o)}}static logUserInteractions(){document.addEventListener("click",o=>{var e;const n=Xe.b.sessionId||"unknown",p=o.target,y={element:p.tagName,id:p.id,classes:p.className,text:(e=p.innerText)===null||e===void 0?void 0:e.slice(0,50),requestFrom:s.B.BASE_APPLICATION,sessionId:n};ce.V.logApplication("INFO","User Click",y)}),document.addEventListener("input",o=>{const e=o.target;Xe.b.sessionId,e.tagName,e.id,e.value,s.B.BASE_APPLICATION}),document.addEventListener("scroll",()=>{Xe.b.sessionId,s.B.BASE_APPLICATION})}static logNetworkRequests(){try{if(typeof window===void 0)return;const o=Xe.b.sessionId||"unknown",e=window?.fetch;if(!e)throw new Error("Original fetch is not available.");const n=[s.B.PostLogger(),s.B.PostPrefetchConceptConnections()];window.fetch=(...p)=>{return y=this,C=void 0,g=function*(){const[r,t]=p,G=r instanceof Request?r.url:r instanceof URL?r.toString():r;if(n.includes(G))return console.log("Ignored URLs detected : ",G),e(...p);let W={request:{type:"REQUEST",message:"Network Request",method:t?.method||"GET",url:G,body:t?.body,requestFrom:s.B.BASE_APPLICATION,sessionId:o}};try{const j=yield e(...p);return W.response={type:"RESPONSE",message:"Network Response",url:G,status:j.status,requestFrom:s.B.BASE_APPLICATION,sessionId:o},j}catch(j){throw W.response={type:"ERROR",message:"Network Request Failed",url:G,error:j instanceof Error?j.message:String(j),requestFrom:s.B.BASE_APPLICATION,sessionId:o},ce.V.logApplication("ERROR","Failed Network Request",W),new Error(`Network request failed for ${G}: ${j.message}`)}},new((x=void 0)||(x=Promise))(function(r,t){function G(V){try{j(g.next(V))}catch(J){t(J)}}function W(V){try{j(g.throw(V))}catch(J){t(J)}}function j(V){var J;V.done?r(V.value):(J=V.value,J instanceof x?J:new x(function(Z){Z(J)})).then(G,W)}j((g=g.apply(y,C||[])).next())});var y,C,x,g}}catch(o){console.warn("Failed to override network requests:",o)}}static logPerformanceMetrics(){typeof window!==void 0&&window?.addEventListener("load",()=>{const o=performance.timing;Xe.b.sessionId,o.loadEventEnd,o.navigationStart,o.domContentLoadedEventEnd,o.navigationStart,s.B.BASE_APPLICATION})}static logRouteChanges(){const o=history.pushState,e=Xe.b.sessionId||"unknown";history.pushState=function(...n){var p;const y={url:(p=n[2])===null||p===void 0?void 0:p.toString(),requestFrom:s.B.BASE_APPLICATION,sessionId:e};return ce.V.logApplication("INFO","Route Change",y),o.apply(this,n)},window?.addEventListener("popstate",()=>{const n={url:location.href,requestFrom:s.B.BASE_APPLICATION,sessionId:e};ce.V.logApplication("INFO","Route Changed (Back/Forward)",n)})}static logWebSocketEvents(){if(typeof window===void 0)return;const o=Xe.b.sessionId||"unknown",e=WebSocket;window.WebSocket=class extends e{constructor(n,p){super(n,p);const y={url:n.toString(),requestFrom:s.B.BASE_APPLICATION,sessionId:o};ce.V.logApplication("INFO","WebSocket Open",y),this.addEventListener("message",C=>{const x={url:n,data:C.data,requestFrom:s.B.BASE_APPLICATION,sessionId:o};ce.V.logApplication("INFO","WebSocket Message",x)}),this.addEventListener("error",C=>{const x={url:n,error:C instanceof Error?C.message:String(C),requestFrom:s.B.BASE_APPLICATION,sessionId:o};ce.V.logApplication("ERROR","WebSocket Error",x)}),this.addEventListener("close",()=>{const C={url:n,requestFrom:s.B.BASE_APPLICATION,sessionId:o};ce.V.logApplication("INFO","WebSocket Closed",C)})}}}}function Xi(b){try{return JSON.stringify(b,(o,e)=>e&&typeof e=="object"&&e instanceof Error?{message:e.message,stack:e.stack}:e)}catch{return"Error while serializing value"}}const Yi=(b,o,...e)=>{return n=void 0,p=[b,o,...e],C=function*(x,g,r=!1){try{let t=s.B.sendMail();r&&(t=s.B.sendBulkMail());const G=yield fetch(t,{method:"POST",body:x instanceof FormData?x:JSON.stringify(x),headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`}}),W=G.headers.get("content-type");if(!G.ok){const V=yield G.json();return console.info(`${G.status} ${V}`),null}const j=yield G.json();return W&&W.includes("text/plain")?yield G.text():j}catch(t){return console.error(t),null}},new((y=void 0)||(y=Promise))(function(x,g){function r(W){try{G(C.next(W))}catch(j){g(j)}}function t(W){try{G(C.throw(W))}catch(j){g(j)}}function G(W){var j;W.done?x(W.value):(j=W.value,j instanceof y?j:new y(function(V){V(j)})).then(r,t)}G((C=C.apply(n,p||[])).next())});var n,p,y,C};class yc{constructor(){this.inDevelopment=!1,this.subscribers=[]}notify(o=null){this.subscribers.map(e=>{e(o||this.data)})}dataChange(o){this.subscribers.push(o)}}class gc extends yc{constructor(){super(...arguments),this.element=null,this.elementIdentifier=0,this.widgetMounted=!1}getComponent(){return this.element}getElementById(o){let e=this.getComponent(),n=document.body;if(e){let p=e.querySelector("#"+o);if(p)return n=p,n}return null}createWidgetWrapperIdentifier(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier.toString()}}class Un extends gc{constructor(){super(...arguments),this.html="",this.css="",this.js="",this.state={},this.previousState={},this.childWidgets=[],this.childWidgetElement=[],this.widgetState={},this.parentElement=""}querySelector(o){return this.element?this.element.querySelector(o):null}querySelectorAll(o){return this.element?this.element.querySelectorAll(o):null}getElement(){return this.element}setTitle(o){document.title=o}getHtml(){return this.html}UpdateChildData(o,e){let n=e;n.data=o,n.render(),n.update()}update(){}setState(o){this.previousState=Object.assign({},this),this.data=o,this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}setStateProperty(o){this.previousState=Object.assign({},this),Object.assign(this,o),this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}hasStateChanged(){return!this.isPropertyEqual(this.state,this.previousState)}isPropertyEqual(o,e){if(o===e)return!0;if(typeof o!="object"||typeof e!="object"||o===null||e===null)return!1;const n=Object.keys(o),p=Object.keys(e);if(n.length!==p.length)return!1;for(let y of n){if(!p.includes(y))return!1;for(let C of p)if(y==C&&y!="state"&&y!="previousState"&&o[y]!=e[y])return!1}return!0}loadChildWidgets(){this.childWidgets.map(o=>{let e=this.getElementById(o.parentElement);e&&(e.innerHTML=""),o.mount(e)})}render(){this.element&&(this.element.innerHTML=this.getHtml()),this.loadChildWidgets(),this.after_render()}getElementByClassName(o){let e=this.getComponent();return e?e?.querySelectorAll("."+o):[]}mount_child(){}mount(o){return e=this,n=void 0,y=function*(){o&&(this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier(),this.element.innerHTML=this.getHtml(),this.element.classList.add("mftsccs-marking-rendered"),o.appendChild(this.element),this.parentElement=o.id,this.before_render(),this.mount_child(),this.widgetMounted=!0)},new((p=void 0)||(p=Promise))(function(C,x){function g(G){try{t(y.next(G))}catch(W){x(W)}}function r(G){try{t(y.throw(G))}catch(W){x(W)}}function t(G){var W;G.done?C(G.value):(W=G.value,W instanceof p?W:new p(function(j){j(W)})).then(g,r)}t((y=y.apply(e,n||[])).next())});var e,n,p,y}before_render(){this.render()}after_render(){console.log("this is calling the after render",this)}renderChildWidgets(){function o(e){var n;e&&((n=e.childWidgets)===null||n===void 0||n.forEach(p=>{o(p)}),e.render())}console.log("this is the render child widget",this),this.childWidgets.forEach(e=>{o(e)})}setWidgetState(o,e){this.widgetState[o]=e,function n(p){p&&Array.isArray(p.childWidgets)&&p.childWidgets.forEach(y=>{y.widgetState=Object.assign(Object.assign({},y.widgetState),p.widgetState),n(y)})}(this),this.renderChildWidgets()}getWidgetState(o,e){return Object.keys.length&&this.widgetState[o]?this.widgetState[o]:e}}var tn=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};class _n extends Un{constructor(){super(...arguments),this.childComponents=[],this.componentMounted=!1,this.oldHtml=null,this.phonebooks=[],this.childrenData={},this.childWidgets=[],this.typeValueList=[],this.widgetType="the_element_name",this.parentConceptList=[],this.customFunctions=[]}getUserId(){return tn(this,void 0,void 0,function*(){const o=yield new Promise(e=>{let n=(localStorage==null?void 0:localStorage.getItem("profile"))||"";n?e(JSON.parse(n)):e()});return o?.userId})}getTypeValueList(){return tn(this,arguments,void 0,function*(o=""){return new Promise(e=>tn(this,void 0,void 0,function*(){const n=(o=this.widgetType)==null?void 0:o.match(/^[a-z0-9]+_[a-z0-9]+/i),p=n?n[0]:"",y=o?.match(/^([a-z0-9]+).*_([a-z0-9]+)$/i),C=y?`${y[1]}_${y[2]}`:"";let x=[],g=new Fn;g.type=C,g.search="1",g.logicoperator=">",g.name="emailfilter",g.operateon="entityEmail",g.composition=!1,x.push(g);let r=new Tt;r.typeConnection=o,r.name="entityEmail";let t=new Tt;t.type=p,t.filterLogic="( emailfilter )",t.filters=x,t.name="top",t.inpage=100,t.freeschemaQueries=[r],t.outputFormat=Ue.y0,Cn(t,"").subscribe(G=>{if(G?.length){const W=G?.map(j=>{var V,J,Z,le,Ce,ie,Ie;const Re=(le=(Z=(J=(V=j.data)===null||V===void 0?void 0:V[p])===null||J===void 0?void 0:J[o])===null||Z===void 0?void 0:Z.data)===null||le===void 0?void 0:le[C];return{id:(Ie=(ie=(Ce=j.data)===null||Ce===void 0?void 0:Ce[p])===null||ie===void 0?void 0:ie[o])===null||Ie===void 0?void 0:Ie.id,name:Re,text:Re}});return this.typeValueList=W,e(W),W}})}))})}setTitle(o){document.title=o}getHtml(){return this.html}createRandomNumber(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier}mount_child(){return tn(this,void 0,void 0,function*(){try{new Function("tsccs",`
        return (async function() {
          ${this.mountChildWidgetsFunction}
        }).call(this);
      `).bind(this)(E)}catch(o){throw console.log("This is the error in the mount child",o),o}})}setProperty(o){return tn(this,void 0,void 0,function*(){return this.widgetType=o,this.getTypeValueList(this.widgetType).then(()=>{var e,n,p;(e=this.element)===null||e===void 0||e.setAttribute("data-type-value",this.widgetType),(p=(n=this.element)===null||n===void 0?void 0:n.parentElement)===null||p===void 0||p.setAttribute("data-type-value",this.widgetType),this.render()}),this})}createTypeEditor(o){(function(e,n){if(e){const p=document.querySelector("#widget-properties #widget-type"),y=p?.querySelectorAll("input");y?.forEach(t=>{t?.remove()});const C=e.target.closest(".added-widget-container"),x=e.target.closest("div");C?C?.getAttribute("data-type-value"):x&&x?.getAttribute("data-type-value");const g=document.createElement("input");g.setAttribute("type","text"),g.setAttribute("name","input-widgetTypeValue"),g.setAttribute("of",n.elementIdentifier.toString()),g.setAttribute("class","form-control"),g.setAttribute("id","widgetType"),g.setAttribute("onchange","updateWidgetTypeValue(event)"),n.widgetType?g.value=n.widgetType:g.setAttribute("placeholder","e.g. the_entity");let r=n;g.addEventListener("change",function(t){var G,W,j;const V=(G=t?.target)===null||G===void 0?void 0:G.value;r.widgetType=V,r.before_render(),r.loadChildWidgets(),(j=(W=r.element)===null||W===void 0?void 0:W.parentElement)===null||j===void 0||j.setAttribute("data-type-value",r.widgetType)}),p?.appendChild(g)}})(o,this)}mount(o){return tn(this,void 0,void 0,function*(){if(o){this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier();let e=this;this.inDevelopment?(this.element.onclick=function(n){n.preventDefault(),e.createTypeEditor(n)},this.element.className="mftsccs-marking-element"):this.element.classList.add("mftsccs-marking-rendered"),this.element.innerHTML=this.getHtml(),o?.setAttribute("data-type-value",e.widgetType),o.appendChild(this.element),this.parentElement=o.id,this.componentMounted==0||this.widgetMounted==0?(this.render_custom_functions(),this.before_render(),this.mount_child(),this.widgetMounted=!0,this.componentMounted=!0):this.render(),this.childWidgetElement=this.getElementByClassName("added-widget-container")}})}render_custom_functions(){var o;const e=(o=this.customFunctions)===null||o===void 0?void 0:o.map(n=>n?.code).join("");try{new Function("tsccs",`
          return (async function() {
            ${e}
          }).call(this);
        `).bind(this)(E)}catch(n){throw console.error("This is the error in the render_custom_functions",n),n}}before_render(){try{new Function("tsccs",`
        return (async function() {
          ${this.componentDidMountFunction}
        }).call(this);
      `).bind(this)(E)}catch(o){throw console.log("This is the error in the before render",o),o}}after_render(){try{new Function("tsccs",`
        return (async function() {
          ${this.addEventFunction}
        }).call(this);
      `).bind(this)(E)}catch(o){throw console.log("This is the error in the after render",o),o}}CreateConnectionBetweenEntityLocal(o,e,n){return tn(this,void 0,void 0,function*(){var p;const y=o.userId,C=((p=o.type)===null||p===void 0?void 0:p.characterValue)+"_"+n,x=yield(0,Oe.$)(C,999,999,y);return yield(0,Gt.F)(o.id,e.id,x.id,1e3),"connection created"})}}var vc=m(3077),ft=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};class Co{constructor(){this.actions={concepts:[],connections:[]},this.success=!0,this.transactionId=Math.random().toString().substring(5)}initialize(){return ft(this,void 0,void 0,function*(){yield en.H.initializeTransaction(this.transactionId)})}commitTransaction(){return ft(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield en.H.SyncDataOnline(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}commitTransactionWithoutAuth(){return ft(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield en.H.SyncDataOnlineWithoutAuth(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}rollbackTransaction(){return ft(this,void 0,void 0,function*(){this.success=!1,this.actions={concepts:[],connections:[]},yield en.H.rollbackTransaction(this.transactionId,this.actions)})}markAction(){return ft(this,void 0,void 0,function*(){yield en.H.markTransactionActions(this.transactionId,this.actions)})}MakeTheInstanceConceptLocal(o,e){return ft(this,arguments,void 0,function*(n,p,y=!1,C,x,g=999,r=0){try{if(!this.success)throw Error("Query Transaction Expired");const t=yield(0,me.k)(n,p,y,C,x,g,r,this.actions);return yield this.markAction(),t}catch(t){throw console.log(t),this.success=!1,t}})}MakeTheTypeConceptLocal(o,e,n,p){return ft(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const y=yield(0,Oe.$)(o,e,n,p,this.actions);return yield this.markAction(),y}catch(y){throw console.log(y),this.success=!1,y}})}CreateTheConceptLocal(o,e,n,p,y,C){return ft(this,arguments,void 0,function*(x,g,r,t,G,W,j=!1,V=0,J={concepts:[],connections:[]}){try{if(!this.success)throw Error("Query Transaction Expired");const Z=yield(0,vc.A)(x,g,r,t,G,W,j,V,this.actions);return yield this.markAction(),Z}catch(Z){throw console.log(Z),this.success=!1,Z}})}CreateConnectionBetweenTwoConceptsLocal(o,e,n){return ft(this,arguments,void 0,function*(p,y,C,x=!1){try{if(!this.success)throw Error("Query Transaction Expired");const g=yield(0,fo.h)(p,y,C,x,this.actions);return yield this.markAction(),g}catch(g){throw console.log(g),this.success=!1,g}})}CreateTheConnectionLocal(o,e,n){return ft(this,arguments,void 0,function*(p,y,C,x=1,g="",r=999){try{if(!this.success)throw Error("Query Transaction Expired");const t=yield(0,Gt.F)(p,y,C,x,g,r,this.actions);return yield this.markAction(),t}catch(t){throw console.log(t),this.success=!1,t}})}CreateConnection(o,e,n){return ft(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const p=yield(0,Gt.d)(o,e,n,this.actions);return yield this.markAction(),p}catch(p){throw console.log(p),this.success=!1,p}})}CreateConnectionBetweenEntityLocal(o,e,n){return ft(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const p=yield ko(o,e,n,this.actions);return yield this.markAction(),p}catch(p){throw console.log(p),this.success=!1,p}})}CreateTheCompositionLocal(o){return ft(this,arguments,void 0,function*(e,n=null,p=null,y=null,C=null,x=null,g=null,r=!1){try{if(!this.success)throw Error("Query Transaction Expired");const t=yield(0,X.R)(e,n,p,y,C,x,g,r,this.actions);return yield this.markAction(),t}catch(t){throw console.log(t),this.success=!1,t}})}}const Zi={number:/^\d+(\.\d+)?$/,text:/^[\s\S]*$/,textOnly:/^[A-Za-z\s]+$/,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,document:/\.(pdf|docx?|pptx?|xlsx?)$/i,sound:/\.(mp3|wav|ogg|flac)$/i,image:/\.(jpg|jpeg|png|gif|bmp|svg|webp)$/i,video:/\.(mp4|avi|mov|mkv|flv|webm)$/i,url:/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^(?:[01]\d|2[0-3]):[0-5]\d$/,password:/^.{6,}$/,ipaddress:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$|^([0-9a-fA-F]{1,4}:){7}([0-9a-fA-F]{1,4})$/,uuid:/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/};var vn=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};class Je{constructor(){Je.cacheInitialized||Je.initializeAnomalyParameters()}static initializeAnomalyParameters(){return vn(this,void 0,void 0,function*(){try{yield Je.getAnomalyParameters(),Je.refreshCache(),Je.cacheInitialized=!0}catch(o){console.error("Error during anomaly parameter initialization:",o)}})}static getAnomalyParameters(){return vn(this,void 0,void 0,function*(){const o=Date.now();if(Je.anomalyParamsCache&&o-Je.lastFetchedTime<Je.cacheExpiryThreshold)return console.log("Returning cached anomaly parameters"),Je.anomalyParamsCache;try{return yield Je.fetchAnomalyParameters()}catch(e){throw console.error("Error fetching anomaly parameters:",e),e}})}static fetchAnomalyParameters(){return vn(this,void 0,void 0,function*(){try{const o=yield fetch("https://devai.freeschema.com/v1/get-frontend-anomaly-parameters",{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Failed to fetch anomaly parameters");const e=yield o.json();return Je.anomalyParamsCache=e.data,Je.lastFetchedTime=Date.now(),e.data}catch(o){throw console.error("API Fetch Error:",o),o}})}static refreshCache(){return vn(this,void 0,void 0,function*(){try{Date.now()-Je.lastFetchedTime>Je.cacheExpiryThreshold&&(yield Je.getAnomalyParameters())}catch(o){console.error("Error refreshing anomaly parameters cache:",o)}})}detectDataType(o){for(const[e,n]of Object.entries(Zi))if(n.test(o))return e;return null}checkConceptAnomaly(o,e){return vn(this,void 0,void 0,function*(){const n=[];try{if(!e)return n.push("Null value"),{valid:!1,warnings:n};const p=Je.anomalyParamsCache;o.startsWith("the_")||(o=`the_${o}`);const y=p[o];if(console.log("Concept Details : ",y),!y)return console.warn(`No concept details found for type: ${o}`),n.push(`No concept details found for type: ${o}`),{valid:!1,warnings:n};const C=e.length,{min_length:x,max_length:g,data_types:r}=y,t=C>=x&&C<=g,G=this.detectDataType(e),W=r.includes(G);return t||n.push(`Length of '${e}' is outside the allowed range (min: ${x}, max: ${g}). Current length: ${C}.`),W||n.push(`Type mismatch for '${e}'. Expected types: ${r.join(", ")}, detected type: ${G}.`),t&&W&&n.push(`Concept ${o} is valid. Length: ${C}, Type: ${G}`),{valid:t&&W,warnings:n}}catch(p){return console.error(`Error checking anomaly for ${o} with value ${e}:`,p),{valid:!1,warnings:n}}})}static checkAnomalyInBulk(o){return vn(this,void 0,void 0,function*(){Je.cacheInitialized||(yield Je.initializeAnomalyParameters());try{const e={};for(const[n,p]of Object.entries(o)){const y=p.value,{valid:C,warnings:x}=yield new Je().checkConceptAnomaly(n,y);e[n]={valid:C,warnings:x}}return e}catch(e){throw console.error("Bulk Anomaly Check Error:",e),e}})}static getExportedFunction(){console.log("Main : ",E);const o=Object.keys(E);return console.log("The exported List : ",o),o}static getFunctionaAnomalyParameters(){}}Je.anomalyParamsCache=null,Je.cacheInitialized=!1,Je.lastFetchedTime=0,Je.cacheExpiryThreshold=6e5;var To=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};class Ki{checkUniqueness(o,e){return To(this,void 0,void 0,function*(){const n=ce.V.logfunction("checkUniqueness");o.startsWith("the_")||(o="the_"+o);let p=(yield fn(o,999)).id,y=yield(0,Ge.A)(e,p);return console.log("This is the concept for validator",y),!(y.id>0||(ce.V.logUpdate(n),0))})}validateField(o){return To(this,void 0,void 0,function*(){var e;const n=ce.V.logfunction("validateField");try{performance.now();const p={},{name:y,value:C,type:x,dataType:g,pattern:r,conceptType:t,maxLength:G,minLength:W,minValue:j,maxValue:V,accept:J,file:Z,required:le,isUnique:Ce}=o;if(console.log(`Validation is happening on : 
`,o),!le||C!==null&&C!==""||(p.required=`The field ${y} is required.`),g&&C){let ie=Zi[g];ie&&C!==""&&!ie.test(C)&&(p.dataType=`Invalid value for ${g}`)}if(r&&C){const ie=typeof r=="string"?new RegExp(r):r;C===""||ie.test(C)||(p.pattern="Pattern doesn't match with value")}if(C&&G!=null&&C.length>G&&(p.maxLength=`Length exceeds the maximum length of ${G}`),C&&W!=null&&C.length<W&&(p.minLength=`Length must be at least ${W} characters long`),j!=null&&C&&!isNaN(Number(C))&&Number(C)<j&&(p.minValue=`Value must be greater than or equal to ${j}`),V!=null&&C&&!isNaN(Number(C))&&Number(C)>V&&(p.maxValue=`Value must be less than or equal to ${V}`),Z&&x&&J){const ie=J.split(",").map(Re=>Re.trim().toLowerCase()),Ie=(e=Z.name.split(".").pop())===null||e===void 0?void 0:e.toLowerCase();Ie&&!ie.includes(Ie)&&(p.accept=`File must be a valid file type: ${ie.join(", ")}`)}return t&&Ce&&C&&((yield this.checkUniqueness(t,C))||(p.unique="Value is not unique")),ce.V.logUpdate(n),console.log("Before Validation Result : ",p),p}catch(p){throw(0,u.ey)(n,"Validator.validateField",p),p}})}validateForm(o){return To(this,void 0,void 0,function*(){const e=ce.V.logfunction("validateForm");try{performance.now();const n={};for(const p in o){const y=yield this.validateField(o[p]);Object.keys(y).length>0&&(n[p]=y)}return ce.V.logUpdate(e),n}catch(n){throw(0,u.ey)(e,"Validator.validateForm",n),n}})}validate(o){const e=ce.V.logfunction("validate");try{let n={};return this.validateField(o).then(p=>{Object.keys(p).length>0?(n.status=!1,n.details=p):n.status=!0}),console.error("Error on validate object"),ce.V.logUpdate(e),n}catch(n){(0,u.ey)(e,"Validator.validate",n)}}}const er=b=>{var o;const e=document.getElementsByName(b)[0];if(!e)return console.warn(`Element with NAME "${b}" not found.`),{name:null,value:null,type:null,dataType:null,pattern:null,conceptType:null,maxLength:null,minLength:null,minValue:null,maxValue:null,accept:null,file:null,required:!1,isUnique:!0};const n=e.hasAttribute("required")||e.getAttribute("data-required")==="true",p=e.hasAttribute("isUnique")&&e.getAttribute("isUnique")==="true";return{name:e.name,value:e.value,type:e.type,dataType:e.getAttribute("data-type"),pattern:e.getAttribute("data-pattern"),conceptType:e.getAttribute("concept-type"),maxLength:e.getAttribute("maxlength")?parseInt(e.getAttribute("maxlength")):null,minLength:e.getAttribute("minlength")?parseInt(e.getAttribute("minlength")):null,minValue:e.getAttribute("min")?parseInt(e.getAttribute("min")):null,maxValue:e.getAttribute("max")?parseInt(e.getAttribute("max")):null,accept:e.getAttribute("accept")||null,file:e.type==="file"&&((o=e.files)===null||o===void 0?void 0:o[0])||null,required:n,isUnique:p}};var mn=m(2289);class Tt{constructor(){this.type="",this.inpage=10,this.page=1,this.concepts=[],this.conceptIds=[],this.selectors=[],this.freeschemaQueries=[],this.filters=[],this.filterLogic="",this.typeConnection="",this.order="DESC",this.outputFormat=Ue.yv,this.name="",this.filterAncestor="",this.reverse=!1,this.limit=!1,this.isSecure=!1,this.includeInFilter=!1,this.isOldConnectionType=!1}}var mc=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function On(b){var o=arguments;return mc(this,arguments,void 0,function*(e,n=""){const p=ce.V.logfunction("FreeschemaQueryApi",o);var y=(0,i.ab)("application/json",n);const C=s.B.FreeschemaQueryUrl(),x=JSON.stringify(e);try{const g=yield fetch(C,{method:"POST",headers:y,body:x});return g.ok?yield g.json():((0,u.ry)(g),console.log("This is the freeschema query error",g.status),[])}catch(g){console.log("This is the freeschema query error others",g),(0,u.Mb)(g,C),(0,u.ey)(p,"FreeschemaQueryApi",g)}})}var Cc=m(5898),wo=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};class tr extends Jt.w{constructor(o,e){super(),this.query=new Tt,this.countInfoStrings=[],this.order="DESC",this.totalCount=0,this.query=o,this.format=o.outputFormat,this.order=o.order}run(){return wo(this,void 0,void 0,function*(){var o,e;this.query.outputFormat=Ue.BG,this.compositionIds=[];let n=yield On(this.query,"");return this.conceptIds=n.conceptIds,this.internalConnections=(o=n.internalConnections)!==null&&o!==void 0?o:[],this.linkers=(e=n.linkers)!==null&&e!==void 0?e:[],this.reverse=n.reverse,this.compositionIds=n.mainCompositionIds,this.totalCount=n.mainCount,this.countInfoStrings=n.countinfo,yield this.build()})}bind(){return wo(this,void 0,void 0,function*(){var o,e;if(this.compositionIds.length>0)for(let p=0;p<this.compositionIds.length;p++)this.removeListenToEvent(this.compositionIds[p]);if(this.isDataLoaded)for(let p=0;p<this.compositionIds.length;p++)this.listenToEvent(this.compositionIds[p]);else{this.query.outputFormat=Ue.BG,this.compositionIds=[];let p=yield On(this.query,"");this.conceptIds=p.conceptIds,this.internalConnections=(o=p.internalConnections)!==null&&o!==void 0?o:[],this.linkers=(e=p.linkers)!==null&&e!==void 0?e:[],this.reverse=p.reverse,this.compositionIds=p.mainCompositionIds,this.totalCount=p.mainCount,this.countInfoStrings=p.countinfo}let n=yield this.build();if(!this.isDataLoaded){this.isDataLoaded=!0;for(let p=0;p<this.compositionIds.length;p++)this.listenToEvent(this.compositionIds[p]);if(this.query.type!=""){let p=yield fn(this.query.type,999);p.id>0&&this.listenToEventType(p.id)}}for(let p=0;p<this.newIds.length;p++)this.listenToEvent(this.newIds[p]);return this.newIds=[],n})}build(){return wo(this,void 0,void 0,function*(){ce.V.logfunction("build",["schemaquery",this.compositionIds]);let o=(0,Cc.w)(this.countInfoStrings);return this.format==Ue.y0?this.data=yield(0,Kt.e$)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,o,this.order):this.format==Ue.ZJ?this.data=yield(0,Kt.y6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,o,this.order):this.data=yield(0,Kt.b6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,o),this.data})}}function Cn(b,o){return new tr(b,o)}function nr(b,o){return new tr(b,o).execute()}class Io{constructor(){this.id=0,this.name="",this.html="",this.css="",this.js="",this.library={css:[],js:[]},this.assistant={id:"",input:"",type:""},this.timestamp="",this.widgetId=0,this.type="",this.clean="",this.after_render="",this.before_render="",this.custom_functions=[],this.update="",this.origin=0,this.version=0,this.mount_child="",this.children=[],this.wrapper="0",this.widget=new _n}}var Tc=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function ko(b,o,e){return Tc(this,arguments,void 0,function*(n,p,y,C={concepts:[],connections:[]}){var x,g,r,t,G;const W=ce.V.logfunction("CreateConnectionBetweenEntityLocal",[n.id,p.id,y]);if(be)try{const Z=yield Me("CreateConnectionBetweenEntityLocal",{concept1Data:n,concept2Data:p,linker:y,actions:C});return!((g=(x=Z?.actions)===null||x===void 0?void 0:x.concepts)===null||g===void 0)&&g.length&&(C.concepts=JSON.parse(JSON.stringify(Z.actions.concepts))),!((t=(r=Z?.actions)===null||r===void 0?void 0:r.connections)===null||t===void 0)&&t.length&&(C.connections=JSON.parse(JSON.stringify(Z.actions.connections))),Z.data}catch(Z){console.log("CreateConnectionBetweenEntityLocal error sw: ",Z),He(Z)}const j=n.userId,V=((G=n.type)===null||G===void 0?void 0:G.characterValue)+"_"+y,J=yield(0,Oe.$)(V,999,999,j,C);console.log(yield(0,Gt.F)(n.id,p.id,J.id,1e3,void 0,void 0,C)),ce.V.logUpdate(W)})}var nn=m(4310);function No(b){for(;b.firstChild;)b.removeChild(b.firstChild)}var or=m(490);class ir extends Un{constructor(o,e,n,p="",y=10){super(),this.inpage=10,this.selector=e,this.mainType=o,this.filterType=p,this.inpage=y,this.parentDomElement=n,this.mount(this.parentDomElement)}before_render(){this.render()}addFilter(o){if(o!=""){let e=new Fn;e.search=o,e.type=this.filterType,e.logicoperator="like",e.operateon="selector",e.name="selector_filter";let n="( selector_filter )";this.query.filters=[e],this.query.filterLogic=n}else this.query.filters=[],this.query.filterLogic="";console.log("this is the filters",this.query)}after_render(){let o=this.getElementById("selector"),e=this.getElementById("search-bar"),n=this;e.onchange=()=>{n.addFilter(e.value),n.mainDetails.update()};let p=new Tt;p.type=this.mainType,p.inpage=this.inpage;let y=new Tt;y.typeConnection=this.selector,y.name="selector",p.freeschemaQueries=[y],this.query=p,Cn(this.query,"").subscribe((C,x)=>{let g={};this.mainDetails=x;for(let r=0;r<C.length;r++){let t=C[r],G=t.id,W=t[this.mainType];if(console.log("this is the selected data myItem",W,C[r],this.mainType,t),W){let j=W[this.selector];if(j){const V=Object.values(j)[0];g[G]=V}}}No(o);for(const[r,t]of Object.entries(g)){const G=document.createElement("option");G.value=r,G.textContent=t,o.appendChild(G)}console.log("this is the output from selector",C)})}getHtml(){const o=document.createElement("style");return o.textContent=`
.search-select-wrapper {
  width: 300px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-family: Arial, sans-serif;
}

#search-bar {
  padding: 8px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
}

#selector {
  padding: 6px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
}
`,document.head.prepend(o),this.html=`
        <div class="search-select-wrapper">
        <input type="text" placeholder="Select or type..." id='search-bar'>
        <select id='selector'>
        </div>`,this.html}}const wc=`
/* CKEditor content styles */
.ck-content {
  /* Container styles */
  max-width: 100%;
  margin: 0 auto;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  line-height: 1.5;
  padding: 0.75rem;
  background: #fff;
  color: #333;
  border: 1px solid #ccced1;
}

/* Headings */
.ck-content h1, .ck-content h2, .ck-content h3, 
.ck-content h4, .ck-content h5, .ck-content h6 {
  font-weight: 700;
  line-height: 1.2;
  margin: 1em 0 0.5em;
}

.ck-content h1 { font-size: 2.5em; }
.ck-content h2 { font-size: 2em; }
.ck-content h3 { font-size: 1.75em; }
.ck-content h4 { font-size: 1.5em; }
.ck-content h5 { font-size: 1.25em; }
.ck-content h6 { font-size: 1em; }

/* Paragraphs and spacing */
.ck-content p {
  margin: 1em 0;
  line-height: 1.6;
}

/* Links */
.ck-content a {
  color: #1a73e8;
  text-decoration: none;
}

.ck-content a:hover {
  text-decoration: underline;
}

/* Lists */
.ck-content ul,
.ck-content ol {
  padding-left: 2em;
  margin: 1em 0;
}

.ck-content ul {
  list-style: disc;
}

.ck-content ol {
  list-style: decimal;
}

.ck-content li {
  margin: 0.5em 0;
}

/* Blockquotes */
.ck-content blockquote {
  margin: 1em 0;
  padding-left: 1em;
  border-left: 5px solid #ccc;
  font-style: italic;
  color: #666;
}

/* Code blocks */
.ck-content pre {
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 1em;
  margin: 1em 0;
  overflow-x: auto;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.ck-content code {
  background: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-size: 0.9em;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

/* Tables */
.ck-content table {
  border-collapse: collapse;
  width: 100%;
  margin: 1em 0;
}

.ck-content table th,
.ck-content table td {
  border: 1px solid #ddd;
  padding: 0.75em;
  text-align: left;
}

.ck-content table th {
  background: #f5f5f5;
  font-weight: bold;
}

/* Images */
.ck-content img {
  max-width: 100%;
  height: auto;
  margin: 1em 0;
}

.ck-content figure {
  margin: 1em 0;
  text-align: center;
}

.ck-content figure img {
  margin: 0;
}

.ck-content figcaption {
  color: #666;
  font-size: 0.9em;
  margin-top: 0.5em;
}

/* Dark mode */
/*
@media (prefers-color-scheme: dark) {
  .ck-content {
    background: #1a1a1a;
    color: #e0e0e0;
  }

  .ck-content a {
    color: #64b5f6;
  }

  .ck-content blockquote {
    border-left-color: #404040;
    color: #b0b0b0;
  }

  .ck-content pre,
  .ck-content code {
    background: #2d2d2d;
    border-color: #404040;
  }

  .ck-content table th,
  .ck-content table td {
    border-color: #404040;
  }

  .ck-content table th {
    background: #2d2d2d;
  }

  .ck-content figcaption {
    color: #b0b0b0;
  }
}
*/

/* CUSTOM DOCUMENTATION CSS */

#documentation-preview {
  border: 1px solid #ccc;
  padding: 1rem;
}

#documentation-preview h3 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
}

.pre-wrapper {
  background: #f2f5f9;
  border: 1px solid #cecece;
  display: block;
  padding: 1rem;
  border-radius: 0.25rem;
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.pre-wrapper pre {
  margin: 0;
  color: #e87aa2;
}

.widget-doc-section pre {
  background-color: transparent;
}

.widget-doc-section p {
  margin: 0;
}

.widget-doc-section code {
  color: #e87aa2;
  font-size: 0.875rem;
}

.mv-3 {
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.pv-3 {
  padding-top: 1rem;
  padding-bottom: 1rem;
}

  .widget-documentation-heading {
    background-color: #6e757d;
    color: #eee;
    font-size: 1.5rem;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .widget-documentation-heading h4 {
    margin-bottom: 0;
  }

  .close-documentation-button {
    border: none;
    outline: none;
    background-color: transparent;
    line-height: 0;
    margin: 0;
    padding: 0;
    cursor: pointer;
  }

  .close-documentation-button:hover,
  .close-documentation-button:focus  {
    background-color: transparent;
  }

  .documentation-creator {
    text-align: right;
    color: #666;
    margin: 0;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .documentation-creator span {
    font-style: italic;
  }

  .documentation-attachments {
    display: flex;
    flex-wrap: wrap;
  }

  .documentation-attachments img {
    width: 25%;
    height: auto;
    border: 1px solid #ccc;
    padding: 0.25rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .documentation-attachments iframe {
    width: 50%;
    border: 1px solid #ccc;
    padding: 0.25rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .widget-documentation-footer {
    text-align: right;
    margin-top: 1rem;
  }

  .widget-documentation-footer button {
    border-radius: 0;
    border: none;
    padding: 0.5rem 1.5rem;
    text-align: center;
    background: #6e757d;
    color: #eee;
  }

  #widget-details {
    position: absolute;
    right: 0px;
    top: 0px;
    z-index: 9999;
  }

  #widget-details button {
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 0 0 0 0.25rem;
    height: auto;
    width: auto;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  #widget-details button:hover, 
  #widget-details button:focus {
    opacity: 0.75;
  }

  #widget-details button span {
    pointer-events: none;
    font-size: 1rem;
  }

  #widget-details button svg {
    pointer-events: none;
    width: 16px;
    height: 16px;
    fill: #999;
  }

  #widget-documentation-preview-modal {
    border: none;
  }

  @media (min-width: 768px) {
    #widget-documentation-preview-modal {
      flex: 0 0 auto;
      width: 66.66666667%;
    }
  }

`,zt={PAGE_COMP_NAME:"page",WIDGET_COMP_NAME:"widget",PROJECT_COMP_NAME:"project"};var rr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function bn(b){const o=document.getElementById("fspage-properties");if(!o)return;let e=o?.textContent;e=e?e.replace(new RegExp(b,"g"),""):"",o.textContent=e}function cr(b,o){let e=document.querySelector(`meta[name="${b}"]`);e||(e=document.createElement("meta"),e.setAttribute("name",b),document.head.appendChild(e)),e.setAttribute("content",o)}var sr=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,[])).next())})};function ar(b){return sr(this,void 0,void 0,function*(){var o,e,n,p;!((e=(o=b?.library)===null||o===void 0?void 0:o.css)===null||e===void 0)&&e.length&&function(y){var C;const x=(C=y?.library)===null||C===void 0?void 0:C.css,g=`vde-css-${y?.origin?y?.origin:y?.widgetId}`;(function(r){const t=`link.${r}`,G=document.querySelectorAll(t);G?.length&&G?.forEach(W=>{W.remove()})})(g),x?.length&&x?.sort((r,t)=>Number(r?.order)-Number(t?.order)),x?.forEach(r=>{const t=document.createElement("link");t.classList.add(g),t.setAttribute("rel","stylesheet"),t.setAttribute("href",r.url),document.head.appendChild(t)})}(b),!((p=(n=b?.library)===null||n===void 0?void 0:n.js)===null||p===void 0)&&p.length&&(yield function(y){return sr(this,void 0,void 0,function*(){var C;const x=(C=y?.library)===null||C===void 0?void 0:C.js,g=`vde-js-${y?.origin?y?.origin:y?.widgetId}`;if(function(r){const t=`script.${r}`,G=document.querySelectorAll(t);G?.length&&G?.forEach(W=>{W.remove()})}(g),x?.length){x.sort((r,t)=>Number(r?.order)-Number(t?.order));for(const r of x)r?.url?document.querySelector(`script[src="${r.url}"]`)?console.log("Library already loaded:",r.url):yield new Promise((t,G)=>{const W=document.createElement("script");W.classList.add(g),W.setAttribute("type","text/javascript"),W.setAttribute("src",r.url),W.setAttribute("crossorigin","anonymous"),W.onload=()=>{t()},W.onerror=j=>{console.error("Failed to load script:",r.url,j),G(new Error(`Failed to load script: ${r.url}`))},document.head.appendChild(W)}):console.warn("Skipping library with invalid URL:",r);console.log("All JavaScript libraries loaded successfully")}})}(b))})}var nt=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function lr(b,o,e,n){return nt(this,void 0,void 0,function*(){var p;const y=yield so(b,"the_page_body"),C=new Tt;C.conceptIds=[b],C.inpage=100,C.outputFormat=Ue.y0,C.selectors=["the_page_body","the_page_title","the_page_slug","the_page_font_family","the_page_font_size","the_page_width","the_page_type","the_page_meta_title","the_page_meta_description","the_page_meta_keywords"],Cn(C,"").subscribe(g=>nt(this,void 0,void 0,function*(){var r,t;console.log("SchemaQueryListener data -->",g),yield function(G){return rr(this,void 0,void 0,function*(){var W,j,V,J,Z,le,Ce,ie,Ie,Re,Pe,Ve,$e,qe;[{key:"meta_title",value:(j=(W=G?.[`the_${zt.PAGE_COMP_NAME}_meta_title`])===null||W===void 0?void 0:W.data)===null||j===void 0?void 0:j.the_meta_title},{key:"meta_description",value:(J=(V=G?.[`the_${zt.PAGE_COMP_NAME}_meta_description`])===null||V===void 0?void 0:V.data)===null||J===void 0?void 0:J.the_meta_description},{key:"meta_keywords",value:(le=(Z=G?.[`the_${zt.PAGE_COMP_NAME}_meta_keywords`])===null||Z===void 0?void 0:Z.data)===null||le===void 0?void 0:le.the_meta_keywords},{key:"width",value:(ie=(Ce=G?.[`the_${zt.PAGE_COMP_NAME}_width`])===null||Ce===void 0?void 0:Ce.data)===null||ie===void 0?void 0:ie.the_width},{key:"font_size",value:(Re=(Ie=G?.[`the_${zt.PAGE_COMP_NAME}_font_size`])===null||Ie===void 0?void 0:Ie.data)===null||Re===void 0?void 0:Re.the_font_size},{key:"font_family",value:(Ve=(Pe=G?.[`the_${zt.PAGE_COMP_NAME}_font_family`])===null||Pe===void 0?void 0:Pe.data)===null||Ve===void 0?void 0:Ve.the_font_family},{key:"type",value:(qe=($e=G?.[`the_${zt.PAGE_COMP_NAME}_type`])===null||$e===void 0?void 0:$e.data)===null||qe===void 0?void 0:qe.the_type}].forEach(ot=>{ot.value&&function(yt,Ke){rr(this,void 0,void 0,function*(){const Ot=document.getElementById("fspage-properties")||function(){const wt=document.createElement("style");return wt.id="fspage-properties",document.head.appendChild(wt),wt}();let gt="";switch(yt){case"width":bn(".fspage { width: [^;]+ !important; }"),gt=Ke?`.fspage { width: ${Ke} !important; }`:"";break;case"font_size":bn(".fspage { font-size: [^;]+; }"),gt=Ke?`.fspage { font-size: ${Ke}px; }`:"";break;case"font_family":bn(".fspage { font-family: [^;]+; }"),gt=Ke?`.fspage { font-family: ${Ke}; }`:"";break;case"type":bn(".fspage { width: 1200px; margin: 0 auto; }"),bn(".fspage { width: 100%; padding: 0; }"),gt=Ke==="fixed"?".fspage { width: 1200px; margin: 0 auto; }":Ke==="fluid"?".fspage { width: 100%; padding: 0; }":"";break;case"meta_title":document.title=Ke;break;case"meta_keywords":cr(yt.replace("meta_",""),Ke);break;case"meta_description":return void cr(yt.replace("meta_",""),Ke)}Ot.textContent+=gt})}(ot.key,ot.value)})})}((t=(r=g?.[0])===null||r===void 0?void 0:r.data)===null||t===void 0?void 0:t[`the_${zt.PAGE_COMP_NAME}`])})),document.getElementById("app").classList.add("fspage");const x=document.head.querySelectorAll("style#mystyleid");Array.from(x).forEach(g=>g.remove()),!((p=y?.[0])===null||p===void 0)&&p.id?yield Mn(y[0].id,o,e,n):o.innerHTML="<h4>Invalid or Page doesn't exist</h4>"})}function Mn(b,o,e,n){return nt(this,void 0,void 0,function*(){try{let p=yield(0,nn.qj)(b),y=p.mainId,C=p.data;const x=yield pr(C,y);return yield ur(y,x,o,e,n)}catch(p){console.error(`Error Caught Rendering Widget: ${p}`),o.textContent=`Error: ${p.message}`}})}function dr(b,o,e,n){return nt(this,void 0,void 0,function*(){try{const p=yield(0,nn.Cp)(b);return yield ur(b,p,o,e,n)}catch(p){console.error(`Error Caught Rendering Widget: ${p}`)}})}function ur(b,o,e,n){return nt(this,arguments,void 0,function*(p,y,C,x,g=!0){const r=yield Bn(p,[],y);if(!r.name)return void(C.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const t=C;yield ar(r);const G=yield Pn(r,t,void 0,x),W=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");C.classList.add(`${W}`),C.style.position="relative";const j=document.createElement("style");j.id="mystyleid",j.innerHTML=`
  .${W} {
    ${r.css+G.css+wc} 
  }
`,r.children.length&&r?.children.forEach(J=>{var Z;const le=J?.library;(!((Z=le?.css)===null||Z===void 0)&&Z.length||le?.js.length)&&ar(J)}),document.head.appendChild(j);const V=document.createElement("script");if(V.innerHTML=r.js,t.appendChild(V),g){const J=document.createElement("div");J.id="widget-details",J.innerHTML="",J.innerHTML=`
        <button class="widget-documentation-btn" widget-id="${r?.origin||r?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">
          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>
        </button>
      `,t.appendChild(J);const Z=document.createElement("dialog");Z.id="widget-documentation-preview-modal",Z.className="col-md-8",Z.innerHTML="",Z.innerHTML=`
        <div class="widget-documentation-heading">
          <h4>Documentation</h4>
          <button class="close-documentation-button document-preview-close-button" title="Close">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
          </button>
        </div>

        <!-- <div id="documentation-preview" class="ck-content"></div> -->
        <div id="documentation-view" class="ck-content"></div>

        <div class="widget-documentation-footer">
          <button class="document-preview-close-button">Close</button>
        </div>
      `,t.appendChild(Z);const le=t.querySelectorAll(".widget-documentation-btn");le?.forEach(ie=>{ie.addEventListener("click",Ie=>{const Re=Ie?.target;(function(Pe){nt(this,void 0,void 0,function*(){console.log("openDocumentationPreviewModal widgetId",Pe);const Ve=new Tt;Ve.typeConnection="the_widget_documentation",Ve.name="documentationText",Ve.selectors=["the_documentation_text"];const $e=new Tt;$e.typeConnection="the_widget_s_documentation",$e.name="documentationBlank",$e.selectors=["the_documentation_text","the_documentation_content","the_documentation_language","the_documentation_doc_title","the_documentation_folder","the_documentation_creator_email","the_documentation_created_by","the_documentation_content","the_documentation_type","the_documentation_s_doc_url","the_documentation_s_image_url","the_documentation_s_video_link","the_documentation_auth_type","the_documentation_bearer_token","the_documentation_method","the_documentation_method_url","the_documentation_username","the_documentation_password","the_documentation_s_json_list","the_documentation_api_script","the_documentation_api_body","the_documentation_code_editor","the_documentation_return"];const qe=new Tt;qe.typeConnection="the_documentation_s_json_list",qe.name="documentationJSON",qe.selectors=["the_json_list_key","the_json_list_value"],$e.freeschemaQueries=[qe];const ot=new Tt;ot.conceptIds=[Pe],ot.freeschemaQueries=[Ve,$e],ot.inpage=100,ot.outputFormat=Ue.y0,yield Cn(ot,"").subscribe(yt=>nt(this,void 0,void 0,function*(){var Ke,Ot,gt,wt,rn,cn,sn,an,ln,dn,un;let hn;console.log("widget documentation preview data ->",yt);const wn=((an=(sn=(cn=(rn=(wt=(gt=(Ot=(Ke=yt?.[0])===null||Ke===void 0?void 0:Ke.data)===null||Ot===void 0?void 0:Ot.the_widget)===null||gt===void 0?void 0:gt.the_widget_documentation)===null||wt===void 0?void 0:wt.data)===null||rn===void 0?void 0:rn.the_documentation)===null||cn===void 0?void 0:cn.the_documentation_text)===null||sn===void 0?void 0:sn.data)===null||an===void 0?void 0:an.the_text)||"";wn&&(hn=wn);const qt=(un=(dn=(ln=yt?.[0])===null||ln===void 0?void 0:ln.data)===null||dn===void 0?void 0:dn.the_widget)===null||un===void 0?void 0:un.the_widget_s_documentation;qt?.length&&(hn=qt?.map(Qt=>{var Mt,st,xe,It,kt,Nt,At,Et,pt,Lt,it,St,_t,bt,Bt,Pt,Vt,jt,Fe,rt,Be,ht,at,xn,En,Rt,In,ze,ct,et,tt;const Se=(Mt=Qt?.data)===null||Mt===void 0?void 0:Mt.the_documentation,lt=(xe=(st=Se?.the_documentation_type)===null||st===void 0?void 0:st.data)===null||xe===void 0?void 0:xe.the_type,mt=(kt=(It=Se?.the_documentation_content)===null||It===void 0?void 0:It.data)===null||kt===void 0?void 0:kt.the_content,Ct=(At=(Nt=Se?.the_documentation_creator_email)===null||Nt===void 0?void 0:Nt.data)===null||At===void 0?void 0:At.the_creator_email,dt=(pt=(Et=Se?.the_documentation_doc_title)===null||Et===void 0?void 0:Et.data)===null||pt===void 0?void 0:pt.the_doc_title,Sc=(it=(Lt=Se?.the_documentation_method)===null||Lt===void 0?void 0:Lt.data)===null||it===void 0?void 0:it.the_method,_c=(_t=(St=Se?.the_documentation_method_url)===null||St===void 0?void 0:St.data)===null||_t===void 0?void 0:_t.the_method_url,bc=(Bt=(bt=Se?.the_documentation_bearer_token)===null||bt===void 0?void 0:bt.data)===null||Bt===void 0?void 0:Bt.the_bearer_token,Bc=(Vt=(Pt=Se?.the_documentation_username)===null||Pt===void 0?void 0:Pt.data)===null||Vt===void 0?void 0:Vt.the_username,Gc=(Fe=(jt=Se?.the_documentation_password)===null||jt===void 0?void 0:jt.data)===null||Fe===void 0?void 0:Fe.the_password,xc=(Be=(rt=Se?.the_documentation_auth_type)===null||rt===void 0?void 0:rt.data)===null||Be===void 0?void 0:Be.the_auth_type,Hn=Se?.the_documentation_s_json_list,Ec=(at=(ht=Se?.the_documentation_api_script)===null||ht===void 0?void 0:ht.data)===null||at===void 0?void 0:at.the_api_script,Rc=(En=(xn=Se?.the_documentation_api_body)===null||xn===void 0?void 0:xn.data)===null||En===void 0?void 0:En.the_api_body,Dc=(In=(Rt=Se?.the_documentation_language)===null||Rt===void 0?void 0:Rt.data)===null||In===void 0?void 0:In.the_language,Wc=(ct=(ze=Se?.the_documentation_return)===null||ze===void 0?void 0:ze.data)===null||ct===void 0?void 0:ct.the_return,Fc=(tt=(et=Se?.the_documentation_code_editor)===null||et===void 0?void 0:et.data)===null||tt===void 0?void 0:tt.the_code_editor,$n=Se?.the_documentation_s_doc_url,Jn=Se?.the_documentation_s_image_url,zn=Se?.the_documentation_s_video_link;let Ht={type:lt,content:mt,creatorEmail:Ct,title:dt};if(lt==="blank")Ht=Object.assign({},Ht);else if(lt==="api"){const Dt=[];Hn?.length&&Hn?.forEach(ut=>{var Go,xo,Eo,Ro,Do,Wo,Fo,Uo;Dt.push({key:(Ro=(Eo=(xo=(Go=ut?.data)===null||Go===void 0?void 0:Go.the_json_list)===null||xo===void 0?void 0:xo.the_json_list_key)===null||Eo===void 0?void 0:Eo.data)===null||Ro===void 0?void 0:Ro.the_key,value:(Uo=(Fo=(Wo=(Do=ut?.data)===null||Do===void 0?void 0:Do.the_json_list)===null||Wo===void 0?void 0:Wo.the_json_list_value)===null||Fo===void 0?void 0:Fo.data)===null||Uo===void 0?void 0:Uo.the_value})}),Ht=Object.assign(Object.assign({},Ht),{method:Sc,methodURL:_c,authType:xc,username:Bc,password:Gc,bearerToken:bc,json:Dt,script:Ec,body:Rc})}else lt==="function"&&(Ht=Object.assign(Object.assign({},Ht),{language:Dc,return:Wc,codeEditor:Fc}));const Lr=[],Sr=[],_r=[];return Jn?.length&&Jn?.forEach(Dt=>{var ut;Lr.push((ut=Dt?.data)===null||ut===void 0?void 0:ut.the_image_url)}),zn?.length&&zn?.forEach(Dt=>{var ut;Sr.push((ut=Dt?.data)===null||ut===void 0?void 0:ut.the_video_link)}),$n?.length&&$n?.forEach(Dt=>{var ut;_r.push((ut=Dt.data)===null||ut===void 0?void 0:ut.the_doc_url)}),Ht=Object.assign(Object.assign({},Ht),{imageList:Lr,linkList:_r,videoList:Sr}),Ht})),yield function(){return nt(this,void 0,void 0,function*(){document.getElementById("widget-documentation-preview-modal").showModal()})}(),function(vt,Qt){nt(this,void 0,void 0,function*(){const Mt=document.getElementById("documentation-view");if(s.B.DOCUMENTATION_WIDGET!=0)return void(yield Mn(s.B.DOCUMENTATION_WIDGET,Mt,{currentWidgetId:Qt}));const st=document.getElementById("documentation-preview");st.innerHTML="",vt&&vt?.length&&typeof vt!="string"?vt?.forEach(xe=>{var It,kt,Nt,At;const Et=document.createElement("h3");let pt="";switch(xe?.type){case"api":pt="API";break;case"function":pt="Functions and Classes";break;case"imgAndLink":pt="Images and Links";break;default:pt=""}Et.innerHTML=`
        ${xe?.title} ${pt?"("+pt+")":""}
      `,st?.appendChild(Et);const Lt=document.createElement("div");Lt.classList.add("widget-doc-content"),xe?.content&&(Lt.innerHTML=xe.content,st?.appendChild(Lt));const it=document.createElement("div");if(it.classList.add("widget-doc-section"),xe.type==="api"){let Fe="";Fe=xe.authType==="basicAuth"?`
            <p>username: <code>${xe?.username}</code></p>
            <p>password: <code>${xe?.password}</code></p>
          `:xe.authType==="bearerToken"?`
          <h6>Token: <code>${xe?.bearerToken}</code></h6>
          `:"None";const rt=xe.json.map(at=>`${at?.key}: ${at?.value}`).join(", "),Be=document.createElement("pre");Be.textContent=rt,it.innerHTML=`
          <div class="pv-3">
            <h6>Method Type: <code>${xe?.method.toUpperCase()}</code></h6>
            <h6>Endpoint: <code>${xe?.methodURL}</code></h6>
          </div>
          <div class="pv-3">
            <h6>Auth Type: <code>${((It=xe?.authType)===null||It===void 0?void 0:It.toUpperCase())||""}</code></h6>
            ${Fe}
          </div>
          <div class="pv-3">
            <h6>JSON</h6>
            <code class="pre-wrapper" id="json-list-pre"></code>
          </div>
          <div class="pv-3">
            <h6>Body</h6>
            ${xe.body}
          </div>
          <div class="pv-3">
            <h6>Scripts</h6>
            ${xe.script}
          </div>
        `;const ht=it.querySelector("#json-list-pre");ht&&(ht.appendChild(Be),ht.removeAttribute("id"))}else if(xe.type==="function"){const Fe=document.createElement("pre");Fe.textContent=xe?.codeEditor;const rt=document.createElement("pre");rt.textContent=xe?.return,it.innerHTML=`
          <div class="mv-3">
            <h6>Parameter</h6>
            <p>Language: ${xe?.language}</p>
            <code class="pre-wrapper" id="editor-pre"></pre></code>
            <h6>Returns</h6>
            <code class="pre-wrapper" id="return-pre"></code>
          </div>
        `;const Be=it.querySelector("#editor-pre");Be&&(Be.appendChild(Fe),Be.removeAttribute("id"));const ht=it.querySelector("#return-pre");ht&&(ht.appendChild(rt),ht.removeAttribute("id"))}const St=document.createElement("div");St.classList.add("mv-3");const _t=(kt=xe?.linkList)===null||kt===void 0?void 0:kt.map(Fe=>`
            <p>${Fe}</p>
          `).join(""),bt=(Nt=xe?.imageList)===null||Nt===void 0?void 0:Nt.map(Fe=>`
          <img src="${Fe}">
        `).join(""),Bt=(At=xe?.videoList)===null||At===void 0?void 0:At.map(Fe=>`
            <iframe width="560" height="315" src="${Fe}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        `).join(""),Pt=_t?.length?`
          <div class="mv-3">
          <h6>Web links</h6>
          ${_t}
          </div>
        `:"",Vt=bt?.length?`
          <h6>Attachments</h6>
          <div class="documentation-attachments">
            ${bt}
          </div>
        `:"",jt=Bt?.length?`
            <h6>Videos</h6>
            <div class="documentation-attachments">
              ${Bt}
            </div>
            `:"";St.innerHTML=`
        <div class="mv-3">
          ${Pt}
          ${Vt}
          ${jt}
        </div>
        <p class="documentation-creator">- added by: <span>${xe?.creatorEmail}</span></p>
      `,it?.appendChild(St),st?.appendChild(it)}):vt!==void 0&&(st.innerHTML=vt)})}(hn,Pe)}))})})(Re?.getAttribute("widget-id"))})});const Ce=t.querySelectorAll(".document-preview-close-button");Ce?.forEach(ie=>{ie.addEventListener("click",()=>{(function(){nt(this,void 0,void 0,function*(){const Ie=document.getElementById("widget-documentation-preview-modal"),Re=Ie?.querySelector("form");Re?.reset(),Ie?.close()})})()})})}return t.querySelectorAll(".wb-initial-empty").forEach(J=>{J.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(J=>{J.removeAttribute("onclick")}),G})}function hr(b,o){return nt(this,void 0,void 0,function*(){var e,n,p,y,C,x,g,r,t,G,W,j;const V=(n=(e=b?.data)===null||e===void 0?void 0:e.the_widget)===null||n===void 0?void 0:n.the_widget_s_child;if(o.push(b),V&&V.length)for(let J=0;J<V.length;J++){const Z=V[J];let le=(r=(g=(x=(C=(y=(p=Z?.data.the_child_widget)===null||p===void 0?void 0:p.the_child_widget_info)===null||y===void 0?void 0:y.data)===null||C===void 0?void 0:C.the_widget)===null||x===void 0?void 0:x.the_widget_origin)===null||g===void 0?void 0:g.data)===null||r===void 0?void 0:r.the_origin;const Ce=!!(!((W=(G=(t=Z?.data)===null||t===void 0?void 0:t.the_child_widget)===null||G===void 0?void 0:G.the_child_widget_use_latest)===null||W===void 0)&&W.data);console.log("originIdOfChildWidget",le,Z),le=Number(le)||!1;let ie=null;if(Ce&&le){const Ie=yield(0,nn.qj)(le);ie=((j=Ie?.data)===null||j===void 0?void 0:j[0])||[],ie.useLatest=!0,Z.data.the_child_widget.the_child_widget_info=ie}Z.data.the_child_widget.the_child_widget_info.sChildId=Z.id,yield hr(Z.data.the_child_widget.the_child_widget_info,o)}})}function pr(b,o){return nt(this,void 0,void 0,function*(){const e=[],n=[...b];try{const p=n.find(y=>y.id===o);yield hr(p,e)}catch(p){console.error("convert to real bulk error",p)}return e})}function fr(b){return nt(this,arguments,void 0,function*(o,e=[],n=""){let p=yield(0,nn.Cp)(o);const y=yield pr(p,o);return yield Bn(o,[],y)})}function Bn(b){return nt(this,arguments,void 0,function*(o,e=[],n,p=""){var y,C,x,g,r,t,G,W,j,V,J,Z,le,Ce,ie,Ie,Re,Pe,Ve,$e,qe,ot,yt,Ke,Ot,gt,wt,rn,cn,sn,an,ln,dn,un,hn,wn,qt,vt,Qt,Mt,st,xe,It,kt,Nt,At,Et,pt,Lt,it,St,_t,bt,Bt,Pt,Vt,jt;try{const Fe=new Io,rt=(0,nn.ix)(n,o);console.log("getWidgetBulkFromId output ->",rt),e.push(o);const Be=(y=rt?.data)===null||y===void 0?void 0:y.the_widget;Fe.name=(x=(C=Be?.the_widget_name)===null||C===void 0?void 0:C.data)===null||x===void 0?void 0:x.the_name,Fe.html=(r=(g=Be?.the_widget_html)===null||g===void 0?void 0:g.data)===null||r===void 0?void 0:r.the_html,Fe.css=(G=(t=Be?.the_widget_css)===null||t===void 0?void 0:t.data)===null||G===void 0?void 0:G.the_css,Fe.js=(j=(W=Be?.the_widget_js)===null||W===void 0?void 0:W.data)===null||j===void 0?void 0:j.the_js,Fe.origin=Number(((J=(V=Be?.the_widget_origin)===null||V===void 0?void 0:V.data)===null||J===void 0?void 0:J.the_origin)||((le=(Z=Be?.the_widget_origin)===null||Z===void 0?void 0:Z.data)===null||le===void 0?void 0:le.the_originid)),Fe.version=(ie=(Ce=Be?.the_widget_version)===null||Ce===void 0?void 0:Ce.data)===null||ie===void 0?void 0:ie.the_version,Fe.clean=(Re=(Ie=Be?.the_widget_clean)===null||Ie===void 0?void 0:Ie.data)===null||Re===void 0?void 0:Re.the_clean,Fe.timestamp=(Ve=(Pe=Be?.the_widget_timestamp)===null||Pe===void 0?void 0:Pe.data)===null||Ve===void 0?void 0:Ve.the_timestamp,Fe.id=rt?.id;const ht=(qe=($e=Be?.the_widget_type)===null||$e===void 0?void 0:$e.data)===null||qe===void 0?void 0:qe.the_type;Fe.type=ht=="null"||ht==null?"the_element_name":ht,Fe.after_render=(yt=(ot=Be?.the_widget_after_render)===null||ot===void 0?void 0:ot.data)===null||yt===void 0?void 0:yt.the_after_render,Fe.before_render=(Ot=(Ke=Be?.the_widget_before_render)===null||Ke===void 0?void 0:Ke.data)===null||Ot===void 0?void 0:Ot.the_before_render,Fe.update=(wt=(gt=Be?.the_widget_update)===null||gt===void 0?void 0:gt.data)===null||wt===void 0?void 0:wt.the_update,Fe.widgetId=o,Fe.mount_child=(cn=(rn=Be?.the_widget_mount_child)===null||rn===void 0?void 0:rn.data)===null||cn===void 0?void 0:cn.the_mount_child;const at=Be?.the_widget_s_child;rt.useLatest&&(Fe.useLatest=!0),rt.sChildId&&(Fe.sChildId=rt.sChildId);const xn=(sn=Be?.the_widget_s_css_library)===null||sn===void 0?void 0:sn.map(ze=>{var ct,et,tt,Se,lt,mt,Ct,dt;return{order:(Se=(tt=(et=(ct=ze?.data)===null||ct===void 0?void 0:ct.the_css_library)===null||et===void 0?void 0:et.the_css_library_order)===null||tt===void 0?void 0:tt.data)===null||Se===void 0?void 0:Se.the_order,url:(dt=(Ct=(mt=(lt=ze?.data)===null||lt===void 0?void 0:lt.the_css_library)===null||mt===void 0?void 0:mt.the_css_library_url)===null||Ct===void 0?void 0:Ct.data)===null||dt===void 0?void 0:dt.the_url}}),En=(an=Be?.the_widget_s_js_library)===null||an===void 0?void 0:an.map(ze=>{var ct,et,tt,Se,lt,mt,Ct,dt;return{order:(Se=(tt=(et=(ct=ze?.data)===null||ct===void 0?void 0:ct.the_js_library)===null||et===void 0?void 0:et.the_js_library_order)===null||tt===void 0?void 0:tt.data)===null||Se===void 0?void 0:Se.the_order,url:(dt=(Ct=(mt=(lt=ze?.data)===null||lt===void 0?void 0:lt.the_js_library)===null||mt===void 0?void 0:mt.the_js_library_url)===null||Ct===void 0?void 0:Ct.data)===null||dt===void 0?void 0:dt.the_url}});Fe.library={css:xn||[],js:En||[]};const Rt=(dn=(ln=Be?.the_widget_assistant)===null||ln===void 0?void 0:ln.data)===null||dn===void 0?void 0:dn.the_assistant;Fe.assistant={id:(hn=(un=Rt?.the_assistant_id)===null||un===void 0?void 0:un.data)===null||hn===void 0?void 0:hn.the_id,input:(qt=(wn=Rt?.the_assistant_input)===null||wn===void 0?void 0:wn.data)===null||qt===void 0?void 0:qt.the_input,type:(Qt=(vt=Rt?.the_assistant_type)===null||vt===void 0?void 0:vt.data)===null||Qt===void 0?void 0:Qt.the_type};const In=(Mt=Be?.the_widget_s_custom_function)===null||Mt===void 0?void 0:Mt.map(ze=>{var ct,et,tt,Se,lt,mt,Ct;const dt=(ct=ze?.data)===null||ct===void 0?void 0:ct.the_custom_function;return{id:ze?.id,name:(tt=(et=dt?.the_custom_function_name)===null||et===void 0?void 0:et.data)===null||tt===void 0?void 0:tt.the_name,slug:(lt=(Se=dt?.the_custom_function_slug)===null||Se===void 0?void 0:Se.data)===null||lt===void 0?void 0:lt.the_slug,code:(Ct=(mt=dt?.the_custom_function_code)===null||mt===void 0?void 0:mt.data)===null||Ct===void 0?void 0:Ct.the_code}});if(console.log("customFunctionList -> ",In),Fe.custom_functions=In,at?.length)for(let ze=0;ze<at.length;ze++){const ct=((It=(xe=(st=at[ze])===null||st===void 0?void 0:st.data.the_child_widget)===null||xe===void 0?void 0:xe.the_child_widget_info)===null||It===void 0?void 0:It.id)||((Et=(At=(Nt=(kt=at[ze])===null||kt===void 0?void 0:kt.data.the_child_widget)===null||Nt===void 0?void 0:Nt.the_child_widget_parent)===null||At===void 0?void 0:At.data)===null||Et===void 0?void 0:Et.the_parent),et=yield Bn(ct,e,n,p),tt=(_t=(St=(it=(Lt=(pt=at[ze])===null||pt===void 0?void 0:pt.data)===null||Lt===void 0?void 0:Lt.the_child_widget)===null||it===void 0?void 0:it.the_child_widget_type)===null||St===void 0?void 0:St.data)===null||_t===void 0?void 0:_t.the_type,Se=(jt=(Vt=(Pt=(Bt=(bt=at[ze])===null||bt===void 0?void 0:bt.data)===null||Bt===void 0?void 0:Bt.the_child_widget)===null||Pt===void 0?void 0:Pt.the_child_widget_wrapper)===null||Vt===void 0?void 0:Vt.data)===null||jt===void 0?void 0:jt.the_wrapper;et.type=tt=="null"||tt==null?"the_element_name":tt,et.wrapper=Se,Fe.children.push(et)}return Fe}catch(Fe){throw Fe instanceof Error&&console.error("error converting bulkwidget to widget tree",Fe.message),Fe}})}function Pn(b,o){return nt(this,arguments,void 0,function*(e,n,p=!0,y,C){var x,g;const r=new _n;r.html=e.html,r.widgetType=e.type,r.componentDidMountFunction=e.before_render,r.addEventFunction=e.after_render,r.mountChildWidgetsFunction=e.mount_child,r.widgetState=Object.assign({},C),r.customFunctions=e.custom_functions,y&&(r.data=y),n.innerHTML="";const t=n;if(t&&(yield r.mount(t),e.widget=r,e.children.length>0&&((x=r.childWidgetElement)===null||x===void 0?void 0:x.length)>0))for(let G=0;G<((g=e.children)===null||g===void 0?void 0:g.length);G++){const W=e.children[G];for(let j=0;j<r.childWidgetElement.length;j++){const V=r.childWidgetElement[j];if(W.wrapper===V.id){const J=yr(W);W.html=`<div id="${W.wrapper}">${W.html}</div>`;const Z=yield Pn(J,V,!1,r.data,r.widgetState);r.childWidgets.push(Z),r.css=r.css+Z.css+`#${V.id} { ${W.css} }`,Z.dataChange(le=>{var Ce;const ie=(Ce=le?.type)===null||Ce===void 0?void 0:Ce.characterValue;ie&&(r.childrenData[ie]=le)})}}}return console.log("newWidget ->",r,e),yield Lo(n,".widget_container"),r})}function Ao(b,o){return nt(this,arguments,void 0,function*(e,n,p=!0,y,C){var x,g;let r=new _n;r.html=e.html,r.widgetState=Object.assign({},y),r.widgetType=e.type,r.componentDidMountFunction=e.before_render,r.addEventFunction=e.after_render,r.mountChildWidgetsFunction=e.mount_child,r.customFunctions=e.custom_functions,r.inDevelopment=C!==!1,n.innerHTML="";let t=n;if(t&&(yield r.mount(t),e.widget=r,e.children.length>0&&((x=r.childWidgetElement)===null||x===void 0?void 0:x.length)>0))for(let G=0;G<((g=e.children)===null||g===void 0?void 0:g.length);G++){let W=e.children[G];for(let j=0;j<r.childWidgetElement.length;j++){let V=r.childWidgetElement[j];if(W.wrapper===V.id){const J=yr(W),Z=yield Ao(J,V,!1,r.widgetState,C);r.childWidgets.push(Z),r.css=r.css+Z.css+`#${V.id} { ${W.css} }`,Z.dataChange(le=>{var Ce;console.log("This is the data change in child",le);let ie=(Ce=le?.type)===null||Ce===void 0?void 0:Ce.characterValue;ie&&(r.childrenData[ie]=le),console.log("new child data",r.childrenData)})}}}return console.log("newWidget ->",r,e),r})}function yr(b){return b.html=b.html.replace(/<[^>]*\bclass=["'][^"']*\bwidget_container\b[^"']*["'][^>]*>/g,o=>o.replace(/\bwidget_container\b/g,"").trim()),b.html=b.html.replace(/<[^>]*\bdraggable=["'][^"']*\btrue\b[^"']*["'][^>]*>/g,o=>o.replace(/\btrue\b/g,"false").trim()),b.html=b.html.replace(/<[^>]*\bclass=["'][^"']*\bhover-element\b[^"']*["'][^>]*>/g,o=>o.replace(/\bhover-element\b/g,"").trim()),b.html=b.html.replace(/<[^>]*\bclass=["'][^"']*\bwb-block\b[^"']*["'][^>]*>/g,o=>o.replace(/\bwb-block\b/g,"").trim()),b.html=b.html.replace(/<[^>]*onclick="widgetSelected\(event\)"\s*,?\s*ondragover="_dragService\.dragOverWidgetElement\(event\)"\s*,?\s*ondrop="_dragService\.dropWidgetElement\(event\)"\s*,?\s*ondragstart="_dragService\.dragStartWidgetElement\(event\)"\s*,?\s*ondragend="_dragService\.dragEndWidgetElement\(event\)"[^>]*>/g,o=>o.replace(/onclick="widgetSelected\(event\)"/g,'onclick=""').replace(/ondragover="_dragService\.dragOverWidgetElement\(event\)"/g,'ondragover=""').replace(/ondrop="_dragService\.dropWidgetElement\(event\)"/g,'ondrop=""').replace(/ondragstart="_dragService\.dragStartWidgetElement\(event\)"/g,'ondragstart=""').replace(/ondragend="_dragService\.dragEndWidgetElement\(event\)"/g,'ondragend=""').trim()),b.html=b.html.replace(/<[^>]*\bondragstart=["'][^"']*\b_dragService\.onWidgetDragStart\(event\)\b[^"']*["'][^>]*>/g,o=>o.replace(/\b_dragService\.onWidgetDragStart\(event\)\b/g,"").trim()),b}function Ic(b,o){return nt(this,void 0,void 0,function*(){return b&&b.nodeType===1&&b.querySelectorAll(o).forEach(e=>{for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.remove()}),b})}function Lo(b,o){return nt(this,void 0,void 0,function*(){const e=b.querySelectorAll(o);for(const n of e){const p=n.parentElement;if(p){for(;n.firstChild;){const y=yield Ic(n.firstChild,o);p.insertBefore(y,n)}p.removeChild(n)}}})}var kc=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function Vn(b){return kc(this,arguments,void 0,function*(o,e=null,n="",p={concepts:[],connections:[]}){var y,C,x,g;if(be)try{const W=yield Me("CreateData",{json:o,ofConcept:e,typeConcept:n,actions:p});return!((C=(y=W?.actions)===null||y===void 0?void 0:y.concepts)===null||C===void 0)&&C.length&&(p.concepts=JSON.parse(JSON.stringify(W.actions.concepts))),!((g=(x=W?.actions)===null||x===void 0?void 0:x.connections)===null||g===void 0)&&g.length&&(p.connections=JSON.parse(JSON.stringify(W.actions.connections))),W.data}catch(W){console.error("CreateTheComposition sw error: ",W),He(W)}let r=999,t=999,G=(0,ne.o)();for(const W in o){let j=Nc(W);if(typeof o[W]!="string"&&typeof o[W]!="number")if(e==null||e.id==0)G=yield(0,me.k)(j,"",!0,r,4,t,void 0,p),Array.isArray(o[W])&&(j=gr(j)),yield Vn(o[W],G,j,p);else{Array.isArray(o[W])&&(j=vr(j));let V=vr(W),J=yield(0,me.k)(j,"",!0,r,4,t,void 0,p);G=J;let Z=mr(n,V),le=yield(0,Oe.$)(Z,t,r,r,p);yield(0,Gt.F)(e.id,J.id,le.id,1e3,le.characterValue,r,p),Array.isArray(o[W])&&(j=gr(j)),yield Vn(o[W],J,j,p)}else{let V=mr(n,W),J=yield(0,Oe.$)(V,t,r,r,p),Z=yield(0,me.k)(W,o[W].toString(),!1,r,4,t,void 0,p);console.log("this is the type concept in down",J,Z),e!=null&&(yield(0,Gt.F)(e.id,Z.id,J.id,1e3,V,r,p))}}return G})}function Nc(b){return b.startsWith("the_")?b:"the_"+b}function gr(b){return b.endsWith("_s")?b:b+"_s"}function vr(b){return b.replace(/_s$/,"")}const Ac=b=>/^[+-]?\d+(\.\d+)?$/.test(b);function mr(b,o){return Ac(o)?b+"_":b+"_"+function(e){return e.startsWith("the_")?e.slice(4):e}(o)}class Cr{constructor(){this.prototype="",this.required=[],this.optional=[],this.field="string",this.childPrototypes=[],this.isCompositional=!1,this.options=[],this.isQueryType=!1,this.querySelector=null,this.concepts=[],this.connections=[],this.addedConcepts=[],this.addedConnections=[]}}function xt(b,o){if(Array.isArray(b)&&Array.isArray(o))for(let e=0;e<o.length;e++)b.push(o[e]);return b}var on=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};function So(b){return on(this,arguments,void 0,function*(o,e=null){let n=[],p=[],y=[],C=(0,ne.o)();try{e==null&&(e=new Co,yield e.initialize());let x=[];if(o.isCompositional){if(C=yield function(t,G,W,j){return on(this,void 0,void 0,function*(){let V=(0,ne.o)(),J=yield j.MakeTheInstanceConceptLocal("the_composition","",!0,999,999,999),Z=yield j.MakeTheTypeConceptLocal("the_composition_type",999,999,999),le=yield j.MakeTheTypeConceptLocal(t,999,999,999),Ce=yield j.CreateTheConnectionLocal(J.id,le.id,Z.id,1e3,"the_composition_type");return V=J,G.push(Z),G.push(le),W.push(Ce),V})}(o.prototype,n,p,e),o.isQueryType){let t=yield function(W,j,V){return on(this,void 0,void 0,function*(){let J=[],Z=[],le="the_composition_filter_type",Ce="the_composition_selector",ie=yield V.MakeTheTypeConceptLocal(le,999,999,999),Ie=yield V.MakeTheTypeConceptLocal(Ce,999,999,999);if(W!=null){let Re=yield V.MakeTheTypeConceptLocal(W.selector,999,999,999);J.push(Re);let Pe=yield V.MakeTheTypeConceptLocal(W.filterType,999,999,999);J.push(Re),J.push(Pe);let Ve=yield V.CreateTheConnectionLocal(j.id,Re.id,Ie.id,1e3,Ce,999);Z.push(Ve);let $e=yield V.CreateTheConnectionLocal(j.id,Pe.id,ie.id,1e3,le,999);Z.push($e)}return{concepts:J,connections:Z}})}(o.querySelector,C,e),G=t.concepts;xt(y,t.connections),xt(n,G)}if(o.options.length>0){let t=yield function(W,j,V){return on(this,void 0,void 0,function*(){let J=[],Z=[],le="the_composition_s_option",Ce=yield V.MakeTheTypeConceptLocal(le,999,999,999);for(let ie=0;ie<W.length;ie++){let Ie=W[ie].type,Re=W[ie].value,Pe=yield V.MakeTheInstanceConceptLocal(Ie,Re,!1,999,999,999);J.push(Pe);let Ve=yield V.CreateTheConnectionLocal(j.id,Pe.id,Ce.id,1e3,le,999);Z.push(Ve)}return{concepts:J,connections:Z}})}(o.options,C,e),G=t.concepts;xt(y,t.connections),xt(n,G)}}else C=yield function(t,G){return on(this,void 0,void 0,function*(){let W=yield(0,re.A)(5124),j=yield G.MakeTheTypeConceptLocal(t,999,999,999);return yield function(J,Z,le,Ce){return on(this,void 0,void 0,function*(){let ie=yield Ce.CreateTheConceptLocal("",Z.characterValue,999,J.id,Z.id,4,!1);return ie.characterValue=Z.characterValue,ie.typeCharacter=Z.characterValue,ie.isComposition=!0,ie.type=Z,ie})}(W,j,0,G)})}(o.prototype,e),y=yield wr(o.required,C,n,e,!0),x=yield wr(o.optional,C,n,e),n.push(C);let g=Tr(C,!0,!0),r=yield e.MakeTheTypeConceptLocal(g,999,999,999);if(n.push(r),o.childPrototypes.length>0)for(let t=0;t<o.childPrototypes.length;t++){let G=yield So(o.childPrototypes[t]),W=G.mainConcept,j=G.connections,V=G.concepts,J=yield e.CreateTheConnectionLocal(C.id,W.id,r.id,1e3,g,999);y.push(J),xt(y,j),xt(n,V),n.push(W)}xt(y,x),xt(y,p),xt(n,o.addedConcepts),xt(y,o.addedConnections),o.concepts=n,o.connections=y,console.log("this is the connections",y)}catch{e?.rollbackTransaction()}return{concepts:n,connections:y,mainConcept:C}})}function Tr(b,o=!0,e=!1){var n;let p="the_prototype_of_"+((n=b.type)===null||n===void 0?void 0:n.characterValue);return p+=o?"_requires":"_optional",e&&(p+="_the_composition"),p}function wr(b,o,e,n){return on(this,arguments,void 0,function*(p,y,C,x,g=!1,r=!1){let t=[],G=[],W=Tr(y,g,r),j=yield x.MakeTheTypeConceptLocal(W,999,999,999);C.push(j);for(let V=0;V<p.length;V++){let J=yield x.MakeTheTypeConceptLocal(p[V],999,999,999);t.push(J)}for(let V=0;V<t.length;V++){let J=yield x.CreateTheConnectionLocal(y.id,t[V].id,j.id,1e3,W,999);G.push(J)}for(let V=0;V<t.length;V++)C.push(t[V]);return G})}var be,Ze=function(b,o,e,n){return new(e||(e=Promise))(function(p,y){function C(r){try{g(n.next(r))}catch(t){y(t)}}function x(r){try{g(n.throw(r))}catch(t){y(t)}}function g(r){var t;r.done?p(r.value):(t=r.value,t instanceof e?t:new e(function(G){G(t)})).then(C,x)}g((n=n.apply(b,o||[])).next())})};const Lc=Date.now().toString(36)+Math.random().toString(36).substring(2);let _o=[],Ut=[],bo=!1;function Ir(b){bo=b}function Bo(b="",o){Xe.b.BearerAccessToken=b,be&&Me("updateAccessToken",{accessToken:b,session:Xe.b.sessionId})}function kr(){return Ze(this,arguments,void 0,function*(b="",o="",e="",n="",p=!0,y="",C=void 0,x={},g={}){var r;try{s.B.BASE_URL=b,s.B.AI_URL=o,s.B.NODE_URL=n,s.B.BASE_APPLICATION=y,s.B.LOG_SERVER=(r=g.logserver)!==null&&r!==void 0?r:"https://logdev.freeschema.com",console.log("setting the logserver",s.B.LOG_SERVER,g.logserver),Bo(e);let t=Math.floor(1e8*Math.random());s.B.setRandomizer(t);const G={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1};if(s.B.FLAGS=G,s.B.FLAGS=Object.assign(Object.assign({},G),x),function(W){const j=ce.V.logfunction("initializeFlags",arguments);try{return W.logApplication&&(fc.initialize(),ce.V.logApplicationActivationStatus=!0,console.warn("Application log started.")),W.logPackage&&(ce.V.logPackageActivationStatus=!0,console.warn("Package log started.")),W.accessTracker&&(kn.J.activateStatus=!0,console.warn("Access Tracker Activated.")),W.isTest&&(c.B.isDataLoaded=!0,c.B.isCharacterLoaded=!0,c.B.isTypeLoaded=!0,c.B.isLocalDataLoaded=!0,c.B.isLocalTypeLoaded=!0,c.B.isLocalCharacterLoaded=!0,c.B.isConnectionLoaded=!0,c.B.isConnectionTypeLoaded=!0,c.B.isLocalConnectionLoaded=!0),ce.V.logUpdate(j),W}catch(V){throw(0,u.ey)(j,"initializeFlags",V),V}}(s.B.FLAGS),!("serviceWorker"in navigator))return yield Gn(),void console.warn("Service Worker not supported in this browser.");if(yield function(){return Ze(this,void 0,void 0,function*(){var W;let j=sessionStorage.getItem("cacheServers"),V=sessionStorage.getItem("config"),J=(W=sessionStorage.getItem("session"))!==null&&W!==void 0?W:"999",Z=parseInt(J);j!==void 0&&j!=="undefined"||(s.B.NODE_CACHE_URL=s.B.BASE_URL),j=JSON.parse(j);const le=JSON.parse(V);j&&le&&le.documentationWidget&&Z!=999?(Array.isArray(j)&&j.length?s.B.NODE_CACHE_URL=j[0]:s.B.NODE_CACHE_URL=s.B.BASE_URL,Xe.b.sessionId=Z,s.B.DOCUMENTATION_WIDGET=le.documentationWidget):yield function(){return Ze(this,void 0,void 0,function*(){let Ce;try{if(Ce=yield fetch(s.B.getAppConfig(),{method:"POST"}),!Ce.ok)throw new Error("Failed to sync data to the server.");const ie=yield Ce.json();ie.success&&(sessionStorage.setItem("cacheServers",JSON.stringify(ie.servers)),sessionStorage.setItem("config",JSON.stringify(ie.config)),sessionStorage.setItem("session",ie.session),Xe.b.sessionId=ie.session,ie.servers?s.B.NODE_CACHE_URL=ie.servers[0]:s.B.NODE_CACHE_URL=s.B.BASE_URL,ie.config&&(s.B.DOCUMENTATION_WIDGET=ie.config.documentationWidget))}catch(ie){console.error("error getting app config from server",ie.message)}})}(),console.log("before the payload in app",Xe.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&Me("SESSION_DATA",{type:"SESSION_DATA",data:s.B.NODE_CACHE_URL,session:Xe.b.sessionId})})}(),function(){navigator.serviceWorker.addEventListener("message",W=>Ze(this,void 0,void 0,function*(){var j,V,J,Z;try{if(W.data&&W.data.type==="API_401"){const{requestDetails:le}=W.data,Ce={method:le.method,headers:new Headers(le.headers),body:le.body},ie=yield fetch(le.url,Ce),Ie=yield ie?.json();(V=(j=navigator?.serviceWorker)===null||j===void 0?void 0:j.controller)===null||V===void 0||V.postMessage({type:"API_RESPONSE",messageId:W.data.messageId,response:new Response(Ie,{status:ie.status,statusText:ie.statusText,headers:ie.headers})})}}catch(le){console.error("Error during listenPostMessage",le),(Z=(J=navigator?.serviceWorker)===null||J===void 0?void 0:J.controller)===null||Z===void 0||Z.postMessage({type:"API_RESPONSE",messageId:W.data.messageId})}}))}(),function(){Qi.x.addEventListener("message",W=>Ze(this,void 0,void 0,function*(){const{type:j,payload:V}=W.data;if(!j)return;let J={success:!1,data:void 0};Nr[j]?yield Nr[j](V):console.warn(`Unable to handle "${j}" case in BC service worker`)}))}(),C&&C.activate&&C.manual)yield new Promise((W,j)=>{navigator.serviceWorker.ready.then(V=>Ze(this,void 0,void 0,function*(){console.log("registraions ready",V),be=V.active,yield Tn(),W("done")})).catch(V=>{console.error("Error: Ready service worker",V),j(V)}).finally(()=>console.log("Finally service worker ready done")),setTimeout(()=>j("Timeout ready"),3e4)});else if(C&&C?.activate)try{console.log("service worker initialiing"),yield function(W){var j=arguments;return Ze(this,void 0,void 0,function*(){const V=ce.V.logfunction("handleRegisterServiceWorker",j);yield new Promise((J,Z)=>{var le,Ce;let ie=!1;navigator.serviceWorker.register((le=W.pathToSW)!==null&&le!==void 0?le:"./serviceWorker.bundle.js",{scope:(Ce=W.scope)!==null&&Ce!==void 0?Ce:"/"}).then(Ie=>Ze(this,void 0,void 0,function*(){console.log("Service Worker registered:",Ie),setInterval(()=>{Ut.length&&jn()},2e3),console.log("update listen start"),Ie.onupdatefound=()=>{const Re=Ie.installing;console.log("new worker",Re),Re&&(Re.onstatechange=()=>Ze(this,void 0,void 0,function*(){console.warn("on state change triggered",Re.state,navigator.serviceWorker.controller),Re.state==="installing"&&(console.log("Service Worker installing"),be=void 0),Re.state!=="activated"&&Re.state!=="redundant"||!navigator.serviceWorker.controller||(be=Re,console.log("New Service Worker is active",Ie),setTimeout(()=>{console.log("Message Processed after some time"),jn()},5e3),yield Tn(),ie=!0,jn(),J())}))},Ie.addEventListener("controllerchange",()=>Ze(this,void 0,void 0,function*(){console.warn("controller change triggered",navigator.serviceWorker.controller),navigator.serviceWorker.controller&&(be=navigator.serviceWorker.controller,console.warn("Service worker has been activated; controller change"),yield Tn())})),(Ie.installing||Ie.waiting||Ie.active)&&Ie.addEventListener("statechange",Re=>Ze(this,void 0,void 0,function*(){var Pe;((Pe=Re?.target)===null||Pe===void 0?void 0:Pe.state)==="activating"&&(be=navigator.serviceWorker.controller,console.warn("Service Worker is activating statechange"),yield Tn())})),Ie.active?(console.log("active sw"),be=Ie.active,yield Tn(),jn(),J()):setTimeout(()=>{ie||Z("Not Completed Initialization")},1e4)})).catch(Ie=>Ze(this,void 0,void 0,function*(){yield Gn(),Z(Ie),console.error("Service Worker registration failed:",Ie),(0,u.ey)(V,"handleRegisterServiceWorker",Ie)}))})})}(C)}catch(W){yield Gn(),console.error("Unable to start service worker",W)}else yield Gn(),console.warn("Service Worker not activated");return!0}catch(t){yield Gn(),console.warn("Cannot initialize the system",t)}})}function Me(b,o){return Ze(this,arguments,void 0,function*(e,n,p=0){let y=!1;const C=Math.random().toString(36).substring(2);n.messageId=C,n.TABID=Lc;const x=JSON.parse(JSON.stringify(n));let g;return e!="checkProcess"&&p==0&&(g=setInterval(()=>Ze(this,void 0,void 0,function*(){if(console.log("process took more than one second",C,e,y),!y&&!(yield function(r,t){return Ze(this,void 0,void 0,function*(){var G;try{const W=yield Me("checkProcess",{checkMessageId:r});if(console.log("check interval data res for type ",t,r,W.data),(G=W?.data)===null||G===void 0?void 0:G.processing)return!0}catch(W){return console.error("error on checing executing process",t,r,W),!1}})}(C,e))&&(clearInterval(g),!y)){if(console.log("Failed to handle type "+e+" message not found "+C,"retrying: ",p==0,e),p==0&&e!="checkProcess")return console.log("retrying ",e,C),yield Me(e,n,p+1);console.log("Failed to handle type "+e+" "+C)}}),2e3)),new Promise((r,t)=>{if(navigator.serviceWorker.controller||be||console.log("will go to queue",navigator.serviceWorker.controller,be,e),navigator.serviceWorker.controller||be){const G=W=>{var j,V,J,Z,le,Ce;((j=W?.data)===null||j===void 0?void 0:j.messageId)==C&&(y=!0,clearInterval(g),W.data.success||(((V=W?.data)===null||V===void 0?void 0:V.status)==401?t((0,u.ry)(new Response("Unauthorized",{status:401,statusText:(J=W?.data)===null||J===void 0?void 0:J.statusText}))):((Z=W?.data)===null||Z===void 0?void 0:Z.status)==500?t((0,u.Mb)(new Response("Internal Server Error",{status:500,statusText:(le=W?.data)===null||le===void 0?void 0:le.statusText}))):(console.error("Error in the response from worker:",W),t(`Failed to handle action ${e} ${JSON.stringify(n)}, Response: ${JSON.stringify(W.data)}`))),!((Ce=W.data)===null||Ce===void 0)&&Ce.actions&&(n.actions=JSON.parse(JSON.stringify(W.data.actions))),r(W.data),navigator.serviceWorker.removeEventListener("message",G))};if(navigator.serviceWorker.addEventListener("message",G),navigator.serviceWorker.controller)e!="checkProcess"&&console.log("sent to sw",e,C),navigator.serviceWorker.controller.postMessage({type:e,payload:x});else if(be){console.warn(`controller not found but serviceWorker is available. messageId: ${C}, type: ${e}`);try{be.postMessage({type:e,payload:x})}catch(W){console.log("Retrying again on catch service worker",W),be.postMessage({type:e,payload:x})}}else console.warn(`Service Worker hasn't loaded yet. messageId: ${C}, type: ${e}`),console.info("ready",navigator.serviceWorker.ready),setTimeout(()=>{console.warn(`Re-Trying after certain time. messageId: ${C}, type: ${e}`),be?(console.info("This is triggered "),be?.postMessage({type:e,payload:n})):(console.log("not ready",e),clearInterval(g),t("Service worker not ready"))},3e4);setTimeout(()=>{clearInterval(g),t(`No response from service worker after timeout: ${e}`),navigator.serviceWorker.removeEventListener("message",G)},21e4)}else Ut.push({message:{type:e,payload:x}}),console.log("Message Queued",e,n),console.log(navigator.serviceWorker.controller,be,e),e=="init"&&(clearInterval(g),r(null))})})}const Nr={GetLinkListener:b=>Ze(void 0,void 0,void 0,function*(){const o=_o.find(e=>e.listenerId==b.listenerId);return o?.callback(b.data),{success:!0}}),dispatchEvent:b=>Ze(void 0,void 0,void 0,function*(){if(be){let o=new CustomEvent(b.id||"",b.data);dispatchEvent(o)}return{success:!0}}),checkInit:b=>Ze(void 0,void 0,void 0,function*(){return console.log("service worker init 0"),navigator.serviceWorker.controller&&(console.log("service worker init 1"),be=navigator.serviceWorker.controller),yield Tn(),{success:!0}})};function Gn(){return Ze(this,void 0,void 0,function*(){yield(0,pc.A)();const b=new Date().getTime();yield(0,F.A)().then(()=>{let o=new Date().getTime()-b;console.log("The time taken to prepare concept  data is  ",o)}).catch(o=>{throw o}),yield(0,qi.Ay)().then(()=>{let o=new Date().getTime()-b;console.log("The time taken to prepare local concept  ",o)}).catch(o=>{throw o}),yield(0,zi.p)().then(()=>{c.B.isLocalConnectionLoaded=!0}).catch(o=>{throw o}),yield(0,qi.xd)().catch(o=>{throw console.log("This is the error in populating binary tree"),o}),yield(0,zi.a)().then(()=>{c.B.isConnectionLoaded=!0,c.B.isConnectionTypeLoaded=!0;let o=new Date().getTime()-b;console.log("The time taken to prepare connections  ",o)}).catch(o=>{throw o})})}function Ar(b,o={}){if(be||typeof window<"u"){let e=new CustomEvent(`${b}`,o);dispatchEvent(e)}else Qi.x.postMessage({type:"dispatchEvent",payload:{id:b,data:o}})}function jn(){return Ze(this,void 0,void 0,function*(){console.log("message queue",Ut);const b=Ut.find(o=>{var e;return((e=o?.message)===null||e===void 0?void 0:e.type)=="init"});if(b){console.log("Processing Init Queue poped",b?.type,b);const o=Ut.indexOf(b);o>-1&&Ut.splice(o,1),yield Me(b?.type,b?.payload)}for(console.log("message queue while",Ut);Ut.length>0;){const{message:o,resolve:e,reject:n}=Ut.shift();console.log("Queue poped",o.type,o),yield Me(o.type,o.payload)}})}const He=b=>{if(b instanceof pe.z)throw console.error("FreeSchemaResponse Error",b),b;console.error("Service Worker Error",b)};function Tn(){return Ze(this,void 0,void 0,function*(){yield Me("init",{url:s.B.BASE_URL,aiurl:s.B.AI_URL,accessToken:Xe.b.BearerAccessToken,nodeUrl:s.B.NODE_URL,enableAi:!1,applicationName:s.B.BASE_APPLICATION,flags:s.B.FLAGS})})}}},br={};function pn(he){var q=br[he];if(q!==void 0)return q.exports;var m=br[he]={exports:{}};return Uc[he](m,m.exports,pn),m.exports}pn.d=(he,q)=>{for(var m in q)pn.o(q,m)&&!pn.o(he,m)&&Object.defineProperty(he,m,{enumerable:!0,get:q[m]})},pn.o=(he,q)=>Object.prototype.hasOwnProperty.call(he,q),pn.r=he=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(he,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(he,"__esModule",{value:!0})};var z=pn(4059),Oc=z.ADMIN,Mc=z.ALLID,Pc=z.AccessTracker,Vc=z.AddGhostConcept,jc=z.Anomaly,Hc=z.BaseUrl,$c=z.BinaryTree,Jc=z.BuildWidgetFromId,zc=z.BuilderStatefulWidget,qc=z.Composition,Qc=z.CompositionBinaryTree,Xc=z.CompositionNode,Yc=z.Concept,Zc=z.ConceptsData,Kc=z.Connection,es=z.ConnectionData,ts=z.CreateComposition,ns=z.CreateConnection,os=z.CreateConnectionBetweenEntityLocal,is=z.CreateConnectionBetweenTwoConcepts,rs=z.CreateConnectionBetweenTwoConceptsGeneral,cs=z.CreateConnectionBetweenTwoConceptsLocal,ss=z.CreateData,as=z.CreateDefaultConcept,ls=z.CreateDefaultLConcept,ds=z.CreateSession,us=z.CreateSessionVisit,hs=z.CreateTheCompositionLocal,ps=z.CreateTheCompositionWithCache,fs=z.CreateTheConnection,ys=z.CreateTheConnectionGeneral,gs=z.CreateTheConnectionLocal,vs=z.DATAID,ms=z.DATAIDDATE,Cs=z.DelayFunctionExecution,Ts=z.DeleteConceptById,ws=z.DeleteConceptLocal,Is=z.DeleteConnectionById,ks=z.DeleteConnectionByIdBulk,Ns=z.DeleteConnectionByType,As=z.DeleteConnectionByTypeBulk,Ls=z.DeleteUser,Ss=z.DependencyObserver,_s=z.FilterSearch,bs=z.FormatFromConnections,Bs=z.FormatFromConnectionsAltered,Gs=z.FreeschemaQuery,xs=z.FreeschemaQueryApi,Es=z.GetAllConnectionsOfComposition,Rs=z.GetAllConnectionsOfCompositionBulk,Ds=z.GetAllTheConnectionsByTypeAndOfTheConcept,Ws=z.GetComposition,Fs=z.GetCompositionBulk,Us=z.GetCompositionBulkWithDataId,Os=z.GetCompositionFromConnectionsWithDataId,Ms=z.GetCompositionFromConnectionsWithDataIdFromConnections,Ps=z.GetCompositionFromConnectionsWithDataIdInObject,Vs=z.GetCompositionFromConnectionsWithDataIdIndex,js=z.GetCompositionFromConnectionsWithIndex,Hs=z.GetCompositionFromConnectionsWithIndexFromConnections,$s=z.GetCompositionFromMemoryWithConnections,Js=z.GetCompositionList,zs=z.GetCompositionListAll,qs=z.GetCompositionListAllWithId,Qs=z.GetCompositionListListener,Xs=z.GetCompositionListLocal,Ys=z.GetCompositionListLocalWithId,Zs=z.GetCompositionListWithId,Ks=z.GetCompositionListWithIdUpdated,ea=z.GetCompositionListener,ta=z.GetCompositionLocal,na=z.GetCompositionLocalWithId,oa=z.GetCompositionWithAllIds,ia=z.GetCompositionWithCache,ra=z.GetCompositionWithDataIdBulk,ca=z.GetCompositionWithDataIdWithCache,sa=z.GetCompositionWithId,aa=z.GetCompositionWithIdAndDateFromMemory,la=z.GetConceptBulk,da=z.GetConceptByCharacter,ua=z.GetConceptByCharacterAndCategoryLocal,ha=z.GetConceptByCharacterAndType,pa=z.GetConnectionBetweenTwoConceptsLinker,fa=z.GetConnectionBulk,ya=z.GetConnectionById,ga=z.GetConnectionDataPrefetch,va=z.GetConnectionOfTheConcept,ma=z.GetLink,Ca=z.GetLinkListListener,Ta=z.GetLinkListener,wa=z.GetLinkRaw,Ia=z.GetLinkerConnectionFromConcepts,ka=z.GetLinkerConnectionToConcepts,Na=z.GetRelation,Aa=z.GetRelationLocal,La=z.GetRelationRaw,Sa=z.GetTheConcept,_a=z.GetTheConceptLocal,ba=z.GetUserGhostId,Ba=z.JUSTDATA,Ga=z.LConcept,xa=z.LConnection,Ea=z.LISTNORMAL,Ra=z.LocalConceptsData,Da=z.LocalSyncData,Wa=z.LocalTransaction,Fa=z.Logger,Ua=z.LoginToBackend,Oa=z.MakeTheInstanceConcept,Ma=z.MakeTheInstanceConceptLocal,Pa=z.MakeTheTimestamp,Va=z.MakeTheTypeConceptApi,ja=z.MakeTheTypeConceptLocal,Ha=z.NORMAL,$a=z.PRIVATE,Ja=z.PUBLIC,za=z.PatcherStructure,qa=z.Prototype,Qa=z.RAW,Xa=z.RecursiveSearchApi,Ya=z.RecursiveSearchApiNewRawFullLinker,Za=z.RecursiveSearchApiRaw,Ka=z.RecursiveSearchApiRawFullLinker,el=z.RecursiveSearchApiWithInternalConnections,tl=z.RecursiveSearchListener,nl=z.SchemaQuery,ol=z.SchemaQueryListener,il=z.SearchAllConcepts,rl=z.SearchLinkInternal,cl=z.SearchLinkInternalAll,sl=z.SearchLinkMultipleAll,al=z.SearchLinkMultipleAllObservable,ll=z.SearchLinkMultipleApi,dl=z.SearchQuery,ul=z.SearchStructure,hl=z.SearchWithLinker,pl=z.SearchWithTypeAndLinker,fl=z.SearchWithTypeAndLinkerApi,yl=z.Selector,gl=z.SessionData,vl=z.Signin,ml=z.Signup,Cl=z.SignupEntity,Tl=z.SplitStrings,wl=z.StatefulWidget,Il=z.SyncData,kl=z.TrashTheConcept,Nl=z.UpdateComposition,Al=z.UpdateCompositionLocal,Ll=z.UserBinaryTree,Sl=z.Validator,_l=z.ViewInternalData,bl=z.ViewInternalDataApi,Bl=z.WidgetTree,Gl=z.convertFromConceptToLConcept,xl=z.convertFromLConceptToConcept,El=z.convertWidgetTreeToWidget,Rl=z.convertWidgetTreeToWidgetWithWrapper,Dl=z.createFormFieldData,Wl=z.createPrototypeLocal,Fl=z.dispatchIdEvent,Ul=z.getFromDatabaseWithType,Ol=z.getObjectsFromIndexDb,Ml=z.getUserDetails,Pl=z.getWidgetBulkFromId,Vl=z.getWidgetFromId,jl=z.handleServiceWorkerException,Hl=z.hasActivatedSW,$l=z.init,Jl=z.recursiveFetch,zl=z.recursiveFetchNew,ql=z.removeAllChildren,Ql=z.renderLatestWidget,Xl=z.renderPage,Yl=z.renderWidget,Zl=z.searchLinkMultipleListener,Kl=z.sendEmail,ed=z.sendMessage,td=z.serviceWorker,nd=z.setHasActivatedSW,od=z.storeToDatabase,id=z.subscribedListeners,rd=z.unwrapContainers,cd=z.updateAccessToken,sd=z.uploadAttachment,ad=z.uploadFile,ld=z.uploadImage,dd=z.validDocumentFormats,ud=z.validImageFormats;const hd=Object.freeze(Object.defineProperty({__proto__:null,ADMIN:Oc,ALLID:Mc,AccessTracker:Pc,AddGhostConcept:Vc,Anomaly:jc,BaseUrl:Hc,BinaryTree:$c,BuildWidgetFromId:Jc,BuilderStatefulWidget:zc,Composition:qc,CompositionBinaryTree:Qc,CompositionNode:Xc,Concept:Yc,ConceptsData:Zc,Connection:Kc,ConnectionData:es,CreateComposition:ts,CreateConnection:ns,CreateConnectionBetweenEntityLocal:os,CreateConnectionBetweenTwoConcepts:is,CreateConnectionBetweenTwoConceptsGeneral:rs,CreateConnectionBetweenTwoConceptsLocal:cs,CreateData:ss,CreateDefaultConcept:as,CreateDefaultLConcept:ls,CreateSession:ds,CreateSessionVisit:us,CreateTheCompositionLocal:hs,CreateTheCompositionWithCache:ps,CreateTheConnection:fs,CreateTheConnectionGeneral:ys,CreateTheConnectionLocal:gs,DATAID:vs,DATAIDDATE:ms,DelayFunctionExecution:Cs,DeleteConceptById:Ts,DeleteConceptLocal:ws,DeleteConnectionById:Is,DeleteConnectionByIdBulk:ks,DeleteConnectionByType:Ns,DeleteConnectionByTypeBulk:As,DeleteUser:Ls,DependencyObserver:Ss,FilterSearch:_s,FormatFromConnections:bs,FormatFromConnectionsAltered:Bs,FreeschemaQuery:Gs,FreeschemaQueryApi:xs,GetAllConnectionsOfComposition:Es,GetAllConnectionsOfCompositionBulk:Rs,GetAllTheConnectionsByTypeAndOfTheConcept:Ds,GetComposition:Ws,GetCompositionBulk:Fs,GetCompositionBulkWithDataId:Us,GetCompositionFromConnectionsWithDataId:Os,GetCompositionFromConnectionsWithDataIdFromConnections:Ms,GetCompositionFromConnectionsWithDataIdInObject:Ps,GetCompositionFromConnectionsWithDataIdIndex:Vs,GetCompositionFromConnectionsWithIndex:js,GetCompositionFromConnectionsWithIndexFromConnections:Hs,GetCompositionFromMemoryWithConnections:$s,GetCompositionList:Js,GetCompositionListAll:zs,GetCompositionListAllWithId:qs,GetCompositionListListener:Qs,GetCompositionListLocal:Xs,GetCompositionListLocalWithId:Ys,GetCompositionListWithId:Zs,GetCompositionListWithIdUpdated:Ks,GetCompositionListener:ea,GetCompositionLocal:ta,GetCompositionLocalWithId:na,GetCompositionWithAllIds:oa,GetCompositionWithCache:ia,GetCompositionWithDataIdBulk:ra,GetCompositionWithDataIdWithCache:ca,GetCompositionWithId:sa,GetCompositionWithIdAndDateFromMemory:aa,GetConceptBulk:la,GetConceptByCharacter:da,GetConceptByCharacterAndCategoryLocal:ua,GetConceptByCharacterAndType:ha,GetConnectionBetweenTwoConceptsLinker:pa,GetConnectionBulk:fa,GetConnectionById:ya,GetConnectionDataPrefetch:ga,GetConnectionOfTheConcept:va,GetLink:ma,GetLinkListListener:Ca,GetLinkListener:Ta,GetLinkRaw:wa,GetLinkerConnectionFromConcepts:Ia,GetLinkerConnectionToConcepts:ka,GetRelation:Na,GetRelationLocal:Aa,GetRelationRaw:La,GetTheConcept:Sa,GetTheConceptLocal:_a,GetUserGhostId:ba,JUSTDATA:Ba,LConcept:Ga,LConnection:xa,LISTNORMAL:Ea,LocalConceptsData:Ra,LocalSyncData:Da,LocalTransaction:Wa,Logger:Fa,LoginToBackend:Ua,MakeTheInstanceConcept:Oa,MakeTheInstanceConceptLocal:Ma,MakeTheTimestamp:Pa,MakeTheTypeConceptApi:Va,MakeTheTypeConceptLocal:ja,NORMAL:Ha,PRIVATE:$a,PUBLIC:Ja,PatcherStructure:za,Prototype:qa,RAW:Qa,RecursiveSearchApi:Xa,RecursiveSearchApiNewRawFullLinker:Ya,RecursiveSearchApiRaw:Za,RecursiveSearchApiRawFullLinker:Ka,RecursiveSearchApiWithInternalConnections:el,RecursiveSearchListener:tl,SchemaQuery:nl,SchemaQueryListener:ol,SearchAllConcepts:il,SearchLinkInternal:rl,SearchLinkInternalAll:cl,SearchLinkMultipleAll:sl,SearchLinkMultipleAllObservable:al,SearchLinkMultipleApi:ll,SearchQuery:dl,SearchStructure:ul,SearchWithLinker:hl,SearchWithTypeAndLinker:pl,SearchWithTypeAndLinkerApi:fl,Selector:yl,SessionData:gl,Signin:vl,Signup:ml,SignupEntity:Cl,SplitStrings:Tl,StatefulWidget:wl,SyncData:Il,TrashTheConcept:kl,UpdateComposition:Nl,UpdateCompositionLocal:Al,UserBinaryTree:Ll,Validator:Sl,ViewInternalData:_l,ViewInternalDataApi:bl,WidgetTree:Bl,convertFromConceptToLConcept:Gl,convertFromLConceptToConcept:xl,convertWidgetTreeToWidget:El,convertWidgetTreeToWidgetWithWrapper:Rl,createFormFieldData:Dl,createPrototypeLocal:Wl,dispatchIdEvent:Fl,getFromDatabaseWithType:Ul,getObjectsFromIndexDb:Ol,getUserDetails:Ml,getWidgetBulkFromId:Pl,getWidgetFromId:Vl,handleServiceWorkerException:jl,hasActivatedSW:Hl,init:$l,recursiveFetch:Jl,recursiveFetchNew:zl,removeAllChildren:ql,renderLatestWidget:Ql,renderPage:Xl,renderWidget:Yl,searchLinkMultipleListener:Zl,sendEmail:Kl,sendMessage:ed,serviceWorker:td,setHasActivatedSW:nd,storeToDatabase:od,subscribedListeners:id,unwrapContainers:rd,updateAccessToken:cd,uploadAttachment:sd,uploadFile:ad,uploadImage:ld,validDocumentFormats:dd,validImageFormats:ud},Symbol.toStringTag,{value:"Module"}));export{pa as A,Na as B,ns as C,gs as D,fa as E,Oa as F,hs as G,ol as I,Sa as J,Rl as K,cd as L,ws as M,Ts as O,Is as P,Ba as Q,Cl as U,vs as W,Gs as X,El as Z,ja as a,Hc as b,Bl as c,os as d,Da as e,Vl as f,wl as g,$l as h,Sl as i,Ns as j,dl as k,Ha as l,sl as m,Ka as n,Zl as o,qs as p,zc as q,Ma as r,hd as s,Wa as t,Jl as u,Ds as v,nl as w,_s as x,Ql as y,_a as z};
