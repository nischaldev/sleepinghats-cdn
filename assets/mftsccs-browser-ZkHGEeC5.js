var Ur={};/*! For license information please see main.bundle.js.LICENSE.txt */var ta={8937:Q=>{var E={}.hasOwnProperty,y=/[ -,\.\/:-@\[-\^`\{-~]/,N=/[ -,\.\/:-@\[\]\^`\{-~]/,L=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,n=function u(I,w){(w=function(c,T){if(!c)return T;var m={};for(var k in T)m[k]=E.call(c,k)?c[k]:T[k];return m}(w,u.options)).quotes!="single"&&w.quotes!="double"&&(w.quotes="single");for(var r=w.quotes=="double"?'"':"'",e=w.isIdentifier,o=I.charAt(0),l="",f=0,v=I.length;f<v;){var C=I.charAt(f++),i=C.charCodeAt(),a=void 0;if(i<32||i>126){if(i>=55296&&i<=56319&&f<v){var t=I.charCodeAt(f++);(64512&t)==56320?i=((1023&i)<<10)+(1023&t)+65536:f--}a="\\"+i.toString(16).toUpperCase()+" "}else a=w.escapeEverything?y.test(C)?"\\"+C:"\\"+i.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(C)?"\\"+i.toString(16).toUpperCase()+" ":C=="\\"||!e&&(C=='"'&&r==C||C=="'"&&r==C)||e&&N.test(C)?"\\"+C:C;l+=a}return e&&(/^-[-\d]/.test(l)?l="\\-"+l.slice(1):/\d/.test(o)&&(l="\\3"+o+" "+l.slice(1))),l=l.replace(L,function(c,T,m){return T&&T.length%2?c:(T||"")+m}),!e&&w.wrap?r+l+r:l};n.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},n.version="3.0.0",Q.exports=n},8633:Q=>{var E=String,y=function(){return{isColorSupported:!1,reset:E,bold:E,dim:E,italic:E,underline:E,inverse:E,hidden:E,strikethrough:E,black:E,red:E,green:E,yellow:E,blue:E,magenta:E,cyan:E,white:E,gray:E,bgBlack:E,bgRed:E,bgGreen:E,bgYellow:E,bgBlue:E,bgMagenta:E,bgCyan:E,bgWhite:E,blackBright:E,redBright:E,greenBright:E,yellowBright:E,blueBright:E,magentaBright:E,cyanBright:E,whiteBright:E,bgBlackBright:E,bgRedBright:E,bgGreenBright:E,bgYellowBright:E,bgBlueBright:E,bgMagentaBright:E,bgCyanBright:E,bgWhiteBright:E}};Q.exports=y(),Q.exports.createColors=y},2110:(Q,E,y)=>{const{AtRule:N,Rule:L}=y(2895);let n=y(7149);function u(i,a){let t;try{n(c=>{t=c}).processSync(i)}catch(c){throw i.includes(":")?a?a.error("Missed semicolon"):c:a?a.error(c.message):c}return t.at(0)}function I(i,a){let t=!1;return i.each(c=>{if(c.type==="nesting"){let T=a.clone({});c.value!=="&"?c.replaceWith(u(c.value.replace("&",T.toString()))):c.replaceWith(T),t=!0}else"nodes"in c&&c.nodes&&I(c,a)&&(t=!0)}),t}function w(i,a){let t=[];for(let c of i.selectors){let T=u(c,i);for(let m of a.selectors){if(!m)continue;let k=u(m,a);I(k,T)||(k.prepend(n.combinator({value:" "})),k.prepend(T.clone({}))),t.push(k.toString())}}return t}function r(i,a){if(i.prev()?.type!=="comment")return a.after(i),i;let t=i.prev();return i.parent.toString().match(/[*]\/ *\n.*{/)?a.after(i).after(t):a.after(i),i}function e(i,a,t,c=!0){return a.length?(t=function(T,m,k){let b=new L({nodes:[],selector:T});return b.append(m),k.after(b),b}(i,a,t),c&&(a=[]),[t,a]):[t,a]}function o(i,a=""){let t=i.concat(a),c={};for(let T of t)c[T.replace(/^@/,"")]=!0;return c}function l(i){let a=i[v];if(a){let t,c,T,m,k=i.nodes,b=-1,_=function(R){let G=[],W=R.parent;for(;W&&W instanceof N;)G.push(W),W=W.parent;return G}(i);if(_.forEach((R,G)=>{if(a(R.name))t=R,b=G,T=m;else{let W=m;m=R.clone({nodes:[]}),W&&m.append(W),c=c||m}}),t?T?(c.append(k),t.after(T)):t.after(k):i.after(k),i.next()&&t){let R;_.slice(0,b+1).forEach((G,W,U)=>{let P=R;R=G.clone({nodes:[]}),P&&R.append(P);let M=[],j=(U[W-1]||i).next();for(;j;)M.push(j),j=j.next();R.append(M)}),R&&(T||k[k.length-1]).after(R)}}else i.after(i.nodes);i.remove()}const f=Symbol("rootRuleMergeSel"),v=Symbol("rootRuleEscapes"),C=Symbol("hasRootRule");Q.exports=(i={})=>{let a=o(["media","supports","layer","container","starting-style"],i.bubble),t=function(k){return function b(_,R,G,W=G){let U=[];if(R.each(P=>{P.type==="rule"&&G?W&&(P.selectors=w(_,P)):P.type==="atrule"&&P.nodes?k[P.name]?b(_,P,W):R[f]!==!1&&U.push(P):U.push(P)}),G&&U.length){let P=_.clone({nodes:[]});for(let M of U)P.append(M);R.prepend(P)}}}(a),c=o(["document","font-face","keyframes","-webkit-keyframes","-moz-keyframes"],i.unwrap),T=(i.rootRuleName||"at-root").replace(/^@/,""),m=i.preserveEmpty;return{Once(k){k.walkAtRules(T,b=>{(function(_){let{params:R}=_,{escapes:G,selector:W,type:U}=function(P){let M=(P=P.trim()).match(/^\((.*)\)$/);if(!M)return{selector:P,type:"basic"};let j=M[1].match(/^(with(?:out)?):(.+)$/);if(j){let z=j[1]==="with",ee=Object.fromEntries(j[2].trim().split(/\s+/).map(se=>[se,!0]));if(z&&ee.all)return{type:"noop"};let Z=se=>!!ee[se];return ee.all?Z=()=>!0:z&&(Z=se=>se!=="all"&&!ee[se]),{escapes:Z,type:"withrules"}}return{type:"unknown"}}(R);if(U==="unknown")throw _.error(`Unknown @${_.name} parameter ${JSON.stringify(R)}`);if(U==="basic"&&W){let P=new L({nodes:_.nodes,selector:W});_.removeAll(),_.append(P)}_[v]=G,_[f]=G?!G("all"):U==="noop"})(b),k[C]=!0})},postcssPlugin:"postcss-nested",RootExit(k){k[C]&&(k.walkAtRules(T,l),k[C]=!1)},Rule(k){let b=!1,_=k,R=!1,G=[];k.each(W=>{switch(W.type){case"atrule":[_,G]=e(k.selector,G,_),W.name===T?(b=!0,t(k,W,!0,W[f]),_=r(W,_)):a[W.name]?(R=!0,b=!0,t(k,W,!0),_=r(W,_)):c[W.name]?(R=!0,b=!0,t(k,W,!1),_=r(W,_)):R&&G.push(W);break;case"decl":R&&G.push(W);break;case"rule":[_,G]=e(k.selector,G,_),R=!0,b=!0,W.selectors=w(k,W),_=r(W,_)}}),e(k.selector,G,_,!1),b&&m!==!0&&(k.raws.semicolon=!0,k.nodes.length===0&&k.remove())}}},Q.exports.postcss=!0},7149:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(8349))&&N.__esModule?N:{default:N},n=function(r,e){if(r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var o=u(e);if(o&&o.has(r))return o.get(r);var l={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in r)if(v!=="default"&&Object.prototype.hasOwnProperty.call(r,v)){var C=f?Object.getOwnPropertyDescriptor(r,v):null;C&&(C.get||C.set)?Object.defineProperty(l,v,C):l[v]=r[v]}return l.default=r,o&&o.set(r,l),l}(y(680));function u(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,o=new WeakMap;return(u=function(l){return l?o:e})(r)}var I=function(r){return new L.default(r)};Object.assign(I,n),delete I.__esModule;var w=I;E.default=w,Q.exports=E.default},5170:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L,n=_(y(518)),u=_(y(339)),I=_(y(4195)),w=_(y(425)),r=_(y(7071)),e=_(y(9720)),o=_(y(5799)),l=_(y(7324)),f=b(y(5588)),v=_(y(1669)),C=_(y(1704)),i=_(y(2918)),a=_(y(263)),t=b(y(2648)),c=b(y(71)),T=b(y(1581)),m=y(9606);function k($){if(typeof WeakMap!="function")return null;var ie=new WeakMap,de=new WeakMap;return(k=function(K){return K?de:ie})($)}function b($,ie){if($&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var de=k(ie);if(de&&de.has($))return de.get($);var K={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in $)if(te!=="default"&&Object.prototype.hasOwnProperty.call($,te)){var Y=X?Object.getOwnPropertyDescriptor($,te):null;Y&&(Y.get||Y.set)?Object.defineProperty(K,te,Y):K[te]=$[te]}return K.default=$,de&&de.set($,K),K}function _($){return $&&$.__esModule?$:{default:$}}function R($,ie){for(var de=0;de<ie.length;de++){var K=ie[de];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty($,K.key,K)}}var G=((N={})[c.space]=!0,N[c.cr]=!0,N[c.feed]=!0,N[c.newline]=!0,N[c.tab]=!0,N),W=Object.assign({},G,((L={})[c.comment]=!0,L));function U($){return{line:$[t.FIELDS.START_LINE],column:$[t.FIELDS.START_COL]}}function P($){return{line:$[t.FIELDS.END_LINE],column:$[t.FIELDS.END_COL]}}function M($,ie,de,K){return{start:{line:$,column:ie},end:{line:de,column:K}}}function j($){return M($[t.FIELDS.START_LINE],$[t.FIELDS.START_COL],$[t.FIELDS.END_LINE],$[t.FIELDS.END_COL])}function z($,ie){if($)return M($[t.FIELDS.START_LINE],$[t.FIELDS.START_COL],ie[t.FIELDS.END_LINE],ie[t.FIELDS.END_COL])}function ee($,ie){var de=$[ie];if(typeof de=="string")return de.indexOf("\\")!==-1&&((0,m.ensureObject)($,"raws"),$[ie]=(0,m.unesc)(de),$.raws[ie]===void 0&&($.raws[ie]=de)),$}function Z($,ie){for(var de=-1,K=[];(de=$.indexOf(ie,de+1))!==-1;)K.push(de);return K}var se=function(){function $(X,te){te===void 0&&(te={}),this.rule=X,this.options=Object.assign({lossy:!1,safe:!1},te),this.position=0,this.css=typeof this.rule=="string"?this.rule:this.rule.selector,this.tokens=(0,t.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var Y=z(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new n.default({source:Y}),this.root.errorGenerator=this._errorGenerator();var H=new u.default({source:{start:{line:1,column:1}},sourceIndex:0});this.root.append(H),this.current=H,this.loop()}var ie,de,K=$.prototype;return K._errorGenerator=function(){var X=this;return function(te,Y){return typeof X.rule=="string"?new Error(te):X.rule.error(te,Y)}},K.attribute=function(){var X=[],te=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[t.FIELDS.TYPE]!==c.closeSquare;)X.push(this.currToken),this.position++;if(this.currToken[t.FIELDS.TYPE]!==c.closeSquare)return this.expected("closing square bracket",this.currToken[t.FIELDS.START_POS]);var Y=X.length,H={source:M(te[1],te[2],this.currToken[3],this.currToken[4]),sourceIndex:te[t.FIELDS.START_POS]};if(Y===1&&!~[c.word].indexOf(X[0][t.FIELDS.TYPE]))return this.expected("attribute",X[0][t.FIELDS.START_POS]);for(var re=0,ae="",le="",ce=null,we=!1;re<Y;){var Ie=X[re],ve=this.content(Ie),ke=X[re+1];switch(Ie[t.FIELDS.TYPE]){case c.space:if(we=!0,this.options.lossy)break;if(ce){(0,m.ensureObject)(H,"spaces",ce);var Le=H.spaces[ce].after||"";H.spaces[ce].after=Le+ve;var fe=(0,m.getProp)(H,"raws","spaces",ce,"after")||null;fe&&(H.raws.spaces[ce].after=fe+ve)}else ae+=ve,le+=ve;break;case c.asterisk:ke[t.FIELDS.TYPE]===c.equals?(H.operator=ve,ce="operator"):H.namespace&&(ce!=="namespace"||we)||!ke||(ae&&((0,m.ensureObject)(H,"spaces","attribute"),H.spaces.attribute.before=ae,ae=""),le&&((0,m.ensureObject)(H,"raws","spaces","attribute"),H.raws.spaces.attribute.before=ae,le=""),H.namespace=(H.namespace||"")+ve,(0,m.getProp)(H,"raws","namespace")&&(H.raws.namespace+=ve),ce="namespace"),we=!1;break;case c.dollar:if(ce==="value"){var _e=(0,m.getProp)(H,"raws","value");H.value+="$",_e&&(H.raws.value=_e+"$");break}case c.caret:ke[t.FIELDS.TYPE]===c.equals&&(H.operator=ve,ce="operator"),we=!1;break;case c.combinator:if(ve==="~"&&ke[t.FIELDS.TYPE]===c.equals&&(H.operator=ve,ce="operator"),ve!=="|"){we=!1;break}ke[t.FIELDS.TYPE]===c.equals?(H.operator=ve,ce="operator"):H.namespace||H.attribute||(H.namespace=!0),we=!1;break;case c.word:if(ke&&this.content(ke)==="|"&&X[re+2]&&X[re+2][t.FIELDS.TYPE]!==c.equals&&!H.operator&&!H.namespace)H.namespace=ve,ce="namespace";else if(!H.attribute||ce==="attribute"&&!we)ae&&((0,m.ensureObject)(H,"spaces","attribute"),H.spaces.attribute.before=ae,ae=""),le&&((0,m.ensureObject)(H,"raws","spaces","attribute"),H.raws.spaces.attribute.before=le,le=""),H.attribute=(H.attribute||"")+ve,(0,m.getProp)(H,"raws","attribute")&&(H.raws.attribute+=ve),ce="attribute";else if(!H.value&&H.value!==""||ce==="value"&&!we&&!H.quoteMark){var ge=(0,m.unesc)(ve),Ce=(0,m.getProp)(H,"raws","value")||"",Te=H.value||"";H.value=Te+ge,H.quoteMark=null,(ge!==ve||Ce)&&((0,m.ensureObject)(H,"raws"),H.raws.value=(Ce||Te)+ve),ce="value"}else{var Ee=ve==="i"||ve==="I";!H.value&&H.value!==""||!H.quoteMark&&!we?(H.value||H.value==="")&&(ce="value",H.value+=ve,H.raws.value&&(H.raws.value+=ve)):(H.insensitive=Ee,Ee&&ve!=="I"||((0,m.ensureObject)(H,"raws"),H.raws.insensitiveFlag=ve),ce="insensitive",ae&&((0,m.ensureObject)(H,"spaces","insensitive"),H.spaces.insensitive.before=ae,ae=""),le&&((0,m.ensureObject)(H,"raws","spaces","insensitive"),H.raws.spaces.insensitive.before=le,le=""))}we=!1;break;case c.str:if(!H.attribute||!H.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:Ie[t.FIELDS.START_POS]});var pe=(0,f.unescapeValue)(ve),Ne=pe.unescaped,Be=pe.quoteMark;H.value=Ne,H.quoteMark=Be,ce="value",(0,m.ensureObject)(H,"raws"),H.raws.value=ve,we=!1;break;case c.equals:if(!H.attribute)return this.expected("attribute",Ie[t.FIELDS.START_POS],ve);if(H.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:Ie[t.FIELDS.START_POS]});H.operator=H.operator?H.operator+ve:ve,ce="operator",we=!1;break;case c.comment:if(ce)if(we||ke&&ke[t.FIELDS.TYPE]===c.space||ce==="insensitive"){var be=(0,m.getProp)(H,"spaces",ce,"after")||"",xe=(0,m.getProp)(H,"raws","spaces",ce,"after")||be;(0,m.ensureObject)(H,"raws","spaces",ce),H.raws.spaces[ce].after=xe+ve}else{var Oe=H[ce]||"",Fe=(0,m.getProp)(H,"raws",ce)||Oe;(0,m.ensureObject)(H,"raws"),H.raws[ce]=Fe+ve}else le+=ve;break;default:return this.error('Unexpected "'+ve+'" found.',{index:Ie[t.FIELDS.START_POS]})}re++}ee(H,"attribute"),ee(H,"namespace"),this.newNode(new f.default(H)),this.position++},K.parseWhitespaceEquivalentTokens=function(X){X<0&&(X=this.tokens.length);var te=this.position,Y=[],H="",re=void 0;do if(G[this.currToken[t.FIELDS.TYPE]])this.options.lossy||(H+=this.content());else if(this.currToken[t.FIELDS.TYPE]===c.comment){var ae={};H&&(ae.before=H,H=""),re=new w.default({value:this.content(),source:j(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS],spaces:ae}),Y.push(re)}while(++this.position<X);if(H){if(re)re.spaces.after=H;else if(!this.options.lossy){var le=this.tokens[te],ce=this.tokens[this.position-1];Y.push(new o.default({value:"",source:M(le[t.FIELDS.START_LINE],le[t.FIELDS.START_COL],ce[t.FIELDS.END_LINE],ce[t.FIELDS.END_COL]),sourceIndex:le[t.FIELDS.START_POS],spaces:{before:H,after:""}}))}}return Y},K.convertWhitespaceNodesToSpace=function(X,te){var Y=this;te===void 0&&(te=!1);var H="",re="";return X.forEach(function(ae){var le=Y.lossySpace(ae.spaces.before,te),ce=Y.lossySpace(ae.rawSpaceBefore,te);H+=le+Y.lossySpace(ae.spaces.after,te&&le.length===0),re+=le+ae.value+Y.lossySpace(ae.rawSpaceAfter,te&&ce.length===0)}),re===H&&(re=void 0),{space:H,rawSpace:re}},K.isNamedCombinator=function(X){return X===void 0&&(X=this.position),this.tokens[X+0]&&this.tokens[X+0][t.FIELDS.TYPE]===c.slash&&this.tokens[X+1]&&this.tokens[X+1][t.FIELDS.TYPE]===c.word&&this.tokens[X+2]&&this.tokens[X+2][t.FIELDS.TYPE]===c.slash},K.namedCombinator=function(){if(this.isNamedCombinator()){var X=this.content(this.tokens[this.position+1]),te=(0,m.unesc)(X).toLowerCase(),Y={};te!==X&&(Y.value="/"+X+"/");var H=new C.default({value:"/"+te+"/",source:M(this.currToken[t.FIELDS.START_LINE],this.currToken[t.FIELDS.START_COL],this.tokens[this.position+2][t.FIELDS.END_LINE],this.tokens[this.position+2][t.FIELDS.END_COL]),sourceIndex:this.currToken[t.FIELDS.START_POS],raws:Y});return this.position=this.position+3,H}this.unexpected()},K.combinator=function(){var X=this;if(this.content()==="|")return this.namespace();var te=this.locateNextMeaningfulToken(this.position);if(!(te<0||this.tokens[te][t.FIELDS.TYPE]===c.comma||this.tokens[te][t.FIELDS.TYPE]===c.closeParenthesis)){var Y,H=this.currToken,re=void 0;if(te>this.position&&(re=this.parseWhitespaceEquivalentTokens(te)),this.isNamedCombinator()?Y=this.namedCombinator():this.currToken[t.FIELDS.TYPE]===c.combinator?(Y=new C.default({value:this.content(),source:j(this.currToken),sourceIndex:this.currToken[t.FIELDS.START_POS]}),this.position++):G[this.currToken[t.FIELDS.TYPE]]||re||this.unexpected(),Y){if(re){var ae=this.convertWhitespaceNodesToSpace(re),le=ae.space,ce=ae.rawSpace;Y.spaces.before=le,Y.rawSpaceBefore=ce}}else{var we=this.convertWhitespaceNodesToSpace(re,!0),Ie=we.space,ve=we.rawSpace;ve||(ve=Ie);var ke={},Le={spaces:{}};Ie.endsWith(" ")&&ve.endsWith(" ")?(ke.before=Ie.slice(0,Ie.length-1),Le.spaces.before=ve.slice(0,ve.length-1)):Ie.startsWith(" ")&&ve.startsWith(" ")?(ke.after=Ie.slice(1),Le.spaces.after=ve.slice(1)):Le.value=ve,Y=new C.default({value:" ",source:z(H,this.tokens[this.position-1]),sourceIndex:H[t.FIELDS.START_POS],spaces:ke,raws:Le})}return this.currToken&&this.currToken[t.FIELDS.TYPE]===c.space&&(Y.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(Y)}var fe=this.parseWhitespaceEquivalentTokens(te);if(fe.length>0){var _e=this.current.last;if(_e){var ge=this.convertWhitespaceNodesToSpace(fe),Ce=ge.space,Te=ge.rawSpace;Te!==void 0&&(_e.rawSpaceAfter+=Te),_e.spaces.after+=Ce}else fe.forEach(function(Ee){return X.newNode(Ee)})}},K.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;this.current._inferEndPosition();var X=new u.default({source:{start:U(this.tokens[this.position+1])},sourceIndex:this.tokens[this.position+1][t.FIELDS.START_POS]});this.current.parent.append(X),this.current=X,this.position++},K.comment=function(){var X=this.currToken;this.newNode(new w.default({value:this.content(),source:j(X),sourceIndex:X[t.FIELDS.START_POS]})),this.position++},K.error=function(X,te){throw this.root.error(X,te)},K.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[t.FIELDS.START_POS]})},K.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[t.FIELDS.START_POS])},K.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[t.FIELDS.START_POS])},K.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[t.FIELDS.START_POS])},K.unexpectedPipe=function(){return this.error("Unexpected '|'.",this.currToken[t.FIELDS.START_POS])},K.namespace=function(){var X=this.prevToken&&this.content(this.prevToken)||!0;return this.nextToken[t.FIELDS.TYPE]===c.word?(this.position++,this.word(X)):this.nextToken[t.FIELDS.TYPE]===c.asterisk?(this.position++,this.universal(X)):void this.unexpectedPipe()},K.nesting=function(){if(this.nextToken&&this.content(this.nextToken)==="|")this.position++;else{var X=this.currToken;this.newNode(new i.default({value:this.content(),source:j(X),sourceIndex:X[t.FIELDS.START_POS]})),this.position++}},K.parentheses=function(){var X=this.current.last,te=1;if(this.position++,X&&X.type===T.PSEUDO){var Y=new u.default({source:{start:U(this.tokens[this.position])},sourceIndex:this.tokens[this.position][t.FIELDS.START_POS]}),H=this.current;for(X.append(Y),this.current=Y;this.position<this.tokens.length&&te;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&te++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&te--,te?this.parse():(this.current.source.end=P(this.currToken),this.current.parent.source.end=P(this.currToken),this.position++);this.current=H}else{for(var re,ae=this.currToken,le="(";this.position<this.tokens.length&&te;)this.currToken[t.FIELDS.TYPE]===c.openParenthesis&&te++,this.currToken[t.FIELDS.TYPE]===c.closeParenthesis&&te--,re=this.currToken,le+=this.parseParenthesisToken(this.currToken),this.position++;X?X.appendToPropertyAndEscape("value",le,le):this.newNode(new o.default({value:le,source:M(ae[t.FIELDS.START_LINE],ae[t.FIELDS.START_COL],re[t.FIELDS.END_LINE],re[t.FIELDS.END_COL]),sourceIndex:ae[t.FIELDS.START_POS]}))}if(te)return this.expected("closing parenthesis",this.currToken[t.FIELDS.START_POS])},K.pseudo=function(){for(var X=this,te="",Y=this.currToken;this.currToken&&this.currToken[t.FIELDS.TYPE]===c.colon;)te+=this.content(),this.position++;return this.currToken?this.currToken[t.FIELDS.TYPE]!==c.word?this.expected(["pseudo-class","pseudo-element"],this.currToken[t.FIELDS.START_POS]):void this.splitWord(!1,function(H,re){te+=H,X.newNode(new l.default({value:te,source:z(Y,X.currToken),sourceIndex:Y[t.FIELDS.START_POS]})),re>1&&X.nextToken&&X.nextToken[t.FIELDS.TYPE]===c.openParenthesis&&X.error("Misplaced parenthesis.",{index:X.nextToken[t.FIELDS.START_POS]})}):this.expected(["pseudo-class","pseudo-element"],this.position-1)},K.space=function(){var X=this.content();this.position===0||this.prevToken[t.FIELDS.TYPE]===c.comma||this.prevToken[t.FIELDS.TYPE]===c.openParenthesis||this.current.nodes.every(function(te){return te.type==="comment"})?(this.spaces=this.optionalSpace(X),this.position++):this.position===this.tokens.length-1||this.nextToken[t.FIELDS.TYPE]===c.comma||this.nextToken[t.FIELDS.TYPE]===c.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(X),this.position++):this.combinator()},K.string=function(){var X=this.currToken;this.newNode(new o.default({value:this.content(),source:j(X),sourceIndex:X[t.FIELDS.START_POS]})),this.position++},K.universal=function(X){var te=this.nextToken;if(te&&this.content(te)==="|")return this.position++,this.namespace();var Y=this.currToken;this.newNode(new v.default({value:this.content(),source:j(Y),sourceIndex:Y[t.FIELDS.START_POS]}),X),this.position++},K.splitWord=function(X,te){for(var Y=this,H=this.nextToken,re=this.content();H&&~[c.dollar,c.caret,c.equals,c.word].indexOf(H[t.FIELDS.TYPE]);){this.position++;var ae=this.content();if(re+=ae,ae.lastIndexOf("\\")===ae.length-1){var le=this.nextToken;le&&le[t.FIELDS.TYPE]===c.space&&(re+=this.requiredSpace(this.content(le)),this.position++)}H=this.nextToken}var ce=Z(re,".").filter(function(ke){var Le=re[ke-1]==="\\",fe=/^\d+\.\d+%$/.test(re);return!Le&&!fe}),we=Z(re,"#").filter(function(ke){return re[ke-1]!=="\\"}),Ie=Z(re,"#{");Ie.length&&(we=we.filter(function(ke){return!~Ie.indexOf(ke)}));var ve=(0,a.default)(function(){var ke=Array.prototype.concat.apply([],arguments);return ke.filter(function(Le,fe){return fe===ke.indexOf(Le)})}([0].concat(ce,we)));ve.forEach(function(ke,Le){var fe,_e=ve[Le+1]||re.length,ge=re.slice(ke,_e);if(Le===0&&te)return te.call(Y,ge,ve.length);var Ce=Y.currToken,Te=Ce[t.FIELDS.START_POS]+ve[Le],Ee=M(Ce[1],Ce[2]+ke,Ce[3],Ce[2]+(_e-1));if(~ce.indexOf(ke)){var pe={value:ge.slice(1),source:Ee,sourceIndex:Te};fe=new I.default(ee(pe,"value"))}else if(~we.indexOf(ke)){var Ne={value:ge.slice(1),source:Ee,sourceIndex:Te};fe=new r.default(ee(Ne,"value"))}else{var Be={value:ge,source:Ee,sourceIndex:Te};ee(Be,"value"),fe=new e.default(Be)}Y.newNode(fe,X),X=null}),this.position++},K.word=function(X){var te=this.nextToken;return te&&this.content(te)==="|"?(this.position++,this.namespace()):this.splitWord(X)},K.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},K.parse=function(X){switch(this.currToken[t.FIELDS.TYPE]){case c.space:this.space();break;case c.comment:this.comment();break;case c.openParenthesis:this.parentheses();break;case c.closeParenthesis:X&&this.missingParenthesis();break;case c.openSquare:this.attribute();break;case c.dollar:case c.caret:case c.equals:case c.word:this.word();break;case c.colon:this.pseudo();break;case c.comma:this.comma();break;case c.asterisk:this.universal();break;case c.ampersand:this.nesting();break;case c.slash:case c.combinator:this.combinator();break;case c.str:this.string();break;case c.closeSquare:this.missingSquareBracket();case c.semicolon:this.missingBackslash();default:this.unexpected()}},K.expected=function(X,te,Y){if(Array.isArray(X)){var H=X.pop();X=X.join(", ")+" or "+H}var re=/^[aeiou]/.test(X[0])?"an":"a";return Y?this.error("Expected "+re+" "+X+', found "'+Y+'" instead.',{index:te}):this.error("Expected "+re+" "+X+".",{index:te})},K.requiredSpace=function(X){return this.options.lossy?" ":X},K.optionalSpace=function(X){return this.options.lossy?"":X},K.lossySpace=function(X,te){return this.options.lossy?te?" ":"":X},K.parseParenthesisToken=function(X){var te=this.content(X);return X[t.FIELDS.TYPE]===c.space?this.requiredSpace(te):te},K.newNode=function(X,te){return te&&(/^ +$/.test(te)&&(this.options.lossy||(this.spaces=(this.spaces||"")+te),te=!0),X.namespace=te,ee(X,"namespace")),this.spaces&&(X.spaces.before=this.spaces,this.spaces=""),this.current.append(X)},K.content=function(X){return X===void 0&&(X=this.currToken),this.css.slice(X[t.FIELDS.START_POS],X[t.FIELDS.END_POS])},K.locateNextMeaningfulToken=function(X){X===void 0&&(X=this.position+1);for(var te=X;te<this.tokens.length;){if(!W[this.tokens[te][t.FIELDS.TYPE]])return te;te++}return-1},ie=$,(de=[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}])&&R(ie.prototype,de),Object.defineProperty(ie,"prototype",{writable:!1}),$}();E.default=se,Q.exports=E.default},8349:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(5170))&&N.__esModule?N:{default:N},n=function(){function u(w,r){this.func=w||function(){},this.funcRes=null,this.options=r}var I=u.prototype;return I._shouldUpdateSelector=function(w,r){return r===void 0&&(r={}),Object.assign({},this.options,r).updateSelector!==!1&&typeof w!="string"},I._isLossy=function(w){return w===void 0&&(w={}),Object.assign({},this.options,w).lossless===!1},I._root=function(w,r){return r===void 0&&(r={}),new L.default(w,this._parseOptions(r)).root},I._parseOptions=function(w){return{lossy:this._isLossy(w)}},I._run=function(w,r){var e=this;return r===void 0&&(r={}),new Promise(function(o,l){try{var f=e._root(w,r);Promise.resolve(e.func(f)).then(function(v){var C=void 0;return e._shouldUpdateSelector(w,r)&&(C=f.toString(),w.selector=C),{transform:v,root:f,string:C}}).then(o,l)}catch(v){return void l(v)}})},I._runSync=function(w,r){r===void 0&&(r={});var e=this._root(w,r),o=this.func(e);if(o&&typeof o.then=="function")throw new Error("Selector processor returned a promise to a synchronous call.");var l=void 0;return r.updateSelector&&typeof w!="string"&&(l=e.toString(),w.selector=l),{transform:o,root:e,string:l}},I.ast=function(w,r){return this._run(w,r).then(function(e){return e.root})},I.astSync=function(w,r){return this._runSync(w,r).root},I.transform=function(w,r){return this._run(w,r).then(function(e){return e.transform})},I.transformSync=function(w,r){return this._runSync(w,r).transform},I.process=function(w,r){return this._run(w,r).then(function(e){return e.string||e.root.toString()})},I.processSync=function(w,r){var e=this._runSync(w,r);return e.string||e.root.toString()},u}();E.default=n,Q.exports=E.default},5588:(Q,E,y)=>{E.__esModule=!0,E.default=void 0,E.unescapeValue=i;var N,L=w(y(8937)),n=w(y(5286)),u=w(y(3295)),I=y(1581);function w(T){return T&&T.__esModule?T:{default:T}}function r(T,m){for(var k=0;k<m.length;k++){var b=m[k];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(T,b.key,b)}}function e(T,m){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,b){return k.__proto__=b,k},e(T,m)}var o=y(4643),l=/^('|")([^]*)\1$/,f=o(function(){},"Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead."),v=o(function(){},"Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead."),C=o(function(){},"Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.");function i(T){var m=!1,k=null,b=T,_=b.match(l);return _&&(k=_[1],b=_[2]),(b=(0,n.default)(b))!==T&&(m=!0),{deprecatedUsage:m,unescaped:b,quoteMark:k}}var a=function(T){var m,k;function b(W){var U;return W===void 0&&(W={}),U=T.call(this,function(P){if(P.quoteMark!==void 0||P.value===void 0)return P;C();var M=i(P.value),j=M.quoteMark,z=M.unescaped;return P.raws||(P.raws={}),P.raws.value===void 0&&(P.raws.value=P.value),P.value=z,P.quoteMark=j,P}(W))||this,U.type=I.ATTRIBUTE,U.raws=U.raws||{},Object.defineProperty(U.raws,"unquoted",{get:o(function(){return U.value},"attr.raws.unquoted is deprecated. Call attr.value instead."),set:o(function(){return U.value},"Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.")}),U._constructed=!0,U}k=T,(m=b).prototype=Object.create(k.prototype),m.prototype.constructor=m,e(m,k);var _,R,G=b.prototype;return G.getQuotedValue=function(W){W===void 0&&(W={});var U=this._determineQuoteMark(W),P=t[U];return(0,L.default)(this._value,P)},G._determineQuoteMark=function(W){return W.smart?this.smartQuoteMark(W):this.preferredQuoteMark(W)},G.setValue=function(W,U){U===void 0&&(U={}),this._value=W,this._quoteMark=this._determineQuoteMark(U),this._syncRawValue()},G.smartQuoteMark=function(W){var U=this.value,P=U.replace(/[^']/g,"").length,M=U.replace(/[^"]/g,"").length;if(P+M===0){var j=(0,L.default)(U,{isIdentifier:!0});if(j===U)return b.NO_QUOTE;var z=this.preferredQuoteMark(W);if(z===b.NO_QUOTE){var ee=this.quoteMark||W.quoteMark||b.DOUBLE_QUOTE,Z=t[ee];if((0,L.default)(U,Z).length<j.length)return ee}return z}return M===P?this.preferredQuoteMark(W):M<P?b.DOUBLE_QUOTE:b.SINGLE_QUOTE},G.preferredQuoteMark=function(W){var U=W.preferCurrentQuoteMark?this.quoteMark:W.quoteMark;return U===void 0&&(U=W.preferCurrentQuoteMark?W.quoteMark:this.quoteMark),U===void 0&&(U=b.DOUBLE_QUOTE),U},G._syncRawValue=function(){var W=(0,L.default)(this._value,t[this.quoteMark]);W===this._value?this.raws&&delete this.raws.value:this.raws.value=W},G._handleEscapes=function(W,U){if(this._constructed){var P=(0,L.default)(U,{isIdentifier:!0});P!==U?this.raws[W]=P:delete this.raws[W]}},G._spacesFor=function(W){var U=this.spaces[W]||{},P=this.raws.spaces&&this.raws.spaces[W]||{};return Object.assign({before:"",after:""},U,P)},G._stringFor=function(W,U,P){U===void 0&&(U=W),P===void 0&&(P=c);var M=this._spacesFor(U);return P(this.stringifyProperty(W),M)},G.offsetOf=function(W){var U=1,P=this._spacesFor("attribute");if(U+=P.before.length,W==="namespace"||W==="ns")return this.namespace?U:-1;if(W==="attributeNS"||(U+=this.namespaceString.length,this.namespace&&(U+=1),W==="attribute"))return U;U+=this.stringifyProperty("attribute").length,U+=P.after.length;var M=this._spacesFor("operator");U+=M.before.length;var j=this.stringifyProperty("operator");if(W==="operator")return j?U:-1;U+=j.length,U+=M.after.length;var z=this._spacesFor("value");U+=z.before.length;var ee=this.stringifyProperty("value");return W==="value"?ee?U:-1:(U+=ee.length,U+=z.after.length,U+=this._spacesFor("insensitive").before.length,W==="insensitive"&&this.insensitive?U:-1)},G.toString=function(){var W=this,U=[this.rawSpaceBefore,"["];return U.push(this._stringFor("qualifiedAttribute","attribute")),this.operator&&(this.value||this.value==="")&&(U.push(this._stringFor("operator")),U.push(this._stringFor("value")),U.push(this._stringFor("insensitiveFlag","insensitive",function(P,M){return!(P.length>0)||W.quoted||M.before.length!==0||W.spaces.value&&W.spaces.value.after||(M.before=" "),c(P,M)}))),U.push("]"),U.push(this.rawSpaceAfter),U.join("")},_=b,(R=[{key:"quoted",get:function(){var W=this.quoteMark;return W==="'"||W==='"'},set:function(W){v()}},{key:"quoteMark",get:function(){return this._quoteMark},set:function(W){this._constructed?this._quoteMark!==W&&(this._quoteMark=W,this._syncRawValue()):this._quoteMark=W}},{key:"qualifiedAttribute",get:function(){return this.qualifiedName(this.raws.attribute||this.attribute)}},{key:"insensitiveFlag",get:function(){return this.insensitive?"i":""}},{key:"value",get:function(){return this._value},set:function(W){if(this._constructed){var U=i(W),P=U.deprecatedUsage,M=U.unescaped,j=U.quoteMark;if(P&&f(),M===this._value&&j===this._quoteMark)return;this._value=M,this._quoteMark=j,this._syncRawValue()}else this._value=W}},{key:"insensitive",get:function(){return this._insensitive},set:function(W){W||(this._insensitive=!1,!this.raws||this.raws.insensitiveFlag!=="I"&&this.raws.insensitiveFlag!=="i"||(this.raws.insensitiveFlag=void 0)),this._insensitive=W}},{key:"attribute",get:function(){return this._attribute},set:function(W){this._handleEscapes("attribute",W),this._attribute=W}}])&&r(_.prototype,R),Object.defineProperty(_,"prototype",{writable:!1}),b}(u.default);E.default=a,a.NO_QUOTE=null,a.SINGLE_QUOTE="'",a.DOUBLE_QUOTE='"';var t=((N={"'":{quotes:"single",wrap:!0},'"':{quotes:"double",wrap:!0}}).null={isIdentifier:!0},N);function c(T,m){return""+m.before+T+m.after}},4195:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N=I(y(8937)),L=y(9606),n=I(y(4646)),u=y(1581);function I(o){return o&&o.__esModule?o:{default:o}}function w(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}function r(o,l){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},r(o,l)}var e=function(o){var l,f,v,C;function i(a){var t;return(t=o.call(this,a)||this).type=u.CLASS,t._constructed=!0,t}return f=o,(l=i).prototype=Object.create(f.prototype),l.prototype.constructor=l,r(l,f),i.prototype.valueToString=function(){return"."+o.prototype.valueToString.call(this)},v=i,(C=[{key:"value",get:function(){return this._value},set:function(a){if(this._constructed){var t=(0,N.default)(a,{isIdentifier:!0});t!==a?((0,L.ensureObject)(this,"raws"),this.raws.value=t):this.raws&&delete this.raws.value}this._value=a}}])&&w(v.prototype,C),Object.defineProperty(v,"prototype",{writable:!1}),i}(n.default);E.default=e,Q.exports=E.default},1704:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,r)}var I=function(w){var r,e;function o(l){var f;return(f=w.call(this,l)||this).type=n.COMBINATOR,f}return e=w,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),o}(L.default);E.default=I,Q.exports=E.default},425:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,r)}var I=function(w){var r,e;function o(l){var f;return(f=w.call(this,l)||this).type=n.COMMENT,f}return e=w,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),o}(L.default);E.default=I,Q.exports=E.default},4451:(Q,E,y)=>{E.__esModule=!0,E.universal=E.tag=E.string=E.selector=E.root=E.pseudo=E.nesting=E.id=E.comment=E.combinator=E.className=E.attribute=void 0;var N=C(y(5588)),L=C(y(4195)),n=C(y(1704)),u=C(y(425)),I=C(y(7071)),w=C(y(2918)),r=C(y(7324)),e=C(y(518)),o=C(y(339)),l=C(y(5799)),f=C(y(9720)),v=C(y(1669));function C(i){return i&&i.__esModule?i:{default:i}}E.attribute=function(i){return new N.default(i)},E.className=function(i){return new L.default(i)},E.combinator=function(i){return new n.default(i)},E.comment=function(i){return new u.default(i)},E.id=function(i){return new I.default(i)},E.nesting=function(i){return new w.default(i)},E.pseudo=function(i){return new r.default(i)},E.root=function(i){return new e.default(i)},E.selector=function(i){return new o.default(i)},E.string=function(i){return new l.default(i)},E.tag=function(i){return new f.default(i)},E.universal=function(i){return new v.default(i)}},3631:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(4646))&&N.__esModule?N:{default:N},n=function(o,l){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var f=u(l);if(f&&f.has(o))return f.get(o);var v={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(i!=="default"&&Object.prototype.hasOwnProperty.call(o,i)){var a=C?Object.getOwnPropertyDescriptor(o,i):null;a&&(a.get||a.set)?Object.defineProperty(v,i,a):v[i]=o[i]}return v.default=o,f&&f.set(o,v),v}(y(1581));function u(o){if(typeof WeakMap!="function")return null;var l=new WeakMap,f=new WeakMap;return(u=function(v){return v?f:l})(o)}function I(o,l){(l==null||l>o.length)&&(l=o.length);for(var f=0,v=new Array(l);f<l;f++)v[f]=o[f];return v}function w(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}function r(o,l){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},r(o,l)}var e=function(o){var l,f;function v(t){var c;return(c=o.call(this,t)||this).nodes||(c.nodes=[]),c}f=o,(l=v).prototype=Object.create(f.prototype),l.prototype.constructor=l,r(l,f);var C,i,a=v.prototype;return a.append=function(t){return t.parent=this,this.nodes.push(t),this},a.prepend=function(t){for(var c in t.parent=this,this.nodes.unshift(t),this.indexes)this.indexes[c]++;return this},a.at=function(t){return this.nodes[t]},a.index=function(t){return typeof t=="number"?t:this.nodes.indexOf(t)},a.removeChild=function(t){var c;for(var T in t=this.index(t),this.at(t).parent=void 0,this.nodes.splice(t,1),this.indexes)(c=this.indexes[T])>=t&&(this.indexes[T]=c-1);return this},a.removeAll=function(){for(var t,c=function(T,m){var k=typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(k)return(k=k.call(T)).next.bind(k);if(Array.isArray(T)||(k=function(_,R){if(_){if(typeof _=="string")return I(_,R);var G=Object.prototype.toString.call(_).slice(8,-1);return G==="Object"&&_.constructor&&(G=_.constructor.name),G==="Map"||G==="Set"?Array.from(_):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?I(_,R):void 0}}(T))||m){k&&(T=k);var b=0;return function(){return b>=T.length?{done:!0}:{done:!1,value:T[b++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(this.nodes);!(t=c()).done;)t.value.parent=void 0;return this.nodes=[],this},a.empty=function(){return this.removeAll()},a.insertAfter=function(t,c){var T;c.parent=this;for(var m,k=this.index(t),b=[],_=2;_<arguments.length;_++)b.push(arguments[_]);for(var R in(T=this.nodes).splice.apply(T,[k+1,0,c].concat(b)),c.parent=this,this.indexes)k<(m=this.indexes[R])&&(this.indexes[R]=m+arguments.length-1);return this},a.insertBefore=function(t,c){var T;c.parent=this;for(var m,k=this.index(t),b=[],_=2;_<arguments.length;_++)b.push(arguments[_]);for(var R in(T=this.nodes).splice.apply(T,[k,0,c].concat(b)),c.parent=this,this.indexes)(m=this.indexes[R])>=k&&(this.indexes[R]=m+arguments.length-1);return this},a._findChildAtPosition=function(t,c){var T=void 0;return this.each(function(m){if(m.atPosition){var k=m.atPosition(t,c);if(k)return T=k,!1}else if(m.isAtPosition(t,c))return T=m,!1}),T},a.atPosition=function(t,c){return this.isAtPosition(t,c)?this._findChildAtPosition(t,c)||this:void 0},a._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},a.each=function(t){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var c=this.lastEach;if(this.indexes[c]=0,this.length){for(var T,m;this.indexes[c]<this.length&&(T=this.indexes[c],(m=t(this.at(T),T))!==!1);)this.indexes[c]+=1;return delete this.indexes[c],m!==!1&&void 0}},a.walk=function(t){return this.each(function(c,T){var m=t(c,T);if(m!==!1&&c.length&&(m=c.walk(t)),m===!1)return!1})},a.walkAttributes=function(t){var c=this;return this.walk(function(T){if(T.type===n.ATTRIBUTE)return t.call(c,T)})},a.walkClasses=function(t){var c=this;return this.walk(function(T){if(T.type===n.CLASS)return t.call(c,T)})},a.walkCombinators=function(t){var c=this;return this.walk(function(T){if(T.type===n.COMBINATOR)return t.call(c,T)})},a.walkComments=function(t){var c=this;return this.walk(function(T){if(T.type===n.COMMENT)return t.call(c,T)})},a.walkIds=function(t){var c=this;return this.walk(function(T){if(T.type===n.ID)return t.call(c,T)})},a.walkNesting=function(t){var c=this;return this.walk(function(T){if(T.type===n.NESTING)return t.call(c,T)})},a.walkPseudos=function(t){var c=this;return this.walk(function(T){if(T.type===n.PSEUDO)return t.call(c,T)})},a.walkTags=function(t){var c=this;return this.walk(function(T){if(T.type===n.TAG)return t.call(c,T)})},a.walkUniversals=function(t){var c=this;return this.walk(function(T){if(T.type===n.UNIVERSAL)return t.call(c,T)})},a.split=function(t){var c=this,T=[];return this.reduce(function(m,k,b){var _=t.call(c,k);return T.push(k),_?(m.push(T),T=[]):b===c.length-1&&m.push(T),m},[])},a.map=function(t){return this.nodes.map(t)},a.reduce=function(t,c){return this.nodes.reduce(t,c)},a.every=function(t){return this.nodes.every(t)},a.some=function(t){return this.nodes.some(t)},a.filter=function(t){return this.nodes.filter(t)},a.sort=function(t){return this.nodes.sort(t)},a.toString=function(){return this.map(String).join("")},C=v,(i=[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}])&&w(C.prototype,i),Object.defineProperty(C,"prototype",{writable:!1}),v}(L.default);E.default=e,Q.exports=E.default},8500:(Q,E,y)=>{E.__esModule=!0,E.isComment=E.isCombinator=E.isClassName=E.isAttribute=void 0,E.isContainer=function(m){return!(!u(m)||!m.walk)},E.isIdentifier=void 0,E.isNamespace=function(m){return w(m)||t(m)},E.isNesting=void 0,E.isNode=u,E.isPseudo=void 0,E.isPseudoClass=function(m){return v(m)&&!T(m)},E.isPseudoElement=T,E.isUniversal=E.isTag=E.isString=E.isSelector=E.isRoot=void 0;var N,L=y(1581),n=((N={})[L.ATTRIBUTE]=!0,N[L.CLASS]=!0,N[L.COMBINATOR]=!0,N[L.COMMENT]=!0,N[L.ID]=!0,N[L.NESTING]=!0,N[L.PSEUDO]=!0,N[L.ROOT]=!0,N[L.SELECTOR]=!0,N[L.STRING]=!0,N[L.TAG]=!0,N[L.UNIVERSAL]=!0,N);function u(m){return typeof m=="object"&&n[m.type]}function I(m,k){return u(k)&&k.type===m}var w=I.bind(null,L.ATTRIBUTE);E.isAttribute=w;var r=I.bind(null,L.CLASS);E.isClassName=r;var e=I.bind(null,L.COMBINATOR);E.isCombinator=e;var o=I.bind(null,L.COMMENT);E.isComment=o;var l=I.bind(null,L.ID);E.isIdentifier=l;var f=I.bind(null,L.NESTING);E.isNesting=f;var v=I.bind(null,L.PSEUDO);E.isPseudo=v;var C=I.bind(null,L.ROOT);E.isRoot=C;var i=I.bind(null,L.SELECTOR);E.isSelector=i;var a=I.bind(null,L.STRING);E.isString=a;var t=I.bind(null,L.TAG);E.isTag=t;var c=I.bind(null,L.UNIVERSAL);function T(m){return v(m)&&m.value&&(m.value.startsWith("::")||m.value.toLowerCase()===":before"||m.value.toLowerCase()===":after"||m.value.toLowerCase()===":first-letter"||m.value.toLowerCase()===":first-line")}E.isUniversal=c},7071:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,r)}var I=function(w){var r,e;function o(l){var f;return(f=w.call(this,l)||this).type=n.ID,f}return e=w,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),o.prototype.valueToString=function(){return"#"+w.prototype.valueToString.call(this)},o}(L.default);E.default=I,Q.exports=E.default},680:(Q,E,y)=>{E.__esModule=!0;var N=y(1581);Object.keys(N).forEach(function(u){u!=="default"&&u!=="__esModule"&&(u in E&&E[u]===N[u]||(E[u]=N[u]))});var L=y(4451);Object.keys(L).forEach(function(u){u!=="default"&&u!=="__esModule"&&(u in E&&E[u]===L[u]||(E[u]=L[u]))});var n=y(8500);Object.keys(n).forEach(function(u){u!=="default"&&u!=="__esModule"&&(u in E&&E[u]===n[u]||(E[u]=n[u]))})},3295:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N=n(y(8937)),L=y(9606);function n(r){return r&&r.__esModule?r:{default:r}}function u(r,e){for(var o=0;o<e.length;o++){var l=e[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}function I(r,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o},I(r,e)}var w=function(r){var e,o;function l(){return r.apply(this,arguments)||this}o=r,(e=l).prototype=Object.create(o.prototype),e.prototype.constructor=e,I(e,o);var f,v,C=l.prototype;return C.qualifiedName=function(i){return this.namespace?this.namespaceString+"|"+i:i},C.valueToString=function(){return this.qualifiedName(r.prototype.valueToString.call(this))},f=l,(v=[{key:"namespace",get:function(){return this._namespace},set:function(i){if(i===!0||i==="*"||i==="&")return this._namespace=i,void(this.raws&&delete this.raws.namespace);var a=(0,N.default)(i,{isIdentifier:!0});this._namespace=i,a!==i?((0,L.ensureObject)(this,"raws"),this.raws.namespace=a):this.raws&&delete this.raws.namespace}},{key:"ns",get:function(){return this._namespace},set:function(i){this.namespace=i}},{key:"namespaceString",get:function(){if(this.namespace){var i=this.stringifyProperty("namespace");return i===!0?"":i}return""}}])&&u(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),l}(n(y(4646)).default);E.default=w,Q.exports=E.default},2918:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,r)}var I=function(w){var r,e;function o(l){var f;return(f=w.call(this,l)||this).type=n.NESTING,f.value="&",f}return e=w,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),o}(L.default);E.default=I,Q.exports=E.default},4646:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N=y(9606);function L(I,w){for(var r=0;r<w.length;r++){var e=w[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(I,e.key,e)}}var n=function I(w,r){if(typeof w!="object"||w===null)return w;var e=new w.constructor;for(var o in w)if(w.hasOwnProperty(o)){var l=w[o];o==="parent"&&typeof l=="object"?r&&(e[o]=r):e[o]=l instanceof Array?l.map(function(f){return I(f,e)}):I(l,e)}return e},u=function(){function I(o){o===void 0&&(o={}),Object.assign(this,o),this.spaces=this.spaces||{},this.spaces.before=this.spaces.before||"",this.spaces.after=this.spaces.after||""}var w,r,e=I.prototype;return e.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function(){if(this.parent){for(var o in arguments)this.parent.insertBefore(this,arguments[o]);this.remove()}return this},e.next=function(){return this.parent.at(this.parent.index(this)+1)},e.prev=function(){return this.parent.at(this.parent.index(this)-1)},e.clone=function(o){o===void 0&&(o={});var l=n(this);for(var f in o)l[f]=o[f];return l},e.appendToPropertyAndEscape=function(o,l,f){this.raws||(this.raws={});var v=this[o],C=this.raws[o];this[o]=v+l,C||f!==l?this.raws[o]=(C||v)+f:delete this.raws[o]},e.setPropertyAndEscape=function(o,l,f){this.raws||(this.raws={}),this[o]=l,this.raws[o]=f},e.setPropertyWithoutEscape=function(o,l){this[o]=l,this.raws&&delete this.raws[o]},e.isAtPosition=function(o,l){if(this.source&&this.source.start&&this.source.end)return!(this.source.start.line>o||this.source.end.line<o||this.source.start.line===o&&this.source.start.column>l||this.source.end.line===o&&this.source.end.column<l)},e.stringifyProperty=function(o){return this.raws&&this.raws[o]||this[o]},e.valueToString=function(){return String(this.stringifyProperty("value"))},e.toString=function(){return[this.rawSpaceBefore,this.valueToString(),this.rawSpaceAfter].join("")},w=I,(r=[{key:"rawSpaceBefore",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.before;return o===void 0&&(o=this.spaces&&this.spaces.before),o||""},set:function(o){(0,N.ensureObject)(this,"raws","spaces"),this.raws.spaces.before=o}},{key:"rawSpaceAfter",get:function(){var o=this.raws&&this.raws.spaces&&this.raws.spaces.after;return o===void 0&&(o=this.spaces.after),o||""},set:function(o){(0,N.ensureObject)(this,"raws","spaces"),this.raws.spaces.after=o}}])&&L(w.prototype,r),Object.defineProperty(w,"prototype",{writable:!1}),I}();E.default=u,Q.exports=E.default},7324:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(3631))&&N.__esModule?N:{default:N},n=y(1581);function u(w,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,r)}var I=function(w){var r,e;function o(l){var f;return(f=w.call(this,l)||this).type=n.PSEUDO,f}return e=w,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),o.prototype.toString=function(){var l=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),l,this.rawSpaceAfter].join("")},o}(L.default);E.default=I,Q.exports=E.default},518:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(3631))&&N.__esModule?N:{default:N},n=y(1581);function u(r,e){for(var o=0;o<e.length;o++){var l=e[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}function I(r,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o},I(r,e)}var w=function(r){var e,o;function l(i){var a;return(a=r.call(this,i)||this).type=n.ROOT,a}o=r,(e=l).prototype=Object.create(o.prototype),e.prototype.constructor=e,I(e,o);var f,v,C=l.prototype;return C.toString=function(){var i=this.reduce(function(a,t){return a.push(String(t)),a},[]).join(",");return this.trailingComma?i+",":i},C.error=function(i,a){return this._error?this._error(i,a):new Error(i)},f=l,(v=[{key:"errorGenerator",set:function(i){this._error=i}}])&&u(f.prototype,v),Object.defineProperty(f,"prototype",{writable:!1}),l}(L.default);E.default=w,Q.exports=E.default},339:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(3631))&&N.__esModule?N:{default:N},n=y(1581);function u(w,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,r)}var I=function(w){var r,e;function o(l){var f;return(f=w.call(this,l)||this).type=n.SELECTOR,f}return e=w,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),o}(L.default);E.default=I,Q.exports=E.default},5799:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(4646))&&N.__esModule?N:{default:N},n=y(1581);function u(w,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,r)}var I=function(w){var r,e;function o(l){var f;return(f=w.call(this,l)||this).type=n.STRING,f}return e=w,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),o}(L.default);E.default=I,Q.exports=E.default},9720:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(3295))&&N.__esModule?N:{default:N},n=y(1581);function u(w,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,r)}var I=function(w){var r,e;function o(l){var f;return(f=w.call(this,l)||this).type=n.TAG,f}return e=w,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),o}(L.default);E.default=I,Q.exports=E.default},1581:(Q,E)=>{E.__esModule=!0,E.UNIVERSAL=E.TAG=E.STRING=E.SELECTOR=E.ROOT=E.PSEUDO=E.NESTING=E.ID=E.COMMENT=E.COMBINATOR=E.CLASS=E.ATTRIBUTE=void 0,E.TAG="tag",E.STRING="string",E.SELECTOR="selector",E.ROOT="root",E.PSEUDO="pseudo",E.NESTING="nesting",E.ID="id",E.COMMENT="comment",E.COMBINATOR="combinator",E.CLASS="class",E.ATTRIBUTE="attribute",E.UNIVERSAL="universal"},1669:(Q,E,y)=>{E.__esModule=!0,E.default=void 0;var N,L=(N=y(3295))&&N.__esModule?N:{default:N},n=y(1581);function u(w,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},u(w,r)}var I=function(w){var r,e;function o(l){var f;return(f=w.call(this,l)||this).type=n.UNIVERSAL,f.value="*",f}return e=w,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),o}(L.default);E.default=I,Q.exports=E.default},263:(Q,E)=>{E.__esModule=!0,E.default=function(y){return y.sort(function(N,L){return N-L})},Q.exports=E.default},71:(Q,E)=>{E.__esModule=!0,E.word=E.tilde=E.tab=E.str=E.space=E.slash=E.singleQuote=E.semicolon=E.plus=E.pipe=E.openSquare=E.openParenthesis=E.newline=E.greaterThan=E.feed=E.equals=E.doubleQuote=E.dollar=E.cr=E.comment=E.comma=E.combinator=E.colon=E.closeSquare=E.closeParenthesis=E.caret=E.bang=E.backslash=E.at=E.asterisk=E.ampersand=void 0,E.ampersand=38,E.asterisk=42,E.at=64,E.comma=44,E.colon=58,E.semicolon=59,E.openParenthesis=40,E.closeParenthesis=41,E.openSquare=91,E.closeSquare=93,E.dollar=36,E.tilde=126,E.caret=94,E.plus=43,E.equals=61,E.pipe=124,E.greaterThan=62,E.space=32,E.singleQuote=39,E.doubleQuote=34,E.slash=47,E.bang=33,E.backslash=92,E.cr=13,E.feed=12,E.newline=10,E.tab=9,E.str=39,E.comment=-1,E.word=-2,E.combinator=-3},2648:(Q,E,y)=>{E.__esModule=!0,E.FIELDS=void 0,E.default=function(f){var v,C,i,a,t,c,T,m,k,b,_,R,G=[],W=f.css.valueOf(),U=W.length,P=-1,M=1,j=0,z=0;function ee(Z,se){if(!f.safe)throw f.error("Unclosed "+Z,M,j-P,j);m=(W+=se).length-1}for(;j<U;){switch((v=W.charCodeAt(j))===n.newline&&(P=j,M+=1),v){case n.space:case n.tab:case n.newline:case n.cr:case n.feed:m=j;do m+=1,(v=W.charCodeAt(m))===n.newline&&(P=m,M+=1);while(v===n.space||v===n.newline||v===n.tab||v===n.cr||v===n.feed);R=n.space,i=M,C=m-P-1,z=m;break;case n.plus:case n.greaterThan:case n.tilde:case n.pipe:m=j;do m+=1,v=W.charCodeAt(m);while(v===n.plus||v===n.greaterThan||v===n.tilde||v===n.pipe);R=n.combinator,i=M,C=j-P,z=m;break;case n.asterisk:case n.ampersand:case n.bang:case n.comma:case n.equals:case n.dollar:case n.caret:case n.openSquare:case n.closeSquare:case n.colon:case n.semicolon:case n.openParenthesis:case n.closeParenthesis:R=v,i=M,C=j-P,z=(m=j)+1;break;case n.singleQuote:case n.doubleQuote:_=v===n.singleQuote?"'":'"',m=j;do for(a=!1,(m=W.indexOf(_,m+1))===-1&&ee("quote",_),t=m;W.charCodeAt(t-1)===n.backslash;)t-=1,a=!a;while(a);R=n.str,i=M,C=j-P,z=m+1;break;default:v===n.slash&&W.charCodeAt(j+1)===n.asterisk?((m=W.indexOf("*/",j+2)+1)===0&&ee("comment","*/"),(c=(T=W.slice(j,m+1).split(`
`)).length-1)>0?(k=M+c,b=m-T[c].length):(k=M,b=P),R=n.comment,M=k,i=k,C=m-b):v===n.slash?(R=v,i=M,C=j-P,z=(m=j)+1):(m=o(W,j),R=n.word,i=M,C=m-P),z=m+1}G.push([R,M,j-P,i,C,j,z]),b&&(P=b,b=null),j=z}return G};var N,L,n=function(f,v){if(f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var C=u(v);if(C&&C.has(f))return C.get(f);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in f)if(t!=="default"&&Object.prototype.hasOwnProperty.call(f,t)){var c=a?Object.getOwnPropertyDescriptor(f,t):null;c&&(c.get||c.set)?Object.defineProperty(i,t,c):i[t]=f[t]}return i.default=f,C&&C.set(f,i),i}(y(71));function u(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,C=new WeakMap;return(u=function(i){return i?C:v})(f)}for(var I=((N={})[n.tab]=!0,N[n.newline]=!0,N[n.cr]=!0,N[n.feed]=!0,N),w=((L={})[n.space]=!0,L[n.tab]=!0,L[n.newline]=!0,L[n.cr]=!0,L[n.feed]=!0,L[n.ampersand]=!0,L[n.asterisk]=!0,L[n.bang]=!0,L[n.comma]=!0,L[n.colon]=!0,L[n.semicolon]=!0,L[n.openParenthesis]=!0,L[n.closeParenthesis]=!0,L[n.openSquare]=!0,L[n.closeSquare]=!0,L[n.singleQuote]=!0,L[n.doubleQuote]=!0,L[n.plus]=!0,L[n.pipe]=!0,L[n.tilde]=!0,L[n.greaterThan]=!0,L[n.equals]=!0,L[n.dollar]=!0,L[n.caret]=!0,L[n.slash]=!0,L),r={},e=0;e<22;e++)r["0123456789abcdefABCDEF".charCodeAt(e)]=!0;function o(f,v){var C,i=v;do{if(C=f.charCodeAt(i),w[C])return i-1;C===n.backslash?i=l(f,i)+1:i++}while(i<f.length);return i-1}function l(f,v){var C=v,i=f.charCodeAt(C+1);if(!I[i])if(r[i]){var a=0;do C++,a++,i=f.charCodeAt(C+1);while(r[i]&&a<6);a<6&&i===n.space&&C++}else C++;return C}E.FIELDS={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6}},1557:(Q,E)=>{E.__esModule=!0,E.default=function(y){for(var N=arguments.length,L=new Array(N>1?N-1:0),n=1;n<N;n++)L[n-1]=arguments[n];for(;L.length>0;){var u=L.shift();y[u]||(y[u]={}),y=y[u]}},Q.exports=E.default},6291:(Q,E)=>{E.__esModule=!0,E.default=function(y){for(var N=arguments.length,L=new Array(N>1?N-1:0),n=1;n<N;n++)L[n-1]=arguments[n];for(;L.length>0;){var u=L.shift();if(!y[u])return;y=y[u]}return y},Q.exports=E.default},9606:(Q,E,y)=>{E.__esModule=!0,E.unesc=E.stripComments=E.getProp=E.ensureObject=void 0;var N=I(y(5286));E.unesc=N.default;var L=I(y(6291));E.getProp=L.default;var n=I(y(1557));E.ensureObject=n.default;var u=I(y(8354));function I(w){return w&&w.__esModule?w:{default:w}}E.stripComments=u.default},8354:(Q,E)=>{E.__esModule=!0,E.default=function(y){for(var N="",L=y.indexOf("/*"),n=0;L>=0;){N+=y.slice(n,L);var u=y.indexOf("*/",L+2);if(u<0)return N;n=u+2,L=y.indexOf("/*",n)}return N+y.slice(n)},Q.exports=E.default},5286:(Q,E)=>{function y(L){for(var n=L.toLowerCase(),u="",I=!1,w=0;w<6&&n[w]!==void 0;w++){var r=n.charCodeAt(w);if(I=r===32,!(r>=97&&r<=102||r>=48&&r<=57))break;u+=n[w]}if(u.length!==0){var e=parseInt(u,16);return e>=55296&&e<=57343||e===0||e>1114111?["",u.length+(I?1:0)]:[String.fromCodePoint(e),u.length+(I?1:0)]}}E.__esModule=!0,E.default=function(L){if(!N.test(L))return L;for(var n="",u=0;u<L.length;u++)if(L[u]!=="\\")n+=L[u];else{var I=y(L.slice(u+1,u+7));if(I!==void 0){n+=I[0],u+=I[1];continue}if(L[u+1]==="\\"){n+="\\",u++;continue}L.length===u+1&&(n+=L[u])}return n};var N=/\\/;Q.exports=E.default},396:(Q,E,y)=>{let N=y(7793);class L extends N{constructor(u){super(u),this.type="atrule"}append(...u){return this.proxyOf.nodes||(this.nodes=[]),super.append(...u)}prepend(...u){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...u)}}Q.exports=L,L.default=L,N.registerAtRule(L)},9371:(Q,E,y)=>{let N=y(3152);class L extends N{constructor(u){super(u),this.type="comment"}}Q.exports=L,L.default=L},7793:(Q,E,y)=>{let N,L,n,u,I=y(9371),w=y(5238),r=y(3152),{isClean:e,my:o}=y(4151);function l(C){return C.map(i=>(i.nodes&&(i.nodes=l(i.nodes)),delete i.source,i))}function f(C){if(C[e]=!1,C.proxyOf.nodes)for(let i of C.proxyOf.nodes)f(i)}class v extends r{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...i){for(let a of i){let t=this.normalize(a,this.last);for(let c of t)this.proxyOf.nodes.push(c)}return this.markDirty(),this}cleanRaws(i){if(super.cleanRaws(i),this.nodes)for(let a of this.nodes)a.cleanRaws(i)}each(i){if(!this.proxyOf.nodes)return;let a,t,c=this.getIterator();for(;this.indexes[c]<this.proxyOf.nodes.length&&(a=this.indexes[c],t=i(this.proxyOf.nodes[a],a),t!==!1);)this.indexes[c]+=1;return delete this.indexes[c],t}every(i){return this.nodes.every(i)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let i=this.lastEach;return this.indexes[i]=0,i}getProxyProcessor(){return{get:(i,a)=>a==="proxyOf"?i:i[a]?a==="each"||typeof a=="string"&&a.startsWith("walk")?(...t)=>i[a](...t.map(c=>typeof c=="function"?(T,m)=>c(T.toProxy(),m):c)):a==="every"||a==="some"?t=>i[a]((c,...T)=>t(c.toProxy(),...T)):a==="root"?()=>i.root().toProxy():a==="nodes"?i.nodes.map(t=>t.toProxy()):a==="first"||a==="last"?i[a].toProxy():i[a]:i[a],set:(i,a,t)=>(i[a]===t||(i[a]=t,a!=="name"&&a!=="params"&&a!=="selector"||i.markDirty()),!0)}}index(i){return typeof i=="number"?i:(i.proxyOf&&(i=i.proxyOf),this.proxyOf.nodes.indexOf(i))}insertAfter(i,a){let t,c=this.index(i),T=this.normalize(a,this.proxyOf.nodes[c]).reverse();c=this.index(i);for(let m of T)this.proxyOf.nodes.splice(c+1,0,m);for(let m in this.indexes)t=this.indexes[m],c<t&&(this.indexes[m]=t+T.length);return this.markDirty(),this}insertBefore(i,a){let t,c=this.index(i),T=c===0&&"prepend",m=this.normalize(a,this.proxyOf.nodes[c],T).reverse();c=this.index(i);for(let k of m)this.proxyOf.nodes.splice(c,0,k);for(let k in this.indexes)t=this.indexes[k],c<=t&&(this.indexes[k]=t+m.length);return this.markDirty(),this}normalize(i,a){if(typeof i=="string")i=l(L(i).nodes);else if(i===void 0)i=[];else if(Array.isArray(i)){i=i.slice(0);for(let t of i)t.parent&&t.parent.removeChild(t,"ignore")}else if(i.type==="root"&&this.type!=="document"){i=i.nodes.slice(0);for(let t of i)t.parent&&t.parent.removeChild(t,"ignore")}else if(i.type)i=[i];else if(i.prop){if(i.value===void 0)throw new Error("Value field is missed in node creation");typeof i.value!="string"&&(i.value=String(i.value)),i=[new w(i)]}else if(i.selector||i.selectors)i=[new u(i)];else if(i.name)i=[new N(i)];else{if(!i.text)throw new Error("Unknown node type in node creation");i=[new I(i)]}return i.map(t=>(t[o]||v.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[e]&&f(t),t.raws||(t.raws={}),t.raws.before===void 0&&a&&a.raws.before!==void 0&&(t.raws.before=a.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...i){i=i.reverse();for(let a of i){let t=this.normalize(a,this.first,"prepend").reverse();for(let c of t)this.proxyOf.nodes.unshift(c);for(let c in this.indexes)this.indexes[c]=this.indexes[c]+t.length}return this.markDirty(),this}push(i){return i.parent=this,this.proxyOf.nodes.push(i),this}removeAll(){for(let i of this.proxyOf.nodes)i.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(i){let a;i=this.index(i),this.proxyOf.nodes[i].parent=void 0,this.proxyOf.nodes.splice(i,1);for(let t in this.indexes)a=this.indexes[t],a>=i&&(this.indexes[t]=a-1);return this.markDirty(),this}replaceValues(i,a,t){return t||(t=a,a={}),this.walkDecls(c=>{a.props&&!a.props.includes(c.prop)||a.fast&&!c.value.includes(a.fast)||(c.value=c.value.replace(i,t))}),this.markDirty(),this}some(i){return this.nodes.some(i)}walk(i){return this.each((a,t)=>{let c;try{c=i(a,t)}catch(T){throw a.addToError(T)}return c!==!1&&a.walk&&(c=a.walk(i)),c})}walkAtRules(i,a){return a?i instanceof RegExp?this.walk((t,c)=>{if(t.type==="atrule"&&i.test(t.name))return a(t,c)}):this.walk((t,c)=>{if(t.type==="atrule"&&t.name===i)return a(t,c)}):(a=i,this.walk((t,c)=>{if(t.type==="atrule")return a(t,c)}))}walkComments(i){return this.walk((a,t)=>{if(a.type==="comment")return i(a,t)})}walkDecls(i,a){return a?i instanceof RegExp?this.walk((t,c)=>{if(t.type==="decl"&&i.test(t.prop))return a(t,c)}):this.walk((t,c)=>{if(t.type==="decl"&&t.prop===i)return a(t,c)}):(a=i,this.walk((t,c)=>{if(t.type==="decl")return a(t,c)}))}walkRules(i,a){return a?i instanceof RegExp?this.walk((t,c)=>{if(t.type==="rule"&&i.test(t.selector))return a(t,c)}):this.walk((t,c)=>{if(t.type==="rule"&&t.selector===i)return a(t,c)}):(a=i,this.walk((t,c)=>{if(t.type==="rule")return a(t,c)}))}}v.registerParse=C=>{L=C},v.registerRule=C=>{u=C},v.registerAtRule=C=>{N=C},v.registerRoot=C=>{n=C},Q.exports=v,v.default=v,v.rebuild=C=>{C.type==="atrule"?Object.setPrototypeOf(C,N.prototype):C.type==="rule"?Object.setPrototypeOf(C,u.prototype):C.type==="decl"?Object.setPrototypeOf(C,w.prototype):C.type==="comment"?Object.setPrototypeOf(C,I.prototype):C.type==="root"&&Object.setPrototypeOf(C,n.prototype),C[o]=!0,C.nodes&&C.nodes.forEach(i=>{v.rebuild(i)})}},3614:(Q,E,y)=>{let N=y(8633),L=y(9746);class n extends Error{constructor(I,w,r,e,o,l){super(I),this.name="CssSyntaxError",this.reason=I,o&&(this.file=o),e&&(this.source=e),l&&(this.plugin=l),w!==void 0&&r!==void 0&&(typeof w=="number"?(this.line=w,this.column=r):(this.line=w.line,this.column=w.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,n)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",this.line!==void 0&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(I){if(!this.source)return"";let w=this.source;I==null&&(I=N.isColorSupported);let r=i=>i,e=i=>i,o=i=>i;if(I){let{bold:i,gray:a,red:t}=N.createColors(!0);e=c=>i(t(c)),r=c=>a(c),L&&(o=c=>L(c))}let l=w.split(/\r?\n/),f=Math.max(this.line-3,0),v=Math.min(this.line+2,l.length),C=String(v).length;return l.slice(f,v).map((i,a)=>{let t=f+1+a,c=" "+(" "+t).slice(-C)+" | ";if(t===this.line){if(i.length>160){let m=20,k=Math.max(0,this.column-m),b=Math.max(this.column+m,this.endColumn+m),_=i.slice(k,b),R=r(c.replace(/\d/g," "))+i.slice(0,Math.min(this.column-1,m-1)).replace(/[^\t]/g," ");return e(">")+r(c)+o(_)+`
 `+R+e("^")}let T=r(c.replace(/\d/g," "))+i.slice(0,this.column-1).replace(/[^\t]/g," ");return e(">")+r(c)+o(i)+`
 `+T+e("^")}return" "+r(c)+o(i)}).join(`
`)}toString(){let I=this.showSourceCode();return I&&(I=`

`+I+`
`),this.name+": "+this.message+I}}Q.exports=n,n.default=n},5238:(Q,E,y)=>{let N=y(3152);class L extends N{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(u){u&&u.value!==void 0&&typeof u.value!="string"&&(u={...u,value:String(u.value)}),super(u),this.type="decl"}}Q.exports=L,L.default=L},145:(Q,E,y)=>{let N,L,n=y(7793);class u extends n{constructor(w){super({type:"document",...w}),this.nodes||(this.nodes=[])}toResult(w={}){return new N(new L,this,w).stringify()}}u.registerLazyResult=I=>{N=I},u.registerProcessor=I=>{L=I},Q.exports=u,u.default=u},3438:(Q,E,y)=>{let N=y(396),L=y(9371),n=y(5238),u=y(1106),I=y(3878),w=y(5644),r=y(1534);function e(o,l){if(Array.isArray(o))return o.map(C=>e(C));let{inputs:f,...v}=o;if(f){l=[];for(let C of f){let i={...C,__proto__:u.prototype};i.map&&(i.map={...i.map,__proto__:I.prototype}),l.push(i)}}if(v.nodes&&(v.nodes=o.nodes.map(C=>e(C,l))),v.source){let{inputId:C,...i}=v.source;v.source=i,C!=null&&(v.source.input=l[C])}if(v.type==="root")return new w(v);if(v.type==="decl")return new n(v);if(v.type==="rule")return new r(v);if(v.type==="comment")return new L(v);if(v.type==="atrule")return new N(v);throw new Error("Unknown node type: "+o.type)}Q.exports=e,e.default=e},1106:(Q,E,y)=>{let{nanoid:N}=y(5042),{isAbsolute:L,resolve:n}=y(197),{SourceMapConsumer:u,SourceMapGenerator:I}=y(1866),{fileURLToPath:w,pathToFileURL:r}=y(2739),e=y(3614),o=y(3878),l=y(9746),f=Symbol("lineToIndexCache"),v=!!(u&&I),C=!!(n&&L);function i(t){if(t[f])return t[f];let c=t.css.split(`
`),T=new Array(c.length),m=0;for(let k=0,b=c.length;k<b;k++)T[k]=m,m+=c[k].length+1;return t[f]=T,T}class a{get from(){return this.file||this.id}constructor(c,T={}){if(c==null||typeof c=="object"&&!c.toString)throw new Error(`PostCSS received ${c} instead of CSS string`);if(this.css=c.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,T.document&&(this.document=T.document.toString()),T.from&&(!C||/^\w+:\/\//.test(T.from)||L(T.from)?this.file=T.from:this.file=n(T.from)),C&&v){let m=new o(this.css,T);if(m.text){this.map=m;let k=m.consumer().file;!this.file&&k&&(this.file=this.mapResolve(k))}}this.file||(this.id="<input css "+N(6)+">"),this.map&&(this.map.file=this.from)}error(c,T,m,k={}){let b,_,R,G,W;if(T&&typeof T=="object"){let P=T,M=m;if(typeof P.offset=="number"){G=P.offset;let j=this.fromOffset(G);T=j.line,m=j.col}else T=P.line,m=P.column,G=this.fromLineAndColumn(T,m);if(typeof M.offset=="number"){R=M.offset;let j=this.fromOffset(R);_=j.line,b=j.col}else _=M.line,b=M.column,R=this.fromLineAndColumn(M.line,M.column)}else if(m)G=this.fromLineAndColumn(T,m);else{G=T;let P=this.fromOffset(G);T=P.line,m=P.col}let U=this.origin(T,m,_,b);return W=U?new e(c,U.endLine===void 0?U.line:{column:U.column,line:U.line},U.endLine===void 0?U.column:{column:U.endColumn,line:U.endLine},U.source,U.file,k.plugin):new e(c,_===void 0?T:{column:m,line:T},_===void 0?m:{column:b,line:_},this.css,this.file,k.plugin),W.input={column:m,endColumn:b,endLine:_,endOffset:R,line:T,offset:G,source:this.css},this.file&&(r&&(W.input.url=r(this.file).toString()),W.input.file=this.file),W}fromLineAndColumn(c,T){return i(this)[c-1]+T-1}fromOffset(c){let T=i(this),m=0;if(c>=T[T.length-1])m=T.length-1;else{let k,b=T.length-2;for(;m<b;)if(k=m+(b-m>>1),c<T[k])b=k-1;else{if(!(c>=T[k+1])){m=k;break}m=k+1}}return{col:c-T[m]+1,line:m+1}}mapResolve(c){return/^\w+:\/\//.test(c)?c:n(this.map.consumer().sourceRoot||this.map.root||".",c)}origin(c,T,m,k){if(!this.map)return!1;let b,_,R=this.map.consumer(),G=R.originalPositionFor({column:T,line:c});if(!G.source)return!1;typeof m=="number"&&(b=R.originalPositionFor({column:k,line:m})),_=L(G.source)?r(G.source):new URL(G.source,this.map.consumer().sourceRoot||r(this.map.mapFile));let W={column:G.column,endColumn:b&&b.column,endLine:b&&b.line,line:G.line,url:_.toString()};if(_.protocol==="file:"){if(!w)throw new Error("file: protocol is not available in this PostCSS build");W.file=w(_)}let U=R.sourceContentFor(G.source);return U&&(W.source=U),W}toJSON(){let c={};for(let T of["hasBOM","css","file","id"])this[T]!=null&&(c[T]=this[T]);return this.map&&(c.map={...this.map},c.map.consumerCache&&(c.map.consumerCache=void 0)),c}}Q.exports=a,a.default=a,l&&l.registerInput&&l.registerInput(a)},6966:(Q,E,y)=>{let N=y(7793),L=y(145),n=y(3604),u=y(9577),I=y(3717),w=y(5644),r=y(3303),{isClean:e,my:o}=y(4151);y(6156);const l={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},f={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},v={Once:!0,postcssPlugin:!0,prepare:!0};function C(m){return typeof m=="object"&&typeof m.then=="function"}function i(m){let k=!1,b=l[m.type];return m.type==="decl"?k=m.prop.toLowerCase():m.type==="atrule"&&(k=m.name.toLowerCase()),k&&m.append?[b,b+"-"+k,0,b+"Exit",b+"Exit-"+k]:k?[b,b+"-"+k,b+"Exit",b+"Exit-"+k]:m.append?[b,0,b+"Exit"]:[b,b+"Exit"]}function a(m){let k;return k=m.type==="document"?["Document",0,"DocumentExit"]:m.type==="root"?["Root",0,"RootExit"]:i(m),{eventIndex:0,events:k,iterator:0,node:m,visitorIndex:0,visitors:[]}}function t(m){return m[e]=!1,m.nodes&&m.nodes.forEach(k=>t(k)),m}let c={};class T{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(k,b,_){let R;if(this.stringified=!1,this.processed=!1,typeof b!="object"||b===null||b.type!=="root"&&b.type!=="document")if(b instanceof T||b instanceof I)R=t(b.root),b.map&&(_.map===void 0&&(_.map={}),_.map.inline||(_.map.inline=!1),_.map.prev=b.map);else{let G=u;_.syntax&&(G=_.syntax.parse),_.parser&&(G=_.parser),G.parse&&(G=G.parse);try{R=G(b,_)}catch(W){this.processed=!0,this.error=W}R&&!R[o]&&N.rebuild(R)}else R=t(b);this.result=new I(k,R,_),this.helpers={...c,postcss:c,result:this.result},this.plugins=this.processor.plugins.map(G=>typeof G=="object"&&G.prepare?{...G,...G.prepare(this.result)}:G)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(k){return this.async().catch(k)}finally(k){return this.async().then(k,k)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(k,b){let _=this.result.lastPlugin;try{b&&b.addToError(k),this.error=k,k.name!=="CssSyntaxError"||k.plugin?_.postcssVersion:(k.plugin=_.postcssPlugin,k.setMessage())}catch(R){console&&console.error&&console.error(R)}return k}prepareVisitors(){this.listeners={};let k=(b,_,R)=>{this.listeners[_]||(this.listeners[_]=[]),this.listeners[_].push([b,R])};for(let b of this.plugins)if(typeof b=="object")for(let _ in b){if(!f[_]&&/^[A-Z]/.test(_))throw new Error(`Unknown event ${_} in ${b.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!v[_])if(typeof b[_]=="object")for(let R in b[_])k(b,R==="*"?_:_+"-"+R.toLowerCase(),b[_][R]);else typeof b[_]=="function"&&k(b,_,b[_])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let k=0;k<this.plugins.length;k++){let b=this.plugins[k],_=this.runOnRoot(b);if(C(_))try{await _}catch(R){throw this.handleError(R)}}if(this.prepareVisitors(),this.hasListener){let k=this.result.root;for(;!k[e];){k[e]=!0;let b=[a(k)];for(;b.length>0;){let _=this.visitTick(b);if(C(_))try{await _}catch(R){let G=b[b.length-1].node;throw this.handleError(R,G)}}}if(this.listeners.OnceExit)for(let[b,_]of this.listeners.OnceExit){this.result.lastPlugin=b;try{if(k.type==="document"){let R=k.nodes.map(G=>_(G,this.helpers));await Promise.all(R)}else await _(k,this.helpers)}catch(R){throw this.handleError(R)}}}return this.processed=!0,this.stringify()}runOnRoot(k){this.result.lastPlugin=k;try{if(typeof k=="object"&&k.Once){if(this.result.root.type==="document"){let b=this.result.root.nodes.map(_=>k.Once(_,this.helpers));return C(b[0])?Promise.all(b):b}return k.Once(this.result.root,this.helpers)}if(typeof k=="function")return k(this.result.root,this.result)}catch(b){throw this.handleError(b)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let k=this.result.opts,b=r;k.syntax&&(b=k.syntax.stringify),k.stringifier&&(b=k.stringifier),b.stringify&&(b=b.stringify);let _=new n(b,this.result.root,this.result.opts).generate();return this.result.css=_[0],this.result.map=_[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let k of this.plugins)if(C(this.runOnRoot(k)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let k=this.result.root;for(;!k[e];)k[e]=!0,this.walkSync(k);if(this.listeners.OnceExit)if(k.type==="document")for(let b of k.nodes)this.visitSync(this.listeners.OnceExit,b);else this.visitSync(this.listeners.OnceExit,k)}return this.result}then(k,b){return this.async().then(k,b)}toString(){return this.css}visitSync(k,b){for(let[_,R]of k){let G;this.result.lastPlugin=_;try{G=R(b,this.helpers)}catch(W){throw this.handleError(W,b.proxyOf)}if(b.type!=="root"&&b.type!=="document"&&!b.parent)return!0;if(C(G))throw this.getAsyncError()}}visitTick(k){let b=k[k.length-1],{node:_,visitors:R}=b;if(_.type!=="root"&&_.type!=="document"&&!_.parent)return void k.pop();if(R.length>0&&b.visitorIndex<R.length){let[W,U]=R[b.visitorIndex];b.visitorIndex+=1,b.visitorIndex===R.length&&(b.visitors=[],b.visitorIndex=0),this.result.lastPlugin=W;try{return U(_.toProxy(),this.helpers)}catch(P){throw this.handleError(P,_)}}if(b.iterator!==0){let W,U=b.iterator;for(;W=_.nodes[_.indexes[U]];)if(_.indexes[U]+=1,!W[e])return W[e]=!0,void k.push(a(W));b.iterator=0,delete _.indexes[U]}let G=b.events;for(;b.eventIndex<G.length;){let W=G[b.eventIndex];if(b.eventIndex+=1,W===0)return void(_.nodes&&_.nodes.length&&(_[e]=!0,b.iterator=_.getIterator()));if(this.listeners[W])return void(b.visitors=this.listeners[W])}k.pop()}walkSync(k){k[e]=!0;let b=i(k);for(let _ of b)if(_===0)k.nodes&&k.each(R=>{R[e]||this.walkSync(R)});else{let R=this.listeners[_];if(R&&this.visitSync(R,k.toProxy()))return}}warnings(){return this.sync().warnings()}}T.registerPostcss=m=>{c=m},Q.exports=T,T.default=T,w.registerLazyResult(T),L.registerLazyResult(T)},1752:Q=>{let E={comma:y=>E.split(y,[","],!0),space:y=>E.split(y,[" ",`
`,"	"]),split(y,N,L){let n=[],u="",I=!1,w=0,r=!1,e="",o=!1;for(let l of y)o?o=!1:l==="\\"?o=!0:r?l===e&&(r=!1):l==='"'||l==="'"?(r=!0,e=l):l==="("?w+=1:l===")"?w>0&&(w-=1):w===0&&N.includes(l)&&(I=!0),I?(u!==""&&n.push(u.trim()),u="",I=!1):u+=l;return(L||u!=="")&&n.push(u.trim()),n}};Q.exports=E,E.default=E},3604:(Q,E,y)=>{let{dirname:N,relative:L,resolve:n,sep:u}=y(197),{SourceMapConsumer:I,SourceMapGenerator:w}=y(1866),{pathToFileURL:r}=y(2739),e=y(1106),o=!!(I&&w),l=!!(N&&n&&L&&u);Q.exports=class{constructor(f,v,C,i){this.stringify=f,this.mapOpts=C.map||{},this.root=v,this.opts=C,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let f;f=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let v=`
`;this.css.includes(`\r
`)&&(v=`\r
`),this.css+=v+"/*# sourceMappingURL="+f+" */"}applyPrevMaps(){for(let f of this.previous()){let v,C=this.toUrl(this.path(f.file)),i=f.root||N(f.file);this.mapOpts.sourcesContent===!1?(v=new I(f.text),v.sourcesContent&&(v.sourcesContent=null)):v=f.consumer(),this.map.applySourceMap(v,C,this.toUrl(this.path(i)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let f;for(let v=this.root.nodes.length-1;v>=0;v--)f=this.root.nodes[v],f.type==="comment"&&f.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(v)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),l&&o&&this.isMap())return this.generateMap();{let f="";return this.stringify(this.root,v=>{f+=v}),[f]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let f=this.previous()[0].consumer();f.file=this.outputFile(),this.map=w.fromSourceMap(f,{ignoreInvalidMapping:!0})}else this.map=new w({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new w({file:this.outputFile(),ignoreInvalidMapping:!0});let f,v,C=1,i=1,a="<no source>",t={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(c,T,m)=>{if(this.css+=c,T&&m!=="end"&&(t.generated.line=C,t.generated.column=i-1,T.source&&T.source.start?(t.source=this.sourcePath(T),t.original.line=T.source.start.line,t.original.column=T.source.start.column-1,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,this.map.addMapping(t))),v=c.match(/\n/g),v?(C+=v.length,f=c.lastIndexOf(`
`),i=c.length-f):i+=c.length,T&&m!=="start"){let k=T.parent||{raws:{}};(T.type==="decl"||T.type==="atrule"&&!T.nodes)&&T===k.last&&!k.raws.semicolon||(T.source&&T.source.end?(t.source=this.sourcePath(T),t.original.line=T.source.end.line,t.original.column=T.source.end.column-1,t.generated.line=C,t.generated.column=i-2,this.map.addMapping(t)):(t.source=a,t.original.line=1,t.original.column=0,t.generated.line=C,t.generated.column=i-1,this.map.addMapping(t)))}})}isAnnotation(){return!!this.isInline()||(this.mapOpts.annotation!==void 0?this.mapOpts.annotation:!this.previous().length||this.previous().some(f=>f.annotation))}isInline(){if(this.mapOpts.inline!==void 0)return this.mapOpts.inline;let f=this.mapOpts.annotation;return(f===void 0||f===!0)&&(!this.previous().length||this.previous().some(v=>v.inline))}isMap(){return this.opts.map!==void 0?!!this.opts.map:this.previous().length>0}isSourcesContent(){return this.mapOpts.sourcesContent!==void 0?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(f=>f.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(f){if(this.mapOpts.absolute||f.charCodeAt(0)===60||/^\w+:\/\//.test(f))return f;let v=this.memoizedPaths.get(f);if(v)return v;let C=this.opts.to?N(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(C=N(n(C,this.mapOpts.annotation)));let i=L(C,f);return this.memoizedPaths.set(f,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(f=>{if(f.source&&f.source.input.map){let v=f.source.input.map;this.previousMaps.includes(v)||this.previousMaps.push(v)}});else{let f=new e(this.originalCSS,this.opts);f.map&&this.previousMaps.push(f.map)}return this.previousMaps}setSourcesContent(){let f={};if(this.root)this.root.walk(v=>{if(v.source){let C=v.source.input.from;if(C&&!f[C]){f[C]=!0;let i=this.usesFileUrls?this.toFileUrl(C):this.toUrl(this.path(C));this.map.setSourceContent(i,v.source.input.css)}}});else if(this.css){let v=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(v,this.css)}}sourcePath(f){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(f.source.input.from):this.toUrl(this.path(f.source.input.from))}toBase64(f){return Buffer?Buffer.from(f).toString("base64"):window.btoa(unescape(encodeURIComponent(f)))}toFileUrl(f){let v=this.memoizedFileURLs.get(f);if(v)return v;if(r){let C=r(f).toString();return this.memoizedFileURLs.set(f,C),C}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(f){let v=this.memoizedURLs.get(f);if(v)return v;u==="\\"&&(f=f.replace(/\\/g,"/"));let C=encodeURI(f).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(f,C),C}}},4211:(Q,E,y)=>{let N=y(3604),L=y(9577);const n=y(3717);let u=y(3303);y(6156);class I{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let r,e=L;try{r=e(this._css,this._opts)}catch(o){this.error=o}if(this.error)throw this.error;return this._root=r,r}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(r,e,o){let l;e=e.toString(),this.stringified=!1,this._processor=r,this._css=e,this._opts=o,this._map=void 0;let f=u;this.result=new n(this._processor,l,this._opts),this.result.css=e;let v=this;Object.defineProperty(this.result,"root",{get:()=>v.root});let C=new N(f,l,this._opts,e);if(C.isMap()){let[i,a]=C.generate();i&&(this.result.css=i),a&&(this.result.map=a)}else C.clearAnnotation(),this.result.css=C.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(r){return this.async().catch(r)}finally(r){return this.async().then(r,r)}sync(){if(this.error)throw this.error;return this.result}then(r,e){return this.async().then(r,e)}toString(){return this._css}warnings(){return[]}}Q.exports=I,I.default=I},3152:(Q,E,y)=>{let N=y(3614),L=y(7668),n=y(3303),{isClean:u,my:I}=y(4151);function w(o,l){let f=new o.constructor;for(let v in o){if(!Object.prototype.hasOwnProperty.call(o,v)||v==="proxyCache")continue;let C=o[v],i=typeof C;v==="parent"&&i==="object"?l&&(f[v]=l):v==="source"?f[v]=C:Array.isArray(C)?f[v]=C.map(a=>w(a,f)):(i==="object"&&C!==null&&(C=w(C)),f[v]=C)}return f}function r(o,l){if(l&&l.offset!==void 0)return l.offset;let f=1,v=1,C=0;for(let i=0;i<o.length;i++){if(v===l.line&&f===l.column){C=i;break}o[i]===`
`?(f=1,v+=1):f+=1}return C}class e{get proxyOf(){return this}constructor(l={}){this.raws={},this[u]=!1,this[I]=!0;for(let f in l)if(f==="nodes"){this.nodes=[];for(let v of l[f])typeof v.clone=="function"?this.append(v.clone()):this.append(v)}else this[f]=l[f]}addToError(l){if(l.postcssNode=this,l.stack&&this.source&&/\n\s{4}at /.test(l.stack)){let f=this.source;l.stack=l.stack.replace(/\n\s{4}at /,`$&${f.input.from}:${f.start.line}:${f.start.column}$&`)}return l}after(l){return this.parent.insertAfter(this,l),this}assign(l={}){for(let f in l)this[f]=l[f];return this}before(l){return this.parent.insertBefore(this,l),this}cleanRaws(l){delete this.raws.before,delete this.raws.after,l||delete this.raws.between}clone(l={}){let f=w(this);for(let v in l)f[v]=l[v];return f}cloneAfter(l={}){let f=this.clone(l);return this.parent.insertAfter(this,f),f}cloneBefore(l={}){let f=this.clone(l);return this.parent.insertBefore(this,f),f}error(l,f={}){if(this.source){let{end:v,start:C}=this.rangeBy(f);return this.source.input.error(l,{column:C.column,line:C.line},{column:v.column,line:v.line},f)}return new N(l)}getProxyProcessor(){return{get:(l,f)=>f==="proxyOf"?l:f==="root"?()=>l.root().toProxy():l[f],set:(l,f,v)=>(l[f]===v||(l[f]=v,f!=="prop"&&f!=="value"&&f!=="name"&&f!=="params"&&f!=="important"&&f!=="text"||l.markDirty()),!0)}}markClean(){this[u]=!0}markDirty(){if(this[u]){this[u]=!1;let l=this;for(;l=l.parent;)l[u]=!1}}next(){if(!this.parent)return;let l=this.parent.index(this);return this.parent.nodes[l+1]}positionBy(l={}){let f=this.source.start;if(l.index)f=this.positionInside(l.index);else if(l.word){let v="document"in this.source.input?this.source.input.document:this.source.input.css,C=v.slice(r(v,this.source.start),r(v,this.source.end)).indexOf(l.word);C!==-1&&(f=this.positionInside(C))}return f}positionInside(l){let f=this.source.start.column,v=this.source.start.line,C="document"in this.source.input?this.source.input.document:this.source.input.css,i=r(C,this.source.start),a=i+l;for(let t=i;t<a;t++)C[t]===`
`?(f=1,v+=1):f+=1;return{column:f,line:v,offset:a}}prev(){if(!this.parent)return;let l=this.parent.index(this);return this.parent.nodes[l-1]}rangeBy(l={}){let f="document"in this.source.input?this.source.input.document:this.source.input.css,v={column:this.source.start.column,line:this.source.start.line,offset:r(f,this.source.start)},C=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:r(f,this.source.end)+1}:{column:v.column+1,line:v.line,offset:v.offset+1};if(l.word){let i=f.slice(r(f,this.source.start),r(f,this.source.end)).indexOf(l.word);i!==-1&&(v=this.positionInside(i),C=this.positionInside(i+l.word.length))}else l.start?v={column:l.start.column,line:l.start.line,offset:r(f,l.start)}:l.index&&(v=this.positionInside(l.index)),l.end?C={column:l.end.column,line:l.end.line,offset:r(f,l.end)}:typeof l.endIndex=="number"?C=this.positionInside(l.endIndex):l.index&&(C=this.positionInside(l.index+1));return(C.line<v.line||C.line===v.line&&C.column<=v.column)&&(C={column:v.column+1,line:v.line,offset:v.offset+1}),{end:C,start:v}}raw(l,f){return new L().raw(this,l,f)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...l){if(this.parent){let f=this,v=!1;for(let C of l)C===this?v=!0:v?(this.parent.insertAfter(f,C),f=C):this.parent.insertBefore(f,C);v||this.remove()}return this}root(){let l=this;for(;l.parent&&l.parent.type!=="document";)l=l.parent;return l}toJSON(l,f){let v={},C=f==null;f=f||new Map;let i=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let t=this[a];if(Array.isArray(t))v[a]=t.map(c=>typeof c=="object"&&c.toJSON?c.toJSON(null,f):c);else if(typeof t=="object"&&t.toJSON)v[a]=t.toJSON(null,f);else if(a==="source"){if(t==null)continue;let c=f.get(t.input);c==null&&(c=i,f.set(t.input,i),i++),v[a]={end:t.end,inputId:c,start:t.start}}else v[a]=t}return C&&(v.inputs=[...f.keys()].map(a=>a.toJSON())),v}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(l=n){l.stringify&&(l=l.stringify);let f="";return l(this,v=>{f+=v}),f}warn(l,f,v={}){let C={node:this};for(let i in v)C[i]=v[i];return l.warn(f,C)}}Q.exports=e,e.default=e},9577:(Q,E,y)=>{let N=y(7793),L=y(1106),n=y(8339);function u(I,w){let r=new L(I,w),e=new n(r);try{e.parse()}catch(o){throw o}return e.root}Q.exports=u,u.default=u,N.registerParse(u)},8339:(Q,E,y)=>{let N=y(396),L=y(9371),n=y(5238),u=y(5644),I=y(1534),w=y(5781);const r={empty:!0,space:!0};Q.exports=class{constructor(e){this.input=e,this.root=new u,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let o,l,f,v=new N;v.name=e[1].slice(1),v.name===""&&this.unnamedAtrule(v,e),this.init(v,e[2]);let C=!1,i=!1,a=[],t=[];for(;!this.tokenizer.endOfFile();){if(o=(e=this.tokenizer.nextToken())[0],o==="("||o==="["?t.push(o==="("?")":"]"):o==="{"&&t.length>0?t.push("}"):o===t[t.length-1]&&t.pop(),t.length===0){if(o===";"){v.source.end=this.getPosition(e[2]),v.source.end.offset++,this.semicolon=!0;break}if(o==="{"){i=!0;break}if(o==="}"){if(a.length>0){for(f=a.length-1,l=a[f];l&&l[0]==="space";)l=a[--f];l&&(v.source.end=this.getPosition(l[3]||l[2]),v.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){C=!0;break}}v.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(v.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(v,"params",a),C&&(e=a[a.length-1],v.source.end=this.getPosition(e[3]||e[2]),v.source.end.offset++,this.spaces=v.raws.between,v.raws.between="")):(v.raws.afterName="",v.params=""),i&&(v.nodes=[],this.current=v)}checkMissedSemicolon(e){let o=this.colon(e);if(o===!1)return;let l,f=0;for(let v=o-1;v>=0&&(l=e[v],l[0]==="space"||(f+=1,f!==2));v--);throw this.input.error("Missed semicolon",l[0]==="word"?l[3]+1:l[2])}colon(e){let o,l,f,v=0;for(let[C,i]of e.entries()){if(l=i,f=l[0],f==="("&&(v+=1),f===")"&&(v-=1),v===0&&f===":"){if(o){if(o[0]==="word"&&o[1]==="progid")continue;return C}this.doubleColon(l)}o=l}return!1}comment(e){let o=new L;this.init(o,e[2]),o.source.end=this.getPosition(e[3]||e[2]),o.source.end.offset++;let l=e[1].slice(2,-2);if(/^\s*$/.test(l))o.text="",o.raws.left=l,o.raws.right="";else{let f=l.match(/^(\s*)([^]*\S)(\s*)$/);o.text=f[2],o.raws.left=f[1],o.raws.right=f[3]}}createTokenizer(){this.tokenizer=w(this.input)}decl(e,o){let l=new n;this.init(l,e[0][2]);let f,v=e[e.length-1];for(v[0]===";"&&(this.semicolon=!0,e.pop()),l.source.end=this.getPosition(v[3]||v[2]||function(a){for(let t=a.length-1;t>=0;t--){let c=a[t],T=c[3]||c[2];if(T)return T}}(e)),l.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),l.raws.before+=e.shift()[1];for(l.source.start=this.getPosition(e[0][2]),l.prop="";e.length;){let a=e[0][0];if(a===":"||a==="space"||a==="comment")break;l.prop+=e.shift()[1]}for(l.raws.between="";e.length;){if(f=e.shift(),f[0]===":"){l.raws.between+=f[1];break}f[0]==="word"&&/\w/.test(f[1])&&this.unknownWord([f]),l.raws.between+=f[1]}l.prop[0]!=="_"&&l.prop[0]!=="*"||(l.raws.before+=l.prop[0],l.prop=l.prop.slice(1));let C,i=[];for(;e.length&&(C=e[0][0],C==="space"||C==="comment");)i.push(e.shift());this.precheckMissedSemicolon(e);for(let a=e.length-1;a>=0;a--){if(f=e[a],f[1].toLowerCase()==="!important"){l.important=!0;let t=this.stringFrom(e,a);t=this.spacesFromEnd(e)+t,t!==" !important"&&(l.raws.important=t);break}if(f[1].toLowerCase()==="important"){let t=e.slice(0),c="";for(let T=a;T>0;T--){let m=t[T][0];if(c.trim().startsWith("!")&&m!=="space")break;c=t.pop()[1]+c}c.trim().startsWith("!")&&(l.important=!0,l.raws.important=c,e=t)}if(f[0]!=="space"&&f[0]!=="comment")break}e.some(a=>a[0]!=="space"&&a[0]!=="comment")&&(l.raws.between+=i.map(a=>a[1]).join(""),i=[]),this.raw(l,"value",i.concat(e),o),l.value.includes(":")&&!o&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let o=new I;this.init(o,e[2]),o.selector="",o.raws.between="",this.current=o}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let o=this.current.nodes[this.current.nodes.length-1];o&&o.type==="rule"&&!o.raws.ownSemicolon&&(o.raws.ownSemicolon=this.spaces,this.spaces="",o.source.end=this.getPosition(e[2]),o.source.end.offset+=o.raws.ownSemicolon.length)}}getPosition(e){let o=this.input.fromOffset(e);return{column:o.col,line:o.line,offset:e}}init(e,o){this.current.push(e),e.source={input:this.input,start:this.getPosition(o)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let o=!1,l=null,f=!1,v=null,C=[],i=e[1].startsWith("--"),a=[],t=e;for(;t;){if(l=t[0],a.push(t),l==="("||l==="[")v||(v=t),C.push(l==="("?")":"]");else if(i&&f&&l==="{")v||(v=t),C.push("}");else if(C.length===0){if(l===";"){if(f)return void this.decl(a,i);break}if(l==="{")return void this.rule(a);if(l==="}"){this.tokenizer.back(a.pop()),o=!0;break}l===":"&&(f=!0)}else l===C[C.length-1]&&(C.pop(),C.length===0&&(v=null));t=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(o=!0),C.length>0&&this.unclosedBracket(v),o&&f){if(!i)for(;a.length&&(t=a[a.length-1][0],t==="space"||t==="comment");)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,o,l,f){let v,C,i,a,t=l.length,c="",T=!0;for(let m=0;m<t;m+=1)v=l[m],C=v[0],C!=="space"||m!==t-1||f?C==="comment"?(a=l[m-1]?l[m-1][0]:"empty",i=l[m+1]?l[m+1][0]:"empty",r[a]||r[i]||c.slice(-1)===","?T=!1:c+=v[1]):c+=v[1]:T=!1;if(!T){let m=l.reduce((k,b)=>k+b[1],"");e.raws[o]={raw:m,value:c}}e[o]=c}rule(e){e.pop();let o=new I;this.init(o,e[0][2]),o.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(o,"selector",e),this.current=o}spacesAndCommentsFromEnd(e){let o,l="";for(;e.length&&(o=e[e.length-1][0],o==="space"||o==="comment");)l=e.pop()[1]+l;return l}spacesAndCommentsFromStart(e){let o,l="";for(;e.length&&(o=e[0][0],o==="space"||o==="comment");)l+=e.shift()[1];return l}spacesFromEnd(e){let o,l="";for(;e.length&&(o=e[e.length-1][0],o==="space");)l=e.pop()[1]+l;return l}stringFrom(e,o){let l="";for(let f=o;f<e.length;f++)l+=e[f][1];return e.splice(o,e.length-o),l}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,o){throw this.input.error("At-rule without name",{offset:o[2]},{offset:o[2]+o[1].length})}}},2895:(Q,E,y)=>{let N=y(396),L=y(9371),n=y(7793),u=y(3614),I=y(5238),w=y(145),r=y(3438),e=y(1106),o=y(6966),l=y(1752),f=y(3152),v=y(9577),C=y(6846),i=y(3717),a=y(5644),t=y(1534),c=y(3303),T=y(38);function m(...k){return k.length===1&&Array.isArray(k[0])&&(k=k[0]),new C(k)}m.plugin=function(k,b){let _,R=!1;function G(...W){console&&console.warn&&!R&&(R=!0,console.warn(k+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),Ur.LANG&&Ur.LANG.startsWith("cn")&&console.warn(k+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let U=b(...W);return U.postcssPlugin=k,U.postcssVersion=new C().version,U}return Object.defineProperty(G,"postcss",{get:()=>(_||(_=G()),_)}),G.process=function(W,U,P){return m([G(P)]).process(W,U)},G},m.stringify=c,m.parse=v,m.fromJSON=r,m.list=l,m.comment=k=>new L(k),m.atRule=k=>new N(k),m.decl=k=>new I(k),m.rule=k=>new t(k),m.root=k=>new a(k),m.document=k=>new w(k),m.CssSyntaxError=u,m.Declaration=I,m.Container=n,m.Processor=C,m.Document=w,m.Comment=L,m.Warning=T,m.AtRule=N,m.Result=i,m.Input=e,m.Rule=t,m.Root=a,m.Node=f,o.registerPostcss(m),Q.exports=m,m.default=m},3878:(Q,E,y)=>{let{existsSync:N,readFileSync:L}=y(9977),{dirname:n,join:u}=y(197),{SourceMapConsumer:I,SourceMapGenerator:w}=y(1866);class r{constructor(o,l){if(l.map===!1)return;this.loadAnnotation(o),this.inline=this.startWith(this.annotation,"data:");let f=l.map?l.map.prev:void 0,v=this.loadMap(l.from,f);!this.mapFile&&l.from&&(this.mapFile=l.from),this.mapFile&&(this.root=n(this.mapFile)),v&&(this.text=v)}consumer(){return this.consumerCache||(this.consumerCache=new I(this.text)),this.consumerCache}decodeInline(o){let l=o.match(/^data:application\/json;charset=utf-?8,/)||o.match(/^data:application\/json,/);if(l)return decodeURIComponent(o.substr(l[0].length));let f=o.match(/^data:application\/json;charset=utf-?8;base64,/)||o.match(/^data:application\/json;base64,/);if(f)return v=o.substr(f[0].length),Buffer?Buffer.from(v,"base64").toString():window.atob(v);var v;let C=o.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+C)}getAnnotationURL(o){return o.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(o){return typeof o=="object"&&(typeof o.mappings=="string"||typeof o._mappings=="string"||Array.isArray(o.sections))}loadAnnotation(o){let l=o.match(/\/\*\s*# sourceMappingURL=/g);if(!l)return;let f=o.lastIndexOf(l.pop()),v=o.indexOf("*/",f);f>-1&&v>-1&&(this.annotation=this.getAnnotationURL(o.substring(f,v)))}loadFile(o){if(this.root=n(o),N(o))return this.mapFile=o,L(o,"utf-8").toString().trim()}loadMap(o,l){if(l===!1)return!1;if(l){if(typeof l=="string")return l;if(typeof l!="function"){if(l instanceof I)return w.fromSourceMap(l).toString();if(l instanceof w)return l.toString();if(this.isMap(l))return JSON.stringify(l);throw new Error("Unsupported previous source map format: "+l.toString())}{let f=l(o);if(f){let v=this.loadFile(f);if(!v)throw new Error("Unable to load previous source map: "+f.toString());return v}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let f=this.annotation;return o&&(f=u(n(o),f)),this.loadFile(f)}}}startWith(o,l){return!!o&&o.substr(0,l.length)===l}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}Q.exports=r,r.default=r},6846:(Q,E,y)=>{let N=y(145),L=y(6966),n=y(4211),u=y(5644);class I{constructor(r=[]){this.version="8.5.6",this.plugins=this.normalize(r)}normalize(r){let e=[];for(let o of r)if(o.postcss===!0?o=o():o.postcss&&(o=o.postcss),typeof o=="object"&&Array.isArray(o.plugins))e=e.concat(o.plugins);else if(typeof o=="object"&&o.postcssPlugin)e.push(o);else if(typeof o=="function")e.push(o);else if(typeof o!="object"||!o.parse&&!o.stringify)throw new Error(o+" is not a PostCSS plugin");return e}process(r,e={}){return this.plugins.length||e.parser||e.stringifier||e.syntax?new L(this,r,e):new n(this,r,e)}use(r){return this.plugins=this.plugins.concat(this.normalize([r])),this}}Q.exports=I,I.default=I,u.registerProcessor(I),N.registerProcessor(I)},3717:(Q,E,y)=>{let N=y(38);class L{get content(){return this.css}constructor(u,I,w){this.processor=u,this.messages=[],this.root=I,this.opts=w,this.css="",this.map=void 0}toString(){return this.css}warn(u,I={}){I.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(I.plugin=this.lastPlugin.postcssPlugin);let w=new N(u,I);return this.messages.push(w),w}warnings(){return this.messages.filter(u=>u.type==="warning")}}Q.exports=L,L.default=L},5644:(Q,E,y)=>{let N,L,n=y(7793);class u extends n{constructor(w){super(w),this.type="root",this.nodes||(this.nodes=[])}normalize(w,r,e){let o=super.normalize(w);if(r){if(e==="prepend")this.nodes.length>1?r.raws.before=this.nodes[1].raws.before:delete r.raws.before;else if(this.first!==r)for(let l of o)l.raws.before=r.raws.before}return o}removeChild(w,r){let e=this.index(w);return!r&&e===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[e].raws.before),super.removeChild(w)}toResult(w={}){return new N(new L,this,w).stringify()}}u.registerLazyResult=I=>{N=I},u.registerProcessor=I=>{L=I},Q.exports=u,u.default=u,n.registerRoot(u)},1534:(Q,E,y)=>{let N=y(7793),L=y(1752);class n extends N{get selectors(){return L.comma(this.selector)}set selectors(I){let w=this.selector?this.selector.match(/,\s*/):null,r=w?w[0]:","+this.raw("between","beforeOpen");this.selector=I.join(r)}constructor(I){super(I),this.type="rule",this.nodes||(this.nodes=[])}}Q.exports=n,n.default=n,N.registerRule(n)},7668:Q=>{const E={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class y{constructor(L){this.builder=L}atrule(L,n){let u="@"+L.name,I=L.params?this.rawValue(L,"params"):"";if(L.raws.afterName!==void 0?u+=L.raws.afterName:I&&(u+=" "),L.nodes)this.block(L,u+I);else{let w=(L.raws.between||"")+(n?";":"");this.builder(u+I+w,L)}}beforeAfter(L,n){let u;u=L.type==="decl"?this.raw(L,null,"beforeDecl"):L.type==="comment"?this.raw(L,null,"beforeComment"):n==="before"?this.raw(L,null,"beforeRule"):this.raw(L,null,"beforeClose");let I=L.parent,w=0;for(;I&&I.type!=="root";)w+=1,I=I.parent;if(u.includes(`
`)){let r=this.raw(L,null,"indent");if(r.length)for(let e=0;e<w;e++)u+=r}return u}block(L,n){let u,I=this.raw(L,"between","beforeOpen");this.builder(n+I+"{",L,"start"),L.nodes&&L.nodes.length?(this.body(L),u=this.raw(L,"after")):u=this.raw(L,"after","emptyBody"),u&&this.builder(u),this.builder("}",L,"end")}body(L){let n=L.nodes.length-1;for(;n>0&&L.nodes[n].type==="comment";)n-=1;let u=this.raw(L,"semicolon");for(let I=0;I<L.nodes.length;I++){let w=L.nodes[I],r=this.raw(w,"before");r&&this.builder(r),this.stringify(w,n!==I||u)}}comment(L){let n=this.raw(L,"left","commentLeft"),u=this.raw(L,"right","commentRight");this.builder("/*"+n+L.text+u+"*/",L)}decl(L,n){let u=this.raw(L,"between","colon"),I=L.prop+u+this.rawValue(L,"value");L.important&&(I+=L.raws.important||" !important"),n&&(I+=";"),this.builder(I,L)}document(L){this.body(L)}raw(L,n,u){let I;if(u||(u=n),n&&(I=L.raws[n],I!==void 0))return I;let w=L.parent;if(u==="before"&&(!w||w.type==="root"&&w.first===L||w&&w.type==="document"))return"";if(!w)return E[u];let r=L.root();if(r.rawCache||(r.rawCache={}),r.rawCache[u]!==void 0)return r.rawCache[u];if(u==="before"||u==="after")return this.beforeAfter(L,u);{let o="raw"+((e=u)[0].toUpperCase()+e.slice(1));this[o]?I=this[o](r,L):r.walk(l=>{if(I=l.raws[n],I!==void 0)return!1})}var e;return I===void 0&&(I=E[u]),r.rawCache[u]=I,I}rawBeforeClose(L){let n;return L.walk(u=>{if(u.nodes&&u.nodes.length>0&&u.raws.after!==void 0)return n=u.raws.after,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeComment(L,n){let u;return L.walkComments(I=>{if(I.raws.before!==void 0)return u=I.raws.before,u.includes(`
`)&&(u=u.replace(/[^\n]+$/,"")),!1}),u===void 0?u=this.raw(n,null,"beforeDecl"):u&&(u=u.replace(/\S/g,"")),u}rawBeforeDecl(L,n){let u;return L.walkDecls(I=>{if(I.raws.before!==void 0)return u=I.raws.before,u.includes(`
`)&&(u=u.replace(/[^\n]+$/,"")),!1}),u===void 0?u=this.raw(n,null,"beforeRule"):u&&(u=u.replace(/\S/g,"")),u}rawBeforeOpen(L){let n;return L.walk(u=>{if(u.type!=="decl"&&(n=u.raws.between,n!==void 0))return!1}),n}rawBeforeRule(L){let n;return L.walk(u=>{if(u.nodes&&(u.parent!==L||L.first!==u)&&u.raws.before!==void 0)return n=u.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawColon(L){let n;return L.walkDecls(u=>{if(u.raws.between!==void 0)return n=u.raws.between.replace(/[^\s:]/g,""),!1}),n}rawEmptyBody(L){let n;return L.walk(u=>{if(u.nodes&&u.nodes.length===0&&(n=u.raws.after,n!==void 0))return!1}),n}rawIndent(L){if(L.raws.indent)return L.raws.indent;let n;return L.walk(u=>{let I=u.parent;if(I&&I!==L&&I.parent&&I.parent===L&&u.raws.before!==void 0){let w=u.raws.before.split(`
`);return n=w[w.length-1],n=n.replace(/\S/g,""),!1}}),n}rawSemicolon(L){let n;return L.walk(u=>{if(u.nodes&&u.nodes.length&&u.last.type==="decl"&&(n=u.raws.semicolon,n!==void 0))return!1}),n}rawValue(L,n){let u=L[n],I=L.raws[n];return I&&I.value===u?I.raw:u}root(L){this.body(L),L.raws.after&&this.builder(L.raws.after)}rule(L){this.block(L,this.rawValue(L,"selector")),L.raws.ownSemicolon&&this.builder(L.raws.ownSemicolon,L,"end")}stringify(L,n){if(!this[L.type])throw new Error("Unknown AST node type "+L.type+". Maybe you need to change PostCSS stringifier.");this[L.type](L,n)}}Q.exports=y,y.default=y},3303:(Q,E,y)=>{let N=y(7668);function L(n,u){new N(u).stringify(n)}Q.exports=L,L.default=L},4151:Q=>{Q.exports.isClean=Symbol("isClean"),Q.exports.my=Symbol("my")},5781:Q=>{const T=/[\t\n\f\r "#'()/;[\\\]{}]/g,m=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,k=/.[\r\n"'(/\\]/,b=/[\da-f]/i;Q.exports=function(_,R={}){let G,W,U,P,M,j,z,ee,Z,se,$=_.css.valueOf(),ie=R.ignoreErrors,de=$.length,K=0,X=[],te=[];function Y(H){throw _.error("Unclosed "+H,K)}return{back:function(H){te.push(H)},endOfFile:function(){return te.length===0&&K>=de},nextToken:function(H){if(te.length)return te.pop();if(K>=de)return;let re=!!H&&H.ignoreUnclosed;switch(G=$.charCodeAt(K),G){case 10:case 32:case 9:case 13:case 12:P=K;do P+=1,G=$.charCodeAt(P);while(G===32||G===10||G===9||G===13||G===12);j=["space",$.slice(K,P)],K=P-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let ae=String.fromCharCode(G);j=[ae,ae,K];break}case 40:if(se=X.length?X.pop()[1]:"",Z=$.charCodeAt(K+1),se==="url"&&Z!==39&&Z!==34&&Z!==32&&Z!==10&&Z!==9&&Z!==12&&Z!==13){P=K;do{if(z=!1,P=$.indexOf(")",P+1),P===-1){if(ie||re){P=K;break}Y("bracket")}for(ee=P;$.charCodeAt(ee-1)===92;)ee-=1,z=!z}while(z);j=["brackets",$.slice(K,P+1),K,P],K=P}else P=$.indexOf(")",K+1),W=$.slice(K,P+1),P===-1||k.test(W)?j=["(","(",K]:(j=["brackets",W,K,P],K=P);break;case 39:case 34:M=G===39?"'":'"',P=K;do{if(z=!1,P=$.indexOf(M,P+1),P===-1){if(ie||re){P=K+1;break}Y("string")}for(ee=P;$.charCodeAt(ee-1)===92;)ee-=1,z=!z}while(z);j=["string",$.slice(K,P+1),K,P],K=P;break;case 64:T.lastIndex=K+1,T.test($),P=T.lastIndex===0?$.length-1:T.lastIndex-2,j=["at-word",$.slice(K,P+1),K,P],K=P;break;case 92:for(P=K,U=!0;$.charCodeAt(P+1)===92;)P+=1,U=!U;if(G=$.charCodeAt(P+1),U&&G!==47&&G!==32&&G!==10&&G!==9&&G!==13&&G!==12&&(P+=1,b.test($.charAt(P)))){for(;b.test($.charAt(P+1));)P+=1;$.charCodeAt(P+1)===32&&(P+=1)}j=["word",$.slice(K,P+1),K,P],K=P;break;default:G===47&&$.charCodeAt(K+1)===42?(P=$.indexOf("*/",K+2)+1,P===0&&(ie||re?P=$.length:Y("comment")),j=["comment",$.slice(K,P+1),K,P],K=P):(m.lastIndex=K+1,m.test($),P=m.lastIndex===0?$.length-1:m.lastIndex-2,j=["word",$.slice(K,P+1),K,P],X.push(j),K=P)}return K++,j},position:function(){return K}}}},6156:Q=>{let E={};Q.exports=function(y){E[y]||(E[y]=!0,typeof console<"u"&&console.warn&&console.warn(y))}},38:Q=>{class E{constructor(N,L={}){if(this.type="warning",this.text=N,L.node&&L.node.source){let n=L.node.rangeBy(L);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in L)this[n]=L[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}Q.exports=E,E.default=E},1735:(Q,E,y)=>{y.d(E,{J:()=>I});var N,L=y(949),n=y(3278),u=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,[])).next())})};class I{static incrementConcept(r){try{r&&(this.conceptsData[r]=(this.conceptsData[r]||0)+1)}catch{console.error("Failed on increment concept")}}static incrementConnection(r){try{r&&(this.connectionsData[r]=(this.connectionsData[r]||0)+1)}catch{console.error("Failed on increment connection")}}static getTopConcepts(r){return Object.entries(this.conceptsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,r)}static getTopConnections(r){return Object.entries(this.connectionsData).map(([e,o])=>[parseInt(e),o]).sort((e,o)=>o[1]-e[1]).slice(0,r)}static saveDataToLocalStorage(){const r={concepts:this.conceptsData,connections:this.connectionsData};localStorage?.setItem(this.accessData,JSON.stringify(r))}static loadDataFromLocalStorage(){const r=localStorage==null?void 0:localStorage.getItem(this.accessData);if(r){const e=JSON.parse(r);this.conceptsData=e.concepts||{},this.connectionsData=e.connections||{}}}static sendToServer(){return u(this,void 0,void 0,function*(){try{yield this.syncToServer()}catch{console.error("Failed to process Access Tracker Sync with Server")}})}static syncToServer(){return u(this,void 0,void 0,function*(){try{if(!Object.keys(this.conceptsData).length&&!Object.keys(this.connectionsData).length)return;const r=n.b.BearerAccessToken;if(!r)return;const e=this.conceptsData&&Object.keys(this.conceptsData).length>0?this.conceptsData:{},o=this.connectionsData&&Object.keys(this.connectionsData).length>0?this.connectionsData:{},l=yield fetch(L.BaseUrl.PostPrefetchConceptConnections(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({concepts:e,connections:o})});if(!l.ok)throw new Error("Failed to sync data to the server.");yield l.json(),this.conceptsData={},this.connectionsData={},this.setNextSyncTime()}catch(r){console.error("Sync error:",r)}})}static setNextSyncTime(){this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS}static startAutoSync(){setInterval(()=>{const r=Date.now();this.nextSyncTime&&r>=this.nextSyncTime&&this.syncNow().catch(console.error)},6e4)}static syncNow(){return u(this,void 0,void 0,function*(){try{this.activateStatus?yield this.syncToServer():console.warn("Access Tracker inactive.")}catch{console.error("Error on sync access tracker")}})}static GetSuggestedConcepts(r){return u(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(L.BaseUrl.GetSuggestedConcepts());r!==void 0&&o.searchParams.append("top",r.toString());const l=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!l.ok){const v=yield l.text();throw new Error(`Failed to load concepts: ${l.status} ${l.statusText}. Details: ${v}`)}const f=(yield l.json())||[];return yield this.addConceptToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested concepts:",e.message),new Error("Unable to fetch suggested concepts. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested concepts."))}})}static GetSuggestedConnections(r){return u(this,void 0,void 0,function*(){try{const e=n.b.BearerAccessToken,o=new URL(L.BaseUrl.GetSuggestedConnections());r!==void 0&&o.searchParams.append("top",r.toString());const l=yield fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!l.ok){const v=yield l.text();throw new Error(`Failed to load connections: ${l.status} ${l.statusText}. Details: ${v}`)}const f=(yield l.json())||[];return yield this.addConnectionToBinaryTree(f.data),f}catch(e){throw e instanceof Error?(console.error("Error fetching suggested Connections:",e.message),new Error("Unable to fetch suggested connections. Please try again later.")):(console.error("An unexpected error occurred:",e),new Error("An unexpected error occurred while fetching suggested Connections."))}})}static addConceptToBinaryTree(r){return u(this,void 0,void 0,function*(){try{r.forEach(e=>{L.ConceptsData.AddConcept(e)})}catch{console.error("Error on adding Concepts Data into tree")}})}static addConnectionToBinaryTree(r){return u(this,void 0,void 0,function*(){try{r.forEach(e=>{L.ConnectionData.AddConnection(e)})}catch{console.error("Error on adding Connections Data into tree")}})}}N=I,I.conceptsData={},I.connectionsData={},I.SYNC_INTERVAL_MS=12e4,I.nextSyncTime=Date.now(),I.activateStatus=!1,I.accessData="Access Data",N.startAutoSync()},1167:(Q,E,y)=>{y.d(E,{Y:()=>w});var N=y(9581),L=y(3518),n=y(949),u=y(1863),I=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function C(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(T){T(c)})).then(C,i)}a((l=l.apply(r,[])).next())})};function w(r){return I(this,void 0,void 0,function*(){const e=n.Logger.logfunction("CreateTheConceptApi",r);let o=(0,n.CreateDefaultConcept)();try{var l=(0,L.Xr)();const f=yield fetch(N.B.CreateTheConceptUrl(),{method:"POST",headers:l,body:JSON.stringify(r)});if(!f.ok)throw(0,u.ry)(f),new Error(`Error! status: ${f.status}`);return o=yield f.json(),n.Logger.logUpdate(e),o}catch(f){f instanceof Error?console.log("Create the concept api error message: ",f.message):console.log("Create the concept api unexpected error: ",f),(0,u.Mb)(f,N.B.CreateTheConceptUrl()),(0,u.ey)(e,"CreateTheConceptApi",f)}})}},2:(Q,E,y)=>{y.d(E,{s:()=>e});var N=y(8286),L=y(9581),n=y(1412),u=y(3518),I=y(1863),w=y(949),r=function(l,f,v,C){return new(v||(v=Promise))(function(i,a){function t(m){try{T(C.next(m))}catch(k){a(k)}}function c(m){try{T(C.throw(m))}catch(k){a(k)}}function T(m){var k;m.done?i(m.value):(k=m.value,k instanceof v?k:new v(function(b){b(k)})).then(t,c)}T((C=C.apply(l,[])).next())})};function e(l){var f=arguments;return r(this,void 0,void 0,function*(){const v=w.Logger.logfunction("GetAllConnectionsOfComposition",f);var C=[];if((C=yield N.d.GetConnectionsOfConcept(l)).length==0)C=yield o(l);else{var i=yield o(l);(0,n.e)(i,C),C=i}return w.Logger.logUpdate(v),C})}function o(l){var f=arguments;return r(this,void 0,void 0,function*(){const v=w.Logger.logfunction("GetAllConnectionsOfCompositionOnline",f);var C=[];try{(0,u.Xr)("application/json");const a=new Headers,t=new FormData;t.append("composition_id",l.toString());const c=yield fetch(L.B.GetAllConnectionsOfCompositionUrl(),{method:"POST",headers:a,body:t});if(console.log("this is getting connection from online",L.B.GetAllConnectionsOfCompositionUrl(),l),!c.ok)throw(0,I.ry)(c),new Error(`Error! status: ${c.status}`);const T=yield c.json();for(var i=0;i<T.length;i++)N.d.AddConnection(T[i]),C.push(T[i]);return w.Logger.logUpdate(v),C}catch(a){a instanceof Error?console.log("Get all connection of composition error : ",a.message):console.log("Get all connection of composition error : ",a),(0,I.Mb)(a,L.B.GetAllConnectionsOfCompositionUrl()),(0,I.ey)(v,"GetAllConnectionsOfCompositionOnline",a)}})}},8642:(Q,E,y)=>{y.d(E,{Y:()=>l});var N=y(8286),L=y(9581),n=y(4364),u=y(5284),I=y(1412),w=y(3518),r=y(1863),e=y(949),o=function(f,v,C,i){return new(C||(C=Promise))(function(a,t){function c(k){try{m(i.next(k))}catch(b){t(b)}}function T(k){try{m(i.throw(k))}catch(b){t(b)}}function m(k){var b;k.done?a(k.value):(b=k.value,b instanceof C?b:new C(function(_){_(b)})).then(c,T)}m((i=i.apply(f,v||[])).next())})};function l(){var f=arguments;return o(this,arguments,void 0,function*(v=[]){const C=e.Logger.logfunction("GetAllConnectionsOfCompositionBulk",f)||{};if(e.serviceWorker){C.serviceWorker=!0;try{const c=yield(0,e.sendMessage)("GetAllConnectionsOfCompositionBulk",{composition_ids:v});return e.Logger.logUpdate(C),c.data}catch(c){console.error("GetAllConnectionsOfCompositionBulk sw error: ",c),(0,r.ey)(C,"GetAllConnectionsOfCompositionBulk",c),(0,e.handleServiceWorkerException)(c)}}var i=[];if(v.length<=0)return i;var a=yield(0,u.B)(v),t=yield function(){var c=arguments;return o(this,arguments,void 0,function*(T=[]){const m=e.Logger.logfunction("GetAllConnectionsOfCompositionOnline",c);var k=[];try{var b=(0,w.Xr)();const R=yield fetch(L.B.GetAllConnectionsOfCompositionBulkUrl(),{method:"POST",headers:b,body:JSON.stringify(T)});if(R.ok){const G=yield R.json();for(var _=0;_<G.length;_++)N.d.AddConnection(G[_]),k.push(G[_])}else console.log("Get all connections of composition bulk error message: ","Cannot get response"),(0,r.ry)(R);return e.Logger.logUpdate(m),k}catch(R){R instanceof Error?console.log("Get all connections of composition bulk error message: ",R.message):console.log("Get all connections of composition bulk unexpected error: ",R),(0,r.Mb)(R,L.B.GetAllConnectionsOfCompositionBulkUrl()),(0,r.ey)(m,"GetAllConnectionsOfCompositionOnline",R)}})}(v);return i=t,(0,I.e)(i,a),yield(0,n.s)(i),e.Logger.logUpdate(C),i})}},8675:(Q,E,y)=>{y.d(E,{l:()=>I});var N=y(1863),L=y(3518),n=y(949),u=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,[])).next())})};function I(w){var r=arguments;return u(this,void 0,void 0,function*(){n.Logger.logfunction("GetAllLinkerConnectionsFromTheConcept",r);var e=[];try{new Date().getTime();var o=(0,L.Xr)("application/x-www-form-urlencoded");const v=yield fetch(n.BaseUrl.GetAllLinkerConnectionOfConceptUrl()+`?conceptId=${w}`,{method:"GET",headers:o});if(v.ok){const C=yield v.json();for(var l=0;l<C.length;l++){var f=C[l];e.push(f)}}else console.log("Get all linker connection from the concepts error","cannot get respone"),(0,N.ry)(v)}catch(v){v instanceof Error?console.log("Get all linker connection from the concepts error: ",v.message):console.log("Get all linker connection from the concepts error(Unexpected): ",v),(0,N.Mb)(v,n.BaseUrl.GetAllLinkerConnectionOfConceptUrl())}return e})}},6058:(Q,E,y)=>{y.d(E,{W:()=>I});var N=y(1863),L=y(3518),n=y(949),u=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,[])).next())})};function I(w){var r=arguments;return u(this,void 0,void 0,function*(){const e=n.Logger.logfunction("GetAllLinkerConnectionsToTheConcept",r);var o=[];try{new Date().getTime();var l=(0,L.Xr)("application/x-www-form-urlencoded");const C=yield fetch(n.BaseUrl.GetAllLinkerConnectionToConceptUrl()+`?conceptId=${w}`,{method:"GET",headers:l});if(C.ok){const i=yield C.json();for(var f=0;f<i.length;f++){var v=i[f];o.push(v)}n.Logger.logUpdate(e)}else console.log("Get all linker connection To the concepts error","cannot get respone"),(0,N.ry)(C)}catch(C){C instanceof Error?console.log("Get all linker connection To the concepts error: ",C.message):console.log("Get all linker connection To the concepts error(Unexpected): ",C),(0,N.Mb)(C,n.BaseUrl.GetAllLinkerConnectionToConceptUrl()),(0,N.ey)(e,"GetAllLinkerConnectionsToTheConcept",C)}return o})}},2803:(Q,E,y)=>{y.d(E,{x:()=>w});var N=y(8286),L=y(9581),n=y(1863),u=y(949),I=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function C(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(T){T(c)})).then(C,i)}a((l=l.apply(r,[])).next())})};function w(r,e,o){var l=arguments;return I(this,void 0,void 0,function*(){const f=u.Logger.logfunction("GetCompositionConnectionsBetweenTwoConcepts",l)||{};var v=[];try{if(u.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,u.sendMessage)("GetCompositionConnectionsBetweenTwoConcepts",{ofConceptId:r,toConcept:e,mainKey:o});return u.Logger.logUpdate(f),t.data}catch(t){console.error("GetCompositionConnectionsBetweenTwoConcepts sw error: ",t),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",t),(0,u.handleServiceWorkerException)(t)}}var C=new FormData;C.append("ofConceptId",r.toString()),C.append("mainKey",o.toString()),C.append("toConceptId",e.toString());const a=yield fetch(L.B.GetCompositionConnectionBetweenTwoConceptsUrl(),{method:"POST",body:C,redirect:"follow"});if(a.ok){const t=yield a.json();for(var i=0;i<t.length;i++)N.d.AddConnection(t[i]),v.push(t[i]);u.Logger.logUpdate(f)}else console.log("Get composition connection between two concepts",a.status),(0,n.ry)(a)}catch(a){a instanceof Error?console.log("Get composition connection between two concepts error message: ",a.message):console.log("Get composition connection between two concepts unexpected error: ",a),(0,n.Mb)(a,L.B.GetCompositionConnectionBetweenTwoConceptsUrl()),(0,n.ey)(f,"GetCompositionConnectionsBetweenTwoConcepts",a)}return v})}},7139:(Q,E,y)=>{y.d(E,{r:()=>e});var N=y(3026),L=y(9581),n=y(949),u=y(1863),I=y(1596),w=y(3278),r=function(o,l,f,v){return new(f||(f=Promise))(function(C,i){function a(T){try{c(v.next(T))}catch(m){i(m)}}function t(T){try{c(v.throw(T))}catch(m){i(m)}}function c(T){var m;T.done?C(T.value):(m=T.value,m instanceof f?m:new f(function(k){k(m)})).then(a,t)}c((v=v.apply(o,[])).next())})};function e(o){var l=arguments;return r(this,void 0,void 0,function*(){const f=n.Logger.logfunction("GetConcept",l)||{};let v=(0,n.CreateDefaultConcept)();const C=new FormData;C.append("id",o.toString());try{if(n.serviceWorker){f.serviceWorker=!0;try{const t=yield(0,n.sendMessage)("GetConcept",{id:o});return n.Logger.logUpdate(f),t.data}catch(t){console.error("GetConcept sw error: ",t),(0,u.ey)(f,"GetConcept",t),(0,n.handleServiceWorkerException)(t)}}if(o==0||o==null||o==null)return v;var i=yield N.I.GetConcept(o);let a=N.I.GetNpc(o);if(i.id!=0||a)return n.Logger.logUpdate(f),i;{let t;const c={method:"POST",body:C,headers:{Authorization:"Bearer "+w.b.BearerAccessToken}};try{console.log("this is the url",L.B.GetConceptUrl()),t=yield fetch(L.B.GetConceptUrl(),c)}catch{t=yield(0,I.g)(c,"/api/getConcept")}return yield function(T,m,k,b){return r(this,void 0,void 0,function*(){return T.ok?(m=yield T.json()).id>0?N.I.AddConcept(m):N.I.AddNpc(b):(console.log("Get the concept error",T.status),(0,u.ry)(T)),n.Logger.logUpdate(k),m})}(t,v,f,o)}}catch(a){a instanceof Error?console.log("Get the concept error message: ",a.message):console.log("Get the concept unexpected error: ",a),(0,u.Mb)(a,L.B.GetConceptUrl()),(0,u.ey)(f,"GetConcept",a)}})}},1239:(Q,E,y)=>{y.d(E,{I:()=>o,r:()=>e});var N=y(3026),L=y(9581),n=y(3518),u=y(1863),I=y(949),w=y(1596),r=function(l,f,v,C){return new(v||(v=Promise))(function(i,a){function t(m){try{T(C.next(m))}catch(k){a(k)}}function c(m){try{T(C.throw(m))}catch(k){a(k)}}function T(m){var k;m.done?i(m.value):(k=m.value,k instanceof v?k:new v(function(b){b(k)})).then(t,c)}T((C=C.apply(l,[])).next())})};function e(l){return r(this,void 0,void 0,function*(){const f=I.Logger.logfunction("GetConceptBulk",[l.length])||{};let v=[],C=(new Date().getTime(),performance.now()),i=Array.from(new Set(l));try{if(I.serviceWorker){f.serviceWorker=!0;try{const a=yield(0,I.sendMessage)("GetConceptBulk",{passedConcepts:l});return I.Logger.logUpdate(f),a.data}catch(a){console.error("GetConceptBulk sw error: ",a),(0,u.ey)(f,"GetConceptBulk",a),(0,I.handleServiceWorkerException)(a)}}if(i.length>0){let a=[];for(let t=0;t<i.length;t++)if(!N.I.GetNpc(i[t])){let c=yield N.I.GetConcept(i[t]);c.id==0?a.push(i[t]):v.push(c)}if(a.length==0)return I.Logger.logfunction(f),v;{let t;const c={method:"POST",headers:(0,n.Xr)(),body:JSON.stringify(a)};try{t=yield fetch(L.B.GetConceptBulkUrl(),c)}catch{t=yield(0,w.g)(c,"/api/get_concept_bulk")}yield function(T,m,k,b,_){return r(this,void 0,void 0,function*(){if(T.ok){let R=yield T.json();if(R.length>0)for(let G=0;G<R.length;G++){let W=R[G];N.I.AddConcept(W),k.push(W)}I.Logger.logUpdate(b)}else console.log("Get Concept Bulk error",T.status),I.Logger.logError(_,"unknown","read","unknown",void 0,T.status,T,"GetConceptBulk",[m],"unknown",void 0),(0,u.ry)(T)})}(t,l,v,f,C)}}}catch(a){a instanceof Error?console.log("Get Concept Bulk  error message: ",a.message):console.log("Get Concept Bulk  unexpected error: ",a),I.Logger.logError(C,"unknown","read","unknown",void 0,500,a,"GetConceptBulk",[l],"unknown",void 0),(0,u.Mb)(a,L.B.GetConceptBulkUrl()),(0,u.ey)(f,"GetConceptBulk",a)}return v})}function o(l){return r(this,void 0,void 0,function*(){const f=[];if(l.length>0){const v={"Content-Type":"application/json"};try{const C=yield fetch(L.B.GetConceptBulkUrl(),{method:"POST",headers:v,body:JSON.stringify(l)});if(C.ok){const i=yield C.json();if(i.length>0)for(let a=0;a<i.length;a++){const t=i[a];f.push(t),N.I.AddConcept(t)}}else console.log("bulk concept getter api error: ",C.status),(0,u.ry)(C)}catch(C){C instanceof Error?console.log("bulk concept getter api error: ",C.message):console.log("bulk concept getter api error: ",C),(0,u.Mb)(C,L.B.GetConceptBulkUrl())}}return f})}},4402:(Q,E,y)=>{y.d(E,{A:()=>e});var N=y(3026),L=y(9581),n=y(3518),u=y(1863),I=y(949),w=y(7876),r=function(o,l,f,v){return new(f||(f=Promise))(function(C,i){function a(T){try{c(v.next(T))}catch(m){i(m)}}function t(T){try{c(v.throw(T))}catch(m){i(m)}}function c(T){var m;T.done?C(T.value):(m=T.value,m instanceof f?m:new f(function(k){k(m)})).then(a,t)}c((v=v.apply(o,[])).next())})};function e(o,l){var f=arguments;return r(this,void 0,void 0,function*(){const v=I.Logger.logfunction("GetConceptByCharacterAndType",f);try{if(I.serviceWorker)try{return(yield(0,I.sendMessage)("GetConceptByCharacterAndType",{characterValue:o,typeId:l})).data}catch(c){console.error("GetConceptByCharacterAndType sw error: ",c),(0,I.handleServiceWorkerException)(c)}let t=yield N.I.GetConceptByCharacterAndTypeLocal(o,l);if(t==null||t.id==0){var C={character_value:`${o}`,type_id:l},i=JSON.stringify(C),a=(0,n.Xr)();const c=yield fetch(L.B.GetConceptByCharacterAndTypeUrl(),{method:"POST",headers:a,body:i});c.ok?(t=yield c.json(),(0,w.K)(t).then(m=>{N.I.AddConcept(t)})):((0,u.ry)(c),console.log("This is the concept by type and character error",c.status))}return I.Logger.logUpdate(v),t}catch(t){t instanceof Error?console.log(" This is the concept by type and character error message: ",t.message):console.log(" This is the concept by type and character unexpected error: ",t),(0,u.Mb)(t,L.B.GetConceptByCharacterAndTypeUrl()),(0,u.ey)(v,"GetConceptByCharacterAndType",t)}})}},8146:(Q,E,y)=>{y.d(E,{Y:()=>r});var N=y(3026),L=y(9581),n=y(949),u=y(1863),I=y(7876),w=function(e,o,l,f){return new(l||(l=Promise))(function(v,C){function i(c){try{t(f.next(c))}catch(T){C(T)}}function a(c){try{t(f.throw(c))}catch(T){C(T)}}function t(c){var T;c.done?v(c.value):(T=c.value,T instanceof l?T:new l(function(m){m(T)})).then(i,a)}t((f=f.apply(e,[])).next())})};function r(e){var o=arguments;return w(this,void 0,void 0,function*(){const l=n.Logger.logfunction("GetConceptByCharacterValue",o);let f=(0,n.CreateDefaultConcept)();try{const v=new FormData;v.append("character_value",e);const C=yield fetch(L.B.GetConceptByCharacterValueUrl(),{method:"POST",body:v});C.ok?(f=yield C.json(),f.id>0&&(0,I.K)(f).then(i=>{N.I.AddConcept(f)}),n.Logger.logUpdate(l)):((0,u.ry)(C),console.log("Error in Getting concept by character value Error",C.status))}catch(v){v instanceof Error?console.log("Error in Getting concept by character value error message: ",v):console.log("Error in Getting concept by character value unexpected error: ",v),(0,u.Mb)(v,L.B.GetConceptByCharacterValueUrl()),(0,u.ey)(l,"GetConceptByCharacterValue",v)}return f})}},7467:(Q,E,y)=>{y.d(E,{j:()=>o});var N=y(8286),L=y(9581),n=y(4364),u=y(3518),I=y(1863),w=y(949),r=y(1596),e=function(l,f,v,C){return new(v||(v=Promise))(function(i,a){function t(m){try{T(C.next(m))}catch(k){a(k)}}function c(m){try{T(C.throw(m))}catch(k){a(k)}}function T(m){var k;m.done?i(m.value):(k=m.value,k instanceof v?k:new v(function(b){b(k)})).then(t,c)}T((C=C.apply(l,f||[])).next())})};function o(){return e(this,arguments,void 0,function*(l=[]){const f=w.Logger.logfunction("GetConnectionBulk",l.length)||{};let v=[];try{if(w.serviceWorker){f.serviceWorker=!0;try{const C=yield(0,w.sendMessage)("GetConnectionBulk",{connectionIds:l});return w.Logger.logUpdate(f),C.data}catch(C){console.error("GetConnectionBulk sw error: ",C),(0,I.ey)(f,"GetConnectionBulk",C),(0,w.handleServiceWorkerException)(C)}}if(l.length>0){let C=[];for(let i=0;i<l.length;i++)if(!N.d.GetNpConn(l[i])){let a=yield N.d.GetConnection(l[i]);a.id==0?C.push(l[i]):v.push(a)}if(C.length==0)return w.Logger.logUpdate(f),v;{let i;const a={method:"POST",headers:(0,u.Xr)(),body:JSON.stringify(C)};try{i=yield fetch(L.B.GetConnectionBulkUrl(),a)}catch{i=yield(0,r.g)(a,"/api/get_connection_bulk")}yield function(t,c,T){return e(this,void 0,void 0,function*(){if(t.ok){const m=yield t.json();if(m.length>0)for(let k=0;k<m.length;k++){let b=m[k];c.push(b),N.d.AddConnection(b)}}else(0,I.ey)(T,"GetConnectionBulk",t.status),(0,I.ry)(t),console.log("Get Connection Bulk error",t.status)})}(i,v,f),w.Logger.logUpdate(f)}}}catch(C){C instanceof Error?console.log("Get Connection Bulk error message: ",C):console.log("Get Connection Bulk unexpected error: ",C),(0,I.ey)(f,"GetConnectionBulk",C),(0,I.Mb)(C,L.B.GetConnectionBulkUrl())}return yield(0,n.s)(v),v})}},2832:(Q,E,y)=>{y.d(E,{j:()=>w});var N=y(949),L=y(9581),n=y(1863),u=y(3518),I=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function C(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(T){T(c)})).then(C,i)}a((l=l.apply(r,e||[])).next())})};function w(r){var e=arguments;return I(this,arguments,void 0,function*(o,l=""){const f=N.Logger.logfunction("SearchLinkMultipleApi",e);let v=performance.now();var C=(0,u.ab)("application/json",l);const i=L.B.SearchLinkMultipleAllApiUrl(),a=JSON.stringify(o);try{const t=yield fetch(i,{method:"POST",headers:C,body:a});if(t.ok){let c=yield t.json();return N.Logger.logUpdate(f),c}return(0,n.ry)(t),console.log("This is the searching multiple error",t.status),N.Logger.logError(v,"unknown","search","unknown",void 0,t.status,t,"SearchLinkMultipleApi",[o,l],"unknown",void 0),[]}catch(t){console.log("This is the searching multiple error",t),N.Logger.logError(v,"unknown","search","unknown",void 0,500,t,"SearchLinkMultipleApi",[o,l],"unknown",void 0),(0,n.Mb)(t,i),(0,n.ey)(f,"SearchLinkMultipleApi",t)}})}},3130:(Q,E,y)=>{y.d(E,{BG:()=>w,SL:()=>r,XZ:()=>I,ZJ:()=>n,iw:()=>u,pU:()=>e,y0:()=>L,yv:()=>N});const N=1,L=2,n=3,u=4,I=5,w=6,r=7,e=8},9635:(Q,E,y)=>{y.d(E,{x:()=>N});const N=new BroadcastChannel("Freeschema_mftsccs_browser_channel")},9581:(Q,E,y)=>{y.d(E,{B:()=>N});class N{static setRandomizer(n){console.log("set randomizer",n),this.BASE_RANDOMIZER=n}static getRandomizer(){return this.BASE_RANDOMIZER}static GetConceptUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/getConcept":this.NODE_CACHE_URL+"/api/getConcept"}static GetConnectionUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get-connection-by-id":this.NODE_CACHE_URL+"/api/get-connection-by-id"}static GetConceptBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get_concept_bulk":this.NODE_CACHE_URL+"/api/get_concept_bulk"}static GetConnectionBulkUrl(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get_connection_bulk":this.NODE_CACHE_URL+"/api/get_connection_bulk"}static GetAllConceptsOfUserUrl(){return this.BASE_URL+"/api/get_all_concepts_of_user"}static GetAllConnectionsOfUserUrl(){return this.BASE_URL+"/api/get_all_connections_of_user"}static GetAllConnectionsOfCompositionUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition"}static GetAllConnectionsOfCompositionBulkUrl(){return this.BASE_URL+"/api/get_all_connections_of_composition_bulk"}static GetConceptByCharacterValueUrl(){return this.BASE_URL+"/api/get_concept_by_character_value"}static GetConceptByCharacterAndTypeUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_type"}static GetConceptByCharacterAndCategoryUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category"}static GetConceptByCharacterAndCategoryDirectUrl(){return this.BASE_URL+"/api/get_concept_by_character_and_category_direct"}static GetCharacterByCharacterUrl(){return this.BASE_URL+"/api/get_character_by_character"}static GetAllConceptsByTypeUrl(){return this.BASE_URL+"/api/get_all_concepts_by_type"}static GetAllConnectionsOfConceptUrl(){return this.BASE_URL+"/api/get-link-connections"}static GetAllConnectionsToConceptUrl(){return this.BASE_URL+"/api/get-link-reverse-connections"}static GetAllAiData(){return this.BASE_URL+"/api/get-preloaded-concepts"}static getAppConfig(){return this.NODE_URL+"/api/v1/config"}static PostPrefetchConceptConnections(){return this.NODE_URL+"/api/v1/access-tracker/sync-access-tracker"}static GetSuggestedConcepts(){return this.NODE_URL+"/api/v1/access-tracker/list-concepts-file"}static GetSuggestedConnections(){return this.NODE_URL+"/api/v1/access-tracker/list-connections-file"}static PostLogger(){return this.LOG_SERVER+"/api/logger"}static GetAllPrefetchConnectionsUrl(){return this.BASE_URL+"/api/get_all_connections_of_user?inpage=500"}static GetAllLinkerConnectionOfConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-from-concept"}static GetAllLinkerConnectionToConceptUrl(){return this.BASE_URL+"/api/get-all-linkers-to-concept"}static DeleteConceptUrl(){return this.BASE_URL+"/api/delete_concept"}static DeleteUserUrl(){return this.BASE_URL+"/api/deleteuser"}static RecursiveSearchUrl(){return this.BASE_URL+"/api/recursivesearch-concept-connection"}static SearchLinkMultipleAllApiUrl(){return this.BASE_URL+"/api/Connection/search-link-multiple-all-ccs"}static MakeTheNameInBackendUrl(){return this.BASE_URL+"/api/make-name-from-frontend"}static SearchAllTypeWithLinker(n=!0){return n?this.BASE_URL+"/api/search-all-with-linker-ccs":this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static LoginUrl(){return this.BASE_URL+"/api/auth/login"}static SignupUrl(){return this.BASE_URL+"/api/auth/signup"}static GetCompositionConnectionBetweenTwoConceptsUrl(){return this.BASE_URL+"/api/get-composition-connection-between-two-concepts"}static SearchCompositionsUrl(){return this.BASE_URL+"/api/search-compositions"}static SearchLinkMultipleAll(){return this.BASE_URL+"/api/Connection/search-link-multiple-all"}static CreateSessionId(){return this.BASE_URL+"/api/create-session-id-remote"}static CreateSessionVisitUrl(){return this.BASE_URL+"/api/create-remote-session-visit"}static ViewInternalDataUrl(){return this.BASE_URL+"/api/view-api-internal-data-ccs-id-bulk"}static SearchInternalWithAuthenticatedCcsUrl(){return this.BASE_URL+"/api/search-composition-internal-authenticated-ccs"}static SearchInternalWithCcsUrl(){return this.BASE_URL+"/api-search-compositions-internal-clean-ccs"}static CreateGhostConceptApiUrl(n=!0){return n?N.NODE_URL+"/api/v1/local-concepts":N.NODE_URL+"/api/v1/local-concepts-without-auth"}static CreateGhostConnectionApiUrl(){return N.NODE_URL+"/api/v1/local-connections"}static GetRealConceptById(){return N.NODE_URL+"/api/v1/local-concepts-translate"}static GetReservedIdUrl(){return this.BASE_URL+"/api/get_reserved_ids"}static GetReservedConnectionIdUrl(){return this.BASE_URL+"/api/get_reserved_connection_ids"}static CreateTheTextDataUrl(){return this.BASE_URL+"/api/create_text_data"}static CreateTheCharacterDataUrl(){return this.BASE_URL+"/api/create_character_data"}static CreateTheConceptUrl(){return this.BASE_URL+"/api/create_the_concept"}static CreateTheConnectionUrl(){return this.BASE_URL+"/api/create_the_connection"}static CreateTheConnectionNewUrl(){return this.BASE_URL+"/api/create_the_connection_new"}static MakeTheTypeConceptUrl(){return this.BASE_URL+"/api/make_the_type_concept"}static DeleteTheConnectionUrl(){return this.BASE_URL+"/api/delete_connection"}static DeleteTheConnectionBulkUrl(){return this.BASE_URL+"/api/delete_connection_bulk"}static FreeschemaQueryUrl(){return this.BASE_URL+"/api/freeschema-query"}static uploadImageUrl(){return this.BASE_URL+"/api/Image/UploadImage"}static uploadImageUrlWithSmall(){return this.BASE_URL+"/api/Image/UploadImageV2"}static uploadFileUrl(){return this.BASE_URL+"/api/Image/UploadFile"}static sendMail(){return this.BASE_URL+"/api/sendmail"}static sendBulkMail(){return this.BASE_URL+"/api/sendmail/bulk"}static getWidgetData(){return this.BASE_URL+"/api/get-widget"}static getLatestWidgetData(){return!this.NODE_CACHE_URL||this.NODE_CACHE_URL&&typeof this.NODE_CACHE_URL=="string"&&this.NODE_CACHE_URL.trim()===""?this.BASE_URL+"/api/get-latest-widget":this.NODE_CACHE_URL+"/api/get-latest-widget"}static getConnectionsByTypes(){return this.BASE_URL+"/api/get-connection-by-types"}static CreatePrototypeUrl(){return this.BASE_URL+"/api/create-prototype"}static GetCachedImage(n){return"https://cdn.boomconcole.com/freeschema/"+n}}N.BASE_URL="https://localhost:7053/",N.NODE_CACHE_URL="",N.AI_URL="https://ai.freeschema.com",N.MQTT_URL="192.168.1.249",N.NODE_URL="http://localhost:5001",N.LOG_SERVER="https://logdev.freeschema.com",N.BASE_APPLICATION="",N.DOCUMENTATION_WIDGET=0,N.isNearestCache=!0,N.FLAGS={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1},N.BASE_RANDOMIZER=999},6963:(Q,E,y)=>{y.d(E,{f:()=>u});var N=y(205),L=y(6731),n=function(I,w,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{C(e.next(i))}catch(a){l(a)}}function v(i){try{C(e.throw(i))}catch(a){l(a)}}function C(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}C((e=e.apply(I,[])).next())})};class u{static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((w,r)=>{this.checkFlag(w),setTimeout(()=>{r("not")},25e3)})})}static checkFlag(w){if(N.B.isCharacterLoaded)return w("done");setTimeout(u.checkFlag,1e3,w)}static addNodeToTree(w){return n(this,void 0,void 0,function*(){return this.characterRoot==null?(this.characterRoot=w,this.characterRoot):(this.characterRoot=this.characterRoot.addCharacterNode(w,this.characterRoot,this.characterRoot.height),this.characterRoot)})}static removeNodeByCharacter(w,r){return n(this,void 0,void 0,function*(){this.characterRoot&&this.characterRoot.removeNodeWithVariants(this.characterRoot,w,r)})}static countNumberOfNodes(){return this.characterRoot?this.characterRoot.countNodeBelow(this.characterRoot):0}static addConceptToTree(w){if(w.characterValue!=""){var r=new L.b(w.characterValue,w,null,null);this.addNodeToTree(r)}}static getNodeFromTree(w){return this.characterRoot?this.characterRoot.getCharacterFromNode(w,this.characterRoot):this.characterRoot}static getNodeFromTreeUpdated(w){return this.characterRoot?this.characterRoot.getCharacterFromNode(w,this.characterRoot):this.characterRoot}static getCharacterAndTypeFromTree(w,r){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndType(w,r,this.characterRoot):this.characterRoot})}static getCharacterAndCategoryFromTree(w,r){return n(this,void 0,void 0,function*(){return this.characterRoot?this.characterRoot.getFromNodeWithCharacterAndCategory(w,r,this.characterRoot):this.characterRoot})}static removeConceptCharacter(w){this.characterRoot&&(this.characterRoot=this.characterRoot.removeNode(this.characterRoot,w))}}u.characterRoot=null},2202:(Q,E,y)=>{y.d(E,{W:()=>w});var N=y(6963),L=y(6731),n=y(205),u=y(949),I=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function C(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(T){T(c)})).then(C,i)}a((l=l.apply(r,[])).next())})};class w{static addNodeToTree(e){if(this.root==null)return this.root=e,this.root;this.root=this.root.addNode(e,this.root,this.root.height)}static waitForDataToLoad(){return I(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isDataLoaded)return e("done");setTimeout(w.checkFlag,1e3,e)}static addConceptToTree(e){let o=new L.b(e.id,e,null,null),l=new L.b(e.characterValue,e,null,null);N.f.addNodeToTree(l),this.addNodeToTree(o)}static getNodeFromTree(e){return I(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(e,this.root):null})}static removeNodeFromTree(e){return I(this,void 0,void 0,function*(){if(this.root){let o=new Event(`${e}`);console.log("this is the fired event after delete",o),(0,u.dispatchIdEvent)(e),this.root=this.root.removeNode(this.root,e)}})}static getConceptListFromIds(e,o,l){return I(this,void 0,void 0,function*(){this.root&&this.root.checkIfIdsInNode(this.root,e,o,l)})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}w.root=null},5457:(Q,E,y)=>{y.d(E,{c:()=>w});var N=y(949),L=y(7282),n=y(205);class u{constructor(e,o){this.value=[],this.height=1,this.key=e,this.value.push(o),this.leftNode=null,this.rightNode=null,this.currentNode=null}addType(e,o,l){var f,v,C,i;if(e==null)return(0,N.dispatchIdEvent)(o,{detail:l}),new u(o,l);if(o<e.key)e.leftNode=this.addType(e.leftNode,o,l);else{if(!(o>e.key))return e.value.includes(l)||((0,N.dispatchIdEvent)(o,{detail:l}),e.value.push(l)),e;e.rightNode=this.addType(e.rightNode,o,l)}e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1;const a=this.getBalanceFactor(e);return a>1&&o<((f=e.leftNode)===null||f===void 0?void 0:f.key)?this.rightRotate(e):a<-1&&o>((v=e.rightNode)===null||v===void 0?void 0:v.key)?this.leftRotate(e):a>1&&o>((C=e.leftNode)===null||C===void 0?void 0:C.key)?(e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)):a<-1&&o<((i=e.rightNode)===null||i===void 0?void 0:i.key)?(e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)):e}rightRotate(e){if(e){let o=e.leftNode;if(o){let l=o.rightNode;return e.leftNode=l,o.rightNode=e,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(o.rightNode))+1,o}}return e}leftRotate(e){if(e){let o=e.rightNode;if(o){let l=o.leftNode;return o.leftNode=e,e.rightNode=l,e.height=Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,o.height=Math.max(this.getHeight(o.leftNode),this.getHeight(e.rightNode))+1,o}}return e}getHeight(e){return e?e.height:0}getBalanceFactor(e){return e==null?0:this.getHeight(e.leftNode)-this.getHeight(e.rightNode)}getFromNode(e,o){return o&&(e==o.key?o:e<o.key?this.getFromNode(e,o.leftNode):e>o.key?this.getFromNode(e,o.rightNode):o)}removeNodeWithVariants(e,o,l){if(e==null)return e;if(e.key>o)return e.leftNode=this.removeNodeWithVariants(e.leftNode,o,l),e;if(e.key<o)return e.rightNode=this.removeNodeWithVariants(e.rightNode,o,l),e;if(e.value.length>0){for(let f=0;f<e.value.length;f++)if(l==e.value[f])return e.value.splice(f,1),e}if(e.leftNode==null){let f=e.rightNode;return e=null,f}if(e.rightNode==null){let f=e.leftNode;return e=null,f}{let f=this.inOrderSuccessor(e.rightNode);return e.value=f.value,e.key=f.key,e.currentNode=f.currentNode,e.rightNode=this.removeNodeWithVariants(e.rightNode,f.key,l),e}}countNodeBelow(e){return e==null?0:1+this.countNodeBelow(e.leftNode)+this.countNodeBelow(e.rightNode)}inOrderSuccessor(e){for(;e.leftNode!=null;)e=e.leftNode;return e}}var I=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function C(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(T){T(c)})).then(C,i)}a((l=l.apply(r,[])).next())})};class w{static addType(e){return I(this,void 0,void 0,function*(){return this.root==null?(this.root=e,new CustomEvent(`${e.key}`,{detail:e.value[0]}),(0,N.dispatchIdEvent)(e.key,{detail:e.value[0]}),this.root):(this.root=this.root.addType(this.root,e.key,e.value[0]),this.root)})}static addConceptToTree(e){if(e.typeId!=0){let o=new u(e.typeId,e.id);this.addType(o)}}static removeTypeConcept(e,o){this.root&&(this.root=this.root.removeNodeWithVariants(this.root,e,o))}static getNodeFromTreeNew(e){return this.root?this.root.getFromNode(e,this.root):this.root}static getTypeVariantsFromTreeNew(e){return I(this,void 0,void 0,function*(){let o=this.getNodeFromTreeNew(e),l=[],f=[];if(o){l=o.value;for(let v=0;v<l.length;v++){let C=!1;for(let i=0;i<f.length;i++)f[i].id==l[v]&&(C=!0);C||f.push(yield(0,N.GetTheConcept)(l[v]))}}return f})}static waitForDataToLoad(){return I(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isTypeLoaded)return e("done");setTimeout(w.checkFlag,1e3,e)}static getTypeVariantsFromTreeWithUserIdNew(e,o){return I(this,void 0,void 0,function*(){let l=[],f=yield this.getTypeVariantsFromTreeNew(e);console.log("these are all the concepts",f);for(let v=0;v<f.length;v++)f[v].userId==o&&l.push(f[v]);return l})}static getTypeVariantsWithCharacterValueNew(e,o){return I(this,void 0,void 0,function*(){let l=yield this.getTypeVariantsFromTreeNew(o);console.log("this is all the concepts for character",l);let f=(0,L.o)();for(let v=0;v<l.length;v++)l[v].characterValue==e&&(f=l[v]);return f})}static countNumberOfNodes(){return this.typeRoot?this.typeRoot.countNodeBelow(this.typeRoot):0}}w.typeRoot=null,w.root=null},2615:(Q,E,y)=>{y.d(E,{j:()=>L});var N=y(949);class L{constructor(u,I,w,r,e,o,l,f=!1,v,C,i){this.count=0,this.typeCharacter="",this.referent=null,this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=N.BaseUrl.getRandomizer(),this.x=0,this.y=0,this.id=u,this.userId=I,this.typeId=w,this.ghostId=u,this.categoryId=r,this.referentId=e,this.characterValue=`${o}`,this.accessId=l,this.typeCharacter=i,this.type=null,this.isNew=f,this.entryTimeStamp=v,this.updatedTimeStamp=C}getType(){console.log(this.typeId)}}},3026:(Q,E,y)=>{y.d(E,{I:()=>v});var N=y(3655),L=y(2202),n=y(6963),u=y(5457),I=y(7282),w=y(949);class r{constructor(i,a,t,c){this.height=1,this.key=i,this.value=a,this.leftNode=t,this.rightNode=c}addNode(i,a,t){if(a==null)return i;let c=a.leftNode,T=a.rightNode;if(a.key>i.key)a.leftNode=this.addNode(i,c,t);else{if(!(a.key<i.key))return a;a.rightNode=this.addNode(i,T,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let m=this.getBalanceFactor(a);if(m>1&&a.leftNode){if(i.key<a.leftNode.key)return this.rightRotate(a);if(i.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(m<-1&&a.rightNode){if(i.key>a.rightNode.key)return this.leftRotate(a);if(i.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}rightRotate(i){if(i){let a=i.leftNode;if(a){let t=a.rightNode;return i.leftNode=t,a.rightNode=i,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode))+1,a}}return i}leftRotate(i){if(i){let a=i.rightNode;if(a){let t=a.leftNode;return a.leftNode=i,i.rightNode=t,i.height=Math.max(this.getHeight(i.leftNode),this.getHeight(i.rightNode))+1,a.height=Math.max(this.getHeight(a.leftNode),this.getHeight(i.rightNode))+1,a}}return i}getHeight(i){return i?i.height:0}getBalanceFactor(i){return i==null?0:this.getHeight(i.leftNode)-this.getHeight(i.rightNode)}getFromNode(i,a){return a&&(i==a.key?a:i<a.key?this.getFromNode(i,a.leftNode):i>a.key?this.getFromNode(i,a.rightNode):a)}removeNode(i,a){if(i==null)return i;if(i.key>a)return i.leftNode=this.removeNode(i.leftNode,a),i;if(i.key<a)return i.rightNode=this.removeNode(i.rightNode,a),i;if(i.leftNode==null){let t=i.rightNode;return i=null,t}if(i.rightNode==null){let t=i.leftNode;return i=null,t}{let t=this.inOrderSuccessor(i.rightNode);return i.value=t.value,i.key=t.key,i.rightNode=this.removeNode(i.rightNode,t.key),i}}countNodeBelow(i){return i==null?0:1+this.countNodeBelow(i.leftNode)+this.countNodeBelow(i.rightNode)}inOrderSuccessor(i){for(;i.leftNode!=null;)i=i.leftNode;return i}}var e=function(C,i,a,t){return new(a||(a=Promise))(function(c,T){function m(_){try{b(t.next(_))}catch(R){T(R)}}function k(_){try{b(t.throw(_))}catch(R){T(R)}}function b(_){var R;_.done?c(_.value):(R=_.value,R instanceof a?R:new a(function(G){G(R)})).then(m,k)}b((t=t.apply(C,[])).next())})};class o{static addNodeToTree(i){if(this.root==null)return this.root=i,this.root;this.root=this.root.addNode(i,this.root,this.root.height)}static addWidgetToTree(i){let a=new r(i.widgetId,i,null,null);this.addNodeToTree(a)}static getNodeFromTree(i){return e(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(i,this.root):null})}static removeNodeFromTree(i){return e(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,i))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}o.root=null;class l{constructor(){this.widgetId=0,this.mainId=0,this.conceptIds=[],this.linkers=[],this.reverse=[],this.mainCompositionIds=[],this.countinfo=[]}}var f=function(C,i,a,t){return new(a||(a=Promise))(function(c,T){function m(_){try{b(t.next(_))}catch(R){T(R)}}function k(_){try{b(t.throw(_))}catch(R){T(R)}}function b(_){var R;_.done?c(_.value):(R=_.value,R instanceof a?R:new a(function(G){G(R)})).then(m,k)}b((t=t.apply(C,[])).next())})};class v{constructor(){this.name="conceptsArray"}static CheckContains(i){for(var a=!1,t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].id==i.id&&(a=!0);return a}static AddNpc(i){this.NPC.includes(i)||(this.NPC.length>10&&(this.NPC=[]),this.NPC.push(i))}static GetNpc(i){return!!this.NPC.includes(i)}static AddConceptToStorage(i){i.id>0&&(0,N.kH)("concept",i)}static GetConceptBulkData(i,a,t){return f(this,void 0,void 0,function*(){yield L.W.getConceptListFromIds(i,a,t)})}static AddWidget(i){if(w.serviceWorker)try{(0,w.sendMessage)("ConceptsData__AddWidget",{widgetDetails:i})}catch(a){console.error("Concept Data, Add Widget sw error: ",a),(0,w.handleServiceWorkerException)(a)}i.widgetId>0&&o.addWidgetToTree(i)}static AddConcept(i){if(w.serviceWorker)try{(0,w.sendMessage)("ConceptsData__AddConcept",{concept:i})}catch(a){console.error("Concept Data, Add Concpet sw error: ",a),(0,w.handleServiceWorkerException)(a)}i.id>0&&(L.W.addConceptToTree(i),u.c.addConceptToTree(i))}static AddConceptToMemory(i){i.id>0&&(L.W.addConceptToTree(i),u.c.addConceptToTree(i))}static AddConceptTemporary(i){var a=this.CheckContains(i);this.conceptDictionary[i.id]=i,a&&this.RemoveConcept(i),this.conceptsArray.push(i)}static RemoveConcept(i){for(var a=0;a<this.conceptsArray.length;a++)this.conceptsArray[a].id==i.id&&this.conceptsArray.splice(a,1);(0,N.wh)("concept",i.id)}static GetWidget(i){return f(this,void 0,void 0,function*(){let a=new l;if(w.serviceWorker)try{return(yield(0,w.sendMessage)("ConceptsData__GetWidget",{id:i})).data}catch(c){console.error("Concept Data, Get Widget sw error: ",c),(0,w.handleServiceWorkerException)(c)}let t=yield o.getNodeFromTree(i);return t!=null&&(a=t.value),a})}static RemoveWidget(i){return f(this,void 0,void 0,function*(){if(w.serviceWorker)try{return(yield(0,w.sendMessage)("ConceptsData__RemoveWidget",{id:i})).data}catch(a){console.error("Concept Data, Remove Widget sw error: ",a),(0,w.handleServiceWorkerException)(a)}yield o.removeNodeFromTree(i)})}static GetConcept(i){return f(this,void 0,void 0,function*(){if(w.serviceWorker)try{return(yield(0,w.sendMessage)("ConceptsData__GetConcept",{id:i})).data}catch(T){console.error("Concept Data, Get Concpet sw error: ",T),(0,w.handleServiceWorkerException)(T)}if(i==0||i==null||i==null)return(0,I.o)();var a=(0,I.o)(),t=yield L.W.getNodeFromTree(i);if(t?.value){var c=t.value;c&&(a=c)}return a})}static GetConceptByCharacter(i){return f(this,void 0,void 0,function*(){var a=(0,I.o)(),t=n.f.getNodeFromTree(i);return t&&(a=t.value),a})}static GetConceptByCharacterUpdated(i){return f(this,void 0,void 0,function*(){var a=(0,I.o)(),t=n.f.getNodeFromTree(i);return t&&(a=t.value),a})}static GetConceptByCharacterAndTypeLocal(i,a){return f(this,void 0,void 0,function*(){return(0,I.o)(),yield u.c.getTypeVariantsWithCharacterValueNew(i,a)})}static GetConceptByCharacterAndCategoryLocal(i,a){return f(this,void 0,void 0,function*(){var t=(0,I.o)(),c=yield n.f.getCharacterAndCategoryFromTree(i,a);return c&&(t=c.value),t})}static GetConceptsByTypeId(i){let a=[];for(var t=0;t<this.conceptsArray.length;t++)this.conceptsArray[t].typeId==i&&a.push(this.conceptsArray[t]);return a}static GetConceptsByTypeIdAndUser(i,a){var t=arguments;return f(this,void 0,void 0,function*(){if(w.Logger.logfunction("ConceptsData.GetConceptsByTypeIdAndUser",t),w.serviceWorker)try{return(yield(0,w.sendMessage)("ConceptsData__GetConceptsByTypeIdAndUser",{typeId:i,userId:a})).data}catch(T){console.error("Concept Data, Get Concpet sw error:",T),(0,w.handleServiceWorkerException)(T)}let c=[];return c=yield u.c.getTypeVariantsFromTreeWithUserIdNew(i,a),c})}static GetBinaryCharacterTree(){return n.f.characterRoot}getName(){return this.name}}v.conceptsArray=[],v.NPC=[],v.conceptDictionary=[]},2155:(Q,E,y)=>{y.d(E,{N:()=>n});var N=y(7282),L=y(9581);class n{constructor(I=0,w,r,e,o,l,f){this.count=0,this.isTemp=!1,this.toUpdate=!1,this.applicationId=L.B.getRandomizer(),this.type=(0,N.o)(),this.ofConcept=(0,N.o)(),this.toConcept=(0,N.o)(),this.id=I,this.ofTheConceptId=w,this.toTheConceptId=r,this.userId=e,this.typeId=o,this.ghostId=I,this.orderId=l,this.accessId=f,this.entryTimeStamp=(0,N.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date,this.typeCharacter=""}}},5239:(Q,E,y)=>{y.d(E,{O:()=>I});var N=y(205),L=y(949);class n{constructor(r,e,o,l){this.leftNode=null,this.rightNode=null,this.variants=[],this.height=1,this.key=r,this.value=e,this.leftNode=o,this.rightNode=l,this.currentNode=null}addCurrentNode(r,e){return e==null?e=r:(r.value.typeId!=e.value.typeId&&(e.currentNode=this.addCurrentNode(r,e.currentNode)),e)}addCurrentNodeType(r,e){if(e==null)return r;let o=!1;r.value.id==e.value.id&&(o=!0);for(let l=0;l<e.variants.length;l++)e.variants[l].value.id==r.value.id&&(o=!0);return o||e.variants.push(r),e}getMax(r,e){return r>e?r:e}addNode(r,e,o){if(e==null)return(0,L.dispatchIdEvent)(r.value.ofTheConceptId),r;let l=e.leftNode,f=e.rightNode;if(r.key<e.key)e.leftNode=this.addNode(r,l,o);else{if(!(r.key>e.key))return e;e.rightNode=this.addNode(r,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}addTypeNode(r,e,o){if(r.value.typeId!=0){if(e==null)return r;let l=e.leftNode,f=e.rightNode;if(e.key>r.key)e.leftNode=this.addTypeNode(r,l,o);else{if(!(e.key<r.key))return e.key==r.key&&e.key!=0&&e.addCurrentNodeType(r,e),e;e.rightNode=this.addTypeNode(r,f,o)}e.height=1+this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(r.key<e.leftNode.key)return this.rightRotate(e);if(r.key>e.leftNode.key)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(r.key>e.rightNode.key)return this.leftRotate(e);if(r.key<e.rightNode.key)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}}return e}rightRotate(r){if(r){let e=r.leftNode;if(e){let o=e.rightNode;return r.leftNode=o,e.rightNode=r,r.height=this.getMax(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(e.rightNode))+1,e}throw console.log("this is the error in right rotation",r,e),new Error("Cannot perform right rotation: left node is null.")}return r}leftRotate(r){if(r){let e=r.rightNode;if(e){let o=e.leftNode;return e.leftNode=r,r.rightNode=o,r.height=this.getMax(this.getHeight(r.leftNode),this.getHeight(r.rightNode))+1,e.height=this.getMax(this.getHeight(e.leftNode),this.getHeight(r.rightNode))+1,e}throw console.log("this is the error in left rotation",r,e),new Error("Cannot perform left rotation: right node is null.")}return r}getHeight(r){return r?r.height:0}getBalanceFactor(r){return r==null?0:this.getHeight(r.leftNode)-this.getHeight(r.rightNode)}getFromNode(r,e){try{if(e)return r==e.key?(e.value.count?e.value.count++:e.value.count=1,e):r<e.key?this.getFromNode(r,e.leftNode):r>e.key?this.getFromNode(r,e.rightNode):e}catch{console.log("this is the exception",r,e,e?.leftNode,e?.rightNode)}return e}getCharacterFromNode(r,e){return e&&(r==e.key?e:r<e.key?this.getCharacterFromNode(r,e.leftNode):r>e.key?this.getCharacterFromNode(r,e.rightNode):e)}checkIfIdsInNode(r,e,o,l){if(r){if(e.includes(r.key)){o.push(r.value);let f=e.indexOf(r.key);e.splice(f,1)}r.leftNode&&this.checkIfIdsInNode(r.leftNode,e,o,l),r.rightNode&&this.checkIfIdsInNode(r.rightNode,e,o,l)}}traverse(r){let e=0;return r&&(e+=1,r?.leftNode&&(e+=this.traverse(r.leftNode)),r.rightNode&&(e+=this.traverse(r.rightNode))),e}removeNode(r,e){if(r==null)return r;if(r.key>e)return r.leftNode=this.removeNode(r.leftNode,e),r;if(r.key<e)return r.rightNode=this.removeNode(r.rightNode,e),r;if(new Event(`${r.value.ofTheConceptId}`),(0,L.dispatchIdEvent)(r.value.ofTheConceptId),r.leftNode==null){let o=r.rightNode;return r=null,o}if(r.rightNode==null){let o=r.leftNode;return r=null,o}{let o=this.inOrderSuccessor(r.rightNode);return r.value=o.value,r.key=o.key,r.variants=o.variants,r.currentNode=o.currentNode,r.rightNode=this.removeNode(r.rightNode,o.key),r}}removeNodeWithVariants(r,e,o){if(r==null)return r;if(r.key>e)return r.leftNode=this.removeNodeWithVariants(r.leftNode,e,o),r;if(r.key<e)return r.rightNode=this.removeNodeWithVariants(r.rightNode,e,o),r;if(r.variants.length>0){if(r.value.id==o){let l=r.variants[0];if(l)return r.value=l.value,r.key=l.key,r.currentNode=l.currentNode,r.variants.splice(0,1),r}else for(let l=0;l<r.variants.length;l++)if(o==r.variants[l].value.id)return r.variants.splice(l,1),r}if(r.leftNode==null){let l=r.rightNode;return r=null,l}if(r.rightNode==null){let l=r.leftNode;return r=null,l}{let l=this.inOrderSuccessor(r.rightNode);return r.value=l.value,r.key=l.key,r.variants=l.variants,r.currentNode=l.currentNode,r.rightNode=this.removeNodeWithVariants(r.rightNode,l.key,o),r}}inOrderSuccessor(r){for(;r.leftNode!=null;)r=r.leftNode;return r}}var u=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,[])).next())})};class I{static addNodeToTree(r){try{if(this.connectionroot==null)return this.connectionroot=r,this.connectionroot;this.connectionroot=this.connectionroot.addNode(r,this.connectionroot,this.connectionroot.height)}catch(e){throw console.log("This is the error in making the tree",e),e}}static addConnectionToTree(r){let e=new n(r.id,r,null,null);this.addNodeToTree(e)}static traverse(){var r;return(r=this.connectionroot)===null||r===void 0?void 0:r.traverse(this.connectionroot)}static waitForDataToLoad(){return u(this,void 0,void 0,function*(){return new Promise((r,e)=>{this.checkFlag(r),setTimeout(()=>{e("not")},25e3)})})}static checkFlag(r){if(N.B.isConnectionLoaded)return r("done");setTimeout(I.checkFlag,1e3,r)}static removeNodeFromTree(r){return u(this,void 0,void 0,function*(){this.connectionroot&&(this.connectionroot=this.connectionroot.removeNode(this.connectionroot,r))})}static getNodeFromTree(r){return u(this,void 0,void 0,function*(){try{return this.connectionroot?this.connectionroot.getFromNode(r,this.connectionroot):this.connectionroot}catch{console.log("this is the getNodeFromTree",r,this.connectionroot)}})}static getConnectionListFromIds(r,e,o){return u(this,void 0,void 0,function*(){this.connectionroot&&this.connectionroot.checkIfIdsInNode(this.connectionroot,r,e,o)})}}I.connectionroot=null},991:(Q,E,y)=>{y.d(E,{H:()=>I});var N=y(949),L=y(3996);class n extends L.i{constructor(r,e,o,l){super(r,e,o,l),this.key="",this.value=[],this.height=1,this.key=r,this.value=e,this.leftNode=o,this.rightNode=l}addNode(r,e,o){if(e==null)return r;let l=e.leftNode,f=e.rightNode;if(e.key>r.key)e.leftNode=this.addNode(r,l,o);else{if(!(e.key<r.key))return e;e.rightNode=this.addNode(r,f,o)}e.height=1+Math.max(this.getHeight(e.leftNode),this.getHeight(e.rightNode));let v=this.getBalanceFactor(e);if(v>1&&e.leftNode){if(this.getBalanceFactor(e.leftNode)>=0)return this.rightRotate(e);if(this.getBalanceFactor(e.leftNode)<0)return e.leftNode=this.leftRotate(e.leftNode),this.rightRotate(e)}if(v<-1&&e.rightNode){if(this.getBalanceFactor(e.rightNode)<=0)return this.leftRotate(e);if(this.getBalanceFactor(e.rightNode)>0)return e.rightNode=this.rightRotate(e.rightNode),this.leftRotate(e)}return e}}var u=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,[])).next())})};class I{static CreateCompositionKey(r,e){return r}static GetConnectionByOfTheConceptAndTypeId(r,e){let o=this.CreateCompositionKey(r,e);if(this.node){let l=this.node.getFromNode(o,this.node);if(l)return l.value}return null}static addConnection(r){if(r.id>0){let e=this.CreateCompositionKey(r.ofTheConceptId,r.typeId);if(this.node){let o=this.node.getFromNode(e,this.node);if(o){let l=o?.value;l.length==0&&(o.value=[]),l.includes(r.id)||l.push(r.id)}else{let l=[];l.push(r.id);let f=new n(e,l,null,null);this.addNodeToTree(f)}}else{let o=[];o.push(r.id);let l=new n(e,o,null,null);this.addNodeToTree(l)}new Event(`${e}`)}else console.log("cannot insert key id with  n 0 to the connection tree",r)}static addNodeToTree(r){return u(this,void 0,void 0,function*(){return this.node==null?(this.node=r,console.log("this is type dispatch in connection",r),(0,N.dispatchIdEvent)(r.key),this.node):(this.node=this.node.addNode(r,this.node,this.node.height),this.node)})}static removeNodeFromTree(r){return u(this,void 0,void 0,function*(){this.node&&(this.node=this.node.removeNode(this.node,r))})}}I.node=null},3996:(Q,E,y)=>{y.d(E,{i:()=>N});class N{constructor(n,u,I,w){this.key="",this.value=[],this.height=1,this.key=n,this.value=u,this.leftNode=I,this.rightNode=w}getFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getFromNode(n,u.leftNode):n>u.key?this.getFromNode(n,u.rightNode):u)}rightRotate(n){if(n){let u=n.leftNode;if(u){let I=u.rightNode;return n.leftNode=I,u.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,u}}return n}leftRotate(n){if(n){let u=n.rightNode;if(u){let I=u.leftNode;return u.leftNode=n,n.rightNode=I,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(n.rightNode))+1,u}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return n==null?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}removeNode(n,u){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNode(n.leftNode,u),n;if(n.key<u)return n.rightNode=this.removeNode(n.rightNode,u),n;if(n.leftNode==null){let I=n.rightNode;return n=null,I}if(n.rightNode==null){let I=n.leftNode;return n=null,I}{let I=this.inOrderSuccessor(n.rightNode);return n.value=I.value,n.key=I.key,n.variants=I.variants,n.currentNode=I.currentNode,n.rightNode=this.removeNode(n.rightNode,I.key),n}}inOrderSuccessor(n){for(;n.leftNode!=null;)n=n.leftNode;return n}}},8286:(Q,E,y)=>{y.d(E,{d:()=>v});var N=y(1735),L=y(949),n=y(3655),u=y(1863),I=y(2155),w=y(5239),r=y(991),e=y(3996);class o extends e.i{constructor(i,a,t,c){super(i,a,t,c),this.key="",this.value=[],this.height=1,this.key=i,this.value=a,this.leftNode=t,this.rightNode=c}addNode(i,a,t){if(a==null)return i;let c=a.leftNode,T=a.rightNode;if(a.key>i.key)a.leftNode=this.addNode(i,c,t);else{if(!(a.key<i.key))return a;a.rightNode=this.addNode(i,T,t)}a.height=1+Math.max(this.getHeight(a.leftNode),this.getHeight(a.rightNode));let m=this.getBalanceFactor(a);if(m>1&&a.leftNode){if(i.key<a.leftNode.key)return this.rightRotate(a);if(i.key>a.leftNode.key)return a.leftNode=this.leftRotate(a.leftNode),this.rightRotate(a)}if(m<-1&&a.rightNode){if(i.key>a.rightNode.key)return this.leftRotate(a);if(i.key<a.rightNode.key)return a.rightNode=this.rightRotate(a.rightNode),this.leftRotate(a)}return a}}class l{static CreateCompositionKey(i){return i}static addNodeToTree(i){return a=this,t=void 0,T=function*(){return this.connectionTypeRoot==null?(this.connectionTypeRoot=i,this.connectionTypeRoot):(this.connectionTypeRoot=this.connectionTypeRoot.addNode(i,this.connectionTypeRoot,this.connectionTypeRoot.height),this.connectionTypeRoot)},new((c=void 0)||(c=Promise))(function(m,k){function b(G){try{R(T.next(G))}catch(W){k(W)}}function _(G){try{R(T.throw(G))}catch(W){k(W)}}function R(G){var W;G.done?m(G.value):(W=G.value,W instanceof c?W:new c(function(U){U(W)})).then(b,_)}R((T=T.apply(a,t||[])).next())});var a,t,c,T}static addConnectionToTree(i){if(i.id>0){let a=this.CreateCompositionKey(i.typeId);if(this.connectionTypeRoot){let t=this.connectionTypeRoot.getFromNode(a,this.connectionTypeRoot);if(t){let c=t?.value;c.length==0&&(t.value=[]),c.includes(i.id)||c.push(i.id)}else{let c=[];c.push(i.id);let T=new o(a,c,null,null);this.addNodeToTree(T)}}else{let t=[];t.push(i.id);let c=new o(a,t,null,null);this.addNodeToTree(c)}}else console.log("cannot insert key id with  n 0 to the connection tree",i)}static GetConnectionByOfTheConceptAndTypeId(i,a){let t=this.CreateCompositionKey(a);if(this.connectionTypeRoot){let c=this.connectionTypeRoot.getFromNode(t,this.connectionTypeRoot);if(c)return c.value}return null}}l.connectionTypeRoot=null;var f=function(C,i,a,t){return new(a||(a=Promise))(function(c,T){function m(_){try{b(t.next(_))}catch(R){T(R)}}function k(_){try{b(t.throw(_))}catch(R){T(R)}}function b(_){var R;_.done?c(_.value):(R=_.value,R instanceof a?R:new a(function(G){G(R)})).then(m,k)}b((t=t.apply(C,[])).next())})};class v{constructor(){this.name="Connection Array"}static CheckContains(i){let a=!1;for(let t=0;t<this.connectionArray.length;t++)this.connectionArray[t].id==i.id&&(a=!0);return a}static AddConnectionToStorage(i){(0,n.kH)("connection",i)}static AddNpConn(i){this.deletedConnections.includes(i)||this.deletedConnections.push(i)}static GetNpConn(i){return!!this.deletedConnections.includes(i)}static AddConnection(i){try{w.O.addConnectionToTree(i),l.addConnectionToTree(i),r.H.addConnection(i)}catch(a){throw console.log("this is the error in making the connection"),a}}static AddConnectionToMemory(i){i.isTemp||(w.O.addConnectionToTree(i),l.addConnectionToTree(i),r.H.addConnection(i))}static AddToDictionary(i){this.connectionDictionary[i.id]=i}static RemoveConnection(i){i.id!=0&&((0,n.wh)("connection",i.id),w.O.removeNodeFromTree(i.id),r.H.removeNodeFromTree(i.id))}static GetConnectionTypeOfTree(){r.H.node}static GetConnectionByOfTheConceptAndType(i,a){return f(this,void 0,void 0,function*(){try{if(L.serviceWorker)try{return(yield(0,L.sendMessage)("ConnectionData__GetConnectionByOfTheConceptAndType",{ofTheConceptId:i,typeId:a})).data}catch(t){console.error("GetConnectionByOfTheConceptAndType sw error: ",t),(0,L.handleServiceWorkerException)(t)}return r.H.GetConnectionByOfTheConceptAndTypeId(i,a)||[]}catch(t){return console.log("this is the error in GetConnectionByOfTheConceptAndType",t),[]}})}static GetConnectionByOfType(i,a){const t=L.Logger.logfunction("ConnectionData.GetConnectionByOfType",arguments);let c=l.GetConnectionByOfTheConceptAndTypeId(i,a);return c?(L.Logger.logUpdate(t),c):(L.Logger.logUpdate(t),[])}static GetConnectionTree(){return w.O.connectionroot}static GetConnectionTypeTree(){return l.connectionTypeRoot}static GetConnectionBulkData(i,a,t){return f(this,void 0,void 0,function*(){yield w.O.getConnectionListFromIds(i,a,t)})}static GetConnection(i){return f(this,void 0,void 0,function*(){N.J.incrementConnection(i);let a=new I.N(0,0,0,0,0,0,0);try{if(L.serviceWorker)try{return(yield(0,L.sendMessage)("ConnectionData__GetConnection",{id:i})).data}catch(c){console.error("GetConnection sw error: ",c),(0,L.handleServiceWorkerException)(c)}let t=yield w.O.getNodeFromTree(i);if(t?.value){let c=t.value;c&&(a=c)}return a}catch(t){return console.log("this is the error in GetConnection",t),a}})}static GetConnectionsOfCompositionLocal(i){var a=arguments;return f(this,void 0,void 0,function*(){const t=L.Logger.logfunction("ConnectionData.GetConnectionsOfCompositionLocal",a)||{};let c=[];try{if(L.serviceWorker){t.serviceWorker=!0;try{const m=yield(0,L.sendMessage)("ConnectionData__GetConnectionsOfCompositionLocal",{id:i});return L.Logger.logUpdate(t),m.data}catch(m){console.error("GetConnectionsOfCompositionLocal sw error: ",m),(0,u.ey)(t,"GetConnectionsOfCompositionLocal",m),(0,L.handleServiceWorkerException)(m)}}let T=[];T=v.GetConnectionByOfType(i,i);for(let m=0;m<T.length;m++){let k=yield w.O.getNodeFromTree(T[m]);k&&c.push(k.value),L.Logger.logUpdate(t)}}catch(T){console.log("this is the error GetConnectionsOfCompositionLocal",i,c),(0,u.ey)(t,"ConnectionData.GetConnectionsOfCompositionLocal",T)}return c})}static GetConnectionsOfConcept(i){return f(this,void 0,void 0,function*(){let a=[],t=[];try{if(L.serviceWorker)try{return(yield(0,L.sendMessage)("ConnectionData__GetConnectionsOfConcept",{id:i})).data}catch(c){console.error("GetConnectionsOfConcept sw error: ",c),(0,L.handleServiceWorkerException)(c)}a=yield v.GetConnectionByOfTheConceptAndType(i,i);for(let c=0;c<a.length;c++){let T=yield w.O.getNodeFromTree(a[c]);T&&t.push(T.value)}return t}catch(c){return console.log("this is the error in GetConnectionsOfConcept",c),t}})}getName(){return this.name}}v.deletedConnections=[],v.connectionArray=[],v.connectionDictionary=[]},276:(Q,E,y)=>{y.d(E,{y:()=>N});class N{constructor(){this.conceptId=0,this.connectionTypeId=0,this.connectionType="",this.count=0}}},205:(Q,E,y)=>{y.d(E,{B:()=>N});class N{}N.isTypeLoaded=!1,N.isCharacterLoaded=!1,N.isDataLoaded=!1,N.isLocalDataLoaded=!1,N.isLocalCharacterLoaded=!1,N.isLocalTypeLoaded=!1,N.isConnectionLoaded=!1,N.isConnectionTypeLoaded=!1,N.isLocalConnectionLoaded=!1},2515:(Q,E,y)=>{y.d(E,{x:()=>N});class N{constructor(n,u,I,w){this.variants=[],this.height=1,this.key=n,this.value=u,this.leftNode=I,this.rightNode=w,this.currentNode=null}addCurrentNode(n,u){return u==null?u=n:(n.value.typeId!=u.value.typeId&&(u.currentNode=this.addCurrentNode(n,u.currentNode)),u)}addCurrentNodeType(n,u){if(u==null)return n;var I=!1;for(let w=0;w<u.variants.length;w++)u.variants[w].value.id==n.value.id&&(I=!0);return I||u.variants.push(n),u}addNode(n,u,I){if(u==null)return n;var w=u.leftNode,r=u.rightNode;if(u.key>n.key)u.leftNode=this.addNode(n,w,I);else{if(!(u.key<n.key))return u;u.rightNode=this.addNode(n,r,I)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}return u}addCharacterNode(n,u,I){if(n.value.characterValue!=""){if(u==null)return n;var w=u.leftNode,r=u.rightNode;if(u.key>n.key)u.leftNode=this.addCharacterNode(n,w,I);else{if(!(u.key<n.key))return u.key==n.key&&u.key!=""&&u.value.id!=n.value.id&&u.addCurrentNodeType(n,u),u;u.rightNode=this.addCharacterNode(n,r,I)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}}return u}addTypeNode(n,u,I){if(n.value.typeId!=0){if(u==null)return n;var w=u.leftNode,r=u.rightNode;if(u.key>n.key)u.leftNode=this.addTypeNode(n,w,I);else{if(!(u.key<n.key))return u.key==n.key&&u.key!=0&&u.value.id!=n.value.id&&u.addCurrentNodeType(n,u),u;u.rightNode=this.addTypeNode(n,r,I)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}}return u}rightRotate(n){if(n){let u=n.leftNode;if(u){let I=u.rightNode;return n.leftNode=I,u.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,u}}return n}leftRotate(n){if(n){let u=n.rightNode;if(u){let I=u.leftNode;return u.leftNode=n,n.rightNode=I,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(n.rightNode))+1,u}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return n==null?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getFromNode(n,u.leftNode):n>u.key?this.getFromNode(n,u.rightNode):u)}updateNodeSyncStatus(n,u,I){if(I){if(n==I.key){let w=I.value;return w.isSynced=u,I.value=w,I}return n<I.key?this.updateNodeSyncStatus(n,u,I.leftNode):n>I.key?this.updateNodeSyncStatus(n,u,I.rightNode):I}return I}getCharacterFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getCharacterFromNode(n,u.leftNode):n>u.key?this.getCharacterFromNode(n,u.rightNode):u)}getFromNodeWithCharacterAndType(n,u,I){if(n=`${n}`,I){if(n==I.key){if(n==I.value.characterValue&&u==I.value.typeId)return I;for(let w=0;w<I.variants.length;w++)if(I.variants[w].value.typeId==u)return I.variants[w]}else{if(n<I.key)return this.getFromNodeWithCharacterAndType(n,u,I.leftNode);if(n>I.key)return this.getFromNodeWithCharacterAndType(n,u,I.rightNode)}return null}return I}getFromNodeWithCharacterAndCategory(n,u,I){if(n=`${n}`,I){if(n==I.key){if(n==I.value.characterValue&&u==I.value.categoryId)return I;for(let w=0;w<I.variants.length;w++)if(I.variants[w].value.categoryId==u)return I.variants[w]}else{if(n<I.key)return this.getFromNodeWithCharacterAndCategory(n,u,I.leftNode);if(n>I.key)return this.getFromNodeWithCharacterAndCategory(n,u,I.rightNode)}return null}return I}removeNode(n,u){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNode(n.leftNode,u),n;if(n.key<u)return n.rightNode=this.removeNode(n.rightNode,u),n;if(n.leftNode==null){let w=n.rightNode;return n=null,w}if(n.rightNode==null){let w=n.leftNode;return n=null,w}var I=this.inOrderSuccessor(n.rightNode);return n.value=I.value,n.key=I.key,n.variants=I.variants,n.currentNode=I.currentNode,n.rightNode=this.removeNode(n.rightNode,I.key),n}removeNodeWithVariants(n,u,I){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNodeWithVariants(n.leftNode,u,I),n;if(n.key<u)return n.rightNode=this.removeNodeWithVariants(n.rightNode,u,I),n;if(n.variants.length>0){if(n.value.id==I){var w=n.variants[0];if(w)return n.value=w.value,n.key=w.key,n.currentNode=w.currentNode,n.variants.splice(0,1),n}else for(let e=0;e<n.variants.length;e++)if(I==n.variants[e].value.id)return n.variants.splice(e,1),n}if(n.leftNode==null){let e=n.rightNode;return n=null,e}if(n.rightNode==null){let e=n.leftNode;return n=null,e}var r=this.inOrderSuccessor(n.rightNode);return n.value=r.value,n.key=r.key,n.variants=r.variants,n.currentNode=r.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,r.key,I),n}countNodeBelow(n){return n==null?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;n.leftNode!=null;)n=n.leftNode;return n}}},9736:(Q,E,y)=>{y.d(E,{v:()=>c});var N=y(205),L=y(2515),n=function(T,m,k,b){return new(k||(k=Promise))(function(_,R){function G(P){try{U(b.next(P))}catch(M){R(M)}}function W(P){try{U(b.throw(P))}catch(M){R(M)}}function U(P){var M;P.done?_(P.value):(M=P.value,M instanceof k?M:new k(function(j){j(M)})).then(G,W)}U((b=b.apply(T,[])).next())})};class u{static addNodeToTree(m){if(this.root==null)return this.root=m,this.root;this.root=this.root.addNode(m,this.root,this.root.height)}static addConceptToTree(m){var k=new L.x(m.id,m,null,null);new L.x(m.characterValue,m,null,null),this.addNodeToTree(k)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((m,k)=>{this.checkFlag(m),setTimeout(()=>{k("not")},25e3)})})}static checkFlag(m){if(N.B.isLocalDataLoaded)return m("done");setTimeout(u.checkFlag,1e3,m)}static getNodeFromTree(m){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(m,this.root):null})}static getCharacterAndTypeFromTree(m,k){return this.root?this.root.getFromNodeWithCharacterAndType(m,k,this.root):this.root}static updateSyncStatus(m){return this.root?this.root.updateNodeSyncStatus(m,!0,this.root):this.root}static removeNodeFromTree(m){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,m))})}}u.root=null;var I=function(T,m,k,b){return new(k||(k=Promise))(function(_,R){function G(P){try{U(b.next(P))}catch(M){R(M)}}function W(P){try{U(b.throw(P))}catch(M){R(M)}}function U(P){var M;P.done?_(P.value):(M=P.value,M instanceof k?M:new k(function(j){j(M)})).then(G,W)}U((b=b.apply(T,[])).next())})};class w{static waitForDataToLoad(){return I(this,void 0,void 0,function*(){return new Promise((m,k)=>{this.checkFlag(m),setTimeout(()=>{k("not")},25e3)})})}static checkFlag(m){if(N.B.isLocalCharacterLoaded)return m("done");setTimeout(w.checkFlag,1e3,m)}static addNodeToTree(m){return I(this,void 0,void 0,function*(){return this.LocalCharacterRoot==null?(this.LocalCharacterRoot=m,this.LocalCharacterRoot):(this.LocalCharacterRoot=this.LocalCharacterRoot.addCharacterNode(m,this.LocalCharacterRoot,this.LocalCharacterRoot.height),this.LocalCharacterRoot)})}static addConceptToTree(m){if(m.characterValue!=""){var k=new L.x(m.characterValue,m,null,null);this.addNodeToTree(k)}}static getNodeFromTree(m){return this.LocalCharacterRoot?this.LocalCharacterRoot.getCharacterFromNode(m,this.LocalCharacterRoot):this.LocalCharacterRoot}static getCharacterAndTypeFromTree(m,k){return I(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndType(m,k,this.LocalCharacterRoot):this.LocalCharacterRoot})}static getCharacterAndCategoryFromTree(m,k){return I(this,void 0,void 0,function*(){return this.LocalCharacterRoot?this.LocalCharacterRoot.getFromNodeWithCharacterAndCategory(m,k,this.LocalCharacterRoot):this.LocalCharacterRoot})}static removeConceptType(m,k){this.LocalCharacterRoot&&(this.LocalCharacterRoot=this.LocalCharacterRoot.removeNodeWithVariants(this.LocalCharacterRoot,m,k))}}w.LocalCharacterRoot=null;var r=function(T,m,k,b){return new(k||(k=Promise))(function(_,R){function G(P){try{U(b.next(P))}catch(M){R(M)}}function W(P){try{U(b.throw(P))}catch(M){R(M)}}function U(P){var M;P.done?_(P.value):(M=P.value,M instanceof k?M:new k(function(j){j(M)})).then(G,W)}U((b=b.apply(T,[])).next())})};class e{static addNodeToTree(m){return r(this,void 0,void 0,function*(){return this.LocalTypeRoot==null?(this.LocalTypeRoot=m,this.LocalTypeRoot):(this.LocalTypeRoot=this.LocalTypeRoot.addTypeNode(m,this.LocalTypeRoot,this.LocalTypeRoot.height),this.LocalTypeRoot)})}static addConceptToTree(m){if(m.typeId!=0){var k=new L.x(m.typeId,m,null,null);this.addNodeToTree(k)}}static removeConceptType(m,k){this.LocalTypeRoot&&(this.LocalTypeRoot=this.LocalTypeRoot.removeNodeWithVariants(this.LocalTypeRoot,m,k))}static getNodeFromTree(m){return this.LocalTypeRoot?this.LocalTypeRoot.getFromNode(m,this.LocalTypeRoot):this.LocalTypeRoot}static getTypeVariantsFromTree(m){var k=this.getNodeFromTree(m),b=[];if(k){b.push(k?.value);for(let _=0;_<k.variants.length;_++)b.push(k.variants[_].value);return b}}static waitForDataToLoad(){return r(this,void 0,void 0,function*(){return new Promise((m,k)=>{this.checkFlag(m),setTimeout(()=>{k("not")},25e3)})})}static checkFlag(m){if(N.B.isLocalTypeLoaded)return m("done");setTimeout(e.checkFlag,1e3,m)}static getTypeVariantsFromTreeWithUserId(m,k){return r(this,void 0,void 0,function*(){var b=[],_=this.getNodeFromTree(m);if(_){console.log("this is the node to type",_),_.value.userId!=k&&_.value.userId!=999||b.push(_?.value);for(let R=0;R<_.variants.length;R++)_.variants[R].value.userId!=k&&_.value.userId!=999||b.push(_.variants[R].value)}return b})}}e.LocalTypeRoot=null;var o=y(6416),l=y(3026),f=y(7820),v=y(4864),C=y(628),i=y(949),a=y(3278),t=function(T,m,k,b){return new(k||(k=Promise))(function(_,R){function G(P){try{U(b.next(P))}catch(M){R(M)}}function W(P){try{U(b.throw(P))}catch(M){R(M)}}function U(P){var M;P.done?_(P.value):(M=P.value,M instanceof k?M:new k(function(j){j(M)})).then(G,W)}U((b=b.apply(T,[])).next())})};class c{constructor(){this.name="conceptsArray"}static AddConcept(m){m.id!=0&&(u.addConceptToTree(m),w.addConceptToTree(m),e.addConceptToTree(m),this.localconceptsArray.push(m))}static AddPermanentConcept(m){m.id!=0&&(u.removeNodeFromTree(m.ghostId),w.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId),f.G.addConceptToTree(m),l.I.AddConcept(m),(0,i.AddGhostConcept)(m,m.userId,a.b.sessionId))}static RemoveConcept(m){return t(this,void 0,void 0,function*(){try{m.id!=0&&(u.removeNodeFromTree(m.ghostId),w.removeConceptType(m.characterValue,m.ghostId),e.removeConceptType(m.typeId,m.ghostId))}catch(k){throw k}})}static RemoveConceptById(m){return t(this,void 0,void 0,function*(){try{let k=yield c.GetConcept(m);k.id!=0&&(u.removeNodeFromTree(m),w.removeConceptType(k.characterValue,k.ghostId),e.removeConceptType(k.typeId,k.ghostId),C.H.RemoveConcept(k))}catch(k){throw k}})}static AddConceptToMemory(m){m.id!=0&&(u.addConceptToTree(m),w.addConceptToTree(m),e.addConceptToTree(m))}static GetConcept(m){return t(this,void 0,void 0,function*(){var k=(0,o.u)(),b=yield u.getNodeFromTree(m);if(b?.value){var _=b.value;_&&(k=_)}return k})}static UpdateConceptSyncStatus(m){return t(this,void 0,void 0,function*(){u.updateSyncStatus(m)})}static GetConceptByGhostId(m){return t(this,void 0,void 0,function*(){var k=(0,o.u)(),b=yield f.G.getNodeFromTree(m);if(b?.value){var _=b.value;_&&(k=_)}return k})}static GetConceptByCharacter(m){return t(this,void 0,void 0,function*(){var k=(0,o.u)(),b=w.getNodeFromTree(m);return b&&(k=b.value),k})}static GetConceptByCharacterAndTypeLocal(m,k){return t(this,void 0,void 0,function*(){var b=(0,o.u)(),_=yield w.getCharacterAndTypeFromTree(m,k);return _&&(b=_.value),b})}static GetConceptByCharacterAndCategoryLocal(m,k){return t(this,void 0,void 0,function*(){var b=(0,o.u)(),_=yield w.getCharacterAndCategoryFromTree(m,k);return _&&(b=_.value),b})}static GetConceptsByTypeId(m){let k=[];for(var b=0;b<this.localconceptsArray.length;b++)this.localconceptsArray[b].typeId==m&&k.push(this.localconceptsArray[b]);return k}static GetConceptsByTypeIdAndUser(m,k){return t(this,void 0,void 0,function*(){let b=[];return b=yield e.getTypeVariantsFromTreeWithUserId(m,k),b})}static ClearData(){return t(this,void 0,void 0,function*(){this.localconceptsArray=[],v.G.connectionArray=[]})}getName(){return this.name}}c.localconceptsArray=[]},4864:(Q,E,y)=>{y.d(E,{G:()=>w});var N=y(2155),L=y(8286),n=y(205),u=y(628),I=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function C(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(T){T(c)})).then(C,i)}a((l=l.apply(r,[])).next())})};class w{constructor(){this.name="Connection Array"}static CheckContains(e){for(var o=!1,l=0;l<this.connectionArray.length;l++)this.connectionArray[l].id==e.id&&(o=!0);return o}static AddConnection(e){this.CheckContains(e)&&this.RemoveConnection(e),e.id,this.connectionArray.push(e)}static AddConnectionToMemory(e){this.CheckContains(e)&&this.RemoveConnection(e),this.connectionArray.push(e)}static AddToDictionary(e){this.connectionDictionary[e.id]=e}static RemoveConnection(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e.id&&this.connectionArray.splice(o,1);e.id}static RemoveConnectionById(e){for(var o=0;o<this.connectionArray.length;o++)this.connectionArray[o].id==e&&this.connectionArray.splice(o,1);u.H.RemoveConnectionById(e)}static AddPermanentConnection(e){e.id>0&&L.d.AddConnection(function(o){let l=new N.N(0,0,0,0,0,0,0);return l.ofTheConceptId=o.ofTheConceptId,l.toTheConceptId=o.toTheConceptId,l.typeId=o.typeId,l.orderId=o.orderId,l.id=o.id,l}(e))}static GetConnection(e){var o;o=null;for(var l=0;l<this.connectionArray.length;l++)this.connectionArray[l].id==e&&(o=this.connectionArray[l]);return o}static waitForDataToLoad(){return I(this,void 0,void 0,function*(){return new Promise((e,o)=>{this.checkFlag(e),setTimeout(()=>{o("not")},25e3)})})}static checkFlag(e){if(n.B.isLocalConnectionLoaded)return e("done");setTimeout(w.checkFlag,1e3,e)}static GetConnectionsOfCompositionLocal(e){return I(this,void 0,void 0,function*(){var o=[];try{for(var l=0;l<this.connectionArray.length;l++)this.connectionArray[l].typeId==e&&o.push(this.connectionArray[l]);return o}catch{return o}})}static GetConnectionOfCompositionAndTypeLocal(e,o){return I(this,void 0,void 0,function*(){var l=[];try{for(var f=0;f<this.connectionArray.length;f++)this.connectionArray[f].typeId==e&&this.connectionArray[f].ofTheConceptId==o&&l.push(this.connectionArray[f]);return l}catch{return l}})}getName(){return this.name}}w.connectionArray=[],w.connectionDictionary=[]},7820:(Q,E,y)=>{y.d(E,{G:()=>u});var N=y(205),L=y(2515),n=function(I,w,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{C(e.next(i))}catch(a){l(a)}}function v(i){try{C(e.throw(i))}catch(a){l(a)}}function C(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}C((e=e.apply(I,[])).next())})};class u{static addNodeToTree(w){if(this.root==null)return this.root=w,this.root;this.root=this.root.addNode(w,this.root,this.root.height)}static addConceptToTree(w){var r=new L.x(w.ghostId,w,null,null);this.addNodeToTree(r)}static waitForDataToLoad(){return n(this,void 0,void 0,function*(){return new Promise((w,r)=>{this.checkFlag(w),setTimeout(()=>{r("not")},25e3)})})}static checkFlag(w){if(N.B.isLocalDataLoaded)return w("done");setTimeout(u.checkFlag,1e3,w)}static getNodeFromTree(w){return n(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(w,this.root):null})}static removeNodeFromTree(w){return n(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,w))})}}u.root=null},5257:(Q,E,y)=>{y.d(E,{R:()=>u});var N=y(9003),L=y(3075),n=function(I,w,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{C(e.next(i))}catch(a){l(a)}}function v(i){try{C(e.throw(i))}catch(a){l(a)}}function C(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}C((e=e.apply(I,[])).next())})};class u{static AddConceptId(w){this.localId=w.value,(0,N.kH)("localid",w)}static getConceptId(){return n(this,void 0,void 0,function*(){try{if(this.localId){if(this.ReservedLocalId.length<5){yield(0,L.EO)().then(()=>{let r=this.localId;for(let e=1;e<10;e++){let o=this.localId-e;this.ReservedLocalId.push(o),r=o}this.AddConceptId({id:0,value:r})}).catch(r=>(console.log(" getid: cannot get the id from indexdb"),-Math.floor(1e8*Math.random())));let w=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),w}{let w=this.ReservedLocalId[0];return this.ReservedLocalId.shift(),w}}return yield(0,L.EO)().then(()=>{let w=this.localId;for(let r=1;r<10;r++){let e=this.localId-r;this.ReservedLocalId.push(e),w=e}this.AddConceptId({id:0,value:w})}),this.getConceptId()}catch(w){return console.log(" getid: this is the eror in concept",w),-Math.floor(1e8*Math.random())}})}static AddConnectionId(w){this.localConnectionId=w.value}static getConnectionId(){return n(this,void 0,void 0,function*(){try{if(this.localConnectionId){if(this.ReservedConnectionId.length<5){yield(0,L.xd)().then(()=>{let r=this.localConnectionId;for(let e=1;e<10;e++){let o=this.localConnectionId-e;this.ReservedConnectionId.push(o),r=o}}).catch(r=>(console.log("this is the new event",r),-Math.floor(1e8*Math.random())));let w=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),w}{let w=this.ReservedConnectionId[0];return this.ReservedConnectionId.shift(),w}}return yield(0,L.xd)().then(()=>{let w=this.localConnectionId;for(let r=1;r<10;r++){let e=this.localConnectionId-r;this.ReservedConnectionId.push(e),w=e}this.AddConnectionId({id:1,value:w})}),this.getConnectionId()}catch{return-Math.floor(1e8*Math.random())}})}}u.ReservedLocalId=[],u.ReservedConnectionId=[]},628:(Q,E,y)=>{y.d(E,{H:()=>C});var N=y(9581),L=y(3278),n=y(949),u=y(1863),I=function(i,a,t,c){return new(t||(t=Promise))(function(T,m){function k(R){try{_(c.next(R))}catch(G){m(G)}}function b(R){try{_(c.throw(R))}catch(G){m(G)}}function _(R){var G;R.done?T(R.value):(G=R.value,G instanceof t?G:new t(function(W){W(G)})).then(k,b)}_((c=c.apply(i,a||[])).next())})};const w=(i,a,...t)=>I(void 0,[i,a,...t],void 0,function*(c,T,m=!0){let k={concepts:[],connections:[]};try{const b=new Headers;let _={concepts:c,connections:T};b.set("Content-Type","application/json"),b.set("Authorization","Bearer "+L.b.BearerAccessToken),b.set("Accept","application/json"),b.set("X-Session-Id",L.b.sessionId.toString()),b.set("Randomizer",N.B.getRandomizer().toString());const R=yield fetch(N.B.CreateGhostConceptApiUrl(m),{method:"POST",headers:b,body:JSON.stringify(_)});if(!R.ok)throw(0,u.ry)(R),new Error(`Error! status: ${R.status}`);const G=yield R.json();return k.concepts=G.concepts,k.connections=G.connections,k}catch(b){throw b instanceof Error?console.log("Create the concept api error message: ",b.message):console.log("Create the concept api unexpected error: ",b),b}});function r(i,a){const t=[];for(let c=0;c<i.length;c+=a){const T=i.slice(c,c+a);t.push(T)}return t}const e=(...i)=>I(void 0,[...i],void 0,function*(a=[]){return yield Promise.all(a.map(t=>{let c=JSON.parse(JSON.stringify(t));return delete c.type,delete c.ofConcept,delete c.toConcept,c}))});var o=y(9003),l=y(9736),f=y(4864),v=function(i,a,t,c){return new(t||(t=Promise))(function(T,m){function k(R){try{_(c.next(R))}catch(G){m(G)}}function b(R){try{_(c.throw(R))}catch(G){m(G)}}function _(R){var G;R.done?T(R.value):(G=R.value,G instanceof t?G:new t(function(W){W(G)})).then(k,b)}_((c=c.apply(i,a||[])).next())})};class C{static CheckContains(a){for(var t=!1,c=0;c<this.conceptsSyncArray.length;c++)this.conceptsSyncArray[c].id==a.id&&(t=!0);return t}static SyncDataDelete(a){for(var t=0;t<this.conceptsSyncArray.length;t++)a==this.conceptsSyncArray[t].id&&this.conceptsSyncArray.splice(t,1);for(t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].ofTheConceptId!=a&&this.connectionSyncArray[t].toTheConceptId!=a&&this.connectionSyncArray[t].typeId!=a||this.connectionSyncArray.splice(t,1)}static CheckContainsConnection(a){for(var t=!1,c=0;c<this.connectionSyncArray.length;c++)this.connectionSyncArray[c].id==a.id&&(t=!0);return t}static AddConcept(a){try{let t=!1;C.CheckIfTheConceptIdExists(a.id,this.conceptsSyncArray).id!=0&&(t=!0),t||this.conceptsSyncArray.push(a)}catch(t){throw t}}static RemoveConcept(a){for(var t=0;t<this.conceptsSyncArray.length;t++)this.conceptsSyncArray[t].id==a.id&&this.conceptsSyncArray.splice(t,1)}static SyncDataOnlineWithoutAuth(a,t){return v(this,arguments,void 0,function*(c,T,m=!1){return C.SyncDataOnline(c,T,m)})}static SyncDataOnline(a,t){return v(this,arguments,void 0,function*(c,T,m=!0){let k=performance.now();console.log("syncing...",c,T,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,m),setTimeout(()=>{console.log("syncing...",c,T,"aa: ",this.conceptsSyncArray,this.connectionSyncArray,!!n.serviceWorker,m)},5e3);try{if(n.serviceWorker)try{return console.log("syncing in the service worker",c,m),(yield(0,n.sendMessage)("LocalSyncData__SyncDataOnline",{transactionId:c,withAuth:m})).data}catch(P){console.error("LocalSyncData__SyncDataOnline sw error: ",P),(0,n.handleServiceWorkerException)(P)}console.log("syncing in the without service worker syncing",c,m);let b=[],_=[];if(c&&this.transactionCollections.some(P=>P.id==c)){const P=this.transactionCollections.find(M=>M.id==c);if(this.transactionCollections=this.transactionCollections.filter(M=>M.id!=c),this.transactionCollections=this.transactionCollections.filter(M=>new Date(M.createdDate).getTime()>new Date().getTime()-6048e5),!P)return;b=P.data.concepts.slice(),_=P.data.connections.slice()}else Array.isArray(T?.concepts)&&Array.isArray(T?.connections)?(console.log("this is the concepts and connections array",T?.concepts,T?.connections),b=T.concepts.slice(),_=T.connections.slice(),console.log("this is the concepts and connections array",b,_),this.conceptsSyncArray=this.conceptsSyncArray.filter(P=>{const M=T.concepts.some(j=>P.id==j.id||P.ghostId==j.ghostId);return M||console.warn(`Concept not found in sync array: ${P.id||P.ghostId}`),M}),this.connectionSyncArray=this.connectionSyncArray.filter(P=>{const M=T.connections.some(j=>P.id==j.id||P.ghostId==j.ghostId);return M||console.warn(`Connection not found in sync array: ${P.id||P.ghostId}`),M})):(console.warn("Syncing this way has been Depreceted in service worker."),console.info("Only if serive worker is not running"),b=this.conceptsSyncArray.slice()||[],_=this.connectionSyncArray.slice()||[],this.connectionSyncArray=[],this.conceptsSyncArray=[]);console.log("syncing... inside the syncer",m);let R=[];for(let P=0;P<b.length;P++)R.push(b[P]),yield l.v.UpdateConceptSyncStatus(b[P].id);console.log("syncing... inside the syncer 2",m,b),yield this.UpdateConceptListToIncludeRelatedConcepts(_,R);let G=yield function(P,M){return I(this,arguments,void 0,function*(j,z,ee=!0){const Z=n.Logger.logfunction("CreateTheGhostConceptApi",[j.length,z.length]);try{let $={concepts:[],connections:[]};const ie=yield e(j),de=yield e(z);if(j.length+z.length<=2*1e3){const ae=yield w(ie,de,ee);return Array.isArray(ae?.concepts)&&($.concepts=[...$.concepts,...ae.concepts]),Array.isArray(ae?.connections)&&($.connections=[...$.connections,...ae.connections]),n.Logger.logUpdate(Z),$}const K=r(ie,1e3),X=r(de,1e3),te=[],Y=[];console.log("This is the with auth in syncing",ee);for(let ae=0;ae<K.length;ae++){const le=K[ae];te.push(w(le,[],ee))}const H=yield Promise.all(te);for(let ae=0;ae<H.length;ae++){const le=H[ae];Array.isArray(le?.concepts)&&($.concepts=[...$.concepts,...le.concepts]),Array.isArray(le?.connections)&&($.connections=[...$.connections,...le.connections])}for(let ae=0;ae<X.length;ae++){const le=X[ae];Y.push(w([],le,ee))}const re=yield Promise.all(Y);for(let ae=0;ae<re.length;ae++){const le=re[ae];Array.isArray(le?.concepts)&&($.concepts=[...$.concepts,...le.concepts]),Array.isArray(le?.connections)&&($.connections=[...$.connections,...le.connections])}return n.Logger.logUpdate(Z),$}catch(se){throw console.log(se),(0,u.ey)(Z,"CreateTheGhostConceptApi",se),se}})}(R,_,m);console.log("syncing... inside the syncer 3",m);let W=G.concepts,U=G.connections;for(let P=0;P<W.length;P++)l.v.AddPermanentConcept(W[P]);for(let P=0;P<U.length;P++)f.G.AddPermanentConnection(U[P]);return b}catch(b){throw n.Logger.logError(k,"unknown",void 0,"unknown",void 0,500,b,"SyncDataOnline",[],"unknown",void 0),b}})}static ConvertGhostIdsInConnections(a){var t,c,T;for(let m=0;m<a.length;m++){let k=a[m].ofTheConceptId,b=a[m].toTheConceptId,_=a[m].typeId,R=(t=C.ghostIdMap.get(k))!==null&&t!==void 0?t:k,G=(c=C.ghostIdMap.get(b))!==null&&c!==void 0?c:b,W=(T=C.ghostIdMap.get(_))!==null&&T!==void 0?T:_;a[m].ofTheConceptId=R,a[m].toTheConceptId=G,a[m].typeId=W}}static UpdateConceptListToIncludeRelatedConcepts(a,t){return v(this,void 0,void 0,function*(){for(let c=0;c<a.length;c++){let T=a[c].ofTheConceptId,m=a[c].toTheConceptId,k=a[c].typeId;if(T<0){let b=this.CheckIfTheConceptIdExists(T,t);b.id==0&&(b=yield l.v.GetConceptByGhostId(T),b.id!=0?b.id!=b.ghostId&&(a[c].ofTheConceptId=b.id):(b=yield l.v.GetConcept(T),this.AddConceptIfDoesNotExist(b,t)))}if(m<0){let b=this.CheckIfTheConceptIdExists(m,t);b.id==0&&(b=yield l.v.GetConceptByGhostId(m),b.id!=0?b.id!=b.ghostId&&(a[c].toTheConceptId=b.id):(b=yield l.v.GetConcept(m),this.AddConceptIfDoesNotExist(b,t)))}if(k<0){let b=this.CheckIfTheConceptIdExists(k,t);b.id==0&&(b=yield l.v.GetConceptByGhostId(k),b.id!=0?b.id!=b.ghostId&&(a[c].typeId=b.id):(b=yield l.v.GetConcept(k),this.AddConceptIfDoesNotExist(b,t)))}}})}static AddConceptIfDoesNotExist(a,t=[]){let c=!1;for(let T=0;T<t.length;T++)a.ghostId==t[T].ghostId&&(c=!0);c||t.push(a)}static CheckIfTheConceptIdExists(a,t=[]){let c=(0,n.CreateDefaultLConcept)();for(let T=0;T<t.length;T++)a!=t[T].ghostId&&a!=t[T].id||(c=t[T]);return c}static AddConnection(a){this.connectionSyncArray.push(a)}static RemoveConnection(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a.id&&this.connectionSyncArray.splice(t,1)}static RemoveConnectionById(a){for(var t=0;t<this.connectionSyncArray.length;t++)this.connectionSyncArray[t].id==a&&this.connectionSyncArray.splice(t,1)}static syncDataLocalDb(){return v(this,void 0,void 0,function*(){if(this.conceptsSyncArray.length>0){for(let a=0;a<this.conceptsSyncArray.length;a++)(0,o.kH)("localconcept",this.conceptsSyncArray[a]);this.conceptsSyncArray=[]}if(this.connectionSyncArray.length>0){for(let a=0;a<this.connectionSyncArray.length;a++)(0,o.kH)("localconnection",this.connectionSyncArray[a]);this.connectionSyncArray=[]}return"done"})}static initializeTransaction(a){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__initializeTransaction",{transactionId:a})).data}catch(t){console.error("LocalSyncData__initializeTransaction sw error: ",t),(0,n.handleServiceWorkerException)(t)}if(this.transactionCollections.some(t=>t.id==a))return;this.transactionCollections.push({id:a,data:{concepts:[],connections:[]},createdDate:new Date().toISOString()})}catch(t){console.log("error in initializeTransaction",t)}})}static markTransactionActions(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__markTransactionActions",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__markTransactionActions sw error: ",c),(0,n.handleServiceWorkerException)(c)}this.transactionCollections=this.transactionCollections.map(c=>c.id==a?Object.assign(Object.assign({},c),{data:JSON.parse(JSON.stringify(t))}):c),this.conceptsSyncArray=this.conceptsSyncArray.filter(c=>!t.concepts.some(T=>T.id==c.id||T.ghostId==c.id)),this.connectionSyncArray=this.connectionSyncArray.filter(c=>!t.connections.some(T=>T.id==c.id||T.ghostId==c.id))}catch(c){console.log("error in markTransactionActions",c)}})}static rollbackTransaction(a,t){return v(this,void 0,void 0,function*(){try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("LocalSyncData__rollbackTransaction",{transactionId:a,actions:t})).data}catch(c){console.error("LocalSyncData__rollbackTransaction sw error: ",c),(0,n.handleServiceWorkerException)(c)}if(this.transactionCollections.some(c=>c.id==a))return;this.transactionCollections=this.transactionCollections.filter(c=>c.id!=a)}catch(c){console.log("LocalSyncData, roll",c)}})}}C.conceptsSyncArray=[],C.connectionSyncArray=[],C.ghostIdMap=new Map,C.transactionCollections=[]},6731:(Q,E,y)=>{y.d(E,{b:()=>N});class N{constructor(n,u,I,w){this.variants=[],this.height=1,this.key=n,this.value=u,this.leftNode=I,this.rightNode=w,this.currentNode=null}addCurrentNode(n,u){return u==null?u=n:(n.value.typeId!=u.value.typeId&&(u.currentNode=this.addCurrentNode(n,u.currentNode)),u)}addCurrentNodeType(n,u){if(u==null)return n;let I=!1;for(let w=0;w<u.variants.length;w++)u.variants[w].value.id==n.value.id&&(I=!0);return I||u.variants.push(n),u}addNode(n,u,I){if(u==null)return n;let w=u.leftNode,r=u.rightNode;if(u.key>n.key)u.leftNode=this.addNode(n,w,I);else{if(!(u.key<n.key))return u;u.rightNode=this.addNode(n,r,I)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}return u}checkIfIdsInNode(n,u,I,w){if(n){if(u.includes(n.key)){I.push(n.value);let r=u.indexOf(n.key);u.splice(r,1)}n.leftNode&&this.checkIfIdsInNode(n.leftNode,u,I,w),n.rightNode&&this.checkIfIdsInNode(n.rightNode,u,I,w)}}addCharacterNode(n,u,I){if(n.value.characterValue!=""){if(u==null)return n;let w=u.leftNode,r=u.rightNode;if(u.key>n.key)u.leftNode=this.addCharacterNode(n,w,I);else{if(!(u.key<n.key))return u.key==n.key&&u.key!=""&&u.value.id!=n.value.id&&u.addCurrentNodeType(n,u),u;u.rightNode=this.addCharacterNode(n,r,I)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}}return u}addTypeNode(n,u,I){if(n.value.typeId!=0){if(u==null)return console.log("adding the type node to the tree",n),n;let w=u.leftNode,r=u.rightNode;if(u.key>n.key)u.leftNode=this.addTypeNode(n,w,I);else{if(!(u.key<n.key))return console.log("adding the type node to the tree down",n),u.key==n.key&&u.key!=0&&u.value.id!=n.value.id&&u.addCurrentNodeType(n,u),console.log("adding the type node to the tree last",u),u;u.rightNode=this.addTypeNode(n,r,I)}u.height=1+Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode));let e=this.getBalanceFactor(u);if(e>1&&u.leftNode){if(n.key<u.leftNode.key)return this.rightRotate(u);if(n.key>u.leftNode.key)return u.leftNode=this.leftRotate(u.leftNode),this.rightRotate(u)}if(e<-1&&u.rightNode){if(n.key>u.rightNode.key)return this.leftRotate(u);if(n.key<u.rightNode.key)return u.rightNode=this.rightRotate(u.rightNode),this.leftRotate(u)}}return u}rightRotate(n){if(n){let u=n.leftNode;if(u){let I=u.rightNode;return n.leftNode=I,u.rightNode=n,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(u.rightNode))+1,u}}return n}leftRotate(n){if(n){let u=n.rightNode;if(u){let I=u.leftNode;return u.leftNode=n,n.rightNode=I,n.height=Math.max(this.getHeight(n.leftNode),this.getHeight(n.rightNode))+1,u.height=Math.max(this.getHeight(u.leftNode),this.getHeight(n.rightNode))+1,u}}return n}getHeight(n){return n?n.height:0}getBalanceFactor(n){return n==null?0:this.getHeight(n.leftNode)-this.getHeight(n.rightNode)}getFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getFromNode(n,u.leftNode):n>u.key?this.getFromNode(n,u.rightNode):u)}getCharacterFromNode(n,u){return u&&(n==u.key?u:n<u.key?this.getCharacterFromNode(n,u.leftNode):n>u.key?this.getCharacterFromNode(n,u.rightNode):u)}getCharacterFromNodeUpdated(n,u){var I;return u&&(n==u.key||((I=u.value)===null||I===void 0?void 0:I.typeId)==51?u:n<u.key?this.getCharacterFromNode(n,u.leftNode):n>u.key?this.getCharacterFromNode(n,u.rightNode):u)}getFromNodeWithCharacterAndType(n,u,I){if(n=`${n}`,I){if(n==I.key){if(n==I.value.characterValue&&u==I.value.typeId)return I;for(let w=0;w<I.variants.length;w++)if(I.variants[w].value.typeId==u)return I.variants[w]}else{if(n<I.key)return this.getFromNodeWithCharacterAndType(n,u,I.leftNode);if(n>I.key)return this.getFromNodeWithCharacterAndType(n,u,I.rightNode)}return null}return I}getFromNodeWithCharacterAndCategory(n,u,I){if(n=`${n}`,I){if(n==I.key){if(n==I.value.characterValue&&u==I.value.categoryId)return I;for(let w=0;w<I.variants.length;w++)if(I.variants[w].value.categoryId==u)return I.variants[w]}else{if(n<I.key)return this.getFromNodeWithCharacterAndCategory(n,u,I.leftNode);if(n>I.key)return this.getFromNodeWithCharacterAndCategory(n,u,I.rightNode)}return null}return I}removeNode(n,u){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNode(n.leftNode,u),n;if(n.key<u)return n.rightNode=this.removeNode(n.rightNode,u),n;if(n.leftNode==null){let I=n.rightNode;return n=null,I}if(n.rightNode==null){let I=n.leftNode;return n=null,I}{let I=this.inOrderSuccessor(n.rightNode);return n.value=I.value,n.key=I.key,n.variants=I.variants,n.currentNode=I.currentNode,n.rightNode=this.removeNode(n.rightNode,I.key),n}}removeNodeWithVariants(n,u,I){if(n==null)return n;if(n.key>u)return n.leftNode=this.removeNodeWithVariants(n.leftNode,u,I),n;if(n.key<u)return n.rightNode=this.removeNodeWithVariants(n.rightNode,u,I),n;if(n.variants.length>0){if(n.value.id==I){let w=n.variants[0];if(w)return n.value=w.value,n.key=w.key,n.currentNode=w.currentNode,n.variants.splice(0,1),n}else for(let w=0;w<n.variants.length;w++)if(I==n.variants[w].value.id)return n.variants.splice(w,1),n}if(n.leftNode==null){let w=n.rightNode;return n=null,w}if(n.rightNode==null){let w=n.leftNode;return n=null,w}{let w=this.inOrderSuccessor(n.rightNode);return n.value=w.value,n.key=w.key,n.variants=w.variants,n.currentNode=w.currentNode,n.rightNode=this.removeNodeWithVariants(n.rightNode,w.key,I),n}}countNodeBelow(n){return n==null?0:1+this.countNodeBelow(n.leftNode)+this.countNodeBelow(n.rightNode)}inOrderSuccessor(n){for(;n.leftNode!=null;)n=n.leftNode;return n}}},5976:(Q,E,y)=>{y.d(E,{p:()=>r,B:()=>w});var N=y(9581),L=y(3518),n=y(1863),u=y(949),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,C){function i(c){try{t(f.next(c))}catch(T){C(T)}}function a(c){try{t(f.throw(c))}catch(T){C(T)}}function t(c){var T;c.done?v(c.value):(T=c.value,T instanceof l?T:new l(function(m){m(T)})).then(i,a)}t((f=f.apply(e,[])).next())})};class w{static getId(){return I(this,void 0,void 0,function*(){this.ids.length<5&&(yield function(){var l,f,v,C,i=arguments;return l=this,f=void 0,C=function*(){const a=u.Logger.logfunction("GetReservedIds",i);try{let t=(0,L.Xr)("application/x-www-form-urlencoded");const c=yield fetch(N.B.GetReservedIdUrl(),{method:"GET",headers:t});if(!c.ok)throw(0,n.ry)(c),new Error(`Error! status: ${c.status}`);const T=yield c.json();for(let m=0;m<T.length;m++)w.AddId(T[m]);u.Logger.logUpdate(a)}catch(t){t instanceof Error?console.log("get reserved ids error message: ",t.message):console.log("get reserved ids  unexpected error: ",t),(0,n.Mb)(t,N.B.GetReservedIdUrl()),(0,n.ey)(a,"GetReservedIds",t)}},new((v=void 0)||(v=Promise))(function(a,t){function c(k){try{m(C.next(k))}catch(b){t(b)}}function T(k){try{m(C.throw(k))}catch(b){t(b)}}function m(k){var b;k.done?a(k.value):(b=k.value,b instanceof v?b:new v(function(_){_(b)})).then(c,T)}m((C=C.apply(l,f||[])).next())})}());var o=this.ids[0];return this.ids.shift(),o})}static AddId(o){this.ids.includes(o)||this.ids.push(o)}}w.ids=[];class r{static getId(){return I(this,void 0,void 0,function*(){this.connectionIds.length<5&&(yield function(){var l,f,v,C,i=arguments;return l=this,f=void 0,C=function*(){const a=u.Logger.logfunction("GetReservedConnectionIds",i);try{let t=(0,L.Xr)("application/x-www-form-urlencoded");const c=yield fetch(N.B.GetReservedConnectionIdUrl(),{method:"GET",headers:t});if(!c.ok)throw(0,n.ry)(c),new Error(`Error! status: ${c.status}`);const T=yield c.json();for(let m=0;m<T.length;m++)r.AddId(T[m]);u.Logger.logUpdate(a)}catch(t){t instanceof Error?console.log("get reserved connection ids error message: ",t.message):console.log("get reserved connection ids  unexpected error: ",t),(0,n.Mb)(t,N.B.GetReservedConnectionIdUrl()),(0,n.ey)(a,"GetReservedConnectionIds",t)}},new((v=void 0)||(v=Promise))(function(a,t){function c(k){try{m(C.next(k))}catch(b){t(b)}}function T(k){try{m(C.throw(k))}catch(b){t(b)}}function m(k){var b;k.done?a(k.value):(b=k.value,b instanceof v?b:new v(function(_){_(b)})).then(c,T)}m((C=C.apply(l,f||[])).next())})}());var o=this.connectionIds[0];return this.connectionIds.shift(),o})}static AddId(o){this.connectionIds.includes(o)||this.connectionIds.push(o)}}r.connectionIds=[]},7273:(Q,E,y)=>{y.d(E,{z:()=>L});var N=y(9581);class L{constructor(u,I,w,r){this.url=N.B.BASE_URL,this.message=u,this.ok=I,this.status=w,this.data=r}getMessage(){return this.message}setMessage(u){return this.message=u,this}getStatus(){return this.status}setStatus(u){return this.status=u,this}getData(){return this.data}setData(u){return this.data=u,this}getOk(){return this.ok}setOk(u){return this.ok=u,this}getUrl(){return this.url}setUrl(u){return this.url=u,this}}},3278:(Q,E,y)=>{y.d(E,{b:()=>N});class N{static setSession(n){n&&(N.sessionId=n)}}N.BearerAccessToken="",N.sessionId=998},2299:(Q,E,y)=>{y.d(E,{B:()=>N});class N{constructor(n){this.id=1,this.isOnlineSync=!1,this.isOnlineSync=n}}},442:(Q,E,y)=>{y.d(E,{Y:()=>o});var N=y(1167),L=y(2155),n=y(9581),u=y(3518),I=y(1863),w=y(3026),r=y(8286),e=y(949);class o{static CheckContains(f){for(var v=!1,C=0;C<this.conceptsSyncArray.length;C++)this.conceptsSyncArray[C].id==f.id&&(v=!0);return v}static SyncDataDelete(f){for(var v=0;v<this.conceptsSyncArray.length;v++)f==this.conceptsSyncArray[v].id&&this.conceptsSyncArray.splice(v,1);for(v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].ofTheConceptId!=f&&this.connectionSyncArray[v].toTheConceptId!=f&&this.connectionSyncArray[v].typeId!=f||this.connectionSyncArray.splice(v,1)}static CheckContainsConnection(f){for(var v=!1,C=0;C<this.connectionSyncArray.length;C++)this.connectionSyncArray[C].id==f.id&&(v=!0);return v}static AddConcept(f){this.conceptsSyncArray.push(f)}static RemoveConcept(f){for(var v=0;v<this.conceptsSyncArray.length;v++)this.conceptsSyncArray[v].id==f.id&&this.conceptsSyncArray.splice(v,1)}static AddConnection(f){this.connectionSyncArray.push(f)}static RemoveConnection(f){for(var v=0;v<this.connectionSyncArray.length;v++)this.connectionSyncArray[v].id==f.id&&this.connectionSyncArray.splice(v,1)}static SyncDataOnline(){return f=this,v=void 0,i=function*(){if(e.serviceWorker)try{return(yield(0,e.sendMessage)("SyncData__SyncDataOnline",{})).data}catch(a){console.error("SyncData__SyncDataOnline sw error: ",a),(0,e.handleServiceWorkerException)(a)}for(let a=0;a<this.conceptsSyncArray.length;a++)w.I.AddConcept(this.conceptsSyncArray[a]);for(let a=0;a<this.connectionSyncArray.length;a++)r.d.AddConnection(this.connectionSyncArray[a]);if(this.conceptsSyncArray.length>0){let a=this.conceptsSyncArray.slice();this.conceptsSyncArray=[],(0,N.Y)(a)}if(this.connectionSyncArray.length>0){let a=this.connectionSyncArray.slice();this.connectionSyncArray=[],yield function(t){return c=this,T=void 0,k=function*(){let b=new L.N(0,0,0,0,0,0,0);try{var _=(0,u.Xr)(),R=JSON.stringify(t);const G=yield fetch(n.B.CreateTheConnectionUrl(),{method:"POST",headers:_,body:R});return G.ok?yield G.json():(console.log("Create the connection error message: ",G.status),(0,I.ry)(G)),b}catch(G){throw G instanceof Error?console.log("Create the connection error message: ",G.message):console.log(" Create the connection unexpected error: ",G),G}},new((m=void 0)||(m=Promise))(function(b,_){function R(U){try{W(k.next(U))}catch(P){_(P)}}function G(U){try{W(k.throw(U))}catch(P){_(P)}}function W(U){var P;U.done?b(U.value):(P=U.value,P instanceof m?P:new m(function(M){M(P)})).then(R,G)}W((k=k.apply(c,T||[])).next())});var c,T,m,k}(a)}return"done"},new((C=void 0)||(C=Promise))(function(a,t){function c(k){try{m(i.next(k))}catch(b){t(b)}}function T(k){try{m(i.throw(k))}catch(b){t(b)}}function m(k){var b;k.done?a(k.value):(b=k.value,b instanceof C?b:new C(function(_){_(b)})).then(c,T)}m((i=i.apply(f,v||[])).next())});var f,v,C,i}}o.conceptsSyncArray=[],o.connectionSyncArray=[]},9003:(Q,E,y)=>{y.d(E,{S5:()=>r,kH:()=>o,qI:()=>w});var N=y(1863),L=y(949),n=function(l,f,v,C){return new(v||(v=Promise))(function(i,a){function t(m){try{T(C.next(m))}catch(k){a(k)}}function c(m){try{T(C.throw(m))}catch(k){a(k)}}function T(m){var k;m.done?i(m.value):(k=m.value,k instanceof v?k:new v(function(b){b(k)})).then(t,c)}T((C=C.apply(l,[])).next())})};let u=10;class I{}function w(l){const f=L.Logger.logfunction("openDatabase",arguments);return new Promise(function(v,C){I.db&&(L.Logger.logUpdate(f),v(I.db));let i=L.BaseUrl.BASE_URL+"_FreeSchemaLocal"+L.BaseUrl.BASE_APPLICATION;const a=indexedDB.open(i,u);a.onupgradeneeded=t=>{var c=t.target.result,T="localconcept",m="localconnection",k="localid";console.log("this is the version upgrade",u),c.objectStoreNames.contains(T)&&c.deleteObjectStore(T),c.objectStoreNames.contains(m)&&c.deleteObjectStore(m),c.objectStoreNames.contains(k)&&c.deleteObjectStore(k),c.objectStoreNames.contains(T)||(c.createObjectStore(T,{keyPath:"id"}).transaction.oncomplete=b=>{}),c.objectStoreNames.contains(m)||(c.createObjectStore(m,{keyPath:"id"}).transaction.oncomplete=b=>{}),c.objectStoreNames.contains(k)||(c.createObjectStore(k,{keyPath:"id"}).transaction.oncomplete=b=>{e(k,{id:0,value:-100}),e(k,{id:1,value:-200}),e(k,{id:3,value:L.BaseUrl.getRandomizer()})}),v(c)},a.onerror=t=>{console.error("Why didn't you allow my web app to use IndexedDB?!",t),indexedDB.deleteDatabase(i),w(l),(0,N.ey)(f,"openDatabase",t),C(t)},a.onsuccess=function(t){var c=t.target;I.db=c.result,L.Logger.logUpdate(f),v(I.db)}})}function r(l){var f=arguments;return n(this,void 0,void 0,function*(){const v=L.Logger.logfunction("getObjectsFromLocalIndexDb",f);return new Promise(function(C,i){w(l).then(a=>{var t=[],c=a.transaction(l,"readwrite").objectStore(l).getAll();c.onsuccess=()=>{const T=c.result;for(var m=0;m<T.length;m++)t.push(T[m]);L.Logger.logUpdate(v),C(t)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot get objects from database because you cannot open the Local database",data:a};(0,N.ey)(v,"getObjectsFromLocalIndexDb",t),i(t)})})})}function e(l,f){const v=L.Logger.logfunction("storeToDatabase",[l,"localindexdb"]);return new Promise(function(C,i){w(l).then(a=>{const t=a.transaction(l,"readwrite").objectStore(l).add(f);t.onsuccess=c=>{L.Logger.logUpdate(v),C(f)},t.onerror=c=>{let T={status:400,ok:!1,message:"Cannot store to the Local database "+l,data:c,body:f};(0,N.ey)(v,"storeToDatabase",T),i(T)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot store to database because you cannot open the Local database",data:a};(0,N.ey)(v,"storeToDatabase",t),i(t)})})}function o(l,f){const v=L.Logger.logfunction("UpdateToDatabase",arguments);return new Promise(function(C,i){w(l).then(a=>{const t=a.transaction(l,"readwrite").objectStore(l).put(f);t.onsuccess=c=>{L.Logger.logUpdate(v),C(f)},t.onerror=c=>{let T={status:400,ok:!1,message:"Cannot Update to the Local database"+l,data:c,body:f};(0,N.ey)(v,"UpdateToDatabase",T),i(T)}}).catch(a=>{let t={status:400,ok:!1,message:"Cannot update to database because you cannot open the Local database",data:a};(0,N.ey)(v,"UpdateToDatabase",t),i(t)})})}},3655:(Q,E,y)=>{y.d(E,{El:()=>l,b8:()=>o,kH:()=>e,qI:()=>r,wh:()=>f});var N=y(2299),L=y(9581),n=y(949),u=y(1863);let I=10;class w{}function r(v){const C=n.Logger.logfunction("openDatabase",[v,"indexdb"]);return new Promise(function(i,a){w.db&&(n.Logger.logUpdate(C),i(w.db));let t=L.B.BASE_URL+"_FreeSchema"+L.B.BASE_APPLICATION;const c=indexedDB.open(t,I);console.log("this is the update version",I,c),c.onupgradeneeded=T=>{let m=T.target.result,k="concept",b="connection",_="settings";console.log("this is the version update for index",I),m.objectStoreNames.contains(k)&&m.deleteObjectStore(k),m.objectStoreNames.contains(b)&&m.deleteObjectStore(b),m.objectStoreNames.contains(_)&&m.deleteObjectStore(_),m.objectStoreNames.contains(k)||(m.createObjectStore(k,{keyPath:"id"}).transaction.oncomplete=R=>{}),m.objectStoreNames.contains(b)||(m.createObjectStore(b,{keyPath:"id"}).transaction.oncomplete=R=>{}),m.objectStoreNames.contains(_)||(m.createObjectStore(_,{keyPath:"id"}).transaction.oncomplete=R=>{}),n.Logger.logUpdate(C),i(m)},c.onerror=T=>{console.error("Why didn't you allow my web app to use IndexedDB?!",T),indexedDB.deleteDatabase(t),r(v),(0,u.ey)(C,"openDatabase",T),a(T)},c.onsuccess=function(T){let m=T.target;w.db=m.result,n.Logger.logUpdate(C),i(w.db)}})}function e(v,C){const i=n.Logger.logfunction("UpdateToDatabase",[v,"indexdb"]);return new Promise(function(a,t){r(v).then(c=>{const T=c.transaction(v,"readwrite").objectStore(v).put(C);T.onsuccess=m=>{n.Logger.logUpdate(i),a(C)},T.onerror=m=>{let k={status:400,ok:!1,message:"Cannot Update to the database"+v,data:m,body:C};(0,u.ey)(i,"UpdateToDatabase",k),t(k)}}).catch(c=>{let T={status:400,ok:!1,message:"Cannot update to database because you cannot open the database",data:c};(0,u.ey)(i,"UpdateToDatabase",T),t(T)})})}function o(){const v=n.Logger.logfunction("GetLastSettingsFromDatabase",["indexdb"]);return new Promise(function(C,i){let a="settings";r(a).then(t=>{let c=t.transaction(a,"readwrite").objectStore(a).getAll();c.onsuccess=()=>{let T=new N.B(!1),m=c.result;for(let k=0;k<m.length;k++)T=m[k];n.Logger.logUpdate(v),C(T)},c.onerror=T=>{(0,u.ey)(v,"GetLastSettingsFromDatabase",T),i(T)}}).catch(t=>{let c={status:400,ok:!1,message:"Cannot get last object from database because you cannot open the database",data:t};(0,u.ey)(v,"GetLastSettingsFromDatabase",c),i(c)})})}function l(v){const C=n.Logger.logfunction("AiUpdateFlag",["indexdb"]);return new Promise(function(i,a){let t="settings";r(t).then(c=>{const T=c.transaction(t,"readwrite").objectStore(t).put(v);T.onsuccess=m=>{n.Logger.logUpdate(C),i(v)},T.onerror=m=>{let k={status:400,ok:!1,message:"Cannot update AI flag",data:m,body:v};(0,u.ey)(C,"AiUpdateFlag",k),a(k)}}).catch(c=>{let T={status:400,ok:!1,message:"Cannot update AI flag because you cannot open the database",data:c};(0,u.ey)(C,"AiUpdateFlag",T),a(T)})})}function f(v,C){const i=n.Logger.logfunction("removeFromDatabase",[v,"indexdb"]);return new Promise(function(a,t){r(v).then(c=>{const T=c.transaction(v,"readwrite").objectStore(v).delete(Number(C));T.onsuccess=function(m){n.Logger.logUpdate(i),a(C)},T.onerror=m=>{let k={status:400,ok:!1,message:"Cannot remove from the database"+v,data:m};(0,u.ey)(i,"removeFromDatabase",k),t(k)}}).catch(c=>{let T={status:400,ok:!1,message:"Cannot remove from the database because you cannot open the database",data:c,body:C};(0,u.ey)(i,"removeFromDatabase",T),t(T)})})}},4485:(Q,E,y)=>{function N(I=[],w){var r,e;let o=[],l=(r=w.type)===null||r===void 0?void 0:r.characterValue;if(l?.startsWith("the_")||(l="the_"+l),Array.isArray(I))for(let f=0;f<I.length;f++){let v=(e=I[f].type)===null||e===void 0?void 0:e.characterValue;v?.startsWith("the_")||(v="the_"+v),w.typeId!=I[f].typeId&&l!=v||o.push(I[f])}return o}function L(I=[],w){let r=[],e=w.typeCharacter;if(e?.startsWith("the_")||(e="the_"+e),Array.isArray(I))for(let o=0;o<I.length;o++){let l=I[o].typeCharacter;l?.startsWith("the_")||(l="the_"+l),w.typeId!=I[o].typeId&&e!=l||r.push(I[o])}return r}function n(I=[],w){let r=[];if(Array.isArray(I)){const e=I.find(l=>l.toTheConceptId==w);e&&r.push(e);const o=I.find(l=>l.ofTheConceptId==w);o&&r.push(o)}return r}function u(I=[],w){let r=[];if(Array.isArray(I)){const e=I.find(l=>l.toTheConceptId==w);e&&r.push(e);const o=I.find(l=>l.ofTheConceptId==w);o&&r.push(o)}return r}y.d(E,{gt:()=>u,nm:()=>L,vo:()=>N,wS:()=>n}),y(2155),y(7282)},9934:(Q,E,y)=>{function N(L,n){return L.indexOf(n)===-1&&L.push(n),L}y.d(E,{A:()=>N})},9700:(Q,E,y)=>{y.d(E,{V:()=>r});var N,L=y(949),n=y(3278),u=y(1863),I=y(3518),w=function(e,o,l,f){return new(l||(l=Promise))(function(v,C){function i(c){try{t(f.next(c))}catch(T){C(T)}}function a(c){try{t(f.throw(c))}catch(T){C(T)}}function t(c){var T;c.done?v(c.value):(T=c.value,T instanceof l?T:new l(function(m){m(T)})).then(i,a)}t((f=f.apply(e,[])).next())})};class r{static startAutoSync(){this.autoSyncInterval?console.warn("Auto-sync is already running."):(this.nextSyncTime=Date.now()+this.SYNC_INTERVAL_MS,setInterval(()=>{const o=Date.now();this.nextSyncTime&&o>=this.nextSyncTime&&(this.nextSyncTime=o+this.SYNC_INTERVAL_MS,this.sendPackageLogsToServer(),this.sendApplicationLogsToServer())},3e4))}static stopAutoSync(){this.autoSyncInterval!==null&&(clearInterval(this.autoSyncInterval),this.autoSyncInterval=null,this.nextSyncTime=null)}static setLogLevel(o){this.logLevel=o}static shouldLog(o){return this.LOG_LEVELS.indexOf(o)>=this.LOG_LEVELS.indexOf(this.logLevel)}static formatLogData(o,l,f){const v=Object.assign({timestamp:new Date().toISOString(),level:o,message:l},f);return this.packageLogsData.push(v),o=="ERROR"&&(this.sendPackageLogsToServer(),this.sendApplicationLogsToServer()),v}static log(o,l,f){if(this.logPackageActivationStatus)try{this.formatLogData(o,l,f||null)}catch(v){console.error("Error on Logger Log : ",v)}}static logUpdate(o){var l;try{if(!this.logPackageActivationStatus)return{};if(!o)return{};const f=Date.now();o.startTime=(l=o.startTime)!==null&&l!==void 0?l:f;const v=f-o.startTime;o.responseTime=`${v} ms`,!o.serviceWorker==1&&(o.serviceWorker=!1)}catch(f){(0,u.ey)(o,"Logger.logUpdate",f)}}static logfunction(o,...l){if(!this.logPackageActivationStatus)return{};const f=Date.now();let v=l;const C=L.BaseUrl.getRandomizer(),i=n.b.sessionId;let a={startTime:f,functionName:o,functionParameters:v,requestFrom:L.BaseUrl.BASE_APPLICATION,sessionId:i,applicationId:C};return this.formatLogData("INFO","function called",a)}static logError(o,l,f,v,C,i,a,t,c,T,m){try{const k=n.b.sessionId,b={startTime:o,userId:l,operationType:f,requestFrom:v,requestIP:C,responseStatus:i,responseTime:`${(performance.now()-o).toFixed(3)}ms`,responseSize:a?`${JSON.stringify(a).length}`:"0",sessionId:k?.toString(),functionName:t,functionParameters:c,userAgent:T,conceptsUsed:m};this.formatLogData("ERROR",`Information logged for ${t}`,b)}catch{console.error("Error on logError")}}static logApplication(o,l,f){if(this.logApplicationActivationStatus)try{const v={timestamp:new Date().toISOString(),level:o,message:l,data:f||null};this.applicationLogsData.push(v)}catch(v){console.error("Failed to log application activity:",v)}}static sendApplicationLogsToServer(){return w(this,void 0,void 0,function*(){const o=this.applicationLogsData;try{if(o.length===0)return;this.applicationLogsData=[],n.b.BearerAccessToken;const l=50;let f=(0,I.Xr)(),v=0;for(;o.length!=0;){const C=o.slice(0,l),i=yield fetch(L.BaseUrl.PostLogger(),{method:"POST",headers:f,body:JSON.stringify({logType:this.appLogs,logData:C})});i.ok||(yield i.text()),o.splice(0,l),v+=l,v++}}catch{}})}static sendPackageLogsToServer(){return w(this,void 0,void 0,function*(){const o=this.packageLogsData;try{if(o.length===0)return;this.packageLogsData=[];const l=300;let f=0;for(;o.length!=0;){const v=o.slice(0,l);let C=(0,I.Xr)();const i=yield fetch(L.BaseUrl.PostLogger(),{method:"POST",headers:C,body:JSON.stringify({logType:this.mftsccsBrowser,logData:v})});if(!i.ok)return void(yield i.text());o.splice(0,l),f++}}catch{}})}static saveLogToLocalStorage(o,l){try{if(typeof localStorage===void 0)return void console.warn("Local Storage type undefined");{const f=JSON.parse((localStorage==null?void 0:localStorage.getItem(o))||"[]");f.push(l),localStorage?.setItem(o,JSON.stringify(f))}}catch{console.error("Error on saving log in localstorage"),this.log("ERROR","Error while saving log in local storage")}}static clearLogsFromLocalStorage(o){typeof localStorage!==void 0?localStorage?.removeItem(o):console.warn("localStorage is not available")}}N=r,r.logLevel="INFO",r.packageLogsData=[],r.applicationLogsData=[],r.LOG_LEVELS=["DEBUG","INFO","WARNING","ERROR"],r.SYNC_INTERVAL_MS=6e4,r.nextSyncTime=null,r.appLogs="app",r.mftsccsBrowser="mftsccs",r.logApplicationActivationStatus=!1,r.logPackageActivationStatus=!1,r.autoSyncInterval=null,N.startAutoSync()},1412:(Q,E,y)=>{function N(L=[],n=[]){}y.d(E,{e:()=>N})},4698:(Q,E,y)=>{y.d(E,{V:()=>w,w:()=>I});var N=y(7139),L=y(949),n=y(276),u=function(e,o,l,f){return new(l||(l=Promise))(function(v,C){function i(c){try{t(f.next(c))}catch(T){C(T)}}function a(c){try{t(f.throw(c))}catch(T){C(T)}}function t(c){var T;c.done?v(c.value):(T=c.value,T instanceof l?T:new l(function(m){m(T)})).then(i,a)}t((f=f.apply(e,[])).next())})};function I(e=[]){let o=[];if(e.length>0)for(let l=0;l<e.length;l++){let f=r(e[l]);o.push(f)}return o}function w(e){var o=arguments;return u(this,void 0,void 0,function*(){const l=L.Logger.logfunction("GetConnectionTypeForCount",o);let f={};for(let v=0;v<e.length;v++){let C=yield(0,N.r)(e[v].connectionTypeId);e[v].connectionType=C.characterValue,f[e[v].conceptId]=e[v]}return L.Logger.logUpdate(l),f})}function r(e){const o=e.split("_");if(o.length===3){let l=new n.y;return l.conceptId=Number(o[0]),l.connectionTypeId=Number(o[1]),l.count=Number(o[2]),l}throw new Error("Input string must contain exactly three parts separated by underscores.")}},1863:(Q,E,y)=>{y.d(E,{ER:()=>u,Mb:()=>I,ey:()=>w,ry:()=>n});var N=y(949),L=y(7273);function n(r){if(N.Logger.log("ERROR",r.statusText,{code:r.status,data:r.statusText}),r.status==401||r.status==406){let e=new L.z(r.statusText,!1,r.status,"");throw e.setUrl(r.url),e}if(r.status==500){let e=new L.z(r.statusText,!1,r.status,"");throw e.setUrl(r.url),e}}function u(r,e={}){if(N.Logger.log("ERROR",e.statusText,{code:r.status,data:r.status}),r.status==401||r.status==406){let o=new L.z(e.statusText,!1,r.status,"");throw o.setUrl(r.url),o}if(r.status==500){let o=new L.z(e.statusText,!1,r.status,"");throw o.setUrl(r.url),o}}function I(r,e=""){if(N.Logger.log("ERROR",r.message,{code:r.status,data:r.stack}),r.status){let o=new L.z(r.message,!1,r.status,r.stack);throw o.setUrl(e),o}{let o=new L.z(r.message,!1,500,r.stack);throw o.setUrl(e),o}}function w(r,e,o){var l;try{if(!r)return void console.error(`Error in ${e}: logData is undefined`);const f=Date.now();r.startTime=(l=r.startTime)!==null&&l!==void 0?l:f,r.responseTime=f-r.startTime+" ms",r.level="ERROR",r.errorMessage=o?.message||"Unknown error occurred",console.error(`Error in function ${e}:`,o)}catch(f){console.error("Failed to handle package function error:",f)}}},1708:(Q,E,y)=>{y.d(E,{Az:()=>l});var N=y(8146),L=y(3026),n=y(9581),u=y(3518),I=y(949),w=y(1863),r=y(7876),e=function(f,v,C,i){return new(C||(C=Promise))(function(a,t){function c(k){try{m(i.next(k))}catch(b){t(b)}}function T(k){try{m(i.throw(k))}catch(b){t(b)}}function m(k){var b;k.done?a(k.value):(b=k.value,b instanceof C?b:new C(function(_){_(b)})).then(c,T)}m((i=i.apply(f,[])).next())})},o=function(f,v,C,i){return new(C||(C=Promise))(function(a,t){function c(k){try{m(i.next(k))}catch(b){t(b)}}function T(k){try{m(i.throw(k))}catch(b){t(b)}}function m(k){var b;k.done?a(k.value):(b=k.value,b instanceof C?b:new C(function(_){_(b)})).then(c,T)}m((i=i.apply(f,[])).next())})};function l(f){return o(this,void 0,void 0,function*(){const v=I.Logger.logfunction("GetConceptByCharacterAndCategory",f);let C=(0,I.CreateDefaultConcept)();if(f=="the")return C.id=1,C.typeId=5,C.characterValue="the",C;let i=(0,I.SplitStrings)(f);if(i.length>1){let a=1,t=yield l(i[0]);t.id!=0&&(a=t.id),C=yield function(c,T){var m=arguments;return o(this,void 0,void 0,function*(){const k=I.Logger.logfunction("GetConceptByCharacterAndCategoryFromMemory",m);let b=yield I.ConceptsData.GetConceptByCharacterAndCategoryLocal(c,T);return b.id==0&&(b=yield function(_,R){var G=arguments;return e(this,void 0,void 0,function*(){const W=I.Logger.logfunction("GetConceptByCharacterAndCategoryDirectApi",G);let U=(0,I.CreateDefaultConcept)();try{var P=(0,u.Xr)("application/x-www-form-urlencoded");const M=yield fetch(n.B.GetConceptByCharacterAndCategoryDirectUrl(),{method:"POST",headers:P,body:`character_value=${_}&category_id=${R}`});M.ok?(U=yield M.json(),(0,r.K)(U).then(()=>{L.I.AddConcept(U)})):(console.log("This is the concept by category and character error",M.status),(0,w.ry)(M)),I.Logger.logUpdate(W)}catch(M){M instanceof Error?console.log(" This is the concept by category and character error message: ",M.message):console.log(" This is the concept by category and character unexpected error: ",M),(0,w.Mb)(M,n.B.GetConceptByCharacterAndCategoryDirectUrl()),(0,w.ey)(W,"GetConceptByCharacterAndCategoryDirectApi",M)}return U})}(c,T)),I.Logger.logUpdate(k),b})}(f,a)}else i[0]==f&&(C=yield function(a){var t=arguments;return o(this,void 0,void 0,function*(){const c=I.Logger.logfunction("GetConceptByCharacter",t);let T=yield I.ConceptsData.GetConceptByCharacterAndTypeLocal(a,51);return T.id==0&&(T=yield(0,N.Y)(a)),I.Logger.logUpdate(c),T})}(f));return I.Logger.logUpdate(v),C})}},176:(Q,E,y)=>{y.d(E,{F4:()=>u,P6:()=>w,dp:()=>I});var N=y(2155),L=y(7282),n=y(6416);function u(r){var e,o;const l=(0,n.u)();return l.id=r.id,l.ghostId=r.ghostId,l.userId=r.userId,l.accessId=r.accessId,l.categoryId=r.categoryId,l.characterValue=r.characterValue,l.entryTimeStamp=r.entryTimeStamp,l.typeId=r.typeId,l.type=r.type,l.isTemp=!1,l.typeCharacter=(o=(e=r?.type)===null||e===void 0?void 0:e.characterValue)!==null&&o!==void 0?o:"",l}function I(r){const e=(0,L.o)();return e.id=r.id,e.ghostId=r.ghostId,e.userId=r.userId,e.accessId=r.accessId,e.entryTimeStamp=r.entryTimeStamp,e.typeId=r.typeId,e.categoryId=r.categoryId,e}function w(r){const e=new N.N(0,0,0,0,0,0,0);return e.id=r.id,e.ghostId=r.ghostId,e.accessId=r.accessId,e.ofTheConceptId=r.ofTheConceptId,e.toTheConceptId=r.toTheConceptId,e.entryTimeStamp=r.entryTimeStamp,e.typeId=r.typeId,e.isTemp=!1,e}},5020:(Q,E,y)=>{y.d(E,{A:()=>I});var N=y(949),L=y(3026),n=y(205),u=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,[])).next())})};function I(){return u(this,void 0,void 0,function*(){try{let w=[];if(Array.isArray(w))for(let r=0;r<w.length;r++){let e=w[r];L.I.AddConceptToMemory(e)}n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0}catch(w){throw yield(0,N.DelayFunctionExecution)(2e3,I()),{message:"Cannot create Binary Tree Concept",ok:!1,status:400,data:w}}})}},7282:(Q,E,y)=>{y.d(E,{Y:()=>n,o:()=>L});var N=y(2615);function L(){let u=n(new Date),I=n(new Date);return new N.j(0,0,0,0,0,"0",0,!1,u,I,"0")}function n(u){const I=u.getMonth()+1,w=u.getDate(),r=u.getFullYear();let e=u.getHours();const o=u.getMinutes(),l=u.getSeconds(),f=e>=12?"PM":"AM";e%=12,e=e||12;const v=C=>C.toString().padStart(2,"0");return`${I}/${w}/${r} ${e}:${v(o)}:${v(l)} ${f}`}},1218:(Q,E,y)=>{y.d(E,{A:()=>w});var N=y(949),L=y(7282),n=y(1666),u=y(8407),I=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function C(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(T){T(c)})).then(C,i)}a((l=l.apply(r,e||[])).next())})};function w(r){return I(this,arguments,void 0,function*(e,o=null,l=null,f=null,v=null,C=null,i=null){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("CreateTheComposition",{json:e,ofTheConceptId:o,ofTheConceptUserId:l,mainKey:f,userId:v,accessId:C,sessionInformationId:i})).data}catch(k){console.error("CreateTheComposition sw error: ",k),(0,N.handleServiceWorkerException)(k)}let a=v??999,t=C??4,c=i??999,T=f??0,m=(0,L.o)();for(const k in e)if(typeof e[k]!="string"&&typeof e[k]!="number")if(o==null&&l==null){let b=T,_=yield(0,u.A)(k,"",!0,a,t,c);m=_,b=_.id,T=_.id,yield w(e[k],_.id,_.userId,b,v,C,i)}else{let b=o??999,_=l??999,R=T,G=yield(0,u.A)(k,"",!0,a,t,c);m=G,yield(0,n.q)(b,_,G.id,R),yield w(e[k],G.id,G.userId,R,v,C,i)}else{let b=o??999,_=l??10267,R=T,G=yield(0,u.A)(k,e[k].toString(),!1,a,t,c);yield(0,n.q)(b,_,G.id,R)}return m})}},2212:(Q,E,y)=>{y.d(E,{Ay:()=>r,N:()=>e});var N=y(1167),L=y(2615),n=y(5976),u=y(442),I=y(949),w=function(o,l,f,v){return new(f||(f=Promise))(function(C,i){function a(T){try{c(v.next(T))}catch(m){i(m)}}function t(T){try{c(v.throw(T))}catch(m){i(m)}}function c(T){var m;T.done?C(T.value):(m=T.value,m instanceof f?m:new f(function(k){k(m)})).then(a,t)}c((v=v.apply(o,[])).next())})};function r(o,l,f,v,C,i,a){return w(this,void 0,void 0,function*(){let t=yield n.B.getId(),c=new Date,T=new Date,m=new L.j(t,l,v,f,C,o,i,!0,c,T,a);return m.isTemp=!1,u.Y.AddConcept(m),m})}function e(o,l,f,v,C,i,a){return w(this,void 0,void 0,function*(){let t=yield n.B.getId(),c=new Date,T=new Date,m=new L.j(t,l,v,f,C,o,i,!1,c,T,a);return I.ConceptsData.AddConcept(m),(0,N.Y)([m]),m})}},1666:(Q,E,y)=>{y.d(E,{q:()=>u});var N=y(2155),L=y(442),n=y(1863);function u(I,w,r,e){var o=w,l=new N.N(0,I,r,o,e,1,4);if(I==r)return l.ofTheConceptId=0,l.toTheConceptId=1,l;try{l.isTemp=!0,l.id=Math.floor(1e8*Math.random()),L.Y.AddConnection(l)}catch(f){(0,n.Mb)(f)}return l}},4818:(Q,E,y)=>{y.d(E,{m:()=>l,E:()=>f});var N=y(949),L=y(1863),n=y(3518),u=function(v,C,i,a){return new(i||(i=Promise))(function(t,c){function T(b){try{k(a.next(b))}catch(_){c(_)}}function m(b){try{k(a.throw(b))}catch(_){c(_)}}function k(b){var _;b.done?t(b.value):(_=b.value,_ instanceof i?_:new i(function(R){R(_)})).then(T,m)}k((a=a.apply(v,[])).next())})},I=y(9581),w=function(v,C,i,a){return new(i||(i=Promise))(function(t,c){function T(b){try{k(a.next(b))}catch(_){c(_)}}function m(b){try{k(a.throw(b))}catch(_){c(_)}}function k(b){var _;b.done?t(b.value):(_=b.value,_ instanceof i?_:new i(function(R){R(_)})).then(T,m)}k((a=a.apply(v,[])).next())})},r=y(5239),e=y(4864),o=function(v,C,i,a){return new(i||(i=Promise))(function(t,c){function T(b){try{k(a.next(b))}catch(_){c(_)}}function m(b){try{k(a.throw(b))}catch(_){c(_)}}function k(b){var _;b.done?t(b.value):(_=b.value,_ instanceof i?_:new i(function(R){R(_)})).then(T,m)}k((a=a.apply(v,[])).next())})};function l(v){var C=arguments;return o(this,void 0,void 0,function*(){const i=N.Logger.logfunction("DeleteConnectionById",C);if(N.serviceWorker)try{return(yield(0,N.sendMessage)("DeleteConnectionById",{id:v})).data}catch(t){console.error("DeleteConnectionById sw error: ",t),(0,N.handleServiceWorkerException)(t)}let a=!0;return v>0?(a=yield function(t){var c=arguments;return w(this,void 0,void 0,function*(){const T=N.Logger.logfunction("DeleteTheConnection",c);let m=!1;try{const k=new FormData;k.append("id",t.toString());let b=(0,n.BZ)();const _=yield fetch(I.B.DeleteTheConnectionUrl(),{method:"POST",headers:b,body:k,redirect:"follow"});N.Logger.logUpdate(T),_.ok?m=(yield _.json()).success:(console.log("Delete connection error status: ",_.status),(0,L.ry)(_)),m&&N.ConnectionData.AddNpConn(t)}catch(k){k instanceof Error?console.log("Delete connection error message: ",k.message):console.log("Delete connection unexpected error: ",k),(0,L.Mb)(k,I.B.DeleteTheConnectionUrl()),(0,L.ey)(T,"DeleteTheConnection",k)}return m})}(v),r.O.removeNodeFromTree(v)):e.G.RemoveConnectionById(v),N.Logger.logUpdate(i),a})}function f(v){var C=arguments;return o(this,void 0,void 0,function*(){const i=N.Logger.logfunction("DeleteConnectionByIdBulk",C);if(N.serviceWorker)try{return(yield(0,N.sendMessage)("DeleteConnectionByIdBulk",{ids:v})).data}catch(t){console.error("DeleteConnectionByIdBulk sw error: ",t),(0,N.handleServiceWorkerException)(t)}let a=yield function(t){var c=arguments;return u(this,void 0,void 0,function*(){const T=N.Logger.logfunction("DeleteTheConnectionBulkApi",c);let m=!1;try{let k=(0,n.BZ)();k.append("Content-Type","application/json");const b=yield fetch(N.BaseUrl.DeleteTheConnectionBulkUrl(),{method:"POST",headers:k,body:JSON.stringify(t)});if(N.Logger.logUpdate(T),b.ok?m=(yield b.json()).success:(console.log("Delete connection Bulk Api error status: ",b.status),(0,L.ry)(b)),m)for(let _=0;_<t.length;_++){let R=t[_];N.ConnectionData.AddNpConn(R)}}catch(k){k instanceof Error?console.log("Delete connection Bulk Api error message: ",k.message):console.log("Delete connection Bulk Api unexpected error: ",k),(0,L.Mb)(k,N.BaseUrl.DeleteTheConnectionUrl()),(0,L.ey)(T,"DeleteTheConnectionBulkApi",k)}return m})}(v);if(a)for(let t=0;t<v.length;t++){let c=v[t];c>0?r.O.removeNodeFromTree(c):e.G.RemoveConnectionById(c)}return N.Logger.logUpdate(i),a})}},2289:(Q,E,y)=>{y.d(E,{$S:()=>e,L0:()=>o,WC:()=>l});var N=y(8675),L=y(6058),n=y(949),u=y(1863);y(3518);var I=y(1708),w=y(4818),r=function(f,v,C,i){return new(C||(C=Promise))(function(a,t){function c(k){try{m(i.next(k))}catch(b){t(b)}}function T(k){try{m(i.throw(k))}catch(b){t(b)}}function m(k){var b;k.done?a(k.value):(b=k.value,b instanceof C?b:new C(function(_){_(b)})).then(c,T)}m((i=i.apply(f,v||[])).next())})};function e(f,v){var C=arguments;return r(this,void 0,void 0,function*(){const i=n.Logger.logfunction("DeleteConnectionByType",C)||{};if(n.serviceWorker){i.serviceWorker=!0;try{const k=yield(0,n.sendMessage)("DeleteConnectionByType",{id:f,linker:v});return n.Logger.logUpdate(i),k.data}catch(k){console.error("DeleteConnectionByType sw error: ",k),(0,u.ey)(i,"DeleteConnectionByType",k),(0,n.handleServiceWorkerException)(k)}}let a=yield(0,N.l)(f);for(let k=0;k<a.length;k++)n.ConnectionData.AddConnection(a[k]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=yield(0,n.GetConceptByCharacter)(v),T=[];for(let k=0;k<t.length;k++)t[k].typeId==c.id&&T.push(t[k]);let m=!1;for(let k=0;k<T.length;k++)m=yield(0,n.DeleteConnectionById)(T[k].id);return n.Logger.logUpdate(i),m})}function o(f,v){var C=arguments;return r(this,void 0,void 0,function*(){const i=n.Logger.logfunction("DeleteConnectionByTypeBulk",C)||{};if(n.serviceWorker){i.serviceWorker=!0;try{const m=yield(0,n.sendMessage)("DeleteConnectionByTypeBulk",{id:f,linkers:v});return n.Logger.logUpdate(i),m.data}catch(m){console.error("DeleteConnectionByTypeBulk sw error: ",m),(0,u.ey)(i,"DeleteConnectionByTypeBulk",m),(0,n.handleServiceWorkerException)(m)}}let a=yield(0,N.l)(f);for(let m=0;m<a.length;m++)n.ConnectionData.AddConnection(a[m]);let t=yield n.ConnectionData.GetConnectionsOfConcept(f),c=[];for(let m=0;m<v.length;m++){let k=v[m],b=yield(0,I.Az)(k);c.push(b)}let T=[];console.log("this is all the connections for deleting taken",t,c,v);for(let m=0;m<t.length;m++)for(let k=0;k<c.length;k++)t[m].typeId==c[k].id&&T.push(t[m].id);return console.log("these are the to delete",T),n.Logger.logUpdate(i),yield(0,w.E)(T)})}function l(f,v){return r(this,arguments,void 0,function*(C,i,a=!1){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetAllTheConnectionsByTypeAndOfTheConcept",{id:C,linker:i,reverse:a})).data}catch(c){console.error("GetAllTheConnectionsByTypeAndOfTheConcept sw error: ",c),(0,n.handleServiceWorkerException)(c)}let t=[];if(a){let c=yield(0,L.W)(C),T=yield(0,n.MakeTheTypeConceptApi)(i,999);for(let m=0;m<c.length;m++)c[m].typeId==T.id&&t.push(c[m])}else{let c=yield(0,N.l)(C);for(let k=0;k<c.length;k++)n.ConnectionData.AddConnection(c[k]);let T=yield n.ConnectionData.GetConnectionsOfConcept(C),m=yield(0,n.GetConceptByCharacter)(i);for(let k=0;k<T.length;k++)T[k].typeId==m.id&&t.push(T[k])}return t})}},4364:(Q,E,y)=>{y.d(E,{s:()=>u});var N=y(1239),L=y(949),n=function(I,w,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{C(e.next(i))}catch(a){l(a)}}function v(i){try{C(e.throw(i))}catch(a){l(a)}}function C(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}C((e=e.apply(I,w||[])).next())})};function u(){return n(this,arguments,void 0,function*(I=[]){const w=L.Logger.logfunction("FindConceptsFromConnections",[I.length]);let r=[];if(I.length>0){for(let e=0;e<I.length;e++)r.includes(I[e].ofTheConceptId)||r.push(I[e].ofTheConceptId),r.includes(I[e].toTheConceptId)||r.push(I[e].toTheConceptId),r.includes(I[e].typeId)||r.push(I[e].typeId);yield(0,N.r)(r)}L.Logger.logUpdate(w)})}},5284:(Q,E,y)=>{y.d(E,{B:()=>I});var N=y(949),L=y(8286),n=y(1863),u=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,r||[])).next())})};function I(){return u(this,arguments,void 0,function*(w=[]){const r=N.Logger.logfunction("FindConnectionsOfCompositionsBulkInMemory",[w.length])||{};let e=[];try{if(N.serviceWorker){r.serviceWorker=!0;try{const o=yield(0,N.sendMessage)("FindConnectionsOfCompositionsBulkInMemory",{composition_ids:w});return N.Logger.logUpdate(r),o.data}catch(o){console.error("FindConnectionsOfCompositionsBulkInMemory sw error: ",o),(0,n.ey)(r,"FindConnectionsOfCompositionsBulkInMemory",o),(0,N.handleServiceWorkerException)(o)}}for(let o=0;o<w.length;o++){let l=yield L.d.GetConnectionsOfConcept(w[o]);e.push(...l)}return N.Logger.logUpdate(r),e}catch(o){return console.error("FindConnectionsOfCompositionsBulkInMemory error: ",o),(0,n.ey)(r,"FindConnectionsOfCompositionsBulkInMemory",o),e}})}},8939:(Q,E,y)=>{y.d(E,{$N:()=>m,$V:()=>l,Ez:()=>k,JA:()=>c,Mb:()=>C,Nj:()=>v,PT:()=>T,RW:()=>t,XI:()=>a,ay:()=>o,hL:()=>e,kx:()=>i,re:()=>f,yz:()=>b,zN:()=>G});var N=y(7139),L=y(2),n=y(3026),u=y(8286),I=y(949),w=y(1863),r=function(U,P,M,j){return new(M||(M=Promise))(function(z,ee){function Z(ie){try{$(j.next(ie))}catch(de){ee(de)}}function se(ie){try{$(j.throw(ie))}catch(de){ee(de)}}function $(ie){var de;ie.done?z(ie.value):(de=ie.value,de instanceof M?de:new M(function(K){K(de)})).then(Z,se)}$((j=j.apply(U,P||[])).next())})};function e(U){return r(this,void 0,void 0,function*(){let P={connectionList:[],compositionList:[]};try{if(I.serviceWorker)try{return(yield(0,I.sendMessage)("GetCompositionById",{id:U})).data}catch(j){console.error("GetCompositionById error sw: ",j),(0,I.handleServiceWorkerException)(j)}let M=yield(0,L.s)(U);P.connectionList=M;for(let j=0;j<P.connectionList.length;j++)P.compositionList.includes(P.connectionList[j].ofTheConceptId)||P.compositionList.push(P.connectionList[j].ofTheConceptId);return P}catch(M){return console.error("GetCompositionById error: ",M),P}})}function o(U,P,M){return r(this,void 0,void 0,function*(){var j,z;let ee={},Z=yield n.I.GetConcept(U);Z.id==0&&U!=null&&U!=null&&(Z=yield(0,N.r)(U));let se=yield G(U,P,M);return ee[(z=(j=Z?.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:""]=se,ee})}function l(U,P,M){return r(this,void 0,void 0,function*(){var j,z;let ee={},Z=yield n.I.GetConcept(U);Z.id==0&&U!=null&&U!=null&&(Z=yield(0,N.r)(U));let se=yield G(U,P,M);ee[(z=(j=Z?.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:""]=se;let $={};return $.created_at=Z.entryTimeStamp,$.data=ee,$.id=U,$})}function f(U,P,M){return r(this,void 0,void 0,function*(){var j,z;let ee={},Z=yield n.I.GetConcept(U);Z.id==0&&U!=null&&U!=null&&(Z=yield(0,N.r)(U));let se=yield R(Z,P,M);return ee[(z=(j=Z?.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:""]=se,ee})}function v(U){return r(this,void 0,void 0,function*(){var P,M;if(I.serviceWorker)try{return(yield(0,I.sendMessage)("GetComposition",{id:U})).data}catch($){console.error("GetComposition error sw: ",$),(0,I.handleServiceWorkerException)($)}let j=[],z={};j=yield(0,L.s)(U);let ee=[];for(let $=0;$<j.length;$++)ee.includes(j[$].ofTheConceptId)||ee.push(j[$].ofTheConceptId);let Z=yield n.I.GetConcept(U);Z.id==0&&U!=null&&U!=null&&(Z=yield(0,N.r)(U));let se=yield G(U,j,ee);return z[(M=(P=Z?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,z})}function C(U){return r(this,void 0,void 0,function*(){var P,M;let j=[],z={};j=yield(0,L.s)(U);let ee=[];for(let $=0;$<j.length;$++)ee.includes(j[$].ofTheConceptId)||ee.push(j[$].ofTheConceptId);let Z=yield n.I.GetConcept(U);Z.id==0&&U!=null&&U!=null&&(Z=yield(0,N.r)(U));let se=yield W(U,j,ee);return z[(M=(P=Z?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,z})}function i(U){return r(this,void 0,void 0,function*(){var P,M;if(I.serviceWorker)try{return(yield(0,I.sendMessage)("GetCompositionFromMemory",{id:U})).data}catch($){console.error("GetCompositionFromMemory error sw: ",$),(0,I.handleServiceWorkerException)($)}let j=[],z={};j=yield u.d.GetConnectionsOfCompositionLocal(U);let ee=[];for(let $=0;$<j.length;$++)ee.includes(j[$].ofTheConceptId)||ee.push(j[$].ofTheConceptId);let Z=yield n.I.GetConcept(U);Z.id==0&&U!=null&&U!=null&&(Z=yield(0,N.r)(U));let se=yield _(Z,j,ee);return z[(M=(P=Z?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,z})}function a(U){return r(this,void 0,void 0,function*(){var P,M;if(I.serviceWorker)try{return(yield(0,I.sendMessage)("GetCompositionFromMemoryNormal",{id:U})).data}catch($){console.error("GetCompositionFromMemoryNormal error sw: ",$),(0,I.handleServiceWorkerException)($)}let j=[],z={};j=yield u.d.GetConnectionsOfCompositionLocal(U);let ee=[];for(let $=0;$<j.length;$++)ee.includes(j[$].ofTheConceptId)||ee.push(j[$].ofTheConceptId);let Z=yield n.I.GetConcept(U);Z.id==0&&U!=null&&U!=null&&(Z=yield(0,N.r)(U));let se=yield R(Z,j,ee);return z[(M=(P=Z?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se,z})}function t(U){var P=arguments;return r(this,void 0,void 0,function*(){var M,j;const z=I.Logger.logfunction("GetCompositionWithIdFromMemory",P)||{};if(I.serviceWorker){z.serviceWorker=!0;try{const $=yield(0,I.sendMessage)("GetCompositionWithIdFromMemory",{id:U});return I.Logger.logUpdate(z),$.data}catch($){console.error("GetCompositionWithIdFromMemory error sw: ",$),(0,w.ey)(z,"GetCompositionWithIdFromMemory",$),(0,I.handleServiceWorkerException)($)}}let ee={},Z=[],se={};try{Z=yield u.d.GetConnectionsOfCompositionLocal(U);let $=[];for(let K=0;K<Z.length;K++)$.includes(Z[K].ofTheConceptId)||$.push(Z[K].ofTheConceptId);let ie=yield n.I.GetConcept(U);ie.id==0&&U!=null&&U!=null&&(ie=yield(0,N.r)(U));let de=yield _(ie,Z,$);se[(j=(M=ie?.type)===null||M===void 0?void 0:M.characterValue)!==null&&j!==void 0?j:""]=de,ee.created_at=ie.entryTimeStamp,ee.data=se,ee.id=U}catch($){console.log("this is the exception in GetCompositionWithIdFromMemory",U),(0,w.ey)(z,"GetCompositionWithIdFromMemory",$)}return I.Logger.logUpdate(z),ee})}function c(U,P){var M=arguments;return r(this,void 0,void 0,function*(){var j,z;const ee=I.Logger.logfunction("GetCompositionFromMemoryWithConnections",M)||{};if(I.serviceWorker){ee.serviceWorker=!0;try{const K=yield(0,I.sendMessage)("GetCompositionFromMemoryWithConnections",{id:U,connectionList:P});return I.Logger.logUpdate(ee),K.data}catch(K){console.error("GetCompositionFromMemoryWithConnections error sw: ",K),(0,w.ey)(ee,"GetCompositionFromMemoryWithConnections",K),(0,I.handleServiceWorkerException)(K)}}let Z={},se=[];for(let K=0;K<P.length;K++)se.includes(P[K].ofTheConceptId)||se.push(P[K].ofTheConceptId);let $=yield n.I.GetConcept(U);$.id==0&&U!=null&&U!=null&&($=yield(0,N.r)(U));let ie=yield _($,P,se);Z[(z=(j=$?.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:""]=ie;let de={};return de.created_at=$.entryTimeStamp,de.data=Z,de.id=U,I.Logger.logUpdate(ee),de})}function T(U,P){return r(this,void 0,void 0,function*(){var M,j;const z=I.Logger.logfunction("GetCompositionWithIdFromMemoryFromConnection",[U])||{};if(I.serviceWorker){z.serviceWorker=!0;try{const de=yield(0,I.sendMessage)("GetCompositionWithIdFromMemory",{id:U});return I.Logger.logUpdate(z),de.data}catch(de){console.error("GetCompositionWithIdFromMemory error sw: ",de),(0,w.ey)(z,"GetCompositionWithIdFromMemoryFromConnection",de),(0,I.handleServiceWorkerException)(de)}}let ee={},Z=[];for(let de=0;de<P.length;de++)Z.includes(P[de].ofTheConceptId)||Z.push(P[de].ofTheConceptId);let se=yield n.I.GetConcept(U);se.id==0&&U!=null&&U!=null&&(se=yield(0,N.r)(U));let $=yield _(se,P,Z);ee[(j=(M=se?.type)===null||M===void 0?void 0:M.characterValue)!==null&&j!==void 0?j:""]=$;let ie={};return ie.created_at=se.entryTimeStamp,ie.data=ee,ie.id=U,I.Logger.logUpdate(z),ie})}function m(U){return r(this,void 0,void 0,function*(){var P;if(I.serviceWorker)try{return(yield(0,I.sendMessage)("GetCompositionWithIdFromMemoryNew",{id:U})).data}catch($){console.error("GetCompositionWithIdFromMemoryNew error sw: ",$),(0,I.handleServiceWorkerException)($)}let M=[],j={};M=yield u.d.GetConnectionsOfCompositionLocal(U);let z=[];for(let $=0;$<M.length;$++)z.includes(M[$].ofTheConceptId)||z.push(M[$].ofTheConceptId);let ee=yield n.I.GetConcept(U);ee.id==0&&U!=null&&U!=null&&(console.log("this concept you cannot find ",U),ee=yield(0,N.r)(U)),new Date().getTime();let Z=yield function($,ie,de){return r(this,arguments,void 0,function*(K,X,te,Y=[]){var H,re,ae,le,ce,we,Ie,ve;let ke={},Le=K.id,fe=(new Date().getTime(),(re=(H=K?.type)===null||H===void 0?void 0:H.characterValue)!==null&&re!==void 0?re:"");if(!te.includes(Le))return{[fe]:K?.characterValue};if(Y.includes(Le))return"";Y.push(Le);for(let ge=0;ge<X.length;ge++){let Ce=yield(0,I.GetTheConcept)(X[ge].ofTheConceptId),Te=yield(0,I.GetTheConcept)(X[ge].toTheConceptId);X[ge].ofConcept=Ce,X[ge].toConcept=Te;let Ee=Ce.id,pe="the_",Ne=((le=(ae=Te?.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&le!==void 0?le:"").replace(pe,"");ke[Ee]!=null&&ke[Ee]!=null||(ke[Ee]={}),ke[Ee][Ne]=Te.characterValue}let _e={};for(let ge=0;ge<X.length;ge++){let Ce=X[ge].ofConcept,Te=X[ge].toConcept,Ee=(we=(ce=Ce?.type)===null||ce===void 0?void 0:ce.characterValue)!==null&&we!==void 0?we:"",pe="the_",Ne=((ve=(Ie=Te?.type)===null||Ie===void 0?void 0:Ie.characterValue)!==null&&ve!==void 0?ve:"").replace(pe,"");_e[Ce.id]!=null&&_e[Ce.id]!=null||(_e[Ce.id]={});let Be=_e[Ce.id];Be[Ee]!=null&&Be[Ee]!=null||(Be[Ee]={}),ke[X[ge].ofTheConceptId]!=null&&ke[X[ge].toTheConceptId]!=null?Be[Ee][Ne]=ke[Te.id]:Be[Ee][Ne]=Te.characterValue}return _e[K.id]})}(ee,M,z);(P=ee?.type)===null||P===void 0||P.characterValue,j=Z;let se={};return se.created_at=ee.entryTimeStamp,se.data=j,se.id=U,se})}function k(U){return r(this,void 0,void 0,function*(){var P,M;if(I.serviceWorker)try{return(yield(0,I.sendMessage)("GetCompositionWithIdAndDateFromMemory",{id:U})).data}catch(ie){console.error("GetCompositionWithIdAndDateFromMemory error sw: ",ie),(0,I.handleServiceWorkerException)(ie)}let j=[],z={};j=yield u.d.GetConnectionsOfCompositionLocal(U);let ee=[];for(let ie=0;ie<j.length;ie++)ee.includes(j[ie].ofTheConceptId)||ee.push(j[ie].ofTheConceptId);let Z=yield n.I.GetConcept(U);Z.id==0&&U!=null&&U!=null&&(Z=yield(0,N.r)(U));let se=yield G(U,j,ee);z[(M=(P=Z?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:""]=se;let $={};return $.data=z,$.id=U,$.created_at=Z.entryTimeStamp,$})}function b(U){var P=arguments;return r(this,void 0,void 0,function*(){var M,j;const z=I.Logger.logfunction("GetCompositionWithId",P)||{};if(I.serviceWorker){z.serviceWorker=!0;try{const K=yield(0,I.sendMessage)("GetCompositionWithId",{id:U});return I.Logger.logUpdate(z),K.data}catch(K){console.error("GetCompositionWithId error sw: ",K),(0,w.ey)(z,"GetCompositionWithId",K),(0,I.handleServiceWorkerException)(K)}}let ee=[],Z={};ee=yield(0,L.s)(U);let se=[];for(let K=0;K<ee.length;K++)se.includes(ee[K].ofTheConceptId)||se.push(ee[K].ofTheConceptId);let $=yield n.I.GetConcept(U);$.id==0&&U!=null&&U!=null&&($=yield(0,N.r)(U));let ie=yield G(U,ee,se);Z[(j=(M=$?.type)===null||M===void 0?void 0:M.characterValue)!==null&&j!==void 0?j:""]=ie;let de={};return de.data=Z,de.id=U,I.Logger.logUpdate(z),de})}function _(U,P,M){return r(this,arguments,void 0,function*(j,z,ee,Z=[]){var se,$,ie;let de={},K=[],X=j.id;if((se=j?.type)===null||se===void 0||se.characterValue,!ee.includes(X))return j?.characterValue;if(Z.includes(X))return"";Z.push(X);for(let te=0;te<z.length;te++)if(z[te].ofTheConceptId==X)if(X!=z[te].toTheConceptId){let Y=z[te].toTheConceptId,H=yield n.I.GetConcept(Y);if(H!=null&&H.id!=0||Y==null||Y==null||(H=yield(0,N.r)(Y)),H.id!=0&&H?.type==null){let le=H.typeId,ce=yield n.I.GetConcept(le);H.type=ce,ce==null&&le!=null&&le!=null&&(ce=yield(0,N.r)(le),H.type=ce)}let re="the_",ae=((ie=($=H?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(re,"");if(isNaN(Number(ae))){if(ae){const le=yield _(H,z,ee,Z);de[ae]=le}}else{const le=yield _(H,z,ee,Z);K[ae]=le,de=K}}else console.log("this is the faulty connection ",z[te]);return de})}function R(U,P,M){return r(this,arguments,void 0,function*(j,z,ee,Z=[]){var se,$,ie;const de=I.Logger.logfunction("recursiveFetchConceptNormal",[j]);new Date().getTime();let K={},X=[],te=j.id;if(K.id=te,(se=j?.type)===null||se===void 0||se.characterValue,!ee.includes(te))return j?.characterValue;if(Z.includes(te))return"";Z.push(te);for(let Y=0;Y<z.length;Y++)if(z[Y].ofTheConceptId==te)if(te!=z[Y].toTheConceptId){let H=z[Y].toTheConceptId,re=yield n.I.GetConcept(H);if(re!=null&&re.id!=0||H==null||H==null||(re=yield(0,N.r)(H)),re.id!=0&&re?.type==null){let ce=re.typeId,we=yield n.I.GetConcept(ce);re.type=we,we==null&&ce!=null&&ce!=null&&(we=yield(0,N.r)(ce),re.type=we)}let ae="the_",le=((ie=($=re?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(ae,"");if(isNaN(Number(le))){if(le){const ce=yield _(re,z,ee,Z);K[le]=ce}}else{const ce=yield _(re,z,ee,Z);X[le]=ce,K=X}}else console.log("this is the faulty connection ",z[Y]);return I.Logger.logUpdate(de),K})}function G(U,P,M){return r(this,arguments,void 0,function*(j,z,ee,Z=[]){var se,$,ie;let de={},K=[];if(j==0)return null;let X=yield n.I.GetConcept(j);if(X!=null&&X.id!=0||j==null||j==null||(X=yield(0,N.r)(j)),X.id!=0&&X.type==null){let te=X.typeId,Y=yield n.I.GetConcept(te);X.type=Y,Y==null&&te!=null&&te!=null&&(Y=yield(0,N.r)(te),X.type=Y)}if((se=X?.type)===null||se===void 0||se.characterValue,!ee.includes(j))return X?.characterValue;if(Z.includes(j))return"";Z.push(j);for(let te=0;te<z.length;te++)if(new Date().getTime(),z[te].ofTheConceptId==j)if(j!=z[te].toTheConceptId){let Y=z[te].toTheConceptId,H=yield n.I.GetConcept(Y);if(H!=null&&H.id!=0||Y==null||Y==null||(H=yield(0,N.r)(Y)),H.id!=0&&H?.type==null){let le=H.typeId,ce=yield n.I.GetConcept(le);H.type=ce,ce==null&&le!=null&&le!=null&&(ce=yield(0,N.r)(le),H.type=ce)}let re="the_",ae=((ie=($=H?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(re,"");if(isNaN(Number(ae))){if(ae){const le=yield G(Y,z,ee,Z);de[ae]=le}}else{const le=yield G(Y,z,ee,Z);K[ae]=le,de=K}}else console.log("this is the faulty connection ",z[te]);return de})}function W(U,P,M){return r(this,arguments,void 0,function*(j,z,ee,Z=[]){var se,$,ie;let de={},K=[];if(j==0)return null;let X=yield n.I.GetConcept(j);if(X!=null&&X.id!=0||j==null||j==null||(X=yield(0,N.r)(j)),X.id!=0&&X.type==null){let te=X.typeId,Y=yield n.I.GetConcept(te);X.type=Y,Y==null&&te!=null&&te!=null&&(Y=yield(0,N.r)(te),X.type=Y)}if((se=X?.type)===null||se===void 0||se.characterValue,!ee.includes(j))return X?.characterValue;if(Z.includes(j))return"";Z.push(j),de.id=j;for(let te=0;te<z.length;te++)if(z[te].ofTheConceptId==j){let Y=z[te].toTheConceptId,H=yield n.I.GetConcept(Y);if(H!=null&&H.id!=0||Y==null||Y==null||(H=yield(0,N.r)(Y)),H&&H?.type==null){let le=H.typeId,ce=yield n.I.GetConcept(le);H.type=ce,ce==null&&le!=null&&le!=null&&(ce=yield(0,N.r)(le),H.type=ce)}let re="the_",ae=((ie=($=H?.type)===null||$===void 0?void 0:$.characterValue)!==null&&ie!==void 0?ie:"").replace(re,"");if(isNaN(Number(ae))){if(ae){const le=yield W(Y,z,ee);de[ae]=le}}else{const le=yield W(Y,z,ee);K[ae]=le,de=K}}return de})}},6687:(Q,E,y)=>{y.d(E,{D:()=>m,MT:()=>T,Nt:()=>v,QL:()=>a,as:()=>C,cw:()=>o,dF:()=>e,hG:()=>i,km:()=>f,nr:()=>c,p8:()=>l,rv:()=>t});var N=y(8642),L=y(7467),n=y(949),u=y(1863),I=y(5284),w=y(8939),r=function(k,b,_,R){return new(_||(_=Promise))(function(G,W){function U(j){try{M(R.next(j))}catch(z){W(z)}}function P(j){try{M(R.throw(j))}catch(z){W(z)}}function M(j){var z;j.done?G(j.value):(z=j.value,z instanceof _?z:new _(function(ee){ee(z)})).then(U,P)}M((R=R.apply(k,b||[])).next())})};function e(){return r(this,arguments,void 0,function*(k=[]){yield(0,N.Y)(k);let b=[];for(let _=0;_<k.length;_++){let R=yield(0,w.kx)(k[_]);b.push(R)}return b})}function o(){return r(this,arguments,void 0,function*(k=[]){yield(0,N.Y)(k);let b=[];for(let _=0;_<k.length;_++){let R=yield(0,w.RW)(k[_]);b.push(R)}return b})}function l(){return r(this,arguments,void 0,function*(k=[],b=[]){const _=n.Logger.logfunction("GetCompositionFromConnectionsWithDataId",[k])||{};if(n.serviceWorker){_.serviceWorker=!0;try{const G=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataId",{conceptIds:k,connectionIds:b});return n.Logger.logUpdate(_),G.data}catch(G){console.error("GetCompositionFromConnectionsWithDataId error sw: ",G),(0,u.ey)(_,"GetCompositionFromConnectionsWithDataId",G),(0,n.handleServiceWorkerException)(G)}}let R=[];for(let G=0;G<k.length;G++){let W=yield(0,w.RW)(k[G]);R.push(W)}return n.Logger.logUpdate(_),R})}function f(){var k=arguments;return r(this,arguments,void 0,function*(b=[],_=[]){const R=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdFromConnections",k)||{};if(n.serviceWorker){R.serviceWorker=!0;try{const U=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdFromConnections",{conceptIds:b,connectionIds:_});return n.Logger.logUpdate(R),U.data}catch(U){console.error("GetCompositionFromConnectionsWithDataIdFromConnections error sw: ",U),(0,u.ey)(R,"GetCompositionFromConnectionsWithDataIdFromConnections",U),(0,n.handleServiceWorkerException)(U)}}let G=yield(0,L.j)(_),W=[];for(let U=0;U<b.length;U++){let P=yield(0,w.PT)(b[U],G);W.push(P)}return n.Logger.logUpdate(R),W})}function v(){var k=arguments;return r(this,arguments,void 0,function*(b=[],_=[]){const R=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdIndex",k)||{};if(n.serviceWorker){R.serviceWorker=!0;try{const W=yield(0,n.sendMessage)("GetCompositionFromConnectionsWithDataIdIndex",{conceptIds:b,connectionIds:_});return n.Logger.logUpdate(R),W.data}catch(W){console.error("GetCompositionFromConnectionsWithDataIdIndex error sw: ",W),(0,u.ey)(R,"GetCompositionFromConnectionsWithDataIdIndex",W),(0,n.handleServiceWorkerException)(W)}}yield(0,L.j)(_),yield(0,I.B)(b);let G={};for(let W=0;W<b.length;W++){let U=yield(0,w.RW)(b[W]);G[b[W]]=U}return n.Logger.logUpdate(R),G})}function C(){return r(this,arguments,void 0,function*(k=[],b=[]){yield(0,L.j)(b),yield(0,I.B)(k);let _={};for(let R=0;R<k.length;R++){let G=yield(0,w.kx)(k[R]);_[k[R]]=G}return _})}function i(){return r(this,arguments,void 0,function*(k=[],b=[]){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetCompositionFromConnectionsWithIndexFromConnections",{conceptIds:k,connectionIds:b})).data}catch(G){console.error("GetCompositionFromConnectionsWithIndexFromConnections error sw: ",G),(0,n.handleServiceWorkerException)(G)}let _=yield(0,L.j)(b),R=[];for(let G=0;G<k.length;G++){let W=yield(0,w.JA)(k[G],_);R[k[G]]=W}return R})}function a(k){var b=arguments;return r(this,void 0,void 0,function*(){const _=n.Logger.logfunction("GetConnectionDataPrefetch",b)||{};if(n.serviceWorker){_.serviceWorker=!0;try{const M=yield(0,n.sendMessage)("GetConnectionDataPrefetch",{connectionIds:k});return n.Logger.logUpdate(_),M.data}catch(M){console.error("GetConnectionDataPrefetch error sw: ",M),(0,u.ey)(_,"GetConnectionDataPrefetch",M),(0,n.handleServiceWorkerException)(M)}}let R=[],G=[],W={};for(let M=0;M<k.length;M++){let j=yield n.ConnectionData.GetConnection(k[M]);j.id==0?R.push(k[M]):G.push(j)}for(let M=0;M<R.length;M++)W[k[M]]=!1;let U=[],P=yield(0,L.j)(R);G=[...G,...P];for(let M=0;M<G.length;M++)U.push(G[M].ofTheConceptId),U.push(G[M].toTheConceptId),U.push(G[M].typeId);return yield(0,n.GetConceptBulk)(U),n.Logger.logUpdate(_),G})}function t(){var k=arguments;return r(this,arguments,void 0,function*(b=[],_=[]){const R=n.Logger.logfunction("GetCompositionFromConnectionsWithDataIdInObject",k);yield(0,L.j)(_);let G={};for(let W=0;W<b.length;W++){let U=yield(0,w.RW)(b[W]);G[b[W]]=U}return n.Logger.logUpdate(R),G})}function c(){return r(this,arguments,void 0,function*(k=[],b=[]){yield(0,L.j)(b);let _={};for(let R=0;R<k.length;R++){let G=yield(0,w.$N)(k[R]);_[k[R]]=G}return _})}function T(){return r(this,arguments,void 0,function*(k=[],b=[]){yield(0,L.j)(b);let _={};for(let R=0;R<k.length;R++){let G=yield(0,w.kx)(k[R]);_[k[R]]=G}return _})}function m(){return r(this,arguments,void 0,function*(k=[],b=[]){yield(0,L.j)(b);let _={};for(let R=0;R<k.length;R++){let G=yield(0,w.XI)(k[R]);_[k[R]]=G,console.log("this is the normal data",k[R],G)}return _})}},2013:(Q,E,y)=>{y.d(E,{A:()=>w,w:()=>r});var N=y(8146),L=y(949),n=y(3026),u=y(1863),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,C){function i(c){try{t(f.next(c))}catch(T){C(T)}}function a(c){try{t(f.throw(c))}catch(T){C(T)}}function t(c){var T;c.done?v(c.value):(T=c.value,T instanceof l?T:new l(function(m){m(T)})).then(i,a)}t((f=f.apply(e,[])).next())})};function w(e){var o=arguments;return I(this,void 0,void 0,function*(){const l=L.Logger.logfunction("GetConceptByCharacter",o)||{};if(L.serviceWorker){l.serviceWorker=!0;try{const C=yield(0,L.sendMessage)("GetConceptByCharacter",{characterValue:e});return L.Logger.logUpdate(l),C.data}catch(C){console.error("GetConceptByCharacter sw error: ",C),(0,u.ey)(l,"GetConceptByCharacter",C),(0,L.handleServiceWorkerException)(C)}}let f=yield n.I.GetConceptByCharacter(e),v=`${e}`;return f!=null&&f?.id!=0||!v||(yield(0,N.Y)(e),f=yield n.I.GetConceptByCharacterAndTypeLocal(e,51),f.id==0&&(f=yield n.I.GetConceptByCharacter(e))),L.Logger.logUpdate(l),f})}function r(e){var o=arguments;return I(this,void 0,void 0,function*(){const l=L.Logger.logfunction("GetConceptByCharacterUpdated",o)||{};if(L.serviceWorker){l.serviceWorker=!0;try{const C=yield(0,L.sendMessage)("GetConceptByCharacterUpdated",{characterValue:e});return L.Logger.logUpdate(l),C.data}catch(C){console.error("GetConceptByCharacterUpdated error sw: ",C),(0,u.ey)(l,"GetConceptByCharacterUpdated",C),(0,L.handleServiceWorkerException)(C)}}let f=yield n.I.GetConceptByCharacter(e),v=`${e}`;return f!=null&&f?.id!=0||!v||(yield(0,N.Y)(e),f=yield n.I.GetConceptByCharacter(e)),L.Logger.logUpdate(l),f})}},7887:(Q,E,y)=>{y.d(E,{a:()=>u,p:()=>I});var N=y(8286),L=y(4864),n=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,[])).next())})};function u(){return n(this,void 0,void 0,function*(){try{let w=[];if(Array.isArray(w))for(let r=0;r<w.length;r++)N.d.AddConnectionToMemory(w[r])}catch(w){throw{message:"Cannot create Connection Binary Tree Concept",ok:!1,status:400,data:w}}})}function I(){return n(this,void 0,void 0,function*(){try{let w=[];if(Array.isArray(w))for(let r=0;r<w.length;r++)L.G.AddConnectionToMemory(w[r])}catch(w){throw{message:"Cannot create Local Connection Binary Tree Concept",ok:!1,status:400,data:w}}})}},7876:(Q,E,y)=>{y.d(E,{A:()=>e,K:()=>o});var N=y(1735),L=y(7139),n=y(949),u=y(3026),I=y(7282),w=function(l,f,v,C){return new(v||(v=Promise))(function(i,a){function t(m){try{T(C.next(m))}catch(k){a(k)}}function c(m){try{T(C.throw(m))}catch(k){a(k)}}function T(m){var k;m.done?i(m.value):(k=m.value,k instanceof v?k:new v(function(b){b(k)})).then(t,c)}T((C=C.apply(l,f||[])).next())})};const r=new Map;function e(l){return w(this,arguments,void 0,function*(f,v=999){let C=performance.now();if(N.J.activateStatus)try{N.J.incrementConcept(f)}catch{console.error("Error adding connection in access tracker"),n.Logger.log("ERROR","Error Adding Connection")}if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConcept",{id:f,userId:v})).data}catch(t){console.error("GetTheConcept sw error: ",t),(0,n.handleServiceWorkerException)(t)}let i=(0,I.o)();if(r.has(f))return r.get(f)||i;const a=w(this,void 0,void 0,function*(){try{if(f<0)return yield n.LocalConceptsData.GetConceptByGhostId(f);if(i=yield u.I.GetConcept(f),(i==null||i.id==0)&&f!=null&&f!=null&&(i=yield(0,L.r)(f)),i.id!=0&&i.type==null&&(yield u.I.GetConcept(i.typeId))==null&&i.typeId!=null&&i.typeId!=null){let t=yield(0,L.r)(i.typeId);i.type=t}return i}catch(t){throw console.error("this is the error in the getting concept",t),n.Logger.logError(C,v,"read","unknown",void 0,500,t,"GetTheConcept",[f,v],"unknown",void 0),t}finally{r.delete(f)}});return r.set(f,a),a})}function o(l){return w(this,void 0,void 0,function*(){if(n.serviceWorker)try{return(yield(0,n.sendMessage)("AddTypeConcept",{concept:l})).data}catch(f){console.error("AddTypeConcept sw error: ",f),(0,n.handleServiceWorkerException)(f)}if(l.type==null){let f=yield u.I.GetConcept(l.typeId);if(f.id==0&&l.typeId!=0&&l.typeId!=999){let v=yield(0,L.r)(l.typeId);l.type=v}else l.type=f}})}},7869:(Q,E,y)=>{y.d(E,{_:()=>C,A:()=>v});var N=y(9581),L=y(3026),n=y(1863),u=y(3518),I=y(949),w=function(i,a,t,c){return new(t||(t=Promise))(function(T,m){function k(R){try{_(c.next(R))}catch(G){m(G)}}function b(R){try{_(c.throw(R))}catch(G){m(G)}}function _(R){var G;R.done?T(R.value):(G=R.value,G instanceof t?G:new t(function(W){W(G)})).then(k,b)}_((c=c.apply(i,[])).next())})},r=y(2299);class e{}e.isUpdated=!1,e.isOnlineSync=!1;var o=y(3655),l=y(9003),f=function(i,a,t,c){return new(t||(t=Promise))(function(T,m){function k(R){try{_(c.next(R))}catch(G){m(G)}}function b(R){try{_(c.throw(R))}catch(G){m(G)}}function _(R){var G;R.done?T(R.value):(G=R.value,G instanceof t?G:new t(function(W){W(G)})).then(k,b)}_((c=c.apply(i,a||[])).next())})};function v(){return f(this,arguments,void 0,function*(i=!0){try{if(yield(0,o.qI)("concepts"),yield(0,l.qI)("concepts"),i){if((yield(0,o.b8)()).isOnlineSync)return!0;yield function(){return w(this,void 0,void 0,function*(){const a=I.Logger.logfunction("GetAiData");try{const T=new Date().getTime();var t=(0,u.ab)("application/x-www-form-urlencoded");const m=yield fetch(N.B.GetAllAiData(),{method:"GET",headers:t});m.ok||(console.log("Ai Error Message: ","Cannot get response"),(0,n.ry)(m));const k=yield m.json();for(var c=0;c<k.length;c++)L.I.AddConcept(k[c]);C();let b=new Date().getTime()-T;console.log("The time taken is ",b),I.Logger.logUpdate(a)}catch(T){T instanceof Error?console.log("Ai Error Message: ",T.message):console.log("Ai Error Message: ",T),(0,n.Mb)(T,N.B.GetAllAiData())}})}()}return!0}catch(a){return console.log({message:"cannot initlize the AI system",ok:!1,status:400,data:a}),!0}})}function C(){return f(this,void 0,void 0,function*(){e.isOnlineSync=!0;var i=new r.B(e.isOnlineSync);(0,o.El)(i)})}},8095:(Q,E,y)=>{y.d(E,{h:()=>I});var N=y(949),L=y(9700),n=y(1863),u=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,r||[])).next())})};function I(w,r,e){var o=arguments;return u(this,arguments,void 0,function*(l,f,v,C=!1,i={concepts:[],connections:[]}){var a,t,c,T,m,k;const b=L.V.logfunction("CreateConnectionBetweenTwoConceptsLocal",o)||{};let _=performance.now();try{if(N.serviceWorker){b.serviceWorker=!0;try{const P=yield(0,N.sendMessage)("CreateConnectionBetweenTwoConceptsLocal",{ofTheConcept:l,toTheConcept:f,linker:v,both:C,actions:i});return!((t=(a=P?.actions)===null||a===void 0?void 0:a.concepts)===null||t===void 0)&&t.length&&(i.concepts=JSON.parse(JSON.stringify(P.actions.concepts))),!((T=(c=P?.actions)===null||c===void 0?void 0:c.connections)===null||T===void 0)&&T.length&&(i.connections=JSON.parse(JSON.stringify(P.actions.connections))),L.V.logUpdate(b),P.data}catch(P){console.error("CreateConnectionBetweenTwoConceptsLocal sw error: ",P),(0,n.ey)(b,"CreateConnectionBetweenTwoConceptsLocal",P),(0,N.handleServiceWorkerException)(P)}}if(l.userId,C){let P=((m=f.type)===null||m===void 0?void 0:m.characterValue)+"_s_"+v+"_by";var R=yield(0,N.MakeTheInstanceConceptLocal)("connection",P,!1,999,999,999,0,i);yield(0,N.CreateTheConnectionLocal)(f.id,l.id,R.id,1e3,void 0,void 0,i)}let W=((k=l.type)===null||k===void 0?void 0:k.characterValue)+"_s_"+v+"_s";var G=yield(0,N.MakeTheInstanceConceptLocal)("connection",W,!1,999,999,999,void 0,i);let U=yield(0,N.CreateTheConnectionLocal)(l.id,f.id,G.id,1e3,void 0,void 0,i);return L.V.logUpdate(b),U}catch(W){throw L.V.logError(_,l.userId,"create",void 0,void 0,500,W,"CreateConnectionBetweenTwoConceptsLocal",[l,f,v,C],void 0,void 0),(0,n.ey)(b,"CreateConnectionBetweenTwoConceptsLocal",W),W}})}},6416:(Q,E,y)=>{y.d(E,{u:()=>L});var N=y(2615);function L(){let n=new Date,u=new Date;return new N.j(0,0,0,0,0,"0",0,!1,n,u,"0")}},3075:(Q,E,y)=>{y.d(E,{Ay:()=>e,EO:()=>o,xd:()=>l});var N=y(205),L=y(9736),n=y(5257),u=y(9003),I=y(949),w=y(1863),r=function(f,v,C,i){return new(C||(C=Promise))(function(a,t){function c(k){try{m(i.next(k))}catch(b){t(b)}}function T(k){try{m(i.throw(k))}catch(b){t(b)}}function m(k){var b;k.done?a(k.value):(b=k.value,b instanceof C?b:new C(function(_){_(b)})).then(c,T)}m((i=i.apply(f,[])).next())})};function e(){return r(this,void 0,void 0,function*(){const f=I.Logger.logfunction("CreateLocalBinaryTreeFromIndexDb");try{let v=[];if(Array.isArray(v))for(let C=0;C<v.length;C++){let i=v[C];L.v.AddConceptToMemory(i)}N.B.isLocalDataLoaded=!0,N.B.isLocalTypeLoaded=!0,N.B.isLocalCharacterLoaded=!0,I.Logger.logUpdate(f)}catch(v){yield(0,I.DelayFunctionExecution)(2e3,e());let C={message:"Cannot create local binary tree from index db",data:v,ok:!1,status:400};throw(0,w.ey)(f,"CreateLocalBinaryTreeFromIndexDb",v),C}})}function o(){return r(this,void 0,void 0,function*(){var f;const v=I.Logger.logfunction("PopulateTheLocalConceptsToMemory");try{yield(f=navigator.locks)===null||f===void 0?void 0:f.request("dblock",C=>r(this,void 0,void 0,function*(){let i=yield(0,u.S5)("localid");if(Array.isArray(i)){if(i[0]){let a=i[0].value;if(a)n.R.AddConceptId(i[0]),yield(0,u.kH)("localid",{id:0,value:a-10});else{a=-Math.floor(1e8*Math.random());let t={id:0,value:a},c={id:0,value:a-10};n.R.AddConceptId(t),yield(0,u.kH)("localid",c)}}i[2]}})),I.Logger.logUpdate(v)}catch(C){let i={message:"Cannot populate Local Ids from the Index Db",data:C,ok:!1,status:400};throw(0,w.ey)(v,"PopulateTheLocalConceptsToMemory",C),i}})}function l(){return r(this,void 0,void 0,function*(){var f;const v=I.Logger.logfunction("PopulateTheLocalConnectionToMemory");try{yield(f=navigator.locks)===null||f===void 0?void 0:f.request("dblock",C=>r(this,void 0,void 0,function*(){let i=yield(0,u.S5)("localid");if(Array.isArray(i)){if(i[1]){let a=i[1].value;if(a)n.R.AddConnectionId(i[1]),yield(0,u.kH)("localid",{id:1,value:a-10});else{a=-Math.floor(1e8*Math.random());let t={id:0,value:a},c={id:0,value:a-10};n.R.AddConnectionId(t),yield(0,u.kH)("localid",c)}}i[2]}})),I.Logger.logUpdate(v)}catch(C){let i={message:"Cannot populate Local Ids from the Index Db",data:C,ok:!1,status:400};throw(0,w.ey)(v,"PopulateTheLocalConnectionToMemory",C),i}})}},999:(Q,E,y)=>{y.d(E,{R:()=>r});var N=y(949),L=y(1863),n=y(6416),u=y(4711),I=y(5868),w=function(e,o,l,f){return new(l||(l=Promise))(function(v,C){function i(c){try{t(f.next(c))}catch(T){C(T)}}function a(c){try{t(f.throw(c))}catch(T){C(T)}}function t(c){var T;c.done?v(c.value):(T=c.value,T instanceof l?T:new l(function(m){m(T)})).then(i,a)}t((f=f.apply(e,o||[])).next())})};function r(e){return w(this,arguments,void 0,function*(o,l=null,f=null,v=null,C=null,i=null,a=null,t=!1,c={concepts:[],connections:[]}){var T,m,k,b;const _=N.Logger.logfunction("CreateTheCompositionLocal")||{};if(N.serviceWorker){_.serviceWorker=!0;try{const M=yield(0,N.sendMessage)("CreateTheCompositionLocal",{json:o,ofTheConceptId:l,ofTheConceptUserId:f,mainKey:v,userId:C,accessId:i,sessionInformationId:a,actions:c});return!((m=(T=M?.actions)===null||T===void 0?void 0:T.concepts)===null||m===void 0)&&m.length&&(c.concepts=JSON.parse(JSON.stringify(M.actions.concepts))),!((b=(k=M?.actions)===null||k===void 0?void 0:k.connections)===null||b===void 0)&&b.length&&(c.connections=JSON.parse(JSON.stringify(M.actions.connections))),N.Logger.logUpdate(_),M.data}catch(M){console.error("CreateTheCompositionLocal error sw: ",M),(0,L.ey)(_,"CreateTheCompositionLocal",M),(0,N.handleServiceWorkerException)(M)}}let R=C??999,G=i??999,W=a??999,U=v??0,P=(0,n.u)();for(const M in o)if(typeof o[M]!="string"&&typeof o[M]!="number")if(l==null&&f==null){let j=U,z=yield(0,I.k)(M,"",!0,R,G,W,void 0,c);P=z,j=z.id,U=z.id,yield r(o[M],z.id,z.userId,j,C,i,a,void 0,c)}else{let j=l??999,z=U,ee=yield(0,I.k)(M,"",!0,R,G,W,void 0,c);yield(0,u.F)(j,ee.id,z,void 0,void 0,void 0,c),yield r(o[M],ee.id,ee.userId,z,C,i,a,void 0,c)}else{let j=l??999,z=U,ee=yield(0,I.k)(M,o[M].toString(),!1,R,G,W,void 0,c);yield(0,u.F)(j,ee.id,z,void 0,void 0,void 0,c)}return N.Logger.logUpdate(_),P})}},3077:(Q,E,y)=>{y.d(E,{A:()=>r});var N=y(949),L=y(2615),n=y(9736),u=y(5257),I=y(9700),w=function(e,o,l,f){return new(l||(l=Promise))(function(v,C){function i(c){try{t(f.next(c))}catch(T){C(T)}}function a(c){try{t(f.throw(c))}catch(T){C(T)}}function t(c){var T;c.done?v(c.value):(T=c.value,T instanceof l?T:new l(function(m){m(T)})).then(i,a)}t((f=f.apply(e,o||[])).next())})};function r(e,o,l,f,v,C){return w(this,arguments,void 0,function*(i,a,t,c,T,m,k=!1,b=0,_={concepts:[],connections:[]}){var R,G,W,U;let P=performance.now();try{if(N.serviceWorker)try{const se=yield(0,N.sendMessage)("CreateTheConceptLocal",{referent:i,typecharacter:a,userId:t,categoryId:c,typeId:T,accessId:m,isComposition:k,referentId:b});return!((G=(R=se?.actions)===null||R===void 0?void 0:R.concepts)===null||G===void 0)&&G.length&&(_.concepts=JSON.parse(JSON.stringify(se.actions.concepts))),!((U=(W=se?.actions)===null||W===void 0?void 0:W.connections)===null||U===void 0)&&U.length&&(_.connections=JSON.parse(JSON.stringify(se.actions.connections))),se.data}catch(se){console.error("CreateTheConceptLocal error sw: ",se),(0,N.handleServiceWorkerException)(se)}let M=yield u.R.getConceptId(),j=!0,z=new Date,ee=new Date;if(i=="the")return new L.j(1,999,5,5,b,i,m,j,z,ee,a);let Z=new L.j(M,t,T,c,b,i,m,j,z,ee,a);return Z.isTemp=!0,Z.isComposition=k,n.v.AddConcept(Z),_.concepts.push(Z),Z}catch(M){throw I.V.logError(P,t,"create","unknown","unknown",500,void 0,"createTheConceptLocal",[i,a,t,c,T,m,k],void 0),M}})}},4711:(Q,E,y)=>{y.d(E,{F:()=>r,d:()=>e});var N=y(2155),L=y(4864),n=y(5257),u=y(9700),I=y(949),w=function(o,l,f,v){return new(f||(f=Promise))(function(C,i){function a(T){try{c(v.next(T))}catch(m){i(m)}}function t(T){try{c(v.throw(T))}catch(m){i(m)}}function c(T){var m;T.done?C(T.value):(m=T.value,m instanceof f?m:new f(function(k){k(m)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function r(o,l,f){return w(this,arguments,void 0,function*(v,C,i,a=1,t="",c=999,T={concepts:[],connections:[]}){var m,k,b,_;let R=performance.now();if(I.serviceWorker)try{const G=yield(0,I.sendMessage)("CreateTheConnectionLocal",{ofTheConceptId:v,toTheConceptId:C,typeId:i,orderId:a,typeString:t,userId:c,actions:T});return!((k=(m=G?.actions)===null||m===void 0?void 0:m.concepts)===null||k===void 0)&&k.length&&(T.concepts=JSON.parse(JSON.stringify(G.actions.concepts))),!((_=(b=G?.actions)===null||b===void 0?void 0:b.connections)===null||_===void 0)&&_.length&&(T.connections=JSON.parse(JSON.stringify(G.actions.connections))),G.data}catch(G){console.log("CreateTheConnectionLocal error sw: ",G),(0,I.handleServiceWorkerException)(G)}try{let G=4,W=yield n.R.getConnectionId(),U=0,P=0,M=0;U=v,P=C,M=i;let j=new N.N(0,0,0,0,0,0,0);return v!=C&&(j=new N.N(W,U,P,c,i,a,G),j.isTemp=!0,j.typeCharacter=t,I.LocalSyncData.AddConnection(j),L.G.AddConnection(j),T.connections.push(j)),j}catch(G){throw u.V.logError(R,c,"create","Unknown","Unknown",500,void 0,"CreateTheConnectionLocal",[v,C,i,a,t,c],"UnknownUserAgent",[]),G}})}function e(o,l,f){return w(this,arguments,void 0,function*(v,C,i,a={concepts:[],connections:[]}){var t,c,T,m;if(I.serviceWorker)try{const _=yield(0,I.sendMessage)("CreateConnection",{ofTheConcept:v,toTheConcept:C,connectionTypeString:i,actions:a});return!((c=(t=_?.actions)===null||t===void 0?void 0:t.concepts)===null||c===void 0)&&c.length&&(a.concepts=JSON.parse(JSON.stringify(_.actions.concepts))),!((m=(T=_?.actions)===null||T===void 0?void 0:T.connections)===null||m===void 0)&&m.length&&(a.connections=JSON.parse(JSON.stringify(_.actions.connections))),_.data}catch(_){console.log("CreateConnection error sw: ",_),(0,I.handleServiceWorkerException)(_)}let k=yield(0,I.MakeTheTypeConceptLocal)(i,999,999,999),b=v.userId;return yield r(v.id,C.id,k.id,1e3,i,b,a)})}},8064:(Q,E,y)=>{y.d(E,{$I:()=>I,Ay:()=>u});var N=y(9736),L=(y(9581),y(3518),y(949));y(1863);var n=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,[])).next())})};function u(w){return n(this,void 0,void 0,function*(){return yield N.v.GetConceptByCharacterAndTypeLocal(w,51)})}function I(w){return n(this,void 0,void 0,function*(){if(L.serviceWorker)try{return(yield(0,L.sendMessage)("GetConceptByCharacterAndCategoryLocal",{character:w})).data}catch(o){console.error("GetConceptByCharacterAndCategoryLocal error sw: ",o),(0,L.handleServiceWorkerException)(o)}let r=(0,L.CreateDefaultLConcept)();if(w=="the")return r.id=1,r.typeId=5,r.characterValue="the",r;let e=(0,L.SplitStrings)(w);if(e.length>1){let o=1,l=yield I(e[0]);l.id!=0&&(o=l.id),r=yield function(f,v){return n(this,void 0,void 0,function*(){return N.v.GetConceptByCharacterAndCategoryLocal(f,v)})}(w,o)}else e[0]==w&&(r=yield u(w));return r})}},1213:(Q,E,y)=>{y.d(E,{f:()=>w});var N=y(9736),L=y(7820),n=y(949),u=y(176),I=function(r,e,o,l){return new(o||(o=Promise))(function(f,v){function C(t){try{a(l.next(t))}catch(c){v(c)}}function i(t){try{a(l.throw(t))}catch(c){v(c)}}function a(t){var c;t.done?f(t.value):(c=t.value,c instanceof o?c:new o(function(T){T(c)})).then(C,i)}a((l=l.apply(r,[])).next())})};function w(r){return I(this,void 0,void 0,function*(){let e=performance.now();try{if(n.serviceWorker)try{return(yield(0,n.sendMessage)("GetTheConceptLocal",{id:r})).data}catch(l){console.error("GetTheConceptLocal error sw: ",l),(0,n.handleServiceWorkerException)(l)}let o=(0,n.CreateDefaultLConcept)();if(r<0){if(o=yield N.v.GetConcept(r),o.id==0){let l=yield L.G.getNodeFromTree(r);if(l?.value){let f=l.value;f&&(o=f)}}}else{let l=yield(0,n.GetTheConcept)(r);o=(0,u.F4)(l)}return o}catch(o){throw n.Logger.logError(e,"unknown","read","unknown",void 0,200,void 0,"GetTheConceptLocal",[r],"unknown",void 0),o}})}},9975:(Q,E,y)=>{y.d(E,{A:()=>I});var N=y(949),L=y(9736),n=y(3077),u=function(w,r,e,o){return new(e||(e=Promise))(function(l,f){function v(a){try{i(o.next(a))}catch(t){f(t)}}function C(a){try{i(o.throw(a))}catch(t){f(t)}}function i(a){var t;a.done?l(a.value):(t=a.value,t instanceof e?t:new e(function(c){c(t)})).then(v,C)}i((o=o.apply(w,r||[])).next())})};function I(w,r,e,o,l){return u(this,arguments,void 0,function*(f,v,C,i,a,t={concepts:[],connections:[]}){var c,T,m,k;if(N.serviceWorker)try{const R=yield(0,N.sendMessage)("MakeTheConceptLocal",{referent:f,typeCharacter:v,userId:C,categoryId:i,typeId:a,actions:t});return!((T=(c=R?.actions)===null||c===void 0?void 0:c.concepts)===null||T===void 0)&&T.length&&(t.concepts=JSON.parse(JSON.stringify(R.actions.concepts))),!((k=(m=R?.actions)===null||m===void 0?void 0:m.connections)===null||k===void 0)&&k.length&&(t.connections=JSON.parse(JSON.stringify(R.actions.connections))),R.data}catch(R){console.error("MakeTheConceptLocal error sw: ",R),(0,N.handleServiceWorkerException)(R)}let b=yield L.v.GetConceptByCharacterAndTypeLocal(f,a),_=b;return v=="the"&&(i=1),_.id==0&&(b=yield(0,n.A)(f,v,C,i,a,4,void 0,null,t),_=b),_})}},5868:(Q,E,y)=>{y.d(E,{k:()=>r});var N=y(3077),L=y(8357),n=y(9736),u=y(949),I=y(1863),w=function(e,o,l,f){return new(l||(l=Promise))(function(v,C){function i(c){try{t(f.next(c))}catch(T){C(T)}}function a(c){try{t(f.throw(c))}catch(T){C(T)}}function t(c){var T;c.done?v(c.value):(T=c.value,T instanceof l?T:new l(function(m){m(T)})).then(i,a)}t((f=f.apply(e,o||[])).next())})};function r(e,o){var l=arguments;return w(this,arguments,void 0,function*(f,v,C=!1,i,a,t=999,c=0,T={concepts:[],connections:[]}){var m,k,b,_;const R=u.Logger.logfunction("MakeTheInstanceConceptLocal",l)||{};if(u.serviceWorker){R.serviceWorker=!0;try{const G=yield(0,u.sendMessage)("MakeTheInstanceConceptLocal",{type:f,referent:v,composition:C,userId:i,accessId:a,sessionInformationId:t,referentId:c,actions:T});return!((k=(m=G?.actions)===null||m===void 0?void 0:m.concepts)===null||k===void 0)&&k.length&&(T.concepts=JSON.parse(JSON.stringify(G.actions.concepts))),!((_=(b=G?.actions)===null||b===void 0?void 0:b.connections)===null||_===void 0)&&_.length&&(T.connections=JSON.parse(JSON.stringify(G.actions.connections))),u.Logger.logUpdate(R),G.data}catch(G){console.error("MakeTheInstanceConceptLocal error sw: ",G),(0,I.ey)(R,"MakeTheInstanceConceptLocal",G),(0,u.handleServiceWorkerException)(G)}}try{let G,W,U=999,P=4,M=i,j=4,z="",ee=v.length;if(z=f.startsWith("the_")?f:"the_"+f,C)G=yield(0,L.$)(f,U,i,i,T),W=yield(0,N.A)(v,f,i,P,G.id,j,!0,c,T);else if(ee>255)G=yield(0,L.$)(z,U,M,i,T),W=yield(0,N.A)(v,z,i,P,G.id,j,void 0,void 0,T);else{G=yield(0,L.$)(z,U,M,i,T);let Z=yield n.v.GetConceptByCharacterAndTypeLocal(v,G.id);W=Z,Z.id==0&&Z.userId==0&&(W=yield(0,N.A)(v,z,i,P,G.id,j,void 0,void 0,T))}return W.type=G,u.LocalSyncData.AddConcept(W),T.concepts.push(W),u.Logger.logUpdate(R),W}catch(G){throw(0,I.ey)(R,"MakeTheInstanceConceptLocal",G),G}})}},8357:(Q,E,y)=>{y.d(E,{$:()=>e});var N=y(3077),L=y(8064),n=y(6467),u=y(9975),I=y(949),w=y(1863),r=function(o,l,f,v){return new(f||(f=Promise))(function(C,i){function a(T){try{c(v.next(T))}catch(m){i(m)}}function t(T){try{c(v.throw(T))}catch(m){i(m)}}function c(T){var m;T.done?C(T.value):(m=T.value,m instanceof f?m:new f(function(k){k(m)})).then(a,t)}c((v=v.apply(o,l||[])).next())})};function e(o,l,f,v){var C=arguments;return r(this,arguments,void 0,function*(i,a,t,c,T={concepts:[],connections:[]}){var m,k,b,_;const R=I.Logger.logfunction("MakeTheTypeConceptLocal",C)||{};if(I.serviceWorker){R.serviceWorker=!0;try{const W=yield(0,I.sendMessage)("MakeTheTypeConceptLocal",{typeString:i,sessionId:a,sessionUserId:t,userId:c,actions:T});return!((k=(m=W?.actions)===null||m===void 0?void 0:m.concepts)===null||k===void 0)&&k.length&&(T.concepts=JSON.parse(JSON.stringify(W.actions.concepts))),!((_=(b=W?.actions)===null||b===void 0?void 0:b.connections)===null||_===void 0)&&_.length&&(T.connections=JSON.parse(JSON.stringify(W.actions.connections))),I.Logger.logUpdate(R),W.data}catch(W){console.error("MakeTheTypeConceptLocal error sw: ",W),(0,w.ey)(R,"MakeTheTypeConceptLocal",W),(0,I.handleServiceWorkerException)(W)}}let G=yield(0,L.$I)(i);if(G&&(G.id==0||G.userId==0)){let W=(0,n.f)(i);if(W[0]==i)G=yield(0,u.A)(i,"the",c,1,51,T);else{let U=yield e(W[0],a,t,c,T),P=yield e(W[1],a,t,c,T);G=yield(0,N.A)(i,W[1],c,U.id,P.id,4,void 0,null,T)}}return I.Logger.logUpdate(R),G})}},3729:(Q,E,y)=>{y.d(E,{D:()=>f});var N=y(9934),L=y(4485),n=y(2),u=y(7876),I=y(4818),w=y(999),r=y(5868),e=y(949),o=y(176),l=function(v,C,i,a){return new(i||(i=Promise))(function(t,c){function T(b){try{k(a.next(b))}catch(_){c(_)}}function m(b){try{k(a.throw(b))}catch(_){c(_)}}function k(b){var _;b.done?t(b.value):(_=b.value,_ instanceof i?_:new i(function(R){R(_)})).then(T,m)}k((a=a.apply(v,C||[])).next())})};function f(v){return l(this,arguments,void 0,function*(C,i={concepts:[],connections:[]}){var a,t,c,T;if(performance.now(),e.serviceWorker)try{const ie=yield(0,e.sendMessage)("UpdateCompositionLocal",{patcherStructure:C,actions:i});return!((t=(a=ie?.actions)===null||a===void 0?void 0:a.concepts)===null||t===void 0)&&t.length&&(i.concepts=JSON.parse(JSON.stringify(ie.actions.concepts))),!((T=(c=ie?.actions)===null||c===void 0?void 0:c.connections)===null||T===void 0)&&T.length&&(i.connections=JSON.parse(JSON.stringify(ie.actions.connections))),ie.data}catch(ie){console.error("UpdateCompositionLocal error sw: ",ie),(0,e.handleServiceWorkerException)(ie)}const m=C.userId,k=C.sessionId,b=C.accessId;let _=[];const R=[];let G=(0,e.CreateDefaultLConcept)(),W=(0,e.CreateDefaultLConcept)();const U=[],P=C.compositionId,M=C.ofTheCompositionId;let j=[],z=yield(0,n.s)(P);for(let ie=0;ie<z.length;ie++)_.push((0,o.P6)(z[ie]));const ee=[],Z=[];let se=[];for(let ie=0;ie<_.length;ie++)(0,N.A)(Z,_[ie].ofTheConceptId),(0,N.A)(ee,_[ie].ofTheConceptId),(0,N.A)(ee,_[ie].toTheConceptId),se.push(_[ie].ofTheConceptId);for(let ie=0;ie<ee.length;ie++){const de=yield(0,u.A)(ee[ie]);P==ee[ie]&&(G=(0,o.F4)(de)),M==ee[ie]&&(W=(0,o.F4)(de)),R.push((0,o.F4)(de))}const $=C.patchObject;for(const ie in $){let de=(0,e.CreateDefaultLConcept)();const K=$[ie];let X=G;W.id>0&&(X=W),Array.isArray(K)||typeof K=="object"?(de=yield(0,r.k)(ie,"",!0,G.userId,4,999,void 0,i),yield(0,w.R)($[ie],de.id,de.userId,G.id,G.userId,4,999,void 0,i)):de=yield(0,r.k)(ie,K,!1,m,b,k,void 0,i);const te=(0,L.nm)(R,de);for(let Y=0;Y<te.length;Y++)if(te[Y].id>0){const H=(0,L.gt)(_,te[Y].id);j=j.concat(H),U.push(te[Y])}yield(0,e.CreateTheConnectionLocal)(X.id,de.id,G.id,2,void 0,void 0,i),R.push(de)}for(let ie=0;ie<j.length;ie++)yield(0,I.m)(j[ie].id);yield e.LocalSyncData.SyncDataOnline(void 0,i)})}},8407:(Q,E,y)=>{y.d(E,{A:()=>v});var N=y(9581),L=y(3518),n=y(1863),u=function(C,i,a,t){return new(a||(a=Promise))(function(c,T){function m(_){try{b(t.next(_))}catch(R){T(R)}}function k(_){try{b(t.throw(_))}catch(R){T(R)}}function b(_){var R;_.done?c(_.value):(R=_.value,R instanceof a?R:new a(function(G){G(R)})).then(m,k)}b((t=t.apply(C,[])).next())})},I=y(4402),w=y(949),r=function(C,i,a,t){return new(a||(a=Promise))(function(c,T){function m(_){try{b(t.next(_))}catch(R){T(R)}}function k(_){try{b(t.throw(_))}catch(R){T(R)}}function b(_){var R;_.done?c(_.value):(R=_.value,R instanceof a?R:new a(function(G){G(R)})).then(m,k)}b((t=t.apply(C,[])).next())})};class e{constructor(i,a,t,c,T,m,k,b,_,R){this.id=0,this.userId=i,this.data=a,this.securityId=t,this.securityUserId=c,this.accessId=T,this.accessUserId=m,this.sessionId=k,this.sessionUserId=b,this.entryTimestamp=_,this.isNew=R}}var o=y(7282),l=y(2212),f=function(C,i,a,t){return new(a||(a=Promise))(function(c,T){function m(_){try{b(t.next(_))}catch(R){T(R)}}function k(_){try{b(t.throw(_))}catch(R){T(R)}}function b(_){var R;_.done?c(_.value):(R=_.value,R instanceof a?R:new a(function(G){G(R)})).then(m,k)}b((t=t.apply(C,i||[])).next())})};function v(C,i){var a=arguments;return f(this,arguments,void 0,function*(t,c,T=!1,m,k=4,b=999,_=0){const R=w.Logger.logfunction("MakeTheInstanceConcept",a)||{};if(w.serviceWorker){R.serviceWorker=!0;try{const se=yield(0,w.sendMessage)("MakeTheInstanceConcept",{type:t,referent:c,composition:T,userId:m,passedAccessId:k,passedSessionId:b,referentId:_});return w.Logger.logUpdate(R),se.data}catch(se){console.error("MakeTheInstanceConcept sw error: ",se),(0,n.ey)(R,"MakeTheInstanceConcept",se),(0,w.handleServiceWorkerException)(se)}}let G,W=b,U=m,P=m,M=k,j=m,z="",ee=c.length,Z=(0,o.o)();if(z=t.startsWith("the_")?t:"the_"+t,T)Z=yield(0,w.MakeTheTypeConceptApi)(t,m),G=yield(0,l.Ay)(c,m,4,Z.id,_,M,t);else if(ee>255)Z=yield(0,w.MakeTheTypeConceptApi)(z,m),G=yield(0,l.Ay)(c,m,4,Z.id,_,M,z),function(se){u(this,void 0,void 0,function*(){try{var $=(0,L.Xr)();const ie=yield fetch(N.B.CreateTheTextDataUrl(),{method:"POST",headers:$,body:JSON.stringify(se)});if(!ie.ok)throw(0,n.ry)(ie),new Error(`Error! status: ${ie.status}`);return yield ie.json()}catch(ie){throw ie instanceof Error?console.log("Create the text error message: ",ie.message):console.log("Create the text unexpected error: ",ie),ie}})}(new e(m,c,999,U,M,j,W,P,Date.now().toString(),!0));else{Z=yield(0,w.MakeTheTypeConceptApi)(z,m);let se=yield(0,I.A)(c,Z.id);G=se,se.id==0&&se.userId==0&&(G=yield(0,l.N)(c,m,4,Z.id,12,M,z),function($,ie,de,K){var X=arguments;r(this,void 0,void 0,function*(){const te=w.Logger.logfunction("MakeTheNameInBackend",X);try{let Y={newConceptId:$,referent:ie,typeId:de,typeUserId:K},H=(0,L.Xr)(),re=JSON.stringify(Y);const ae=yield fetch(N.B.MakeTheNameInBackendUrl(),{method:"POST",headers:H,body:re});w.Logger.logUpdate(te),ae.ok||(0,n.ry)(ae)}catch(Y){Y instanceof Error?console.log("make the name in backend error message: ",Y.message):console.log("make the name in backend unexpected error: ",Y),(0,n.Mb)(Y,N.B.MakeTheNameInBackendUrl()),(0,n.ey)(te,"MakeTheNameInBackend",Y)}})}(G.id,`${c}`,Z.id,m))}return G.type=Z,w.Logger.logUpdate(R),G})}},5312:(Q,E,y)=>{y.d(E,{NK:()=>l,Ve:()=>f,cf:()=>e,vw:()=>v,y8:()=>o});var N=y(2832),L=y(3130),n=y(949),u=y(1863),I=y(6687),w=y(1320),r=function(C,i,a,t){return new(a||(a=Promise))(function(c,T){function m(_){try{b(t.next(_))}catch(R){T(R)}}function k(_){try{b(t.throw(_))}catch(R){T(R)}}function b(_){var R;_.done?c(_.value):(R=_.value,R instanceof a?R:new a(function(G){G(R)})).then(m,k)}b((t=t.apply(C,i||[])).next())})};function e(C){var i=arguments;return r(this,arguments,void 0,function*(a,t="",c=null,T=L.y0){var m,k,b,_,R,G,W,U;const P=n.Logger.logfunction("SearchLinkMultipleAll",i)||{};try{try{if(n.serviceWorker){P.serviceWorker=!0;const de=yield(0,n.sendMessage)("SearchLinkMultipleAll",{searchQuery:a,token:t,caller:c,format:T});return n.Logger.logUpdate(P),de.data}}catch(de){console.error("SearchLinkMultipleAll error sw: ",de),(0,u.ey)(P,"SearchLinkMultipleAll",de),(0,n.handleServiceWorkerException)(de)}let M=[],j=[],z=[],ee=[],Z=a[0].composition,se={},$={};c?.isDataLoaded?(se.compositionIds=(m=c.conceptIds)===null||m===void 0?void 0:m.slice(),se.internalConnections=(k=c.internalConnections)===null||k===void 0?void 0:k.slice(),se.linkers=(b=c.linkers)===null||b===void 0?void 0:b.slice(),se.reverse=(_=c.reverse)===null||_===void 0?void 0:_.slice(),$=se,M=$.compositionIds,z=$.internalConnections,j=$.linkers,ee=$.reverse):(se=yield(0,N.j)(a,t),c&&(c.conceptIds=(R=se.compositionIds)===null||R===void 0?void 0:R.slice(),c.internalConnections=(G=se.internalConnections)===null||G===void 0?void 0:G.slice(),c.linkers=(W=se.linkers)===null||W===void 0?void 0:W.slice(),c.reverse=(U=se.reverse)===null||U===void 0?void 0:U.slice(),c.isDataLoaded=!0),$=se,M=$.compositionIds,z=$.internalConnections,j=$.linkers,ee=$.reverse);let ie=yield function(de,K,X,te,Y,H){return r(this,arguments,void 0,function*(re,ae,le,ce,we,Ie,ve=L.y0){try{let ke,Le,fe=yield(0,I.QL)(re);return ve==L.ZJ?(ke=yield(0,I.MT)(ae,le),Le=yield v(re,ke,we,ce)):ve==L.yv?(ke=yield(0,I.D)(ae,le),Le=yield v(re,ke,we,ce)):ve==100?(ke=yield(0,I.nr)(ae,le),Le=yield o(fe,ke,we,ce)):ve==L.SL?Le=yield(0,w._W)(re,ae,le,Ie.ofCompositions,ce):(ke=yield(0,I.rv)(ae,le),Le=yield o(fe,ke,we,ce)),Le}catch(ke){return void console.log("Error Occured in build layer",ke)}})}(j,M,z,ee,Z,a[0],T);return n.Logger.logUpdate(P),ie}catch(M){throw console.log("this is the error in the search link multiple",M),(0,u.ey)(P,"SearchLinkMultipleAll",M),M}})}function o(C,i,a){return r(this,arguments,void 0,function*(t,c,T,m=[]){new Date().getTime();let k={},b=[];for(let _=0;_<t.length;_++)b.push(t[_].toTheConceptId),b.push(t[_].ofTheConceptId),b.push(t[_].typeId);t.sort(function(_,R){return R.id-_.id});for(let _=0;_<t.length;_++){let R=!1;if(m.includes(t[_].id)&&(R=!0),R==1){if(c[t[_].ofTheConceptId]&&c[t[_].toTheConceptId]){let G=c[t[_].toTheConceptId],W=yield(0,n.GetTheConcept)(t[_].typeId),U=G?.data,P=Object.keys(U)[0];try{let M=W.characterValue+"_reverse";typeof U=="string"&&(U={}),Array.isArray(U[P][M])||(typeof U[P]=="string"&&(U[P]={}),U[P][M]=[]),U[P][M].push(c[t[_].ofTheConceptId])}catch(M){console.log("this is error",M)}}}else if(c[t[_].ofTheConceptId]&&c[t[_].toTheConceptId]){let G=c[t[_].ofTheConceptId],W=yield(0,n.GetTheConcept)(t[_].typeId),U=G?.data,P=Object.keys(U)[0];try{typeof U=="string"&&(U={}),Array.isArray(U[P][W.characterValue])||(typeof U[P]=="string"&&(U[P]={}),U[P][W.characterValue]=[]),U[P][W.characterValue].push(c[t[_].toTheConceptId])}catch(M){console.log("this is error",M)}}}return k=c[T],k})}function l(C,i,a){return r(this,arguments,void 0,function*(t,c,T,m=[]){let k=[],b=[];for(let _=0;_<t.length;_++)b.push(t[_].toTheConceptId),b.push(t[_].ofTheConceptId),b.push(t[_].typeId);t.sort(function(_,R){return R.id-_.id});for(let _=0;_<t.length;_++){let R=!1;if(m.includes(t[_].id)&&(R=!0),R==1){if(c[t[_].ofTheConceptId]&&c[t[_].toTheConceptId]){let G=c[t[_].toTheConceptId],W=yield(0,n.GetTheConcept)(t[_].typeId),U=Object.keys(G)[0];try{let P=W.characterValue+"_reverse";typeof G=="string"&&(G={}),Array.isArray(G[U][P])||(typeof G[U]=="string"&&(G[U]={}),G[U][P]=[]),G[U][P].push(c[t[_].ofTheConceptId])}catch(P){console.log("this is error",P)}}}else if(c[t[_].ofTheConceptId]&&c[t[_].toTheConceptId]){let G=c[t[_].ofTheConceptId],W=yield(0,n.GetTheConcept)(t[_].typeId),U=Object.keys(G)[0];try{typeof G=="string"&&(G={}),Array.isArray(G[U][W.characterValue])||(typeof G[U]=="string"&&(G[U]={}),G[U][W.characterValue]=[]),G[U][W.characterValue].push(c[t[_].toTheConceptId])}catch(P){console.log("this is error",P)}}}for(let _=0;_<T.length;_++){let R=c[T[_]];R&&k.push(R)}return k})}function f(C,i,a,t){return r(this,arguments,void 0,function*(c,T,m,k,b=[]){new Date().getTime();let _=[],R=[];for(let G=0;G<c.length;G++)R.push(c[G].toTheConceptId),R.push(c[G].ofTheConceptId),R.push(c[G].typeId);c.sort(function(G,W){return W.id-G.id});for(let G=0;G<c.length;G++){let W=!1;if(b.includes(c[G].id)&&(W=!0),W==1){if(T[c[G].ofTheConceptId]&&T[c[G].toTheConceptId]){let U=T[c[G].toTheConceptId],P=yield(0,n.GetTheConcept)(c[G].typeId),M=U?.data,j=Object.keys(M)[0];try{let z=P.characterValue+"_reverse";typeof M=="string"&&(M={}),Array.isArray(M[j][z])||(typeof M[j]=="string"&&(M[j]={}),M[j][z]=[]),M[j][z].push(T[c[G].ofTheConceptId])}catch(z){console.log("this is error",z)}}}else if(T[c[G].ofTheConceptId]&&T[c[G].toTheConceptId]){let U=T[c[G].ofTheConceptId],P=yield(0,n.GetTheConcept)(c[G].typeId),M=U?.data,j=Object.keys(M)[0];try{typeof M=="string"&&(M={}),Array.isArray(M[j][P.characterValue])||(typeof M[j]=="string"&&(M[j]={}),M[j][P.characterValue]=[]),M[j][P.characterValue].push(T[c[G].toTheConceptId])}catch(z){console.log("this is error",z)}}}for(let G=0;G<k.length;G++){let W=T[k[G]];W&&_.push(W)}return _})}function v(C,i,a){return r(this,arguments,void 0,function*(t,c,T,m=[]){let k={},b=yield(0,n.GetConnectionBulk)(t),_=[];for(let R=0;R<b.length;R++)_.push(b[R].toTheConceptId),_.push(b[R].ofTheConceptId),_.push(b[R].typeId);yield(0,n.GetConceptBulk)(_),b.sort(function(R,G){return G.id-R.id});for(let R=0;R<b.length;R++){let G=!1;if(m.includes(b[R].id)&&(G=!0),G==1){if(c[b[R].ofTheConceptId]&&c[b[R].toTheConceptId]){let W=c[b[R].toTheConceptId],U=yield(0,n.GetTheConcept)(b[R].typeId),P=W,M=Object.keys(P)[0];try{let j=U.characterValue+"_reverse";typeof P=="string"&&(P={}),Array.isArray(P[M][j])||(typeof P[M]=="string"&&(P[M]={}),P[M][j]=[]),P[M][j].push(c[b[R].ofTheConceptId])}catch(j){console.log("this is error",j)}}}else if(c[b[R].ofTheConceptId]&&c[b[R].toTheConceptId]){let W=c[b[R].ofTheConceptId],U=yield(0,n.GetTheConcept)(b[R].typeId),P=W,M=Object.keys(P)[0];try{typeof P=="string"&&(P={}),Array.isArray(P[M][U.characterValue])||(typeof P[M]=="string"&&(P[M]={}),P[M][U.characterValue]=[]),P[M][U.characterValue].push(c[b[R].toTheConceptId])}catch(j){console.log("this is error",j)}}}return k=c[T],k})}},1320:(Q,E,y)=>{y.d(E,{zl:()=>a,b6:()=>T,e$:()=>k,y6:()=>m,rq:()=>b,yV:()=>t,_W:()=>c});var N=y(949),L=y(6687);function n(_){return _.startsWith("the_")?_.slice(4):_}var u=function(_,R,G,W){return new(G||(G=Promise))(function(U,P){function M(ee){try{z(W.next(ee))}catch(Z){P(Z)}}function j(ee){try{z(W.throw(ee))}catch(Z){P(Z)}}function z(ee){var Z;ee.done?U(ee.value):(Z=ee.value,Z instanceof G?Z:new G(function(se){se(Z)})).then(M,j)}z((W=W.apply(_,R||[])).next())})};function I(_,R,G){return u(this,void 0,void 0,function*(){var W,U,P,M,j,z,ee,Z;let se=[];for(let $=0;$<_.length;$++)se.push(_[$].toTheConceptId),se.push(_[$].ofTheConceptId),se.push(_[$].typeId);for(let $=0;$<_.length;$++){let ie=!1;G.includes(_[$].id)&&(ie=!0);let de=yield(0,N.GetTheConcept)(_[$].ofTheConceptId),K=yield(0,N.GetTheConcept)(_[$].toTheConceptId);if(ie==1&&de.id!=0&&K.id!=0){let X,te=(U=(W=K.type)===null||W===void 0?void 0:W.characterValue)!==null&&U!==void 0?U:"self";_[$].toTheConceptId in R?X=R[_[$].toTheConceptId]:(X={},X[te]={},R[_[$].toTheConceptId]=X);let Y=yield(0,N.GetTheConcept)(_[$].typeId);try{let H=(M=(P=de?.type)===null||P===void 0?void 0:P.characterValue)!==null&&M!==void 0?M:"none",re=de.characterValue;Y.characterValue,Y.characterValue.includes("_s_")&&(de.id in R||(R[de.id]={}),R[de.id][H]=re),R[K.id]={}}catch(H){console.log("this is error",H)}}if(de.id!=0&&K.id!=0){let X,te=(z=(j=de.type)===null||j===void 0?void 0:j.characterValue)!==null&&z!==void 0?z:"self";_[$].ofTheConceptId in R?X=R[_[$].ofTheConceptId]:(X={},X[te]={},R[_[$].ofTheConceptId]=X);let Y=yield(0,N.GetTheConcept)(_[$].typeId);try{let H=(Z=(ee=K?.type)===null||ee===void 0?void 0:ee.characterValue)!==null&&Z!==void 0?Z:"none",re=K.characterValue;Y.characterValue.includes("_s_")&&(K.id in R||(R[K.id]={}),R[K.id][H]=re),R[de.id]={}}catch(H){console.log("this is error",H)}}}return R})}var w=y(5312),r=y(7876),e=function(_,R,G,W){return new(G||(G=Promise))(function(U,P){function M(ee){try{z(W.next(ee))}catch(Z){P(Z)}}function j(ee){try{z(W.throw(ee))}catch(Z){P(Z)}}function z(ee){var Z;ee.done?U(ee.value):(Z=ee.value,Z instanceof G?Z:new G(function(se){se(Z)})).then(M,j)}z((W=W.apply(_,R||[])).next())})};function o(_,R,G){if(_ in R){let W=R[_];W&&(G[W.connectionType+"_count"]=W.count)}}var l=function(_,R,G,W){return new(G||(G=Promise))(function(U,P){function M(ee){try{z(W.next(ee))}catch(Z){P(Z)}}function j(ee){try{z(W.throw(ee))}catch(Z){P(Z)}}function z(ee){var Z;ee.done?U(ee.value):(Z=ee.value,Z instanceof G?Z:new G(function(se){se(Z)})).then(M,j)}z((W=W.apply(_,R||[])).next())})},f=y(4698),v=y(6915),C=function(_,R,G,W){return new(G||(G=Promise))(function(U,P){function M(ee){try{z(W.next(ee))}catch(Z){P(Z)}}function j(ee){try{z(W.throw(ee))}catch(Z){P(Z)}}function z(ee){var Z;ee.done?U(ee.value):(Z=ee.value,Z instanceof G?Z:new G(function(se){se(Z)})).then(M,j)}z((W=W.apply(_,R||[])).next())})},i=function(_,R,G,W){return new(G||(G=Promise))(function(U,P){function M(ee){try{z(W.next(ee))}catch(Z){P(Z)}}function j(ee){try{z(W.throw(ee))}catch(Z){P(Z)}}function z(ee){var Z;ee.done?U(ee.value):(Z=ee.value,Z instanceof G?Z:new G(function(se){se(Z)})).then(M,j)}z((W=W.apply(_,R||[])).next())})};function a(_,R){return i(this,arguments,void 0,function*(G,W,U=""){let P=yield(0,N.SearchWithTypeAndLinkerApi)(G,W,U),M=P.compositionIds,j=P.internalConnections,z=P.linkers,ee=P.reverse,Z=P.mainCompositionIds,se=yield(0,L.QL)(z),$=yield(0,L.MT)(M,j);return yield(0,w.NK)(se,$,Z,ee)})}function t(_,R,G,W,U){return i(this,void 0,void 0,function*(){let P=yield(0,L.QL)(_),M=yield(0,L.rv)(R,G);return yield(0,w.Ve)(P,M,R,W,U)})}function c(_,R,G,W,U){return i(this,void 0,void 0,function*(){let P=yield(0,L.QL)(_),M=yield(0,L.D)(R,G);return yield(0,w.NK)(P,M,W,U)})}function T(_,R,G,W,U){return i(this,void 0,void 0,function*(){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnections",{linkers:_,conceptIds:R,mainCompositionIds:G,reverse:W,countInfos:U})).data}catch(z){console.error("formatConnections error sw: ",z),(0,N.handleServiceWorkerException)(z)}let P=yield(0,L.QL)(_);P=(0,v.X)(P);let M=[];return M=yield I(P,M,W),M=yield function(z,ee,Z){return u(this,void 0,void 0,function*(){var se,$,ie,de,K,X,te,Y;let H=[];for(let re=0;re<z.length;re++)H.push(z[re].toTheConceptId),H.push(z[re].ofTheConceptId),H.push(z[re].typeId);z.sort(function(re,ae){return ae.id-re.id});for(let re=0;re<z.length;re++){let ae=!1;Z.includes(z[re].id)&&(ae=!0);let le=yield(0,N.GetTheConcept)(z[re].ofTheConceptId),ce=yield(0,N.GetTheConcept)(z[re].toTheConceptId);if(ae==1&&le.id!=0&&ce.id!=0){let we,Ie=($=(se=ce.type)===null||se===void 0?void 0:se.characterValue)!==null&&$!==void 0?$:"self";z[re].toTheConceptId in ee?(we=ee[z[re].toTheConceptId],Ie in we||(we[Ie]={})):(we={},we[Ie]={},ee[z[re].toTheConceptId]=we);let ve=yield(0,N.GetTheConcept)(z[re].typeId);try{let ke=(de=(ie=le?.type)===null||ie===void 0?void 0:ie.characterValue)!==null&&de!==void 0?de:"none",Le=le.characterValue,fe=ve.characterValue;fe==""&&(fe=ke,fe=n(fe));let _e={[ke]:Le},ge=fe+"_reverse";ve.characterValue.includes("_s_")||(typeof we[Ie]=="string"&&(we[Ie]={}),we[Ie][ge]=_e)}catch(ke){console.log("this is error",ke)}}if(le.id!=0&&ce.id!=0){let we,Ie=(X=(K=le.type)===null||K===void 0?void 0:K.characterValue)!==null&&X!==void 0?X:"self";z[re].ofTheConceptId in ee?(we=ee[z[re].ofTheConceptId],Ie in we||(we[Ie]={})):(we={},we[Ie]={},ee[z[re].ofTheConceptId]=we);let ve=yield(0,N.GetTheConcept)(z[re].typeId);try{let ke=(Y=(te=ce?.type)===null||te===void 0?void 0:te.characterValue)!==null&&Y!==void 0?Y:"none",Le=ce.characterValue,fe=ve.characterValue,_e=(ve.characterValue,!1);fe==""&&(fe=ke,fe=n(fe),_e=!0);let ge={[ke]:Le};isNaN(Number(fe))?ve.characterValue.includes("_s_")||(typeof we[Ie]=="string"&&(we[Ie]={}),we[Ie][fe]=_e?Le:ge):(Array.isArray(we[Ie])||(we[Ie]=[]),we[Ie].push(Le))}catch(ke){console.log("this is error",ke)}}}return ee})}(P,M,W),yield function(z,ee,Z,se){return u(this,arguments,void 0,function*($,ie,de,K,X=[]){var te,Y,H,re,ae,le;let ce=[],we=[];for(let Ie=0;Ie<$.length;Ie++)we.push($[Ie].toTheConceptId),we.push($[Ie].ofTheConceptId),we.push($[Ie].typeId);$.sort(function(Ie,ve){return ve.id-Ie.id});for(let Ie=0;Ie<$.length;Ie++){let ve=!1;X.includes($[Ie].id)&&(ve=!0);let ke=yield(0,N.GetTheConcept)($[Ie].ofTheConceptId),Le=yield(0,N.GetTheConcept)($[Ie].toTheConceptId);if(ve==1&&ke.id!=0&&Le.id!=0&&Le.id in ie){let fe,_e=(Y=(te=Le.type)===null||te===void 0?void 0:te.characterValue)!==null&&Y!==void 0?Y:"self";$[Ie].toTheConceptId in ie?fe=ie[$[Ie].toTheConceptId]:(fe={},fe[_e]={},ie[$[Ie].toTheConceptId]=fe);let ge=yield(0,N.GetTheConcept)($[Ie].typeId);try{let Ce=ge.characterValue+"_reverse",Te=ie[$[Ie].ofTheConceptId];Te&&(Array.isArray(fe[_e][Ce])?fe[_e][Ce].push(Te):ge.characterValue.includes("_s_")?(fe[_e][Ce]=[],fe[_e][Ce].push(Te)):fe[_e][Ce]=Te)}catch(Ce){console.log("this is error",Ce)}}if(ke.id!=0&&Le.id!=0&&ke.id in ie){let fe,_e=(re=(H=ke.type)===null||H===void 0?void 0:H.characterValue)!==null&&re!==void 0?re:"self";$[Ie].ofTheConceptId in ie?(fe=ie[$[Ie].ofTheConceptId],typeof fe[_e]=="string"&&(fe[_e]={})):(fe={},fe[_e]={},ie[$[Ie].ofTheConceptId]=fe);let ge=!1,Ce=(yield(0,N.GetTheConcept)($[Ie].typeId)).characterValue;Ce==""&&(Ce=Le.characterValue,ge=!0),Ce==""&&(Ce=(le=(ae=Le?.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&le!==void 0?le:"");try{let Te=ie[$[Ie].toTheConceptId];Te&&(Array.isArray(fe[_e])?ge?fe[_e].push(Te[Ce]):fe[_e].push(Te):Array.isArray(fe[_e][Ce])?fe[_e][Ce].push(Te):Ce.includes("_s_")?(fe[_e][Ce]=[],ge?fe[_e][Ce].push(Te[Ce]):fe[_e][Ce].push(Te)):fe[_e][Ce]=ge?Te[Ce]:Te)}catch(Te){console.log("this is error",Te)}}}for(let Ie=0;Ie<de.length;Ie++){let ve=ie[de[Ie]];ve?(ve.id=de[Ie],ce.push(ve)):(yield N.ConceptsData.GetConcept(de[Ie])).id!=0&&(ve={},ve.id=de[Ie],ce.push(ve))}return ce})}(P,M,G,[],W)})}function m(_,R,G,W,U){return i(this,arguments,void 0,function*(P,M,j,z,ee,Z="DESC"){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnectionsJustId",{linkers:P,conceptIds:M,mainCompositionIds:j,reverse:z,countInfos:ee,order:Z})).data}catch(K){console.error("formatConnectionsJustId error sw: ",K),(0,N.handleServiceWorkerException)(K)}let se=yield(0,L.QL)(P),$=yield(0,f.V)(ee);se=(0,v.X)(se,Z);let ie=[];return ie=yield I(se,ie,z),ie=yield function(K,X){return e(this,arguments,void 0,function*(te,Y,H=[]){var re,ae,le,ce,we,Ie,ve,ke;let Le=[];for(let fe=0;fe<te.length;fe++)Le.push(te[fe].toTheConceptId),Le.push(te[fe].ofTheConceptId),Le.push(te[fe].typeId);for(let fe=0;fe<te.length;fe++){let _e=!1,ge=yield(0,r.A)(te[fe].ofTheConceptId),Ce=yield(0,r.A)(te[fe].toTheConceptId);if(H.includes(te[fe].id)&&(_e=!0),_e==1&&ge.id!=0&&Ce.id!=0){let Te,Ee=yield(0,r.A)(te[fe].typeId),pe=(ae=(re=Ce.type)===null||re===void 0?void 0:re.characterValue)!==null&&ae!==void 0?ae:"self";te[fe].toTheConceptId in Y?(Te=Y[te[fe].toTheConceptId],pe in Te||(Te[pe]={})):(Te={},Te[pe]={},Y[te[fe].toTheConceptId]=Te);try{let Ne=(ce=(le=ge?.type)===null||le===void 0?void 0:le.characterValue)!==null&&ce!==void 0?ce:"none",Be=ge.characterValue,be=Ee.characterValue;be==""&&(be=Ne,be=n(be));let xe={id:ge.id,[Ne]:Be,created_on:te[fe].entryTimeStamp},Oe=be+"_reverse";Oe.includes("_s_")||(typeof Te[pe]=="string"&&(Te[pe]={}),Te[pe][Oe]=xe)}catch(Ne){console.log("this is error",Ne)}}if(ge.id!=0&&Ce.id!=0){let Te,Ee=yield(0,r.A)(te[fe].typeId),pe=(Ie=(we=ge.type)===null||we===void 0?void 0:we.characterValue)!==null&&Ie!==void 0?Ie:"self";te[fe].ofTheConceptId in Y?(Te=Y[te[fe].ofTheConceptId],pe in Te||(Te[pe]={})):(Te={},Te[pe]={},Y[te[fe].ofTheConceptId]=Te);try{let Ne=(ke=(ve=Ce?.type)===null||ve===void 0?void 0:ve.characterValue)!==null&&ke!==void 0?ke:"none",Be=Ce.characterValue,be=Ee.characterValue,xe=!1;be==""&&(be=Ne,be=n(be),xe=!0);let Oe={};Oe[Ne]={id:Ce.id,data:Be,created_on:te[fe].entryTimeStamp},isNaN(Number(be))?be.includes("_s_")||(typeof Te[pe]=="string"&&(Te[pe]={}),Te[pe][be]=xe?Oe[Ne]:Oe):(Array.isArray(Te[pe])||(Te[pe]=[]),Te[pe].push(Oe[Ne]))}catch(Ne){console.log("this is error",Ne)}}}return Y})}(se,ie,z),yield function(K,X,te){return e(this,arguments,void 0,function*(Y,H,re,ae=[],le){var ce,we,Ie,ve,ke,Le,fe;new Date().getTime();let _e=[],ge=[];for(let Ce=0;Ce<Y.length;Ce++)ge.push(Y[Ce].toTheConceptId),ge.push(Y[Ce].ofTheConceptId),ge.push(Y[Ce].typeId);for(let Ce=0;Ce<Y.length;Ce++){let Te=!1,Ee=yield(0,r.A)(Y[Ce].ofTheConceptId),pe=yield(0,r.A)(Y[Ce].toTheConceptId);if(ae.includes(Y[Ce].id)&&(Te=!0),Te==1&&Ee.id!=0&&pe.id!=0&&pe.id in H){let Ne,Be=yield(0,r.A)(Y[Ce].typeId),be=(we=(ce=pe.type)===null||ce===void 0?void 0:ce.characterValue)!==null&&we!==void 0?we:"self";Y[Ce].toTheConceptId in H,Y[Ce].toTheConceptId in H?(Ne=H[Y[Ce].toTheConceptId],typeof Ne[be]=="string"&&(Ne[be]={})):(Ne={},Ne[be]={},H[Y[Ce].toTheConceptId]=Ne);try{if(H[Y[Ce].ofTheConceptId]){let xe=H[Y[Ce].ofTheConceptId];xe&&(xe.id=Ee.id,xe.created_on=Ee.entryTimeStamp);let Oe=Be.characterValue+"_reverse";Array.isArray(Ne[be][Oe])?Ne[be][Oe].push(xe):Oe.includes("_s_")?(Ne[be][Oe]=[],Ne[be][Oe].push(xe)):Ne[be][Oe]=xe}}catch(xe){console.log("this is error",xe)}}if(Ee.id!=0&&pe.id!=0&&Ee.id in H){let Ne,Be=yield(0,r.A)(Y[Ce].typeId),be=(ve=(Ie=Ee.type)===null||Ie===void 0?void 0:Ie.characterValue)!==null&&ve!==void 0?ve:"self";Y[Ce].toTheConceptId in H,Y[Ce].ofTheConceptId in H?(Ne=H[Y[Ce].ofTheConceptId],typeof Ne[be]=="string"&&(Ne[be]={})):(Ne={},Ne[be]={},H[Y[Ce].ofTheConceptId]=Ne),o(Ee.id,le,Ne);let xe=!1,Oe=Be.characterValue;Oe==""&&(Oe=pe.characterValue,xe=!0),Oe==""&&(Oe=((ke=pe?.type)===null||ke===void 0?void 0:ke.characterValue)||"");try{let Fe=(fe=(Le=pe?.type)===null||Le===void 0?void 0:Le.characterValue)!==null&&fe!==void 0?fe:"none",je=H[Y[Ce].toTheConceptId];if(je){let $e={};$e[Fe]={data:je[Fe],id:pe.id,created_on:Y[Ce].entryTimeStamp},Array.isArray(Ne[be])?xe?Ne[be].push(je[Oe]):Ne[be].push(je):Array.isArray(Ne[be][Oe])?Ne[be][Oe].push($e):Oe.includes("_s_")?(Ne[be][Oe]=[],xe?Ne[be][Oe].push($e[Fe]):Ne[be][Oe].push($e)):Ne[be][Oe]=xe?$e[Fe]:$e,o(pe.id,le,$e)}}catch(Fe){console.log("this is error",Fe)}}}for(let Ce=0;Ce<re.length;Ce++){let Te={};Te=H[re[Ce]],Te?Te.id=re[Ce]:(yield N.ConceptsData.GetConcept(re[Ce])).id!=0&&(Te={},Te.id=re[Ce]),_e.push(Te)}return _e})}(se,ie,j,z,$)})}function k(_,R,G,W,U){return i(this,arguments,void 0,function*(P,M,j,z,ee,Z="DESC"){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnectionsDataId",{linkers:P,conceptIds:M,mainCompositionIds:j,reverse:z,countInfos:ee,order:Z})).data}catch(K){console.error("GetConnectionDataPrefetch error sw: ",K),(0,N.handleServiceWorkerException)(K)}let se=yield(0,L.QL)(P),$=yield(0,f.V)(ee);se=(0,v.X)(se,Z);let ie=[];return ie=yield function(K,X){var te=arguments;return l(this,arguments,void 0,function*(Y,H,re=[]){var ae,le,ce,we,Ie,ve,ke,Le;const fe=N.Logger.logfunction("FormatFunctionData",te);let _e=[];for(let ge=0;ge<Y.length;ge++)_e.push(Y[ge].toTheConceptId),_e.push(Y[ge].ofTheConceptId),_e.push(Y[ge].typeId);for(let ge=0;ge<Y.length;ge++){let Ce=!1,Te=yield(0,N.GetTheConcept)(Y[ge].ofTheConceptId),Ee=yield(0,N.GetTheConcept)(Y[ge].toTheConceptId);if(re.includes(Y[ge].id)&&(Ce=!0),Ce==1&&Te.id!=0&&Ee.id!=0){let pe,Ne=yield(0,N.GetTheConcept)(Y[ge].typeId),Be=(le=(ae=Ee.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&le!==void 0?le:"self";Y[ge].toTheConceptId in H?pe=H[Y[ge].toTheConceptId]:(pe={},pe[Be]={},H[Y[ge].toTheConceptId]=pe);try{let be=(we=(ce=Te?.type)===null||ce===void 0?void 0:ce.characterValue)!==null&&we!==void 0?we:"none",xe=Te.characterValue;(Ne.characterValue+"_reverse").includes("_s_")&&(Te.id in H||(H[Te.id]={}),H[Te.id][be]=xe),H[Ee.id]={}}catch(be){console.log("this is error",be)}}if(Te.id!=0&&Ee.id!=0){let pe,Ne=yield(0,N.GetTheConcept)(Y[ge].typeId),Be=(ve=(Ie=Te.type)===null||Ie===void 0?void 0:Ie.characterValue)!==null&&ve!==void 0?ve:"self";Y[ge].ofTheConceptId in H?pe=H[Y[ge].ofTheConceptId]:(pe={},pe[Be]={},H[Y[ge].ofTheConceptId]=pe);try{let be=(Le=(ke=Ee?.type)===null||ke===void 0?void 0:ke.characterValue)!==null&&Le!==void 0?Le:"none",xe=Ee.characterValue;Ne.characterValue.includes("_s_")&&(Ee.id in H||(H[Ee.id]={}),H[Ee.id][be]=xe),H[Te.id]={}}catch(be){console.log("this is error",be)}}}return N.Logger.logUpdate(fe),H})}(se,ie,z),ie=yield function(K,X){var te=arguments;return l(this,arguments,void 0,function*(Y,H,re=[]){var ae,le,ce,we,Ie,ve,ke,Le;const fe=N.Logger.logfunction("FormatFunctionDataForData",te);let _e=[];for(let ge=0;ge<Y.length;ge++)_e.push(Y[ge].toTheConceptId),_e.push(Y[ge].ofTheConceptId),_e.push(Y[ge].typeId);for(let ge=0;ge<Y.length;ge++){let Ce=!1,Te=yield(0,N.GetTheConcept)(Y[ge].ofTheConceptId),Ee=yield(0,N.GetTheConcept)(Y[ge].toTheConceptId);if(re.includes(Y[ge].id)&&(Ce=!0),Ce==1&&Te.id!=0&&Ee.id!=0){let pe,Ne=yield(0,N.GetTheConcept)(Y[ge].typeId),Be=(le=(ae=Ee.type)===null||ae===void 0?void 0:ae.characterValue)!==null&&le!==void 0?le:"self";Y[ge].toTheConceptId in H?(pe=H[Y[ge].toTheConceptId],Be in pe||(pe[Be]={})):(pe={},pe[Be]={},H[Y[ge].toTheConceptId]=pe);try{let be=(we=(ce=Te?.type)===null||ce===void 0?void 0:ce.characterValue)!==null&&we!==void 0?we:"none",xe=Te.characterValue,Oe=Ne.characterValue;Oe==""&&(Oe=be,Oe=n(Oe));let Fe={id:Te.id,data:{[be]:xe}},je=Oe+"_reverse";je.includes("_s_")||(typeof pe[Be]=="string"&&(pe[Be]={}),pe[Be][je]=Fe)}catch(be){console.log("this is error",be)}}if(Te.id!=0&&Ee.id!=0){let pe,Ne=yield(0,N.GetTheConcept)(Y[ge].typeId),Be=(ve=(Ie=Te.type)===null||Ie===void 0?void 0:Ie.characterValue)!==null&&ve!==void 0?ve:"self";Y[ge].ofTheConceptId in H?(pe=H[Y[ge].ofTheConceptId],Be in pe||(pe[Be]={})):(pe={},pe[Be]={},H[Y[ge].ofTheConceptId]=pe);try{let be=(Le=(ke=Ee?.type)===null||ke===void 0?void 0:ke.characterValue)!==null&&Le!==void 0?Le:"none",xe=Ee.characterValue,Oe=Ne.characterValue,Fe=!1;Oe==""&&(Oe=be,Oe=n(Oe),Fe=!0);let je={id:Ee.id,data:{[be]:xe}};isNaN(Number(Oe))?Oe.includes("_s_")||(typeof pe[Be]=="string"&&(pe[Be]={}),pe[Be][Oe]=je):(Array.isArray(pe[Be])||(pe[Be]=[]),pe[Be].push(je))}catch(be){console.log("this is error",be)}}}return N.Logger.logUpdate(fe),H})}(se,ie,z),yield function(K,X,te,Y){var H=arguments;return l(this,arguments,void 0,function*(re,ae,le,ce,we=[],Ie){var ve,ke,Le,fe,_e,ge;const Ce=N.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",H);let Te=[],Ee=[];for(let pe=0;pe<re.length;pe++)Ee.push(re[pe].toTheConceptId),Ee.push(re[pe].ofTheConceptId),Ee.push(re[pe].typeId);for(let pe=0;pe<re.length;pe++){let Ne=!1,Be=yield(0,N.GetTheConcept)(re[pe].ofTheConceptId),be=yield(0,N.GetTheConcept)(re[pe].toTheConceptId);if(we.includes(re[pe].id)&&(Ne=!0),Ne==1&&Be.id!=0&&be.id!=0&&be.id in ae){let xe,Oe=yield(0,N.GetTheConcept)(re[pe].typeId),Fe=(ke=(ve=be.type)===null||ve===void 0?void 0:ve.characterValue)!==null&&ke!==void 0?ke:"self";re[pe].toTheConceptId in ae,re[pe].toTheConceptId in ae?(xe=ae[re[pe].toTheConceptId],typeof xe[Fe]=="string"&&(xe[Fe]={})):(xe={},xe[Fe]={},ae[re[pe].toTheConceptId]=xe),o(be.id,Ie,xe);try{if(ae[re[pe].ofTheConceptId]){let je={id:Be.id,data:ae[re[pe].ofTheConceptId],created_on:re[pe].entryTimeStamp},$e=Oe.characterValue+"_reverse";Array.isArray(xe[Fe][$e])?xe[Fe][$e].push(je):$e.includes("_s_")?(xe[Fe][$e]=[],xe[Fe][$e].push(je)):xe[Fe][$e]=je}}catch(je){console.log("this is error",je)}}if(Be.id!=0&&be.id!=0&&Be.id in ae){let xe,Oe=yield(0,N.GetTheConcept)(re[pe].typeId),Fe=(fe=(Le=Be.type)===null||Le===void 0?void 0:Le.characterValue)!==null&&fe!==void 0?fe:"self";re[pe].toTheConceptId in ae,re[pe].ofTheConceptId in ae?(xe=ae[re[pe].ofTheConceptId],typeof xe[Fe]=="string"&&(xe[Fe]={})):(xe={},xe[Fe]={},ae[re[pe].ofTheConceptId]=xe),o(Be.id,Ie,xe);let je=Oe.characterValue;je==""&&(je=be.characterValue),je==""&&(je=((_e=be?.type)===null||_e===void 0?void 0:_e.characterValue)||"");try{(ge=be?.type)===null||ge===void 0||ge.characterValue;let $e=ae[re[pe].toTheConceptId];if($e){let Jt={id:be.id,data:ae[re[pe].toTheConceptId],created_on:re[pe].entryTimeStamp};Array.isArray(xe[Fe])?xe[Fe].push($e):Array.isArray(xe[Fe][je])?xe[Fe][Oe.characterValue].push(Jt):je.includes("_s_")?(xe[Fe][je]=[],xe[Fe][je].push(Jt)):xe[Fe][je]=Jt,o(be.id,Ie,Jt)}}catch($e){console.log("this is error",$e)}}}for(let pe=0;pe<ce.length;pe++){let Ne={};Ne.id=ce[pe];let Be=yield(0,N.GetTheConcept)(Ne.id);Ne.data=ae[ce[pe]],Ne.created_on=Be.entryTimeStamp,Te.push(Ne)}return N.Logger.logUpdate(Ce),Te})}(se,ie,[],j,z,$)})}function b(_,R,G,W,U){return i(this,arguments,void 0,function*(P,M,j,z,ee,Z="DESC"){if(N.serviceWorker)try{return(yield(0,N.sendMessage)("formatConnectionsV2",{linkers:P,conceptIds:M,mainCompositionIds:j,reverse:z,countInfos:ee,order:Z})).data}catch(K){console.error("formatConnectionsV2 error sw: ",K),(0,N.handleServiceWorkerException)(K)}let se=yield(0,L.QL)(P),$=yield(0,f.V)(ee);se=(0,v.X)(se,Z);let ie={};return ie=yield function(K){var X=arguments;return C(this,arguments,void 0,function*(te,Y={},H=[]){var re,ae,le,ce,we;const Ie=N.Logger.logfunction("FormatFunctionDataV2",X);for(const ve of te){const ke=H.includes(ve.id),Le=yield(0,N.GetTheConcept)(ve.ofTheConceptId),fe=yield(0,N.GetTheConcept)(ve.toTheConceptId),_e=yield(0,N.GetTheConcept)(ve.typeId);if(Le.id===0||fe.id===0)continue;const ge=ke?fe:Le,Ce=ke?Le:fe,Te=(ae=(re=ge.type)===null||re===void 0?void 0:re.characterValue)!==null&&ae!==void 0?ae:"self",Ee=(ce=(le=Ce.type)===null||le===void 0?void 0:le.characterValue)!==null&&ce!==void 0?ce:"none",pe=Ce.characterValue;(we=_e.characterValue)===null||we===void 0||we.includes("_s_"),Y[ge.id]||(Y[ge.id]={}),Y[ge.id][Te]||(Y[ge.id][Te]={}),Y[Ce.id]||(Y[Ce.id]={}),Y[Ce.id][Ee]=pe}return N.Logger.logUpdate(Ie),Y})}(se,ie,z),ie=yield function(K){var X=arguments;return C(this,arguments,void 0,function*(te,Y={},H=[]){var re,ae,le,ce,we;const Ie=N.Logger.logfunction("FormatFunctionDataForDataV2",X);for(const ve of te){const ke=H.includes(ve.id),Le=yield(0,N.GetTheConcept)(ve.ofTheConceptId),fe=yield(0,N.GetTheConcept)(ve.toTheConceptId),_e=yield(0,N.GetTheConcept)(ve.typeId);if(Le.id===0||fe.id===0)continue;const ge=ke?fe:Le,Ce=ke?Le:fe,Te=(ae=(re=ge.type)===null||re===void 0?void 0:re.characterValue)!==null&&ae!==void 0?ae:"self",Ee=(ce=(le=Ce.type)===null||le===void 0?void 0:le.characterValue)!==null&&ce!==void 0?ce:"none",pe=Ce.characterValue,Ne=(we=_e.characterValue)!==null&&we!==void 0?we:"";let Be=Ne===""?n(Ee):Ne;const be=Be.includes("_s_"),xe=!isNaN(Number(Be)),Oe={id:Ce.id,data:{[Ee]:pe}};Y[ge.id]||(Y[ge.id]={}),Te in Y[ge.id]&&typeof Y[ge.id][Te]!="string"||(Y[ge.id][Te]=xe?[]:{});try{if(be)continue;xe?Y[ge.id][Te].push(Oe):Y[ge.id][Te][ke?`${Be}_reverse`:Be]=Oe}catch(Fe){console.error("Error formatting concept data:",Fe)}}return N.Logger.logUpdate(Ie),Y})}(se,ie,z),yield function(K,X,te){var Y=arguments;return C(this,arguments,void 0,function*(H,re,ae,le=[],ce){var we,Ie,ve;const ke=N.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal",Y),Le=[];for(const fe of H){const _e=le.includes(fe.id),ge=yield(0,N.GetTheConcept)(fe.ofTheConceptId),Ce=yield(0,N.GetTheConcept)(fe.toTheConceptId),Te=yield(0,N.GetTheConcept)(fe.typeId);if(ge.id===0||Ce.id===0)continue;const Ee=_e?Ce:ge,pe=_e?ge:Ce,Ne=Ee.id,Be=pe.id,be=(Ie=(we=Ee.type)===null||we===void 0?void 0:we.characterValue)!==null&&Ie!==void 0?Ie:"self",xe=Te.characterValue+"_reverse",Oe=Te.characterValue||pe.characterValue||((ve=pe.type)===null||ve===void 0?void 0:ve.characterValue)||"";if(re[Ne]){const Fe=re[Ne][be],je=re[Be],$e={id:pe.id,data:je,created_on:fe.entryTimeStamp};o(Ne,ce,re[Ne]);try{_e?Array.isArray(Fe[xe])?Fe[xe].push($e):Fe[xe]=[$e]:Array.isArray(Fe)?Fe.push(je):Array.isArray(Fe[Oe])?Fe[Oe].push($e):Oe.includes("_s_")?(Fe[Oe]=[],Fe[Oe].push($e)):Fe[Oe]=[$e],o(Be,ce,$e)}catch(Jt){console.error("Error processing connection:",Jt)}}else console.log("This is the error in the source")}for(const fe of ae){const _e=yield(0,N.GetTheConcept)(fe);Le.push({id:fe,data:re[fe],created_on:_e.entryTimeStamp})}return N.Logger.logUpdate(ke),Le})}(se,ie,j,z,$)})}},6915:(Q,E,y)=>{function N(L,n="DESC"){return n=="ASC"?L.sort(function(u,I){return u.id-I.id}):L.sort(function(u,I){return I.id-u.id}),L}y.d(E,{X:()=>N})},3518:(Q,E,y)=>{y.d(E,{BZ:()=>I,Xr:()=>n,ab:()=>u});var N=y(3278),L=y(490);function n(w="application/json",r="application/json"){var e;let o={},l=(e=N.b.sessionId)===null||e===void 0?void 0:e.toString();return o=N.b.BearerAccessToken!=""?{"Content-Type":w,Authorization:"Bearer "+N.b.BearerAccessToken,Accept:r,"X-Session-id":l}:{"Content-Type":w,Accept:r,"X-Session-id":l},o}function u(w="application/json",r="",e="application/json"){var o;r==""&&(r=N.b.BearerAccessToken);let l={},f=(o=N.b.sessionId)===null||o===void 0?void 0:o.toString();return l=r!=""?{"Content-Type":w,Authorization:"Bearer "+r,Accept:e,"X-Session-id":f}:{"Content-Type":w,Accept:e,"X-Session-id":f},l}function I(){var w;let r=N.b.BearerAccessToken,e=(w=N.b.sessionId)===null||w===void 0?void 0:w.toString();if(r==""){let l=(0,L.s)();l.token!=""&&(N.b.BearerAccessToken=l.token,r=l.token)}let o=new Headers;return o.append("Authorization","Bearer "+r),o.append("X-Session-Id",e),o}},6467:(Q,E,y)=>{function N(L){const n=L.lastIndexOf("_");let u=[];return u=n>0?[L.substring(0,n),L.substring(n+1,L.length)]:[L],u}y.d(E,{f:()=>N})},490:(Q,E,y)=>{function N(){var L,n,u,I;let w={entity:0,userConcept:0,userId:0,token:""};try{let r=(localStorage==null?void 0:localStorage.getItem("profile"))||"";if(r){const e=JSON.parse(r);w.entity=(L=e?.entityId)!==null&&L!==void 0?L:0,w.userConcept=(n=e?.userConcept)!==null&&n!==void 0?n:0,w.userId=(u=e?.userId)!==null&&u!==void 0?u:0,w.token=(I=e?.token)!==null&&I!==void 0?I:""}}catch{console.log("This is the exception in getting user details from local storage")}return w}y.d(E,{s:()=>N})},1596:(Q,E,y)=>{y.d(E,{g:()=>u});var N=y(949),L=y(3278),n=function(I,w,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{C(e.next(i))}catch(a){l(a)}}function v(i){try{C(e.throw(i))}catch(a){l(a)}}function C(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}C((e=e.apply(I,[])).next())})};function u(I,w){return n(this,void 0,void 0,function*(){if(typeof self<"u"&&typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)throw new Error("Cannot switch server from service worker");try{(function(){const r=N.BaseUrl.NODE_CACHE_URL;if(r===N.BaseUrl.BASE_URL)throw new Error("Base Server Down");let e=sessionStorage.getItem("cacheServers");e=JSON.parse(e);const o=e.indexOf(r);if(N.BaseUrl.isNearestCache=!1,e.includes(r)&&o!==-1&&e.splice(o,1),sessionStorage.setItem("cacheServers",JSON.stringify(e)),e.length){const l=e[0];N.BaseUrl.NODE_CACHE_URL=l}else N.BaseUrl.NODE_CACHE_URL=N.BaseUrl.BASE_URL;console.log("before the payload",L.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&(0,N.sendMessage)("SESSION_DATA",{type:"SESSION_DATA",data:N.BaseUrl.NODE_CACHE_URL,session:L.b.sessionId})})();try{return yield fetch(`${N.BaseUrl.NODE_CACHE_URL}${w}`,I)}catch{return yield u(I,w)}}catch(r){throw r}})}},4310:(Q,E,y)=>{y.d(E,{Cp:()=>l,ix:()=>v,qj:()=>f});var N=y(949),L=y(1596),n=y(4698),u=y(1863),I=y(1320),w=y(3518),r=function(C,i,a,t){return new(a||(a=Promise))(function(c,T){function m(_){try{b(t.next(_))}catch(R){T(R)}}function k(_){try{b(t.throw(_))}catch(R){T(R)}}function b(_){var R;_.done?c(_.value):(R=_.value,R instanceof a?R:new a(function(G){G(R)})).then(m,k)}b((t=t.apply(C,[])).next())})};const e=new Map,o=new Map;function l(C){var i=arguments;return r(this,void 0,void 0,function*(){N.Logger.logfunction("BuildWidgetFromId",i);try{if(N.serviceWorker)return(yield(0,N.sendMessage)("BuildWidgetFromId",{id:C})).data}catch(c){console.error("BuildWidgetFromId error sw: ",c),(0,N.handleServiceWorkerException)(c)}let a={};if(e.has(C))return e.get(C)||a;const t=r(this,void 0,void 0,function*(){try{let c=[],T=[],m=[],k=[],b="DESC",_=[],R={},G=(0,w.Xr)("application/json"),W=N.BaseUrl.getWidgetData()+"?id="+C;const U=yield fetch(W,{method:"GET",headers:G});if(!U.ok)return(0,u.ry)(U),console.log("This is the BuildWidgetFromId error",U.status),[];R=yield U.json(),c=R.conceptIds,T=R.linkers,m=R.reverse,k=R.mainCompositionIds,_=R.countinfo;let P=(0,n.w)(_);return a=yield(0,I.e$)(T,c,k,m,P,b),a}catch(c){throw console.log("this is the error in the build widget",c),c}finally{e.delete(C)}});return e.set(C,t),t})}function f(C){var i=arguments;return r(this,void 0,void 0,function*(){N.Logger.logfunction("BuildWidgetFromIdForLatest",i);try{if(N.serviceWorker)return(yield(0,N.sendMessage)("BuildWidgetFromIdForLatest",{id:C})).data}catch(c){console.error("BuildWidgetFromIdForLatest error sw: ",c),(0,N.handleServiceWorkerException)(c)}let a={};if(o.has(C))return o.get(C)||a;const t=r(this,void 0,void 0,function*(){try{let c,T=[],m=[],k=[],b=[],_="DESC",R=[],G={},W=(0,w.Xr)("application/json");try{let P=N.BaseUrl.getLatestWidgetData()+"?id="+C;c=yield fetch(P,{method:"GET",headers:W})}catch{c=yield(0,L.g)({method:"GET",headers:W},"?id="+C)}if(!c.ok)return(0,u.ry)(c),console.log("This is the BuildWidgetFromId error",c.status),[];G=yield c.json(),T=G.conceptIds,m=G.linkers,k=G.reverse,b=G.mainCompositionIds,R=G.countinfo;let U=(0,n.w)(R);return a=yield(0,I.e$)(m,T,b,k,U,_),{data:a,mainId:G.mainId}}catch(c){throw console.log("this is the error in the build widget",c),c}finally{o.delete(C)}});return o.set(C,t),t})}function v(C,i){for(let a=0;a<C.length;a++)if(C[a].id==i)return C[a]}},4287:(Q,E,y)=>{y.d(E,{w:()=>u});var N=y(949),L=y(3130),n=function(I,w,r,e){return new(r||(r=Promise))(function(o,l){function f(i){try{C(e.next(i))}catch(a){l(a)}}function v(i){try{C(e.throw(i))}catch(a){l(a)}}function C(i){var a;i.done?o(i.value):(a=i.value,a instanceof r?a:new r(function(t){t(a)})).then(f,v)}C((e=e.apply(I,[])).next())})};class u{constructor(){this.subscribers=[],this.mainConcept=0,this.compositionIds=[],this.conceptIds=[],this.internalConnections=[],this.reverse=[],this.linkers=[],this.newIds=[],this.dependency=[],this.isDataLoaded=!1,this.isUpdating=!1,this.fetched=!1,this.format=L.yv,this.eventHandlers={}}listenToEventType(w){if(this.eventHandlers[w])return;const r=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){let l=e;if(!o.compositionIds.includes(l?.detail)){o.compositionIds.unshift(l?.detail),o.listenToEvent(l?.detail);let f=l?.detail,v=yield N.ConnectionData.GetConnectionByOfTheConceptAndType(f,f);for(let C=0;C<v.length;C++)yield N.ConnectionData.GetConnection(v[C]).then(i=>{i.typeId==o.mainConcept?o.internalConnections.includes(i.id)||o.internalConnections.push(i.id):o.linkers.includes(i.id)||o.linkers.push(i.id),o.conceptIds.includes(i.toTheConceptId)||o.conceptIds.push(i.toTheConceptId),o.compositionIds.includes(i.ofTheConceptId)||o.compositionIds.push(i.ofTheConceptId)})}o.isUpdating=!1,yield o.bind(),o.notify()})},200)}});this.eventHandlers[w]=r,window.addEventListener(`${w}`,r)}listenToEvent(w){if(this.eventHandlers[w])return;const r=e=>n(this,void 0,void 0,function*(){if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){let l=yield N.ConnectionData.GetConnectionByOfTheConceptAndType(w,w);for(let f=0;f<l.length;f++)yield N.ConnectionData.GetConnection(l[f]).then(v=>{v.typeId==o.mainConcept?o.internalConnections.includes(v.id)||o.internalConnections.push(v.id):o.linkers.includes(v.id)||o.linkers.push(v.id),o.conceptIds.includes(v.toTheConceptId)||o.conceptIds.push(v.toTheConceptId),o.compositionIds.includes(v.ofTheConceptId)||(o.compositionIds.push(v.ofTheConceptId),o.newIds.includes(v.ofTheConceptId)||o.newIds.push(v.ofTheConceptId))});o.isUpdating=!1,yield o.bind(),o.notify()})},200)}});this.eventHandlers[w]=r,window.addEventListener(`${w}`,r)}removeListenToEvent(w){const r=this.eventHandlers[w];r&&(window.removeEventListener(`${w}`,r),delete this.eventHandlers[w])}listenToEventConnectionType(w,r){window.addEventListener(`${w}`,e=>{if(!this.isUpdating){this.isUpdating=!0;let o=this;setTimeout(function(){return n(this,void 0,void 0,function*(){let l=yield N.ConnectionData.GetConnectionByOfTheConceptAndType(w,w);for(let f=0;f<l.length;f++)l.typeId==r&&(yield N.ConnectionData.GetConnection(l[f]).then(v=>{v.typeId==o.mainConcept?o.internalConnections.includes(v.id)||o.internalConnections.push(v.id):o.linkers.includes(v.id)||o.linkers.push(v.id),o.conceptIds.includes(v.toTheConceptId)||o.conceptIds.push(v.toTheConceptId),o.compositionIds.includes(v.ofTheConceptId)||o.compositionIds.push(v.ofTheConceptId)}));o.isUpdating=!1,yield o.bind(),o.notify()})},200)}})}bind(){return n(this,void 0,void 0,function*(){console.log("this is the old execute data")})}run(){return n(this,void 0,void 0,function*(){console.log("this is non subscriber data")})}update(){return n(this,void 0,void 0,function*(){this.isDataLoaded=!1,yield this.bind(),this.notify()})}subscribe(w){return n(this,void 0,void 0,function*(){return this.subscribers.push(w),yield this.bind(),w(this.data,this)})}execute(){return n(this,void 0,void 0,function*(){return yield this.run()})}unsubscribe(w){return this.subscribers.filter(r=>r!=w),this.subscribers.length}notify(){this.subscribers.map(w=>{w(this.data,this)})}}},5328:(Q,E,y)=>{y.d(E,{d:()=>r});var N=y(949),L=y(3130),n=y(8939),u=y(4287),I=function(e,o,l,f){return new(l||(l=Promise))(function(v,C){function i(c){try{t(f.next(c))}catch(T){C(T)}}function a(c){try{t(f.throw(c))}catch(T){C(T)}}function t(c){var T;c.done?v(c.value):(T=c.value,T instanceof l?T:new l(function(m){m(T)})).then(i,a)}t((f=f.apply(e,[])).next())})};class w extends u.w{constructor(o,l,f,v,C){super(),this.connections=[],this.data=[],this.mainConcept=o,this.linker=l,this.inpage=f,this.page=v,this.format=C}bind(){return I(this,void 0,void 0,function*(){var o;if(!this.isDataLoaded){let v=yield(0,N.GetTheConcept)(this.mainConcept),C=((o=v.type)===null||o===void 0?void 0:o.characterValue)+"_s_"+this.linker,i=yield(0,N.GetConceptByCharacterAndType)(C,16);if(i.id>0){let a=yield(0,N.GetConnectionOfTheConcept)(i.id,v.id,v.userId,this.inpage,this.page);this.connections=a;for(var l=[],f=0;f<this.connections.length;f++)l.push(this.connections[f].toTheConceptId),this.linkers.push(this.connections[f].id),this.listenToEvent(this.connections[f].toTheConceptId);yield(0,N.GetAllConnectionsOfCompositionBulk)(l)}this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return I(this,void 0,void 0,function*(){this.data=[],this.connections=yield(0,N.GetConnectionBulk)(this.linkers);for(var o=0;o<this.connections.length;o++){let l=this.connections[o].toTheConceptId,f=yield(0,N.GetTheConcept)(l);if(console.log("this is the format",this.format),this.format==L.yv){let v=yield(0,n.RW)(f.id);this.data.push(v)}else if(this.format==L.ZJ){let v=yield(0,n.kx)(f.id);this.data.push(v)}else if(this.format==L.iw){let v=yield(0,N.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}else{let v=yield(0,N.GetCompositionWithIdAndDateFromMemory)(f.id);this.data.push(v)}}return this.data})}}function r(e,o,l,f,v=L.yv){return new w(e,o,l,f,v)}},949:(Q,E,y)=>{y.r(E),y.d(E,{ADMIN:()=>Gi,ALLID:()=>Me.BG,AccessTracker:()=>bn.J,AddGhostConcept:()=>Si,Anomaly:()=>Qe,BaseUrl:()=>r.B,BinaryTree:()=>Xn.W,BuildWidgetFromId:()=>an.Cp,BuilderStatefulWidget:()=>On,Composition:()=>_n,CompositionBinaryTree:()=>Qt,CompositionNode:()=>so,Concept:()=>zi.j,ConceptsData:()=>w.I,Connection:()=>K.N,ConnectionData:()=>jt.d,CountInfo:()=>dr.y,CreateComposition:()=>se.A,CreateConnection:()=>Dt.d,CreateConnectionBetweenEntityLocal:()=>No,CreateConnectionBetweenTwoConcepts:()=>ve,CreateConnectionBetweenTwoConceptsGeneral:()=>Le,CreateConnectionBetweenTwoConceptsLocal:()=>go.h,CreateData:()=>Hn,CreateDefaultConcept:()=>te.o,CreateDefaultLConcept:()=>uo.u,CreateSession:()=>vi,CreateSessionVisit:()=>mi,CreateTheCompositionLocal:()=>$.R,CreateTheCompositionWithCache:()=>xn,CreateTheConnection:()=>Ee.q,CreateTheConnectionGeneral:()=>ae,CreateTheConnectionLocal:()=>Dt.F,DATAID:()=>Me.y0,DATAIDDATE:()=>Me.iw,DATAV2:()=>Me.pU,DelayFunctionExecution:()=>Ri,DeleteConceptById:()=>Zn,DeleteConceptLocal:()=>Ei,DeleteConnectionById:()=>le.m,DeleteConnectionByIdBulk:()=>le.E,DeleteConnectionByType:()=>In.$S,DeleteConnectionByTypeBulk:()=>In.L0,DeleteUser:()=>zo,DependencyObserver:()=>Yt.w,FilterSearch:()=>Wn,FormatFromConnections:()=>on.vw,FormatFromConnectionsAltered:()=>on.y8,FreeschemaQuery:()=>It,FreeschemaQueryApi:()=>Vn,GetAllConnectionsOfComposition:()=>Z.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>In.WC,GetComposition:()=>i.Nj,GetCompositionBulk:()=>et.dF,GetCompositionBulkWithDataId:()=>et.cw,GetCompositionFromConnectionsWithDataId:()=>et.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>et.km,GetCompositionFromConnectionsWithDataIdInObject:()=>et.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>et.Nt,GetCompositionFromConnectionsWithIndex:()=>et.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>et.hG,GetCompositionFromMemoryWithConnections:()=>i.JA,GetCompositionList:()=>T,GetCompositionListAll:()=>m,GetCompositionListAllWithId:()=>k,GetCompositionListListener:()=>Vi,GetCompositionListLocal:()=>z,GetCompositionListLocalWithId:()=>ee,GetCompositionListWithId:()=>b,GetCompositionListWithIdUpdated:()=>_,GetCompositionListener:()=>Wi,GetCompositionLocal:()=>U,GetCompositionLocalWithId:()=>P,GetCompositionWithAllIds:()=>i.Mb,GetCompositionWithCache:()=>pi,GetCompositionWithDataIdBulk:()=>yi,GetCompositionWithDataIdWithCache:()=>co,GetCompositionWithId:()=>i.yz,GetCompositionWithIdAndDateFromMemory:()=>i.Ez,GetConceptBulk:()=>Cn.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>pe.A,GetConnectionBetweenTwoConceptsLinker:()=>Bi,GetConnectionBulk:()=>Fn.j,GetConnectionById:()=>Yo,GetConnectionDataPrefetch:()=>et.QL,GetConnectionOfTheConcept:()=>de,GetConnectionTypeForCount:()=>To.V,GetFreeschemaImage:()=>xr,GetFreeschemaImageUrl:()=>Er,GetImageApi:()=>Eo,GetLink:()=>Be,GetLinkListListener:()=>Hi,GetLinkListener:()=>ji.d,GetLinkRaw:()=>be,GetLinkerConnectionFromConcepts:()=>$o,GetLinkerConnectionToConcepts:()=>Ho,GetRelation:()=>lo,GetRelationLocal:()=>Ni,GetRelationRaw:()=>Ti,GetTheConcept:()=>ce.A,GetTheConceptLocal:()=>po.f,GetUserGhostId:()=>ki,JUSTDATA:()=>Me.ZJ,LConcept:()=>Ji,LConnection:()=>Qi,LISTNORMAL:()=>Me.SL,LocalConceptsData:()=>C.v,LocalSyncData:()=>rn.H,LocalTransaction:()=>Io,Logger:()=>ye.V,LoginToBackend:()=>ii,MakeTheInstanceConcept:()=>we.A,MakeTheInstanceConceptLocal:()=>fe.k,MakeTheTimestamp:()=>Xo,MakeTheTypeConceptApi:()=>$e,MakeTheTypeConceptLocal:()=>xe.$,NORMAL:()=>Me.yv,PRIVATE:()=>Di,PUBLIC:()=>Fi,PatcherStructure:()=>Yi,Prototype:()=>br,RAW:()=>Me.XZ,RecursiveSearchApi:()=>Zo,RecursiveSearchApiNewRawFullLinker:()=>ti,RecursiveSearchApiRaw:()=>Kn,RecursiveSearchApiRawFullLinker:()=>ei,RecursiveSearchApiWithInternalConnections:()=>Ko,RecursiveSearchListener:()=>$i,SchemaQuery:()=>cr,SchemaQueryListener:()=>kn,SearchAllConcepts:()=>di,SearchLinkInternal:()=>_i,SearchLinkInternalAll:()=>xi,SearchLinkMultipleAll:()=>on.cf,SearchLinkMultipleAllObservable:()=>mo,SearchLinkMultipleApi:()=>u.j,SearchQuery:()=>tn,SearchStructure:()=>Zi,SearchWithLinker:()=>ui,SearchWithTypeAndLinker:()=>Xt.zl,SearchWithTypeAndLinkerApi:()=>vo,Selector:()=>ur,SessionData:()=>Xi,Signin:()=>ai,Signup:()=>ri,SignupEntity:()=>si,SplitStrings:()=>I.f,StatefulWidget:()=>Mn,SyncData:()=>X.Y,TrashTheConcept:()=>Jo,UpdateComposition:()=>li,UpdateCompositionLocal:()=>Ai.D,UserBinaryTree:()=>nn,Validator:()=>rr,ViewInternalData:()=>yo,ViewInternalDataApi:()=>fo,WidgetTree:()=>Ao,convertFromConceptToLConcept:()=>Un.F4,convertFromLConceptToConcept:()=>Un.dp,convertWidgetTreeToWidget:()=>$n,convertWidgetTreeToWidgetWithWrapper:()=>Lo,createFormFieldData:()=>sr,createPrototypeLocal:()=>xo,dispatchIdEvent:()=>Gr,getFromDatabaseWithType:()=>Ce,getObjectsFromIndexDb:()=>Te,getUserDetails:()=>lr.s,getWidgetBulkFromId:()=>Rn,getWidgetFromId:()=>Tr,handleServiceWorkerException:()=>ze,hasActivatedSW:()=>Bo,init:()=>Br,orderTheConnections:()=>qi.X,recursiveFetch:()=>i.zN,recursiveFetchNew:()=>wn,removeAllChildren:()=>bo,renderLatestWidget:()=>jn,renderPage:()=>gr,renderWidget:()=>vr,searchLinkMultipleListener:()=>Pi,sendEmail:()=>or,sendMessage:()=>Ve,serviceWorker:()=>Pe,setHasActivatedSW:()=>Or,storeToDatabase:()=>ge,subscribedListeners:()=>Oo,unwrapContainers:()=>_o,updateAccessToken:()=>Ro,uploadAttachment:()=>ni,uploadFile:()=>oo,uploadImage:()=>no,uploadImageV2:()=>oi,validDocumentFormats:()=>to,validImageFormats:()=>eo});var N={};y.r(N),y.d(N,{ADMIN:()=>Gi,ALLID:()=>Me.BG,AccessTracker:()=>bn.J,AddGhostConcept:()=>Si,Anomaly:()=>Qe,BaseUrl:()=>r.B,BinaryTree:()=>Xn.W,BuildWidgetFromId:()=>an.Cp,BuilderStatefulWidget:()=>On,Composition:()=>_n,CompositionBinaryTree:()=>Qt,CompositionNode:()=>so,Concept:()=>zi.j,ConceptsData:()=>w.I,Connection:()=>K.N,ConnectionData:()=>jt.d,CountInfo:()=>dr.y,CreateComposition:()=>se.A,CreateConnection:()=>Dt.d,CreateConnectionBetweenEntityLocal:()=>No,CreateConnectionBetweenTwoConcepts:()=>ve,CreateConnectionBetweenTwoConceptsGeneral:()=>Le,CreateConnectionBetweenTwoConceptsLocal:()=>go.h,CreateData:()=>Hn,CreateDefaultConcept:()=>te.o,CreateDefaultLConcept:()=>uo.u,CreateSession:()=>vi,CreateSessionVisit:()=>mi,CreateTheCompositionLocal:()=>$.R,CreateTheCompositionWithCache:()=>xn,CreateTheConnection:()=>Ee.q,CreateTheConnectionGeneral:()=>ae,CreateTheConnectionLocal:()=>Dt.F,DATAID:()=>Me.y0,DATAIDDATE:()=>Me.iw,DATAV2:()=>Me.pU,DelayFunctionExecution:()=>Ri,DeleteConceptById:()=>Zn,DeleteConceptLocal:()=>Ei,DeleteConnectionById:()=>le.m,DeleteConnectionByIdBulk:()=>le.E,DeleteConnectionByType:()=>In.$S,DeleteConnectionByTypeBulk:()=>In.L0,DeleteUser:()=>zo,DependencyObserver:()=>Yt.w,FilterSearch:()=>Wn,FormatFromConnections:()=>on.vw,FormatFromConnectionsAltered:()=>on.y8,FreeschemaQuery:()=>It,FreeschemaQueryApi:()=>Vn,GetAllConnectionsOfComposition:()=>Z.s,GetAllConnectionsOfCompositionBulk:()=>v.Y,GetAllTheConnectionsByTypeAndOfTheConcept:()=>In.WC,GetComposition:()=>i.Nj,GetCompositionBulk:()=>et.dF,GetCompositionBulkWithDataId:()=>et.cw,GetCompositionFromConnectionsWithDataId:()=>et.p8,GetCompositionFromConnectionsWithDataIdFromConnections:()=>et.km,GetCompositionFromConnectionsWithDataIdInObject:()=>et.rv,GetCompositionFromConnectionsWithDataIdIndex:()=>et.Nt,GetCompositionFromConnectionsWithIndex:()=>et.as,GetCompositionFromConnectionsWithIndexFromConnections:()=>et.hG,GetCompositionFromMemoryWithConnections:()=>i.JA,GetCompositionList:()=>T,GetCompositionListAll:()=>m,GetCompositionListAllWithId:()=>k,GetCompositionListListener:()=>Vi,GetCompositionListLocal:()=>z,GetCompositionListLocalWithId:()=>ee,GetCompositionListWithId:()=>b,GetCompositionListWithIdUpdated:()=>_,GetCompositionListener:()=>Wi,GetCompositionLocal:()=>U,GetCompositionLocalWithId:()=>P,GetCompositionWithAllIds:()=>i.Mb,GetCompositionWithCache:()=>pi,GetCompositionWithDataIdBulk:()=>yi,GetCompositionWithDataIdWithCache:()=>co,GetCompositionWithId:()=>i.yz,GetCompositionWithIdAndDateFromMemory:()=>i.Ez,GetConceptBulk:()=>Cn.r,GetConceptByCharacter:()=>a.A,GetConceptByCharacterAndCategoryLocal:()=>t.$I,GetConceptByCharacterAndType:()=>pe.A,GetConnectionBetweenTwoConceptsLinker:()=>Bi,GetConnectionBulk:()=>Fn.j,GetConnectionById:()=>Yo,GetConnectionDataPrefetch:()=>et.QL,GetConnectionOfTheConcept:()=>de,GetConnectionTypeForCount:()=>To.V,GetFreeschemaImage:()=>xr,GetFreeschemaImageUrl:()=>Er,GetImageApi:()=>Eo,GetLink:()=>Be,GetLinkListListener:()=>Hi,GetLinkListener:()=>ji.d,GetLinkRaw:()=>be,GetLinkerConnectionFromConcepts:()=>$o,GetLinkerConnectionToConcepts:()=>Ho,GetRelation:()=>lo,GetRelationLocal:()=>Ni,GetRelationRaw:()=>Ti,GetTheConcept:()=>ce.A,GetTheConceptLocal:()=>po.f,GetUserGhostId:()=>ki,JUSTDATA:()=>Me.ZJ,LConcept:()=>Ji,LConnection:()=>Qi,LISTNORMAL:()=>Me.SL,LocalConceptsData:()=>C.v,LocalSyncData:()=>rn.H,LocalTransaction:()=>Io,Logger:()=>ye.V,LoginToBackend:()=>ii,MakeTheInstanceConcept:()=>we.A,MakeTheInstanceConceptLocal:()=>fe.k,MakeTheTimestamp:()=>Xo,MakeTheTypeConceptApi:()=>$e,MakeTheTypeConceptLocal:()=>xe.$,NORMAL:()=>Me.yv,PRIVATE:()=>Di,PUBLIC:()=>Fi,PatcherStructure:()=>Yi,Prototype:()=>br,RAW:()=>Me.XZ,RecursiveSearchApi:()=>Zo,RecursiveSearchApiNewRawFullLinker:()=>ti,RecursiveSearchApiRaw:()=>Kn,RecursiveSearchApiRawFullLinker:()=>ei,RecursiveSearchApiWithInternalConnections:()=>Ko,RecursiveSearchListener:()=>$i,SchemaQuery:()=>cr,SchemaQueryListener:()=>kn,SearchAllConcepts:()=>di,SearchLinkInternal:()=>_i,SearchLinkInternalAll:()=>xi,SearchLinkMultipleAll:()=>on.cf,SearchLinkMultipleAllObservable:()=>mo,SearchLinkMultipleApi:()=>u.j,SearchQuery:()=>tn,SearchStructure:()=>Zi,SearchWithLinker:()=>ui,SearchWithTypeAndLinker:()=>Xt.zl,SearchWithTypeAndLinkerApi:()=>vo,Selector:()=>ur,SessionData:()=>Xi,Signin:()=>ai,Signup:()=>ri,SignupEntity:()=>si,SplitStrings:()=>I.f,StatefulWidget:()=>Mn,SyncData:()=>X.Y,TrashTheConcept:()=>Jo,UpdateComposition:()=>li,UpdateCompositionLocal:()=>Ai.D,UserBinaryTree:()=>nn,Validator:()=>rr,ViewInternalData:()=>yo,ViewInternalDataApi:()=>fo,WidgetTree:()=>Ao,convertFromConceptToLConcept:()=>Un.F4,convertFromLConceptToConcept:()=>Un.dp,convertWidgetTreeToWidget:()=>$n,convertWidgetTreeToWidgetWithWrapper:()=>Lo,createFormFieldData:()=>sr,createPrototypeLocal:()=>xo,dispatchIdEvent:()=>Gr,getFromDatabaseWithType:()=>Ce,getObjectsFromIndexDb:()=>Te,getUserDetails:()=>lr.s,getWidgetBulkFromId:()=>Rn,getWidgetFromId:()=>Tr,handleServiceWorkerException:()=>ze,hasActivatedSW:()=>Bo,init:()=>Br,orderTheConnections:()=>qi.X,recursiveFetch:()=>i.zN,recursiveFetchNew:()=>wn,removeAllChildren:()=>bo,renderLatestWidget:()=>jn,renderPage:()=>gr,renderWidget:()=>vr,searchLinkMultipleListener:()=>Pi,sendEmail:()=>or,sendMessage:()=>Ve,serviceWorker:()=>Pe,setHasActivatedSW:()=>Or,storeToDatabase:()=>ge,subscribedListeners:()=>Oo,unwrapContainers:()=>_o,updateAccessToken:()=>Ro,uploadAttachment:()=>ni,uploadFile:()=>oo,uploadImage:()=>no,uploadImageV2:()=>oi,validDocumentFormats:()=>to,validImageFormats:()=>eo});var L=y(5020),n=y(205),u=y(2832),I=y(6467),w=y(3026),r=y(9581),e=y(3518),o=y(1863),l=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function f(B,p){var s=arguments;return l(this,void 0,void 0,function*(){const h=ye.V.logfunction("GetAllConceptsByType",s);try{var S=new URLSearchParams;S.append("type",B),S.append("user_id",p.toString());var A=(0,e.Xr)("application/x-www-form-urlencoded");const F=yield fetch(r.B.GetAllConceptsByTypeUrl(),{method:"POST",headers:A,body:S});if(F.ok){const x=yield F.json();for(var O=0;O<x.length;O++)w.I.AddConcept(x[O])}else console.log("GetAllConceptsByType error",F.status),(0,o.ry)(F)}catch(F){F instanceof Error?console.log("GetAllConceptsByType error message: ",F.message):console.log("GetAllConceptsByType unexpected error: ",F),(0,o.Mb)(F,r.B.GetAllConceptsByTypeUrl()),(0,o.ey)(h,"GetAllConceptsByType",F)}})}var v=y(8642),C=y(9736),i=y(8939),a=y(2013),t=y(8064),c=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function T(B,p){var s=arguments;return c(this,arguments,void 0,function*(h,S,A=10,O=1){const F=ye.V.logfunction("GetCompositionList",s)||{};if(Pe){F.serviceWorker=!0;try{const d=yield Ve("GetCompositionList",{compositionName:h,userId:S,inpage:A,page:O});return ye.V.logUpdate(F),d.data}catch(d){console.error("GetCompositionList sw error: ",d),(0,o.ey)(F,"GetCompositionList",d),ze(d)}}let x=yield(0,a.A)(h),g=[];if(x){yield f(h,S);let d=yield w.I.GetConceptsByTypeIdAndUser(x.id,S),D=A*(O-1),V=[];for(let J=D;J<D+A;J++)d[J]&&V.push(d[J].id);yield(0,v.Y)(V);for(let J=D;J<D+A;J++)if(d[J]){let q=yield(0,i.kx)(d[J].id);g.push(q)}}return ye.V.logUpdate(F),g})}function m(B,p){return c(this,arguments,void 0,function*(s,h,S=10,A=1){let O=z(s,h),F=T(s,h),x=[];return Promise.race([O,F]).then(g=>{console.log("Promise result",g),x.push(...g)}).catch(g=>{console.log("error in handling",g)}),F.then(g=>{console.log("This is the second promise result",g),x.push(...g)}),x})}function k(B,p){return c(this,arguments,void 0,function*(s,h,S=10,A=1){if(Pe)try{return(yield Ve("GetCompositionListAllWithId",{compositionName:s,userId:h,inpage:S,page:A})).data}catch(J){console.error("GetCompositionListAllWithId sw error: ",J),ze(J)}let O=yield(0,t.Ay)(s),F=yield(0,a.A)(s),x=[],g=[],d=[],D=[];O.id!=0&&(g=yield C.v.GetConceptsByTypeIdAndUser(O.id,h)),F.id!=0&&(yield f(s,h),D=yield w.I.GetConceptsByTypeIdAndUser(F.id,h),x=D);for(let J=0;J<g.length;J++){let q=!1;for(let oe=0;oe<D.length;oe++)g[J].ghostId==D[oe].ghostId&&(q=!0);q||d.push(g[J])}console.log("This is the all list",d);let V=[];return V=yield function(J,q){return c(this,arguments,void 0,function*(oe,ue,me=10,Se=1){let he=[],Ae=me*(Se-1),De=[],We=ue.length;for(let He=Ae;He<Ae+me-We;He++)oe[He]&&De.push(oe[He].id);for(let He=0;He<ue.length;He++){let Je=yield P(ue[He].id);he.push(Je)}yield(0,v.Y)(De);for(let He=Ae;He<Ae+me-We;He++)if(oe[He]){let Je=yield(0,i.RW)(oe[He].id);he.push(Je)}return he})}(x,d,S,A),V})}function b(B,p){return c(this,arguments,void 0,function*(s,h,S=10,A=1){if(Pe)try{return(yield Ve("GetCompositionListWithId",{compositionName:s,userId:h,inpage:S,page:A})).data}catch(x){console.error("GetCompositionListWithId sw error: ",x),ze(x)}let O=yield(0,a.A)(s),F=[];if(O){yield f(s,h);let x=yield w.I.GetConceptsByTypeIdAndUser(O.id,h),g=S*(A-1),d=[];for(let D=g;D<g+S;D++)x[D]&&d.push(x[D].id);yield(0,v.Y)(d);for(let D=g;D<g+S;D++)if(x[D]){let V=yield(0,i.RW)(x[D].id);F.push(V)}}return F})}function _(B,p){return c(this,arguments,void 0,function*(s,h,S=10,A=1){let O=yield(0,a.w)(s),F=[];if(O){yield f(s,h);let x=yield w.I.GetConceptsByTypeIdAndUser(O.id,h),g=S*(A-1),d=[];for(let D=g;D<g+S;D++)x[D]&&d.push(x[D].id);yield(0,v.Y)(d);for(let D=g;D<g+S;D++)if(x[D]){let V=yield(0,i.RW)(x[D].id);F.push(V)}}return F})}var R=y(4864),G=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})},W=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function U(B){return W(this,void 0,void 0,function*(){var p,s;try{if(Pe)try{return(yield Ve("GetCompositionLocal",{id:B})).data}catch(x){console.error("GetCompositionLocal error sw: ",x),ze(x)}let h=[],S={};h=yield R.G.GetConnectionsOfCompositionLocal(B);let A=[];for(let x=0;x<h.length;x++)A.includes(h[x].ofTheConceptId)||A.push(h[x].ofTheConceptId);let O=yield C.v.GetConcept(B);if(O.id==0){let x=yield function(g){var d=arguments;return G(this,void 0,void 0,function*(){const D=ye.V.logfunction("TranslateLocalToReal",d);let V=(0,te.o)();try{var J=(0,e.ab)("application/x-www-form-urlencoded");const q=yield fetch(r.B.GetRealConceptById(),{method:"POST",headers:J,body:`id=${g}`});if(q.ok)return V=yield q.json(),V.id>0&&w.I.AddConcept(V),V;console.log("Error in Getting Translating concept Error",q.status),(0,o.ry)(q),ye.V.logUpdate(D)}catch(q){q instanceof Error?console.log("Error in Getting Translating concept error message: ",q):console.log("Error in Getting Translating concept unexpected error: ",q),(0,o.Mb)(q,r.B.GetRealConceptById()),(0,o.ey)(D,"TranslateLocalToReal",q)}return V})}(B);if(x.id>0)return yield(0,i.Nj)(x.id)}let F=yield M(B,h,A);return S[(s=(p=O?.type)===null||p===void 0?void 0:p.characterValue)!==null&&s!==void 0?s:"top"]=F,S}catch(h){throw h}})}function P(B){return W(this,void 0,void 0,function*(){var p,s;try{if(Pe)try{return(yield Ve("GetCompositionLocalWithId",{id:B})).data}catch(x){console.error("GetCompositionLocalWithId error sw: ",x),ze(x)}let h=[],S={},A={};h=yield R.G.GetConnectionsOfCompositionLocal(B);let O=[];for(let x=0;x<h.length;x++)O.includes(h[x].ofTheConceptId)||O.push(h[x].ofTheConceptId);let F=yield C.v.GetConcept(B);if(F.id!=0){let x=yield M(B,h,O);S[(s=(p=F?.type)===null||p===void 0?void 0:p.characterValue)!==null&&s!==void 0?s:"top"]=x}return A.data=S,A.id=B,A}catch(h){throw h}})}function M(B,p,s){return W(this,arguments,void 0,function*(h,S,A,O=[]){var F,x,g;let d={},D=[],V=yield C.v.GetConcept(h);if(V.id!=0&&V.type==null){let J=V.typeId,q=yield C.v.GetConcept(J);V.type=q}if((F=V?.type)===null||F===void 0||F.characterValue,!A.includes(h))return V?.characterValue;if(O.includes(h))return"";O.push(h);for(let J=0;J<S.length;J++)if(S[J].ofTheConceptId==h){let q=S[J].toTheConceptId,oe=yield C.v.GetConcept(q);if(oe.id!=0&&oe?.type==null){let Se=oe.typeId,he=yield C.v.GetConcept(Se);oe.type=he}let ue="the_",me=((g=(x=oe?.type)===null||x===void 0?void 0:x.characterValue)!==null&&g!==void 0?g:"top").replace(ue,"");if(isNaN(Number(me))){if(me){const Se=yield M(q,S,A);d[me]=Se}}else{const Se=yield M(q,S,A);D[me]=Se,d=D}}return d})}var j=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function z(B,p){return j(this,void 0,void 0,function*(){if(Pe)try{return(yield Ve("GetCompositionListLocal",{compositionName:B,userId:p})).data}catch(s){console.error("GetCompositionListLocal error sw: ",s),ze(s)}try{let s=yield(0,t.Ay)(B),h=[];if(s.id!=0){let S=yield C.v.GetConceptsByTypeIdAndUser(s.id,p);for(let A=0;A<S.length;A++){let O=yield U(S[A].id);h.push(O)}}return h}catch(s){throw s}})}function ee(B,p){return j(this,void 0,void 0,function*(){if(Pe)try{return(yield Ve("GetCompositionListLocalWithId",{compositionName:B,userId:p})).data}catch(s){console.error("GetCompositionListLocalWithId error sw: ",s),ze(s)}try{let s=yield(0,t.Ay)(B),h=[];if(s.id!=0){let S=yield C.v.GetConceptsByTypeIdAndUser(s.id,p);for(let A=0;A<S.length;A++){let O=yield P(S[A].id);h.push(O)}}return h}catch(s){throw s}})}var Z=y(2),se=y(1218),$=y(999),ie=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function de(B,p,s){var h=arguments;return ie(this,arguments,void 0,function*(S,A,O,F=10,x=1){const g=ye.V.logfunction("GetConnectionOfTheConcept",h)||{};let d=[];try{if(Pe){g.serviceWorker=!0;try{const q=yield Ve("GetConnectionOfTheConcept",{typeId:S,ofTheConceptId:A,userId:O,inpage:F,page:x});return ye.V.logUpdate(g),q.data}catch(q){console.error("GetConnectionOfTheConcept sw error: ",q),(0,o.ey)(g,"GetConnectionOfTheConcept",q),ze(q)}}let D=new URLSearchParams;D.append("typeId",`${S}`),D.append("ofTheConceptId",`${A}`),D.append("userId",`${O}`),D.append("inpage",`${F}`),D.append("page",`${x}`);let V=(0,e.Xr)("application/x-www-form-urlencoded");const J=yield fetch(r.B.GetAllConnectionsOfConceptUrl(),{method:"POST",headers:V,body:D});return J.ok?d=yield J.json():((0,o.ey)(g,"GetConnectionOfTheConcept",J.status),(0,o.ry)(J),console.log("Get connection of concept error",J.status)),ye.V.logUpdate(g),d}catch(D){D instanceof Error?console.log("Get connection of concept  error message: ",D.message):console.log("Get connection of concept unexpected error: ",D),(0,o.Mb)(D,r.B.GetAllConnectionsOfConceptUrl()),(0,o.ey)(g,"GetConnectionOfTheConcept",D)}})}var K=y(2155),X=y(442),te=y(7282),Y=y(5976),H=y(7273),re=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function ae(B,p,s,h){return re(this,arguments,void 0,function*(S,A,O,F,x=1,g=4){if(S>0&&O>0){var d=A,D=yield Y.p.getId(),V=new K.N(D,S,O,d,F,x,g);return S==O?(V.ofTheConceptId=0,V.toTheConceptId=1,V):(V.toUpdate=!0,V.isTemp=!1,X.Y.AddConnection(V),V)}throw new H.z("cannot create connection because id are negative ",!1,400,"")})}var le=y(4818),ce=y(7876),we=y(8407),Ie=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function ve(B,p,s){return Ie(this,arguments,void 0,function*(h,S,A,O=!1,F=!1){var x,g;if(Pe)try{return(yield Ve("CreateConnectionBetweenTwoConcepts",{ofTheConcept:h,toTheConcept:S,linker:A,both:O,count:F})).data}catch(oe){console.error("CreateConnectionBetweenTwoConcepts sw error: ",oe),ze(oe)}let d=h.userId;if(O){let oe=A+"_by",ue=((x=S.type)===null||x===void 0?void 0:x.characterValue)+"_s_"+oe;F&&(yield ke(oe,S,d));let me=yield(0,we.A)("connection",ue,!1,999,999,999),Se=new K.N(0,S.id,h.id,d,me.id,1e3,4);X.Y.AddConnection(Se)}let D=A+"_s",V=((g=h.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+D;F&&(yield ke(D,h,d));let J=yield(0,we.A)("connection",V,!1,999,999,999),q=new K.N(0,h.id,S.id,d,J.id,1e3,4);return X.Y.AddConnection(q),q})}function ke(B,p){return Ie(this,arguments,void 0,function*(s,h,S=null){var A;let O=h,F=S??h.userId,x=s+"_count",g=((A=h.type)===null||A===void 0?void 0:A.characterValue)+"_s_"+x,d=yield(0,we.A)("connection",g,!1,F,4,999),D=yield de(d.id,h.id,F,10,1),V=[],J=(0,te.o)();for(let oe=0;oe<D.length;oe++){let ue=yield(0,ce.A)(D[oe].toTheConceptId);V.push(ue)}if(V.length<1)J=yield(0,we.A)("count","1",!1,F,4,999);else{let oe=V[0],ue=0;try{ue=Number(oe.characterValue)}catch{ue=0}ue+=1,J=yield(0,we.A)("count",ue.toString(),!1,F,4,999);for(let me=0;me<D.length;me++)(0,le.m)(D[me].id)}let q=new K.N(0,O.id,J.id,O.userId,d.id,1e3,4);yield X.Y.AddConnection(q)})}function Le(B,p,s){return Ie(this,arguments,void 0,function*(h,S,A,O=!1,F=!1){var x,g;let d=h.userId;if(O){let q=A+"_by",oe=((x=S.type)===null||x===void 0?void 0:x.characterValue)+"_s_"+q;F&&(yield ke(q,S,d));let ue=yield(0,we.A)("connection",oe,!1,999,999,999),me=new K.N(0,S.id,h.id,d,ue.id,1e3,4);X.Y.AddConnection(me)}let D=A+"_s",V=((g=h.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+D;F&&(yield ke(D,h,d));let J=yield(0,we.A)("connection",V,!1,999,999,999);return yield ae(h.id,h.userId,S.id,J.id,1e3,4)})}var fe=y(5868),_e=(y(3655),function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})});function ge(B,p){const s=ye.V.logfunction("storeToDatabase",[B,"noindexdb"]);ye.V.logUpdate(s)}function Ce(B,p,s){return _e(this,void 0,void 0,function*(){const h=ye.V.logfunction("getFromDatabaseWithType",[B,"noindexdb"]);ye.V.logUpdate(h)})}function Te(B){return _e(this,void 0,void 0,function*(){const p=ye.V.logfunction("getObjectsFromIndexDb",[B,"noindexdb"]);ye.V.logUpdate(p)})}var Ee=y(1666),pe=y(4402),Ne=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function Be(B,p){var s=arguments;return Ne(this,arguments,void 0,function*(h,S,A=10,O=1){var F;const x=ye.V.logfunction("GetLink",s)||{};if(Pe){x.serviceWorker=!0;try{const J=yield Ve("GetLink",{id:h,linker:S,inpage:A,page:O});return ye.V.logUpdate(x),J.data}catch(J){console.error("GetLink sw error: ",J),(0,o.ey)(x,"GetLink",J),ze(J)}}let g=[],d=yield(0,ce.A)(h),D=((F=d.type)===null||F===void 0?void 0:F.characterValue)+"_s_"+S,V=yield(0,pe.A)(D,16);if(V.id>0){let J=yield de(V.id,d.id,d.userId,A,O),q=[];for(let oe=0;oe<J.length;oe++)q.push(J[oe].toTheConceptId);yield(0,v.Y)(q);for(let oe=0;oe<J.length;oe++){let ue=J[oe].toTheConceptId,me=yield(0,ce.A)(ue),Se=yield(0,i.Ez)(me.id);g.push(Se)}}return ye.V.logUpdate(x),g})}function be(B,p){var s=arguments;return Ne(this,arguments,void 0,function*(h,S,A=10,O=1){var F;const x=ye.V.logfunction("GetLinkRaw",s);let g=[],d=yield(0,ce.A)(h),D=((F=d.type)===null||F===void 0?void 0:F.characterValue)+"_s_"+S,V=yield(0,pe.A)(D,16);if(V.id>0){let J=yield de(V.id,d.id,d.userId,A,O),q=[];for(let oe=0;oe<J.length;oe++)q.push(J[oe].toTheConceptId);for(let oe=0;oe<J.length;oe++){let ue=J[oe].toTheConceptId,me=yield(0,ce.A)(ue);g.push(me)}}return ye.V.logUpdate(x),g})}var xe=y(8357),Oe=y(1708),Fe=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};const je=new Map;function $e(B,p){var s=arguments;return Fe(this,void 0,void 0,function*(){const h=ye.V.logfunction("MakeTheTypeConceptApi",s);let S=(0,te.o)();if(je.has(B))return je.get(B)||S;const A=Fe(this,void 0,void 0,function*(){try{if(S=yield(0,Oe.Az)(B),S.id==0||S.typeId==4){let O=(0,e.Xr)("application/x-www-form-urlencoded");const F=yield fetch(r.B.MakeTheTypeConceptUrl(),{method:"POST",headers:O,body:`type=${B}`});if(!F.ok)throw(0,o.ry)(F),new Error(`Error! status: ${F.status}`);S=yield F.json(),ye.V.logUpdate(h)}}catch(O){O instanceof Error?console.log("Make The Type Concept Api error : ",O.message):console.log("Make The Type Concept Api error : ",O),(0,o.Mb)(O,r.B.MakeTheTypeConceptUrl()),(0,o.ey)(h,"MakeTheTypeConceptApi",O)}finally{je.delete(B)}return S});return je.set(B,A),A})}var Jt=y(8675),Mr=y(6058),jo=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function $o(B){var p=arguments;return jo(this,void 0,void 0,function*(){const s=ye.V.logfunction("GetLinkerConnectionFromConcepts",p);let h=yield(0,Jt.l)(B);for(let S=0;S<h.length;S++){let A=h[S],O=A.typeId,F=yield(0,ce.A)(O);A.type=F}return ye.V.logUpdate(s),h})}function Ho(B){var p=arguments;return jo(this,void 0,void 0,function*(){const s=ye.V.logfunction("GetLinkerConnectionToConcepts",p);let h=yield(0,Mr.W)(B);for(let S=0;S<h.length;S++){let A=h[S],O=A.typeId,F=yield(0,ce.A)(O);A.type=F}return ye.V.logUpdate(s),h})}var Vr=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})},jr=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})},$r=y(6963),Xn=y(2202),Hr=y(5457),qr=y(991),qo=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function Zn(B){var p=arguments;return qo(this,void 0,void 0,function*(){const s=ye.V.logfunction("DeleteConceptById",p);if(Pe)try{return(yield Ve("DeleteConceptById",{id:B})).data}catch(O){console.error("DeleteConceptById sw error: ",O),ze(O)}if(B>0){var h=yield w.I.GetConcept(B);if(h.id>0){var S=h.typeId,A=h.characterValue;yield Hr.c.removeTypeConcept(S,B),yield $r.f.removeNodeByCharacter(A,B),yield function(O){var F=arguments;return jr(this,void 0,void 0,function*(){let x=!1;const g=ye.V.logfunction("DeleteTheConcept",F);try{const d=new FormData;d.append("id",O.toString());let D=(0,e.BZ)();const V=yield fetch(r.B.DeleteConceptUrl(),{method:"POST",headers:D,body:d});V.ok?x=(yield V.json()).success:(console.log("Delete concept error",V.status),(0,o.ry)(V)),x&&w.I.AddNpc(O),ye.V.logUpdate(g)}catch(d){d instanceof Error?console.log("Delete concept error message: ",d.message):console.log("Delete concept unexpected error: ",d),(0,o.Mb)(d,r.B.DeleteConceptUrl()),(0,o.ey)(g,"DeleteTheConcept",d)}return x})}(B),yield Xn.W.removeNodeFromTree(B),yield qr.H.removeNodeFromTree(B)}}else C.v.RemoveConceptById(B);ye.V.logUpdate(s)})}function zo(B){return qo(this,void 0,void 0,function*(){if(Pe)try{return(yield Ve("DeleteUser",{id:B})).data}catch(p){console.error("DeleteUser sw error: ",p),ze(p)}B>0?function(p){var s=arguments;Vr(this,void 0,void 0,function*(){const h=ye.V.logfunction("DeleteUserInBackend",s);try{var S=(0,e.ab)("application/json","");let A=r.B.DeleteUserUrl();A=A+"?conceptId="+p+"&apiKey=freeschema";const O=yield fetch(A,{method:"POST",headers:S});if(O.ok){let F=yield O.json(),x=Number(F.data);return console.log("this is the delete email concept",x),Zn(x),ye.V.logUpdate(h),x}throw(0,o.ry)(O),new Error(`Delete composition Error! status: ${O.status}`)}catch(A){A instanceof Error?console.log("Delete composition error message: ",A.message):console.log("Delete composition unexpected error: ",A),(0,o.Mb)(A,r.B.DeleteConceptUrl()),(0,o.ey)(h,"DeleteUserInBackend",A)}})}(B):C.v.RemoveConceptById(B)})}var zr=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function Jo(B,p){return zr(this,void 0,void 0,function*(){try{const s=new Headers;s.append("Authorization","Bearer "+p);const h=new FormData;h.append("id",B.toString());const S=yield fetch(r.B.DeleteConceptUrl(),{method:"POST",body:h,headers:s});if(!S.ok)throw(0,o.ry)(S),new Error(`Delete composition Error! status: ${S.status}`)}catch(s){s instanceof Error?console.log("Delete composition error message: ",s.message):console.log("Delete composition unexpected error: ",s),(0,o.Mb)(s,r.B.DeleteConceptUrl())}})}var bn=y(1735),jt=y(8286),Jr=y(1596),Ke=y(3278),Qo=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})},Qr=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function Yo(B){var p=arguments;return Qr(this,void 0,void 0,function*(){const s=ye.V.logfunction("GetConnectionById",p);if(console.log("AccessTracker activation status from GetConnectionById"),bn.J.activateStatus===!0)try{bn.J.incrementConnection(B)}catch{console.error("Error adding connection in access tracker"),ye.V.log("ERROR","Error Adding Connection")}if(Pe)try{return(yield Ve("GetConnectionById",{id:B})).data}catch(S){console.error("GetConnectionById sw error: ",S),ze(S)}let h=yield jt.d.GetConnection(B);return h!=null&&h.id!=0||B==null||B==null||(h=yield function(S){var A=arguments;return Qo(this,void 0,void 0,function*(){const O=ye.V.logfunction("GetConnection",A);let F=yield jt.d.GetConnection(S);try{if(F.id!=0)return F;{const x=new FormData;x.append("id",S.toString());const g={method:"POST",headers:{Authorization:"Bearer "+Ke.b.BearerAccessToken},body:x};let d;try{d=yield fetch(r.B.GetConnectionUrl(),g)}catch{d=yield(0,Jr.g)(g,"/api/get-connection-by-id")}return yield function(D,V){return Qo(this,void 0,void 0,function*(){D.ok?(V=yield D.json(),jt.d.AddConnection(V)):((0,o.ry)(D),console.log("Get Connection Error",D.status))})}(d,F),ye.V.logUpdate(O),F}}catch(x){x instanceof Error?console.log("Get Connection error message: ",x.message):console.log("Get Connection unexpected error: ",x),(0,o.Mb)(x,r.B.GetConnectionUrl()),(0,o.ey)(O,"GetConnection",x)}})}(B)),ye.V.logUpdate(s),h})}var Yr=y(2212),Xr=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})},Zr=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function Xo(B,p,s){return Zr(this,arguments,void 0,function*(h,S,A,O=4,F=999){const x=ye.V.logfunction("MakeTheTimestamp")||{};if(Pe){x.serviceWorker=!0;try{const q=yield Ve("MakeTheTimestamp",{type:h,referent:S,userId:A,accessId:O,sessionInformationId:F});return ye.V.logUpdate(x),q.data}catch(q){console.error("MakeTheTimestamp sw error: ",q),(0,o.ey)(x,"MakeTheTimestamp",q),ze(q)}}let g,d="",D=h.startsWith("the_"),V=(0,te.o)();return d=D?h:"the_"+h,V=yield $e(d,A),g=yield function(q,oe,ue,me,Se,he,Ae){return Xr(this,void 0,void 0,function*(){let De=yield(0,pe.A)(q,me),We=De;return We.id==0&&(De=yield(0,Yr.Ay)(q,oe,4,me,0,he,Ae),We=De),We})}(S,A,0,V.id,0,O,d),ye.V.logUpdate(x),g})}class tn{constructor(){this.composition=0,this.type="",this.linker="",this.inpage=10,this.page=1,this.listLinkers=[],this.fullLinkers=[],this.textSearch="",this.logic="or",this.reverse=!1,this.doFilter=!1,this.filterSearches=[],this.selectors=[],this.ofCompositions=[]}}var et=y(6687),Ln=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function Zo(){var B=arguments;return Ln(this,arguments,void 0,function*(p=0,s=[],h="",S=[]){const A=ye.V.logfunction("RecursiveSearchApi",B)||{};let O=[];try{if(Pe){A.serviceWorker=!0;try{const D=yield Ve("RecursiveSearchApi",{composition:p,listLinkers:s,textSearch:h,fullLinkers:S});return ye.V.logUpdate(A),D.data}catch(D){console.error("RecursiveSearchApi sw error: ",D),(0,o.ey)(A,"RecursiveSearchApi",D),ze(D)}}let F=new tn;F.composition=p,F.listLinkers=s,F.fullLinkers=S,F.textSearch=h;let x=JSON.stringify(F),g=(0,e.Xr)();const d=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:g,body:x});if(d.ok){const D=yield d.json();let V=D.compositionIds,J=D.internalConnections;D.externalConnections,O=yield(0,et.p8)(V,J)}else console.log("recursive search error ",d.status),(0,o.ey)(A,"RecursiveSearchApi",d.status),(0,o.ry)(d);ye.V.logUpdate(A)}catch(F){F instanceof Error?console.log("recursive search error message: ",F.message):console.log("recursive search unexpected error: ",F),(0,o.ey)(A,"RecursiveSearchApi",F),(0,o.Mb)(F,r.B.RecursiveSearchUrl())}return O})}function Ko(){var B=arguments;return Ln(this,arguments,void 0,function*(p=0,s=[],h=""){const S=ye.V.logfunction("RecursiveSearchApiWithInternalConnections",B)||{};let A=[];try{if(Pe){S.serviceWorker=!0;try{const d=yield Ve("RecursiveSearchApiWithInternalConnections",{composition:p,listLinkers:s,textSearch:h});return ye.V.logUpdate(S),d.data}catch(d){console.error("RecursiveSearchApiWithInternalConnections sw error: ",d),(0,o.ey)(S,"RecursiveSearchApiWithInternalConnections",d),ze(d)}}let O=new tn;O.composition=p,O.listLinkers=s,O.textSearch=h;let F=JSON.stringify(O),x=(0,e.Xr)();const g=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:x,body:F});if(g.ok){const d=yield g.json();let D=d.compositionIds,V=d.internalConnections;d.externalConnections,A=yield(0,et.km)(D,V),ye.V.logUpdate(S)}else console.log("recursive search error ",g.status),(0,o.ey)(S,"GetCompositionConnectionsBetweenTwoConcepts",g.status),(0,o.ry)(g)}catch(O){O instanceof Error?console.log("recursive search error message: ",O.message):console.log("recursive search unexpected error: ",O),(0,o.ey)(S,"GetCompositionConnectionsBetweenTwoConcepts",O),(0,o.Mb)(O,r.B.RecursiveSearchUrl())}return A})}function Kn(){var B=arguments;return Ln(this,arguments,void 0,function*(p=0,s=[],h="",S=[]){const A=ye.V.logfunction("RecursiveSearchApiRaw",B)||{};try{if(Pe){A.serviceWorker=!0;try{const d=yield Ve("RecursiveSearchApiRaw",{composition:p,listLinkers:s,textSearch:h,fullLinkers:S});return ye.V.logUpdate(A),d.data}catch(d){console.error("RecursiveSearchApiRaw sw error: ",d),(0,o.ey)(A,"RecursiveSearchApiRaw",d),ze(d)}}let O=new tn;O.composition=p,O.listLinkers=s,O.textSearch=h,O.fullLinkers=S;let F=JSON.stringify(O),x=(0,e.Xr)();const g=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:x,body:F});if(g.ok){const d=yield g.json();return d.compositionIds,d.internalConnections,d.externalConnections,ye.V.logUpdate(A),d}return console.log("recursive search error ",g.status),(0,o.ey)(A,"RecursiveSearchApiRaw",g.status),(0,o.ry)(g),ye.V.logUpdate(A),[]}catch(O){O instanceof Error?console.log("recursive search error message: ",O.message):console.log("recursive search unexpected error: ",O),(0,o.ey)(A,"RecursiveSearchApiRaw",O),(0,o.Mb)(O,r.B.RecursiveSearchUrl())}})}function ei(){var B=arguments;return Ln(this,arguments,void 0,function*(p=0,s=[],h=""){const S=ye.V.logfunction("RecursiveSearchApiRawFullLinker",B)||{};try{if(Pe){S.serviceWorker=!0;try{const g=yield Ve("RecursiveSearchApiRawFullLinker",{composition:p,fullLinkers:s,textSearch:h});return ye.V.logUpdate(S),g.data}catch(g){console.error("RecursiveSearchApiRawFullLinker sw error: ",g),(0,o.ey)(S,"RecursiveSearchApiRawFullLinker",g),ze(g)}}let A=new tn;A.composition=p,A.fullLinkers=s,A.textSearch=h;let O=JSON.stringify(A),F=(0,e.Xr)();const x=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:F,body:O});if(x.ok){const g=yield x.json();return g.compositionIds,g.internalConnections,g.externalConnections,ye.V.logUpdate(S),g}return console.log("recursive search error ",x.status),(0,o.ey)(S,"RecursiveSearchApiRawFullLinker",x.status),(0,o.ry)(x),ye.V.logUpdate(S),[]}catch(A){A instanceof Error?console.log("recursive search error message: ",A.message):console.log("recursive search unexpected error: ",A),(0,o.Mb)(A,r.B.RecursiveSearchUrl()),(0,o.ey)(S,"RecursiveSearchApiRawFullLinker",A)}})}function ti(){var B=arguments;return Ln(this,arguments,void 0,function*(p=0,s=[],h=""){const S=ye.V.logfunction("RecursiveSearchApiRawFullLinker",B)||{};try{if(Pe)try{S.serviceWorker=!0;const g=yield Ve("RecursiveSearchApiNewRawFullLinker",{composition:p,fullLinkers:s,textSearch:h});return ye.V.logUpdate(S),g.data}catch(g){console.error("RecursiveSearchApiNewRawFullLinker sw error: ",g),(0,o.ey)(S,"RecursiveSearchApiNewRawFullLinker",g),ze(g)}let A=new tn;A.composition=p,A.fullLinkers=s,A.textSearch=h;let O=JSON.stringify(A),F=(0,e.Xr)();const x=yield fetch(r.B.RecursiveSearchUrl(),{method:"POST",headers:F,body:O});if(x.ok){const g=yield x.json();return g.compositionIds,g.internalConnections,g.externalConnections,ye.V.logUpdate(S),g}return console.log("recursive search error ",x.status),(0,o.ey)(S,"RecursiveSearchApiNewRawFullLinker",x.status),(0,o.ry)(x),ye.V.logUpdate(S),[]}catch(A){A instanceof Error?console.log("recursive search error message: ",A.message):console.log("recursive search unexpected error: ",A),(0,o.Mb)(A,r.B.RecursiveSearchUrl()),(0,o.ey)(S,"RecursiveSearchApiNewRawFullLinker",A)}})}var Dn=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};const eo=["image/jpeg","image/jpg","image/png","image/webp"],to=["application/msword","application/vnd.ms-excel","application/vnd.ms-powerpoint","text/plain","application/pdf"];function ni(B,p){return Dn(this,void 0,void 0,function*(){const s=ye.V.logfunction("uploadAttachment");try{console.log("File Type",B.type);const h=new FormData;let S;if(to.includes(B.type))h.append("file",B,B.name),S=yield oo(h,p);else{if(!eo.includes(B.type))return{message:"Invalid File Format",success:!1};h.append("image",B,B.name),S=yield no(h,p)}return S?.data?(ye.V.logUpdate(s),{message:"Upload Success",success:!0,url:S.data}):{message:"File Upload Failed",success:!1}}catch(h){throw console.error(h),(0,o.ey)(s,"uploadAttachment",h),h}})}function no(B){return Dn(this,arguments,void 0,function*(p,s=""){const h=ye.V.logfunction("uploadImage");try{const S=yield fetch(r.B.uploadImageUrl(),{method:"POST",body:p,headers:{Authorization:`Bearer ${s}`}});if(!S.ok){const A=S.headers.get("content-type");A&&A.includes("text/plain")&&console.info(S?.text());const O=yield S?.text();return console.error(`${S.status} ${O}`),ye.V.logUpdate(h),null}return yield S.json()}catch(S){return console.error(S),(0,o.ey)(h,"uploadImage",S),null}})}function oi(B){return Dn(this,arguments,void 0,function*(p,s=""){const h=ye.V.logfunction("uploadImageV2");try{const S=yield fetch(r.B.uploadImageUrlWithSmall(),{method:"POST",body:p,headers:{Authorization:`Bearer ${s}`}});if(!S.ok){const A=S.headers.get("content-type");A&&A.includes("text/plain")&&console.info(S?.text());const O=yield S?.text();return console.error(`${S.status} ${O}`),ye.V.logUpdate(h),null}return yield S.json()}catch(S){return console.error(S),(0,o.ey)(h,"uploadImageV2",S),null}})}function oo(B){return Dn(this,arguments,void 0,function*(p,s=""){const h=ye.V.logfunction("uploadFile");try{const S=yield fetch(r.B.uploadFileUrl(),{method:"POST",body:p,headers:{Authorization:`Bearer ${s}`}});if(!S.ok){const A=S.headers.get("content-type");A&&A.includes("text/plain")&&console.info(S.text());const O=yield S.text();return console.error(`${S.status} ${O}`),null}return ye.V.logUpdate(h),yield S.json()}catch(S){return console.error(S),(0,o.ey)(h,"uploadFile",S),null}})}var Cn=y(1239),Fn=y(7467),Kr=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function ii(B,p){var s=arguments;return Kr(this,arguments,void 0,function*(h,S,A="boomconsole.com"){const O=ye.V.logfunction("LoginToBackend",s);try{let F={email:h,password:S,application:A},x=new Headers;x.append("Content-Type","application/json");let g=JSON.stringify(F);const d=yield fetch(r.B.LoginUrl(),{method:"POST",headers:x,body:g}),D=yield d.json();if(d.ok)return Ke.b.BearerAccessToken=D.data.token,ye.V.logUpdate(O),D;console.log("Login tsccs error message: ",d.status),(0,o.ER)(d,D)}catch(F){F instanceof Error?console.log("Login tsccs error message: ",F.message):console.log(" Login tsccs  unexpected error: ",F),(0,o.Mb)(F,r.B.LoginUrl()),(0,o.ey)(O,"LoginToBackend",F)}})}var io=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function ri(B){return io(this,void 0,void 0,function*(){return yield function(){return io(this,arguments,void 0,function*(s="",h={}){let S={message:"success",status:!1,statusCode:200,data:"cannot signup"};try{const A=yield fetch(s,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(h)}),O=yield A.json();return A.ok?S={message:"success",status:!0,statusCode:200,data:O}:(0,o.ER)(A,O),S}catch(A){console.log("Signup Error: ",A),(0,o.Mb)(A,s)}})}(r.B.SignupUrl(),B)})}function si(B){return io(this,void 0,void 0,function*(){const p=r.B.NODE_URL,s=yield fetch(`${p}/api/v1/entity/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});if(s.ok)return s.json();throw s.status===404?new Error("404, Not found"):s.status===500?new Error("500, internal server error"):new Error(s.status)})}var es=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function ai(B){return es(this,void 0,void 0,function*(){const p=JSON.stringify({email:B.email,password:B.password});let s={message:"success",status:!1,statusCode:200,data:""};const h=new Headers;h.append("Content-Type","application/json");const S=r.B.LoginUrl();try{const A=yield fetch(S,{method:"POST",headers:h,body:p,redirect:"follow"}),O=yield A.json();return A.ok?s={message:"success",status:!0,statusCode:200,data:O?.data}:(0,o.ER)(A,O),s}catch(A){console.log("Sign in api error",A),(0,o.Mb)(A,S)}})}var ro=y(9934),Pn=y(4485);function ts(B=[],p){Array.isArray(B)&&B.splice(B.findIndex(function(s){return s.id===p.id}),1)}function ns(B=[],p){Array.isArray(B)&&B.splice(B.findIndex(function(s){return s.id===p.id}),1)}class so{constructor(p,s,h,S){this.expiryTime=new Date(Date.now()+6e5),this.height=1,this.key=p,this.value=s,this.leftNode=h,this.rightNode=S}isValid(){const p=new Date(Date.now());return!(this.expiryTime<p&&(Qt.removeNodeFromTree(this.key),1))}saveToCache(p){this.value.cached=p}addNode(p,s,h){if(s==null)return p;const S=s.leftNode,A=s.rightNode;if(s.key>p.key)s.leftNode=this.addNode(p,S,h);else{if(!(s.key<p.key))return this.isValid(),p;s.rightNode=this.addNode(p,A,h)}s.height=1+Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode));const O=this.getBalanceFactor(s);if(O>1&&s.leftNode){if(p.key<s.leftNode.key)return this.rightRotate(s);if(p.key>s.leftNode.key)return s.leftNode=this.leftRotate(s.leftNode),this.rightRotate(s)}if(O<-1&&s.rightNode){if(p.key>s.rightNode.key)return this.leftRotate(s);if(p.key<s.rightNode.key)return s.rightNode=this.rightRotate(s.rightNode),this.leftRotate(s)}return this.isValid(),s}rightRotate(p){if(p){const s=p.leftNode;if(s){const h=s.rightNode;return p.leftNode=h,s.rightNode=p,p.height=Math.max(this.getHeight(p.leftNode),this.getHeight(p.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,s}}return p}leftRotate(p){if(p){const s=p.rightNode;if(s){const h=s.leftNode;return s.leftNode=p,p.rightNode=h,p.height=Math.max(this.getHeight(p.leftNode),this.getHeight(p.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(p.rightNode))+1,s}}return p}getHeight(p){return p?p.height:0}getBalanceFactor(p){return p==null?0:this.getHeight(p.leftNode)-this.getHeight(p.rightNode)}getFromNode(p,s){return s&&(p==s.key&&s.isValid()?s:p<s.key?this.getFromNode(p,s.leftNode):p>s.key?this.getFromNode(p,s.rightNode):s)}removeNode(p,s){if(p==null)return p;if(p.key>s)return p.leftNode=this.removeNode(p.leftNode,s),p;if(p.key<s)return p.rightNode=this.removeNode(p.rightNode,s),p;if(p.leftNode==null){const h=p.rightNode;return p=null,h}if(p.rightNode==null){const h=p.leftNode;return p=null,h}{const h=this.inOrderSuccessor(p.rightNode);return p.value=h.value,p.key=h.key,p.rightNode=this.removeNode(p.rightNode,h.key),p}}countNodeBelow(p){return p==null?0:1+this.countNodeBelow(p.leftNode)+this.countNodeBelow(p.rightNode)}inOrderSuccessor(p){for(;p.leftNode!=null;)p=p.leftNode;return p}}var ci=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};class Qt{static addNodeToTree(p){if(this.root==null)return this.root=p,this.root;this.root=this.root.addNode(p,this.root,this.root.height)}static addCompositionToTree(p){const s=new so(p.id,p,null,null);this.addNodeToTree(s)}static getNodeFromTree(p){return ci(this,void 0,void 0,function*(){return this.root?this.root.getFromNode(p,this.root):null})}static removeNodeFromTree(p){return ci(this,void 0,void 0,function*(){this.root&&(this.root=this.root.removeNode(this.root,p))})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}Qt.root=null;var os=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function wn(B,p,s,h){return os(this,arguments,void 0,function*(S,A,O,F,x=[]){var g,d;let D={};const V=[];if(S==0)return"";let J=ao(O,S);if(J!=null&&J.id!=0||S==null||S==null||(J=yield(0,ce.A)(S)),J.id!=0&&J.type==null){const q=J.typeId;let oe=ao(O,q);J.type=oe,oe==null&&q!=null&&q!=null&&(oe=yield(0,ce.A)(q),J.type=oe)}if(!F.includes(S))return J?.characterValue;if(x.includes(S))return"";x.push(S);for(let q=0;q<A.length;q++)if(A[q].ofTheConceptId==S){const oe=A[q].toTheConceptId;if(F.includes(S)){let ue=ao(O,oe);if(ue!=null&&ue.id!=0||oe==null||oe==null||(ue=yield(0,ce.A)(oe)),ue.id!=0&&ue?.type==null){const he=ue.typeId;let Ae=yield w.I.GetConcept(he);ue.type=Ae,Ae==null&&he!=null&&he!=null&&(Ae=yield(0,ce.A)(he),ue.type=Ae)}const me="the_",Se=((d=(g=ue?.type)===null||g===void 0?void 0:g.characterValue)!==null&&d!==void 0?d:"").replace(me,"");if(isNaN(Number(Se))){if(Se){const he=yield wn(oe,A,O,F,x);D[Se]=he}}else{const he=yield wn(oe,A,O,F,x);V[Se]=he,D=V}}}return D})}function ao(B,p){let s=(0,te.o)();for(let h=0;h<B.length;h++)if(p==B[h].id)return s=B[h],s;return s}class _n{constructor(){this.id=0,this.mainConcept=(0,te.o)(),this.connections=[],this.concepts=[],this.subcompositions=[],this.cached={}}updateCache(){return p=this,s=void 0,S=function*(){if(this.mainConcept.id==0)for(let A=0;A<this.concepts.length;A++)this.concepts[A].id==this.id&&(this.mainConcept=this.concepts[A]);this.cached=yield wn(this.id,this.connections,this.concepts,this.subcompositions,[])},new((h=void 0)||(h=Promise))(function(A,O){function F(d){try{g(S.next(d))}catch(D){O(D)}}function x(d){try{g(S.throw(d))}catch(D){O(D)}}function g(d){var D;d.done?A(d.value):(D=d.value,D instanceof h?D:new h(function(V){V(D)})).then(F,x)}g((S=S.apply(p,s||[])).next())});var p,s,h,S}UpdateAcrossDistributedSystem(){var p,s;try{this.id!=0&&(s=(p=this.id)===null||p===void 0?void 0:p.toString(),r.B.MQTT_CONNECTION&&r.B.MQTT_CONNECTION.publish("compositionUpdate",s))}catch(h){console.log("Error while publishing message",h)}}isUpdating(){this.UpdateAcrossDistributedSystem()}GetDataCache(){var p,s,h;const S={};S[(h=(s=(p=this.mainConcept)===null||p===void 0?void 0:p.type)===null||s===void 0?void 0:s.characterValue)!==null&&h!==void 0?h:""]=this.cached;const A={};return A.data=S,A.id=this.id,A}}var is=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function xn(B){return is(this,arguments,void 0,function*(p,s=null,h=null,S=null,A=null,O=null,F=null,x=null){const g=A??999,d=O??4,D=F??999;let V=S??0,J=(0,te.o)();x==null&&(x=new _n);for(const q in p)if(typeof p[q]=="object"||Array.isArray(p[q])){const oe=yield(0,we.A)(q,"",!0,g,d,D);if(s==null&&h==null){let ue=V;J=oe,ue=oe.id,V=oe.id,x.concepts.push(oe),x.id=oe.id,yield xn(p[q],oe.id,oe.userId,ue,A,O,F,x)}else{const ue=s??999,me=h??999,Se=V;J=oe,x.concepts.push(oe);const he=yield(0,Ee.q)(ue,me,oe.id,Se);x.connections.push(he),yield xn(p[q],oe.id,oe.userId,Se,A,O,F,x)}p[q]!=null&&p[q]!=null&&x.subcompositions.push(oe.id)}else{const oe=s??999,ue=h??999,me=V,Se=yield(0,we.A)(q,p[q],!1,g,d,D);x.concepts.push(Se);const he=yield(0,Ee.q)(oe,ue,Se.id,me);x.connections.push(he)}return J})}var rs=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function li(B){return rs(this,void 0,void 0,function*(){const p=ye.V.logfunction("UpdateComposition")||{};if(Pe){p.serviceWorker=!0;try{const he=yield Ve("UpdateComposition",{patcherStructure:B});return ye.V.logUpdate(p),he.data}catch(he){console.error("UpdateComposition sw error: ",he),(0,o.ey)(p,"UpdateComposition",he),ze(he)}}const s=B.userId,h=B.sessionId,S=B.accessId;let A=[];const O=[];let F=(0,te.o)(),x=(0,te.o)();const g=[];let d=B.compositionId;const D=B.ofTheCompositionId;let V=[];if(d<0){let he=yield(0,ce.A)(d,s);if(!(he.id>0))return null;d=he.id}A=yield(0,Z.s)(d);const J=[],q=new _n,oe=[];q.id=d,q.isUpdating();let ue=[];for(let he=0;he<A.length;he++)(0,ro.A)(oe,A[he].ofTheConceptId),(0,ro.A)(J,A[he].ofTheConceptId),(0,ro.A)(J,A[he].toTheConceptId),ue.push(A[he].ofTheConceptId);q.subcompositions=oe,q.connections=A;for(let he=0;he<J.length;he++){const Ae=yield(0,ce.A)(J[he]);d==J[he]&&(F=Ae),D==J[he]&&(x=Ae),O.push(Ae)}const me=B.patchObject;for(const he in me){let Ae=(0,te.o)();const De=me[he];let We=F;if(x.id>0&&(We=x),Array.isArray(De)||typeof De=="object"){Ae=yield(0,we.A)(he,"",!0,F.userId,4,999),q.subcompositions.push(Ae.id);const Je=(0,Pn.vo)(O,Ae);for(let Ze=0;Ze<Je.length;Ze++)if(Je[Ze].id>0){const at=(0,Pn.wS)(q.connections,Je[Ze].id);V=V.concat(at),g.push(Je[Ze])}yield xn(me[he],Ae.id,Ae.userId,F.id,F.userId,4,999,q)}else{Ae=yield(0,we.A)(he,De,!1,s,S,h);const Je=(0,Pn.vo)(O,Ae);for(let Ze=0;Ze<Je.length;Ze++)if(Je[Ze].id>0){const at=(0,Pn.wS)(q.connections,Je[Ze].id);V=V.concat(at),g.push(Je[Ze])}}const He=(0,Ee.q)(We.id,We.userId,Ae.id,F.id);O.push(Ae),q.connections.push(He)}for(let he=0;he<V.length;he++)ns(q.connections,V[he]),(0,le.m)(V[he].id);for(let he=0;he<g.length;he++)ts(O,g[he]);q.concepts=q.concepts.concat(O),q.mainConcept=F,q.id=F.id,yield q.updateCache(),Qt.addCompositionToTree(q),X.Y.SyncDataOnline();let Se=q.GetDataCache();return ye.V.logUpdate(p),Se})}var ss=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function di(B,p,s,h){return ss(this,arguments,void 0,function*(S,A,O,F,x=10,g=1){var d=(0,e.ab)("application/x-www-form-urlencoded",F),D=new URLSearchParams;D.append("type",S),D.append("search",A),D.append("composition",O),D.append("inpage",x.toString()),D.append("page",g.toString());const V=r.B.SearchCompositionsUrl()+"?"+D.toString();try{const J=yield fetch(V,{method:"GET",headers:d});return J.ok?yield J.json():((0,o.ry)(J),[])}catch(J){console.log("This is the searching error",J),(0,o.Mb)(J,V)}})}var as=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function ui(B){return as(this,arguments,void 0,function*(p,s=""){var h=(0,e.ab)("application/json",s);const S=r.B.SearchLinkMultipleAll(),A=JSON.stringify(p);try{const O=yield fetch(S,{method:"POST",headers:h,body:A});return O.ok?yield O.json():(console.log("This is the searching error",O.status),(0,o.ry)(O),[])}catch(O){console.log("This is the searching error",O),(0,o.Mb)(O,S)}})}var hi=y(7139),En=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function pi(B){return En(this,arguments,void 0,function*(p,s=[]){var h,S;let A=[];const O=[];let F={},x={};const g=yield Qt.getNodeFromTree(p),d=[];let D=yield w.I.GetConcept(p);if(D.id==0&&p!=null&&p!=null&&(D=yield(0,hi.r)(p)),g==null){let V=[];V=s.length>0?fi(p,s):yield(0,Z.s)(p),A=V;for(let q=0;q<A.length;q++)d.includes(A[q].ofTheConceptId)||(d.push(A[q].ofTheConceptId),O.push(A[q].ofTheConceptId)),O.includes(A[q].toTheConceptId)||O.push(A[q].toTheConceptId);gi(D,A,O,d);let J=[];x=yield(0,i.zN)(p,A,d,J),F[(S=(h=D?.type)===null||h===void 0?void 0:h.characterValue)!==null&&S!==void 0?S:""]=x}else x=g.value.GetDataCache(),F=x;return D.id==0?"":F})}function fi(B,p){const s=[];for(let h=0;h<p.length;h++)p[h].typeId==B&&s.push(p[h]);return s}function co(B){return En(this,arguments,void 0,function*(p,s=[]){var h,S;let A={},O=[];const F=[];let x;const g={},d=yield Qt.getNodeFromTree(p),D=[];let V=yield w.I.GetConcept(p);if(V.id==0&&p!=null&&p!=null&&(V=yield(0,hi.r)(p)),d==null){let J=[];J=s.length>0?fi(p,s):yield(0,Z.s)(p),O=J;for(let q=0;q<O.length;q++)D.includes(O[q].ofTheConceptId)||(D.push(O[q].ofTheConceptId),F.push(O[q].ofTheConceptId)),F.includes(O[q].toTheConceptId)||F.push(O[q].toTheConceptId);gi(V,O,F,D),x=yield(0,i.zN)(p,O,D),g[(S=(h=V?.type)===null||h===void 0?void 0:h.characterValue)!==null&&S!==void 0?S:""]=x,A.created_at=V.entryTimeStamp,A.data=g,A.id=p}else x=d.value.GetDataCache(),A=x;return V.id==0?"":A})}function yi(B,p){return En(this,void 0,void 0,function*(){let s=[];const h=[];s=yield(0,Fn.j)(p);for(let S=0;S<B.length;S++){const A=yield co(B[S],s);A&&h.push(A)}return h})}function gi(B,p,s,h){return En(this,void 0,void 0,function*(){const S=new _n,A=yield function(F){return En(this,void 0,void 0,function*(){let x=[];const g=[];for(let d=0;d<F?.length;d++){const D=yield w.I.GetConcept(F[d]);D.id==0?g.push(F[d]):x.push(D)}return g?.length==0||(x=yield(0,Cn.I)(g)),x})}(s);S.connections=p,S.concepts=A,S.id=B.id,S.subcompositions=h,S.mainConcept=B;const O=yield wn(B.id,p,A,h,[]);S.cached=O,Qt.addCompositionToTree(S)})}var cs=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function vi(B){return cs(this,void 0,void 0,function*(){try{var p=(0,e.Xr)();const s=JSON.stringify(B),h=yield fetch(r.B.CreateSessionId(),{method:"POST",headers:p,body:s});return h.ok?h.json():(console.log("Creating session failed",yield h.json()),(0,o.ry)(h),null)}catch(s){console.log("Creating session failed",s),(0,o.Mb)(s,r.B.CreateSessionId())}})}var ls=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function mi(B,p){return ls(this,void 0,void 0,function*(){try{var s=(0,e.Xr)("application/x-www-form-urlencoded");const h=new URLSearchParams;h.append("sessionId",B.toString()),h.append("url",p);const S=yield fetch(r.B.CreateSessionVisitUrl(),{method:"POST",headers:s,body:h});return S.ok?S.json():(console.log("Creating session url failed",yield S.json()),(0,o.ry)(S),null)}catch(h){console.log("Creating session url failed",h),(0,o.Mb)(h,r.B.CreateSessionVisitUrl())}})}var ds=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function Ci(B,p,s){return ds(this,arguments,void 0,function*(h,S,A,O=10,F=1){let x=[];try{var g=new URLSearchParams;g.append("typeId",`${h}`),g.append("toTheConceptId",`${S}`),g.append("userId",`${A}`),g.append("inpage",`${O}`),g.append("page",`${F}`);var d=(0,e.Xr)("application/x-www-form-urlencoded");const D=yield fetch(r.B.GetAllConnectionsToConceptUrl(),{method:"POST",headers:d,body:g});return D.ok?x=yield D.json():(console.log("Get connection of concept error",D.status),(0,o.ry)(D)),x}catch(D){throw D instanceof Error?console.log("Get connection of concept  error message: ",D.message):console.log("Get connection of concept unexpected error: ",D),D}})}var wi=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function lo(B,p){var s=arguments;return wi(this,arguments,void 0,function*(h,S,A=10,O=1,F=!1){const x=ye.V.logfunction("GetRelation",s)||{};if(Pe){x.serviceWorker=!0;try{const q=yield Ve("GetRelation",{id:h,relation:S,inpage:A,page:O,reverse:F});return ye.V.logUpdate(x),q.data}catch(q){console.error("GetRelation error sw: ",q),(0,o.ey)(x,"GetRelation",q),ze(q)}}let g=[],d=yield(0,ce.A)(h),D=yield(0,Oe.Az)(S),V=[];if(D.id>0)if(F){V=yield Ci(D.id,d.id,d.userId,A,O);let q=[];for(var J=0;J<V.length;J++)q.push(V[J].ofTheConceptId);yield(0,v.Y)(q);for(let oe=0;oe<V.length;oe++){let ue=V[oe].ofTheConceptId,me=yield(0,ce.A)(ue),Se=yield(0,i.Ez)(me.id);g.push(Se)}}else{V=yield de(D.id,d.id,d.userId,A,O);let q=[];for(let oe=0;oe<V.length;oe++)q.push(V[oe].toTheConceptId);yield(0,v.Y)(q);for(let oe=0;oe<V.length;oe++){let ue=V[oe].toTheConceptId,me=yield(0,ce.A)(ue),Se=yield(0,i.Ez)(me.id);g.push(Se)}}return ye.V.logUpdate(x),g})}function Ti(B,p){var s=arguments;return wi(this,arguments,void 0,function*(h,S,A=10,O=1,F=!1){const x=ye.V.logfunction("GetRelationRaw",s)||{};if(Pe){x.serviceWorker=!0;try{const oe=yield Ve("GetRelationRaw",{id:h,relation:S,inpage:A,page:O,reverse:F});return ye.V.logUpdate(x),oe.data}catch(oe){console.error("GetRelationRaw error sw: ",oe),(0,o.ey)(x,"GetRelationRaw",oe),ze(oe)}}let g=[],d=yield(0,ce.A)(h),D=yield(0,Oe.Az)(S),V=[],J=[];if(D.id>0){if(F){V=yield Ci(D.id,d.id,d.userId,A,O);for(var q=0;q<V.length;q++)J.push(V[q].ofTheConceptId)}else{V=yield de(D.id,d.id,d.userId,A,O);for(let oe=0;oe<V.length;oe++)J.push(V[oe].toTheConceptId)}g=yield(0,Cn.r)(J)}return ye.V.logUpdate(x),g})}var uo=y(6416),Dt=y(4711);class us{constructor(p,s,h,S){this.value=[],this.height=1,this.key=p,this.value.push(s),this.leftNode=h,this.rightNode=S}addNode(p,s,h){if(s==null)return p;var S=s.leftNode,A=s.rightNode;if(s.key>p.key)s.leftNode=this.addNode(p,S,h);else{if(!(s.key<p.key))return s.value.push(...p.value),s;s.rightNode=this.addNode(p,A,h)}s.height=1+Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode));let O=this.getBalanceFactor(s);if(O>1&&s.leftNode){if(p.key<s.leftNode.key)return this.rightRotate(s);if(p.key>s.leftNode.key)return s.leftNode=this.leftRotate(s.leftNode),this.rightRotate(s)}if(O<-1&&s.rightNode){if(p.key>s.rightNode.key)return this.leftRotate(s);if(p.key<s.rightNode.key)return s.rightNode=this.rightRotate(s.rightNode),this.leftRotate(s)}return s}rightRotate(p){if(p){let s=p.leftNode;if(s){let h=s.rightNode;return p.leftNode=h,s.rightNode=p,p.height=Math.max(this.getHeight(p.leftNode),this.getHeight(p.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(s.rightNode))+1,s}}return p}leftRotate(p){if(p){let s=p.rightNode;if(s){let h=s.leftNode;return s.leftNode=p,p.rightNode=h,p.height=Math.max(this.getHeight(p.leftNode),this.getHeight(p.rightNode))+1,s.height=Math.max(this.getHeight(s.leftNode),this.getHeight(p.rightNode))+1,s}}return p}getHeight(p){return p?p.height:0}getBalanceFactor(p){return p==null?0:this.getHeight(p.leftNode)-this.getHeight(p.rightNode)}getFromNode(p,s){return s&&(p==s.key?s:p<s.key?this.getFromNode(p,s.leftNode):p>s.key?this.getFromNode(p,s.rightNode):s)}removeNode(p,s){if(p==null)return p;if(p.key>s)return p.leftNode=this.removeNode(p.leftNode,s),p;if(p.key<s)return p.rightNode=this.removeNode(p.rightNode,s),p;if(p.leftNode==null){let S=p.rightNode;return p=null,S}if(p.rightNode==null){let S=p.leftNode;return p=null,S}var h=this.inOrderSuccessor(p.rightNode);return p.value=h.value,p.key=h.key,p.rightNode=this.removeNode(p.rightNode,h.key),p}countNodeBelow(p){return p==null?0:1+this.countNodeBelow(p.leftNode)+this.countNodeBelow(p.rightNode)}inOrderSuccessor(p){for(;p.leftNode!=null;)p=p.leftNode;return p}}var ho=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};class nn{static compositeKey(p,s){return("0000"+p.toString(16).toUpperCase()).slice(-4)+("0000"+s.toString(16).toUpperCase()).slice(-4)}static addNodeToTree(p){if(this.root==null)return this.root=p,this.root;this.root=this.root.addNode(p,this.root,this.root.height)}static waitForDataToLoad(){return ho(this,void 0,void 0,function*(){return new Promise((p,s)=>{this.checkFlag(p),setTimeout(()=>{s("not")},25e3)})})}static checkFlag(p){if(n.B.isDataLoaded)return p("done");setTimeout(nn.checkFlag,1e3,p)}static addConceptToTree(p,s,h=999){let S=this.compositeKey(s,h);var A=new us(S,p,null,null);this.addNodeToTree(A)}static getNodeFromTree(p,s){return ho(this,void 0,void 0,function*(){let h=this.compositeKey(p,s);return this.root?this.root.getFromNode(h,this.root):null})}static removeNodeFromTree(p){return ho(this,arguments,void 0,function*(s,h=999){if(this.root){let S=this.compositeKey(s,h);this.root=this.root.removeNode(this.root,S)}})}static countNumberOfNodes(){return this.root?this.root.countNodeBelow(this.root):0}}nn.root=null;var Ii=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function ki(B,p){return Ii(this,arguments,void 0,function*(s,h,S=999){let A=yield nn.getNodeFromTree(s,S),O=(0,uo.u)();if(A)for(let F=0;F<A.value.length;F++){let x=A.value[F];x.ghostId==h&&(O=x)}return O})}function Si(B,p){return Ii(this,arguments,void 0,function*(s,h,S=999){nn.addConceptToTree(s,h,S)})}var on=y(5312),po=y(1213),Ai=y(3729),hs=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})},ps=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function Ni(B,p,s){return ps(this,void 0,void 0,function*(){try{if(Pe)try{return(yield Ve("GetRelationLocal",{id:B,relation:p,userId:s})).data}catch(O){console.error("GetRelationLocal error sw: ",O),ze(O)}let h=yield(0,t.$I)(p),S=[];h.id!=0&&(S=yield function(O,F){return hs(this,void 0,void 0,function*(){try{return yield R.G.GetConnectionOfCompositionAndTypeLocal(F,O)}catch(x){throw x}})}(B,h.id));let A=[];for(let O=0;O<S.length;O++){let F=yield U(S[O].toTheConceptId);A.push(F)}return A}catch(h){throw h}})}var fs=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function fo(B){return fs(this,void 0,void 0,function*(){let p=[];try{var s=(0,e.Xr)();const h=yield fetch(r.B.ViewInternalDataUrl(),{method:"POST",headers:s,body:JSON.stringify(B)});if(h.ok){let S=yield h.json(),A={};for(let O=0;O<S.length;O++){let F=S[O].concepts;p=S[O].connections;let x=S[O].id;(0,Cn.r)(F),A[x]=p}return A}return console.log("View Internal Data error",h.status),(0,o.ry)(h),p}catch(h){throw h instanceof Error?console.log(" This is the view internal data error message: ",h.message):console.log(" This is the view internal data unexpected error: ",h),h}})}var ys=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function yo(B){return ys(this,void 0,void 0,function*(){var p;try{let s=yield fo(B),h=[];for(let S=0;S<B.length;S++){let A=B[S],O=s[A];if(A&&O){let F=[],x={};for(let d=0;d<O.length;d++)F.includes(O[d].ofTheConceptId)||F.push(O[d].ofTheConceptId);let g=yield(0,i.zN)(A,O,F);x.data=g,x.id=A,h.push(x)}else{let F={};F.id=A;let x=yield(0,ce.A)(A),g={};x.type&&(g[(p=x?.type)===null||p===void 0?void 0:p.characterValue]=x.characterValue,F.data=g,h.push(F))}}return h}catch(s){throw s}})}var Un=y(176),bi=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})},Li=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function _i(B){return Li(this,arguments,void 0,function*(p,s=""){try{let h=yield function(S){return bi(this,arguments,void 0,function*(A,O=""){var F=(0,e.ab)("application/json",O);let x=r.B.SearchInternalWithAuthenticatedCcsUrl();x=x+"?composition="+A.composition+"&search="+A.search+"&internalComposition="+A.internalComposition+"&type="+A.type+"&inpage="+A.inpage+"&page="+A.page;try{const g=yield fetch(x,{method:"GET",headers:F});return g.ok?yield g.json():(console.log("This is the searching internal error",g.status),(0,o.ry)(g),[])}catch(g){console.log("This is the searching internal error",g),(0,o.Mb)(g,x)}})}(p,s);return yield yo(h)}catch(h){throw h}})}function xi(B){return Li(this,arguments,void 0,function*(p,s=""){try{return yield function(h){return bi(this,void 0,void 0,function*(){var S=(0,e.ab)("application/json","");let A=r.B.SearchInternalWithCcsUrl();A=A+"?composition="+h.composition+"&search="+h.search+"&internalComposition="+h.internalComposition+"&type="+h.type+"&inpage="+h.inpage+"&page="+h.page;try{const O=yield fetch(A,{method:"GET",headers:S});return O.ok?yield O.json():(console.log("This is the searching internal error",O.status),(0,o.ry)(O),[])}catch(O){console.log("This is the searching internal error",O),(0,o.Mb)(O,A)}})}(p)}catch(h){throw h}})}var go=y(8095),gs=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function Ei(B){return gs(this,void 0,void 0,function*(){if(Pe)try{return(yield Ve("DeleteConceptLocal",{id:B})).data}catch(s){console.error("DeleteConceptLocal error sw: ",s),ze(s)}let p=yield(0,po.f)(B);C.v.RemoveConcept(p)})}var Oi=y(2803),vs=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function Bi(B,p,s,h){return vs(this,arguments,void 0,function*(S,A,O,F,x=!0){var g,d;const D=ye.V.logfunction("GetConnectionBetweenTwoConceptsLinker")||{};if(Pe){D.serviceWorker=!0;try{const q=yield Ve("GetConnectionBetweenTwoConceptsLinker",{ofTheConcept:S,toTheConcept:A,linker:O,fullLinker:F,forward:x});return ye.V.logUpdate(D),q.data}catch(q){console.error("GetConnectionBetweenTwoConceptsLinker sw error: ",q),(0,o.ey)(D,"GetConnectionBetweenTwoConceptsLinker",q),ze(q)}}let V=(0,te.o)();if(O!=""){let q="";q=x?((g=S.type)===null||g===void 0?void 0:g.characterValue)+"_s_"+O+"_s":((d=A.type)===null||d===void 0?void 0:d.characterValue)+"_s_"+O+"_by",V=yield(0,we.A)("connection",q,!1,999)}F!=""&&(V=yield $e(F,999));let J=[];return J=x?yield(0,Oi.x)(S.id,A.id,V.id):yield(0,Oi.x)(A.id,S.id,V.id),ye.V.logUpdate(D),J})}function Ri(B,p){return new Promise((s,h)=>{setTimeout(()=>{s(p)},B)})}var Me=y(3130);const Gi=3,Di=4,Fi=5;var ms=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function vo(B,p){return ms(this,arguments,void 0,function*(s,h,S=""){let A=r.B.SearchAllTypeWithLinker(s.auth);var O=(0,e.ab)("application/json",S);A=A+"?search="+s.search+"&type="+s.type+"&inpage="+s.inpage+"&page="+s.page;const F=JSON.stringify(h);try{const x=yield fetch(A,{method:"POST",headers:O,body:F});return x.ok?yield x.json():((0,o.ry)(x),console.log("This is the searching multiple error",x.status),[])}catch(x){console.log("This is the searching SearchWithTypeAndLinker error",x),(0,o.Mb)(x,A)}})}var Yt=y(4287);class mo extends Yt.w{constructor(p,s,h=Me.y0){super(),this.searchQuery=[],this.format=Me.y0,this.searchQuery=p,this.format=h}bind(){return p=this,s=void 0,S=function*(){return this.data=yield(0,on.cf)(this.searchQuery,"",this,this.format),this.mainConcept=this.searchQuery[0].composition,this.listenToEvent(this.mainConcept),console.log("this is the data",this.data),this.data},new((h=void 0)||(h=Promise))(function(A,O){function F(d){try{g(S.next(d))}catch(D){O(D)}}function x(d){try{g(S.throw(d))}catch(D){O(D)}}function g(d){var D;d.done?A(d.value):(D=d.value,D instanceof h?D:new h(function(V){V(D)})).then(F,x)}g((S=S.apply(p,s||[])).next())});var p,s,h,S}}function Pi(B,p,s=Me.y0){return new mo(B,p??"",s)}var Ui=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};class Cs extends Yt.w{constructor(p,s=Me.ZJ){super(),this.id=p,this.format=s}bind(){return Ui(this,void 0,void 0,function*(){if(!this.isDataLoaded){let p=yield(0,i.hL)(this.id);this.mainConcept=this.id,this.compositionIds=p.compositionList;let s=p.connectionList;for(let h=0;h<s.length;h++)this.internalConnections.push(s[h].id);this.isDataLoaded=!0,this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return Ui(this,void 0,void 0,function*(){let p=[],s=this.internalConnections;for(let h=0;h<s.length;h++)p.push(yield jt.d.GetConnection(s[h]));return this.format==Me.ZJ?this.data=yield(0,i.ay)(this.mainConcept,p,this.compositionIds):this.format==Me.y0?this.data=yield(0,i.$V)(this.mainConcept,p,this.compositionIds):this.format==Me.yv?this.data=yield(0,i.re)(this.mainConcept,p,this.compositionIds):this.data=yield(0,i.ay)(this.mainConcept,p,this.compositionIds),this.data})}}function Wi(B,p=Me.ZJ){return new Cs(B,p)}var Mi=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};class ws extends Yt.w{constructor(p,s,h,S,A){super(),this.data=[],this.startPage=0,this.compositionName=p,this.userId=s,this.inpage=h,this.page=S,this.format=A}bind(){return Mi(this,void 0,void 0,function*(){if(!this.isDataLoaded){var p=yield(0,a.A)(this.compositionName);if(p){yield f(this.compositionName,this.userId);let S=yield w.I.GetConceptsByTypeIdAndUser(p.id,this.userId);for(var s=this.inpage*(this.page-1),h=s;h<s+this.inpage;h++)S[h]&&this.compositionIds.push(S[h].id)}yield(0,v.Y)(this.compositionIds),this.isDataLoaded=!0,this.listenToEventType(p.id);for(let S=0;S<this.compositionIds.length;S++)this.listenToEvent(this.compositionIds[S])}return yield this.build()})}build(){return Mi(this,void 0,void 0,function*(){if(this.data=[],this.format==Me.ZJ){for(let p=this.startPage;p<this.startPage+this.inpage;p++)if(this.compositionIds[p]){let s=yield(0,i.kx)(this.compositionIds[p]);this.data.push(s)}}else if(this.format==Me.y0){for(let p=this.startPage;p<this.startPage+this.inpage;p++)if(this.compositionIds[p]){let s=yield(0,i.RW)(this.compositionIds[p]);this.data.push(s)}}else if(this.format==Me.yv){for(let p=this.startPage;p<this.startPage+this.inpage;p++)if(this.compositionIds[p]){let s=yield(0,i.XI)(this.compositionIds[p]);this.data.push(s)}}else for(let p=this.startPage;p<this.startPage+this.inpage;p++)if(this.compositionIds[p]){let s=yield(0,i.kx)(this.compositionIds[p]);this.data.push(s)}return this.data})}}function Vi(B,p,s,h,S=Me.ZJ){return new ws(B,p,s,h,S)}var Xt=y(1320),ji=y(5328),Co=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};class Ts extends Yt.w{constructor(p,s,h="",S){super(),this.searchText="",this.connections=[],this.externalConnectionIds=[],this.data=[],this.mainConcept=p,this.searchLinkers=s,this.textSearch=h,S&&(this.format=S)}listenToEvent(p){window.addEventListener(`${p}`,s=>{if(!this.isUpdating){this.isUpdating=!0;let h=this;setTimeout(function(){return Co(this,void 0,void 0,function*(){let S=yield jt.d.GetConnectionByOfTheConceptAndType(p,p);for(let A=0;A<S.length;A++)yield jt.d.GetConnection(S[A]).then(O=>{O.typeId==h.mainConcept?h.internalConnections.includes(O.id)||h.internalConnections.push(O.id):h.linkers.includes(O.id)||h.linkers.push(O.id),h.conceptIds.includes(O.toTheConceptId)||h.conceptIds.push(O.toTheConceptId),h.compositionIds.includes(O.ofTheConceptId)||h.compositionIds.push(O.ofTheConceptId),h.compositionIds.includes(O.toTheConceptId)||h.compositionIds.push(O.toTheConceptId)});h.isUpdating=!1,yield h.bind(),h.notify()})},200)}})}bind(){return Co(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;const p=yield Kn(this.mainConcept,this.searchLinkers,this.textSearch);this.compositionIds=p.compositionIds||[],this.internalConnections=p.internalConnections||[],this.externalConnectionIds=p.externalConnections||[],this.linkers=this.externalConnectionIds,this.connections=yield(0,Fn.j)(this.externalConnectionIds);for(let s=0;s<this.compositionIds.length;s++)this.listenToEvent(this.compositionIds[s]);this.listenToEvent(this.mainConcept)}return yield this.build()})}build(){return Co(this,void 0,void 0,function*(){return this.externalConnectionIds=this.linkers,this.format&&this.format==Me.XZ?this.data={compositionIds:this.compositionIds,internalConnections:this.internalConnections,externalConnections:this.externalConnectionIds}:this.data=yield(0,et.p8)(this.compositionIds,this.internalConnections),this.data})}}function $i(B,p,s="",h){return new Ts(B,p,s,h)}var wo=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};class Is extends Yt.w{constructor(p,s,h,S=Me.y0){super(),this.searchQuery=[],this.format=Me.y0,this.mainCompositionIds=[],this.searchCharacter="",this.token="",this.searchStructure=p,this.searchQuery=s,this.searchQuery[0].type=p.composition,this.searchCharacter=p.composition,this.format=S,this.token=Ke.b.BearerAccessToken}listenToEventType(p){window.addEventListener(`${p}`,s=>{if(!this.isUpdating){this.isUpdating=!0;let h=this;setTimeout(function(){return wo(this,void 0,void 0,function*(){let S=s;h.mainCompositionIds.includes(S?.detail)||(h.mainCompositionIds.unshift(S?.detail),h.conceptIds.push(S?.detail),h.listenToEvent(S?.detail),jt.d.GetConnectionsOfConcept(S?.detail).then(A=>{for(let O=0;O<A.length;O++)h.linkers.push(A[O].id)})),h.isUpdating=!1,yield h.bind(),h.notify()})},200)}})}bind(){return wo(this,void 0,void 0,function*(){if(!this.isDataLoaded){this.isDataLoaded=!0;var p=yield(0,a.A)(this.searchCharacter);let s=yield vo(this.searchStructure,this.searchQuery,this.token);this.conceptIds=s.compositionIds,this.internalConnections=s.internalConnections,this.linkers=s.linkers,this.reverse=s.reverse,this.mainCompositionIds=s.mainCompositionIds,this.listenToEventType(p.id);for(let h=0;h<this.mainCompositionIds.length;h++)this.listenToEvent(this.mainCompositionIds[h])}return yield this.build()})}build(){return wo(this,void 0,void 0,function*(){return yield(0,Cn.r)(this.conceptIds),this.format==Me.y0?this.data=yield(0,Xt.yV)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse):this.data=yield(0,Xt._W)(this.linkers,this.conceptIds,this.internalConnections,this.mainCompositionIds,this.reverse),this.data})}}function Hi(B,p,s,h=Me.y0){return new Is(B,p,s,h)}var To=y(4698),qi=y(6915),zi=y(2615);class Ji{constructor(p,s,h,S,A,O,F,x=!1,g,d,D){this.structureType="lconcept",this.isComposition=!1,this.isTemp=!1,this.isSynced=!1,this.applicationId=r.B.getRandomizer(),this.id=p,this.userId=s,this.typeId=h,this.ghostId=p,this.categoryId=S,this.characterValue=O,this.accessId=A,this.type=null,this.isNew=x,this.typeCharacter=F,this.entryTimeStamp=g,this.updatedTimeStamp=d,this.isSynced=!1,this.referentId=D}getType(){console.log(this.typeId)}}class Qi{constructor(p,s,h,S,A,O){this.isTemp=!1,this.applicationId=r.B.getRandomizer(),this.type=(0,te.o)(),this.id=p,this.ofTheConceptId=s,this.toTheConceptId=h,this.typeId=S,this.ghostId=p,this.orderId=A,this.typeCharacter="",this.accessId=O,this.typeCharacter="",this.entryTimeStamp=(0,te.Y)(new Date),this.terminationDateTime=new Date,this.localSyncTime=new Date}}class Yi{constructor(){this.compositionId=0,this.userId=999,this.sessionId=999,this.accessId=4,this.ofTheCompositionId=0,this.patchObject={}}}class Xi{constructor(){this.id="0",this.remote_address="",this.server_port="",this.server_address="",this.server_name="",this.server_software="",this.http_user_agent="",this.self="",this.port="",this.userId="",this.email=""}}var rn=y(628);class Wn{constructor(){this.type="",this.search="",this.logicoperator="=",this.index=0,this.composition=!0,this.name="",this.operateon=""}}class Zi{constructor(){this.type="",this.search="",this.composition="",this.internalComposition="",this.userId=999,this.inpage=10,this.page=1,this.auth=!0}}var Ki=y(7887),er=y(3075),ks=y(7869),tr=y(9635),ye=y(9700);class Ss{static initialize(){try{console.warn("Initialized Application Monitoring for tracking errors..."),this.initGlobalErrorHandlers(),this.logCatchError(),this.logErrorEvent(),this.logUnhandledError(),this.logUserInteractions(),this.logNetworkRequests(),this.logRouteChanges(),this.logPerformanceMetrics(),this.logWebSocketEvents()}catch(p){console.error("Error during Application Monitoring initialization:",p)}}static initGlobalErrorHandlers(){try{if(console.log("this is the window",window),typeof window===void 0)return;const p=Ke.b.sessionId||"unknown";window.onerror=(s,h,S,A,O)=>{const F={message:s,source:h,lineno:S,colno:A,stack:O?.stack||"undefined",requestFrom:r.B.BASE_APPLICATION,sessionId:p};ye.V.logApplication("ERROR","Runtime Error",F),ye.V.log("ERROR","Runtime Error",F)},window.onunhandledrejection=s=>{ye.V.logApplication("ERROR","Unhandled Promise Rejection",{message:s.reason?s.reason.message:s.reason,stack:s.reason?s.reason.stack:null,requestFrom:r.B.BASE_APPLICATION,sessionId:p}),ye.V.log("ERROR","Unhandled Promise Rejection",{message:s.reason?s.reason.message:s.reason,stack:s.reason?s.reason.stack:null,requestFrom:r.B.BASE_APPLICATION,sessionId:p})}}catch(p){console.warn("Failed to initialize global error handlers:",p)}}static logCatchError(){try{const p=console.error;console.log("Inside originalConsoleError...");const s=Ke.b.sessionId||"unknown";console.error=function(...h){const S="Console Error",A={arguments:h.map(O=>nr(O)),requestFrom:r.B.BASE_APPLICATION,sessionId:s};ye.V.logApplication("ERROR",S,A),ye.V.log("ERROR",S,A),p.apply(console,h)}}catch(p){console.warn("Failed to override console.error:",p)}}static logErrorEvent(){try{window.addEventListener("error",p=>{var s;console.log("Inside error event...");const h=Ke.b.sessionId||"unknown",S={error:((s=p.error)===null||s===void 0?void 0:s.message)||p.message,source:p.filename,line:p.lineno,column:p.colno,stack:p.error?nr(p.error.stack):void 0,requestFrom:r.B.BASE_APPLICATION,sessionId:h},A="Unhandled Error";ye.V.logApplication("ERROR",A,S),ye.V.log("ERROR",A,S)})}catch(p){console.warn("Failed to add error event listener:",p)}}static logUnhandledError(){try{window.addEventListener("unhandledrejection",p=>{var s,h;console.log("Inside unhandledrejection...");const S=Ke.b.sessionId||"unknown",A={reason:((s=p.reason)===null||s===void 0?void 0:s.message)||String(p.reason),stack:((h=p.reason)===null||h===void 0?void 0:h.stack)||"No stack trace available",requestFrom:r.B.BASE_APPLICATION,sessionId:S};ye.V.logApplication("ERROR","Unhandled Promise Rejection",A),ye.V.log("ERROR","Unhandled Promise Rejection",A)})}catch(p){console.warn("Failed to add unhandled rejection event listener:",p)}}static logUserInteractions(){document.addEventListener("click",p=>{var s;const h=Ke.b.sessionId||"unknown",S=p.target,A={element:S.tagName,id:S.id,classes:S.className,text:(s=S.innerText)===null||s===void 0?void 0:s.slice(0,50),requestFrom:r.B.BASE_APPLICATION,sessionId:h};ye.V.logApplication("INFO","User Click",A)}),document.addEventListener("input",p=>{const s=p.target;Ke.b.sessionId,s.tagName,s.id,s.value,r.B.BASE_APPLICATION}),document.addEventListener("scroll",()=>{Ke.b.sessionId,r.B.BASE_APPLICATION})}static logNetworkRequests(){try{if(typeof window===void 0)return;const p=Ke.b.sessionId||"unknown",s=window?.fetch;if(!s)throw new Error("Original fetch is not available.");const h=[r.B.PostLogger(),r.B.PostPrefetchConceptConnections()];window.fetch=(...S)=>{return A=this,O=void 0,x=function*(){const[g,d]=S,D=g instanceof Request?g.url:g instanceof URL?g.toString():g;if(h.includes(D))return console.log("Ignored URLs detected : ",D),s(...S);let V={request:{type:"REQUEST",message:"Network Request",method:d?.method||"GET",url:D,body:d?.body,requestFrom:r.B.BASE_APPLICATION,sessionId:p}};try{const J=yield s(...S);return V.response={type:"RESPONSE",message:"Network Response",url:D,status:J.status,requestFrom:r.B.BASE_APPLICATION,sessionId:p},J}catch(J){throw V.response={type:"ERROR",message:"Network Request Failed",url:D,error:J instanceof Error?J.message:String(J),requestFrom:r.B.BASE_APPLICATION,sessionId:p},ye.V.logApplication("ERROR","Failed Network Request",V),new Error(`Network request failed for ${D}: ${J.message}`)}},new((F=void 0)||(F=Promise))(function(g,d){function D(q){try{J(x.next(q))}catch(oe){d(oe)}}function V(q){try{J(x.throw(q))}catch(oe){d(oe)}}function J(q){var oe;q.done?g(q.value):(oe=q.value,oe instanceof F?oe:new F(function(ue){ue(oe)})).then(D,V)}J((x=x.apply(A,O||[])).next())});var A,O,F,x}}catch(p){console.warn("Failed to override network requests:",p)}}static logPerformanceMetrics(){typeof window!==void 0&&window?.addEventListener("load",()=>{const p=performance.timing;Ke.b.sessionId,p.loadEventEnd,p.navigationStart,p.domContentLoadedEventEnd,p.navigationStart,r.B.BASE_APPLICATION})}static logRouteChanges(){const p=history.pushState,s=Ke.b.sessionId||"unknown";history.pushState=function(...h){var S;const A={url:(S=h[2])===null||S===void 0?void 0:S.toString(),requestFrom:r.B.BASE_APPLICATION,sessionId:s};return ye.V.logApplication("INFO","Route Change",A),p.apply(this,h)},window?.addEventListener("popstate",()=>{const h={url:location.href,requestFrom:r.B.BASE_APPLICATION,sessionId:s};ye.V.logApplication("INFO","Route Changed (Back/Forward)",h)})}static logWebSocketEvents(){if(typeof window===void 0)return;const p=Ke.b.sessionId||"unknown",s=WebSocket;window.WebSocket=class extends s{constructor(h,S){super(h,S);const A={url:h.toString(),requestFrom:r.B.BASE_APPLICATION,sessionId:p};ye.V.logApplication("INFO","WebSocket Open",A),this.addEventListener("message",O=>{const F={url:h,data:O.data,requestFrom:r.B.BASE_APPLICATION,sessionId:p};ye.V.logApplication("INFO","WebSocket Message",F)}),this.addEventListener("error",O=>{const F={url:h,error:O instanceof Error?O.message:String(O),requestFrom:r.B.BASE_APPLICATION,sessionId:p};ye.V.logApplication("ERROR","WebSocket Error",F)}),this.addEventListener("close",()=>{const O={url:h,requestFrom:r.B.BASE_APPLICATION,sessionId:p};ye.V.logApplication("INFO","WebSocket Closed",O)})}}}}function nr(B){try{return JSON.stringify(B,(p,s)=>s&&typeof s=="object"&&s instanceof Error?{message:s.message,stack:s.stack}:s)}catch{return"Error while serializing value"}}const or=(B,p,...s)=>{return h=void 0,S=[B,p,...s],O=function*(F,x,g=!1){try{let d=r.B.sendMail();g&&(d=r.B.sendBulkMail());const D=yield fetch(d,{method:"POST",body:F instanceof FormData?F:JSON.stringify(F),headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`}}),V=D.headers.get("content-type");if(!D.ok){const q=yield D.json();return console.info(`${D.status} ${q}`),null}const J=yield D.json();return V&&V.includes("text/plain")?yield D.text():J}catch(d){return console.error(d),null}},new((A=void 0)||(A=Promise))(function(F,x){function g(V){try{D(O.next(V))}catch(J){x(J)}}function d(V){try{D(O.throw(V))}catch(J){x(J)}}function D(V){var J;V.done?F(V.value):(J=V.value,J instanceof A?J:new A(function(q){q(J)})).then(g,d)}D((O=O.apply(h,S||[])).next())});var h,S,A,O};class As{constructor(){this.inDevelopment=!1,this.subscribers=[]}notify(p=null){this.subscribers.map(s=>{s(p||this.data)})}dataChange(p){this.subscribers.push(p)}}class Ns extends As{constructor(){super(...arguments),this.element=null,this.elementIdentifier=0,this.widgetMounted=!1}getComponent(){return this.element}getElementById(p){let s=this.getComponent(),h=document.body;if(s){let S=s.querySelector("#"+p);if(S)return h=S,h}return null}createWidgetWrapperIdentifier(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier.toString()}}class Mn extends Ns{constructor(){super(...arguments),this.html="",this.css="",this.js="",this.state={},this.previousState={},this.childWidgets=[],this.childWidgetElement=[],this.widgetState={},this.parentElement=""}querySelector(p){return this.element?this.element.querySelector(p):null}querySelectorAll(p){return this.element?this.element.querySelectorAll(p):null}getElement(){return this.element}setTitle(p){document.title=p}getHtml(){return this.html}UpdateChildData(p,s){let h=s;h.data=p,h.render(),h.update()}update(){}setState(p){this.previousState=Object.assign({},this),this.data=p,this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}setStateProperty(p){this.previousState=Object.assign({},this),Object.assign(this,p),this.state=Object.assign({},this),this.hasStateChanged()&&(this.notify(),this.render())}hasStateChanged(){return!this.isPropertyEqual(this.state,this.previousState)}isPropertyEqual(p,s){if(p===s)return!0;if(typeof p!="object"||typeof s!="object"||p===null||s===null)return!1;const h=Object.keys(p),S=Object.keys(s);if(h.length!==S.length)return!1;for(let A of h){if(!S.includes(A))return!1;for(let O of S)if(A==O&&A!="state"&&A!="previousState"&&p[A]!=s[A])return!1}return!0}loadChildWidgets(){this.childWidgets.map(p=>{let s=this.getElementById(p.parentElement);s&&(s.innerHTML=""),p.mount(s)})}render(){this.element&&(this.element.innerHTML=this.getHtml()),this.loadChildWidgets(),this.after_render()}getElementByClassName(p){let s=this.getComponent();return s?s?.querySelectorAll("."+p):[]}mount_child(){}mount(p){return s=this,h=void 0,A=function*(){p&&(this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier(),this.element.innerHTML=this.getHtml(),this.element.classList.add("mftsccs-marking-rendered"),p.appendChild(this.element),this.parentElement=p.id,this.before_render(),this.mount_child(),this.widgetMounted=!0)},new((S=void 0)||(S=Promise))(function(O,F){function x(D){try{d(A.next(D))}catch(V){F(V)}}function g(D){try{d(A.throw(D))}catch(V){F(V)}}function d(D){var V;D.done?O(D.value):(V=D.value,V instanceof S?V:new S(function(J){J(V)})).then(x,g)}d((A=A.apply(s,h||[])).next())});var s,h,S,A}before_render(){this.render()}after_render(){console.log("this is calling the after render",this)}renderChildWidgets(){function p(s){var h;s&&((h=s.childWidgets)===null||h===void 0||h.forEach(S=>{p(S)}),s.render())}console.log("this is the render child widget",this),this.childWidgets.forEach(s=>{p(s)})}setWidgetState(p,s){this.widgetState[p]=s,function h(S){S&&Array.isArray(S.childWidgets)&&S.childWidgets.forEach(A=>{A.widgetState=Object.assign(Object.assign({},A.widgetState),S.widgetState),h(A)})}(this),this.renderChildWidgets()}getWidgetState(p,s){return Object.keys.length&&this.widgetState[p]?this.widgetState[p]:s}}var sn=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};class On extends Mn{constructor(){super(...arguments),this.childComponents=[],this.componentMounted=!1,this.oldHtml=null,this.phonebooks=[],this.childrenData={},this.childWidgets=[],this.typeValueList=[],this.widgetType="the_element_name",this.parentConceptList=[],this.customFunctions=[]}getUserId(){return sn(this,void 0,void 0,function*(){const p=yield new Promise(s=>{let h=(localStorage==null?void 0:localStorage.getItem("profile"))||"";h?s(JSON.parse(h)):s()});return p?.userId})}getTypeValueList(){return sn(this,arguments,void 0,function*(p=""){return new Promise(s=>sn(this,void 0,void 0,function*(){const h=(p=this.widgetType)==null?void 0:p.match(/^[a-z0-9]+_[a-z0-9]+/i),S=h?h[0]:"",A=p?.match(/^([a-z0-9]+).*_([a-z0-9]+)$/i),O=A?`${A[1]}_${A[2]}`:"";let F=[],x=new Wn;x.type=O,x.search="1",x.logicoperator=">",x.name="emailfilter",x.operateon="entityEmail",x.composition=!1,F.push(x);let g=new It;g.typeConnection=p,g.name="entityEmail";let d=new It;d.type=S,d.filterLogic="( emailfilter )",d.filters=F,d.name="top",d.inpage=100,d.freeschemaQueries=[g],d.outputFormat=Me.y0,kn(d,"").subscribe(D=>{if(D?.length){const V=D?.map(J=>{var q,oe,ue,me,Se,he,Ae;const De=(me=(ue=(oe=(q=J.data)===null||q===void 0?void 0:q[S])===null||oe===void 0?void 0:oe[p])===null||ue===void 0?void 0:ue.data)===null||me===void 0?void 0:me[O];return{id:(Ae=(he=(Se=J.data)===null||Se===void 0?void 0:Se[S])===null||he===void 0?void 0:he[p])===null||Ae===void 0?void 0:Ae.id,name:De,text:De}});return this.typeValueList=V,s(V),V}})}))})}setTitle(p){document.title=p}getHtml(){return this.html}createRandomNumber(){return this.elementIdentifier=1e4*Math.random(),this.elementIdentifier}mount_child(){return sn(this,void 0,void 0,function*(){try{new Function("tsccs",`
        return (async function() {
          ${this.mountChildWidgetsFunction}
        }).call(this);
      `).bind(this)(N)}catch(p){throw console.log("This is the error in the mount child",p),p}})}setProperty(p){return sn(this,void 0,void 0,function*(){return this.widgetType=p,this.getTypeValueList(this.widgetType).then(()=>{var s,h,S;(s=this.element)===null||s===void 0||s.setAttribute("data-type-value",this.widgetType),(S=(h=this.element)===null||h===void 0?void 0:h.parentElement)===null||S===void 0||S.setAttribute("data-type-value",this.widgetType),this.render()}),this})}createTypeEditor(p){(function(s,h){if(s){const S=document.querySelector("#widget-properties #widget-type"),A=S?.querySelectorAll("input");A?.forEach(d=>{d?.remove()});const O=s.target.closest(".added-widget-container"),F=s.target.closest("div");O?O?.getAttribute("data-type-value"):F&&F?.getAttribute("data-type-value");const x=document.createElement("input");x.setAttribute("type","text"),x.setAttribute("name","input-widgetTypeValue"),x.setAttribute("of",h.elementIdentifier.toString()),x.setAttribute("class","form-control"),x.setAttribute("id","widgetType"),x.setAttribute("onchange","updateWidgetTypeValue(event)"),h.widgetType?x.value=h.widgetType:x.setAttribute("placeholder","e.g. the_entity");let g=h;x.addEventListener("change",function(d){var D,V,J;const q=(D=d?.target)===null||D===void 0?void 0:D.value;g.widgetType=q,g.before_render(),g.loadChildWidgets(),(J=(V=g.element)===null||V===void 0?void 0:V.parentElement)===null||J===void 0||J.setAttribute("data-type-value",g.widgetType)}),S?.appendChild(x)}})(p,this)}mount(p){return sn(this,void 0,void 0,function*(){if(p){this.element=document.createElement("div"),this.element.id=this.createWidgetWrapperIdentifier();let s=this;this.inDevelopment?(this.element.onclick=function(h){h.preventDefault(),s.createTypeEditor(h)},this.element.className="mftsccs-marking-element"):this.element.classList.add("mftsccs-marking-rendered"),this.element.innerHTML=this.getHtml(),p?.setAttribute("data-type-value",s.widgetType),p.appendChild(this.element),this.parentElement=p.id,this.componentMounted==0||this.widgetMounted==0?(this.render_custom_functions(),this.before_render(),this.mount_child(),this.widgetMounted=!0,this.componentMounted=!0):this.render(),this.childWidgetElement=this.getElementByClassName("added-widget-container")}})}render_custom_functions(){var p;const s=(p=this.customFunctions)===null||p===void 0?void 0:p.map(h=>h?.code).join("");try{new Function("tsccs",`
          return (async function() {
            ${s}
          }).call(this);
        `).bind(this)(N)}catch(h){throw console.error("This is the error in the render_custom_functions",h),h}}before_render(){try{new Function("tsccs",`
        return (async function() {
          ${this.componentDidMountFunction}
        }).call(this);
      `).bind(this)(N)}catch(p){throw console.log("This is the error in the before render",p),p}}after_render(){try{new Function("tsccs",`
        return (async function() {
          ${this.addEventFunction}
        }).call(this);
      `).bind(this)(N)}catch(p){throw console.log("This is the error in the after render",p),p}}CreateConnectionBetweenEntityLocal(p,s,h){return sn(this,void 0,void 0,function*(){var S;const A=p.userId,O=((S=p.type)===null||S===void 0?void 0:S.characterValue)+"_"+h,F=yield(0,xe.$)(O,999,999,A);return yield(0,Dt.F)(p.id,s.id,F.id,1e3),"connection created"})}}var bs=y(3077),mt=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};class Io{constructor(){this.actions={concepts:[],connections:[]},this.success=!0,this.transactionId=Math.random().toString().substring(5)}initialize(){return mt(this,void 0,void 0,function*(){yield rn.H.initializeTransaction(this.transactionId)})}commitTransaction(){return mt(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield rn.H.SyncDataOnline(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}commitTransactionWithoutAuth(){return mt(this,void 0,void 0,function*(){if(!this.success)throw Error("Query Transaction Expired");yield rn.H.SyncDataOnlineWithoutAuth(this.transactionId),this.actions={concepts:[],connections:[]},this.success=!1})}rollbackTransaction(){return mt(this,void 0,void 0,function*(){this.success=!1,this.actions={concepts:[],connections:[]},yield rn.H.rollbackTransaction(this.transactionId,this.actions)})}markAction(){return mt(this,void 0,void 0,function*(){yield rn.H.markTransactionActions(this.transactionId,this.actions)})}MakeTheInstanceConceptLocal(p,s){return mt(this,arguments,void 0,function*(h,S,A=!1,O,F,x=999,g=0){try{if(!this.success)throw Error("Query Transaction Expired");const d=yield(0,fe.k)(h,S,A,O,F,x,g,this.actions);return yield this.markAction(),d}catch(d){throw console.log(d),this.success=!1,d}})}MakeTheTypeConceptLocal(p,s,h,S){return mt(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const A=yield(0,xe.$)(p,s,h,S,this.actions);return yield this.markAction(),A}catch(A){throw console.log(A),this.success=!1,A}})}CreateTheConceptLocal(p,s,h,S,A,O){return mt(this,arguments,void 0,function*(F,x,g,d,D,V,J=!1,q=0,oe={concepts:[],connections:[]}){try{if(!this.success)throw Error("Query Transaction Expired");const ue=yield(0,bs.A)(F,x,g,d,D,V,J,q,this.actions);return yield this.markAction(),ue}catch(ue){throw console.log(ue),this.success=!1,ue}})}CreateConnectionBetweenTwoConceptsLocal(p,s,h){return mt(this,arguments,void 0,function*(S,A,O,F=!1){try{if(!this.success)throw Error("Query Transaction Expired");const x=yield(0,go.h)(S,A,O,F,this.actions);return yield this.markAction(),x}catch(x){throw console.log(x),this.success=!1,x}})}CreateTheConnectionLocal(p,s,h){return mt(this,arguments,void 0,function*(S,A,O,F=1,x="",g=999){try{if(!this.success)throw Error("Query Transaction Expired");const d=yield(0,Dt.F)(S,A,O,F,x,g,this.actions);return yield this.markAction(),d}catch(d){throw console.log(d),this.success=!1,d}})}CreateConnection(p,s,h){return mt(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const S=yield(0,Dt.d)(p,s,h,this.actions);return yield this.markAction(),S}catch(S){throw console.log(S),this.success=!1,S}})}CreateConnectionBetweenEntityLocal(p,s,h){return mt(this,void 0,void 0,function*(){try{if(!this.success)throw Error("Query Transaction Expired");const S=yield No(p,s,h,this.actions);return yield this.markAction(),S}catch(S){throw console.log(S),this.success=!1,S}})}CreateTheCompositionLocal(p){return mt(this,arguments,void 0,function*(s,h=null,S=null,A=null,O=null,F=null,x=null,g=!1){try{if(!this.success)throw Error("Query Transaction Expired");const d=yield(0,$.R)(s,h,S,A,O,F,x,g,this.actions);return yield this.markAction(),d}catch(d){throw console.log(d),this.success=!1,d}})}}const ir={number:/^\d+(\.\d+)?$/,text:/^[\s\S]*$/,textOnly:/^[A-Za-z\s]+$/,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,document:/\.(pdf|docx?|pptx?|xlsx?)$/i,sound:/\.(mp3|wav|ogg|flac)$/i,image:/\.(jpg|jpeg|png|gif|bmp|svg|webp)$/i,video:/\.(mp4|avi|mov|mkv|flv|webm)$/i,url:/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^(?:[01]\d|2[0-3]):[0-5]\d$/,password:/^.{6,}$/,ipaddress:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$|^([0-9a-fA-F]{1,4}:){7}([0-9a-fA-F]{1,4})$/,uuid:/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/};var Tn=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};class Qe{constructor(){Qe.cacheInitialized||Qe.initializeAnomalyParameters()}static initializeAnomalyParameters(){return Tn(this,void 0,void 0,function*(){try{yield Qe.getAnomalyParameters(),Qe.refreshCache(),Qe.cacheInitialized=!0}catch(p){console.error("Error during anomaly parameter initialization:",p)}})}static getAnomalyParameters(){return Tn(this,void 0,void 0,function*(){const p=Date.now();if(Qe.anomalyParamsCache&&p-Qe.lastFetchedTime<Qe.cacheExpiryThreshold)return console.log("Returning cached anomaly parameters"),Qe.anomalyParamsCache;try{return yield Qe.fetchAnomalyParameters()}catch(s){throw console.error("Error fetching anomaly parameters:",s),s}})}static fetchAnomalyParameters(){return Tn(this,void 0,void 0,function*(){try{const p=yield fetch("https://devai.freeschema.com/v1/get-frontend-anomaly-parameters",{method:"GET",headers:{"Content-Type":"application/json"}});if(!p.ok)throw new Error("Failed to fetch anomaly parameters");const s=yield p.json();return Qe.anomalyParamsCache=s.data,Qe.lastFetchedTime=Date.now(),s.data}catch(p){throw console.error("API Fetch Error:",p),p}})}static refreshCache(){return Tn(this,void 0,void 0,function*(){try{Date.now()-Qe.lastFetchedTime>Qe.cacheExpiryThreshold&&(yield Qe.getAnomalyParameters())}catch(p){console.error("Error refreshing anomaly parameters cache:",p)}})}detectDataType(p){for(const[s,h]of Object.entries(ir))if(h.test(p))return s;return null}checkConceptAnomaly(p,s){return Tn(this,void 0,void 0,function*(){const h=[];try{if(!s)return h.push("Null value"),{valid:!1,warnings:h};const S=Qe.anomalyParamsCache;p.startsWith("the_")||(p=`the_${p}`);const A=S[p];if(console.log("Concept Details : ",A),!A)return console.warn(`No concept details found for type: ${p}`),h.push(`No concept details found for type: ${p}`),{valid:!1,warnings:h};const O=s.length,{min_length:F,max_length:x,data_types:g}=A,d=O>=F&&O<=x,D=this.detectDataType(s),V=g.includes(D);return d||h.push(`Length of '${s}' is outside the allowed range (min: ${F}, max: ${x}). Current length: ${O}.`),V||h.push(`Type mismatch for '${s}'. Expected types: ${g.join(", ")}, detected type: ${D}.`),d&&V&&h.push(`Concept ${p} is valid. Length: ${O}, Type: ${D}`),{valid:d&&V,warnings:h}}catch(S){return console.error(`Error checking anomaly for ${p} with value ${s}:`,S),{valid:!1,warnings:h}}})}static checkAnomalyInBulk(p){return Tn(this,void 0,void 0,function*(){Qe.cacheInitialized||(yield Qe.initializeAnomalyParameters());try{const s={};for(const[h,S]of Object.entries(p)){const A=S.value,{valid:O,warnings:F}=yield new Qe().checkConceptAnomaly(h,A);s[h]={valid:O,warnings:F}}return s}catch(s){throw console.error("Bulk Anomaly Check Error:",s),s}})}static getExportedFunction(){console.log("Main : ",N);const p=Object.keys(N);return console.log("The exported List : ",p),p}static getFunctionaAnomalyParameters(){}}Qe.anomalyParamsCache=null,Qe.cacheInitialized=!1,Qe.lastFetchedTime=0,Qe.cacheExpiryThreshold=6e5;var ko=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};class rr{checkUniqueness(p,s){return ko(this,void 0,void 0,function*(){const h=ye.V.logfunction("checkUniqueness");p.startsWith("the_")||(p="the_"+p);let S=(yield $e(p,999)).id,A=yield(0,pe.A)(s,S);return console.log("This is the concept for validator",A),!(A.id>0||(ye.V.logUpdate(h),0))})}validateField(p){return ko(this,void 0,void 0,function*(){var s;const h=ye.V.logfunction("validateField");try{performance.now();const S={},{name:A,value:O,type:F,dataType:x,pattern:g,conceptType:d,maxLength:D,minLength:V,minValue:J,maxValue:q,accept:oe,file:ue,required:me,isUnique:Se}=p;if(console.log(`Validation is happening on : 
`,p),!me||O!==null&&O!==""||(S.required=`The field ${A} is required.`),x&&O){let he=ir[x];he&&O!==""&&!he.test(O)&&(S.dataType=`Invalid value for ${x}`)}if(g&&O){const he=typeof g=="string"?new RegExp(g):g;O===""||he.test(O)||(S.pattern="Pattern doesn't match with value")}if(O&&D!=null&&O.length>D&&(S.maxLength=`Length exceeds the maximum length of ${D}`),O&&V!=null&&O.length<V&&(S.minLength=`Length must be at least ${V} characters long`),J!=null&&O&&!isNaN(Number(O))&&Number(O)<J&&(S.minValue=`Value must be greater than or equal to ${J}`),q!=null&&O&&!isNaN(Number(O))&&Number(O)>q&&(S.maxValue=`Value must be less than or equal to ${q}`),ue&&F&&oe){const he=oe.split(",").map(De=>De.trim().toLowerCase()),Ae=(s=ue.name.split(".").pop())===null||s===void 0?void 0:s.toLowerCase();Ae&&!he.includes(Ae)&&(S.accept=`File must be a valid file type: ${he.join(", ")}`)}return d&&Se&&O&&((yield this.checkUniqueness(d,O))||(S.unique="Value is not unique")),ye.V.logUpdate(h),console.log("Before Validation Result : ",S),S}catch(S){throw(0,o.ey)(h,"Validator.validateField",S),S}})}validateForm(p){return ko(this,void 0,void 0,function*(){const s=ye.V.logfunction("validateForm");try{performance.now();const h={};for(const S in p){const A=yield this.validateField(p[S]);Object.keys(A).length>0&&(h[S]=A)}return ye.V.logUpdate(s),h}catch(h){throw(0,o.ey)(s,"Validator.validateForm",h),h}})}validate(p){const s=ye.V.logfunction("validate");try{let h={};return this.validateField(p).then(S=>{Object.keys(S).length>0?(h.status=!1,h.details=S):h.status=!0}),console.error("Error on validate object"),ye.V.logUpdate(s),h}catch(h){(0,o.ey)(s,"Validator.validate",h)}}}const sr=B=>{var p;const s=document.getElementsByName(B)[0];if(!s)return console.warn(`Element with NAME "${B}" not found.`),{name:null,value:null,type:null,dataType:null,pattern:null,conceptType:null,maxLength:null,minLength:null,minValue:null,maxValue:null,accept:null,file:null,required:!1,isUnique:!0};const h=s.hasAttribute("required")||s.getAttribute("data-required")==="true",S=s.hasAttribute("isUnique")&&s.getAttribute("isUnique")==="true";return{name:s.name,value:s.value,type:s.type,dataType:s.getAttribute("data-type"),pattern:s.getAttribute("data-pattern"),conceptType:s.getAttribute("concept-type"),maxLength:s.getAttribute("maxlength")?parseInt(s.getAttribute("maxlength")):null,minLength:s.getAttribute("minlength")?parseInt(s.getAttribute("minlength")):null,minValue:s.getAttribute("min")?parseInt(s.getAttribute("min")):null,maxValue:s.getAttribute("max")?parseInt(s.getAttribute("max")):null,accept:s.getAttribute("accept")||null,file:s.type==="file"&&((p=s.files)===null||p===void 0?void 0:p[0])||null,required:h,isUnique:S}};var In=y(2289);class It{constructor(){this.type="",this.inpage=10,this.page=1,this.concepts=[],this.conceptIds=[],this.selectors=[],this.freeschemaQueries=[],this.filters=[],this.filterLogic="",this.typeConnection="",this.order="DESC",this.outputFormat=Me.yv,this.name="",this.filterAncestor="",this.reverse=!1,this.limit=!1,this.isSecure=!1,this.includeInFilter=!1,this.isOldConnectionType=!1}}var Ls=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function Vn(B){var p=arguments;return Ls(this,arguments,void 0,function*(s,h=""){const S=ye.V.logfunction("FreeschemaQueryApi",p);var A=(0,e.ab)("application/json",h);const O=r.B.FreeschemaQueryUrl(),F=JSON.stringify(s);try{const x=yield fetch(O,{method:"POST",headers:A,body:F});return x.ok?yield x.json():((0,o.ry)(x),console.log("This is the freeschema query error",x.status),[])}catch(x){console.log("This is the freeschema query error others",x),(0,o.Mb)(x,O),(0,o.ey)(S,"FreeschemaQueryApi",x)}})}var So=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};class ar extends Yt.w{constructor(p,s){super(),this.query=new It,this.countInfoStrings=[],this.order="DESC",this.totalCount=0,this.query=p,this.format=p.outputFormat,this.order=p.order}run(){return So(this,void 0,void 0,function*(){var p,s;this.query.outputFormat=Me.BG,this.compositionIds=[];let h=yield Vn(this.query,"");return this.conceptIds=h.conceptIds,this.internalConnections=(p=h.internalConnections)!==null&&p!==void 0?p:[],this.linkers=(s=h.linkers)!==null&&s!==void 0?s:[],this.reverse=h.reverse,this.compositionIds=h.mainCompositionIds,this.totalCount=h.mainCount,this.countInfoStrings=h.countinfo,yield this.build()})}bind(){return So(this,void 0,void 0,function*(){var p,s;if(this.compositionIds.length>0)for(let S=0;S<this.compositionIds.length;S++)this.removeListenToEvent(this.compositionIds[S]);if(this.isDataLoaded)for(let S=0;S<this.compositionIds.length;S++)this.listenToEvent(this.compositionIds[S]);else{this.query.outputFormat=Me.BG,this.compositionIds=[];let S=yield Vn(this.query,"");this.conceptIds=S.conceptIds,this.internalConnections=(p=S.internalConnections)!==null&&p!==void 0?p:[],this.linkers=(s=S.linkers)!==null&&s!==void 0?s:[],this.reverse=S.reverse,this.compositionIds=S.mainCompositionIds,this.totalCount=S.mainCount,this.countInfoStrings=S.countinfo}let h=yield this.build();if(!this.isDataLoaded){this.isDataLoaded=!0;for(let S=0;S<this.compositionIds.length;S++)this.listenToEvent(this.compositionIds[S]);if(this.query.type!=""){let S=yield $e(this.query.type,999);S.id>0&&this.listenToEventType(S.id)}}for(let S=0;S<this.newIds.length;S++)this.listenToEvent(this.newIds[S]);return this.newIds=[],h})}build(){return So(this,void 0,void 0,function*(){ye.V.logfunction("build",["schemaquery",this.compositionIds]);let p=(0,To.w)(this.countInfoStrings);return this.format==Me.y0?this.data=yield(0,Xt.e$)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,p,this.order):this.format==Me.ZJ?this.data=yield(0,Xt.y6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,p,this.order):this.format==Me.pU?this.data=yield(0,Xt.rq)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,p,this.order):this.format==Me.XZ?(console.log("this is the raw format"),this.data={},this.data.linkers=this.linkers,this.data.conceptIds=this.conceptIds,this.data.compositionIds=this.compositionIds,this.data.reverse=this.reverse,this.data.countInfos=p,this.data.order=this.order):this.data=yield(0,Xt.b6)(this.linkers,this.conceptIds,this.compositionIds,this.reverse,p),this.data})}}function kn(B,p){return new ar(B,p)}function cr(B,p){return new ar(B,p).execute()}class Ao{constructor(){this.id=0,this.name="",this.html="",this.css="",this.js="",this.library={css:[],js:[]},this.assistant={id:"",input:"",type:""},this.timestamp="",this.widgetId=0,this.type="",this.clean="",this.after_render="",this.before_render="",this.custom_functions=[],this.update="",this.origin=0,this.version=0,this.mount_child="",this.children=[],this.wrapper="0",this.widget=new On}}var _s=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function No(B,p,s){return _s(this,arguments,void 0,function*(h,S,A,O={concepts:[],connections:[]}){var F,x,g,d,D;const V=ye.V.logfunction("CreateConnectionBetweenEntityLocal",[h.id,S.id,A]);if(Pe)try{const ue=yield Ve("CreateConnectionBetweenEntityLocal",{concept1Data:h,concept2Data:S,linker:A,actions:O});return!((x=(F=ue?.actions)===null||F===void 0?void 0:F.concepts)===null||x===void 0)&&x.length&&(O.concepts=JSON.parse(JSON.stringify(ue.actions.concepts))),!((d=(g=ue?.actions)===null||g===void 0?void 0:g.connections)===null||d===void 0)&&d.length&&(O.connections=JSON.parse(JSON.stringify(ue.actions.connections))),ue.data}catch(ue){console.log("CreateConnectionBetweenEntityLocal error sw: ",ue),ze(ue)}const J=h.userId,q=((D=h.type)===null||D===void 0?void 0:D.characterValue)+"_"+A,oe=yield(0,xe.$)(q,999,999,J,O);console.log(yield(0,Dt.F)(h.id,S.id,oe.id,1e3,void 0,void 0,O)),ye.V.logUpdate(V)})}var an=y(4310);function bo(B){for(;B.firstChild;)B.removeChild(B.firstChild)}var lr=y(490),dr=y(276);class ur extends Mn{constructor(p,s,h,S="",A=10){super(),this.inpage=10,this.selector=s,this.mainType=p,this.filterType=S,this.inpage=A,this.parentDomElement=h,this.mount(this.parentDomElement)}before_render(){this.render()}addFilter(p){if(p!=""){let s=new Wn;s.search=p,s.type=this.filterType,s.logicoperator="like",s.operateon="selector",s.name="selector_filter";let h="( selector_filter )";this.query.filters=[s],this.query.filterLogic=h}else this.query.filters=[],this.query.filterLogic="";console.log("this is the filters",this.query)}after_render(){let p=this.getElementById("selector"),s=this.getElementById("search-bar"),h=this;s.onchange=()=>{h.addFilter(s.value),h.mainDetails.update()};let S=new It;S.type=this.mainType,S.inpage=this.inpage;let A=new It;A.typeConnection=this.selector,A.name="selector",S.freeschemaQueries=[A],this.query=S,kn(this.query,"").subscribe((O,F)=>{let x={};this.mainDetails=F;for(let g=0;g<O.length;g++){let d=O[g],D=d.id,V=d[this.mainType];if(console.log("this is the selected data myItem",V,O[g],this.mainType,d),V){let J=V[this.selector];if(J){const q=Object.values(J)[0];x[D]=q}}}bo(p);for(const[g,d]of Object.entries(x)){const D=document.createElement("option");D.value=g,D.textContent=d,p.appendChild(D)}console.log("this is the output from selector",O)})}getHtml(){const p=document.createElement("style");return p.textContent=`
.search-select-wrapper {
  width: 300px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-family: Arial, sans-serif;
}

#search-bar {
  padding: 8px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
}

#selector {
  padding: 6px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 6px;
}
`,document.head.prepend(p),this.html=`
        <div class="search-select-wrapper">
        <input type="text" placeholder="Select or type..." id='search-bar'>
        <select id='selector'>
        </div>`,this.html}}const xs=`
/* CKEditor content styles */
.ck-content {
  /* Container styles */
  max-width: 100%;
  margin: 0 auto;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  line-height: 1.5;
  padding: 0.75rem;
  background: #fff;
  color: #333;
  border: 1px solid #ccced1;
}

/* Headings */
.ck-content h1, .ck-content h2, .ck-content h3, 
.ck-content h4, .ck-content h5, .ck-content h6 {
  font-weight: 700;
  line-height: 1.2;
  margin: 1em 0 0.5em;
}

.ck-content h1 { font-size: 2.5em; }
.ck-content h2 { font-size: 2em; }
.ck-content h3 { font-size: 1.75em; }
.ck-content h4 { font-size: 1.5em; }
.ck-content h5 { font-size: 1.25em; }
.ck-content h6 { font-size: 1em; }

/* Paragraphs and spacing */
.ck-content p {
  margin: 1em 0;
  line-height: 1.6;
}

/* Links */
.ck-content a {
  color: #1a73e8;
  text-decoration: none;
}

.ck-content a:hover {
  text-decoration: underline;
}

/* Lists */
.ck-content ul,
.ck-content ol {
  padding-left: 2em;
  margin: 1em 0;
}

.ck-content ul {
  list-style: disc;
}

.ck-content ol {
  list-style: decimal;
}

.ck-content li {
  margin: 0.5em 0;
}

/* Blockquotes */
.ck-content blockquote {
  margin: 1em 0;
  padding-left: 1em;
  border-left: 5px solid #ccc;
  font-style: italic;
  color: #666;
}

/* Code blocks */
.ck-content pre {
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 1em;
  margin: 1em 0;
  overflow-x: auto;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.ck-content code {
  background: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-size: 0.9em;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

/* Tables */
.ck-content table {
  border-collapse: collapse;
  width: 100%;
  margin: 1em 0;
}

.ck-content table th,
.ck-content table td {
  border: 1px solid #ddd;
  padding: 0.75em;
  text-align: left;
}

.ck-content table th {
  background: #f5f5f5;
  font-weight: bold;
}

/* Images */
.ck-content img {
  max-width: 100%;
  height: auto;
  margin: 1em 0;
}

.ck-content figure {
  margin: 1em 0;
  text-align: center;
}

.ck-content figure img {
  margin: 0;
}

.ck-content figcaption {
  color: #666;
  font-size: 0.9em;
  margin-top: 0.5em;
}

/* Dark mode */
/*
@media (prefers-color-scheme: dark) {
  .ck-content {
    background: #1a1a1a;
    color: #e0e0e0;
  }

  .ck-content a {
    color: #64b5f6;
  }

  .ck-content blockquote {
    border-left-color: #404040;
    color: #b0b0b0;
  }

  .ck-content pre,
  .ck-content code {
    background: #2d2d2d;
    border-color: #404040;
  }

  .ck-content table th,
  .ck-content table td {
    border-color: #404040;
  }

  .ck-content table th {
    background: #2d2d2d;
  }

  .ck-content figcaption {
    color: #b0b0b0;
  }
}
*/

/* CUSTOM DOCUMENTATION CSS */

#documentation-preview {
  border: 1px solid #ccc;
  padding: 1rem;
}

#documentation-preview h3 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
}

.pre-wrapper {
  background: #f2f5f9;
  border: 1px solid #cecece;
  display: block;
  padding: 1rem;
  border-radius: 0.25rem;
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.pre-wrapper pre {
  margin: 0;
  color: #e87aa2;
}

.widget-doc-section pre {
  background-color: transparent;
}

.widget-doc-section p {
  margin: 0;
}

.widget-doc-section code {
  color: #e87aa2;
  font-size: 0.875rem;
}

.mv-3 {
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.pv-3 {
  padding-top: 1rem;
  padding-bottom: 1rem;
}

  .widget-documentation-heading {
    background-color: #6e757d;
    color: #eee;
    font-size: 1.5rem;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .widget-documentation-heading h4 {
    margin-bottom: 0;
  }

  .close-documentation-button {
    border: none;
    outline: none;
    background-color: transparent;
    line-height: 0;
    margin: 0;
    padding: 0;
    cursor: pointer;
  }

  .close-documentation-button:hover,
  .close-documentation-button:focus  {
    background-color: transparent;
  }

  .documentation-creator {
    text-align: right;
    color: #666;
    margin: 0;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .documentation-creator span {
    font-style: italic;
  }

  .documentation-attachments {
    display: flex;
    flex-wrap: wrap;
  }

  .documentation-attachments img {
    width: 25%;
    height: auto;
    border: 1px solid #ccc;
    padding: 0.25rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .documentation-attachments iframe {
    width: 50%;
    border: 1px solid #ccc;
    padding: 0.25rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .widget-documentation-footer {
    text-align: right;
    margin-top: 1rem;
  }

  .widget-documentation-footer button {
    border-radius: 0;
    border: none;
    padding: 0.5rem 1.5rem;
    text-align: center;
    background: #6e757d;
    color: #eee;
  }

  #widget-details {
    position: absolute;
    right: 0px;
    top: 0px;
    z-index: 9999;
  }

  #widget-details button {
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 0 0 0 0.25rem;
    height: auto;
    width: auto;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  #widget-details button:hover, 
  #widget-details button:focus {
    opacity: 0.75;
  }

  #widget-details button span {
    pointer-events: none;
    font-size: 1rem;
  }

  #widget-details button svg {
    pointer-events: none;
    width: 16px;
    height: 16px;
    fill: #999;
  }

  #widget-documentation-preview-modal {
    border: none;
  }

  @media (min-width: 768px) {
    #widget-documentation-preview-modal {
      flex: 0 0 auto;
      width: 66.66666667%;
    }
  }

`,Zt={PAGE_COMP_NAME:"page",WIDGET_COMP_NAME:"widget",PROJECT_COMP_NAME:"project"};var Ye=y(2895);const Es=Ye;Ye.stringify,Ye.fromJSON,Ye.plugin,Ye.parse,Ye.list,Ye.document,Ye.comment,Ye.atRule,Ye.rule,Ye.decl,Ye.root,Ye.CssSyntaxError,Ye.Declaration,Ye.Container,Ye.Processor,Ye.Document,Ye.Comment,Ye.Warning,Ye.AtRule,Ye.Result,Ye.Input,Ye.Rule,Ye.Root,Ye.Node;var Os=y(2110),Bs=y.n(Os),Rs=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})},hr=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function Bn(B){const p=document.getElementById("fspage-properties");if(!p)return;let s=p?.textContent;s=s?s.replace(new RegExp(B,"g"),""):"",p.textContent=s}function pr(B,p){let s=document.querySelector(`meta[name="${B}"]`);s||(s=document.createElement("meta"),s.setAttribute("name",B),document.head.appendChild(s)),s.setAttribute("content",p)}var fr=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function yr(B){return fr(this,void 0,void 0,function*(){var p,s,h,S;!((s=(p=B?.library)===null||p===void 0?void 0:p.css)===null||s===void 0)&&s.length&&function(A){var O;const F=(O=A?.library)===null||O===void 0?void 0:O.css,x=`vde-css-${A?.origin?A?.origin:A?.widgetId}`;(function(g){const d=`link.${g}`,D=document.querySelectorAll(d);D?.length&&D?.forEach(V=>{V.remove()})})(x),F?.length&&F?.sort((g,d)=>Number(g?.order)-Number(d?.order)),F?.forEach(g=>{const d=document.createElement("link");d.classList.add(x),d.setAttribute("rel","stylesheet"),d.setAttribute("href",g.url),document.head.appendChild(d)})}(B),!((S=(h=B?.library)===null||h===void 0?void 0:h.js)===null||S===void 0)&&S.length&&(yield function(A){return fr(this,void 0,void 0,function*(){var O;const F=(O=A?.library)===null||O===void 0?void 0:O.js,x=`vde-js-${A?.origin?A?.origin:A?.widgetId}`;if(function(g){const d=`script.${g}`,D=document.querySelectorAll(d);D?.length&&D?.forEach(V=>{V.remove()})}(x),F?.length){F.sort((g,d)=>Number(g?.order)-Number(d?.order));for(const g of F)g?.url?document.querySelector(`script[src="${g.url}"]`)?console.log("Library already loaded:",g.url):yield new Promise((d,D)=>{const V=document.createElement("script");V.classList.add(x),V.setAttribute("type","text/javascript"),V.setAttribute("src",g.url),V.setAttribute("crossorigin","anonymous"),V.onload=()=>{d()},V.onerror=J=>{console.error("Failed to load script:",g.url,J),D(new Error(`Failed to load script: ${g.url}`))},document.head.appendChild(V)}):console.warn("Skipping library with invalid URL:",g);console.log("All JavaScript libraries loaded successfully")}})}(B))})}var rt=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function gr(B,p,s,h){return rt(this,void 0,void 0,function*(){var S;const A=yield lo(B,"the_page_body"),O=new It;O.conceptIds=[B],O.inpage=100,O.outputFormat=Me.y0,O.selectors=["the_page_body","the_page_title","the_page_slug","the_page_font_family","the_page_font_size","the_page_width","the_page_type","the_page_meta_title","the_page_meta_description","the_page_meta_keywords"],kn(O,"").subscribe(x=>rt(this,void 0,void 0,function*(){var g,d;console.log("SchemaQueryListener data -->",x),yield function(D){return hr(this,void 0,void 0,function*(){var V,J,q,oe,ue,me,Se,he,Ae,De,We,He,Je,Ze;[{key:"meta_title",value:(J=(V=D?.[`the_${Zt.PAGE_COMP_NAME}_meta_title`])===null||V===void 0?void 0:V.data)===null||J===void 0?void 0:J.the_meta_title},{key:"meta_description",value:(oe=(q=D?.[`the_${Zt.PAGE_COMP_NAME}_meta_description`])===null||q===void 0?void 0:q.data)===null||oe===void 0?void 0:oe.the_meta_description},{key:"meta_keywords",value:(me=(ue=D?.[`the_${Zt.PAGE_COMP_NAME}_meta_keywords`])===null||ue===void 0?void 0:ue.data)===null||me===void 0?void 0:me.the_meta_keywords},{key:"width",value:(he=(Se=D?.[`the_${Zt.PAGE_COMP_NAME}_width`])===null||Se===void 0?void 0:Se.data)===null||he===void 0?void 0:he.the_width},{key:"font_size",value:(De=(Ae=D?.[`the_${Zt.PAGE_COMP_NAME}_font_size`])===null||Ae===void 0?void 0:Ae.data)===null||De===void 0?void 0:De.the_font_size},{key:"font_family",value:(He=(We=D?.[`the_${Zt.PAGE_COMP_NAME}_font_family`])===null||We===void 0?void 0:We.data)===null||He===void 0?void 0:He.the_font_family},{key:"type",value:(Ze=(Je=D?.[`the_${Zt.PAGE_COMP_NAME}_type`])===null||Je===void 0?void 0:Je.data)===null||Ze===void 0?void 0:Ze.the_type}].forEach(at=>{at.value&&function(kt,nt){hr(this,void 0,void 0,function*(){const At=document.getElementById("fspage-properties")||function(){const Nt=document.createElement("style");return Nt.id="fspage-properties",document.head.appendChild(Nt),Nt}();let Ct="";switch(kt){case"width":Bn(".fspage { width: [^;]+ !important; }"),Ct=nt?`.fspage { width: ${nt} !important; }`:"";break;case"font_size":Bn(".fspage { font-size: [^;]+; }"),Ct=nt?`.fspage { font-size: ${nt}px; }`:"";break;case"font_family":Bn(".fspage { font-family: [^;]+; }"),Ct=nt?`.fspage { font-family: ${nt}; }`:"";break;case"type":Bn(".fspage { width: 1200px; margin: 0 auto; }"),Bn(".fspage { width: 100%; padding: 0; }"),Ct=nt==="fixed"?".fspage { width: 1200px; margin: 0 auto; }":nt==="fluid"?".fspage { width: 100%; padding: 0; }":"";break;case"meta_title":document.title=nt;break;case"meta_keywords":pr(kt.replace("meta_",""),nt);break;case"meta_description":return void pr(kt.replace("meta_",""),nt)}At.textContent+=Ct})}(at.key,at.value)})})}((d=(g=x?.[0])===null||g===void 0?void 0:g.data)===null||d===void 0?void 0:d[`the_${Zt.PAGE_COMP_NAME}`])})),document.getElementById("app").classList.add("fspage");const F=document.head.querySelectorAll("style#mystyleid");Array.from(F).forEach(x=>x.remove()),!((S=A?.[0])===null||S===void 0)&&S.id?yield jn(A[0].id,p,s,h):p.innerHTML="<h4>Invalid or Page doesn't exist</h4>"})}function jn(B,p,s,h){return rt(this,void 0,void 0,function*(){try{let S=yield(0,an.qj)(B),A=S.mainId,O=S.data;const F=yield wr(O,A);return yield mr(A,F,p,s,h)}catch(S){console.error(`Error Caught Rendering Widget: ${S}`),p.textContent=`Error: ${S.message}`}})}function vr(B,p,s,h){return rt(this,void 0,void 0,function*(){try{const S=yield(0,an.Cp)(B);return yield mr(B,S,p,s,h)}catch(S){console.error(`Error Caught Rendering Widget: ${S}`)}})}function mr(B,p,s,h){return rt(this,arguments,void 0,function*(S,A,O,F,x=!0){const g=yield Rn(S,[],A);if(!g.name)return void(O.innerHTML="<h4>Invalid or Widget doesn't exist</h4>");const d=O;yield yr(g);const D=yield $n(g,d,void 0,F),V=Array.from({length:32},()=>"abcdef"[Math.floor(6*Math.random())]).join("");O.classList.add(`${V}`),O.style.position="relative";const J=document.createElement("style");J.id="mystyleid";const q=`
        .${V} {
          ${g.css+D.css+xs} 
        }
      `;console.log("finalCSS -->",q);const oe=(yield function(me){return Rs(this,void 0,void 0,function*(){try{const Se=yield Es([Bs()()]).process(me,{from:void 0});return console.log("result --->",Se.css),Se.css}catch(Se){return console.error("Error processing CSS:",Se),null}})}(q))||"";console.log("normalizedCSS -->",oe),J.innerHTML=oe,g.children.length&&g?.children.forEach(me=>{var Se;const he=me?.library;(!((Se=he?.css)===null||Se===void 0)&&Se.length||he?.js.length)&&yr(me)}),document.head.appendChild(J);const ue=document.createElement("script");if(ue.innerHTML=g.js,d.appendChild(ue),x){const me=document.createElement("div");me.id="widget-details",me.innerHTML="",me.innerHTML=`
        <button class="widget-documentation-btn" widget-id="${g?.origin||g?.widgetId}" class="d-flex align-items-center gap-1" title="Documentation">
          <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 441 512.02"><path d="M324.87 279.77c32.01 0 61.01 13.01 82.03 34.02 21.09 21 34.1 50.05 34.1 82.1 0 32.06-13.01 61.11-34.02 82.11l-1.32 1.22c-20.92 20.29-49.41 32.8-80.79 32.8-32.06 0-61.1-13.01-82.1-34.02-21.01-21-34.02-50.05-34.02-82.11s13.01-61.1 34.02-82.1c21-21.01 50.04-34.02 82.1-34.02zM243.11 38.08v54.18c.99 12.93 5.5 23.09 13.42 29.85 8.2 7.01 20.46 10.94 36.69 11.23l37.92-.04-88.03-95.22zm91.21 120.49-41.3-.04c-22.49-.35-40.21-6.4-52.9-17.24-13.23-11.31-20.68-27.35-22.19-47.23l-.11-1.74V25.29H62.87c-10.34 0-19.75 4.23-26.55 11.03-6.8 6.8-11.03 16.21-11.03 26.55v336.49c0 10.3 4.25 19.71 11.06 26.52 6.8 6.8 16.22 11.05 26.52 11.05h119.41c2.54 8.79 5.87 17.25 9.92 25.29H62.87c-17.28 0-33.02-7.08-44.41-18.46C7.08 432.37 0 416.64 0 399.36V62.87c0-17.26 7.08-32.98 18.45-44.36C29.89 7.08 45.61 0 62.87 0h173.88c4.11 0 7.76 1.96 10.07 5l109.39 118.34c2.24 2.43 3.34 5.49 3.34 8.55l.03 119.72c-8.18-1.97-16.62-3.25-25.26-3.79v-89.25zm-229.76 54.49c-6.98 0-12.64-5.66-12.64-12.64 0-6.99 5.66-12.65 12.64-12.65h150.49c6.98 0 12.65 5.66 12.65 12.65 0 6.98-5.67 12.64-12.65 12.64H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h142.52c3.71 0 7.05 1.6 9.37 4.15a149.03 149.03 0 0 0-30.54 21.14H104.56zm0 72.3c-6.98 0-12.64-5.66-12.64-12.65 0-6.98 5.66-12.64 12.64-12.64h86.2c-3.82 8.05-6.95 16.51-9.29 25.29h-76.91zm239.61-18.85c7.41 7.43 4.68 18.9-3.05 25.23-7.46 6.01-20.97 8.92-28.68 1.83-7.77-7.23-4.68-18.87 2.76-25.24 7.18-6.05 21.39-9.37 28.97-1.82zm-43.88 95h6.34v-41.33H294.6c0-16.37 30.05-5.74 52.18-11.32v52.65h8.37v17.58h-54.86v-17.58z"/></svg>
        </button>
      `,d.appendChild(me);const Se=document.createElement("dialog");Se.id="widget-documentation-preview-modal",Se.className="col-md-8",Se.innerHTML="",Se.innerHTML=`
        <div class="widget-documentation-heading">
          <h4>Documentation</h4>
          <button class="close-documentation-button document-preview-close-button" title="Close">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
          </button>
        </div>

        <!-- <div id="documentation-preview" class="ck-content"></div> -->
        <div id="documentation-view" class="ck-content"></div>

        <div class="widget-documentation-footer">
          <button class="document-preview-close-button">Close</button>
        </div>
      `,d.appendChild(Se);const he=d.querySelectorAll(".widget-documentation-btn");he?.forEach(De=>{De.addEventListener("click",We=>{const He=We?.target;(function(Je){rt(this,void 0,void 0,function*(){console.log("openDocumentationPreviewModal widgetId",Je);const Ze=new It;Ze.typeConnection="the_widget_documentation",Ze.name="documentationText",Ze.selectors=["the_documentation_text"];const at=new It;at.typeConnection="the_widget_s_documentation",at.name="documentationBlank",at.selectors=["the_documentation_text","the_documentation_content","the_documentation_language","the_documentation_doc_title","the_documentation_folder","the_documentation_creator_email","the_documentation_created_by","the_documentation_content","the_documentation_type","the_documentation_s_doc_url","the_documentation_s_image_url","the_documentation_s_video_link","the_documentation_auth_type","the_documentation_bearer_token","the_documentation_method","the_documentation_method_url","the_documentation_username","the_documentation_password","the_documentation_s_json_list","the_documentation_api_script","the_documentation_api_body","the_documentation_code_editor","the_documentation_return"];const kt=new It;kt.typeConnection="the_documentation_s_json_list",kt.name="documentationJSON",kt.selectors=["the_json_list_key","the_json_list_value"],at.freeschemaQueries=[kt];const nt=new It;nt.conceptIds=[Je],nt.freeschemaQueries=[Ze,at],nt.inpage=100,nt.outputFormat=Me.y0,yield kn(nt,"").subscribe(At=>rt(this,void 0,void 0,function*(){var Ct,Nt,ln,dn,un,hn,pn,fn,yn,gn,vn;let mn;console.log("widget documentation preview data ->",At);const An=((fn=(pn=(hn=(un=(dn=(ln=(Nt=(Ct=At?.[0])===null||Ct===void 0?void 0:Ct.data)===null||Nt===void 0?void 0:Nt.the_widget)===null||ln===void 0?void 0:ln.the_widget_documentation)===null||dn===void 0?void 0:dn.data)===null||un===void 0?void 0:un.the_documentation)===null||hn===void 0?void 0:hn.the_documentation_text)===null||pn===void 0?void 0:pn.data)===null||fn===void 0?void 0:fn.the_text)||"";An&&(mn=An);const Kt=(vn=(gn=(yn=At?.[0])===null||yn===void 0?void 0:yn.data)===null||gn===void 0?void 0:gn.the_widget)===null||vn===void 0?void 0:vn.the_widget_s_documentation;Kt?.length&&(mn=Kt?.map(en=>{var Ht,ut,Ue,bt,Lt,_t,xt,Pt,gt,Et,ct,Ot,Bt,Rt,Gt,qt,qe,vt,Re,St,st,Tt,Ut,Wt,Nn,Xe,lt,ot,it,dt,yt;const Ge=(Ht=en?.data)===null||Ht===void 0?void 0:Ht.the_documentation,ht=(Ue=(ut=Ge?.the_documentation_type)===null||ut===void 0?void 0:ut.data)===null||Ue===void 0?void 0:Ue.the_type,pt=(Lt=(bt=Ge?.the_documentation_content)===null||bt===void 0?void 0:bt.data)===null||Lt===void 0?void 0:Lt.the_content,Vs=(xt=(_t=Ge?.the_documentation_creator_email)===null||_t===void 0?void 0:_t.data)===null||xt===void 0?void 0:xt.the_creator_email,js=(gt=(Pt=Ge?.the_documentation_doc_title)===null||Pt===void 0?void 0:Pt.data)===null||gt===void 0?void 0:gt.the_doc_title,$s=(ct=(Et=Ge?.the_documentation_method)===null||Et===void 0?void 0:Et.data)===null||ct===void 0?void 0:ct.the_method,Hs=(Bt=(Ot=Ge?.the_documentation_method_url)===null||Ot===void 0?void 0:Ot.data)===null||Bt===void 0?void 0:Bt.the_method_url,qs=(Gt=(Rt=Ge?.the_documentation_bearer_token)===null||Rt===void 0?void 0:Rt.data)===null||Gt===void 0?void 0:Gt.the_bearer_token,zs=(qe=(qt=Ge?.the_documentation_username)===null||qt===void 0?void 0:qt.data)===null||qe===void 0?void 0:qe.the_username,Js=(Re=(vt=Ge?.the_documentation_password)===null||vt===void 0?void 0:vt.data)===null||Re===void 0?void 0:Re.the_password,Qs=(st=(St=Ge?.the_documentation_auth_type)===null||St===void 0?void 0:St.data)===null||st===void 0?void 0:st.the_auth_type,zn=Ge?.the_documentation_s_json_list,Ys=(Ut=(Tt=Ge?.the_documentation_api_script)===null||Tt===void 0?void 0:Tt.data)===null||Ut===void 0?void 0:Ut.the_api_script,Xs=(Nn=(Wt=Ge?.the_documentation_api_body)===null||Wt===void 0?void 0:Wt.data)===null||Nn===void 0?void 0:Nn.the_api_body,Zs=(lt=(Xe=Ge?.the_documentation_language)===null||Xe===void 0?void 0:Xe.data)===null||lt===void 0?void 0:lt.the_language,Ks=(it=(ot=Ge?.the_documentation_return)===null||ot===void 0?void 0:ot.data)===null||it===void 0?void 0:it.the_return,ea=(yt=(dt=Ge?.the_documentation_code_editor)===null||dt===void 0?void 0:dt.data)===null||yt===void 0?void 0:yt.the_code_editor,Jn=Ge?.the_documentation_s_doc_url,Qn=Ge?.the_documentation_s_image_url,Yn=Ge?.the_documentation_s_video_link;let zt={type:ht,content:pt,creatorEmail:Vs,title:js};if(ht==="blank")zt=Object.assign({},zt);else if(ht==="api"){const Mt=[];zn?.length&&zn?.forEach(ft=>{var Go,Do,Fo,Po,Uo,Wo,Mo,Vo;Mt.push({key:(Po=(Fo=(Do=(Go=ft?.data)===null||Go===void 0?void 0:Go.the_json_list)===null||Do===void 0?void 0:Do.the_json_list_key)===null||Fo===void 0?void 0:Fo.data)===null||Po===void 0?void 0:Po.the_key,value:(Vo=(Mo=(Wo=(Uo=ft?.data)===null||Uo===void 0?void 0:Uo.the_json_list)===null||Wo===void 0?void 0:Wo.the_json_list_value)===null||Mo===void 0?void 0:Mo.data)===null||Vo===void 0?void 0:Vo.the_value})}),zt=Object.assign(Object.assign({},zt),{method:$s,methodURL:Hs,authType:Qs,username:zs,password:Js,bearerToken:qs,json:Mt,script:Ys,body:Xs})}else ht==="function"&&(zt=Object.assign(Object.assign({},zt),{language:Zs,return:Ks,codeEditor:ea}));const Dr=[],Fr=[],Pr=[];return Qn?.length&&Qn?.forEach(Mt=>{var ft;Dr.push((ft=Mt?.data)===null||ft===void 0?void 0:ft.the_image_url)}),Yn?.length&&Yn?.forEach(Mt=>{var ft;Fr.push((ft=Mt?.data)===null||ft===void 0?void 0:ft.the_video_link)}),Jn?.length&&Jn?.forEach(Mt=>{var ft;Pr.push((ft=Mt.data)===null||ft===void 0?void 0:ft.the_doc_url)}),zt=Object.assign(Object.assign({},zt),{imageList:Dr,linkList:Pr,videoList:Fr}),zt})),yield function(){return rt(this,void 0,void 0,function*(){document.getElementById("widget-documentation-preview-modal").showModal()})}(),function(wt,en){rt(this,void 0,void 0,function*(){const Ht=document.getElementById("documentation-view");if(r.B.DOCUMENTATION_WIDGET!=0)return void(yield jn(r.B.DOCUMENTATION_WIDGET,Ht,{currentWidgetId:en}));const ut=document.getElementById("documentation-preview");ut.innerHTML="",wt&&wt?.length&&typeof wt!="string"?wt?.forEach(Ue=>{var bt,Lt,_t,xt;const Pt=document.createElement("h3");let gt="";switch(Ue?.type){case"api":gt="API";break;case"function":gt="Functions and Classes";break;case"imgAndLink":gt="Images and Links";break;default:gt=""}Pt.innerHTML=`
        ${Ue?.title} ${gt?"("+gt+")":""}
      `,ut?.appendChild(Pt);const Et=document.createElement("div");Et.classList.add("widget-doc-content"),Ue?.content&&(Et.innerHTML=Ue.content,ut?.appendChild(Et));const ct=document.createElement("div");if(ct.classList.add("widget-doc-section"),Ue.type==="api"){let Re="";Re=Ue.authType==="basicAuth"?`
            <p>username: <code>${Ue?.username}</code></p>
            <p>password: <code>${Ue?.password}</code></p>
          `:Ue.authType==="bearerToken"?`
          <h6>Token: <code>${Ue?.bearerToken}</code></h6>
          `:"None";const St=Ue.json.map(Ut=>`${Ut?.key}: ${Ut?.value}`).join(", "),st=document.createElement("pre");st.textContent=St,ct.innerHTML=`
          <div class="pv-3">
            <h6>Method Type: <code>${Ue?.method.toUpperCase()}</code></h6>
            <h6>Endpoint: <code>${Ue?.methodURL}</code></h6>
          </div>
          <div class="pv-3">
            <h6>Auth Type: <code>${((bt=Ue?.authType)===null||bt===void 0?void 0:bt.toUpperCase())||""}</code></h6>
            ${Re}
          </div>
          <div class="pv-3">
            <h6>JSON</h6>
            <code class="pre-wrapper" id="json-list-pre"></code>
          </div>
          <div class="pv-3">
            <h6>Body</h6>
            ${Ue.body}
          </div>
          <div class="pv-3">
            <h6>Scripts</h6>
            ${Ue.script}
          </div>
        `;const Tt=ct.querySelector("#json-list-pre");Tt&&(Tt.appendChild(st),Tt.removeAttribute("id"))}else if(Ue.type==="function"){const Re=document.createElement("pre");Re.textContent=Ue?.codeEditor;const St=document.createElement("pre");St.textContent=Ue?.return,ct.innerHTML=`
          <div class="mv-3">
            <h6>Parameter</h6>
            <p>Language: ${Ue?.language}</p>
            <code class="pre-wrapper" id="editor-pre"></pre></code>
            <h6>Returns</h6>
            <code class="pre-wrapper" id="return-pre"></code>
          </div>
        `;const st=ct.querySelector("#editor-pre");st&&(st.appendChild(Re),st.removeAttribute("id"));const Tt=ct.querySelector("#return-pre");Tt&&(Tt.appendChild(St),Tt.removeAttribute("id"))}const Ot=document.createElement("div");Ot.classList.add("mv-3");const Bt=(Lt=Ue?.linkList)===null||Lt===void 0?void 0:Lt.map(Re=>`
            <p>${Re}</p>
          `).join(""),Rt=(_t=Ue?.imageList)===null||_t===void 0?void 0:_t.map(Re=>`
          <img src="${Re}">
        `).join(""),Gt=(xt=Ue?.videoList)===null||xt===void 0?void 0:xt.map(Re=>`
            <iframe width="560" height="315" src="${Re}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        `).join(""),qt=Bt?.length?`
          <div class="mv-3">
          <h6>Web links</h6>
          ${Bt}
          </div>
        `:"",qe=Rt?.length?`
          <h6>Attachments</h6>
          <div class="documentation-attachments">
            ${Rt}
          </div>
        `:"",vt=Gt?.length?`
            <h6>Videos</h6>
            <div class="documentation-attachments">
              ${Gt}
            </div>
            `:"";Ot.innerHTML=`
        <div class="mv-3">
          ${qt}
          ${qe}
          ${vt}
        </div>
        <p class="documentation-creator">- added by: <span>${Ue?.creatorEmail}</span></p>
      `,ct?.appendChild(Ot),ut?.appendChild(ct)}):wt!==void 0&&(ut.innerHTML=wt)})}(mn,Je)}))})})(He?.getAttribute("widget-id"))})});const Ae=d.querySelectorAll(".document-preview-close-button");Ae?.forEach(De=>{De.addEventListener("click",()=>{(function(){rt(this,void 0,void 0,function*(){const We=document.getElementById("widget-documentation-preview-modal"),He=We?.querySelector("form");He?.reset(),We?.close()})})()})})}return d.querySelectorAll(".wb-initial-empty").forEach(me=>{me.classList.remove("wb-initial-empty")}),document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(me=>{me.removeAttribute("onclick")}),D})}function Cr(B,p){return rt(this,void 0,void 0,function*(){var s,h,S,A,O,F,x,g,d,D,V,J;const q=(h=(s=B?.data)===null||s===void 0?void 0:s.the_widget)===null||h===void 0?void 0:h.the_widget_s_child;if(p.push(B),q&&q.length)for(let oe=0;oe<q.length;oe++){const ue=q[oe];let me=(g=(x=(F=(O=(A=(S=ue?.data.the_child_widget)===null||S===void 0?void 0:S.the_child_widget_info)===null||A===void 0?void 0:A.data)===null||O===void 0?void 0:O.the_widget)===null||F===void 0?void 0:F.the_widget_origin)===null||x===void 0?void 0:x.data)===null||g===void 0?void 0:g.the_origin;const Se=!!(!((V=(D=(d=ue?.data)===null||d===void 0?void 0:d.the_child_widget)===null||D===void 0?void 0:D.the_child_widget_use_latest)===null||V===void 0)&&V.data);me=Number(me)||!1;let he=null;if(Se&&me){const Ae=yield(0,an.qj)(me);he=((J=Ae?.data)===null||J===void 0?void 0:J[0])||[],he.useLatest=!0,ue.data.the_child_widget.the_child_widget_info=he}ue.data.the_child_widget.the_child_widget_info.sChildId=ue.id,yield Cr(ue.data.the_child_widget.the_child_widget_info,p)}})}function wr(B,p){return rt(this,void 0,void 0,function*(){const s=[],h=[...B];try{const S=h.find(A=>A.id===p);yield Cr(S,s)}catch(S){console.error("convert to real bulk error",S)}return s})}function Tr(B){return rt(this,arguments,void 0,function*(p,s=[],h=""){let S=yield(0,an.Cp)(p);const A=yield wr(S,p);return yield Rn(p,[],A)})}function Rn(B){return rt(this,arguments,void 0,function*(p,s=[],h,S=""){var A,O,F,x,g,d,D,V,J,q,oe,ue,me,Se,he,Ae,De,We,He,Je,Ze,at,kt,nt,At,Ct,Nt,ln,dn,un,hn,pn,fn,yn,gn,vn,mn,An,Kt,wt,en,Ht,ut,Ue,bt,Lt,_t,xt,Pt,gt,Et,ct,Ot,Bt,Rt,Gt,qt;try{const qe=new Ao,vt=(0,an.ix)(h,p);console.log("getWidgetBulkFromId output ->",vt),s.push(p);const Re=(A=vt?.data)===null||A===void 0?void 0:A.the_widget;qe.name=(F=(O=Re?.the_widget_name)===null||O===void 0?void 0:O.data)===null||F===void 0?void 0:F.the_name,qe.html=(g=(x=Re?.the_widget_html)===null||x===void 0?void 0:x.data)===null||g===void 0?void 0:g.the_html,qe.css=(D=(d=Re?.the_widget_css)===null||d===void 0?void 0:d.data)===null||D===void 0?void 0:D.the_css,qe.js=(J=(V=Re?.the_widget_js)===null||V===void 0?void 0:V.data)===null||J===void 0?void 0:J.the_js,qe.origin=Number(((oe=(q=Re?.the_widget_origin)===null||q===void 0?void 0:q.data)===null||oe===void 0?void 0:oe.the_origin)||((me=(ue=Re?.the_widget_origin)===null||ue===void 0?void 0:ue.data)===null||me===void 0?void 0:me.the_originid)),qe.version=(he=(Se=Re?.the_widget_version)===null||Se===void 0?void 0:Se.data)===null||he===void 0?void 0:he.the_version,qe.clean=(De=(Ae=Re?.the_widget_clean)===null||Ae===void 0?void 0:Ae.data)===null||De===void 0?void 0:De.the_clean,qe.timestamp=(He=(We=Re?.the_widget_timestamp)===null||We===void 0?void 0:We.data)===null||He===void 0?void 0:He.the_timestamp,qe.id=vt?.id;const St=(Ze=(Je=Re?.the_widget_type)===null||Je===void 0?void 0:Je.data)===null||Ze===void 0?void 0:Ze.the_type;qe.type=St=="null"||St==null?"the_element_name":St,qe.after_render=(kt=(at=Re?.the_widget_after_render)===null||at===void 0?void 0:at.data)===null||kt===void 0?void 0:kt.the_after_render,qe.before_render=(At=(nt=Re?.the_widget_before_render)===null||nt===void 0?void 0:nt.data)===null||At===void 0?void 0:At.the_before_render,qe.update=(Nt=(Ct=Re?.the_widget_update)===null||Ct===void 0?void 0:Ct.data)===null||Nt===void 0?void 0:Nt.the_update,qe.widgetId=p,qe.mount_child=(dn=(ln=Re?.the_widget_mount_child)===null||ln===void 0?void 0:ln.data)===null||dn===void 0?void 0:dn.the_mount_child;const st=Re?.the_widget_s_child;vt.useLatest&&(qe.useLatest=!0),vt.sChildId&&(qe.sChildId=vt.sChildId);const Tt=(un=Re?.the_widget_s_css_library)===null||un===void 0?void 0:un.map(Xe=>{var lt,ot,it,dt,yt,Ge,ht,pt;return{order:(dt=(it=(ot=(lt=Xe?.data)===null||lt===void 0?void 0:lt.the_css_library)===null||ot===void 0?void 0:ot.the_css_library_order)===null||it===void 0?void 0:it.data)===null||dt===void 0?void 0:dt.the_order,url:(pt=(ht=(Ge=(yt=Xe?.data)===null||yt===void 0?void 0:yt.the_css_library)===null||Ge===void 0?void 0:Ge.the_css_library_url)===null||ht===void 0?void 0:ht.data)===null||pt===void 0?void 0:pt.the_url}}),Ut=(hn=Re?.the_widget_s_js_library)===null||hn===void 0?void 0:hn.map(Xe=>{var lt,ot,it,dt,yt,Ge,ht,pt;return{order:(dt=(it=(ot=(lt=Xe?.data)===null||lt===void 0?void 0:lt.the_js_library)===null||ot===void 0?void 0:ot.the_js_library_order)===null||it===void 0?void 0:it.data)===null||dt===void 0?void 0:dt.the_order,url:(pt=(ht=(Ge=(yt=Xe?.data)===null||yt===void 0?void 0:yt.the_js_library)===null||Ge===void 0?void 0:Ge.the_js_library_url)===null||ht===void 0?void 0:ht.data)===null||pt===void 0?void 0:pt.the_url}});qe.library={css:Tt||[],js:Ut||[]};const Wt=(fn=(pn=Re?.the_widget_assistant)===null||pn===void 0?void 0:pn.data)===null||fn===void 0?void 0:fn.the_assistant;qe.assistant={id:(gn=(yn=Wt?.the_assistant_id)===null||yn===void 0?void 0:yn.data)===null||gn===void 0?void 0:gn.the_id,input:(mn=(vn=Wt?.the_assistant_input)===null||vn===void 0?void 0:vn.data)===null||mn===void 0?void 0:mn.the_input,type:(Kt=(An=Wt?.the_assistant_type)===null||An===void 0?void 0:An.data)===null||Kt===void 0?void 0:Kt.the_type};const Nn=(wt=Re?.the_widget_s_custom_function)===null||wt===void 0?void 0:wt.map(Xe=>{var lt,ot,it,dt,yt,Ge,ht;const pt=(lt=Xe?.data)===null||lt===void 0?void 0:lt.the_custom_function;return{id:Xe?.id,name:(it=(ot=pt?.the_custom_function_name)===null||ot===void 0?void 0:ot.data)===null||it===void 0?void 0:it.the_name,slug:(yt=(dt=pt?.the_custom_function_slug)===null||dt===void 0?void 0:dt.data)===null||yt===void 0?void 0:yt.the_slug,code:(ht=(Ge=pt?.the_custom_function_code)===null||Ge===void 0?void 0:Ge.data)===null||ht===void 0?void 0:ht.the_code}});if(console.log("customFunctionList -> ",Nn),qe.custom_functions=Nn,st?.length)for(let Xe=0;Xe<st.length;Xe++){const lt=((ut=(Ht=(en=st[Xe])===null||en===void 0?void 0:en.data.the_child_widget)===null||Ht===void 0?void 0:Ht.the_child_widget_info)===null||ut===void 0?void 0:ut.id)||((_t=(Lt=(bt=(Ue=st[Xe])===null||Ue===void 0?void 0:Ue.data.the_child_widget)===null||bt===void 0?void 0:bt.the_child_widget_parent)===null||Lt===void 0?void 0:Lt.data)===null||_t===void 0?void 0:_t.the_parent),ot=yield Rn(lt,s,h,S),it=(ct=(Et=(gt=(Pt=(xt=st[Xe])===null||xt===void 0?void 0:xt.data)===null||Pt===void 0?void 0:Pt.the_child_widget)===null||gt===void 0?void 0:gt.the_child_widget_type)===null||Et===void 0?void 0:Et.data)===null||ct===void 0?void 0:ct.the_type,dt=(qt=(Gt=(Rt=(Bt=(Ot=st[Xe])===null||Ot===void 0?void 0:Ot.data)===null||Bt===void 0?void 0:Bt.the_child_widget)===null||Rt===void 0?void 0:Rt.the_child_widget_wrapper)===null||Gt===void 0?void 0:Gt.data)===null||qt===void 0?void 0:qt.the_wrapper;ot.type=it=="null"||it==null?"the_element_name":it,ot.wrapper=dt,qe.children.push(ot)}return qe}catch(qe){throw qe instanceof Error&&console.error("error converting bulkwidget to widget tree",qe.message),qe}})}function $n(B,p){return rt(this,arguments,void 0,function*(s,h,S=!0,A,O,F=null){var x,g;const d=new On;d.html=s.html,F&&(d.parentWidget=Ir(F)),d.widgetType=s.type,d.componentDidMountFunction=s.before_render,d.addEventFunction=s.after_render,d.mountChildWidgetsFunction=s.mount_child,d.widgetState=Object.assign({},O),d.customFunctions=s.custom_functions,A&&(d.data=A),h.innerHTML="";const D=h;if(D&&(yield d.mount(D),s.widget=d,s.children.length>0&&((x=d.childWidgetElement)===null||x===void 0?void 0:x.length)>0))for(let V=0;V<((g=s.children)===null||g===void 0?void 0:g.length);V++){const J=s.children[V];for(let q=0;q<d.childWidgetElement.length;q++){const oe=d.childWidgetElement[q];if(J.wrapper===oe.id){const ue=kr(J);J.html=`<div id="${J.wrapper}">${J.html}</div>`;const me=yield $n(ue,oe,!1,d.data,d.widgetState,d);d.childWidgets.push(me),d.css=d.css+me.css+`#${oe.id} { ${J.css} }`,me.dataChange(Se=>{var he;const Ae=(he=Se?.type)===null||he===void 0?void 0:he.characterValue;Ae&&(d.childrenData[Ae]=Se)})}}}return console.log("newWidget ->",d,s),yield _o(h,".widget_container"),d})}function Ir(B){const p={};for(const[s,h]of Object.entries(B))typeof h=="object"&&h!==null&&Array.isArray(h)||(p[s]=h);return p}function Lo(B,p){return rt(this,arguments,void 0,function*(s,h,S=!0,A,O,F=null){var x,g;let d=new On;d.html=s.html,F&&(d.parentWidget=Ir(F)),d.widgetState=Object.assign({},A),d.widgetType=s.type,d.componentDidMountFunction=s.before_render,d.addEventFunction=s.after_render,d.mountChildWidgetsFunction=s.mount_child,d.customFunctions=s.custom_functions,d.inDevelopment=O!==!1,h.innerHTML="";let D=h;if(D&&(yield d.mount(D),s.widget=d,s.children.length>0&&((x=d.childWidgetElement)===null||x===void 0?void 0:x.length)>0))for(let V=0;V<((g=s.children)===null||g===void 0?void 0:g.length);V++){let J=s.children[V];for(let q=0;q<d.childWidgetElement.length;q++){let oe=d.childWidgetElement[q];if(J.wrapper===oe.id){const ue=kr(J),me=yield Lo(ue,oe,!1,d.widgetState,O,d);d.childWidgets.push(me),d.css=d.css+me.css+`#${oe.id} { ${J.css} }`,me.dataChange(Se=>{var he;console.log("This is the data change in child",Se);let Ae=(he=Se?.type)===null||he===void 0?void 0:he.characterValue;Ae&&(d.childrenData[Ae]=Se),console.log("new child data",d.childrenData)})}}}return console.log("newWidget ->",d,s),d})}function kr(B){return B.html=B.html.replace(/<[^>]*\bclass=["'][^"']*\bwidget_container\b[^"']*["'][^>]*>/g,p=>p.replace(/\bwidget_container\b/g,"").trim()),B.html=B.html.replace(/<[^>]*\bdraggable=["'][^"']*\btrue\b[^"']*["'][^>]*>/g,p=>p.replace(/\btrue\b/g,"false").trim()),B.html=B.html.replace(/<[^>]*\bclass=["'][^"']*\bhover-element\b[^"']*["'][^>]*>/g,p=>p.replace(/\bhover-element\b/g,"").trim()),B.html=B.html.replace(/<[^>]*\bclass=["'][^"']*\bwb-block\b[^"']*["'][^>]*>/g,p=>p.replace(/\bwb-block\b/g,"").trim()),B.html=B.html.replace(/<[^>]*onclick="widgetSelected\(event\)"\s*,?\s*ondragover="_dragService\.dragOverWidgetElement\(event\)"\s*,?\s*ondrop="_dragService\.dropWidgetElement\(event\)"\s*,?\s*ondragstart="_dragService\.dragStartWidgetElement\(event\)"\s*,?\s*ondragend="_dragService\.dragEndWidgetElement\(event\)"[^>]*>/g,p=>p.replace(/onclick="widgetSelected\(event\)"/g,'onclick=""').replace(/ondragover="_dragService\.dragOverWidgetElement\(event\)"/g,'ondragover=""').replace(/ondrop="_dragService\.dropWidgetElement\(event\)"/g,'ondrop=""').replace(/ondragstart="_dragService\.dragStartWidgetElement\(event\)"/g,'ondragstart=""').replace(/ondragend="_dragService\.dragEndWidgetElement\(event\)"/g,'ondragend=""').trim()),B.html=B.html.replace(/<[^>]*\bondragstart=["'][^"']*\b_dragService\.onWidgetDragStart\(event\)\b[^"']*["'][^>]*>/g,p=>p.replace(/\b_dragService\.onWidgetDragStart\(event\)\b/g,"").trim()),B}function Gs(B,p){return rt(this,void 0,void 0,function*(){return B&&B.nodeType===1&&B.querySelectorAll(p).forEach(s=>{for(;s.firstChild;)s.parentNode.insertBefore(s.firstChild,s);s.remove()}),B})}function _o(B,p){return rt(this,void 0,void 0,function*(){const s=B.querySelectorAll(p);for(const h of s){const S=h.parentElement;if(S){for(;h.firstChild;){const A=yield Gs(h.firstChild,p);S.insertBefore(A,h)}S.removeChild(h)}}})}var Ds=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function Hn(B){return Ds(this,arguments,void 0,function*(p,s=null,h="",S={concepts:[],connections:[]}){var A,O,F,x;if(Pe)try{const V=yield Ve("CreateData",{json:p,ofConcept:s,typeConcept:h,actions:S});return!((O=(A=V?.actions)===null||A===void 0?void 0:A.concepts)===null||O===void 0)&&O.length&&(S.concepts=JSON.parse(JSON.stringify(V.actions.concepts))),!((x=(F=V?.actions)===null||F===void 0?void 0:F.connections)===null||x===void 0)&&x.length&&(S.connections=JSON.parse(JSON.stringify(V.actions.connections))),V.data}catch(V){console.error("CreateTheComposition sw error: ",V),ze(V)}let g=999,d=999,D=(0,te.o)();for(const V in p){let J=Fs(V);if(typeof p[V]!="string"&&typeof p[V]!="number")if(s==null||s.id==0)D=yield(0,fe.k)(J,"",!0,g,4,d,void 0,S),Array.isArray(p[V])&&(J=Sr(J)),yield Hn(p[V],D,J,S);else{Array.isArray(p[V])&&(J=Ar(J));let q=Ar(V),oe=yield(0,fe.k)(J,"",!0,g,4,d,void 0,S);D=oe;let ue=Nr(h,q),me=yield(0,xe.$)(ue,d,g,g,S);yield(0,Dt.F)(s.id,oe.id,me.id,1e3,me.characterValue,g,S),Array.isArray(p[V])&&(J=Sr(J)),yield Hn(p[V],oe,J,S)}else{let q=Nr(h,V),oe=yield(0,xe.$)(q,d,g,g,S),ue=yield(0,fe.k)(V,p[V].toString(),!1,g,4,d,void 0,S);console.log("this is the type concept in down",oe,ue),s!=null&&(yield(0,Dt.F)(s.id,ue.id,oe.id,1e3,q,g,S))}}return D})}function Fs(B){return B.startsWith("the_")?B:"the_"+B}function Sr(B){return B.endsWith("_s")?B:B+"_s"}function Ar(B){return B.replace(/_s$/,"")}const Ps=B=>/^[+-]?\d+(\.\d+)?$/.test(B);function Nr(B,p){return Ps(p)?B+"_":B+"_"+function(s){return s.startsWith("the_")?s.slice(4):s}(p)}class br{constructor(){this.prototype="",this.required=[],this.optional=[],this.field="string",this.childPrototypes=[],this.isCompositional=!1,this.options=[],this.isQueryType=!1,this.querySelector=null,this.concepts=[],this.connections=[],this.addedConcepts=[],this.addedConnections=[]}}function Ft(B,p){if(Array.isArray(B)&&Array.isArray(p))for(let s=0;s<p.length;s++)B.push(p[s]);return B}var cn=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function xo(B){return cn(this,arguments,void 0,function*(p,s=null){let h=[],S=[],A=[],O=(0,te.o)();try{s==null&&(s=new Io,yield s.initialize());let F=[];if(p.isCompositional){if(O=yield function(d,D,V,J){return cn(this,void 0,void 0,function*(){let q=(0,te.o)(),oe=yield J.MakeTheInstanceConceptLocal("the_composition","",!0,999,999,999),ue=yield J.MakeTheTypeConceptLocal("the_composition_type",999,999,999),me=yield J.MakeTheTypeConceptLocal(d,999,999,999),Se=yield J.CreateTheConnectionLocal(oe.id,me.id,ue.id,1e3,"the_composition_type");return q=oe,D.push(ue),D.push(me),V.push(Se),q})}(p.prototype,h,S,s),p.isQueryType){let d=yield function(V,J,q){return cn(this,void 0,void 0,function*(){let oe=[],ue=[],me="the_composition_filter_type",Se="the_composition_selector",he=yield q.MakeTheTypeConceptLocal(me,999,999,999),Ae=yield q.MakeTheTypeConceptLocal(Se,999,999,999);if(V!=null){let De=yield q.MakeTheTypeConceptLocal(V.selector,999,999,999);oe.push(De);let We=yield q.MakeTheTypeConceptLocal(V.filterType,999,999,999);oe.push(De),oe.push(We);let He=yield q.CreateTheConnectionLocal(J.id,De.id,Ae.id,1e3,Se,999);ue.push(He);let Je=yield q.CreateTheConnectionLocal(J.id,We.id,he.id,1e3,me,999);ue.push(Je)}return{concepts:oe,connections:ue}})}(p.querySelector,O,s),D=d.concepts;Ft(A,d.connections),Ft(h,D)}if(p.options.length>0){let d=yield function(V,J,q){return cn(this,void 0,void 0,function*(){let oe=[],ue=[],me="the_composition_s_option",Se=yield q.MakeTheTypeConceptLocal(me,999,999,999);for(let he=0;he<V.length;he++){let Ae=V[he].type,De=V[he].value,We=yield q.MakeTheInstanceConceptLocal(Ae,De,!1,999,999,999);oe.push(We);let He=yield q.CreateTheConnectionLocal(J.id,We.id,Se.id,1e3,me,999);ue.push(He)}return{concepts:oe,connections:ue}})}(p.options,O,s),D=d.concepts;Ft(A,d.connections),Ft(h,D)}}else O=yield function(d,D){return cn(this,void 0,void 0,function*(){let V=yield(0,ce.A)(5124),J=yield D.MakeTheTypeConceptLocal(d,999,999,999);return yield function(oe,ue,me,Se){return cn(this,void 0,void 0,function*(){let he=yield Se.CreateTheConceptLocal("",ue.characterValue,999,oe.id,ue.id,4,!1);return he.characterValue=ue.characterValue,he.typeCharacter=ue.characterValue,he.isComposition=!0,he.type=ue,he})}(V,J,0,D)})}(p.prototype,s),A=yield _r(p.required,O,h,s,!0),F=yield _r(p.optional,O,h,s),h.push(O);let x=Lr(O,!0,!0),g=yield s.MakeTheTypeConceptLocal(x,999,999,999);if(h.push(g),p.childPrototypes.length>0)for(let d=0;d<p.childPrototypes.length;d++){let D=yield xo(p.childPrototypes[d]),V=D.mainConcept,J=D.connections,q=D.concepts,oe=yield s.CreateTheConnectionLocal(O.id,V.id,g.id,1e3,x,999);A.push(oe),Ft(A,J),Ft(h,q),h.push(V)}Ft(A,F),Ft(A,S),Ft(h,p.addedConcepts),Ft(A,p.addedConnections),p.concepts=h,p.connections=A,console.log("this is the connections",A)}catch{s?.rollbackTransaction()}return{concepts:h,connections:A,mainConcept:O}})}function Lr(B,p=!0,s=!1){var h;let S="the_prototype_of_"+((h=B.type)===null||h===void 0?void 0:h.characterValue);return S+=p?"_requires":"_optional",s&&(S+="_the_composition"),S}function _r(B,p,s,h){return cn(this,arguments,void 0,function*(S,A,O,F,x=!1,g=!1){let d=[],D=[],V=Lr(A,x,g),J=yield F.MakeTheTypeConceptLocal(V,999,999,999);O.push(J);for(let q=0;q<S.length;q++){let oe=yield F.MakeTheTypeConceptLocal(S[q],999,999,999);d.push(oe)}for(let q=0;q<d.length;q++){let oe=yield F.CreateTheConnectionLocal(A.id,d[q].id,J.id,1e3,V,999);D.push(oe)}for(let q=0;q<d.length;q++)O.push(d[q]);return D})}var Us=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,[])).next())})};function Eo(B){return Us(this,void 0,void 0,function*(){let p;try{const s=yield fetch(r.B.GetCachedImage(B),{method:"GET"});return s.ok?p=s.body:(console.log("Error in Getting Image",s.status),(0,o.ry)(s)),p}catch(s){throw s instanceof Error?console.log("Error in Getting Local concept by character value error message: ",s):console.log("Error in Getting Local concept by character value unexpected error: ",s),p}})}var Ws=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};function xr(B){return Ws(this,arguments,void 0,function*(p,s="normal"){let h,S=p.split("/").pop();if(s=="small"){let A=S?.split(".");A&&(S=A[0]+"_small."+A[1])}return S&&(h=yield Eo(S)),h})}function Er(B,p="normal"){let s=B;try{if(B){let h=B.split("/").pop();if(p=="small"){let S=h?.split(".");S&&(h=S[0]+"_small."+S[1])}h&&(s=r.B.GetCachedImage(h))}}catch{console.log("This url has error",B)}return s}var Pe,tt=function(B,p,s,h){return new(s||(s=Promise))(function(S,A){function O(g){try{x(h.next(g))}catch(d){A(d)}}function F(g){try{x(h.throw(g))}catch(d){A(d)}}function x(g){var d;g.done?S(g.value):(d=g.value,d instanceof s?d:new s(function(D){D(d)})).then(O,F)}x((h=h.apply(B,p||[])).next())})};const Ms=Date.now().toString(36)+Math.random().toString(36).substring(2);let Oo=[],$t=[],Bo=!1;function Or(B){Bo=B}function Ro(B="",p){Ke.b.BearerAccessToken=B,Pe&&Ve("updateAccessToken",{accessToken:B,session:Ke.b.sessionId})}function Br(){return tt(this,arguments,void 0,function*(B="",p="",s="",h="",S=!0,A="",O=void 0,F={},x={}){var g;try{r.B.BASE_URL=B,r.B.AI_URL=p,r.B.NODE_URL=h,r.B.BASE_APPLICATION=A,r.B.LOG_SERVER=(g=x.logserver)!==null&&g!==void 0?g:"https://logdev.freeschema.com",console.log("setting the logserver",r.B.LOG_SERVER,x.logserver),Ro(s);let d=Math.floor(1e8*Math.random());r.B.setRandomizer(d);const D={logApplication:!1,logPackage:!1,accessTracker:!1,isTest:!1};if(r.B.FLAGS=D,r.B.FLAGS=Object.assign(Object.assign({},D),F),function(V){const J=ye.V.logfunction("initializeFlags",arguments);try{return V.logApplication&&(Ss.initialize(),ye.V.logApplicationActivationStatus=!0,console.warn("Application log started.")),V.logPackage&&(ye.V.logPackageActivationStatus=!0,console.warn("Package log started.")),V.accessTracker&&(bn.J.activateStatus=!0,console.warn("Access Tracker Activated.")),V.isTest&&(n.B.isDataLoaded=!0,n.B.isCharacterLoaded=!0,n.B.isTypeLoaded=!0,n.B.isLocalDataLoaded=!0,n.B.isLocalTypeLoaded=!0,n.B.isLocalCharacterLoaded=!0,n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0,n.B.isLocalConnectionLoaded=!0),ye.V.logUpdate(J),V}catch(q){throw(0,o.ey)(J,"initializeFlags",q),q}}(r.B.FLAGS),!("serviceWorker"in navigator))return yield Gn(),void console.warn("Service Worker not supported in this browser.");if(yield function(){return tt(this,void 0,void 0,function*(){var V;let J=sessionStorage.getItem("cacheServers"),q=sessionStorage.getItem("config"),oe=(V=sessionStorage.getItem("session"))!==null&&V!==void 0?V:"999",ue=parseInt(oe);J!==void 0&&J!=="undefined"||(r.B.NODE_CACHE_URL=r.B.BASE_URL),J=JSON.parse(J);const me=JSON.parse(q);J&&me&&me.documentationWidget&&ue!=999?(Array.isArray(J)&&J.length?r.B.NODE_CACHE_URL=J[0]:r.B.NODE_CACHE_URL=r.B.BASE_URL,Ke.b.setSession(ue),r.B.DOCUMENTATION_WIDGET=me.documentationWidget):yield function(){return tt(this,void 0,void 0,function*(){var Se,he;let Ae;try{let De=(he=(Se=window?.location)===null||Se===void 0?void 0:Se.hostname)!==null&&he!==void 0?he:"boomconsole";if(Ae=yield fetch(r.B.getAppConfig()+"?application="+De,{method:"POST"}),!Ae.ok)throw new Error("Failed to sync data to the server.");const We=yield Ae.json();We.success&&(sessionStorage.setItem("cacheServers",JSON.stringify(We.servers)),sessionStorage.setItem("config",JSON.stringify(We.config)),sessionStorage.setItem("session",We.session),Ke.b.setSession(We.session),We.servers?r.B.NODE_CACHE_URL=We.servers[0]:r.B.NODE_CACHE_URL=r.B.BASE_URL,We.config&&(r.B.DOCUMENTATION_WIDGET=We.config.documentationWidget))}catch(De){console.error("error getting app config from server",De.message)}})}(),console.log("before the payload in app",Ke.b.sessionId),navigator.serviceWorker&&navigator.serviceWorker.controller&&Ve("SESSION_DATA",{type:"SESSION_DATA",data:r.B.NODE_CACHE_URL,session:Ke.b.sessionId})})}(),function(){navigator.serviceWorker.addEventListener("message",V=>tt(this,void 0,void 0,function*(){var J,q,oe,ue;try{if(V.data&&V.data.type==="API_401"){const{requestDetails:me}=V.data,Se={method:me.method,headers:new Headers(me.headers),body:me.body},he=yield fetch(me.url,Se),Ae=yield he?.json();(q=(J=navigator?.serviceWorker)===null||J===void 0?void 0:J.controller)===null||q===void 0||q.postMessage({type:"API_RESPONSE",messageId:V.data.messageId,response:new Response(Ae,{status:he.status,statusText:he.statusText,headers:he.headers})})}}catch(me){console.error("Error during listenPostMessage",me),(ue=(oe=navigator?.serviceWorker)===null||oe===void 0?void 0:oe.controller)===null||ue===void 0||ue.postMessage({type:"API_RESPONSE",messageId:V.data.messageId})}}))}(),function(){tr.x.addEventListener("message",V=>tt(this,void 0,void 0,function*(){const{type:J,payload:q}=V.data;if(!J)return;let oe={success:!1,data:void 0};Rr[J]?yield Rr[J](q):console.warn(`Unable to handle "${J}" case in BC service worker`)}))}(),O&&O.activate&&O.manual)yield new Promise((V,J)=>{navigator.serviceWorker.ready.then(q=>tt(this,void 0,void 0,function*(){console.log("registraions ready",q),Pe=q.active,yield Sn(),V("done")})).catch(q=>{console.error("Error: Ready service worker",q),J(q)}).finally(()=>console.log("Finally service worker ready done")),setTimeout(()=>J("Timeout ready"),3e4)});else if(O&&O?.activate)try{console.log("service worker initialiing"),yield function(V){var J=arguments;return tt(this,void 0,void 0,function*(){const q=ye.V.logfunction("handleRegisterServiceWorker",J);yield new Promise((oe,ue)=>{var me,Se;let he=!1;navigator.serviceWorker.register((me=V.pathToSW)!==null&&me!==void 0?me:"./serviceWorker.bundle.js",{scope:(Se=V.scope)!==null&&Se!==void 0?Se:"/"}).then(Ae=>tt(this,void 0,void 0,function*(){console.log("Service Worker registered:",Ae),setInterval(()=>{$t.length&&qn()},2e3),console.log("update listen start"),Ae.onupdatefound=()=>{const De=Ae.installing;console.log("new worker",De),De&&(De.onstatechange=()=>tt(this,void 0,void 0,function*(){console.warn("on state change triggered",De.state,navigator.serviceWorker.controller),De.state==="installing"&&(console.log("Service Worker installing"),Pe=void 0),De.state!=="activated"&&De.state!=="redundant"||!navigator.serviceWorker.controller||(Pe=De,console.log("New Service Worker is active",Ae),setTimeout(()=>{console.log("Message Processed after some time"),qn()},5e3),yield Sn(),he=!0,qn(),oe())}))},Ae.addEventListener("controllerchange",()=>tt(this,void 0,void 0,function*(){console.warn("controller change triggered",navigator.serviceWorker.controller),navigator.serviceWorker.controller&&(Pe=navigator.serviceWorker.controller,console.warn("Service worker has been activated; controller change"),yield Sn())})),(Ae.installing||Ae.waiting||Ae.active)&&Ae.addEventListener("statechange",De=>tt(this,void 0,void 0,function*(){var We;((We=De?.target)===null||We===void 0?void 0:We.state)==="activating"&&(Pe=navigator.serviceWorker.controller,console.warn("Service Worker is activating statechange"),yield Sn())})),Ae.active?(console.log("active sw"),Pe=Ae.active,yield Sn(),qn(),oe()):setTimeout(()=>{he||ue("Not Completed Initialization")},1e4)})).catch(Ae=>tt(this,void 0,void 0,function*(){yield Gn(),ue(Ae),console.error("Service Worker registration failed:",Ae),(0,o.ey)(q,"handleRegisterServiceWorker",Ae)}))})})}(O)}catch(V){yield Gn(),console.error("Unable to start service worker",V)}else yield Gn(),console.warn("Service Worker not activated");return!0}catch(d){yield Gn(),console.warn("Cannot initialize the system",d)}})}function Ve(B,p){return tt(this,arguments,void 0,function*(s,h,S=0){let A=!1;const O=Math.random().toString(36).substring(2);h.messageId=O,h.TABID=Ms;const F=JSON.parse(JSON.stringify(h));let x;return s!="checkProcess"&&S==0&&(x=setInterval(()=>tt(this,void 0,void 0,function*(){if(!A&&!(yield function(g,d){return tt(this,void 0,void 0,function*(){var D;try{const V=yield Ve("checkProcess",{checkMessageId:g});if(console.log("check interval data res for type ",d,g,V.data),(D=V?.data)===null||D===void 0?void 0:D.processing)return!0}catch(V){return console.error("error on checing executing process",d,g,V),!1}})}(O,s))&&(clearInterval(x),!A)){if(console.log("Failed to handle type "+s+" message not found "+O,"retrying: ",S==0,s),S==0&&s!="checkProcess")return console.log("retrying ",s,O),yield Ve(s,h,S+1);console.log("Failed to handle type "+s+" "+O)}}),2e3)),new Promise((g,d)=>{if(navigator.serviceWorker.controller||Pe||console.log("",navigator.serviceWorker.controller,Pe,s),navigator.serviceWorker.controller||Pe){const D=V=>{var J,q,oe,ue,me,Se;((J=V?.data)===null||J===void 0?void 0:J.messageId)==O&&(A=!0,clearInterval(x),V.data.success||(((q=V?.data)===null||q===void 0?void 0:q.status)==401?d((0,o.ry)(new Response("Unauthorized",{status:401,statusText:(oe=V?.data)===null||oe===void 0?void 0:oe.statusText}))):((ue=V?.data)===null||ue===void 0?void 0:ue.status)==500?d((0,o.Mb)(new Response("Internal Server Error",{status:500,statusText:(me=V?.data)===null||me===void 0?void 0:me.statusText}))):(console.error("Error in the response from worker:",V),d(`Failed to handle action ${s} ${JSON.stringify(h)}, Response: ${JSON.stringify(V.data)}`))),!((Se=V.data)===null||Se===void 0)&&Se.actions&&(h.actions=JSON.parse(JSON.stringify(V.data.actions))),g(V.data),navigator.serviceWorker.removeEventListener("message",D))};if(navigator.serviceWorker.addEventListener("message",D),navigator.serviceWorker.controller)s!="checkProcess"&&console.log("sent to sw",s,O),navigator.serviceWorker.controller.postMessage({type:s,payload:F});else if(Pe){console.warn(`controller not found but serviceWorker is available. messageId: ${O}, type: ${s}`);try{Pe.postMessage({type:s,payload:F})}catch(V){console.log("Retrying again on catch service worker",V),Pe.postMessage({type:s,payload:F})}}else console.warn(`Service Worker hasn't loaded yet. messageId: ${O}, type: ${s}`),console.info("ready",navigator.serviceWorker.ready),setTimeout(()=>{console.warn(`Re-Trying after certain time. messageId: ${O}, type: ${s}`),Pe?(console.info("This is triggered "),Pe?.postMessage({type:s,payload:h})):(console.log("not ready",s),clearInterval(x),d("Service worker not ready"))},3e4);setTimeout(()=>{clearInterval(x),d(`No response from service worker after timeout: ${s}`),navigator.serviceWorker.removeEventListener("message",D)},21e4)}else $t.push({message:{type:s,payload:F}}),s=="init"&&(clearInterval(x),g(null))})})}const Rr={GetLinkListener:B=>tt(void 0,void 0,void 0,function*(){const p=Oo.find(s=>s.listenerId==B.listenerId);return p?.callback(B.data),{success:!0}}),dispatchEvent:B=>tt(void 0,void 0,void 0,function*(){if(Pe){let p=new CustomEvent(B.id||"",B.data);dispatchEvent(p)}return{success:!0}}),checkInit:B=>tt(void 0,void 0,void 0,function*(){return console.log("service worker init 0"),navigator.serviceWorker.controller&&(console.log("service worker init 1"),Pe=navigator.serviceWorker.controller),yield Sn(),{success:!0}})};function Gn(){return tt(this,void 0,void 0,function*(){yield(0,ks.A)();const B=new Date().getTime();yield(0,L.A)().then(()=>{let p=new Date().getTime()-B;console.log("The time taken to prepare concept  data is  ",p)}).catch(p=>{throw p}),yield(0,er.Ay)().then(()=>{let p=new Date().getTime()-B;console.log("The time taken to prepare local concept  ",p)}).catch(p=>{throw p}),yield(0,Ki.p)().then(()=>{n.B.isLocalConnectionLoaded=!0}).catch(p=>{throw p}),yield(0,er.xd)().catch(p=>{throw console.log("This is the error in populating binary tree"),p}),yield(0,Ki.a)().then(()=>{n.B.isConnectionLoaded=!0,n.B.isConnectionTypeLoaded=!0;let p=new Date().getTime()-B;console.log("The time taken to prepare connections  ",p)}).catch(p=>{throw p})})}function Gr(B,p={}){if(Pe||typeof window<"u"){let s=new CustomEvent(`${B}`,p);dispatchEvent(s)}else tr.x.postMessage({type:"dispatchEvent",payload:{id:B,data:p}})}function qn(){return tt(this,void 0,void 0,function*(){console.log("message queue",$t);const B=$t.find(p=>{var s;return((s=p?.message)===null||s===void 0?void 0:s.type)=="init"});if(B){console.log("Processing Init Queue poped",B?.type,B);const p=$t.indexOf(B);p>-1&&$t.splice(p,1),yield Ve(B?.type,B?.payload)}for(console.log("message queue while",$t);$t.length>0;){const{message:p,resolve:s,reject:h}=$t.shift();console.log("Queue poped",p.type,p),yield Ve(p.type,p.payload)}})}const ze=B=>{if(B instanceof H.z)throw console.error("FreeSchemaResponse Error",B),B;console.error("Service Worker Error",B)};function Sn(){return tt(this,void 0,void 0,function*(){yield Ve("init",{url:r.B.BASE_URL,aiurl:r.B.AI_URL,accessToken:Ke.b.BearerAccessToken,nodeUrl:r.B.NODE_URL,enableAi:!1,applicationName:r.B.BASE_APPLICATION,flags:r.B.FLAGS})})}},4643:(Q,E,y)=>{function N(L){try{if(!y.g.localStorage)return!1}catch{return!1}var n=y.g.localStorage[L];return n!=null&&String(n).toLowerCase()==="true"}Q.exports=function(L,n){if(N("noDeprecation"))return L;var u=!1;return function(){if(!u){if(N("throwDeprecation"))throw new Error(n);N("traceDeprecation")?console.trace(n):console.warn(n),u=!0}return L.apply(this,arguments)}}},9746:()=>{},9977:()=>{},197:()=>{},1866:()=>{},2739:()=>{},5042:Q=>{Q.exports={nanoid:(E=21)=>{let y="",N=0|E;for(;N--;)y+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return y},customAlphabet:(E,y=21)=>(N=y)=>{let L="",n=0|N;for(;n--;)L+=E[Math.random()*E.length|0];return L}}}},Wr={};function Vt(Q){var E=Wr[Q];if(E!==void 0)return E.exports;var y=Wr[Q]={exports:{}};return ta[Q](y,y.exports,Vt),y.exports}Vt.n=Q=>{var E=Q&&Q.__esModule?()=>Q.default:()=>Q;return Vt.d(E,{a:E}),E},Vt.d=(Q,E)=>{for(var y in E)Vt.o(E,y)&&!Vt.o(Q,y)&&Object.defineProperty(Q,y,{enumerable:!0,get:E[y]})},Vt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Vt.o=(Q,E)=>Object.prototype.hasOwnProperty.call(Q,E),Vt.r=Q=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})};var ne=Vt(949),na=ne.ADMIN,oa=ne.ALLID,ia=ne.AccessTracker,ra=ne.AddGhostConcept,sa=ne.Anomaly,aa=ne.BaseUrl,ca=ne.BinaryTree,la=ne.BuildWidgetFromId,da=ne.BuilderStatefulWidget,ua=ne.Composition,ha=ne.CompositionBinaryTree,pa=ne.CompositionNode,fa=ne.Concept,ya=ne.ConceptsData,ga=ne.Connection,va=ne.ConnectionData,ma=ne.CountInfo,Ca=ne.CreateComposition,wa=ne.CreateConnection,Ta=ne.CreateConnectionBetweenEntityLocal,Ia=ne.CreateConnectionBetweenTwoConcepts,ka=ne.CreateConnectionBetweenTwoConceptsGeneral,Sa=ne.CreateConnectionBetweenTwoConceptsLocal,Aa=ne.CreateData,Na=ne.CreateDefaultConcept,ba=ne.CreateDefaultLConcept,La=ne.CreateSession,_a=ne.CreateSessionVisit,xa=ne.CreateTheCompositionLocal,Ea=ne.CreateTheCompositionWithCache,Oa=ne.CreateTheConnection,Ba=ne.CreateTheConnectionGeneral,Ra=ne.CreateTheConnectionLocal,Ga=ne.DATAID,Da=ne.DATAIDDATE,Fa=ne.DATAV2,Pa=ne.DelayFunctionExecution,Ua=ne.DeleteConceptById,Wa=ne.DeleteConceptLocal,Ma=ne.DeleteConnectionById,Va=ne.DeleteConnectionByIdBulk,ja=ne.DeleteConnectionByType,$a=ne.DeleteConnectionByTypeBulk,Ha=ne.DeleteUser,qa=ne.DependencyObserver,za=ne.FilterSearch,Ja=ne.FormatFromConnections,Qa=ne.FormatFromConnectionsAltered,Ya=ne.FreeschemaQuery,Xa=ne.FreeschemaQueryApi,Za=ne.GetAllConnectionsOfComposition,Ka=ne.GetAllConnectionsOfCompositionBulk,ec=ne.GetAllTheConnectionsByTypeAndOfTheConcept,tc=ne.GetComposition,nc=ne.GetCompositionBulk,oc=ne.GetCompositionBulkWithDataId,ic=ne.GetCompositionFromConnectionsWithDataId,rc=ne.GetCompositionFromConnectionsWithDataIdFromConnections,sc=ne.GetCompositionFromConnectionsWithDataIdInObject,ac=ne.GetCompositionFromConnectionsWithDataIdIndex,cc=ne.GetCompositionFromConnectionsWithIndex,lc=ne.GetCompositionFromConnectionsWithIndexFromConnections,dc=ne.GetCompositionFromMemoryWithConnections,uc=ne.GetCompositionList,hc=ne.GetCompositionListAll,pc=ne.GetCompositionListAllWithId,fc=ne.GetCompositionListListener,yc=ne.GetCompositionListLocal,gc=ne.GetCompositionListLocalWithId,vc=ne.GetCompositionListWithId,mc=ne.GetCompositionListWithIdUpdated,Cc=ne.GetCompositionListener,wc=ne.GetCompositionLocal,Tc=ne.GetCompositionLocalWithId,Ic=ne.GetCompositionWithAllIds,kc=ne.GetCompositionWithCache,Sc=ne.GetCompositionWithDataIdBulk,Ac=ne.GetCompositionWithDataIdWithCache,Nc=ne.GetCompositionWithId,bc=ne.GetCompositionWithIdAndDateFromMemory,Lc=ne.GetConceptBulk,_c=ne.GetConceptByCharacter,xc=ne.GetConceptByCharacterAndCategoryLocal,Ec=ne.GetConceptByCharacterAndType,Oc=ne.GetConnectionBetweenTwoConceptsLinker,Bc=ne.GetConnectionBulk,Rc=ne.GetConnectionById,Gc=ne.GetConnectionDataPrefetch,Dc=ne.GetConnectionOfTheConcept,Fc=ne.GetConnectionTypeForCount,Pc=ne.GetFreeschemaImage,Uc=ne.GetFreeschemaImageUrl,Wc=ne.GetImageApi,Mc=ne.GetLink,Vc=ne.GetLinkListListener,jc=ne.GetLinkListener,$c=ne.GetLinkRaw,Hc=ne.GetLinkerConnectionFromConcepts,qc=ne.GetLinkerConnectionToConcepts,zc=ne.GetRelation,Jc=ne.GetRelationLocal,Qc=ne.GetRelationRaw,Yc=ne.GetTheConcept,Xc=ne.GetTheConceptLocal,Zc=ne.GetUserGhostId,Kc=ne.JUSTDATA,el=ne.LConcept,tl=ne.LConnection,nl=ne.LISTNORMAL,ol=ne.LocalConceptsData,il=ne.LocalSyncData,rl=ne.LocalTransaction,sl=ne.Logger,al=ne.LoginToBackend,cl=ne.MakeTheInstanceConcept,ll=ne.MakeTheInstanceConceptLocal,dl=ne.MakeTheTimestamp,ul=ne.MakeTheTypeConceptApi,hl=ne.MakeTheTypeConceptLocal,pl=ne.NORMAL,fl=ne.PRIVATE,yl=ne.PUBLIC,gl=ne.PatcherStructure,vl=ne.Prototype,ml=ne.RAW,Cl=ne.RecursiveSearchApi,wl=ne.RecursiveSearchApiNewRawFullLinker,Tl=ne.RecursiveSearchApiRaw,Il=ne.RecursiveSearchApiRawFullLinker,kl=ne.RecursiveSearchApiWithInternalConnections,Sl=ne.RecursiveSearchListener,Al=ne.SchemaQuery,Nl=ne.SchemaQueryListener,bl=ne.SearchAllConcepts,Ll=ne.SearchLinkInternal,_l=ne.SearchLinkInternalAll,xl=ne.SearchLinkMultipleAll,El=ne.SearchLinkMultipleAllObservable,Ol=ne.SearchLinkMultipleApi,Bl=ne.SearchQuery,Rl=ne.SearchStructure,Gl=ne.SearchWithLinker,Dl=ne.SearchWithTypeAndLinker,Fl=ne.SearchWithTypeAndLinkerApi,Pl=ne.Selector,Ul=ne.SessionData,Wl=ne.Signin,Ml=ne.Signup,Vl=ne.SignupEntity,jl=ne.SplitStrings,$l=ne.StatefulWidget,Hl=ne.SyncData,ql=ne.TrashTheConcept,zl=ne.UpdateComposition,Jl=ne.UpdateCompositionLocal,Ql=ne.UserBinaryTree,Yl=ne.Validator,Xl=ne.ViewInternalData,Zl=ne.ViewInternalDataApi,Kl=ne.WidgetTree,ed=ne.convertFromConceptToLConcept,td=ne.convertFromLConceptToConcept,nd=ne.convertWidgetTreeToWidget,od=ne.convertWidgetTreeToWidgetWithWrapper,id=ne.createFormFieldData,rd=ne.createPrototypeLocal,sd=ne.dispatchIdEvent,ad=ne.getFromDatabaseWithType,cd=ne.getObjectsFromIndexDb,ld=ne.getUserDetails,dd=ne.getWidgetBulkFromId,ud=ne.getWidgetFromId,hd=ne.handleServiceWorkerException,pd=ne.hasActivatedSW,fd=ne.init,yd=ne.orderTheConnections,gd=ne.recursiveFetch,vd=ne.recursiveFetchNew,md=ne.removeAllChildren,Cd=ne.renderLatestWidget,wd=ne.renderPage,Td=ne.renderWidget,Id=ne.searchLinkMultipleListener,kd=ne.sendEmail,Sd=ne.sendMessage,Ad=ne.serviceWorker,Nd=ne.setHasActivatedSW,bd=ne.storeToDatabase,Ld=ne.subscribedListeners,_d=ne.unwrapContainers,xd=ne.updateAccessToken,Ed=ne.uploadAttachment,Od=ne.uploadFile,Bd=ne.uploadImage,Rd=ne.uploadImageV2,Gd=ne.validDocumentFormats,Dd=ne.validImageFormats;const Fd=Object.freeze(Object.defineProperty({__proto__:null,ADMIN:na,ALLID:oa,AccessTracker:ia,AddGhostConcept:ra,Anomaly:sa,BaseUrl:aa,BinaryTree:ca,BuildWidgetFromId:la,BuilderStatefulWidget:da,Composition:ua,CompositionBinaryTree:ha,CompositionNode:pa,Concept:fa,ConceptsData:ya,Connection:ga,ConnectionData:va,CountInfo:ma,CreateComposition:Ca,CreateConnection:wa,CreateConnectionBetweenEntityLocal:Ta,CreateConnectionBetweenTwoConcepts:Ia,CreateConnectionBetweenTwoConceptsGeneral:ka,CreateConnectionBetweenTwoConceptsLocal:Sa,CreateData:Aa,CreateDefaultConcept:Na,CreateDefaultLConcept:ba,CreateSession:La,CreateSessionVisit:_a,CreateTheCompositionLocal:xa,CreateTheCompositionWithCache:Ea,CreateTheConnection:Oa,CreateTheConnectionGeneral:Ba,CreateTheConnectionLocal:Ra,DATAID:Ga,DATAIDDATE:Da,DATAV2:Fa,DelayFunctionExecution:Pa,DeleteConceptById:Ua,DeleteConceptLocal:Wa,DeleteConnectionById:Ma,DeleteConnectionByIdBulk:Va,DeleteConnectionByType:ja,DeleteConnectionByTypeBulk:$a,DeleteUser:Ha,DependencyObserver:qa,FilterSearch:za,FormatFromConnections:Ja,FormatFromConnectionsAltered:Qa,FreeschemaQuery:Ya,FreeschemaQueryApi:Xa,GetAllConnectionsOfComposition:Za,GetAllConnectionsOfCompositionBulk:Ka,GetAllTheConnectionsByTypeAndOfTheConcept:ec,GetComposition:tc,GetCompositionBulk:nc,GetCompositionBulkWithDataId:oc,GetCompositionFromConnectionsWithDataId:ic,GetCompositionFromConnectionsWithDataIdFromConnections:rc,GetCompositionFromConnectionsWithDataIdInObject:sc,GetCompositionFromConnectionsWithDataIdIndex:ac,GetCompositionFromConnectionsWithIndex:cc,GetCompositionFromConnectionsWithIndexFromConnections:lc,GetCompositionFromMemoryWithConnections:dc,GetCompositionList:uc,GetCompositionListAll:hc,GetCompositionListAllWithId:pc,GetCompositionListListener:fc,GetCompositionListLocal:yc,GetCompositionListLocalWithId:gc,GetCompositionListWithId:vc,GetCompositionListWithIdUpdated:mc,GetCompositionListener:Cc,GetCompositionLocal:wc,GetCompositionLocalWithId:Tc,GetCompositionWithAllIds:Ic,GetCompositionWithCache:kc,GetCompositionWithDataIdBulk:Sc,GetCompositionWithDataIdWithCache:Ac,GetCompositionWithId:Nc,GetCompositionWithIdAndDateFromMemory:bc,GetConceptBulk:Lc,GetConceptByCharacter:_c,GetConceptByCharacterAndCategoryLocal:xc,GetConceptByCharacterAndType:Ec,GetConnectionBetweenTwoConceptsLinker:Oc,GetConnectionBulk:Bc,GetConnectionById:Rc,GetConnectionDataPrefetch:Gc,GetConnectionOfTheConcept:Dc,GetConnectionTypeForCount:Fc,GetFreeschemaImage:Pc,GetFreeschemaImageUrl:Uc,GetImageApi:Wc,GetLink:Mc,GetLinkListListener:Vc,GetLinkListener:jc,GetLinkRaw:$c,GetLinkerConnectionFromConcepts:Hc,GetLinkerConnectionToConcepts:qc,GetRelation:zc,GetRelationLocal:Jc,GetRelationRaw:Qc,GetTheConcept:Yc,GetTheConceptLocal:Xc,GetUserGhostId:Zc,JUSTDATA:Kc,LConcept:el,LConnection:tl,LISTNORMAL:nl,LocalConceptsData:ol,LocalSyncData:il,LocalTransaction:rl,Logger:sl,LoginToBackend:al,MakeTheInstanceConcept:cl,MakeTheInstanceConceptLocal:ll,MakeTheTimestamp:dl,MakeTheTypeConceptApi:ul,MakeTheTypeConceptLocal:hl,NORMAL:pl,PRIVATE:fl,PUBLIC:yl,PatcherStructure:gl,Prototype:vl,RAW:ml,RecursiveSearchApi:Cl,RecursiveSearchApiNewRawFullLinker:wl,RecursiveSearchApiRaw:Tl,RecursiveSearchApiRawFullLinker:Il,RecursiveSearchApiWithInternalConnections:kl,RecursiveSearchListener:Sl,SchemaQuery:Al,SchemaQueryListener:Nl,SearchAllConcepts:bl,SearchLinkInternal:Ll,SearchLinkInternalAll:_l,SearchLinkMultipleAll:xl,SearchLinkMultipleAllObservable:El,SearchLinkMultipleApi:Ol,SearchQuery:Bl,SearchStructure:Rl,SearchWithLinker:Gl,SearchWithTypeAndLinker:Dl,SearchWithTypeAndLinkerApi:Fl,Selector:Pl,SessionData:Ul,Signin:Wl,Signup:Ml,SignupEntity:Vl,SplitStrings:jl,StatefulWidget:$l,SyncData:Hl,TrashTheConcept:ql,UpdateComposition:zl,UpdateCompositionLocal:Jl,UserBinaryTree:Ql,Validator:Yl,ViewInternalData:Xl,ViewInternalDataApi:Zl,WidgetTree:Kl,convertFromConceptToLConcept:ed,convertFromLConceptToConcept:td,convertWidgetTreeToWidget:nd,convertWidgetTreeToWidgetWithWrapper:od,createFormFieldData:id,createPrototypeLocal:rd,dispatchIdEvent:sd,getFromDatabaseWithType:ad,getObjectsFromIndexDb:cd,getUserDetails:ld,getWidgetBulkFromId:dd,getWidgetFromId:ud,handleServiceWorkerException:hd,hasActivatedSW:pd,init:fd,orderTheConnections:yd,recursiveFetch:gd,recursiveFetchNew:vd,removeAllChildren:md,renderLatestWidget:Cd,renderPage:wd,renderWidget:Td,searchLinkMultipleListener:Id,sendEmail:kd,sendMessage:Sd,serviceWorker:Ad,setHasActivatedSW:Nd,storeToDatabase:bd,subscribedListeners:Ld,unwrapContainers:_d,updateAccessToken:xd,uploadAttachment:Ed,uploadFile:Od,uploadImage:Bd,uploadImageV2:Rd,validDocumentFormats:Gd,validImageFormats:Dd},Symbol.toStringTag,{value:"Module"}));export{Vl as $,Id as A,xd as B,gd as C,Ra as D,tc as E,Ga as F,Bl as G,ja as H,Cd as I,nd as J,Xc as K,Nl as L,Ua as M,xl as O,za as Q,Oc as R,Il as S,Wa as V,Ya as Z,Yc as a,Al as b,rl as c,Bc as d,pc as e,hl as f,xa as g,da as h,Kl as i,ud as j,od as k,aa as l,Ma as m,ec as n,Ta as o,zc as p,$l as q,wa as r,il as s,Fd as t,ll as u,cl as v,Yl as w,Kc as x,pl as y,fd as z};
