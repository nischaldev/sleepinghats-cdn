const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home.index-Ox0uWUjY.js","assets/mainView.class-C4NLGCWW.js","assets/modal.service-BuE7kunj.js","assets/mftsccs-browser-Bt3uP0Zt.js","assets/codemirror-B3vgQINq.js","assets/vendor-Cs_0E_Xj.js","assets/ckeditor-Cw9bcqxY.js","assets/vendor-TRZluGMH.css","assets/eslint4b-BLWGvIOa.js","assets/prettier-ClL2wQep.js","assets/modal-Bdbd8Hwt.css","assets/navbar.component-DE2g1GgH.js","assets/loginModal.service-B1eeeBmz.js","assets/loginModal-DGhNYttL.css","assets/home-BRuQr2K9.css","assets/preview.index-aQubTSex.js","assets/page-preview.index-CJ9FPNCz.js","assets/page-preview-BJCVd99J.css","assets/documentation.index-to1kfjYz.js","assets/highlight-CFrhCzdo.js","assets/highlight-ZgkIHsf0.css","assets/documentation-Dc24vCVe.css","assets/subscription.index-W_HgqprK.js","assets/video-tutorial.index-s6ZjrKg5.js","assets/video-tutorial-Dg46rKRD.css","assets/community.index-BnWweVX4.js","assets/community-tn0RQdqM.css","assets/initialLoadWICO-sEsJ_eLO.js"])))=>i.map(i=>d[i]);
import{a as O,h as Z,W as X,B as W,Z as p,u as ee,A as te,Q as F,V as ne,N as L,i as oe,$ as ae,C as re,b as se,U as ie,f as ce}from"./mftsccs-browser-Bt3uP0Zt.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const f={baseURL:"https://boomconsole.com/api/v1",baseNodeUrl:"https://boomconsole.com",boomURL:"https://boomconsole.com",aiURL:"https://www.ai.freeschema.com/api",deployURL:"https://deploy.freeschema.com",CLIENT_ID:"636550695311-ctc09991hhu6iav4kkhnp1ge537nec2i.apps.googleusercontent.com",logserver:"https://logger.freeschema.com",enableSW:!1,discussion_community:101765915,ai_widget:101934087,visual_prototype_widget:101938499,video_tutorial_widget:102040172,subscriptionId:102121109,documentation_preview_widget:102097744,folder_widget:102400016,assets_widget:102410590},le=f?.boomURL;async function Fe(e,t,o){const a=await O(`the_${e}`,"",!0,t,4,999);for(const[n,r]of Object.entries(o)){let s=n;const i=await O(`${s}`,`${r}`,!1,t,4,999);await de(a,i,s)}return a}async function de(e,t,o){const a=e.userId,n=999,r=999,s=e.type?.characterValue,i=o,c=s+"_"+i,d=await Z(c,n,r,a);await X(e.id,t.id,d.id,1e3)}async function ue(e,t){try{const o=new Headers;return o.append("Content-Type","application/json"),o.append("Authorization",`Bearer ${t}`),await(await fetch(`${le}/api/get-entity-from-user?userConceptId=${e}`,{method:"GET",headers:o,redirect:"follow"})).json()}catch(o){throw console.error(o),o}}async function Be(e){const t=await ue(e?.data?.userConcept,e?.data?.token);let o={token:e?.data?.token,refreshToken:e?.data?.refreshtoken,email:e?.data?.email,userId:e?.data?.entity?.[0]?.userId,userConcept:e?.data?.userConcept,entityId:t?.entity,amcode:btoa(JSON.stringify(e?.data?.roles))};return W(o.token),localStorage.setItem("profile",JSON.stringify(o)),!0}async function v(){return new Promise(e=>{let t=localStorage?.getItem("profile")||"";if(t){const o=JSON.parse(t);e(o)}else e()})}async function he(){return new Promise(e=>{let t=localStorage?.getItem("tempwidget")||"";if(t){const o=JSON.parse(t);e(o)}else e()})}const me=f?.baseNodeUrl;class w{static instance;static getInstance(){return w.instance||(w.instance=new w),w.instance}async getLoginInfo(){const t=await v(),o=await this.checkIfUserIsAdmin(t?.userConcept);let a="",n=!1,r=!1;if(t?.token){n=!0;let s="",i="";if(t?.entityId){let c=new p;c.typeConnection="the_entity_firstname",c.name="entity_firstname";let d=new p;d.typeConnection="the_entity_lastname",d.name="entity_lastname";let u=new p;u.typeConnection="the_entity_tour_status",u.name="entity_tour_status";let l=new p;l.type="the_entity",l.name="top",l.conceptIds=[t.entityId],l.freeschemaQueries=[c,d,u],l.outputFormat=ee;let h;await te(l,"").subscribe(m=>{h=m}),s=h?.[0]?.the_entity?.the_entity_firstname?.the_firstname||"",i=h?.[0]?.the_entity?.the_entity_lastname?.the_lastname||"",r=h?.[0]?.the_entity?.the_entity_tour_status?.the_tour_status==="true"}a=`
        <div id="profileIcon" class="position-relative" onclick="headerFunctions.openUserActionModel()">
          ${t?.email?.slice(0,1)}
          <div id="profileDropdown">
            <div class="user-email">
              <span class="material-symbols-outlined">account_circle</span>
              <div class="user-info">
                <div class="full-name">${s} ${i}</div>
                <div class="email">${t?.email}</div>
              </div>
            </div>
            <!-- <router-link href="" class="dropdown-item danger" onclick="logout(event)">
              <span class="material-symbols-outlined">logout</span>
              Logout
            </router-link> -->
            <router-link class="dropdown-item danger" id="wico_btn-logout">
              <span class="material-symbols-outlined">logout</span>
              Logout
            </router-link>
          </div>
        </div>
      `}else n=!1,a=`
        <div class="d-flex flex-row gap-2">
          <!-- <router-link class="btn btn-primary" onclick="openLoginModal(event)">Login</router-link>
          <router-link class="btn btn-secondary" onclick="openSignupModal(event)">Signup</router-link> -->

          <router-link class="btn btn-primary wico_btn-openLoginModal">Login</router-link>
          <router-link class="btn btn-secondary wico_btn-openSignupModal">Signup</router-link>
        </div>
      `;return{loginInfoHTML:a,isLoggedIn:n,isAdmin:o,tourStatus:r}}async checkIfUserIsAdmin(t){try{return(await F(t))?.accessId===3}catch(o){return console.error("Error fetching user concept:",o),!1}}async logout(){const t=await he();await ne(t?.id),localStorage.removeItem("profile"),localStorage.removeItem("tempwidget"),location.reload()}async checkAndUpdateToken(){try{const t=await v();if(!t?.token){console.warn("No token found in local storage.");return}const o=t.token,a=t.refreshToken,n=new Headers;n.append("Content-Type","application/json");const r={accessToken:o,refreshToken:a},i=await(await fetch(`${me}/api/Auth/refresh`,{method:"POST",headers:n,body:JSON.stringify(r)})).json();if(i.success&&i.data){const{accessToken:c,refreshToken:d}=i.data;t.token=c,t.refreshToken=d,localStorage.removeItem("profile"),localStorage.setItem("profile",JSON.stringify(t))}else this.logout()}catch(t){console.error("Error refreshing token:",t)}}}const pe=w.getInstance();(function(){const t=window.fetch;window.fetch=async(...o)=>{const a=o[1]||{};try{const n=await t(...o);if(n.status===401){console.warn("401 Unauthorized - Refreshing token"),await pe.checkAndUpdateToken();const r=await v();if(!r?.token)return console.error("Token refresh failed. User not logged in."),n;if(a.headers){const s=new Headers(a.headers);s.set("Authorization",`Bearer ${r.token}`),s.has("Content-Type")||s.set("Content-Type","application/json"),a.headers=s}return t(o[0],a)}return n}catch(n){throw console.error("Intercepted Fetch Error:",n),n}}})();const fe="modulepreload",ge=function(e){return"https://cdn.jsdelivr.net/gh/nischaldev/sleepinghats-cdn@master/"+e},R={},g=function(t,o,a){let n=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=s?.nonce||s?.getAttribute("nonce");n=Promise.allSettled(o.map(c=>{if(c=ge(c),c in R)return;R[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":fe,d||(l.as="script"),l.crossOrigin="",l.href=c,i&&l.setAttribute("nonce",i),document.head.appendChild(l),d)return new Promise((h,m)=>{l.addEventListener("load",h),l.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return n.then(s=>{for(const i of s||[])i.status==="rejected"&&r(i.reason);return t().catch(r)})};function C(e,t=0){let o=`<ul style="list-style: none; margin: 10px 0px; ${t==0?" padding-left: 0px; ":""}" id="sortable-list">`;for(let a=0;a<e.length;a++){const n=e[a];n.edit?o+=`
                <li style="border: 1px solid lightgray; padding: 5px 10px; margin-bottom: 5px;" data-page-id="${n.page}">
                    <div style="display: flex; align-items: start; gap: 10px; justify-content: space-between;">
                        <textarea id="menuName" class="form-control form-control-sm" rows="1" placeholder="Name" style="flex:1">${n.name??""}</textarea>
                        <input id="menuLink" class="form-control form-control-sm" placeholder="link" value="${n.link??""}" ${typeof n.page=="number"?"disabled":""} style="flex: 1"/>
                        <textarea id="menuAction" class="form-control form-control-sm" rows="1" placeholder="Action Function" style="flex: 2">${n.action??""}</textarea>
                        <div style="dispaly: flex; align-items: center; justify-content: center; gap: 5px">
                            <input class="form-check-input" type="checkbox" id="menuAuth" ${n.auth==!0?"checked":""} />
                            <label class="form-check-label">Auth</label>
                        </div>
                        <div style="width: 100px; display: flex; align-items: center; gap: 10px;">
                            <a onclick="handleMenuAction(event, 'cancel', ${a}, ${n.page})" role="button"><img src="https://boomconcole.com/freeschema/fbb325b1-911e-4ea2-9c6d-7510c62009e6.svg" height="16px" alt="remove" /></a>
                            <a onclick="handleMenuAction(event, 'update', ${a}, ${n.page})" role="button"><img src="https://boomconcole.com/freeschema/32f26593-df4f-46bc-beef-9f8a7b96343f.png" height="16px" alt="remove" /></a>
                        </div>
                    </div>
                </li>
                <li>${n.menus?`${C(n.menus,t+1)}`:""}</li>
            `:o+=`
                <li style="border: 1px solid lightgray; padding: 5px 10px; margin-bottom: 5px;" data-page-id="${n.page}">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span style="flex: 1">${n.name}</span>
                        <span style="flex: 1">${n.link}</span>
                        <span style="width: 120px;">${n.action?"Action: <b>Yes</b>":""}</span>
                        <span style="width: 120px;">${n.auth?"Auth: <b>True</b>":"Auth: <b>False</b>"}</span>
                        <div style="width: 100px; display: flex; align-items: center; gap: 10px;">
                            ${a>0?`<a onclick="handleMenuAction(event, 'up', ${a}, ${n.page})" role="button"><img src="https://boomconcole.com/freeschema/f0f13015-1d73-4268-987c-7d1bbb661ee7.png" height="16px" alt="up" /></a>`:""}
                            ${n.menus.length>0?'<a role="button"><img src="https://boomconcole.com/freeschema/05deeedc-b791-4ff4-8a25-751a1c7a4fe8.png" height="16px" alt="right" /></a>':""}
                            ${a<e.length-1?`<a onclick="handleMenuAction(event, 'down', ${a}, ${n.page})" role="button"><img src="https://boomconcole.com/freeschema/3c5e1681-4e99-4dbe-b178-02dad7118c02.png" height="16px" alt="down" /></a>`:""}
                            ${t>0?'<a role="button"><img src="https://boomconcole.com/freeschema/2ad5cd15-e7fc-4578-9479-fe516e5fb9d5.png" height="16px" alt="left" /></a>':""}
                            <a onclick="handleMenuAction(event, 'remove', ${a}, ${n.page})" role="button"><img src="https://boomconcole.com/freeschema/fbb325b1-911e-4ea2-9c6d-7510c62009e6.svg" height="16px" alt="remove" /></a>
                            <a onclick="handleMenuAction(event, 'edit', ${a}, ${n.page})" role="button"><img src="https://boomconcole.com/freeschema/98218250-6ad3-4d24-af6f-0f9d79895c44.png" height="16px" alt="remove" /></a>
                        </div>
                    </div>
                </li>
                <li>${n.menus?`${C(n.menus,t+1)}`:""}</li>
            `}return o+="</ul>",o}function Je(e){console.log("menus",e);const t=C(e),o=document.getElementById("menu-items");o&&(o.innerHTML=t);let a=null;document.querySelectorAll("#sortable-list li").forEach(n=>{n.addEventListener("dragstart",r=>{a=n,r.dataTransfer.effectAllowed="move"}),n.addEventListener("dragover",r=>{r.preventDefault(),n.classList.add("drag-over")}),n.addEventListener("dragleave",()=>{n.classList.remove("drag-over")}),n.addEventListener("drop",r=>{r.preventDefault(),n.classList.remove("drag-over"),a!==n&&!n.contains(a)&&n?.parentNode?.insertBefore(a,n.nextSibling)}),n.addEventListener("dragend",()=>{document.querySelectorAll(".drag-over").forEach(r=>r.classList.remove("drag-over"))})})}async function _e(e){console.log("projectId",e);let t;if(e||(t=q()),!e&&!t?.projectId)return console.log("Project Id not found"),[];if(!e&&t.projectId&&(e=t?.projectId),console.log("projectId 2",e),!e)return[];const o=["the_item_menu_name","the_item_menu_link","the_item_menu_action","the_item_menu_auth","the_item_menu_order","the_item_menu_page"],a=new p;a.typeConnection="the_menu_s_item",a.selectors=o;function n(u,l=5){if(l==5)return;const h=new p;h.typeConnection="the_menu_s_item",h.selectors=o,u.name=l.toString(),u.freeschemaQueries=[h];const m=l+1;n(h,m)}const r=new p;r.conceptIds=[e],n(r,1);const s=await L(r,"");console.log("valllu",s);const i=s?.[0]?.the_project?.the_menu_s_item||[],c=(u=[])=>{let l=[];for(let h=0;h<u.length;h++){const m=u[h];l.push({name:m?.the_item_menu?.the_item_menu_name?.the_name??"",link:m?.the_item_menu?.the_item_menu_link?.the_link??"",action:m?.the_item_menu?.the_item_menu_action?.the_action??"",page:m?.the_item_menu?.the_item_menu_page?.the_page?Number(m?.the_item_menu?.the_item_menu_page?.the_page):"",order:m?.the_item_menu?.the_item_menu_order?.the_order?Number(m?.the_item_menu?.the_item_menu_order?.the_order):0,auth:m?.the_item_menu?.the_item_menu_auth?.the_auth=="true",menus:c(m?.the_item_menu?.the_menu_s_item)??[]})}return l.sort((h,m)=>h.order-m.order)};return c(i)}async function qe(e,t=[]){console.log("menus",t);const o=await new oe;try{await o.initialize();const a=await F(e);await ae(e,"the_menu_s_item"),await B(a,t,o),await o.commitTransaction(),console.log("output concept",e)}catch(a){console.error(a),await o.rollbackTransaction()}}async function B(e,t=[],o){for(let a=0;a<t.length;a++){const n=t[a],r=await o.MakeTheInstanceConceptLocal("the_item_menu","",!0,999,4);await o.CreateConnection(e,r,"the_menu_s_item");for(let[s,i]of Object.entries(n))if(console.log("key",s,i),!!["name","link","action","auth","order","page","menus"].includes(s)&&!(s=="menus"&&!Array.isArray(i)))if(s=="menus")await B(r,i,o);else{const d=await o.MakeTheInstanceConceptLocal("the_"+s,i,!0,999,4);await o.CreateConnection(r,d,"the_item_menu_"+s)}}}const ye=async()=>{const e=f.enableSW;"serviceWorker"in navigator&&e&&await new Promise((t,o)=>{navigator.serviceWorker.register("/sw.js").then(a=>{a.addEventListener("updatefound",()=>{const n=a.installing;n?.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&(n.postMessage("skipWaiting"),setTimeout(()=>{confirm("A reload is required to update to latest")&&window.location.reload()},500))})}),t(void 0)}).catch(a=>{console.error("Service Worker Init error",a),o(a)}),setTimeout(()=>{o()},3e4)})},J="wico_site";function q(){const e=atob(localStorage.getItem(J)||"");return e?JSON.parse(e):{}}function Q(e,t){const o=q();o[e]=t,localStorage.setItem(J,btoa(JSON.stringify(o)))}function H(){window.wico={fetchMenus:_e}}async function we(){await ye()}const y={PAGE_COMP_NAME:"page",WIDGET_COMP_NAME:"widget",PROJECT_COMP_NAME:"project"},be={ENTITY_PAGE_LINKER:"s_page",PAGE_WIDGET_LINKER:"body",ENTITY_PROJECT_LINKER:"s_project",PROJECT_PAGE_LINKER:"s_page"};let _=[],E,b="",$=!1,N="";const k="storeOwner",I=async e=>{Se(e),await Promise.all([Ce(e),Pe(e)]),Q("projectId",e),H(),K()},ve=async e=>{document.title=e.storeName||"Store",V(e.storeLogo),E=e.mainPageId,b=e.projectName,_=e.pagesList,localStorage.setItem(k,btoa(e.entityId)),Q("projectId",e.projectId),H(),K()},K=()=>{window.addEventListener("popstate",()=>S(window.location.href)),document.addEventListener("click",e=>{const o=e.target.closest("a");if(!o||o.target==="_blank"||o.hasAttribute("download")||o.getAttribute("rel")==="external"||e.defaultPrevented||e.button!==0||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||o.origin!==location.origin)return;const a=o.getAttribute("href");!a||a.startsWith("#")||a.startsWith("mailto:")||(e.preventDefault(),history.pushState({},"",a),S(a))},!0),S(window.location.href)},S=async e=>{const{pathname:t}=new URL(e,window.location.origin);if(N==t)return;N=t;const o=Ee(t),a=ke(e),n=document.head.querySelectorAll("style#mystyleid");if(Array.from(n).forEach(r=>r.remove()),console.log("abc",t,_,o),o){const r=_.find(s=>s.path==o.route);x(r,{params:o?.params,queryParams:a})}else if(t==="/"&&E){const r=_.find(s=>s.id==E);x(r,{params:{},queryParams:a})}else{const r=_.find(s=>s.path=="/404");r?z(r.page):document.querySelector("#app").innerHTML="<h1>404</h1>"}document.getElementById("global-loader")?.classList.add("d-none")},x=async(e,t)=>{Le(e),e.page?await z(e.page,t):console.warn("No page content Found")};function ke(e){const{searchParams:t}=new URL(e,window.location.origin),o={};for(const[a,n]of t.entries())o[a]?o[a]=Array.isArray(o[a])?[...o[a],n]:[o[a],n]:o[a]=n;return o}const Ee=e=>{const a=[..._.map(n=>n.path)].sort((n,r)=>{const s=n.split("/").filter(Boolean),i=r.split("/").filter(Boolean),c=s.filter(u=>u.startsWith(":")).length,d=i.filter(u=>u.startsWith(":")).length;return c!==d?c-d:i.length-s.length});console.log("routes",a);for(let n=0;n<a.length;n++){const s=(a[n]?.startsWith("/")?a[n]:`/${a[n]}`).split("/").filter(Boolean),i=e.split("/").filter(Boolean);if(s.length!==i.length)continue;const c={};if(s.every((u,l)=>u.startsWith(":")?(c[u.slice(1)]=i[l],!0):u===i[l]))return{route:a[n],params:c}}return null},z=async(e,t)=>{const o=document.querySelector("#app");o&&await re(e,o,t)},Le=e=>{if($)return;const t=new URL(window.location.href).hostname.split(".")[0].split("-")[1],o=Ie(t,e),a=new Blob([JSON.stringify(o)],{type:"application/json"}),n=URL.createObjectURL(a),r=document.createElement("link");r.rel="manifest",r.href=n,document.head.appendChild(r),$=!0};function Ie(e,t){return{name:`${b||t.title||t.slug||e} - ${e}`,short_name:`${b||e}`,start_url:location.origin+"/index.html",display:"standalone",theme_color:e?"#ff6600":"#ffffff",icons:[{src:`${location.origin}/icons/icon-192x192.png`,sizes:"192x192",type:"image/png"},{src:`${location.origin}/icons/icon-512x512.png`,sizes:"512x512",type:"image/png"}]}}const Pe=async e=>{try{localStorage.removeItem(k);const t=new p;t.name="entity",t.typeConnection="the_entity_s_project",t.reverse=!0;const o=new p;o.name="project",o.conceptIds=[e],o.freeschemaQueries=[t],o.outputFormat=se;const a=await L(o,"");if(!a?.[0]?.the_project?.the_entity_s_project_reverse?.[0]?.id)return;a?.[0]?.the_project?.the_entity_s_project_reverse?.length==1&&localStorage.setItem(k,btoa(a[0].the_project.the_entity_s_project_reverse[0].id.toString()));for(let n=0;n<a?.[0]?.the_project?.the_entity_s_project_reverse?.length;n++)(a?.[0]?.the_project?.the_entity_s_project_reverse[n]).id!=102176333&&localStorage.setItem(k,btoa(a[0].the_project.the_entity_s_project_reverse[0].id.toString()))}catch(t){console.error(t)}};async function Se(e){try{const t=new p;t.name="store",t.typeConnection="the_project_refers",t.selectors=["the_store_name","the_store_logo"];const o=new p;o.name="project",o.conceptIds=[e],o.freeschemaQueries=[t];const n=(await L(o,""))?.[0]?.the_project?.the_project_refers?.the_store,r=n?.the_store_name?.the_name;document.title=r||"Store",V(n?.the_store_logo?.the_logo)}catch(t){console.error(t)}}function Ae(e){return new Promise((t,o)=>{const a=new Image;a.crossOrigin="anonymous",a.src=e,a.onload=()=>{const r=document.createElement("canvas");r.width=r.height=512;const s=r.getContext("2d");s?.clearRect(0,0,r.width,r.height);const i=a.width/a.height;let c=512,d=512;i>1?d=512/i:c=512*i;const u=(512-c)/2,l=(512-d)/2;s?.drawImage(a,u,l,c,d);const h=r.toDataURL("image/png");t(h)},a.onerror=()=>{o(new Error("Image failed to load. Check CORS."))}})}async function Ce(e){const o=(await v())?.token;let a=new p;a.name="page",a.typeConnection=`the_${y.PROJECT_COMP_NAME}_${be.PROJECT_PAGE_LINKER}`,a.selectors=[`the_${y.PAGE_COMP_NAME}_title`,`the_${y.PAGE_COMP_NAME}_slug`,`the_${y.PAGE_COMP_NAME}_body`];let n=new p;n.name="project",n.conceptIds=[e],n.selectors=[`the_${y.PROJECT_COMP_NAME}_name`,`the_${y.PROJECT_COMP_NAME}_main_page`],n.freeschemaQueries=[a],n.outputFormat=ie;const r=await L(n,o);let s={mainPageId:r?.[0]?.data?.the_project?.the_project_main_page?.id,name:r?.[0]?.data?.the_project?.the_project_name?.data.the_name||"",pages:r?.[0]?.data?.the_project?.the_project_s_page?.map(i=>({id:i?.id,title:i?.data?.the_page?.the_page_title?.data?.the_title||"",path:i?.data?.the_page?.the_page_slug?.data?.the_slug||"",page:i?.data?.the_page?.the_page_body?.id}))||[]};E=s.mainPageId,b=s.name,_=s.pages}function V(e=""){var t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.head.appendChild(t),setTimeout(()=>t?.remove(),1e4)),e&&Ae(e).then(o=>{t.href=o}).catch(o=>{console.error(o),t.href="https://boomconcole.com/freeschema/127b5f42-f453-4904-bf4d-d2a6abc9327c.png"})}const A=[{path:"/",linkLabel:"Home",content:async()=>(await g(()=>import("./home.index-Ox0uWUjY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))).default},{path:"/preview",linkLabel:"Preview",content:async()=>(await g(()=>import("./preview.index-aQubTSex.js"),__vite__mapDeps([15,3,1]))).default},{path:"/page-preview/:id",linkLabel:"Page Preview",content:async()=>(await g(()=>import("./page-preview.index-CJ9FPNCz.js"),__vite__mapDeps([16,3,2,4,5,6,7,8,9,10,17]))).default,isAuthenticated:!0},{path:"/documentation",linkLabel:"Documentation",content:async()=>(await g(()=>import("./documentation.index-to1kfjYz.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,19,20,11,12,13,21]))).default},{path:"/subscription",linkLabel:"Subscription",content:async()=>(await g(()=>import("./subscription.index-W_HgqprK.js"),__vite__mapDeps([22,3,1,2,4,5,6,7,8,9,10,11,12,13,21]))).default,isAuthenticated:!0},{path:"/video-tutorial",linkLabel:"videos",content:async()=>(await g(()=>import("./video-tutorial.index-s6ZjrKg5.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12,13,24]))).default},{path:"/Community",linkLabel:"Community",content:async()=>(await g(()=>import("./community.index-BnWweVX4.js"),__vite__mapDeps([25,3,1,11,2,4,5,6,7,8,9,10,12,13,26]))).default}],M=document.getElementById("app"),Te=()=>{let e=localStorage?.getItem("profile")||"";return e?!!JSON.parse(e)?.token:!1},Oe=e=>new RegExp("^"+e.replace(/:\w+/g,"(.+)")+"$"),j=e=>{const t=e.result.slice(1),o=Array.from(e.route.path.matchAll(/:(\w+)/g)).map(a=>a[1]);return Object.fromEntries(o.map((a,n)=>[a,t[n]]))},U=async()=>{const e=new URLSearchParams(location.search);return Object.fromEntries(e.entries())};async function T(){let t=A.map(n=>({route:n,result:location.pathname.match(Oe(n.path))})).find(n=>n.result!==null);if(!t)t={route:A.find(r=>r.path==="/404"),result:[location.pathname]};else if(t?.route?.isAuthenticated&&!Te()){const s=A.find(i=>i.path==="/");t={route:s,result:s?.path},history.pushState(null,"",s?.path)}const o=await t.route.content({...await j(t),...await U()}),a=new o({...await j(t),...await U()});M.innerHTML="",await a?.mount(M)}const G=async e=>{const t=document.getElementById("global-loader");t?.classList.remove("d-none");try{history.pushState(null,"",e),await T()}finally{t?.classList.add("d-none")}},Qe=async e=>{window.history.pushState({route:e},"",e),T()},Re=()=>{const e=window.location.pathname+window.location.search;G(e)},$e=()=>{customElements.define("router-link",class extends HTMLElement{constructor(){super(),this.handleClick=this.handleClick.bind(this),this.href&&this.attachShadow({mode:"open"})}connectedCallback(){if(this.href){const e=document.createElement("a");e.href=this.href,this.forwardAttributes(e),e.setAttribute("part","link");const t=document.createElement("slot");e.appendChild(t),this.shadowRoot&&this.shadowRoot.appendChild(e),this.addEventListener("click",this.handleClick),e.href&&this.setAttribute("href",e.href)}else this.addEventListener("click",this.handleClick)}forwardAttributes(e){["target","download","rel","hreflang","type","title","tabindex","accesskey"].forEach(o=>{this.hasAttribute(o)&&e.setAttribute(o,this.getAttribute(o))})}disconnectedCallback(){this.removeEventListener("click",this.handleClick)}handleClick(e){const t=this.getAttribute("target"),o=this.getAttribute("href");t==="_blank"||e.ctrlKey||e.metaKey||e.button===1||this.hasAttribute("download")||o&&!o.startsWith("http")&&!o.startsWith("//")&&(e.preventDefault(),G(o))}set href(e){this.setAttribute("href",e);const t=this.shadowRoot&&this.shadowRoot.querySelector("a");t&&(t.href=e)}get href(){return this.getAttribute("href")}set target(e){e&&this.setAttribute("target",e)}get target(){return this.getAttribute("target")}})};function Ne(){Re(),$e(),window.addEventListener("popstate",T)}const xe=async()=>{const e=["localhost","visualwidget.boomconcole.com","develop.freeschema.com"],t=window.location.hostname,o=t.split(".")?.[0]?.match(/preview-(\d+)/)?.[1];if(o)I(parseInt(o));else if(e.includes(t))await g(()=>import("./initialLoadWICO-sEsJ_eLO.js"),__vite__mapDeps([27,3,12,2,4,5,6,7,8,9,10,13])),Ne();else try{Me(t)}catch(a){console.error(a),P()}};function P(){const e=document.getElementById("global-loader");e&&e.setAttribute("style","display: none !important");const t=document.getElementById("app");t&&(t.innerHTML="<h1>404</h1>")}function Me(e=""){try{const t=JSON.parse(sessionStorage.getItem("cacheServers")??"[]")||[],o=t.length>0&&t?.[0]!="https://boomconsole.com"?t[0]:"https://deploy.freeschema.com",a=new URLSearchParams;a.append("url",e),console.log("server",o),fetch(o+"/api/project-deploy",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}).then(async n=>{const r=await n.json();ve(r.data)}).catch(n=>{console.error(n),D(e);try{const s=JSON.parse(sessionStorage.getItem("domainRecord")??"{}");if(s&&s.expiresAt>Date.now()){const i=s.value;i&&I(parseInt(i));return}}catch(r){console.error(r),P()}})}catch(t){console.error(t),D(e)}}function D(e=""){const t=new URLSearchParams;t.append("url",e),fetch(f.baseURL+"/dns/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then(async o=>{const a=await o.json();if(!a)je();else{const n=a?.startsWith("http")?a:"http://"+a,s=new URL(n).hostname?.split(".")?.[0]?.match(/preview-(\d+)/)?.[1];if(s)I(parseInt(s));else throw new Error("Path Not Valid")}}).catch(o=>{console.error(o),P()})}function je(){fetch(f.baseURL+"/cname").then(async e=>{const t=await e.json()||[];if(t?.[0]){const o=t[0]?.startsWith("http")?t[0]:"http://"+t[0],n=new URL(o).hostname?.split(".")?.[0]?.match(/preview-(\d+)/)?.[1];if(n)I(parseInt(n));else throw new Error("Path Not Valid")}else throw new Error("Doamin Not Found")}).catch(e=>{console.error(e),P()})}let Y=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),Y=e});const Ue={activate:f.enableSW,scope:"/",pathToSW:"/serviceWorker.bundle.js",manual:!0};await we();ce(f?.boomURL,f?.aiURL,"",f?.baseNodeUrl,void 0,"widget_conceptualizer",Ue,{logApplication:!1,logPackage:!1,isTest:!1,accessTracker:!1},{logserver:f.logserver});const De=await v();W(De?.token);xe();window.PWAInstallHandler=(()=>{let e=null,t=null,o=null;return{init:({onInstall:s,onDismiss:i})=>{t=s,o=i,e=Y,window.addEventListener("appinstalled",()=>{console.log("PWA installed successfully!"),t&&t()})},isInstalled:()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator?.standalone,showInstallPrompt:()=>{console.log("deferedPrompt",e),e&&(e.prompt(),e.userChoice.then(s=>{s.outcome==="accepted"?(console.log("User installed the PWA."),t&&t()):(console.log("User dismissed the install prompt."),o&&o()),e=null}))}}})();export{w as A,y as C,be as L,he as a,de as b,Fe as c,Je as d,f as e,_e as f,v as g,qe as h,G as r,Be as s,Qe as u};
